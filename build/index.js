/*!
 * 
 *   sprotty-routing-libavoid v1.0.3
 *   https://github.com/Aksem/sprotty-routing-libavoid
 *
 *   Copyright (c) Vladyslav Hnatiuk and project contributors.
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.MyLibrary=e():t.MyLibrary=e()}(global,(function(){return(()=>{var t={3787:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9245),c=n(3834),s=n(9029),u=n(1294),d=n(8480),l=n(6536),p=n(8848),f=n(9672),y=function(){function t(){this.postponedActions=[],this.requests=new Map}return t.prototype.initialize=function(){var t=this;return this.initialized||(this.initialized=this.actionHandlerRegistryProvider().then((function(e){t.actionHandlerRegistry=e,t.handleAction(new l.SetModelAction(u.EMPTY_ROOT))}))),this.initialized},t.prototype.dispatch=function(t){var e=this;return this.initialize().then((function(){return void 0!==e.blockUntil?e.handleBlocked(t,e.blockUntil):e.diagramLocker.isAllowed(t)?e.handleAction(t):void 0}))},t.prototype.dispatchAll=function(t){var e=this;return Promise.all(t.map((function(t){return e.dispatch(t)})))},t.prototype.request=function(t){if(!t.requestId)return Promise.reject(new Error("Request without requestId"));var e=new s.Deferred;return this.requests.set(t.requestId,e),this.dispatch(t),e.promise},t.prototype.handleAction=function(t){if(t.kind===p.UndoAction.KIND)return this.commandStack.undo().then((function(){}));if(t.kind===p.RedoAction.KIND)return this.commandStack.redo().then((function(){}));if(f.isResponseAction(t)){if(void 0!==(o=this.requests.get(t.responseId))){if(this.requests.delete(t.responseId),t.kind===f.RejectAction.KIND){var e=t;o.reject(new Error(e.message)),this.logger.warn(this,"Request with id "+t.responseId+" failed.",e.message,e.detail)}else o.resolve(t);return Promise.resolve()}this.logger.log(this,"No matching request for response",t)}var n=this.actionHandlerRegistry.get(t.kind);if(0===n.length){this.logger.warn(this,"Missing handler for action",t);var o,r=new Error("Missing handler for action '"+t.kind+"'");if(f.isRequestAction(t))void 0!==(o=this.requests.get(t.requestId))&&(this.requests.delete(t.requestId),o.reject(r));return Promise.reject(r)}this.logger.log(this,"Handle",t);for(var i=[],a=0,c=n;a<c.length;a++){var s=c[a].handle(t);f.isAction(s)?i.push(this.dispatch(s)):void 0!==s&&(i.push(this.commandStack.execute(s)),this.blockUntil=s.blockUntil)}return Promise.all(i)},t.prototype.handleBlocked=function(t,e){var n=this;if(e(t)){this.blockUntil=void 0;var o=this.handleAction(t),r=this.postponedActions;this.postponedActions=[];for(var i=0,a=r;i<a.length;i++){var c=a[i];this.dispatch(c.action).then(c.resolve,c.reject)}return o}return this.logger.log(this,"Action is postponed due to block condition",t),new Promise((function(e,o){n.postponedActions.push({action:t,resolve:e,reject:o})}))},r([a.inject(c.TYPES.ActionHandlerRegistryProvider),i("design:type",Function)],t.prototype,"actionHandlerRegistryProvider",void 0),r([a.inject(c.TYPES.ICommandStack),i("design:type",Object)],t.prototype,"commandStack",void 0),r([a.inject(c.TYPES.ILogger),i("design:type",Object)],t.prototype,"logger",void 0),r([a.inject(c.TYPES.AnimationFrameSyncer),i("design:type",d.AnimationFrameSyncer)],t.prototype,"syncer",void 0),r([a.inject(c.TYPES.IDiagramLocker),i("design:type",Object)],t.prototype,"diagramLocker",void 0),t=r([a.injectable()],t)}();e.ActionDispatcher=y},6691:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(3834),l=n(1384),p=n(7368),f=function(t){function e(e,n){var o=t.call(this)||this;return e.forEach((function(t){return o.register(t.actionKind,t.factory())})),n.forEach((function(t){return o.initializeActionHandler(t)})),o}return i(e,t),e.prototype.initializeActionHandler=function(t){t.initialize(this)},e=a([u.injectable(),s(0,u.multiInject(d.TYPES.ActionHandlerRegistration)),s(0,u.optional()),s(1,u.multiInject(d.TYPES.IActionHandlerInitializer)),s(1,u.optional()),c("design:paramtypes",[Array,Array])],e)}(l.MultiInstanceRegistry);e.ActionHandlerRegistry=f,e.configureActionHandler=function(t,e,n){if("function"==typeof n){if(!p.isInjectable(n))throw new Error("Action handlers should be @injectable: "+n.name);t.isBound(n)||t.bind(n).toSelf()}t.bind(d.TYPES.ActionHandlerRegistration).toDynamicValue((function(t){return{actionKind:e,factory:function(){return t.container.get(n)}}}))},e.onAction=function(t,e,n){t.bind(d.TYPES.ActionHandlerRegistration).toConstantValue({actionKind:e,factory:function(){return{handle:n}}})}},9672:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2703);function r(t){return o.hasOwnProperty(t,"kind","string")}e.isAction=r,e.isRequestAction=function(t){return r(t)&&o.hasOwnProperty(t,"requestId","string")};var i=1;e.generateRequestId=function(){return(i++).toString()},e.isResponseAction=function(t){return r(t)&&o.hasOwnProperty(t,"responseId","string")&&""!==t.responseId};var a=function(){function t(e,n,o){this.message=e,this.responseId=n,this.detail=o,this.kind=t.KIND}return t.KIND="rejectRequest",t}();e.RejectAction=a;var c=function(t,e,n){this.label=t,this.actions=e,this.icon=n};e.LabeledAction=c,e.isLabeledAction=function(t){return void 0!==t&&void 0!==t.label&&void 0!==t.actions}},3971:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9245),a=function(){function t(){}return t.prototype.isAllowed=function(t){return!0},t=r([i.injectable()],t)}();e.DefaultDiagramLocker=a},8480:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9245),a=function(){function t(){this.tasks=[],this.endTasks=[],this.triggered=!1}return t.prototype.isAvailable=function(){return"function"==typeof requestAnimationFrame},t.prototype.onNextFrame=function(t){this.tasks.push(t),this.trigger()},t.prototype.onEndOfNextFrame=function(t){this.endTasks.push(t),this.trigger()},t.prototype.trigger=function(){var t=this;this.triggered||(this.triggered=!0,this.isAvailable()?requestAnimationFrame((function(e){return t.run(e)})):setTimeout((function(e){return t.run(e)})))},t.prototype.run=function(t){var e=this.tasks,n=this.endTasks;this.triggered=!1,this.tasks=[],this.endTasks=[],e.forEach((function(e){return e.call(void 0,t)})),n.forEach((function(e){return e.call(void 0,t)}))},t=r([i.injectable()],t)}();e.AnimationFrameSyncer=a},4633:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1638),a=function(){function t(t,e){void 0===e&&(e=i.easeInOut),this.context=t,this.ease=e}return t.prototype.start=function(){var t=this;return new Promise((function(e,n){var o=void 0,r=0;if(t.context.syncer.isAvailable())t.context.syncer.onNextFrame((function n(i){var a;r++,void 0===o?(o=i,a=0):a=i-o;var c=Math.min(1,a/t.context.duration),s=t.tween(t.ease(c),t.context);t.context.modelChanged.update(s),1===c?(t.context.logger.log(t,1e3*r/t.context.duration+" fps"),e(s)):t.context.syncer.onNextFrame(n)}));else{var i=t.tween(1,t.context);e(i)}}))},t}();e.Animation=a;var c=function(t){function e(e,n,o,r){void 0===o&&(o=[]),void 0===r&&(r=i.easeInOut);var a=t.call(this,n,r)||this;return a.model=e,a.context=n,a.components=o,a.ease=r,a}return r(e,t),e.prototype.include=function(t){return this.components.push(t),this},e.prototype.tween=function(t,e){for(var n=0,o=this.components;n<o.length;n++){o[n].tween(t,e)}return this.model},e}(a);e.CompoundAnimation=c},1638:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.easeInOut=function(t){return t<.5?t*t*2:1-(1-t)*(1-t)*2}},4588:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(7368),u=n(3834),d=function(){function t(t){this.commandRegistration=t}return t.prototype.handle=function(t){return this.commandRegistration.factory(t)},t}();e.CommandActionHandler=d;var l=function(){function t(t){this.registrations=t}return t.prototype.initialize=function(t){this.registrations.forEach((function(e){return t.register(e.kind,new d(e))}))},t=r([c.injectable(),a(0,c.multiInject(u.TYPES.CommandRegistration)),a(0,c.optional()),i("design:paramtypes",[Array])],t)}();e.CommandActionHandlerInitializer=l,e.configureCommand=function(t,e){if(!s.isInjectable(e))throw new Error("Commands should be @injectable: "+e.name);t.isBound(e)||t.bind(e).toSelf(),t.bind(u.TYPES.CommandRegistration).toDynamicValue((function(t){return{kind:e.KIND,factory:function(n){var o=new c.Container;return o.parent=t.container,o.bind(u.TYPES.Action).toConstantValue(n),o.get(e)}}}))}},894:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(2703),r=n(3834);e.overrideCommandStackOptions=function(t,e){var n=t.get(r.TYPES.CommandStackOptions);return o.safeAssign(n,e),n}},9686:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)},i=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(3834),u=n(1294),d=n(3682),l=n(8480),p=n(4051),f=function(){function t(){this.undoStack=[],this.redoStack=[],this.offStack=[]}return t.prototype.initialize=function(){this.currentPromise=Promise.resolve({main:{model:this.modelFactory.createRoot(u.EMPTY_ROOT),modelChanged:!1},hidden:{model:this.modelFactory.createRoot(u.EMPTY_ROOT),modelChanged:!1},popup:{model:this.modelFactory.createRoot(u.EMPTY_ROOT),modelChanged:!1}})},Object.defineProperty(t.prototype,"currentModel",{get:function(){return this.currentPromise.then((function(t){return t.main.model}))},enumerable:!0,configurable:!0}),t.prototype.executeAll=function(t){var e=this;return t.forEach((function(t){e.logger.log(e,"Executing",t),e.handleCommand(t,t.execute,e.mergeOrPush)})),this.thenUpdate()},t.prototype.execute=function(t){return this.logger.log(this,"Executing",t),this.handleCommand(t,t.execute,this.mergeOrPush),this.thenUpdate()},t.prototype.undo=function(){var t=this;this.undoOffStackSystemCommands(),this.undoPreceedingSystemCommands();var e=this.undoStack[this.undoStack.length-1];return void 0===e||this.isBlockUndo(e)||(this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,(function(e,n){t.redoStack.push(e)}))),this.thenUpdate()},t.prototype.redo=function(){var t=this;this.undoOffStackSystemCommands();var e=this.redoStack.pop();return void 0!==e&&(this.logger.log(this,"Redoing",e),this.handleCommand(e,e.redo,(function(e,n){t.pushToUndoStack(e)}))),this.redoFollowingSystemCommands(),this.thenUpdate()},t.prototype.handleCommand=function(t,e,n){var o=this;this.currentPromise=this.currentPromise.then((function(r){return new Promise((function(i){var a;a=t instanceof p.HiddenCommand?"hidden":t instanceof p.PopupCommand?"popup":"main";var c,s=o.createContext(r.main.model);try{c=e.call(t,s)}catch(t){o.logger.error(o,"Failed to execute command:",t),c=r[a].model}var u=y(r);c instanceof Promise?c.then((function(e){"main"===a&&n.call(o,t,s),u[a]={model:e,modelChanged:!0},i(u)})):c instanceof d.SModelRoot?("main"===a&&n.call(o,t,s),u[a]={model:c,modelChanged:!0},i(u)):("main"===a&&n.call(o,t,s),u[a]={model:c.model,modelChanged:r[a].modelChanged||c.modelChanged,cause:c.cause},i(u))}))}))},t.prototype.pushToUndoStack=function(t){this.undoStack.push(t),this.options.undoHistoryLimit>=0&&this.undoStack.length>this.options.undoHistoryLimit&&this.undoStack.splice(0,this.undoStack.length-this.options.undoHistoryLimit)},t.prototype.thenUpdate=function(){var t=this;return this.currentPromise=this.currentPromise.then((function(e){var n=y(e);return e.hidden.modelChanged&&(t.updateHidden(e.hidden.model,e.hidden.cause),n.hidden.modelChanged=!1,n.hidden.cause=void 0),e.main.modelChanged&&(t.update(e.main.model,e.main.cause),n.main.modelChanged=!1,n.main.cause=void 0),e.popup.modelChanged&&(t.updatePopup(e.popup.model,e.popup.cause),n.popup.modelChanged=!1,n.popup.cause=void 0),n})),this.currentModel},t.prototype.update=function(t,e){void 0===this.modelViewer&&(this.modelViewer=this.viewerProvider.modelViewer),this.modelViewer.update(t,e)},t.prototype.updateHidden=function(t,e){void 0===this.hiddenModelViewer&&(this.hiddenModelViewer=this.viewerProvider.hiddenModelViewer),this.hiddenModelViewer.update(t,e)},t.prototype.updatePopup=function(t,e){void 0===this.popupModelViewer&&(this.popupModelViewer=this.viewerProvider.popupModelViewer),this.popupModelViewer.update(t,e)},t.prototype.mergeOrPush=function(t,e){var n=this;if(this.isBlockUndo(t))return this.undoStack=[],this.redoStack=[],this.offStack=[],void this.pushToUndoStack(t);if(this.isPushToOffStack(t)&&this.redoStack.length>0){if(this.offStack.length>0&&(o=this.offStack[this.offStack.length-1])instanceof p.MergeableCommand&&o.merge(t,e))return;this.offStack.push(t)}else if(this.isPushToUndoStack(t)){var o;if(this.offStack.forEach((function(t){return n.undoStack.push(t)})),this.offStack=[],this.redoStack=[],this.undoStack.length>0)if((o=this.undoStack[this.undoStack.length-1])instanceof p.MergeableCommand&&o.merge(t,e))return;this.pushToUndoStack(t)}},t.prototype.undoOffStackSystemCommands=function(){for(var t=this.offStack.pop();void 0!==t;)this.logger.log(this,"Undoing off-stack",t),this.handleCommand(t,t.undo,(function(){})),t=this.offStack.pop()},t.prototype.undoPreceedingSystemCommands=function(){for(var t=this,e=this.undoStack[this.undoStack.length-1];void 0!==e&&this.isPushToOffStack(e);)this.undoStack.pop(),this.logger.log(this,"Undoing",e),this.handleCommand(e,e.undo,(function(e,n){t.redoStack.push(e)})),e=this.undoStack[this.undoStack.length-1]},t.prototype.redoFollowingSystemCommands=function(){for(var t=this,e=this.redoStack[this.redoStack.length-1];void 0!==e&&this.isPushToOffStack(e);)this.redoStack.pop(),this.logger.log(this,"Redoing ",e),this.handleCommand(e,e.redo,(function(e,n){t.pushToUndoStack(e)})),e=this.redoStack[this.redoStack.length-1]},t.prototype.createContext=function(t){return{root:t,modelChanged:this,modelFactory:this.modelFactory,duration:this.options.defaultDuration,logger:this.logger,syncer:this.syncer}},t.prototype.isPushToOffStack=function(t){return t instanceof p.SystemCommand},t.prototype.isPushToUndoStack=function(t){return!(t instanceof p.HiddenCommand)},t.prototype.isBlockUndo=function(t){return t instanceof p.ResetCommand},i([c.inject(s.TYPES.IModelFactory),a("design:type",Object)],t.prototype,"modelFactory",void 0),i([c.inject(s.TYPES.IViewerProvider),a("design:type",Object)],t.prototype,"viewerProvider",void 0),i([c.inject(s.TYPES.ILogger),a("design:type",Object)],t.prototype,"logger",void 0),i([c.inject(s.TYPES.AnimationFrameSyncer),a("design:type",l.AnimationFrameSyncer)],t.prototype,"syncer",void 0),i([c.inject(s.TYPES.CommandStackOptions),a("design:type",Object)],t.prototype,"options",void 0),i([c.postConstruct(),a("design:type",Function),a("design:paramtypes",[]),a("design:returntype",void 0)],t.prototype,"initialize",null),t=i([c.injectable()],t)}();function y(t){return{main:r({},t.main),hidden:r({},t.hidden),popup:r({},t.popup)}}e.CommandStack=f},4051:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=function(){function t(){}return t=a([c.injectable()],t)}();e.Command=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.merge=function(t,e){return!1},e=a([c.injectable()],e)}(s);e.MergeableCommand=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.undo=function(t){return t.logger.error(this,"Cannot undo a hidden command"),t.root},e.prototype.redo=function(t){return t.logger.error(this,"Cannot redo a hidden command"),t.root},e=a([c.injectable()],e)}(s);e.HiddenCommand=d;var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e=a([c.injectable()],e)}(s);e.PopupCommand=l;var p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e=a([c.injectable()],e)}(s);e.SystemCommand=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e=a([c.injectable()],e)}(s);e.ResetCommand=f},4344:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(9245),u=n(3834),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.execute=function(t){var e=this.retrieveResult(t);return this.actionDispatcher.dispatch(e),{model:t.root,modelChanged:!1}},e.prototype.undo=function(t){return{model:t.root,modelChanged:!1}},e.prototype.redo=function(t){return{model:t.root,modelChanged:!1}},a([s.inject(u.TYPES.IActionDispatcher),c("design:type",Object)],e.prototype,"actionDispatcher",void 0),e=a([s.injectable()],e)}(n(4051).SystemCommand);e.ModelRequestCommand=d},8973:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(4228),a=n(7326),c=n(3787),s=n(6691),u=n(9686),d=n(1294),l=n(8480),p=n(6901),f=n(3552),y=n(5504),h=n(1886),g=n(3921),_=n(1267),m=n(4034),v=n(4715),b=n(2077),S=n(4588),P=n(1839),w=n(9981),O=n(2721),E=n(6536),R=n(594),T=n(3971),I=new o.ContainerModule((function(t,e,n){t(r.TYPES.ILogger).to(a.NullLogger).inSingletonScope(),t(r.TYPES.LogLevel).toConstantValue(a.LogLevel.warn),t(r.TYPES.SModelRegistry).to(d.SModelRegistry).inSingletonScope(),t(s.ActionHandlerRegistry).toSelf().inSingletonScope(),t(r.TYPES.ActionHandlerRegistryProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(s.ActionHandlerRegistry))}))}})),t(r.TYPES.ViewRegistry).to(_.ViewRegistry).inSingletonScope(),t(r.TYPES.IModelFactory).to(d.SModelFactory).inSingletonScope(),t(r.TYPES.IActionDispatcher).to(c.ActionDispatcher).inSingletonScope(),t(r.TYPES.IActionDispatcherProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(r.TYPES.IActionDispatcher))}))}})),t(r.TYPES.IDiagramLocker).to(T.DefaultDiagramLocker).inSingletonScope(),t(r.TYPES.IActionHandlerInitializer).to(S.CommandActionHandlerInitializer),t(r.TYPES.ICommandStack).to(u.CommandStack).inSingletonScope(),t(r.TYPES.ICommandStackProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(r.TYPES.ICommandStack))}))}})),t(r.TYPES.CommandStackOptions).toConstantValue({defaultDuration:250,undoHistoryLimit:50}),t(p.ModelViewer).toSelf().inSingletonScope(),t(p.HiddenModelViewer).toSelf().inSingletonScope(),t(p.PopupModelViewer).toSelf().inSingletonScope(),t(r.TYPES.ModelViewer).toDynamicValue((function(t){var e=t.container.createChild();return e.bind(r.TYPES.IViewer).toService(p.ModelViewer),e.bind(m.ViewerCache).toSelf(),e.get(m.ViewerCache)})).inSingletonScope(),t(r.TYPES.PopupModelViewer).toDynamicValue((function(t){var e=t.container.createChild();return e.bind(r.TYPES.IViewer).toService(p.PopupModelViewer),e.bind(m.ViewerCache).toSelf(),e.get(m.ViewerCache)})).inSingletonScope(),t(r.TYPES.HiddenModelViewer).toService(p.HiddenModelViewer),t(r.TYPES.IViewerProvider).toDynamicValue((function(t){return{get modelViewer(){return t.container.get(r.TYPES.ModelViewer)},get hiddenModelViewer(){return t.container.get(r.TYPES.HiddenModelViewer)},get popupModelViewer(){return t.container.get(r.TYPES.PopupModelViewer)}}})),t(r.TYPES.ViewerOptions).toConstantValue(f.defaultViewerOptions()),t(r.TYPES.PatcherProvider).to(p.PatcherProvider).inSingletonScope(),t(r.TYPES.DOMHelper).to(v.DOMHelper).inSingletonScope(),t(r.TYPES.ModelRendererFactory).toFactory((function(t){return function(e,n,o){void 0===o&&(o={});var i=t.container.get(r.TYPES.ViewRegistry);return new p.ModelRenderer(i,e,n,o)}})),t(b.IdPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(b.IdPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(b.IdPostprocessor),t(P.CssClassPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(P.CssClassPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(P.CssClassPostprocessor),t(y.MouseTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(y.MouseTool),t(h.KeyTool).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(h.KeyTool),t(g.FocusFixPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(g.FocusFixPostprocessor),t(r.TYPES.PopupVNodePostprocessor).toService(b.IdPostprocessor),t(y.PopupMouseTool).toSelf().inSingletonScope(),t(r.TYPES.PopupVNodePostprocessor).toService(y.PopupMouseTool),t(r.TYPES.AnimationFrameSyncer).to(l.AnimationFrameSyncer).inSingletonScope();var o={bind:t,isBound:n};S.configureCommand(o,i.InitializeCanvasBoundsCommand),t(i.CanvasBoundsInitializer).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.CanvasBoundsInitializer),S.configureCommand(o,E.SetModelCommand),t(r.TYPES.IToolManager).to(w.ToolManager).inSingletonScope(),t(r.TYPES.KeyListener).to(w.DefaultToolsEnablingKeyListener),t(w.ToolManagerActionHandler).toSelf().inSingletonScope(),s.configureActionHandler(o,O.EnableDefaultToolsAction.KIND,w.ToolManagerActionHandler),s.configureActionHandler(o,O.EnableToolsAction.KIND,w.ToolManagerActionHandler),t(r.TYPES.UIExtensionRegistry).to(R.UIExtensionRegistry).inSingletonScope(),S.configureCommand(o,R.SetUIExtensionVisibilityCommand),t(y.MousePositionTracker).toSelf().inSingletonScope(),t(r.TYPES.MouseListener).toService(y.MousePositionTracker)}));e.default=I},4228:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(3834),l=n(3199),p=n(3682),f=n(4051),y=n(8126),h=function(){function t(){}return t.prototype.decorate=function(t,e){return e instanceof p.SModelRoot&&!l.isValidDimension(e.canvasBounds)&&(this.rootAndVnode=[e,t]),t},t.prototype.postUpdate=function(){if(void 0!==this.rootAndVnode){var t=this.rootAndVnode[1].elm,e=this.rootAndVnode[0].canvasBounds;if(void 0!==t){var n=this.getBoundsInPage(t);l.almostEquals(n.x,e.x)&&l.almostEquals(n.y,e.y)&&l.almostEquals(n.width,e.width)&&l.almostEquals(n.height,e.width)||this.actionDispatcher.dispatch(new g(n))}this.rootAndVnode=void 0}},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n=y.getWindowScroll();return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},a([u.inject(d.TYPES.IActionDispatcher),c("design:type",Object)],t.prototype,"actionDispatcher",void 0),t=a([u.injectable()],t)}();e.CanvasBoundsInitializer=h;var g=function(){function t(e){this.newCanvasBounds=e,this.kind=t.KIND}return t.KIND="initializeCanvasBounds",t}();e.InitializeCanvasBoundsAction=g;var _=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return this.newCanvasBounds=this.action.newCanvasBounds,t.root.canvasBounds=this.newCanvasBounds,t.root},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND=g.KIND,e=a([u.injectable(),s(0,u.inject(d.TYPES.Action)),c("design:paramtypes",[g])],e)}(f.SystemCommand);e.InitializeCanvasBoundsCommand=_},6536:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(9672),l=n(4051),p=n(3834),f=n(4228),y=function(){function t(e,n){void 0===n&&(n=""),this.options=e,this.requestId=n,this.kind=t.KIND}return t.create=function(e){return new t(e,d.generateRequestId())},t.KIND="requestModel",t}();e.RequestModelAction=y;var h=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.responseId=n,this.kind=t.KIND}return t.KIND="setModel",t}();e.SetModelAction=h;var g=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return this.oldRoot=t.modelFactory.createRoot(t.root),this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===f.InitializeCanvasBoundsCommand.KIND}},enumerable:!0,configurable:!0}),e.KIND=h.KIND,e=a([u.injectable(),s(0,u.inject(p.TYPES.Action)),c("design:paramtypes",[h])],e)}(l.ResetCommand);e.SetModelCommand=g},1294:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(3834),l=n(1384),p=n(3682),f=function(){function t(){}return t.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var o=this.registry.get(t.type,void 0);if(!(o instanceof p.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=o}else n=new p.SChildElement;return this.initializeChild(n,t,e)},t.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof p.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else e=new p.SModelRoot;return this.initializeRoot(e,t)},t.prototype.createSchema=function(t){var e=this,n={};for(var o in t)if(!this.isReserved(t,o)){var r=t[o];"function"!=typeof r&&(n[o]=r)}return t instanceof p.SParentElement&&(n.children=t.children.map((function(t){return e.createSchema(t)}))),n},t.prototype.initializeElement=function(t,e){for(var n in e)if(!this.isReserved(t,n)){var o=e[n];"function"!=typeof o&&(t[n]=o)}return t},t.prototype.isReserved=function(t,e){if(["children","parent","index"].indexOf(e)>=0)return!0;var n=t;do{var o=Object.getOwnPropertyDescriptor(n,e);if(void 0!==o)return void 0!==o.get;n=Object.getPrototypeOf(n)}while(n);return!1},t.prototype.initializeParent=function(t,e){var n=this;return this.initializeElement(t,e),p.isParent(e)&&(t.children=e.children.map((function(e){return n.createElement(e,t)}))),t},t.prototype.initializeChild=function(t,e,n){return this.initializeParent(t,e),void 0!==n&&(t.parent=n),t},t.prototype.initializeRoot=function(t,e){return this.initializeParent(t,e),t.index.add(t),t},a([u.inject(d.TYPES.SModelRegistry),c("design:type",y)],t.prototype,"registry",void 0),t=a([u.injectable()],t)}();e.SModelFactory=f,e.EMPTY_ROOT=Object.freeze({type:"NONE",id:"EMPTY"});var y=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){var e=n.getDefaultFeatures(t.constr);if(!e&&t.features&&t.features.enable&&(e=[]),e){var o=h(e,t.features);n.register(t.type,(function(){var e=new t.constr;return e.features=o,e}))}else n.register(t.type,(function(){return new t.constr}))})),n}return i(e,t),e.prototype.getDefaultFeatures=function(t){var e=t;do{var n=e.DEFAULT_FEATURES;if(n)return n;e=Object.getPrototypeOf(e)}while(e)},e=a([u.injectable(),s(0,u.multiInject(d.TYPES.SModelElementRegistration)),s(0,u.optional()),c("design:paramtypes",[Array])],e)}(l.FactoryRegistry);function h(t,e){var n=new Set(t);if(e&&e.enable)for(var o=0,r=e.enable;o<r.length;o++){var i=r[o];n.add(i)}if(e&&e.disable)for(var a=0,c=e.disable;a<c.length;a++){i=c[a];n.delete(i)}return n}e.SModelRegistry=y,e.createFeatureSet=h},8127:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3834),r=n(3682);function i(t,e,n){if(e!==n){for(;e instanceof r.SChildElement;)if(t=e.localToParent(t),(e=e.parent)===n)return t;for(var o=[];n instanceof r.SChildElement;)o.push(n),n=n.parent;if(e!==n)throw new Error("Incompatible source and target: "+e.id+", "+n.id);for(var i=o.length-1;i>=0;i--)t=o[i].parentToLocal(t)}return t}e.registerModelElement=function(t,e,n,r){t.bind(o.TYPES.SModelElementRegistration).toConstantValue({type:e,constr:n,features:r})},e.getBasicType=function(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(0,e):t.type},e.getSubType=function(t){if(!t.type)return"";var e=t.type.indexOf(":");return e>=0?t.type.substring(e+1):t.type},e.findElement=function t(e,n){if(e.id===n)return e;if(void 0!==e.children)for(var o=0,r=e.children;o<r.length;o++){var i=t(r[o],n);if(void 0!==i)return i}},e.findParent=function(t,e){for(var n=t;void 0!==n;){if(e(n))return n;n=n instanceof r.SChildElement?n.parent:void 0}return n},e.findParentByFeature=function(t,e){for(var n=t;void 0!==n;){if(e(n))return n;n=n instanceof r.SChildElement?n.parent:void 0}return n},e.translatePoint=i,e.translateBounds=function(t,e,n){var o=i(t,e,n),r=i({x:t.x+t.width,y:t.y+t.height},e,n);return{x:o.x,y:o.y,width:r.x-o.x,height:r.y-o.y}},e.containsSome=function(t,e){return function e(n){return n.some((function(n){return function(e){return void 0!==t.index.getById(e.id)}(n)||e(n.children)}))}([e])}},3682:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3199),a=n(1933),c=function(){function t(){}return Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this;t;){if(t instanceof d)return t;t=t instanceof u?t.parent:void 0}throw new Error("Element has no root")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this.root.index},enumerable:!0,configurable:!0}),t.prototype.hasFeature=function(t){return void 0!==this.features&&this.features.has(t)},t}();e.SModelElement=c,e.isParent=function(t){var e=t.children;return void 0!==e&&e.constructor===Array};var s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=[],e}return r(e,t),e.prototype.add=function(t,e){var n=this.children;if(void 0===e)n.push(t);else{if(e<0||e>this.children.length)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(e,0,t)}t.parent=this,this.index.add(t)},e.prototype.remove=function(t){var e=this.children,n=e.indexOf(t);if(n<0)throw new Error("No such child "+t.id);e.splice(n,1),this.index.remove(t)},e.prototype.removeAll=function(t){var e=this,n=this.children;if(void 0!==t){for(var o=n.length-1;o>=0;o--)if(t(n[o])){var r=n.splice(o,1)[0];this.index.remove(r)}}else n.forEach((function(t){e.index.remove(t)})),n.splice(0,n.length)},e.prototype.move=function(t,e){var n=this.children,o=n.indexOf(t);if(-1===o)throw new Error("No such child "+t.id);if(e<0||e>n.length-1)throw new Error("Child index "+e+" out of bounds (0.."+n.length+")");n.splice(o,1),n.splice(e,0,t)},e.prototype.localToParent=function(t){return i.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e.prototype.parentToLocal=function(t){return i.isBounds(t)?t:{x:t.x,y:t.y,width:-1,height:-1}},e}(c);e.SParentElement=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(s);e.SChildElement=u;var d=function(t){function e(e){void 0===e&&(e=new f);var n=t.call(this)||this;return n.canvasBounds=i.EMPTY_BOUNDS,Object.defineProperty(n,"index",{value:e,writable:!1}),n}return r(e,t),e}(s);e.SModelRoot=d;var l="0123456789abcdefghijklmnopqrstuvwxyz";function p(t){void 0===t&&(t=8);for(var e="",n=0;n<t;n++)e+=l.charAt(Math.floor(Math.random()*l.length));return e}e.createRandomId=p;var f=function(){function t(){this.id2element=new Map}return t.prototype.add=function(t){if(t.id){if(this.contains(t))throw new Error("Duplicate ID in model: "+t.id)}else do{t.id=p()}while(this.contains(t));if(this.id2element.set(t.id,t),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var o=n[e];this.add(o),o instanceof u||(void 0===this.id2parent&&(this.id2parent=new Map),this.id2parent.set(o.id,t))}},t.prototype.remove=function(t){if(this.id2element.delete(t.id),void 0!==t.children&&t.children.constructor===Array)for(var e=0,n=t.children;e<n.length;e++){var o=n[e];o instanceof u||(void 0===this.id2parent&&(this.id2parent=new Map),this.id2parent.delete(o.id)),this.remove(o)}},t.prototype.contains=function(t){return this.id2element.has(t.id)},t.prototype.getById=function(t){return this.id2element.get(t)},t.prototype.getParent=function(t){if(void 0!==this.id2parent)return this.id2parent.get(t);var e=this.getById(t);return e instanceof u?e.parent:void 0},t.prototype.getRoot=function(t){if(void 0!==this.id2parent)for(var e=t;e;){var n=this.id2parent.get(e.id);if(void 0===n)return e;e=n}if(t instanceof u)return t.root;throw new Error("Element has no root")},t.prototype.getAttachedElements=function(t){return[]},t.prototype.all=function(){return a.mapIterable(this.id2element,(function(t){t[0];return t[1]}))},t}();e.SModelIndex=f},9981:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(9245),u=n(3834),d=n(2721),l=n(1886),p=n(6903),f=function(){function t(){this.tools=[],this.defaultTools=[],this.actives=[]}return Object.defineProperty(t.prototype,"managedTools",{get:function(){return this.defaultTools.concat(this.tools)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeTools",{get:function(){return this.actives},enumerable:!0,configurable:!0}),t.prototype.disableActiveTools=function(){this.actives.forEach((function(t){return t.disable()})),this.actives.splice(0,this.actives.length)},t.prototype.enableDefaultTools=function(){this.enable(this.defaultTools.map((function(t){return t.id})))},t.prototype.enable=function(t){var e=this;this.disableActiveTools(),t.map((function(t){return e.tool(t)})).forEach((function(t){void 0!==t&&(t.enable(),e.actives.push(t))}))},t.prototype.tool=function(t){return this.managedTools.find((function(e){return e.id===t}))},t.prototype.registerDefaultTools=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var r=o[n];this.defaultTools.push(r)}},t.prototype.registerTools=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,o=t;n<o.length;n++){var r=o[n];this.tools.push(r)}},t=a([s.injectable()],t)}();e.ToolManager=f;var y=function(){function t(){}return t.prototype.handle=function(t){switch(t.kind){case d.EnableDefaultToolsAction.KIND:this.toolManager.enableDefaultTools();break;case d.EnableToolsAction.KIND:this.toolManager.enable(t.toolIds)}},a([s.inject(u.TYPES.IToolManager),c("design:type",Object)],t.prototype,"toolManager",void 0),t=a([s.injectable()],t)}();e.ToolManagerActionHandler=y;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return p.matchesKeystroke(e,"Escape")?[new d.EnableDefaultToolsAction]:[]},e=a([s.injectable()],e)}(l.KeyListener);e.DefaultToolsEnablingKeyListener=h},2721:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(e){this.toolIds=e,this.kind=t.KIND}return t.KIND="enable-tools",t}();e.EnableToolsAction=n;var o=function(){function t(){this.kind=t.KIND}return t.KIND="enable-default-tools",t}();e.EnableDefaultToolsAction=o},3834:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TYPES={Action:Symbol("Action"),IActionDispatcher:Symbol("IActionDispatcher"),IActionDispatcherProvider:Symbol("IActionDispatcherProvider"),IActionHandlerInitializer:Symbol("IActionHandlerInitializer"),ActionHandlerRegistration:Symbol("ActionHandlerRegistration"),ActionHandlerRegistryProvider:Symbol("ActionHandlerRegistryProvider"),IAnchorComputer:Symbol("IAnchor"),AnimationFrameSyncer:Symbol("AnimationFrameSyncer"),IButtonHandler:Symbol("IButtonHandler"),ICommandPaletteActionProvider:Symbol("ICommandPaletteActionProvider"),ICommandPaletteActionProviderRegistry:Symbol("ICommandPaletteActionProviderRegistry"),CommandRegistration:Symbol("CommandRegistration"),ICommandStack:Symbol("ICommandStack"),CommandStackOptions:Symbol("CommandStackOptions"),ICommandStackProvider:Symbol("ICommandStackProvider"),IContextMenuItemProvider:Symbol.for("IContextMenuProvider"),IContextMenuProviderRegistry:Symbol.for("IContextMenuProviderRegistry"),IContextMenuService:Symbol.for("IContextMenuService"),IContextMenuServiceProvider:Symbol.for("IContextMenuServiceProvider"),DOMHelper:Symbol("DOMHelper"),IDiagramLocker:Symbol("IDiagramLocker"),IEdgeRouter:Symbol("IEdgeRouter"),IEdgeRoutePostprocessor:Symbol("IEdgeRoutePostprocessor"),IEditLabelValidationDecorator:Symbol("IEditLabelValidationDecorator"),IEditLabelValidator:Symbol("IEditLabelValidator"),HiddenModelViewer:Symbol("HiddenModelViewer"),HiddenVNodePostprocessor:Symbol("HiddenVNodeDecorator"),HoverState:Symbol("HoverState"),KeyListener:Symbol("KeyListener"),LayoutRegistration:Symbol("LayoutRegistration"),LayoutRegistry:Symbol("LayoutRegistry"),Layouter:Symbol("Layouter"),LogLevel:Symbol("LogLevel"),ILogger:Symbol("ILogger"),IModelFactory:Symbol("IModelFactory"),IModelLayoutEngine:Symbol("IModelLayoutEngine"),ModelRendererFactory:Symbol("ModelRendererFactory"),ModelSource:Symbol("ModelSource"),ModelSourceProvider:Symbol("ModelSourceProvider"),ModelViewer:Symbol("ModelViewer"),MouseListener:Symbol("MouseListener"),PatcherProvider:Symbol("PatcherProvider"),IPopupModelProvider:Symbol("IPopupModelProvider"),PopupModelViewer:Symbol("PopupModelViewer"),PopupMouseListener:Symbol("PopupMouseListener"),PopupVNodePostprocessor:Symbol("PopupVNodeDecorator"),SModelElementRegistration:Symbol("SModelElementRegistration"),SModelRegistry:Symbol("SModelRegistry"),ISnapper:Symbol("ISnapper"),SvgExporter:Symbol("SvgExporter"),IToolManager:Symbol("IToolManager"),IUIExtension:Symbol("IUIExtension"),UIExtensionRegistry:Symbol("UIExtensionRegistry"),IVNodePostprocessor:Symbol("IVNodePostprocessor"),ViewRegistration:Symbol("ViewRegistration"),ViewRegistry:Symbol("ViewRegistry"),IViewer:Symbol("IViewer"),ViewerOptions:Symbol("ViewerOptions"),IViewerProvider:Symbol("IViewerProvider")}},594:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}},u=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var d=n(9245),l=n(1384),p=n(4051),f=n(3834),y=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.id(),t)})),n}return i(e,t),e=a([d.injectable(),s(0,d.multiInject(f.TYPES.IUIExtension)),s(0,d.optional()),c("design:paramtypes",[Array])],e)}(l.InstanceRegistry);e.UIExtensionRegistry=y;var h=function(){function t(e,n,o){void 0===o&&(o=[]),this.extensionId=e,this.visible=n,this.contextElementsId=o,this.kind=t.KIND}return t.KIND="setUIExtensionVisibility",t}();e.SetUIExtensionVisibilityAction=h;var g=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){var e=this.registry.get(this.action.extensionId);return e&&(this.action.visible?e.show.apply(e,u([t.root],this.action.contextElementsId)):e.hide()),{model:t.root,modelChanged:!1}},e.prototype.undo=function(t){return{model:t.root,modelChanged:!1}},e.prototype.redo=function(t){return{model:t.root,modelChanged:!1}},e.KIND=h.KIND,a([d.inject(f.TYPES.UIExtensionRegistry),c("design:type",y)],e.prototype,"registry",void 0),e=a([d.injectable(),s(0,d.inject(f.TYPES.Action)),c("design:paramtypes",[h])],e)}(p.SystemCommand);e.SetUIExtensionVisibilityCommand=g},1856:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(3834),u=function(){function t(){}return t.prototype.show=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.activeElement=document.activeElement,(this.containerElement||this.initialize())&&(this.onBeforeShow.apply(this,a([this.containerElement,t],e)),this.setContainerVisible(!0))},t.prototype.hide=function(){this.setContainerVisible(!1),this.restoreFocus(),this.activeElement=null},t.prototype.restoreFocus=function(){var t=this.activeElement;t&&t.focus()},t.prototype.initialize=function(){var t=document.getElementById(this.options.baseDiv);return t?(this.containerElement=this.getOrCreateContainer(t.id),this.initializeContents(this.containerElement),t&&t.insertBefore(this.containerElement,t.firstChild),!0):(this.logger.warn(this,"Could not obtain sprotty base container for initializing UI extension "+this.id,this),!1)},t.prototype.getOrCreateContainer=function(t){var e=document.getElementById(this.id());return null===e&&((e=document.createElement("div")).id=t+"_"+this.id(),e.classList.add(this.containerClass())),e},t.prototype.setContainerVisible=function(t){this.containerElement&&(t?(this.containerElement.style.visibility="visible",this.containerElement.style.opacity="1"):(this.containerElement.style.visibility="hidden",this.containerElement.style.opacity="0"))},t.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},r([c.inject(s.TYPES.ViewerOptions),i("design:type",Object)],t.prototype,"options",void 0),r([c.inject(s.TYPES.ILogger),i("design:type",Object)],t.prototype,"logger",void 0),t=r([c.injectable()],t)}();e.AbstractUIExtension=u},1839:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(1469),a=n(9245),c=n(8127),s=function(){function t(){}return t.prototype.decorate=function(t,e){if(e.cssClasses)for(var n=0,o=e.cssClasses;n<o.length;n++){var r=o[n];i.setClass(t,r,!0)}var a=c.getSubType(e);return a&&a!==e.type&&i.setClass(t,a,!0),t},t.prototype.postUpdate=function(){},t=r([a.injectable()],t)}();e.CssClassPostprocessor=s},4715:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9245),c=n(3834),s=function(){function t(){}return t.prototype.getPrefix=function(){return void 0!==this.viewerOptions&&void 0!==this.viewerOptions.baseDiv?this.viewerOptions.baseDiv+"_":""},t.prototype.createUniqueDOMElementId=function(t){return this.getPrefix()+t.id},t.prototype.findSModelIdByDOMElement=function(t){return t.id.replace(this.getPrefix(),"")},r([a.inject(c.TYPES.ViewerOptions),i("design:type",Object)],t.prototype,"viewerOptions",void 0),t=r([a.injectable()],t)}();e.DOMHelper=s},2077:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9245),c=n(3834),s=n(4715),u=n(1469),d=function(){function t(){}return t.prototype.decorate=function(t,e){var n=u.getAttrs(t);return void 0!==n.id&&this.logger.warn(t,"Overriding id of vnode ("+n.id+"). Make sure not to set it manually in view."),n.id=this.domHelper.createUniqueDOMElementId(e),t.key||(t.key=e.id),t},t.prototype.postUpdate=function(){},r([a.inject(c.TYPES.ILogger),i("design:type",Object)],t.prototype,"logger",void 0),r([a.inject(c.TYPES.DOMHelper),i("design:type",s.DOMHelper)],t.prototype,"domHelper",void 0),t=r([a.injectable()],t)}();e.IdPostprocessor=d},1886:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(3834),u=n(3682),d=n(1469),l=function(){function t(t){void 0===t&&(t=[]),this.keyListeners=t}return t.prototype.register=function(t){this.keyListeners.push(t)},t.prototype.deregister=function(t){var e=this.keyListeners.indexOf(t);e>=0&&this.keyListeners.splice(e,1)},t.prototype.handleEvent=function(t,e,n){var o=this.keyListeners.map((function(o){return o[t].apply(o,[e,n])})).reduce((function(t,e){return t.concat(e)}));o.length>0&&(n.preventDefault(),this.actionDispatcher.dispatchAll(o))},t.prototype.keyDown=function(t,e){this.handleEvent("keyDown",t,e)},t.prototype.keyUp=function(t,e){this.handleEvent("keyUp",t,e)},t.prototype.focus=function(){},t.prototype.decorate=function(t,e){return e instanceof u.SModelRoot&&(d.on(t,"focus",this.focus.bind(this,e)),d.on(t,"keydown",this.keyDown.bind(this,e)),d.on(t,"keyup",this.keyUp.bind(this,e))),t},t.prototype.postUpdate=function(){},r([c.inject(s.TYPES.IActionDispatcher),i("design:type",Object)],t.prototype,"actionDispatcher",void 0),t=r([c.injectable(),a(0,c.multiInject(s.TYPES.KeyListener)),a(0,c.optional()),i("design:paramtypes",[Array])],t)}();e.KeyTool=l;var p=function(){function t(){}return t.prototype.keyDown=function(t,e){return[]},t.prototype.keyUp=function(t,e){return[]},t=r([c.injectable()],t)}();e.KeyListener=p},5504:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(9672),l=n(3682),p=n(3834),f=n(4715),y=n(1469),h=function(){function t(t){void 0===t&&(t=[]),this.mouseListeners=t}return t.prototype.register=function(t){this.mouseListeners.push(t)},t.prototype.deregister=function(t){var e=this.mouseListeners.indexOf(t);e>=0&&this.mouseListeners.splice(e,1)},t.prototype.getTargetElement=function(t,e){for(var n=e.target,o=t.index;n;){if(n.id){var r=o.getById(this.domHelper.findSModelIdByDOMElement(n));if(void 0!==r)return r}n=n.parentNode}},t.prototype.handleEvent=function(t,e,n){var o=this;this.focusOnMouseEvent(t,e);var r=this.getTargetElement(e,n);if(r){var i=this.mouseListeners.map((function(e){return e[t](r,n)})).reduce((function(t,e){return t.concat(e)}));if(i.length>0){n.preventDefault();for(var a=0,c=i;a<c.length;a++){var s=c[a];d.isAction(s)?this.actionDispatcher.dispatch(s):s.then((function(t){o.actionDispatcher.dispatch(t)}))}}}},t.prototype.focusOnMouseEvent=function(t,e){if(document){var n=document.getElementById(this.domHelper.createUniqueDOMElementId(e));"mouseDown"===t&&null!==n&&"function"==typeof n.focus&&n.focus()}},t.prototype.mouseOver=function(t,e){this.handleEvent("mouseOver",t,e)},t.prototype.mouseOut=function(t,e){this.handleEvent("mouseOut",t,e)},t.prototype.mouseEnter=function(t,e){this.handleEvent("mouseEnter",t,e)},t.prototype.mouseLeave=function(t,e){this.handleEvent("mouseLeave",t,e)},t.prototype.mouseDown=function(t,e){this.handleEvent("mouseDown",t,e)},t.prototype.mouseMove=function(t,e){this.handleEvent("mouseMove",t,e)},t.prototype.mouseUp=function(t,e){this.handleEvent("mouseUp",t,e)},t.prototype.wheel=function(t,e){this.handleEvent("wheel",t,e)},t.prototype.doubleClick=function(t,e){this.handleEvent("doubleClick",t,e)},t.prototype.decorate=function(t,e){return e instanceof l.SModelRoot&&(y.on(t,"mouseover",this.mouseOver.bind(this,e)),y.on(t,"mouseout",this.mouseOut.bind(this,e)),y.on(t,"mouseenter",this.mouseEnter.bind(this,e)),y.on(t,"mouseleave",this.mouseLeave.bind(this,e)),y.on(t,"mousedown",this.mouseDown.bind(this,e)),y.on(t,"mouseup",this.mouseUp.bind(this,e)),y.on(t,"mousemove",this.mouseMove.bind(this,e)),y.on(t,"wheel",this.wheel.bind(this,e)),y.on(t,"contextmenu",(function(t){t.preventDefault()})),y.on(t,"dblclick",this.doubleClick.bind(this,e))),t=this.mouseListeners.reduce((function(t,n){return n.decorate(t,e)}),t)},t.prototype.postUpdate=function(){},a([u.inject(p.TYPES.IActionDispatcher),c("design:type",Object)],t.prototype,"actionDispatcher",void 0),a([u.inject(p.TYPES.DOMHelper),c("design:type",f.DOMHelper)],t.prototype,"domHelper",void 0),t=a([u.injectable(),s(0,u.multiInject(p.TYPES.MouseListener)),s(0,u.optional()),c("design:paramtypes",[Array])],t)}();e.MouseTool=h;var g=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this,e)||this;return n.mouseListeners=e,n}return i(e,t),e=a([u.injectable(),s(0,u.multiInject(p.TYPES.PopupMouseListener)),s(0,u.optional()),c("design:paramtypes",[Array])],e)}(h);e.PopupMouseTool=g;var _=function(){function t(){}return t.prototype.mouseOver=function(t,e){return[]},t.prototype.mouseOut=function(t,e){return[]},t.prototype.mouseEnter=function(t,e){return[]},t.prototype.mouseLeave=function(t,e){return[]},t.prototype.mouseDown=function(t,e){return[]},t.prototype.mouseMove=function(t,e){return[]},t.prototype.mouseUp=function(t,e){return[]},t.prototype.wheel=function(t,e){return[]},t.prototype.doubleClick=function(t,e){return[]},t.prototype.decorate=function(t,e){return t},t=a([u.injectable()],t)}();e.MouseListener=_;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.mouseMove=function(t,e){return this.lastPosition=t.root.parentToLocal({x:e.offsetX,y:e.offsetY}),[]},Object.defineProperty(e.prototype,"lastPositionOnDiagram",{get:function(){return this.lastPosition},enumerable:!0,configurable:!0}),e=a([u.injectable()],e)}(_);e.MousePositionTracker=m},3152:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(4047),a=n(9245),c=function(){function t(){}return t.prototype.render=function(t,e){var n=this;return i.h(this.selector(t),{key:t.id,hook:{init:this.init.bind(this),prepatch:this.prepatch.bind(this)},fn:function(){return n.renderAndDecorate(t,e)},args:this.watchedArgs(t),thunk:!0})},t.prototype.renderAndDecorate=function(t,e){var n=this.doRender(t,e);return e.decorate(n,t),n},t.prototype.copyToThunk=function(t,e){e.elm=t.elm,t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm},t.prototype.init=function(t){var e=t.data,n=e.fn.apply(void 0,e.args);this.copyToThunk(n,t)},t.prototype.prepatch=function(t,e){var n=t.data,o=e.data;this.equals(n.args,o.args)?this.copyToThunk(t,e):this.copyToThunk(o.fn.apply(void 0,o.args),e)},t.prototype.equals=function(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<e.length;++n)if(!this.equals(t[n],e[n]))return!1}else if("object"===o(t)&&"object"===o(e)){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t)if(!("parent"===r||"root"===r||r in e&&this.equals(t[r],e[r])))return!1}else if(t!==e)return!1;return!0},t=r([a.injectable()],t)}();e.ThunkView=c,e.isThunk=function(t){return"thunk"in t}},1267:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(5181),d=n(9245),l=n(3834),p=n(1384),f=n(3199),y=n(7368),h=n(1294),g=n(8127);e.findArgValue=function(t,e){for(;void 0!==t&&!(e in t)&&t.parentArgs;)t=t.parentArgs;return t?t[e]:void 0};var _=function(t){function e(e){var n=t.call(this)||this;return n.registerDefaults(),e.forEach((function(t){return n.register(t.type,t.factory())})),n}return i(e,t),e.prototype.registerDefaults=function(){this.register(h.EMPTY_ROOT.type,new v)},e.prototype.missing=function(t){return new b},e=a([d.injectable(),s(0,d.multiInject(l.TYPES.ViewRegistration)),s(0,d.optional()),c("design:paramtypes",[Array])],e)}(p.InstanceRegistry);function m(t,e,n){if("function"==typeof n){if(!y.isInjectable(n))throw new Error("Views should be @injectable: "+n.name);t.isBound(n)||t.bind(n).toSelf()}t.bind(l.TYPES.ViewRegistration).toDynamicValue((function(t){return{type:e,factory:function(){return t.container.get(n)}}}))}e.ViewRegistry=_,e.configureModelElement=function(t,e,n,o,r){g.registerModelElement(t,e,n,r),m(t,e,o)},e.configureView=m;var v=function(){function t(){}return t.prototype.render=function(t,e){return u.svg("svg",{"class-sprotty-empty":!0})},t=a([d.injectable()],t)}();e.EmptyView=v;var b=function(){function t(){}return t.prototype.render=function(t,e){var n=t.position||f.ORIGIN_POINT;return u.svg("text",{"class-sprotty-missing":!0,x:n.x,y:n.y},"?",t.id,"?")},t=a([d.injectable()],t)}();e.MissingView=b},4034:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9245),c=n(3834),s=n(8480),u=function(){function t(){}return t.prototype.update=function(t,e){if(void 0!==e)this.delegate.update(t,e),this.cachedModel=void 0;else{var n=void 0===this.cachedModel;this.cachedModel=t,n&&this.scheduleUpdate()}},t.prototype.scheduleUpdate=function(){var t=this;this.syncer.onEndOfNextFrame((function(){t.cachedModel&&(t.delegate.update(t.cachedModel),t.cachedModel=void 0)}))},r([a.inject(c.TYPES.IViewer),i("design:type",Object)],t.prototype,"delegate",void 0),r([a.inject(c.TYPES.AnimationFrameSyncer),i("design:type",s.AnimationFrameSyncer)],t.prototype,"syncer",void 0),t=r([a.injectable()],t)}();e.ViewerCache=u},3552:function(t,e,n){"use strict";var o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(2703),i=n(3834);e.defaultViewerOptions=function(){return{baseDiv:"sprotty",baseClass:"sprotty",hiddenDiv:"sprotty-hidden",hiddenClass:"sprotty-hidden",popupDiv:"sprotty-popup",popupClass:"sprotty-popup",popupClosedClass:"sprotty-popup-closed",needsClientLayout:!0,needsServerLayout:!1,popupOpenDelay:1e3,popupCloseDelay:300}},e.configureViewerOptions=function(t,n){var r=o(o({},e.defaultViewerOptions()),n);t.isBound(i.TYPES.ViewerOptions)?t.rebind(i.TYPES.ViewerOptions).toConstantValue(r):t.bind(i.TYPES.ViewerOptions).toConstantValue(r)},e.overrideViewerOptions=function(t,e){var n=t.get(i.TYPES.ViewerOptions);return r.safeAssign(n,e),n}},6901:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)},i=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(9245),u=n(4047),d=n(5181),l=n(8126),p=n(4228),f=n(1294),y=n(3834),h=n(3152),g=n(1469),_=function(){function t(t,e,n,o){void 0===o&&(o={}),this.viewRegistry=t,this.targetKind=e,this.postprocessors=n,this.args=o}return t.prototype.decorate=function(t,e){return h.isThunk(t)?t:this.postprocessors.reduce((function(t,n){return n.decorate(t,e)}),t)},t.prototype.renderElement=function(t){var e=this.viewRegistry.get(t.type).render(t,this,this.args);return e?this.decorate(e,t):void 0},t.prototype.renderChildren=function(e,n){var o=n?new t(this.viewRegistry,this.targetKind,this.postprocessors,r(r({},n),{parentArgs:this.args})):this;return e.children.map((function(t){return o.renderElement(t)})).filter((function(t){return void 0!==t}))},t.prototype.postUpdate=function(t){this.postprocessors.forEach((function(e){return e.postUpdate(t)}))},t}();e.ModelRenderer=_;var m=function(){function t(){this.patcher=u.init(this.createModules())}return t.prototype.createModules=function(){return[u.propsModule,u.attributesModule,u.classModule,u.styleModule,u.eventListenersModule]},t=i([s.injectable(),a("design:paramtypes",[])],t)}();e.PatcherProvider=m;var v=function(){function t(t,e,n){this.renderer=t("main",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){var n=this;this.logger.log(this,"rendering",t);var o=d.html("div",{id:this.options.baseDiv},this.renderer.renderElement(t));if(void 0!==this.lastVDOM){var r=this.hasFocus();g.copyClassesFromVNode(this.lastVDOM,o),this.lastVDOM=this.patcher.call(this,this.lastVDOM,o),this.restoreFocus(r)}else if("undefined"!=typeof document){var i=document.getElementById(this.options.baseDiv);null!==i?("undefined"!=typeof window&&window.addEventListener("resize",(function(){n.onWindowResize(o)})),g.copyClassesFromElement(i,o),g.setClass(o,this.options.baseClass,!0),this.lastVDOM=this.patcher.call(this,i,o)):this.logger.error(this,"element not in DOM:",this.options.baseDiv)}this.renderer.postUpdate(e)},t.prototype.hasFocus=function(){if("undefined"!=typeof document&&document.activeElement&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var t=this.lastVDOM.children[0];if("object"===o(t)){var e=t.elm;return document.activeElement===e}}return!1},t.prototype.restoreFocus=function(t){if(t&&this.lastVDOM.children&&this.lastVDOM.children.length>0){var e=this.lastVDOM.children[0];if("object"===o(e)){var n=e.elm;n&&"function"==typeof n.focus&&n.focus()}}},t.prototype.onWindowResize=function(t){var e=document.getElementById(this.options.baseDiv);if(null!==e){var n=this.getBoundsInPage(e);this.actiondispatcher.dispatch(new p.InitializeCanvasBoundsAction(n))}},t.prototype.getBoundsInPage=function(t){var e=t.getBoundingClientRect(),n=l.getWindowScroll();return{x:e.left+n.x,y:e.top+n.y,width:e.width,height:e.height}},i([s.inject(y.TYPES.ViewerOptions),a("design:type",Object)],t.prototype,"options",void 0),i([s.inject(y.TYPES.ILogger),a("design:type",Object)],t.prototype,"logger",void 0),i([s.inject(y.TYPES.IActionDispatcher),a("design:type",Object)],t.prototype,"actiondispatcher",void 0),t=i([s.injectable(),c(0,s.inject(y.TYPES.ModelRendererFactory)),c(1,s.inject(y.TYPES.PatcherProvider)),c(2,s.multiInject(y.TYPES.IVNodePostprocessor)),c(2,s.optional()),a("design:paramtypes",[Function,m,Array])],t)}();e.ModelViewer=v;var b=function(){function t(t,e,n){this.hiddenRenderer=t("hidden",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){var n;if(this.logger.log(this,"rendering hidden"),t.type===f.EMPTY_ROOT.type)n=d.html("div",{id:this.options.hiddenDiv});else{var o=this.hiddenRenderer.renderElement(t);o&&g.setAttr(o,"opacity",0),n=d.html("div",{id:this.options.hiddenDiv},o)}if(void 0!==this.lastHiddenVDOM)g.copyClassesFromVNode(this.lastHiddenVDOM,n),this.lastHiddenVDOM=this.patcher.call(this,this.lastHiddenVDOM,n);else{var r=document.getElementById(this.options.hiddenDiv);null===r?(r=document.createElement("div"),document.body.appendChild(r)):g.copyClassesFromElement(r,n),g.setClass(n,this.options.baseClass,!0),g.setClass(n,this.options.hiddenClass,!0),this.lastHiddenVDOM=this.patcher.call(this,r,n)}this.hiddenRenderer.postUpdate(e)},i([s.inject(y.TYPES.ViewerOptions),a("design:type",Object)],t.prototype,"options",void 0),i([s.inject(y.TYPES.ILogger),a("design:type",Object)],t.prototype,"logger",void 0),t=i([s.injectable(),c(0,s.inject(y.TYPES.ModelRendererFactory)),c(1,s.inject(y.TYPES.PatcherProvider)),c(2,s.multiInject(y.TYPES.HiddenVNodePostprocessor)),c(2,s.optional()),a("design:paramtypes",[Function,m,Array])],t)}();e.HiddenModelViewer=b;var S=function(){function t(t,e,n){this.modelRendererFactory=t,this.popupRenderer=this.modelRendererFactory("popup",n),this.patcher=e.patcher}return t.prototype.update=function(t,e){this.logger.log(this,"rendering popup",t);var n,o=t.type===f.EMPTY_ROOT.type;if(o)n=d.html("div",{id:this.options.popupDiv});else{var r=t.canvasBounds,i={top:r.y+"px",left:r.x+"px"};n=d.html("div",{id:this.options.popupDiv,style:i},this.popupRenderer.renderElement(t))}if(void 0!==this.lastPopupVDOM)g.copyClassesFromVNode(this.lastPopupVDOM,n),g.setClass(n,this.options.popupClosedClass,o),this.lastPopupVDOM=this.patcher.call(this,this.lastPopupVDOM,n);else if("undefined"!=typeof document){var a=document.getElementById(this.options.popupDiv);null===a?(a=document.createElement("div"),document.body.appendChild(a)):g.copyClassesFromElement(a,n),g.setClass(n,this.options.popupClass,!0),g.setClass(n,this.options.popupClosedClass,o),this.lastPopupVDOM=this.patcher.call(this,a,n)}this.popupRenderer.postUpdate(e)},i([s.inject(y.TYPES.ViewerOptions),a("design:type",Object)],t.prototype,"options",void 0),i([s.inject(y.TYPES.ILogger),a("design:type",Object)],t.prototype,"logger",void 0),t=i([s.injectable(),c(0,s.inject(y.TYPES.ModelRendererFactory)),c(1,s.inject(y.TYPES.PatcherProvider)),c(2,s.multiInject(y.TYPES.PopupVNodePostprocessor)),c(2,s.optional()),a("design:paramtypes",[Function,m,Array])],t)}();e.PopupModelViewer=S},3921:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9245),a=n(1469),c=function(){function t(){}return t.prototype.decorate=function(t,e){return t.sel&&t.sel.startsWith("svg")&&a.setAttr(t,"tabindex",0),t},t.prototype.postUpdate=function(){},t=r([i.injectable()],t)}();e.FocusFixPostprocessor=c},1469:function(t,e){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};function o(t,e,n){a(t)[e]=n}function r(t){var e=i(t);return e.attrs||(e.attrs={}),e.attrs}function i(t){return t.data||(t.data={}),t.data}function a(t){var e=i(t);return e.class||(e.class={}),e.class}Object.defineProperty(e,"__esModule",{value:!0}),e.setAttr=function(t,e,n){r(t)[e]=n},e.setClass=o,e.setNamespace=function t(e,n){void 0===e.data&&(e.data={}),e.data.ns=n;var o=e.children;if(void 0!==o)for(var r=0;r<o.length;r++){var i=o[r];"string"!=typeof i&&t(i,n)}},e.copyClassesFromVNode=function(t,e){var n=a(t);Object.keys(n).forEach((function(t){return o(e,t,!0)}))},e.copyClassesFromElement=function(t,e){for(var n=t.classList,r=0;r<n.length;r++){var i=n.item(r);i&&o(e,i,!0)}},e.mergeStyle=function(t,e){i(t).style=n(n({},i(t).style||{}),e)},e.on=function(t,e,n){var o=function(t){var e=i(t);e.on||(e.on={});return e.on}(t);if(o[e])throw new Error("EventListener for "+e+" already registered on VNode");o[e]=n},e.getAttrs=r},6091:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(3199),a=n(3682),c=n(1229),s=n(9245),u=function(){function t(){}return t.prototype.layout=function(t,e){var n=e.getBoundsData(t),o=this.getLayoutOptions(t),r=this.getChildrenSize(t,o,e),i=o.paddingFactor*(o.resizeContainer?r.width:Math.max(0,this.getFixedContainerBounds(t,o,e).width)-o.paddingLeft-o.paddingRight),a=o.paddingFactor*(o.resizeContainer?r.height:Math.max(0,this.getFixedContainerBounds(t,o,e).height)-o.paddingTop-o.paddingBottom);if(i>0&&a>0){var c=this.layoutChildren(t,e,o,i,a);n.bounds=this.getFinalContainerBounds(t,c,o,i,a),n.boundsChanged=!0}},t.prototype.getFinalContainerBounds=function(t,e,n,o,r){return{x:t.bounds.x,y:t.bounds.y,width:Math.max(n.minWidth,o+n.paddingLeft+n.paddingRight),height:Math.max(n.minHeight,r+n.paddingTop+n.paddingBottom)}},t.prototype.getFixedContainerBounds=function(t,e,n){for(var o=t;;){if(c.isBoundsAware(o)){var r=o.bounds;if(c.isLayoutContainer(o)&&e.resizeContainer&&n.log.error(o,"Resizable container found while detecting fixed bounds"),i.isValidDimension(r))return r}if(!(o instanceof a.SChildElement))return n.log.error(o,"Cannot detect fixed bounds"),i.EMPTY_BOUNDS;o=o.parent}},t.prototype.layoutChildren=function(t,e,n,o,r){var a=this,s={x:n.paddingLeft+.5*(o-o/n.paddingFactor),y:n.paddingTop+.5*(r-r/n.paddingFactor)};return t.children.forEach((function(t){if(c.isLayoutableChild(t)){var u=e.getBoundsData(t),d=u.bounds,l=a.getChildLayoutOptions(t,n);void 0!==d&&i.isValidDimension(d)&&(s=a.layoutChild(t,u,d,l,n,s,o,r))}})),s},t.prototype.getDx=function(t,e,n){switch(t){case"left":return 0;case"center":return.5*(n-e.width);case"right":return n-e.width}},t.prototype.getDy=function(t,e,n){switch(t){case"top":return 0;case"center":return.5*(n-e.height);case"bottom":return n-e.height}},t.prototype.getChildLayoutOptions=function(t,e){var n=t.layoutOptions;return void 0===n?e:this.spread(e,n)},t.prototype.getLayoutOptions=function(t){for(var e=this,n=t,o=[];void 0!==n;){var r=n.layoutOptions;if(void 0!==r&&o.push(r),!(n instanceof a.SChildElement))break;n=n.parent}return o.reverse().reduce((function(t,n){return e.spread(t,n)}),this.getDefaultLayoutOptions())},t=r([s.injectable()],t)}();e.AbstractLayout=u},9080:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)},c=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},s=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var d=n(9245),l=n(9672),p=n(4051),f=n(3834),y=n(1229),h=function(){function t(e){this.bounds=e,this.kind=t.KIND}return t.KIND="setBounds",t}();e.SetBoundsAction=h;var g=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.requestId=n,this.kind=t.KIND}return t.create=function(e){return new t(e,l.generateRequestId())},t.KIND="requestBounds",t}();e.RequestBoundsAction=g;var _=function(){function t(e,n,o,r){void 0===r&&(r=""),this.bounds=e,this.revision=n,this.alignments=o,this.responseId=r,this.kind=t.KIND}return t.KIND="computedBounds",t}();e.ComputedBoundsAction=_;var m=function(){function t(){this.kind=t.KIND}return t.KIND="layout",t}();e.LayoutAction=m;var v=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.bounds=[],n}return i(e,t),e.prototype.execute=function(t){var e=this;return this.action.bounds.forEach((function(n){var o=t.root.index.getById(n.elementId);o&&y.isBoundsAware(o)&&e.bounds.push({element:o,oldBounds:o.bounds,newPosition:n.newPosition,newSize:n.newSize})})),this.redo(t)},e.prototype.undo=function(t){return this.bounds.forEach((function(t){return t.element.bounds=t.oldBounds})),t.root},e.prototype.redo=function(t){return this.bounds.forEach((function(t){t.newPosition?t.element.bounds=a(a({},t.newPosition),t.newSize):t.element.bounds=a({x:t.element.bounds.x,y:t.element.bounds.y},t.newSize)})),t.root},e.KIND=h.KIND,e=c([d.injectable(),u(0,d.inject(f.TYPES.Action)),s("design:paramtypes",[h])],e)}(p.SystemCommand);e.SetBoundsCommand=v;var b=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return{model:t.modelFactory.createRoot(this.action.newRoot),modelChanged:!0,cause:this.action}},Object.defineProperty(e.prototype,"blockUntil",{get:function(){return function(t){return t.kind===_.KIND}},enumerable:!0,configurable:!0}),e.KIND=g.KIND,e=c([d.injectable(),u(0,d.inject(f.TYPES.Action)),s("design:paramtypes",[g])],e)}(p.HiddenCommand);e.RequestBoundsCommand=b},9767:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(9080),a=n(320),c=n(6921),s=n(4588),u=n(7900),d=n(6483),l=n(5944),p=new o.ContainerModule((function(t,e,n){s.configureCommand({bind:t,isBound:n},i.SetBoundsCommand),s.configureCommand({bind:t,isBound:n},i.RequestBoundsCommand),t(a.HiddenBoundsUpdater).toSelf().inSingletonScope(),t(r.TYPES.HiddenVNodePostprocessor).toService(a.HiddenBoundsUpdater),t(r.TYPES.Layouter).to(c.Layouter).inSingletonScope(),t(r.TYPES.LayoutRegistry).to(c.LayoutRegistry).inSingletonScope(),c.configureLayout({bind:t,isBound:n},d.VBoxLayouter.KIND,d.VBoxLayouter),c.configureLayout({bind:t,isBound:n},u.HBoxLayouter.KIND,u.HBoxLayouter),c.configureLayout({bind:t,isBound:n},l.StackLayouter.KIND,l.StackLayouter)}));e.default=p},7900:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)},c=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var s=n(9245),u=n(3199),d=n(6091),l=n(1229),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=0,r=-1,i=!0;return t.children.forEach((function(t){if(l.isLayoutableChild(t)){var a=n.getBoundsData(t).bounds;void 0!==a&&u.isValidDimension(a)&&(i?i=!1:o+=e.hGap,o+=a.width,r=Math.max(r,a.height))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,c){var s=this.getDy(o.vAlign,n,c);return e.bounds={x:i.x+t.bounds.x-n.x,y:r.paddingTop+t.bounds.y-n.y+s,width:n.width,height:n.height},e.boundsChanged=!0,{x:i.x+n.width+r.hGap,y:i.y}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hGap:1,vAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return a(a({},t),e)},e.KIND="hbox",e=c([s.injectable()],e)}(d.AbstractLayout);e.HBoxLayouter=p},320:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9245),c=n(3199),s=n(3682),u=n(3834),d=n(9080),l=n(6921),p=n(1229),f=function(){};e.BoundsData=f;var y=function(){function t(){this.element2boundsData=new Map}return t.prototype.decorate=function(t,e){return(p.isSizeable(e)||p.isLayoutContainer(e))&&this.element2boundsData.set(e,{vnode:t,bounds:e.bounds,boundsChanged:!1,alignmentChanged:!1}),e instanceof s.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(t){if(void 0!==t&&t.kind===d.RequestBoundsAction.KIND){var e=t;this.getBoundsFromDOM(),this.layouter.layout(this.element2boundsData);var n=[],o=[];this.element2boundsData.forEach((function(t,e){if(t.boundsChanged&&void 0!==t.bounds){var r={elementId:e.id,newSize:{width:t.bounds.width,height:t.bounds.height}};e instanceof s.SChildElement&&p.isLayoutContainer(e.parent)&&(r.newPosition={x:t.bounds.x,y:t.bounds.y}),n.push(r)}t.alignmentChanged&&void 0!==t.alignment&&o.push({elementId:e.id,newAlignment:t.alignment})}));var r=void 0!==this.root?this.root.revision:void 0;this.actionDispatcher.dispatch(new d.ComputedBoundsAction(n,r,o,e.requestId)),this.element2boundsData.clear()}},t.prototype.getBoundsFromDOM=function(){var t=this;this.element2boundsData.forEach((function(e,n){if(e.bounds&&p.isSizeable(n)){var o=e.vnode;if(o&&o.elm){var r=t.getBounds(o.elm,n);!p.isAlignable(n)||c.almostEquals(r.x,0)&&c.almostEquals(r.y,0)||(e.alignment={x:-r.x,y:-r.y},e.alignmentChanged=!0);var i={x:n.bounds.x,y:n.bounds.y,width:r.width,height:r.height};c.almostEquals(i.x,n.bounds.x)&&c.almostEquals(i.y,n.bounds.y)&&c.almostEquals(i.width,n.bounds.width)&&c.almostEquals(i.height,n.bounds.height)||(e.bounds=i,e.boundsChanged=!0)}}}))},t.prototype.getBounds=function(t,e){if("function"!=typeof t.getBBox)return this.logger.error(this,"Not an SVG element:",t),c.EMPTY_BOUNDS;var n=t.getBBox();return{x:n.x,y:n.y,width:n.width,height:n.height}},r([a.inject(u.TYPES.ILogger),i("design:type",Object)],t.prototype,"logger",void 0),r([a.inject(u.TYPES.IActionDispatcher),i("design:type",Object)],t.prototype,"actionDispatcher",void 0),r([a.inject(u.TYPES.Layouter),i("design:type",l.Layouter)],t.prototype,"layouter",void 0),t=r([a.injectable()],t)}();e.HiddenBoundsUpdater=y},6921:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(3834),l=n(1384),p=n(3199),f=n(1229),y=n(7368),h=function(t){function e(e){void 0===e&&(e=[]);var n=t.call(this)||this;return e.forEach((function(t){n.hasKey(t.layoutKind)?n.logger.warn("Layout kind is already defined: ",t.layoutKind):n.register(t.layoutKind,t.factory())})),n}return i(e,t),a([u.inject(d.TYPES.ILogger),c("design:type",Object)],e.prototype,"logger",void 0),e=a([u.injectable(),s(0,u.multiInject(d.TYPES.LayoutRegistration)),s(0,u.optional()),c("design:paramtypes",[Array])],e)}(l.InstanceRegistry);e.LayoutRegistry=h;var g=function(){function t(){}return t.prototype.layout=function(t){new _(t,this.layoutRegistry,this.logger).layout()},a([u.inject(d.TYPES.LayoutRegistry),c("design:type",h)],t.prototype,"layoutRegistry",void 0),a([u.inject(d.TYPES.ILogger),c("design:type",Object)],t.prototype,"logger",void 0),t=a([u.injectable()],t)}();e.Layouter=g;var _=function(){function t(t,e,n){var o=this;this.element2boundsData=t,this.layoutRegistry=e,this.log=n,this.toBeLayouted=[],t.forEach((function(t,e){f.isLayoutContainer(e)&&o.toBeLayouted.push(e)}))}return t.prototype.getBoundsData=function(t){var e=this.element2boundsData.get(t),n=t.bounds;return f.isLayoutContainer(t)&&this.toBeLayouted.indexOf(t)>=0&&(n=this.doLayout(t)),e||(e={bounds:n,boundsChanged:!1,alignmentChanged:!1},this.element2boundsData.set(t,e)),e},t.prototype.layout=function(){for(;this.toBeLayouted.length>0;){var t=this.toBeLayouted[0];this.doLayout(t)}},t.prototype.doLayout=function(t){var e=this.toBeLayouted.indexOf(t);e>=0&&this.toBeLayouted.splice(e,1);var n=this.layoutRegistry.get(t.layout);n&&n.layout(t,this);var o=this.element2boundsData.get(t);return void 0!==o&&void 0!==o.bounds?o.bounds:(this.log.error(t,"Layout failed"),p.EMPTY_BOUNDS)},t}();e.StatefulLayouter=_,e.configureLayout=function(t,e,n){if("function"==typeof n){if(!y.isInjectable(n))throw new Error("Layouts be @injectable: "+n.name);t.isBound(n)||t.bind(n).toSelf()}t.bind(d.TYPES.LayoutRegistration).toDynamicValue((function(t){return{layoutKind:e,factory:function(){return t.container.get(n)}}}))}},1229:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3682),a=n(8127),c=n(3199),s=n(8126);function u(t){return"bounds"in t}function d(t,e,n){t.children.forEach((function(t){if(u(t)&&c.includes(t.bounds,e)&&n.push(t),t instanceof i.SParentElement){var o=t.parentToLocal(e);d(t,o,n)}}))}e.boundsFeature=Symbol("boundsFeature"),e.layoutContainerFeature=Symbol("layoutContainerFeature"),e.layoutableChildFeature=Symbol("layoutableChildFeature"),e.alignFeature=Symbol("alignFeature"),e.isBoundsAware=u,e.isLayoutContainer=function(t){return u(t)&&t.hasFeature(e.layoutContainerFeature)&&"layout"in t},e.isLayoutableChild=function(t){return u(t)&&t.hasFeature(e.layoutableChildFeature)},e.isSizeable=function(t){return t.hasFeature(e.boundsFeature)&&u(t)},e.isAlignable=function(t){return t.hasFeature(e.alignFeature)&&"alignment"in t},e.getAbsoluteBounds=function(t){var e=a.findParentByFeature(t,u);if(void 0!==e){for(var n=e.bounds,o=e;o instanceof i.SChildElement;){var r=o.parent;n=r.localToParent(n),o=r}return n}if(t instanceof i.SModelRoot){var s=t.canvasBounds;return{x:0,y:0,width:s.width,height:s.height}}return c.EMPTY_BOUNDS},e.getAbsoluteClientBounds=function(t,e,n){var o=0,r=0,i=0,a=0,c=e.createUniqueDOMElementId(t),u=document.getElementById(c);if(u){var d=u.getBoundingClientRect(),l=s.getWindowScroll();o=d.left+l.x,r=d.top+l.y,i=d.width,a=d.height}var p=document.getElementById(n.baseDiv);if(p)for(;p.offsetParent instanceof HTMLElement&&(p=p.offsetParent);)o-=p.offsetLeft,r-=p.offsetTop;return{x:o,y:r,width:i,height:a}},e.findChildrenAtPosition=function(t,e){var n=[];return d(t,e,n),n};var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=c.ORIGIN_POINT,e.size=c.EMPTY_DIMENSION,e}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.prototype.localToParent=function(t){var e={x:t.x+this.position.x,y:t.y+this.position.y,width:-1,height:-1};return c.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e.prototype.parentToLocal=function(t){var e={x:t.x-this.position.x,y:t.y-this.position.y,width:-1,height:-1};return c.isBounds(t)&&(e.width=t.width,e.height=t.height),e},e}(i.SChildElement);e.SShapeElement=l},8246:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementResizes=n,i.reverse=r,i}return r(e,t),e.prototype.tween=function(t){var e=this;return this.elementResizes.forEach((function(n){var o=n.element,r=e.reverse?{width:(1-t)*n.toDimension.width+t*n.fromDimension.width,height:(1-t)*n.toDimension.height+t*n.fromDimension.height}:{width:(1-t)*n.fromDimension.width+t*n.toDimension.width,height:(1-t)*n.fromDimension.height+t*n.toDimension.height};o.bounds={x:o.bounds.x,y:o.bounds.y,width:r.width,height:r.height}})),this.model},e}(n(4633).Animation);e.ResizeAnimation=i},5944:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)},c=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var s=n(9245),u=n(3199),d=n(6091),l=n(1229),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=-1,r=-1;return t.children.forEach((function(t){if(l.isLayoutableChild(t)){var e=n.getBoundsData(t).bounds;void 0!==e&&u.isValidDimension(e)&&(o=Math.max(o,e.width),r=Math.max(r,e.height))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,c){var s=this.getDx(o.hAlign,n,a),u=this.getDy(o.vAlign,n,c);return e.bounds={x:r.paddingLeft+t.bounds.x-n.x+s,y:r.paddingTop+t.bounds.y-n.y+u,width:n.width,height:n.height},e.boundsChanged=!0,i},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,hAlign:"center",vAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return a(a({},t),e)},e.KIND="stack",e=c([s.injectable()],e)}(d.AbstractLayout);e.StackLayouter=p},6483:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)},c=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var s=n(9245),u=n(3199),d=n(6091),l=n(1229),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.getChildrenSize=function(t,e,n){var o=-1,r=0,i=!0;return t.children.forEach((function(t){if(l.isLayoutableChild(t)){var a=n.getBoundsData(t).bounds;void 0!==a&&u.isValidDimension(a)&&(r+=a.height,i?i=!1:r+=e.vGap,o=Math.max(o,a.width))}})),{width:o,height:r}},e.prototype.layoutChild=function(t,e,n,o,r,i,a,c){var s=this.getDx(o.hAlign,n,a);return e.bounds={x:r.paddingLeft+t.bounds.x-n.x+s,y:i.y+t.bounds.y-n.y,width:n.width,height:n.height},e.boundsChanged=!0,{x:i.x,y:i.y+n.height+r.vGap}},e.prototype.getDefaultLayoutOptions=function(){return{resizeContainer:!0,paddingTop:5,paddingBottom:5,paddingLeft:5,paddingRight:5,paddingFactor:1,vGap:1,hAlign:"center",minWidth:0,minHeight:0}},e.prototype.spread=function(t,e){return a(a({},t),e)},e.KIND="vbox",e=c([s.injectable()],e)}(d.AbstractLayout);e.VBoxLayouter=p},9179:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9245),a=n(3199),c=n(1229),s=function(){function t(){}return t.prototype.isVisible=function(t,e){if("hidden"===e.targetKind)return!0;if(!a.isValidDimension(t.bounds))return!0;var n=c.getAbsoluteBounds(t),o=t.root.canvasBounds;return n.x<=o.width&&n.x+n.width>=0&&n.y<=o.height&&n.y+n.height>=0},t=r([i.injectable()],t)}();e.ShapeView=s},6659:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(1384),d=n(9245),l=n(3834),p=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.TYPE,new t)})),n}return i(e,t),e=a([d.injectable(),s(0,d.multiInject(l.TYPES.IButtonHandler)),s(0,d.optional()),c("design:paramtypes",[Array])],e)}(u.InstanceRegistry);e.ButtonHandlerRegistry=p},274:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(6659),i=new o.ContainerModule((function(t){t(r.ButtonHandlerRegistry).toSelf().inSingletonScope()}));e.default=i},1211:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(1229),a=n(8681),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enabled=!0,e}return r(e,t),e.DEFAULT_FEATURES=[i.boundsFeature,i.layoutableChildFeature,a.fadeFeature],e}(i.SShapeElement);e.SButton=c},5975:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(9672),u=n(3834),d=n(1933),l=n(7749),p=n(3803),f=n(1455),y=function(){function t(t){void 0===t&&(t=[]),this.actionProviders=t}return t.prototype.getActions=function(t,e,n,o){var r=this.actionProviders.map((function(r){return r.getActions(t,e,n,o)}));return Promise.all(r).then((function(t){return t.reduce((function(t,e){return void 0!==e?t.concat(e):t}))}))},t=r([c.injectable(),a(0,c.multiInject(u.TYPES.ICommandPaletteActionProvider)),a(0,c.optional()),i("design:paramtypes",[Array])],t)}();e.CommandPaletteActionProviderRegistry=y;var h=function(){function t(t){this.logger=t}return t.prototype.getActions=function(t,e,n,o){return void 0!==o&&o%2==0?Promise.resolve(this.createSelectActions(t)):Promise.resolve([new s.LabeledAction("Select all",[new p.SelectAllAction])])},t.prototype.createSelectActions=function(t){return d.toArray(t.index.all().filter((function(t){return l.isNameable(t)}))).map((function(t){return new s.LabeledAction("Reveal "+l.name(t),[new p.SelectAction([t.id]),new f.CenterAction([t.id])],"fa-eye")}))},t=r([c.injectable(),a(0,c.inject(u.TYPES.ILogger)),i("design:paramtypes",[Object])],t)}();e.RevealNamedElementActionProvider=h},7463:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(9672),l=n(3834),p=n(1856),f=n(594),y=n(4715),h=n(1886),g=n(1933),_=n(6903),m=n(1229),v=n(7040),b=n(5975),S=n(5504),P=n(2022),w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.loadingIndicatorClasses=["loading"],e.xOffset=20,e.yOffset=20,e.defaultWidth=400,e.debounceWaitMs=100,e.noCommandsMsg="No commands available",e.paletteIndex=0,e}var n;return i(e,t),n=e,e.prototype.id=function(){return n.ID},e.prototype.containerClass=function(){return"command-palette"},e.prototype.show=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];t.prototype.show.apply(this,s([e],n)),this.paletteIndex=0,this.contextActions=void 0,this.inputElement.value="",this.autoCompleteResult=P(this.autocompleteSettings(e)),this.inputElement.focus()},e.prototype.initializeContents=function(t){var e=this;t.style.position="absolute",this.inputElement=document.createElement("input"),this.inputElement.style.width="100%",this.inputElement.addEventListener("keydown",(function(t){return e.hideIfEscapeEvent(t)})),this.inputElement.addEventListener("keydown",(function(t){return e.cylceIfInvokePaletteKey(t)})),this.inputElement.onblur=function(){return window.setTimeout((function(){return e.hide()}),200)},t.appendChild(this.inputElement)},e.prototype.hideIfEscapeEvent=function(t){_.matchesKeystroke(t,"Escape")&&this.hide()},e.prototype.cylceIfInvokePaletteKey=function(t){n.isInvokePaletteKey(t)&&this.cycle()},e.prototype.cycle=function(){this.contextActions=void 0,this.paletteIndex++},e.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r,i=this.xOffset,a=this.yOffset,c=g.toArray(e.index.all().filter((function(t){return v.isSelectable(t)&&t.selected})));1===c.length?(i+=(r=m.getAbsoluteClientBounds(c[0],this.domHelper,this.viewerOptions)).x+r.width,a+=r.y):(i+=(r=m.getAbsoluteClientBounds(e,this.domHelper,this.viewerOptions)).x,a+=r.y);t.style.left=i+"px",t.style.top=a+"px",t.style.width=this.defaultWidth+"px"},e.prototype.autocompleteSettings=function(t){var e=this;return{input:this.inputElement,emptyMsg:this.noCommandsMsg,className:"command-palette-suggestions",debounceWaitMs:this.debounceWaitMs,showOnFocus:!0,minLength:-1,fetch:function(n,o){return e.updateAutoCompleteActions(o,n,t)},onSelect:function(t){return e.onSelect(t)},render:function(t,n){return e.renderLabeledActionSuggestion(t,n)},customize:function(t,n,o,r){e.customizeSuggestionContainer(o,n,r)}}},e.prototype.onSelect=function(t){this.executeAction(t),this.hide()},e.prototype.updateAutoCompleteActions=function(t,e,n){var o=this;this.onLoading(),this.contextActions?(t(this.filterActions(e,this.contextActions)),this.onLoaded("success")):this.actionProviderRegistry.getActions(n,e,this.mousePositionTracker.lastPositionOnDiagram,this.paletteIndex).then((function(n){o.contextActions=n,t(o.filterActions(e,n)),o.onLoaded("success")})).catch((function(t){o.logger.error(o,"Failed to obtain actions from command palette action providers",t),o.onLoaded("error")}))},e.prototype.onLoading=function(){var t;this.loadingIndicator&&this.containerElement.contains(this.loadingIndicator)||(this.loadingIndicator=document.createElement("span"),(t=this.loadingIndicator.classList).add.apply(t,this.loadingIndicatorClasses),this.containerElement.appendChild(this.loadingIndicator))},e.prototype.onLoaded=function(t){this.containerElement.contains(this.loadingIndicator)&&this.containerElement.removeChild(this.loadingIndicator)},e.prototype.renderLabeledActionSuggestion=function(t,e){var n=document.createElement("div"),o=function(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}(e).split(" ").join("|"),r=new RegExp(o,"gi");return t.icon&&this.renderIcon(n,t.icon),n.innerHTML+=t.label.replace(r,(function(t){return"<em>"+t+"</em>"})),n},e.prototype.renderIcon=function(t,e){t.innerHTML+='<span class="icon fa '+e+'"></span>'},e.prototype.filterActions=function(t,e){return g.toArray(e.filter((function(e){var n=e.label.toLowerCase();return t.split(" ").every((function(t){return-1!==n.indexOf(t.toLowerCase())}))})))},e.prototype.customizeSuggestionContainer=function(t,e,n){this.containerElement&&this.containerElement.appendChild(t)},e.prototype.hide=function(){t.prototype.hide.call(this),this.autoCompleteResult&&this.autoCompleteResult.destroy()},e.prototype.executeAction=function(t){var e=this;this.actionDispatcherProvider().then((function(e){return e.dispatchAll(function(t){if(d.isLabeledAction(t))return t.actions;if(d.isAction(t))return[t];return[]}(t))})).catch((function(t){return e.logger.error(e,"No action dispatcher available to execute command palette action",t)}))},e.ID="command-palette",e.isInvokePaletteKey=function(t){return _.matchesKeystroke(t,"Space","ctrl")},a([u.inject(l.TYPES.IActionDispatcherProvider),c("design:type",Function)],e.prototype,"actionDispatcherProvider",void 0),a([u.inject(l.TYPES.ICommandPaletteActionProviderRegistry),c("design:type",b.CommandPaletteActionProviderRegistry)],e.prototype,"actionProviderRegistry",void 0),a([u.inject(l.TYPES.ViewerOptions),c("design:type",Object)],e.prototype,"viewerOptions",void 0),a([u.inject(l.TYPES.DOMHelper),c("design:type",y.DOMHelper)],e.prototype,"domHelper",void 0),a([u.inject(S.MousePositionTracker),c("design:type",S.MousePositionTracker)],e.prototype,"mousePositionTracker",void 0),e=n=a([u.injectable()],e)}(p.AbstractUIExtension);e.CommandPalette=w;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){if(_.matchesKeystroke(e,"Escape"))return[new f.SetUIExtensionVisibilityAction(w.ID,!1,[])];if(w.isInvokePaletteKey(e)){var n=g.toArray(t.index.all().filter((function(t){return v.isSelectable(t)&&t.selected})).map((function(t){return t.id})));return[new f.SetUIExtensionVisibilityAction(w.ID,!0,n)]}return[]},e}(h.KeyListener);e.CommandPaletteKeyListener=O},2587:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(5975),a=n(7463),c=new o.ContainerModule((function(t){t(a.CommandPalette).toSelf().inSingletonScope(),t(r.TYPES.IUIExtension).toService(a.CommandPalette),t(r.TYPES.KeyListener).to(a.CommandPaletteKeyListener),t(i.CommandPaletteActionProviderRegistry).toSelf().inSingletonScope(),t(r.TYPES.ICommandPaletteActionProviderRegistry).toService(i.CommandPaletteActionProviderRegistry)}));e.default=c},5960:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toAnchor=function(t){return t instanceof HTMLElement?{x:t.offsetLeft,y:t.offsetTop}:t}},3403:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(7565),i=n(1545),a=n(3834),c=new o.ContainerModule((function(t){t(a.TYPES.IContextMenuServiceProvider).toProvider((function(t){return function(){return new Promise((function(e,n){t.container.isBound(a.TYPES.IContextMenuService)?e(t.container.get(a.TYPES.IContextMenuService)):n()}))}})),t(a.TYPES.MouseListener).to(i.ContextMenuMouseListener),t(a.TYPES.IContextMenuProviderRegistry).to(r.ContextMenuProviderRegistry)}));e.default=c},7565:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(3834),u=n(1984),d=n(7040),l=function(){function t(t){void 0===t&&(t=[]),this.menuProviders=t}return t.prototype.getItems=function(t,e){var n=this.menuProviders.map((function(n){return n.getItems(t,e)}));return Promise.all(n).then(this.flattenAndRestructure)},t.prototype.flattenAndRestructure=function(t){for(var e=t.reduce((function(t,e){return void 0!==e?t.concat(e):t}),[]),n=e.filter((function(t){return t.parentId})),o=function(t){if(t.parentId){for(var n=t.parentId.split("."),o=void 0,r=e,i=function(t){(o=r.find((function(e){return t===e.id})))&&o.children&&(r=o.children)},a=0,c=n;a<c.length;a++){i(c[a])}o&&(o.children?o.children.push(t):o.children=[t],e=e.filter((function(e){return e!==t})))}},r=0,i=n;r<i.length;r++){o(i[r])}return e},t=r([c.injectable(),a(0,c.multiInject(s.TYPES.IContextMenuItemProvider)),a(0,c.optional()),i("design:paramtypes",[Array])],t)}();e.ContextMenuProviderRegistry=l;var p=function(){function t(){}return t.prototype.getItems=function(t,e){var n=Array.from(t.index.all().filter(d.isSelected).filter(u.isDeletable));return Promise.resolve([{id:"delete",label:"Delete",sortString:"d",group:"edit",actions:[new u.DeleteElementAction(n.map((function(t){return t.id})))],isEnabled:function(){return n.length>0}}])},t=r([c.injectable()],t)}();e.DeleteContextMenuItemProvider=p},1545:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}},u=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},d=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(9245),p=n(7565),f=n(5504),y=n(3834),h=n(7040),g=n(8127),_=function(t){function e(e,n){var o=t.call(this)||this;return o.contextMenuService=e,o.menuProvider=n,o}return i(e,t),e.prototype.mouseDown=function(t,e){return 2===e.button&&this.showContextMenu(t,e),[]},e.prototype.showContextMenu=function(t,e){return u(this,void 0,void 0,(function(){var n,o,r,i,a,c;return d(this,(function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,this.contextMenuService()];case 1:return n=s.sent(),[3,3];case 2:return s.sent(),[2];case 3:return o={x:e.x,y:e.y},r=!1,(i=g.findParentByFeature(t,h.isSelectable))&&(r=i.selected,i.selected=!0),a=function(){i&&(i.selected=r)},[4,this.menuProvider.getItems(t.root,o)];case 4:return c=s.sent(),n.show(c,o,a),[2]}}))}))},e=a([s(0,l.inject(y.TYPES.IContextMenuServiceProvider)),s(1,l.inject(y.TYPES.IContextMenuProviderRegistry)),c("design:paramtypes",[Function,p.ContextMenuProviderRegistry])],e)}(f.MouseListener);e.ContextMenuMouseListener=_},1087:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9245),c=n(3682),s=n(1704),u=n(1469),d=n(3199),l=n(1229),p=n(1072),f=n(7946),y=function(){function t(){}return t.prototype.decorate=function(t,e){if(s.isDecoration(e)){var n=this.getPosition(e),o="translate("+n.x+", "+n.y+")";u.setAttr(t,"transform",o)}return t},t.prototype.getPosition=function(t){if(t instanceof c.SChildElement&&t.parent instanceof p.SRoutableElement){var e=this.edgeRouterRegistry.route(t.parent);if(e.length>1){var n=Math.floor(.5*(e.length-1)),o=l.isSizeable(t)?{x:-.5*t.bounds.width,y:-.5*t.bounds.width}:d.ORIGIN_POINT;return{x:.5*(e[n].x+e[n+1].x)+o.x,y:.5*(e[n].y+e[n+1].y)+o.y}}}return l.isSizeable(t)?{x:-.666*t.bounds.width,y:-.666*t.bounds.height}:d.ORIGIN_POINT},t.prototype.postUpdate=function(){},r([a.inject(f.EdgeRouterRegistry),i("design:type",f.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),t=r([a.injectable()],t)}();e.DecorationPlacer=y},1830:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1267),r=n(9245),i=n(1704),a=n(1948),c=n(3834),s=n(1087),u=new r.ContainerModule((function(t,e,n){o.configureModelElement({bind:t,isBound:n},"marker",i.SIssueMarker,a.IssueMarkerView),t(s.DecorationPlacer).toSelf().inSingletonScope(),t(c.TYPES.IVNodePostprocessor).toService(s.DecorationPlacer)}));e.default=u},1704:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(5056),a=n(1229);e.decorationFeature=Symbol("decorationFeature"),e.isDecoration=function(t){return t.hasFeature(e.decorationFeature)};var c=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return r(n,t),n.DEFAULT_FEATURES=[e.decorationFeature,a.boundsFeature,i.hoverFeedbackFeature,i.popupFeature],n}(a.SShapeElement);e.SDecoration=c;var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(c);e.SIssueMarker=s;var u=function(){};e.SIssue=u},1948:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5181),a=n(1469),c=n(9245),s=function(){function t(){}return t.prototype.render=function(t,e){var n=this.getMaxSeverity(t),o=i.svg("g",{"class-sprotty-issue":!0},i.svg("g",{transform:"scale(0.008928571428571428, 0.008928571428571428)"},i.svg("path",{d:this.getPath(n)})));return a.setClass(o,"sprotty-"+n,!0),o},t.prototype.getMaxSeverity=function(t){for(var e="info",n=0,o=t.issues.map((function(t){return t.severity}));n<o.length;n++){var r=o[n];("error"===r||"warning"===r&&"info"===e)&&(e=r)}return e},t.prototype.getPath=function(t){switch(t){case"error":case"warning":return"M768 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z";case"info":return"M1024 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"}},t=r([c.injectable()],t)}();e.IssueMarkerView=s},4284:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(6193),a=new o.ContainerModule((function(t){t(i.IntersectionFinder).toSelf().inSingletonScope(),t(r.TYPES.IEdgeRoutePostprocessor).toService(i.IntersectionFinder)}));e.default=a},6193:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)},i=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=a(n(868)),u=n(8132);function d(t){return void 0!==t&&"intersections"in t&&"kind"in t}e.isIntersectingRoutedPoint=d,e.BY_X_THEN_Y=function(t,e){return t.intersectionPoint.x===e.intersectionPoint.x?t.intersectionPoint.y-e.intersectionPoint.y:t.intersectionPoint.x-e.intersectionPoint.x};var l=function(){function t(){}return t.prototype.apply=function(t){var e=this.find(t);this.addToRouting(e,t)},t.prototype.find=function(t){var e=new s.default(void 0,u.checkWhichEventIsLeft);return t.routes.forEach((function(t,n){return u.addRoute(n,t,e)})),u.runSweep(e)},t.prototype.addToRouting=function(t,e){for(var n=0,o=t;n<o.length;n++){var r=o[n],i=e.get(r.routable1),a=e.get(r.routable2);this.addIntersectionToRoutedPoint(r,i,r.segmentIndex1),this.addIntersectionToRoutedPoint(r,a,r.segmentIndex2)}},t.prototype.addIntersectionToRoutedPoint=function(t,e,n){if(e&&e.length>n){var o=e[n+1];if(d(o))o.intersections.push(t);else{var i=r(r({},o),{intersections:[t]});e[n+1]=i}}},t=i([c.injectable()],t)}();e.IntersectionFinder=l},8132:function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(868)),i=n(3199);function a(t,e){return t.point.x>e.point.x?1:t.point.x<e.point.x?-1:t.point.y!==e.point.y?t.point.y>e.point.y?1:-1:1}e.addRoute=function(t,e,n){if(!(e.length<1))for(var o=e[0],r=void 0,i=0;i<e.length-1;i++){r=e[i+1];var s=new c(t,o,i),u=new c(t,r,i+1);s.otherEvent=u,u.otherEvent=s,a(s,u)>0?(u.isLeftEndpoint=!0,s.isLeftEndpoint=!1):(s.isLeftEndpoint=!0,u.isLeftEndpoint=!1),n.push(s),n.push(u),o=r}},e.checkWhichEventIsLeft=a;var c=function(t,e,n){this.edgeId=t,this.point=e,this.segmentIndex=n};e.SweepEvent=c;var s=function(t){this.leftSweepEvent=t,this.rightSweepEvent=t.otherEvent};function u(t,e){return t.rightSweepEvent.point.x>e.rightSweepEvent.point.x?1:t.rightSweepEvent.point.x<e.rightSweepEvent.point.x?-1:t.rightSweepEvent.point.y!==e.rightSweepEvent.point.y?t.rightSweepEvent.point.y<e.rightSweepEvent.point.y?1:-1:1}function d(t){return Math.min(t.leftSweepEvent.segmentIndex,t.rightSweepEvent.segmentIndex)}function l(t,e){if(t.leftSweepEvent.edgeId!==e.leftSweepEvent.edgeId){var n=new i.PointToPointLine(t.leftSweepEvent.point,t.rightSweepEvent.point),o=new i.PointToPointLine(e.leftSweepEvent.point,e.rightSweepEvent.point);return n.intersection(o)}}e.Segment=s,e.runSweep=function(t){for(var e=[],n=new r.default([],u);t.length;){var o=t.pop();if(null==o?void 0:o.isLeftEndpoint){for(var i=new s(o),a=0;a<n.data.length;a++){var c=n.data[a],p=l(i,c);p&&e.push({routable1:o.edgeId,routable2:c.leftSweepEvent.edgeId,segmentIndex1:d(i),segmentIndex2:d(c),intersectionPoint:p})}n.push(i)}else!1===(null==o?void 0:o.isLeftEndpoint)&&n.pop()}return e},e.checkWhichSegmentHasRightEndpointFirst=u,e.getSegmentIndex=d,e.intersectionOfSegments=l},7619:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(4784),a=new o.ContainerModule((function(t){t(i.EdgeLayoutPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.EdgeLayoutPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(i.EdgeLayoutPostprocessor)}));e.default=a},4784:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)},i=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(3682),u=n(1469),d=n(6660),l=n(3199),p=n(1229),f=n(4698),y=n(7946),h=function(){function t(){}return t.prototype.decorate=function(t,e){if(f.isEdgeLayoutable(e)&&e.parent instanceof d.SEdge&&e.bounds!==l.EMPTY_BOUNDS){var n=this.getEdgePlacement(e),o=e.parent,r=Math.min(1,Math.max(0,n.position)),i=this.edgeRouterRegistry.get(o.routerKind),a=i.pointAt(o,r),c=i.derivativeAt(o,r),s="";if(a&&c){s+="translate("+a.x+", "+a.y+")";var p=l.toDegrees(Math.atan2(c.y,c.x));if(n.rotate){var y=p;Math.abs(p)>90&&(p<0?y+=180:p>0&&(y-=180)),s+=" rotate("+y+")",s+=" translate("+(h=this.getRotatedAlignment(e,n,y!==p)).x+", "+h.y+")"}else{var h;s+=" translate("+(h=this.getAlignment(e,n,p)).x+", "+h.y+")"}u.setAttr(t,"transform",s)}}return t},t.prototype.getRotatedAlignment=function(t,e,n){var o=p.isAlignable(t)?t.alignment.x:0,r=p.isAlignable(t)?t.alignment.y:0,i=t.bounds;if("on"===e.side)return{x:o-.5*i.height,y:r-.5*i.height};if(n)switch(e.position<.3333333?o-=i.width+e.offset:e.position<.6666666?o-=.5*i.width:o+=e.offset,e.side){case"left":case"bottom":r-=e.offset+i.height;break;case"right":case"top":r+=e.offset}else switch(e.position<.3333333?o+=e.offset:e.position<.6666666?o-=.5*i.width:o-=i.width+e.offset,e.side){case"right":case"bottom":r+=-e.offset-i.height;break;case"left":case"top":r+=e.offset}return{x:o,y:r}},t.prototype.getEdgePlacement=function(t){for(var e=t,n=[];void 0!==e;){var o=e.edgePlacement;if(void 0!==o&&n.push(o),!(e instanceof s.SChildElement))break;e=e.parent}return n.reverse().reduce((function(t,e){return r(r({},t),e)}),f.DEFAULT_EDGE_PLACEMENT)},t.prototype.getAlignment=function(t,e,n){var o=t.bounds,r=p.isAlignable(t)?t.alignment.x-o.width:0,i=p.isAlignable(t)?t.alignment.y-o.height:0;if("on"===e.side)return{x:r+.5*o.height,y:i+.5*o.height};var a=this.getQuadrant(n),c={x:e.offset,y:i+.5*o.height},s={x:e.offset,y:i+o.height+e.offset},u={x:-o.width-e.offset,y:i+o.height+e.offset},d={x:-o.width-e.offset,y:i+.5*o.height},f={x:-o.width-e.offset,y:i-e.offset},y={x:e.offset,y:i-e.offset};switch(e.side){case"left":switch(a.orientation){case"west":return l.linear(s,u,a.position);case"north":return l.linear(u,f,a.position);case"east":return l.linear(f,y,a.position);case"south":return l.linear(y,s,a.position)}break;case"right":switch(a.orientation){case"west":return l.linear(f,y,a.position);case"north":return l.linear(y,s,a.position);case"east":return l.linear(s,u,a.position);case"south":return l.linear(u,f,a.position)}break;case"top":switch(a.orientation){case"west":case"east":return l.linear(f,y,a.position);case"north":case"south":return this.linearFlip(y,c,d,f,a.position)}break;case"bottom":switch(a.orientation){case"west":case"east":return l.linear(s,u,a.position);case"north":case"south":return this.linearFlip(u,d,c,s,a.position)}}return{x:0,y:0}},t.prototype.getQuadrant=function(t){return Math.abs(t)>135?{orientation:"west",position:(t>0?t-135:t+225)/90}:t<-45?{orientation:"north",position:(t+135)/90}:t<45?{orientation:"east",position:(t+45)/90}:{orientation:"south",position:(t-45)/90}},t.prototype.linearFlip=function(t,e,n,o,r){return r<.5?l.linear(t,e,2*r):l.linear(n,o,2*r-1)},t.prototype.postUpdate=function(){},i([c.inject(y.EdgeRouterRegistry),a("design:type",y.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),t=i([c.injectable()],t)}();e.EdgeLayoutPostprocessor=h},4698:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3682),a=n(1229),c=n(1072);e.edgeLayoutFeature=Symbol("edgeLayout"),e.isEdgeLayoutable=function(t){return t instanceof i.SChildElement&&t.parent instanceof c.SRoutableElement&&function(t){return"edgePlacement"in t}(t)&&a.isBoundsAware(t)&&t.hasFeature(e.edgeLayoutFeature)};var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(Object);e.EdgePlacement=s,e.DEFAULT_EDGE_PLACEMENT={rotate:!0,side:"top",position:.5,offset:7}},1793:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.creatingOnDragFeature=Symbol("creatingOnDragFeature"),e.isCreatingOnDrag=function(t){return t.hasFeature(e.creatingOnDragFeature)&&void 0!==t.createAction}},4552:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(4051),d=n(3682),l=n(9245),p=n(3834),f=function(){function t(e,n){this.containerId=e,this.elementSchema=n,this.kind=t.KIND}return t.KIND="createElement",t}();e.CreateElementAction=f;var y=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.containerId);return e instanceof d.SParentElement&&(this.container=e,this.newElement=t.modelFactory.createElement(this.action.elementSchema),this.container.add(this.newElement)),t.root},e.prototype.undo=function(t){return this.container.remove(this.newElement),t.root},e.prototype.redo=function(t){return this.container.add(this.newElement),t.root},e.KIND=f.KIND,e=a([l.injectable(),s(0,l.inject(p.TYPES.Action)),c("design:paramtypes",[f])],e)}(u.Command);e.CreateElementCommand=y},1984:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(4051),d=n(3682),l=n(3834),p=n(9245);function f(t){return t instanceof d.SChildElement&&t.hasFeature(e.deletableFeature)}e.deletableFeature=Symbol("deletableFeature"),e.isDeletable=f;var y=function(){function t(e){this.elementIds=e,this.kind=t.KIND}return t.KIND="delete",t}();e.DeleteElementAction=y;var h=function(){};e.ResolvedDelete=h;var g=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedDeletes=[],n}return i(e,t),e.prototype.execute=function(t){for(var e=t.root.index,n=0,o=this.action.elementIds;n<o.length;n++){var r=o[n],i=e.getById(r);i&&f(i)&&(this.resolvedDeletes.push({child:i,parent:i.parent}),i.parent.remove(i))}return t.root},e.prototype.undo=function(t){for(var e=0,n=this.resolvedDeletes;e<n.length;e++){var o=n[e];o.parent.add(o.child)}return t.root},e.prototype.redo=function(t){for(var e=0,n=this.resolvedDeletes;e<n.length;e++){var o=n[e];o.parent.remove(o.child)}return t.root},e.KIND=y.KIND,e=a([p.injectable(),s(0,p.inject(l.TYPES.Action)),c("design:paramtypes",[y])],e)}(u.Command);e.DeleteElementCommand=g},57:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(4588),a=n(6691),c=n(1267),s=n(1072),u=n(2976),d=n(1984),l=n(4977),p=n(3696),f=n(181),y=n(7812);e.edgeEditModule=new o.ContainerModule((function(t,e,n){var o={bind:t,isBound:n};i.configureCommand(o,f.SwitchEditModeCommand),i.configureCommand(o,y.ReconnectCommand),i.configureCommand(o,d.DeleteElementCommand),c.configureModelElement(o,"dangling-anchor",s.SDanglingAnchor,u.EmptyGroupView)})),e.labelEditModule=new o.ContainerModule((function(t,e,n){t(r.TYPES.MouseListener).to(l.EditLabelMouseListener),t(r.TYPES.KeyListener).to(l.EditLabelKeyListener),i.configureCommand({bind:t,isBound:n},l.ApplyLabelEditCommand)})),e.labelEditUiModule=new o.ContainerModule((function(t,e,n){var o={bind:t,isBound:n};a.configureActionHandler(o,l.EditLabelAction.KIND,p.EditLabelActionHandler),t(p.EditLabelUI).toSelf().inSingletonScope(),t(r.TYPES.IUIExtension).toService(p.EditLabelUI)}))},3696:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},d=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var l=n(9245),p=n(3834),f=n(1856),y=n(594),h=n(4715),g=n(6175),_=n(6903),m=n(1229),v=n(5483),b=n(4977),S=n(8167),P=function(){function t(){}return t.prototype.handle=function(t){if(b.isEditLabelAction(t))return new y.SetUIExtensionVisibilityAction(w.ID,!0,[t.labelId])},t=a([l.injectable()],t)}();e.EditLabelActionHandler=P;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.validationTimeout=void 0,e.isActive=!1,e.blockApplyEditOnInvalidInput=!0,e.isCurrentLabelValid=!0,e}var n;return i(e,t),n=e,e.prototype.id=function(){return n.ID},e.prototype.containerClass=function(){return"label-edit"},Object.defineProperty(e.prototype,"labelId",{get:function(){return this.label?this.label.id:"unknown"},enumerable:!0,configurable:!0}),e.prototype.initializeContents=function(t){var e=this;t.style.position="absolute",this.inputElement=document.createElement("input"),this.textAreaElement=document.createElement("textarea"),[this.inputElement,this.textAreaElement].forEach((function(n){n.onkeydown=function(t){return e.applyLabelEditOnEvent(t,"Enter")},e.configureAndAdd(n,t)}))},e.prototype.configureAndAdd=function(t,e){var n=this;t.style.visibility="hidden",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.addEventListener("keydown",(function(t){return n.hideIfEscapeEvent(t)})),t.addEventListener("keyup",(function(e){return n.validateLabelIfContentChange(e,t.value)})),t.addEventListener("blur",(function(){return window.setTimeout((function(){return n.applyLabelEdit()}),200)})),e.appendChild(t)},Object.defineProperty(e.prototype,"editControl",{get:function(){return this.label&&this.label.isMultiLine?this.textAreaElement:this.inputElement},enumerable:!0,configurable:!0}),e.prototype.hideIfEscapeEvent=function(t){_.matchesKeystroke(t,"Escape")&&this.hide()},e.prototype.applyLabelEditOnEvent=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];_.matchesKeystroke.apply(void 0,d([t,e||"Enter"],n))&&(t.preventDefault(),this.applyLabelEdit())},e.prototype.validateLabelIfContentChange=function(t,e){void 0!==this.previousLabelContent&&this.previousLabelContent===e||(this.previousLabelContent=e,this.performLabelValidation(t,this.editControl.value))},e.prototype.applyLabelEdit=function(){return s(this,void 0,void 0,(function(){var t=this;return u(this,(function(e){switch(e.label){case 0:return this.isActive?this.blockApplyEditOnInvalidInput?[4,this.validateLabel(this.editControl.value)]:[3,2]:[2];case 1:if("error"===e.sent().severity)return this.editControl.focus(),[2];e.label=2;case 2:return this.actionDispatcherProvider().then((function(e){return e.dispatchAll([new b.ApplyLabelEditAction(t.labelId,t.editControl.value),new g.CommitModelAction])})).catch((function(e){return t.logger.error(t,"No action dispatcher available to execute apply label edit action",e)})),this.hide(),[2]}}))}))},e.prototype.performLabelValidation=function(t,e){var n=this;this.validationTimeout&&window.clearTimeout(this.validationTimeout),this.validationTimeout=window.setTimeout((function(){return n.validateLabel(e)}),200)},e.prototype.validateLabel=function(t){return s(this,void 0,void 0,(function(){var e,n;return u(this,(function(o){switch(o.label){case 0:if(!this.labelValidator||!this.label)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.labelValidator.validate(t,this.label)];case 2:return e=o.sent(),this.isCurrentLabelValid="error"!==e.severity,this.showValidationResult(e),[2,e];case 3:return n=o.sent(),this.logger.error(this,"Error validating edited label",n),[3,4];case 4:return this.isCurrentLabelValid=!0,[2,{severity:"ok",message:void 0}]}}))}))},e.prototype.showValidationResult=function(t){this.clearValidationResult(),this.validationDecorator&&this.validationDecorator.decorate(this.editControl,t)},e.prototype.clearValidationResult=function(){this.validationDecorator&&this.validationDecorator.dispose(this.editControl)},e.prototype.show=function(e){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];O(n,e)&&!this.isActive&&(t.prototype.show.apply(this,d([e],n)),this.isActive=!0)},e.prototype.hide=function(){this.editControl.style.visibility="hidden",t.prototype.hide.call(this),this.clearValidationResult(),this.isActive=!1,this.isCurrentLabelValid=!0,this.previousLabelContent=void 0,this.labelElement&&(this.labelElement.style.visibility="visible")},e.prototype.onBeforeShow=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.label=E(n,e)[0],this.previousLabelContent=this.label.text,this.setPosition(t),this.applyTextContents(),this.applyFontStyling(),this.editControl.style.visibility="visible",this.editControl.focus()},e.prototype.setPosition=function(t){var e=0,n=0,o=100,r=20;if(this.label){var i=v.getZoom(this.label),a=m.getAbsoluteClientBounds(this.label,this.domHelper,this.viewerOptions);e=a.x+(this.label.editControlPositionCorrection?this.label.editControlPositionCorrection.x:0)*i,n=a.y+(this.label.editControlPositionCorrection?this.label.editControlPositionCorrection.y:0)*i,r=(this.label.editControlDimension?this.label.editControlDimension.height:r)*i,o=(this.label.editControlDimension?this.label.editControlDimension.width:o)*i}t.style.left=e+"px",t.style.top=n+"px",t.style.width=o+"px",this.editControl.style.width=o+"px",t.style.height=r+"px",this.editControl.style.height=r+"px"},e.prototype.applyTextContents=function(){this.label&&(this.editControl.value=this.label.text,this.editControl instanceof HTMLTextAreaElement?(this.editControl.selectionStart=0,this.editControl.selectionEnd=0,this.editControl.scrollTop=0,this.editControl.scrollLeft=0):this.editControl.setSelectionRange(0,this.editControl.value.length))},e.prototype.applyFontStyling=function(){if(this.label&&(this.labelElement=document.getElementById(this.domHelper.createUniqueDOMElementId(this.label)),this.labelElement)){this.labelElement.style.visibility="hidden";var t=window.getComputedStyle(this.labelElement);this.editControl.style.font=t.font,this.editControl.style.fontStyle=t.fontStyle,this.editControl.style.fontFamily=t.fontFamily,this.editControl.style.fontSize=(e=t.fontSize,n=v.getZoom(this.label),e.replace(/([0-9]+)/,(function(t){return String(Number.parseInt(t,10)*n)}))),this.editControl.style.fontWeight=t.fontWeight,this.editControl.style.lineHeight=t.lineHeight}var e,n},e.ID="editLabelUi",a([l.inject(p.TYPES.IActionDispatcherProvider),c("design:type",Function)],e.prototype,"actionDispatcherProvider",void 0),a([l.inject(p.TYPES.ViewerOptions),c("design:type",Object)],e.prototype,"viewerOptions",void 0),a([l.inject(p.TYPES.DOMHelper),c("design:type",h.DOMHelper)],e.prototype,"domHelper",void 0),a([l.inject(p.TYPES.IEditLabelValidator),l.optional(),c("design:type",Object)],e.prototype,"labelValidator",void 0),a([l.inject(p.TYPES.IEditLabelValidationDecorator),l.optional(),c("design:type",Object)],e.prototype,"validationDecorator",void 0),e=n=a([l.injectable()],e)}(f.AbstractUIExtension);function O(t,e){return 1===E(t,e).length}function E(t,e){return t.map((function(t){return e.index.getById(t)})).filter(S.isEditableLabel)}e.EditLabelUI=w},4977:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(9672),l=n(4051),p=n(3834),f=n(5504),y=n(1886),h=n(6903),g=n(7040),_=n(1933),m=n(8167),v=function(){function t(e){this.labelId=e,this.kind=t.KIND}return t.KIND="EditLabel",t}();e.EditLabelAction=v,e.isEditLabelAction=function(t){return d.isAction(t)&&t.kind===v.KIND&&"labelId"in t};var b=function(){function t(e,n){this.labelId=e,this.text=n,this.kind=t.KIND}return t.KIND="applyLabelEdit",t}();e.ApplyLabelEditAction=b;var S=function(){};e.ResolvedLabelEdit=S;var P=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.labelId);return e&&m.isEditableLabel(e)&&(this.resolvedLabelEdit={label:e,oldLabel:e.text,newLabel:this.action.text},e.text=this.action.text),t.root},e.prototype.undo=function(t){return this.resolvedLabelEdit&&(this.resolvedLabelEdit.label.text=this.resolvedLabelEdit.oldLabel),t.root},e.prototype.redo=function(t){return this.resolvedLabelEdit&&(this.resolvedLabelEdit.label.text=this.resolvedLabelEdit.newLabel),t.root},e.KIND=b.KIND,e=a([s(0,u.inject(p.TYPES.Action)),c("design:paramtypes",[b])],e)}(l.Command);e.ApplyLabelEditCommand=P;var w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.doubleClick=function(t,e){var n=E(t);return n?[new v(n.id)]:[]},e}(f.MouseListener);e.EditLabelMouseListener=w;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){if(h.matchesKeystroke(e,"F2")){var n=_.toArray(t.index.all().filter((function(t){return g.isSelectable(t)&&t.selected}))).map(E).filter((function(t){return void 0!==t}));if(1===n.length)return[new v(n[0].id)]}return[]},e}(y.KeyListener);function E(t){return m.isEditableLabel(t)?t:m.isWithEditableLabel(t)&&t.editableLabel?t.editableLabel:void 0}e.EditLabelKeyListener=O,e.getEditableLabel=E},181:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(4051),l=n(3682),p=n(3834),f=n(1072),y=n(7946),h=n(8167),g=function(){function t(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),this.elementsToActivate=e,this.elementsToDeactivate=n,this.kind=t.KIND}return t.KIND="switchEditMode",t}();e.SwitchEditModeAction=g;var _=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.elementsToActivate=[],n.elementsToDeactivate=[],n.handlesToRemove=[],n}return i(e,t),e.prototype.execute=function(t){var e=this,n=t.root.index;return this.action.elementsToActivate.forEach((function(t){var o=n.getById(t);void 0!==o&&e.elementsToActivate.push(o)})),this.action.elementsToDeactivate.forEach((function(t){var o=n.getById(t);if(void 0!==o&&e.elementsToDeactivate.push(o),o instanceof f.SRoutingHandle&&o.parent instanceof f.SRoutableElement){var r=o.parent;e.shouldRemoveHandle(o,r)&&(e.handlesToRemove.push({handle:o,parent:r}),e.elementsToDeactivate.push(r),e.elementsToActivate.push(r))}})),this.doExecute(t)},e.prototype.doExecute=function(t){var e=this;return this.handlesToRemove.forEach((function(t){t.point=t.parent.routingPoints.splice(t.handle.pointIndex,1)[0]})),this.elementsToDeactivate.forEach((function(t){t instanceof f.SRoutableElement?t.removeAll((function(t){return t instanceof f.SRoutingHandle})):t instanceof f.SRoutingHandle&&(t.editMode=!1,t.danglingAnchor&&t.parent instanceof f.SRoutableElement&&t.danglingAnchor.original&&(t.parent.source===t.danglingAnchor?t.parent.sourceId=t.danglingAnchor.original.id:t.parent.target===t.danglingAnchor&&(t.parent.targetId=t.danglingAnchor.original.id),t.danglingAnchor.parent.remove(t.danglingAnchor),t.danglingAnchor=void 0))})),this.elementsToActivate.forEach((function(t){h.canEditRouting(t)&&t instanceof l.SParentElement?e.edgeRouterRegistry.get(t.routerKind).createRoutingHandles(t):t instanceof f.SRoutingHandle&&(t.editMode=!0)})),t.root},e.prototype.shouldRemoveHandle=function(t,e){return"junction"===t.kind&&void 0===this.edgeRouterRegistry.route(e).find((function(e){return e.pointIndex===t.pointIndex}))},e.prototype.undo=function(t){var e=this;return this.handlesToRemove.forEach((function(t){void 0!==t.point&&t.parent.routingPoints.splice(t.handle.pointIndex,0,t.point)})),this.elementsToActivate.forEach((function(t){t instanceof f.SRoutableElement?t.removeAll((function(t){return t instanceof f.SRoutingHandle})):t instanceof f.SRoutingHandle&&(t.editMode=!1)})),this.elementsToDeactivate.forEach((function(t){h.canEditRouting(t)?e.edgeRouterRegistry.get(t.routerKind).createRoutingHandles(t):t instanceof f.SRoutingHandle&&(t.editMode=!0)})),t.root},e.prototype.redo=function(t){return this.doExecute(t)},e.KIND=g.KIND,a([u.inject(y.EdgeRouterRegistry),c("design:type",y.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=a([u.injectable(),s(0,u.inject(p.TYPES.Action)),c("design:paramtypes",[g])],e)}(d.Command);e.SwitchEditModeCommand=_},8167:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(1072);e.editFeature=Symbol("editFeature"),e.canEditRouting=function(t){return t instanceof o.SRoutableElement&&t.hasFeature(e.editFeature)},e.editLabelFeature=Symbol("editLabelFeature"),e.isEditableLabel=function(t){return"text"in t&&t.hasFeature(e.editLabelFeature)},e.withEditLabelFeature=Symbol("withEditLabelFeature"),e.isWithEditableLabel=function(t){return"editableLabel"in t&&t.hasFeature(e.withEditLabelFeature)}},7812:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(4051),l=n(3834),p=n(1072),f=n(7946),y=function(){function t(e,n,o){this.routableId=e,this.newSourceId=n,this.newTargetId=o,this.kind=t.KIND}return t.KIND="reconnect",t}();e.ReconnectAction=y;var h=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return this.doExecute(t),t.root},e.prototype.doExecute=function(t){var e=t.root.index.getById(this.action.routableId);if(e instanceof p.SRoutableElement){var n=this.edgeRouterRegistry.get(e.routerKind),o=n.takeSnapshot(e);n.applyReconnect(e,this.action.newSourceId,this.action.newTargetId);var r=n.takeSnapshot(e);this.memento={edge:e,before:o,after:r}}},e.prototype.undo=function(t){this.memento&&this.edgeRouterRegistry.get(this.memento.edge.routerKind).applySnapshot(this.memento.edge,this.memento.before);return t.root},e.prototype.redo=function(t){this.memento&&this.edgeRouterRegistry.get(this.memento.edge.routerKind).applySnapshot(this.memento.edge,this.memento.after);return t.root},e.KIND=y.KIND,a([u.inject(f.EdgeRouterRegistry),c("design:type",f.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=a([u.injectable(),s(0,u.inject(l.TYPES.Action)),c("design:paramtypes",[y])],e)}(d.Command);e.ReconnectCommand=h},490:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(4898),a=new o.ContainerModule((function(t){t(r.TYPES.IButtonHandler).toConstructor(i.ExpandButtonHandler)}));e.default=a},4898:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(8127),a=n(9240),c=n(9245),s=function(){function t(e,n){this.expandIds=e,this.collapseIds=n,this.kind=t.KIND}return t.KIND="collapseExpand",t}();e.CollapseExpandAction=s;var u=function(){function t(e){void 0===e&&(e=!0),this.expand=e,this.kind=t.KIND}return t.KIND="collapseExpandAll",t}();e.CollapseExpandAllAction=u;var d=function(){function t(){}return t.prototype.buttonPressed=function(t){var e=i.findParentByFeature(t,a.isExpandable);return void 0!==e?[new s(e.expanded?[]:[e.id],e.expanded?[e.id]:[])]:[]},t.TYPE="button:expand",t=r([c.injectable()],t)}();e.ExpandButtonHandler=d},9240:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.expandFeature=Symbol("expandFeature"),e.isExpandable=function(t){return t.hasFeature(e.expandFeature)&&"expanded"in t}},1432:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5181),a=n(9240),c=n(8127),s=n(9245),u=function(){function t(){}return t.prototype.render=function(t,e){var n=c.findParentByFeature(t,a.isExpandable),o=void 0!==n&&n.expanded?"M 1,5 L 8,12 L 15,5 Z":"M 1,8 L 8,15 L 8,1 Z";return i.svg("g",{"class-sprotty-button":"{true}","class-enabled":"{button.enabled}"},i.svg("rect",{x:0,y:0,width:16,height:16,opacity:0}),i.svg("path",{d:o}))},t=r([s.injectable()],t)}();e.ExpandButtonView=u},7985:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(575),a=n(3133),c=n(4588),s=new o.ContainerModule((function(t,e,n){t(r.TYPES.KeyListener).to(i.ExportSvgKeyListener).inSingletonScope(),t(r.TYPES.HiddenVNodePostprocessor).to(i.ExportSvgPostprocessor).inSingletonScope(),c.configureCommand({bind:t,isBound:n},i.ExportSvgCommand),t(r.TYPES.SvgExporter).to(a.SvgExporter).inSingletonScope()}));e.default=s},575:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(4051),l=n(7040),p=n(9672),f=n(3682),y=n(1886),h=n(6903),g=n(6312),_=n(3133),m=n(1945),v=n(5056),b=n(3834),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return h.matchesKeystroke(e,"KeyE","ctrlCmd","shift")?[new P]:[]},e=a([u.injectable()],e)}(y.KeyListener);e.ExportSvgKeyListener=S;var P=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(p.generateRequestId())},t.KIND="requestExportSvg",t}();e.RequestExportSvgAction=P;var w=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){if(g.isExportable(t.root)){var e=t.modelFactory.createRoot(t.root);if(g.isExportable(e))return m.isViewport(e)&&(e.zoom=1,e.scroll={x:0,y:0}),e.index.all().forEach((function(t){l.isSelectable(t)&&t.selected&&(t.selected=!1),v.isHoverable(t)&&t.hoverFeedback&&(t.hoverFeedback=!1)})),{model:e,modelChanged:!0,cause:this.action}}return{model:t.root,modelChanged:!1}},e.KIND=P.KIND,e=a([s(0,u.inject(b.TYPES.Action)),c("design:paramtypes",[P])],e)}(d.HiddenCommand);e.ExportSvgCommand=w;var O=function(){function t(){}return t.prototype.decorate=function(t,e){return e instanceof f.SModelRoot&&(this.root=e),t},t.prototype.postUpdate=function(t){this.root&&void 0!==t&&t.kind===P.KIND&&this.svgExporter.export(this.root,t)},a([u.inject(b.TYPES.SvgExporter),c("design:type",_.SvgExporter)],t.prototype,"svgExporter",void 0),t=a([u.injectable()],t)}();e.ExportSvgPostprocessor=O},6312:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exportFeature=Symbol("exportFeature"),e.isExportable=function(t){return t.hasFeature(e.exportFeature)}},3133:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(1229),c=n(3787),s=n(3834),u=n(3199),d=n(9245),l=function(){function t(e,n){void 0===n&&(n=""),this.svg=e,this.responseId=n,this.kind=t.KIND}return t.KIND="exportSvg",t}();e.ExportSvgAction=l;var p=function(){function t(){}return t.prototype.export=function(t,e){if("undefined"!=typeof document){var n=document.getElementById(this.options.hiddenDiv);if(null!==n&&n.firstElementChild&&"svg"===n.firstElementChild.tagName){var o=n.firstElementChild,r=this.createSvg(o,t);this.actionDispatcher.dispatch(new l(r,e?e.requestId:""))}}},t.prototype.createSvg=function(t,e){var n=new XMLSerializer,o=n.serializeToString(t),r=document.createElement("iframe");if(document.body.appendChild(r),!r.contentWindow)throw new Error("IFrame has no contentWindow");var i=r.contentWindow.document;i.open(),i.write(o),i.close();var a=i.getElementById(t.id);a.removeAttribute("opacity"),this.copyStyles(t,a,["width","height","opacity"]),a.setAttribute("version","1.1");var c=this.getBounds(e);a.setAttribute("viewBox",c.x+" "+c.y+" "+c.width+" "+c.height);var s=n.serializeToString(a);return document.body.removeChild(r),s},t.prototype.copyStyles=function(t,e,n){for(var o=getComputedStyle(t),r=getComputedStyle(e),i="",a=0;a<o.length;a++){var c=o[a];if(-1===n.indexOf(c)){var s=o.getPropertyValue(c);r.getPropertyValue(c)!==s&&(i+=c+":"+s+";")}}""!==i&&e.setAttribute("style",i);for(a=0;a<t.childNodes.length;++a){var u=t.childNodes[a],d=e.childNodes[a];u instanceof Element&&this.copyStyles(u,d,[])}},t.prototype.getBounds=function(t){var e=[u.EMPTY_BOUNDS];return t.children.forEach((function(t){a.isBoundsAware(t)&&e.push(t.bounds)})),e.reduce((function(t,e){return u.combine(t,e)}))},r([d.inject(s.TYPES.ViewerOptions),i("design:type",Object)],t.prototype,"options",void 0),r([d.inject(s.TYPES.IActionDispatcher),i("design:type",c.ActionDispatcher)],t.prototype,"actionDispatcher",void 0),r([d.inject(s.TYPES.ILogger),i("design:type",Object)],t.prototype,"log",void 0),t=r([d.injectable()],t)}();e.SvgExporter=p},9066:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(4265),a=new o.ContainerModule((function(t){t(r.TYPES.IVNodePostprocessor).to(i.ElementFader).inSingletonScope()}));e.default=a},4265:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(4633),u=n(3682),d=n(1469),l=n(8681),p=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementFades=n,i.removeAfterFadeOut=r,i}return i(e,t),e.prototype.tween=function(t,e){for(var n=0,o=this.elementFades;n<o.length;n++){var r=o[n],i=r.element;"in"===r.type?i.opacity=t:"out"===r.type&&(i.opacity=1-t,1===t&&this.removeAfterFadeOut&&i instanceof u.SChildElement&&i.parent.remove(i))}return this.model},e}(s.Animation);e.FadeAnimation=p;var f=function(){function t(){}return t.prototype.decorate=function(t,e){return l.isFadeable(e)&&1!==e.opacity&&d.setAttr(t,"opacity",e.opacity),t},t.prototype.postUpdate=function(){},t=a([c.injectable()],t)}();e.ElementFader=f},8681:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fadeFeature=Symbol("fadeFeature"),e.isFadeable=function(t){return t.hasFeature(e.fadeFeature)&&void 0!==t.opacity}},5387:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(197),a=n(8884),c=n(4588),s=n(6691),u=n(1455),d=n(7217),l=n(3263),p=new o.ContainerModule((function(t,e,n){t(r.TYPES.PopupVNodePostprocessor).to(a.PopupPositionUpdater).inSingletonScope(),t(r.TYPES.MouseListener).to(i.HoverMouseListener),t(r.TYPES.PopupMouseListener).to(i.PopupHoverMouseListener),t(r.TYPES.KeyListener).to(i.HoverKeyListener),t(r.TYPES.HoverState).toConstantValue({mouseOverTimer:void 0,mouseOutTimer:void 0,popupOpen:!1,previousPopupElement:void 0}),t(i.ClosePopupActionHandler).toSelf().inSingletonScope();var o={bind:t,isBound:n};c.configureCommand(o,i.HoverFeedbackCommand),c.configureCommand(o,i.SetPopupModelCommand),s.configureActionHandler(o,i.SetPopupModelCommand.KIND,i.ClosePopupActionHandler),s.configureActionHandler(o,u.FitToScreenCommand.KIND,i.ClosePopupActionHandler),s.configureActionHandler(o,u.CenterCommand.KIND,i.ClosePopupActionHandler),s.configureActionHandler(o,d.SetViewportCommand.KIND,i.ClosePopupActionHandler),s.configureActionHandler(o,l.MoveCommand.KIND,i.ClosePopupActionHandler)}));e.default=p},197:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(6903),l=n(3199),p=n(3834),f=n(3682),y=n(5504),h=n(9672),g=n(4051),_=n(1294),m=n(1886),v=n(8127),b=n(1229),S=n(5056),P=function(){function t(e,n){this.mouseoverElement=e,this.mouseIsOver=n,this.kind=t.KIND}return t.KIND="hoverFeedback",t}();e.HoverFeedbackAction=P;var w=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){var e=t.root.index.getById(this.action.mouseoverElement);return e&&S.isHoverable(e)&&(e.hoverFeedback=this.action.mouseIsOver),this.redo(t)},e.prototype.undo=function(t){return t.root},e.prototype.redo=function(t){return t.root},e.KIND=P.KIND,e=a([u.injectable(),s(0,u.inject(p.TYPES.Action)),c("design:paramtypes",[P])],e)}(g.SystemCommand);e.HoverFeedbackCommand=w;var O=function(){function t(e,n,o){void 0===o&&(o=""),this.elementId=e,this.bounds=n,this.requestId=o,this.kind=t.KIND}return t.create=function(e,n){return new t(e,n,h.generateRequestId())},t.KIND="requestPopupModel",t}();e.RequestPopupModelAction=O;var E=function(){function t(e,n){void 0===n&&(n=""),this.newRoot=e,this.responseId=n,this.kind=t.KIND}return t.KIND="setPopupModel",t}();e.SetPopupModelAction=E;var R=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return this.oldRoot=t.root,this.newRoot=t.modelFactory.createRoot(this.action.newRoot),this.newRoot},e.prototype.undo=function(t){return this.oldRoot},e.prototype.redo=function(t){return this.newRoot},e.KIND=E.KIND,e=a([u.injectable(),s(0,u.inject(p.TYPES.Action)),c("design:paramtypes",[E])],e)}(g.PopupCommand);e.SetPopupModelCommand=R;var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.mouseDown=function(t,e){return this.mouseIsDown=!0,[]},e.prototype.mouseUp=function(t,e){return this.mouseIsDown=!1,[]},e.prototype.stopMouseOutTimer=function(){void 0!==this.state.mouseOutTimer&&(window.clearTimeout(this.state.mouseOutTimer),this.state.mouseOutTimer=void 0)},e.prototype.startMouseOutTimer=function(){var t=this;return this.stopMouseOutTimer(),new Promise((function(e){t.state.mouseOutTimer=window.setTimeout((function(){t.state.popupOpen=!1,t.state.previousPopupElement=void 0,e(new E({type:_.EMPTY_ROOT.type,id:_.EMPTY_ROOT.id}))}),t.options.popupCloseDelay)}))},e.prototype.stopMouseOverTimer=function(){void 0!==this.state.mouseOverTimer&&(window.clearTimeout(this.state.mouseOverTimer),this.state.mouseOverTimer=void 0)},a([u.inject(p.TYPES.ViewerOptions),c("design:type",Object)],e.prototype,"options",void 0),a([u.inject(p.TYPES.HoverState),c("design:type",Object)],e.prototype,"state",void 0),e}(y.MouseListener);e.AbstractHoverMouseListener=T;var I=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.computePopupBounds=function(t,e){var n={x:-5,y:20},o=b.getAbsoluteBounds(t),r=t.root.canvasBounds,i=l.translate(o,r),a=i.x+i.width-e.x,c=i.y+i.height-e.y;c<=a&&this.allowSidePosition(t,"below",c)?n={x:-5,y:Math.round(c+5)}:a<=c&&this.allowSidePosition(t,"right",a)&&(n={x:Math.round(a+5),y:-5});var s=e.x+n.x,u=r.x+r.width;s>u&&(s=u);var d=e.y+n.y,p=r.y+r.height;return d>p&&(d=p),{x:s,y:d,width:-1,height:-1}},e.prototype.allowSidePosition=function(t,e,n){return!(t instanceof f.SModelRoot)&&n<=150},e.prototype.startMouseOverTimer=function(t,e){var n=this;return this.stopMouseOverTimer(),new Promise((function(o){n.state.mouseOverTimer=window.setTimeout((function(){var r=n.computePopupBounds(t,{x:e.pageX,y:e.pageY});o(new O(t.id,r)),n.state.popupOpen=!0,n.state.previousPopupElement=t}),n.options.popupOpenDelay)}))},e.prototype.mouseOver=function(t,e){var n=[];if(!this.mouseIsDown){var o=v.findParent(t,S.hasPopupFeature);this.state.popupOpen&&(void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id!==o.id)?n.push(this.startMouseOutTimer()):(this.stopMouseOverTimer(),this.stopMouseOutTimer()),void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,e)),this.lastHoverFeedbackElementId&&(n.push(new P(this.lastHoverFeedbackElementId,!1)),this.lastHoverFeedbackElementId=void 0);var r=v.findParentByFeature(t,S.isHoverable);void 0!==r&&(n.push(new P(r.id,!0)),this.lastHoverFeedbackElementId=r.id)}return n},e.prototype.mouseOut=function(t,e){var n=[];if(!this.mouseIsDown){var o=document.elementFromPoint(e.x,e.y);if(!this.isSprottyPopup(o)){if(this.state.popupOpen){var r=v.findParent(t,S.hasPopupFeature);void 0!==this.state.previousPopupElement&&void 0!==r&&this.state.previousPopupElement.id===r.id&&n.push(this.startMouseOutTimer())}this.stopMouseOverTimer();var i=v.findParentByFeature(t,S.isHoverable);void 0!==i&&(n.push(new P(i.id,!1)),this.lastHoverFeedbackElementId=void 0)}}return n},e.prototype.isSprottyPopup=function(t){return!!t&&(t.id===this.options.popupDiv||!!t.parentElement&&this.isSprottyPopup(t.parentElement))},e.prototype.mouseMove=function(t,e){var n=[];if(!this.mouseIsDown){void 0!==this.state.previousPopupElement&&this.closeOnMouseMove(this.state.previousPopupElement,e)&&n.push(this.startMouseOutTimer());var o=v.findParent(t,S.hasPopupFeature);void 0===o||void 0!==this.state.previousPopupElement&&this.state.previousPopupElement.id===o.id||n.push(this.startMouseOverTimer(o,e))}return n},e.prototype.closeOnMouseMove=function(t,e){return t instanceof f.SModelRoot},a([u.inject(p.TYPES.ViewerOptions),c("design:type",Object)],e.prototype,"options",void 0),e=a([u.injectable()],e)}(T);e.HoverMouseListener=I;var A=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.mouseOut=function(t,e){return[this.startMouseOutTimer()]},e.prototype.mouseOver=function(t,e){return this.stopMouseOutTimer(),this.stopMouseOverTimer(),[]},e=a([u.injectable()],e)}(T);e.PopupHoverMouseListener=A;var x=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return d.matchesKeystroke(e,"Escape")?[new E({type:_.EMPTY_ROOT.type,id:_.EMPTY_ROOT.id})]:[]},e}(m.KeyListener);e.HoverKeyListener=x;var C=function(){function t(){this.popupOpen=!1}return t.prototype.handle=function(t){if(t.kind===R.KIND)this.popupOpen=t.newRoot.type!==_.EMPTY_ROOT.type;else if(this.popupOpen)return new E({id:_.EMPTY_ROOT.id,type:_.EMPTY_ROOT.type})},t=a([u.injectable()],t)}();e.ClosePopupActionHandler=C},5056:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hoverFeedbackFeature=Symbol("hoverFeedbackFeature"),e.isHoverable=function(t){return t.hasFeature(e.hoverFeedbackFeature)},e.popupFeature=Symbol("popupFeature"),e.hasPopupFeature=function(t){return t.hasFeature(e.popupFeature)}},8884:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(9245),c=n(3834),s=function(){function t(){}return t.prototype.decorate=function(t,e){return t},t.prototype.postUpdate=function(){var t=document.getElementById(this.options.popupDiv);if(null!==t&&"undefined"!=typeof window){var e=t.getBoundingClientRect();window.innerHeight<e.height+e.top&&(t.style.top=window.pageYOffset+window.innerHeight-e.height-5+"px"),window.innerWidth<e.left+e.width&&(t.style.left=window.pageXOffset+window.innerWidth-e.width-5+"px"),e.left<0&&(t.style.left="0px"),e.top<0&&(t.style.top="0px")}},r([a.inject(c.TYPES.ViewerOptions),i("design:type",Object)],t.prototype,"options",void 0),t=r([a.injectable()],t)}();e.PopupPositionUpdater=s},1547:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(3263),a=n(4588),c=new o.ContainerModule((function(t,e,n){t(r.TYPES.MouseListener).to(i.MoveMouseListener),a.configureCommand({bind:t,isBound:n},i.MoveCommand),t(i.LocationPostprocessor).toSelf().inSingletonScope(),t(r.TYPES.IVNodePostprocessor).toService(i.LocationPostprocessor),t(r.TYPES.HiddenVNodePostprocessor).toService(i.LocationPostprocessor)}));e.default=c},1235:(t,e)=>{"use strict";function n(t){return void 0!==t.position}Object.defineProperty(e,"__esModule",{value:!0}),e.moveFeature=Symbol("moveFeature"),e.isLocateable=n,e.isMoveable=function(t){return t.hasFeature(e.moveFeature)&&n(t)}},3263:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)},c=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},s=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var d=n(9245),l=n(4633),p=n(4051),f=n(3682),y=n(8127),h=n(3834),g=n(5504),_=n(1469),m=n(6660),v=n(6175),b=n(3199),S=n(1229),P=n(1793),w=n(1984),O=n(181),E=n(7812),R=n(1072),T=n(7946),I=n(4698),A=n(7040),x=n(3803),C=n(1945),M=n(1235),j=function(){function t(e,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1),this.moves=e,this.animate=n,this.finished=o,this.kind=t.KIND}return t.KIND="move",t}();e.MoveAction=j;var D=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.resolvedMoves=new Map,n.edgeMementi=[],n}var n;return i(e,t),n=e,e.prototype.execute=function(t){var e=this,n=t.root.index,o=new Map,r=new Map;return this.action.moves.forEach((function(t){var i=n.getById(t.elementId);if(i instanceof R.SRoutingHandle&&e.edgeRouterRegistry){var a=i.parent;if(a instanceof R.SRoutableElement){var c=e.resolveHandleMove(i,a,t);if(c){var s=o.get(a);s||(s=[],o.set(a,s)),s.push(c)}}}else if(i&&M.isLocateable(i)){var u=e.resolveElementMove(i,t);u&&(e.resolvedMoves.set(u.element.id,u),e.edgeRouterRegistry&&n.getAttachedElements(i).forEach((function(t){if(t instanceof R.SRoutableElement){var e=r.get(t),n=b.subtract(u.toPosition,u.fromPosition),o=e?b.linear(e,n,.5):n;r.set(t,o)}})))}})),this.doMove(o,r),this.action.animate?(this.undoMove(),new l.CompoundAnimation(t.root,t,[new N(t.root,this.resolvedMoves,t,!1),new L(t.root,this.edgeMementi,t,!1)]).start()):t.root},e.prototype.resolveHandleMove=function(t,e,n){var o=n.fromPosition;if(!o){var r=this.edgeRouterRegistry.get(e.routerKind);o=r.getHandlePosition(e,r.route(e),t)}if(o)return{handle:t,fromPosition:o,toPosition:n.toPosition}},e.prototype.resolveElementMove=function(t,e){return{element:t,fromPosition:e.fromPosition||{x:t.position.x,y:t.position.y},toPosition:e.toPosition}},e.prototype.doMove=function(t,e){var n=this;this.resolvedMoves.forEach((function(t){t.element.position=t.toPosition})),t.forEach((function(t,e){var o=n.edgeRouterRegistry.get(e.routerKind),r=o.takeSnapshot(e);o.applyHandleMoves(e,t);var i=o.takeSnapshot(e);n.edgeMementi.push({edge:e,before:r,after:i})})),e.forEach((function(e,o){if(!t.get(o)){var r=n.edgeRouterRegistry.get(o.routerKind),i=r.takeSnapshot(o);if(o.source&&o.target&&n.resolvedMoves.get(o.source.id)&&n.resolvedMoves.get(o.target.id))o.routingPoints=o.routingPoints.map((function(t){return b.add(t,e)}));else{var a=A.isSelectable(o)&&o.selected;r.cleanupRoutingPoints(o,o.routingPoints,a,n.action.finished)}var c=r.takeSnapshot(o);n.edgeMementi.push({edge:o,before:i,after:c})}}))},e.prototype.undoMove=function(){var t=this;this.resolvedMoves.forEach((function(t){t.element.position=t.fromPosition})),this.edgeMementi.forEach((function(e){t.edgeRouterRegistry.get(e.edge.routerKind).applySnapshot(e.edge,e.before)}))},e.prototype.undo=function(t){return new l.CompoundAnimation(t.root,t,[new N(t.root,this.resolvedMoves,t,!0),new L(t.root,this.edgeMementi,t,!0)]).start()},e.prototype.redo=function(t){return new l.CompoundAnimation(t.root,t,[new N(t.root,this.resolvedMoves,t,!1),new L(t.root,this.edgeMementi,t,!1)]).start()},e.prototype.merge=function(t,e){var o=this;if(!this.action.animate&&t instanceof n)return t.resolvedMoves.forEach((function(t,e){var n=o.resolvedMoves.get(e);n?n.toPosition=t.toPosition:o.resolvedMoves.set(e,t)})),t.edgeMementi.forEach((function(t){var e=o.edgeMementi.find((function(e){return e.edge.id===t.edge.id}));e?e.after=t.after:o.edgeMementi.push(t)})),!0;if(t instanceof E.ReconnectCommand){var r=t.memento;if(r){var i=this.edgeMementi.find((function(t){return t.edge.id===r.edge.id}));i?i.after=r.after:this.edgeMementi.push(r)}return!0}return!1},e.KIND=j.KIND,c([d.inject(T.EdgeRouterRegistry),d.optional(),s("design:type",T.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=n=c([d.injectable(),u(0,d.inject(h.TYPES.Action)),s("design:paramtypes",[j])],e)}(p.MergeableCommand);e.MoveCommand=D;var N=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.elementMoves=n,i.reverse=r,i}return i(e,t),e.prototype.tween=function(t){var e=this;return this.elementMoves.forEach((function(n){e.reverse?n.element.position={x:(1-t)*n.toPosition.x+t*n.fromPosition.x,y:(1-t)*n.toPosition.y+t*n.fromPosition.y}:n.element.position={x:(1-t)*n.fromPosition.x+t*n.toPosition.x,y:(1-t)*n.fromPosition.y+t*n.toPosition.y}})),this.model},e}(l.Animation);e.MoveAnimation=N;var L=function(t){function e(e,n,o,r){void 0===r&&(r=!1);var i=t.call(this,o)||this;return i.model=e,i.reverse=r,i.expanded=[],n.forEach((function(t){var e=i.reverse?t.after:t.before,n=i.reverse?t.before:t.after,o=e.routedPoints,r=n.routedPoints,a=Math.max(o.length,r.length);i.expanded.push({startExpandedRoute:i.growToSize(o,a),endExpandedRoute:i.growToSize(r,a),memento:t})})),i}return i(e,t),e.prototype.midPoint=function(t){var e=t.edge,n=t.edge.source,o=t.edge.target;return b.linear(y.translatePoint(b.center(n.bounds),n.parent,e.parent),y.translatePoint(b.center(o.bounds),o.parent,e.parent),.5)},e.prototype.start=function(){return this.expanded.forEach((function(t){t.memento.edge.removeAll((function(t){return t instanceof R.SRoutingHandle}))})),t.prototype.start.call(this)},e.prototype.tween=function(t){var e=this;return 1===t?this.expanded.forEach((function(t){var n=t.memento;e.reverse?n.before.router.applySnapshot(n.edge,n.before):n.after.router.applySnapshot(n.edge,n.after)})):this.expanded.forEach((function(e){for(var n=[],o=1;o<e.startExpandedRoute.length-1;++o)n.push(b.linear(e.startExpandedRoute[o],e.endExpandedRoute[o],t));var r=t<.5?e.memento.before:e.memento.after,i=a(a({},r),{routingPoints:n,routingHandles:[]});r.router.applySnapshot(e.memento.edge,i)})),this.model},e.prototype.growToSize=function(t,e){var n=e-t.length;if(n<=0)return t;var o=[];o.push(t[0]);for(var r=1/(n+1),i=1/(t.length-1),a=1,c=1;c<t.length;++c){for(var s=i*c,u=0;s>(a+u)*r;)++u;a+=u;for(var d=0;d<u;++d){var l=b.linear(t[c-1],t[c],(d+1)/(u+1));o.push(l)}o.push(t[c])}return o},e}(l.Animation);e.MorphEdgesAnimation=L;var B=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasDragged=!1,e.elementId2startPos=new Map,e}return i(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){var o=y.findParentByFeature(t,M.isMoveable),r=t instanceof R.SRoutingHandle;void 0!==o||r||P.isCreatingOnDrag(t)?this.startDragPosition={x:e.pageX,y:e.pageY}:this.startDragPosition=void 0,this.hasDragged=!1,P.isCreatingOnDrag(t)?(n.push(new x.SelectAllAction(!1)),n.push(t.createAction(R.edgeInProgressID)),n.push(new x.SelectAction([R.edgeInProgressID],[])),n.push(new O.SwitchEditModeAction([R.edgeInProgressID],[])),n.push(new x.SelectAction([R.edgeInProgressTargetHandleID],[])),n.push(new O.SwitchEditModeAction([R.edgeInProgressTargetHandleID],[]))):r&&n.push(new O.SwitchEditModeAction([t.id],[]))}return n},e.prototype.mouseMove=function(t,e){var n=[];if(0===e.buttons)this.mouseUp(t,e);else if(this.startDragPosition){0===this.elementId2startPos.size&&this.collectStartPositions(t.root),this.hasDragged=!0;var o=this.getElementMoves(t,e,!1);o&&n.push(o)}return n},e.prototype.collectStartPositions=function(t){var e=this,n=new Set(t.index.all().filter((function(t){return A.isSelectable(t)&&t.selected})));n.forEach((function(t){if(!e.isChildOfSelected(n,t))if(M.isMoveable(t))e.elementId2startPos.set(t.id,t.position);else if(t instanceof R.SRoutingHandle){var o=e.getHandlePosition(t);o&&e.elementId2startPos.set(t.id,o)}}))},e.prototype.isChildOfSelected=function(t,e){for(;e instanceof f.SChildElement;)if(e=e.parent,M.isMoveable(e)&&t.has(e))return!0;return!1},e.prototype.getElementMoves=function(t,e,n){var o=this;if(this.startDragPosition){var r=[],i=y.findParentByFeature(t,C.isViewport),a=i?i.zoom:1,c=(e.pageX-this.startDragPosition.x)/a,s=(e.pageY-this.startDragPosition.y)/a;return this.elementId2startPos.forEach((function(n,i){var a=t.root.index.getById(i);if(a){var u=o.snap({x:n.x+c,y:n.y+s},a,!e.shiftKey);if(M.isMoveable(a))r.push({elementId:a.id,fromPosition:{x:a.position.x,y:a.position.y},toPosition:u});else if(a instanceof R.SRoutingHandle){var d=o.getHandlePosition(a);void 0!==d&&r.push({elementId:a.id,fromPosition:d,toPosition:u})}}})),r.length>0?new j(r,!1,n):void 0}},e.prototype.snap=function(t,e,n){return n&&this.snapper?this.snapper.snap(t,e):t},e.prototype.getHandlePosition=function(t){if(this.edgeRouterRegistry){var e=t.parent;if(!(e instanceof R.SRoutableElement))return;var n=this.edgeRouterRegistry.get(e.routerKind),o=n.route(e);return n.getHandlePosition(e,o,t)}},e.prototype.mouseEnter=function(t,e){return t instanceof f.SModelRoot&&0===e.buttons&&!this.startDragPosition&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){var n=this,o=[],r=!1;if(this.startDragPosition){var i=this.getElementMoves(t,e,!0);i&&o.push(i),t.root.index.all().forEach((function(e){if(e instanceof R.SRoutingHandle){var i=e.parent;if(i instanceof R.SRoutableElement&&e.danglingAnchor){var a=n.getHandlePosition(e);if(a){var c=y.translatePoint(a,e.parent,e.root),s=S.findChildrenAtPosition(t.root,c).find((function(t){return R.isConnectable(t)&&t.canConnect(i,e.kind)}));s&&n.hasDragged&&(o.push(new E.ReconnectAction(e.parent.id,"source"===e.kind?s.id:i.sourceId,"target"===e.kind?s.id:i.targetId)),r=!0)}}e.editMode&&o.push(new O.SwitchEditModeAction([],[e.id]))}}))}if(!r){var a=t.root.index.getById(R.edgeInProgressID);if(a instanceof f.SChildElement){var c=[];c.push(R.edgeInProgressID),a.children.forEach((function(t){t instanceof R.SRoutingHandle&&t.danglingAnchor&&c.push(t.danglingAnchor.id)})),o.push(new w.DeleteElementAction(c))}}return this.hasDragged&&o.push(new v.CommitModelAction),this.hasDragged=!1,this.startDragPosition=void 0,this.elementId2startPos.clear(),o},e.prototype.decorate=function(t,e){return t},c([d.inject(T.EdgeRouterRegistry),d.optional(),s("design:type",T.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),c([d.inject(h.TYPES.ISnapper),d.optional(),s("design:type",Object)],e.prototype,"snapper",void 0),e}(g.MouseListener);e.MoveMouseListener=B;var F=function(){function t(){}return t.prototype.decorate=function(t,e){if(I.isEdgeLayoutable(e)&&e.parent instanceof m.SEdge)return t;var n="";if(M.isLocateable(e)&&e instanceof f.SChildElement&&void 0!==e.parent){var o=e.position;0===o.x&&0===o.y||(n="translate("+o.x+", "+o.y+")")}if(S.isAlignable(e)){var r=e.alignment;0===r.x&&0===r.y||(n.length>0&&(n+=" "),n+="translate("+r.x+", "+r.y+")")}return n.length>0&&_.setAttr(t,"transform",n),t},t.prototype.postUpdate=function(){},t=c([d.injectable()],t)}();e.LocationPostprocessor=F},2099:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9245),a=n(1229),c=function(){function t(){}return Object.defineProperty(t.prototype,"gridX",{get:function(){return 10},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gridY",{get:function(){return 10},enumerable:!0,configurable:!0}),t.prototype.snap=function(t,e){return e&&a.isBoundsAware(e)?{x:Math.round((t.x+.5*e.bounds.width)/this.gridX)*this.gridX-.5*e.bounds.width,y:Math.round((t.y+.5*e.bounds.height)/this.gridY)*this.gridY-.5*e.bounds.height}:{x:Math.round(t.x/this.gridX)*this.gridX,y:Math.round(t.y/this.gridY)*this.gridY}},t=r([i.injectable()],t)}();e.CenterGridSnapper=c},7749:(t,e)=>{"use strict";function n(t){return t.hasFeature(e.nameFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.nameFeature=Symbol("nameableFeature"),e.isNameable=n,e.name=function(t){return n(t)?t.name:void 0}},1380:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(3292),a=new o.ContainerModule((function(t){t(r.TYPES.MouseListener).to(i.OpenMouseListener)}));e.default=a},7310:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.openFeature=Symbol("openFeature"),e.isOpenable=function(t){return t.hasFeature(e.openFeature)}},3292:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(5504),a=n(8127),c=n(7310),s=function(){function t(e){this.elementId=e,this.kind=t.KIND}return t.KIND="open",t}();e.OpenAction=s;var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.doubleClick=function(t,e){var n=a.findParentByFeature(t,c.isOpenable);return void 0!==n?[new s(n.id)]:[]},e}(i.MouseListener);e.OpenMouseListener=u},1039:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3682),r=n(3199),i=n(2703),a=n(1229);function c(t){return i.hasOwnProperty(t,"projectionCssClasses")}function s(t){for(var e=t.bounds,n=t.parent;n instanceof o.SChildElement;)e=n.localToParent(e),n=n.parent;return e}e.isProjectable=c,e.getProjections=function t(e){for(var n,o=0,r=e.children;o<r.length;o++){var i=r[o];if(c(i)&&a.isBoundsAware(i)&&i.projectionCssClasses.length>0){var u={elementId:i.id,projectedBounds:s(i),cssClasses:i.projectionCssClasses};n?n.push(u):n=[u]}if(i.children.length>0){var d=t(i);d&&(n?n.push.apply(n,d):n=d)}}return n},e.getProjectedBounds=s;var u=1e9;e.getModelBounds=function(t){var e=u,n=u,o=-u,i=-u,c=a.isBoundsAware(t)?t.bounds:void 0;if(c&&r.isValidDimension(c))e=c.x,n=c.y,o=e+c.width,i=n+c.height;else for(var s=0,d=t.children;s<d.length;s++){var l=d[s];if(a.isBoundsAware(l)){var p=l.bounds;e=Math.min(e,p.x),n=Math.min(n,p.y),o=Math.max(o,p.x+p.width),i=Math.max(i,p.y+p.height)}}if(e=Math.min(e,t.scroll.x),n=Math.min(n,t.scroll.y),o=Math.max(o,t.scroll.x+t.canvasBounds.width/t.zoom),i=Math.max(i,t.scroll.y+t.canvasBounds.height/t.zoom),e<o&&n<i)return{x:e,y:n,width:o-e,height:i-n}}},7635:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5181),a=n(9245),c=n(4047),s=n(1469),u=n(1039),d=function(){function t(){}return t.prototype.render=function(t,e,n){return i.html("div",{"class-sprotty-root":!0},this.renderSvg(t,e,n),this.renderProjections(t,e,n))},t.prototype.renderSvg=function(t,e,n){var o="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")",r="http://www.w3.org/2000/svg";return c.h("svg",{ns:r},c.h("g",{ns:r,attrs:{transform:o}},e.renderChildren(t)))},t.prototype.renderProjections=function(t,e,n){var o;if(t.zoom<=0)return[];var r=u.getModelBounds(t);if(!r)return[];var i=null!==(o=u.getProjections(t))&&void 0!==o?o:[];return[this.renderProjectionBar(i,t,r,"vertical"),this.renderProjectionBar(i,t,r,"horizontal")]},t.prototype.renderProjectionBar=function(t,e,n,o){var r=this,a={modelBounds:n,orientation:o};return a.factor="horizontal"===o?e.canvasBounds.width/n.width:e.canvasBounds.height/n.height,a.zoomedFactor=a.factor/e.zoom,i.html("div",{"class-sprotty-projection-bar":!0,"class-horizontal":"horizontal"===o,"class-vertical":"vertical"===o},this.renderViewport(e,a),t.map((function(t){return r.renderProjection(t,e,a)})))},t.prototype.renderViewport=function(t,e){var n,o;"horizontal"===e.orientation?(n=t.canvasBounds.width,o=(t.scroll.x-e.modelBounds.x)*e.factor):(n=t.canvasBounds.height,o=(t.scroll.y-e.modelBounds.y)*e.factor);var r=n*e.zoomedFactor;o<0?(r+=o,o=0):o>n&&(o=n),r<0?r=0:o+r>n&&(r=n-o);var a="horizontal"===e.orientation?{left:o+"px",width:r+"px"}:{top:o+"px",height:r+"px"};return i.html("div",{"class-sprotty-viewport":!0,style:a})},t.prototype.renderProjection=function(t,e,n){var o,r,a;"horizontal"===n.orientation?(o=e.canvasBounds.width,r=(t.projectedBounds.x-n.modelBounds.x)*n.factor,a=t.projectedBounds.width*n.factor):(o=e.canvasBounds.height,r=(t.projectedBounds.y-n.modelBounds.y)*n.factor,a=t.projectedBounds.height*n.factor),r<0?(a+=r,r=0):r>o&&(r=o),a<0?a=0:r+a>o&&(a=o-r);var c="horizontal"===n.orientation?{left:r+"px",width:a+"px"}:{top:r+"px",height:a+"px"},u=i.html("div",{id:n.orientation+"-projection:"+t.elementId,"class-sprotty-projection":!0,style:c});return t.cssClasses.forEach((function(t){return s.setClass(u,t,!0)})),u},t=r([a.injectable()],t)}();e.ProjectedViewportView=d},9807:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(3834),l=n(1384);e.DIAMOND_ANCHOR_KIND="diamond",e.ELLIPTIC_ANCHOR_KIND="elliptic",e.RECTANGULAR_ANCHOR_KIND="rectangular";var p=function(t){function n(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.kind,t)})),n}return i(n,t),Object.defineProperty(n.prototype,"defaultAnchorKind",{get:function(){return e.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),n.prototype.get=function(e,n){return t.prototype.get.call(this,e+":"+(n||this.defaultAnchorKind))},n=a([u.injectable(),s(0,u.multiInject(d.TYPES.IAnchorComputer)),c("design:paramtypes",[Array])],n)}(l.InstanceRegistry);e.AnchorComputerRegistry=p},970:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(2379),a=n(3705),c=n(5955),s=n(4238),u=n(9807),d=n(7946),l=new o.ContainerModule((function(t){t(d.EdgeRouterRegistry).toSelf().inSingletonScope(),t(u.AnchorComputerRegistry).toSelf().inSingletonScope(),t(i.ManhattanEdgeRouter).toSelf().inSingletonScope(),t(r.TYPES.IEdgeRouter).toService(i.ManhattanEdgeRouter),t(r.TYPES.IAnchorComputer).to(c.ManhattanEllipticAnchor).inSingletonScope(),t(r.TYPES.IAnchorComputer).to(c.ManhattanRectangularAnchor).inSingletonScope(),t(r.TYPES.IAnchorComputer).to(c.ManhattanDiamondAnchor).inSingletonScope(),t(a.PolylineEdgeRouter).toSelf().inSingletonScope(),t(r.TYPES.IEdgeRouter).toService(a.PolylineEdgeRouter),t(r.TYPES.IAnchorComputer).to(s.EllipseAnchor),t(r.TYPES.IAnchorComputer).to(s.RectangleAnchor),t(r.TYPES.IAnchorComputer).to(s.DiamondAnchor)}));e.default=l},1915:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var c,s=n(9245),u=n(8127),d=n(3199),l=n(1072),p=n(9807),f=n(1072);!function(t){t[t.RIGHT=0]="RIGHT",t[t.LEFT=1]="LEFT",t[t.TOP=2]="TOP",t[t.BOTTOM=3]="BOTTOM"}(c=e.Side||(e.Side={}));var y=function(){function t(t,e,n){this.element=t,this.kind=n;var o=t.bounds;this.bounds=u.translateBounds(o,t.parent,e),this.left={x:this.bounds.x,y:this.bounds.y+.5*this.bounds.height,kind:n},this.right={x:this.bounds.x+this.bounds.width,y:this.bounds.y+.5*this.bounds.height,kind:n},this.top={x:this.bounds.x+.5*this.bounds.width,y:this.bounds.y,kind:n},this.bottom={x:this.bounds.x+.5*this.bounds.width,y:this.bounds.y+this.bounds.height,kind:n}}return t.prototype.get=function(t){return this[c[t].toLowerCase()]},t.prototype.getNearestSide=function(t){var e=d.euclideanDistance(t,this.left),n=d.euclideanDistance(t,this.right),o=d.euclideanDistance(t,this.top),r=d.euclideanDistance(t,this.bottom),i=c.LEFT,a=e;return n<a&&(a=n,i=c.RIGHT),o<a&&(a=o,i=c.TOP),r<a&&(a=r,i=c.BOTTOM),i},t}();e.DefaultAnchors=y;var h=function(){function t(){}return t.prototype.pointAt=function(t,e){var n=this.calculateSegment(t,e);if(n){var o=n.segmentStart,r=n.segmentEnd,i=n.lambda;return d.linear(o,r,i)}},t.prototype.derivativeAt=function(t,e){var n=this.calculateSegment(t,e);if(n){var o=n.segmentStart,r=n.segmentEnd;return{x:r.x-o.x,y:r.y-o.y}}},t.prototype.calculateSegment=function(t,e){if(!(e<0||e>1)){var n=this.route(t);if(!(n.length<2)){for(var o=[],r=0,i=0;i<n.length-1;++i)o[i]=d.euclideanDistance(n[i],n[i+1]),r+=o[i];var a=0,c=e*r;for(i=0;i<n.length-1;++i){var s=a+o[i];if(o[i]>1e-8&&s>=c){var u=Math.max(0,c-a)/o[i];return{segmentStart:n[i],segmentEnd:n[i+1],lambda:u}}a=s}return{segmentEnd:n.pop(),segmentStart:n.pop(),lambda:1}}}},t.prototype.addHandle=function(t,e,n,o){var r=new l.SRoutingHandle;return r.kind=e,r.pointIndex=o,r.type=n,"target"===e&&t.id===l.edgeInProgressID&&(r.id=l.edgeInProgressTargetHandleID),t.add(r),r},t.prototype.getHandlePosition=function(t,e,n){switch(n.kind){case"source":return t.source instanceof l.SDanglingAnchor?t.source.position:e[0];case"target":return t.target instanceof l.SDanglingAnchor?t.target.position:e[e.length-1];default:var o=this.getInnerHandlePosition(t,e,n);if(void 0!==o)return o;if(n.pointIndex>=0&&n.pointIndex<t.routingPoints.length)return t.routingPoints[n.pointIndex]}},t.prototype.findRouteSegment=function(t,e,n){for(var o,r,i=function(e){return void 0!==e.pointIndex?e.pointIndex:"target"===e.kind?t.routingPoints.length:-2},a=0,c=e;a<c.length;a++){var s=c[a],u=i(s);u<=n&&(void 0===o||u>i(o))&&(o=s),u>n&&(void 0===r||u<i(r))&&(r=s)}return{start:o,end:r}},t.prototype.getTranslatedAnchor=function(t,e,n,o,r){void 0===r&&(r=0);var i=u.translatePoint(e,n,t.parent),a=this.getAnchorComputer(t),c=.5*t.strokeWidth,s=a.getAnchor(t,i,r+c);return u.translatePoint(s,t.parent,o.parent)},t.prototype.getAnchorComputer=function(t){return this.anchorRegistry.get(this.kind,t.anchorKind)},t.prototype.applyHandleMoves=function(t,e){var n=e.slice();e.forEach((function(e){var o=e.handle;if("source"!==o.kind||t.source instanceof l.SDanglingAnchor){if("target"===o.kind&&!(t.target instanceof l.SDanglingAnchor)){var r;(r=new l.SDanglingAnchor).id=t.id+"_dangling-target",r.original=t.target,r.position=e.toPosition,o.root.add(r),o.danglingAnchor=r,t.targetId=r.id}}else(r=new l.SDanglingAnchor).id=t.id+"_dangling-source",r.original=t.source,r.position=e.toPosition,o.root.add(r),o.danglingAnchor=r,t.sourceId=r.id;o.danglingAnchor&&(o.danglingAnchor.position=e.toPosition,n.splice(n.indexOf(e),1))})),n.length>0&&this.applyInnerHandleMoves(t,n),this.cleanupRoutingPoints(t,t.routingPoints,!0,!0)},t.prototype.cleanupRoutingPoints=function(t,e,n,o){var r=new y(t.source,t.parent,"source"),i=new y(t.target,t.parent,"target");this.resetRoutingPointsOnReconnect(t,e,n,r,i)},t.prototype.resetRoutingPointsOnReconnect=function(t,e,n,o,r){if(0===e.length||t.source instanceof l.SDanglingAnchor||t.target instanceof l.SDanglingAnchor){var i=this.getOptions(t),c=this.calculateDefaultCorners(t,o,r,i);if(e.splice.apply(e,a([0,e.length],c)),n){var s=-2;t.children.forEach((function(n){n instanceof l.SRoutingHandle&&("target"===n.kind?n.pointIndex=e.length:"line"===n.kind&&n.pointIndex>=e.length?t.remove(n):s=Math.max(n.pointIndex,s))}));for(var u=s;u<e.length-1;++u)this.addHandle(t,"manhattan-50%","volatile-routing-point",u)}return!0}return!1},t.prototype.applyReconnect=function(t,e,n){var o=!1;if(e){var r=t.root.index.getById(e);r instanceof f.SConnectableElement&&(t.sourceId=r.id,o=!0)}if(n){var i=t.root.index.getById(n);i instanceof f.SConnectableElement&&(t.targetId=i.id,o=!0)}o&&(t.index.remove(t),t.index.add(t),this.getSelfEdgeIndex(t)>-1&&(t.routingPoints=[],this.cleanupRoutingPoints(t,t.routingPoints,!0,!0)))},t.prototype.takeSnapshot=function(t){return{routingPoints:t.routingPoints.slice(),routingHandles:t.children.filter((function(t){return t instanceof l.SRoutingHandle})).map((function(t){return t})),routedPoints:this.route(t),router:this,source:t.source,target:t.target}},t.prototype.applySnapshot=function(t,e){t.routingPoints=e.routingPoints,t.removeAll((function(t){return t instanceof l.SRoutingHandle})),t.routerKind=e.router.kind,e.routingHandles.forEach((function(e){return t.add(e)})),e.source&&(t.sourceId=e.source.id),e.target&&(t.targetId=e.target.id),t.root.index.remove(t),t.root.index.add(t)},t.prototype.calculateDefaultCorners=function(t,e,n,o){var r=this.getSelfEdgeIndex(t);if(r>=0){var i=o.standardDistance,a=o.selfEdgeOffset*Math.min(e.bounds.width,e.bounds.height);switch(r%4){case 0:return[{x:e.get(c.RIGHT).x+i,y:e.get(c.RIGHT).y+a},{x:e.get(c.RIGHT).x+i,y:e.get(c.BOTTOM).y+i},{x:e.get(c.BOTTOM).x+a,y:e.get(c.BOTTOM).y+i}];case 1:return[{x:e.get(c.BOTTOM).x-a,y:e.get(c.BOTTOM).y+i},{x:e.get(c.LEFT).x-i,y:e.get(c.BOTTOM).y+i},{x:e.get(c.LEFT).x-i,y:e.get(c.LEFT).y+a}];case 2:return[{x:e.get(c.LEFT).x-i,y:e.get(c.LEFT).y-a},{x:e.get(c.LEFT).x-i,y:e.get(c.TOP).y-i},{x:e.get(c.TOP).x-a,y:e.get(c.TOP).y-i}];case 3:return[{x:e.get(c.TOP).x+a,y:e.get(c.TOP).y-i},{x:e.get(c.RIGHT).x+i,y:e.get(c.TOP).y-i},{x:e.get(c.RIGHT).x+i,y:e.get(c.RIGHT).y-a}]}}return[]},t.prototype.getSelfEdgeIndex=function(t){return t.source&&t.source===t.target?t.source.outgoingEdges.filter((function(e){return e.target===t.source})).indexOf(t):-1},r([s.inject(p.AnchorComputerRegistry),i("design:type",p.AnchorComputerRegistry)],t.prototype,"anchorRegistry",void 0),t=r([s.injectable()],t)}();e.LinearEdgeRouter=h},5955:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(3199),a=n(9807),c=n(2379),s=n(9245),u=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){var o=t.bounds;if(o.width<=0||o.height<=0)return o;var r={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n};return e.x>=r.x&&r.x+r.width>=e.x?e.y<r.y+.5*r.height?{x:e.x,y:r.y}:{x:e.x,y:r.y+r.height}:e.y>=r.y&&r.y+r.height>=e.y?e.x<r.x+.5*r.width?{x:r.x,y:e.y}:{x:r.x+r.width,y:e.y}:i.center(r)},t.KIND=c.ManhattanEdgeRouter.KIND+":"+a.RECTANGULAR_ANCHOR_KIND,t=e=r([s.injectable()],t)}();e.ManhattanRectangularAnchor=u;var d=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds;if(o.width<=0||o.height<=0)return o;var r={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n},a=i.center(r),c=void 0,s=void 0;return e.x>=r.x&&e.x<=r.x+r.width?r.x+.5*r.width>=e.x?(s=new i.PointToPointLine(e,{x:e.x,y:a.y}),c=e.y<a.y?new i.PointToPointLine({x:r.x,y:a.y},{x:a.x,y:r.y}):new i.PointToPointLine({x:r.x,y:a.y},{x:a.x,y:r.y+r.height})):(s=new i.PointToPointLine(e,{x:e.x,y:a.y}),c=e.y<a.y?new i.PointToPointLine({x:r.x+r.width,y:a.y},{x:a.x,y:r.y}):new i.PointToPointLine({x:r.x+r.width,y:a.y},{x:a.x,y:r.y+r.height})):e.y>=r.y&&e.y<=r.y+r.height&&(r.y+.5*r.height>=e.y?(s=new i.PointToPointLine(e,{x:a.x,y:e.y}),c=e.x<a.x?new i.PointToPointLine({x:r.x,y:a.y},{x:a.x,y:r.y}):new i.PointToPointLine({x:r.x+r.width,y:a.y},{x:a.x,y:r.y})):(s=new i.PointToPointLine(e,{x:a.x,y:e.y}),c=e.x<a.x?new i.PointToPointLine({x:r.x,y:a.y},{x:a.x,y:r.y+r.height}):new i.PointToPointLine({x:r.x+r.width,y:a.y},{x:a.x,y:r.y+r.height}))),s&&c?i.intersection(c,s):a},t.KIND=c.ManhattanEdgeRouter.KIND+":"+a.DIAMOND_ANCHOR_KIND,t=e=r([s.injectable()],t)}();e.ManhattanDiamondAnchor=d;var l=function(){function t(){}var e;return e=t,Object.defineProperty(t.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds;if(o.width<=0||o.height<=0)return o;var r={x:o.x-n,y:o.y-n,width:o.width+2*n,height:o.height+2*n},a=i.center(r),c=i.subtract(e,a),s=a.x,u=a.y;if(e.x>=r.x&&r.x+r.width>=e.x){s+=c.x;var d=.5*r.height*Math.sqrt(1-c.x*c.x/(.25*r.width*r.width));c.y<0?u-=d:u+=d}else if(e.y>=r.y&&r.y+r.height>=e.y){u+=c.y;var l=.5*r.width*Math.sqrt(1-c.y*c.y/(.25*r.height*r.height));c.x<0?s-=l:s+=l}return{x:s,y:u}},t.KIND=c.ManhattanEdgeRouter.KIND+":"+a.ELLIPTIC_ANCHOR_KIND,t=e=r([s.injectable()],t)}();e.ManhattanEllipticAnchor=l},2379:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(8127),c=n(3199),s=n(1915),u=n(1072),d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"kind",{get:function(){return e.KIND},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(t){return{standardDistance:20,minimalPointDistance:3,selfEdgeOffset:.25}},e.prototype.route=function(t){if(!t.source||!t.target)return[];var e=this.createRoutedCorners(t),n=e[0]||a.translatePoint(c.center(t.target.bounds),t.target.parent,t.parent),o=this.getTranslatedAnchor(t.source,n,t.parent,t,t.sourceAnchorCorrection),r=e[e.length-1]||a.translatePoint(c.center(t.source.bounds),t.source.parent,t.parent),s=this.getTranslatedAnchor(t.target,r,t.parent,t,t.targetAnchorCorrection);if(!o||!s)return[];var u=[];return u.push(i({kind:"source"},o)),e.forEach((function(t){return u.push(t)})),u.push(i({kind:"target"},s)),u},e.prototype.createRoutedCorners=function(t){var e=new s.DefaultAnchors(t.source,t.parent,"source"),n=new s.DefaultAnchors(t.target,t.parent,"target");if(t.routingPoints.length>0){var o=t.routingPoints.slice();if(this.cleanupRoutingPoints(t,o,!1,!0),o.length>0)return o.map((function(t,e){return i({kind:"linear",pointIndex:e},t)}))}var r=this.getOptions(t);return this.calculateDefaultCorners(t,e,n,r).map((function(t){return i({kind:"linear"},t)}))},e.prototype.createRoutingHandles=function(t){var e=this.route(t);if(this.commitRoute(t,e),e.length>0){this.addHandle(t,"source","routing-point",-2);for(var n=0;n<e.length-1;++n)this.addHandle(t,"manhattan-50%","volatile-routing-point",n-1);this.addHandle(t,"target","routing-point",e.length-2)}},e.prototype.getInnerHandlePosition=function(t,e,n){var o=this.getFraction(n.kind);if(void 0!==o){var r=this.findRouteSegment(t,e,n.pointIndex),i=r.start,a=r.end;if(void 0!==i&&void 0!==a)return c.linear(i,a,o)}},e.prototype.getFraction=function(t){if("manhattan-50%"===t)return.5},e.prototype.commitRoute=function(t,e){for(var n=[],o=1;o<e.length-1;++o)n.push({x:e[o].x,y:e[o].y});t.routingPoints=n},e.prototype.applyInnerHandleMoves=function(t,e){var n=this,o=this.route(t),r=t.routingPoints,i=this.getOptions(t).minimalPointDistance;e.forEach((function(t){var e=t.handle,a=e.pointIndex,s=n.correctX(r,a,t.toPosition.x,i),u=n.correctY(r,a,t.toPosition.y,i);if("manhattan-50%"===e.kind)a<0?c.almostEquals(o[0].x,o[1].x)?n.alignX(r,0,s):n.alignY(r,0,u):a<r.length-1?c.almostEquals(r[a].x,r[a+1].x)?(n.alignX(r,a,s),n.alignX(r,a+1,s)):(n.alignY(r,a,u),n.alignY(r,a+1,u)):c.almostEquals(o[o.length-2].x,o[o.length-1].x)?n.alignX(r,r.length-1,s):n.alignY(r,r.length-1,u)}))},e.prototype.correctX=function(t,e,n,o){return e>0&&Math.abs(n-t[e-1].x)<o?t[e-1].x:e<t.length-2&&Math.abs(n-t[e+2].x)<o?t[e+2].x:n},e.prototype.alignX=function(t,e,n){e>=0&&e<t.length&&(t[e]={x:n,y:t[e].y})},e.prototype.correctY=function(t,e,n,o){return e>0&&Math.abs(n-t[e-1].y)<o?t[e-1].y:e<t.length-2&&Math.abs(n-t[e+2].y)<o?t[e+2].y:n},e.prototype.alignY=function(t,e,n){e>=0&&e<t.length&&(t[e]={x:t[e].x,y:n})},e.prototype.cleanupRoutingPoints=function(t,e,n,o){var r=new s.DefaultAnchors(t.source,t.parent,"source"),i=new s.DefaultAnchors(t.target,t.parent,"target");if(!this.resetRoutingPointsOnReconnect(t,e,n,r,i)){for(var a=0;a<e.length&&c.includes(r.bounds,e[a]);++a)e.splice(0,1),n&&this.removeHandle(t,-1);for(a=e.length-1;a>=0&&c.includes(i.bounds,e[a]);--a)e.splice(a,1),n&&this.removeHandle(t,a);if(e.length>=2){var u=this.getOptions(t);for(a=e.length-2;a>=0;--a)c.manhattanDistance(e[a],e[a+1])<u.minimalPointDistance&&(e.splice(a,2),--a,n&&(this.removeHandle(t,a-1),this.removeHandle(t,a)))}o&&(this.addAdditionalCorner(t,e,r,i,n),this.addAdditionalCorner(t,e,i,r,n),this.manhattanify(t,e))}},e.prototype.removeHandle=function(t,e){var n=[];t.children.forEach((function(t){t instanceof u.SRoutingHandle&&(t.pointIndex>e?--t.pointIndex:t.pointIndex===e&&n.push(t))})),n.forEach((function(e){return t.remove(e)}))},e.prototype.addAdditionalCorner=function(t,e,n,o,r){if(0!==e.length){var i,a="source"===n.kind?e[0]:e[e.length-1],d="source"===n.kind?0:e.length,l=d-("source"===n.kind?1:0);if(e.length>1)i=0===d?c.almostEquals(e[0].x,e[1].x):c.almostEquals(e[e.length-1].x,e[e.length-2].x);else{var p=o.getNearestSide(a);i=p===s.Side.TOP||p===s.Side.BOTTOM}if(i){if(a.y<n.get(s.Side.TOP).y||a.y>n.get(s.Side.BOTTOM).y){var f={x:n.get(s.Side.TOP).x,y:a.y};e.splice(d,0,f),r&&(t.children.forEach((function(t){t instanceof u.SRoutingHandle&&t.pointIndex>=l&&++t.pointIndex})),this.addHandle(t,"manhattan-50%","volatile-routing-point",l))}}else if(a.x<n.get(s.Side.LEFT).x||a.x>n.get(s.Side.RIGHT).x){f={x:a.x,y:n.get(s.Side.LEFT).y};e.splice(d,0,f),r&&(t.children.forEach((function(t){t instanceof u.SRoutingHandle&&t.pointIndex>=l&&++t.pointIndex})),this.addHandle(t,"manhattan-50%","volatile-routing-point",l))}}},e.prototype.manhattanify=function(t,e){for(var n=1;n<e.length;++n){var o=Math.abs(e[n-1].x-e[n].x)<1,r=Math.abs(e[n-1].y-e[n].y)<1;o||r||(e.splice(n,0,{x:e[n-1].x,y:e[n].y}),++n)}},e.prototype.calculateDefaultCorners=function(e,n,o,r){var i=t.prototype.calculateDefaultCorners.call(this,e,n,o,r);if(i.length>0)return i;var a=this.getBestConnectionAnchors(e,n,o,r),c=a.source,u=a.target,d=[],l=n.get(c),p=o.get(u);switch(c){case s.Side.RIGHT:switch(u){case s.Side.BOTTOM:case s.Side.TOP:d.push({x:p.x,y:l.y});break;case s.Side.RIGHT:d.push({x:Math.max(l.x,p.x)+1.5*r.standardDistance,y:l.y}),d.push({x:Math.max(l.x,p.x)+1.5*r.standardDistance,y:p.y});break;case s.Side.LEFT:p.y!==l.y&&(d.push({x:(l.x+p.x)/2,y:l.y}),d.push({x:(l.x+p.x)/2,y:p.y}))}break;case s.Side.LEFT:switch(u){case s.Side.BOTTOM:case s.Side.TOP:d.push({x:p.x,y:l.y});break;default:(p=o.get(s.Side.RIGHT)).y!==l.y&&(d.push({x:(l.x+p.x)/2,y:l.y}),d.push({x:(l.x+p.x)/2,y:p.y}))}break;case s.Side.TOP:switch(u){case s.Side.RIGHT:p.x-l.x>0?(d.push({x:l.x,y:l.y-r.standardDistance}),d.push({x:p.x+1.5*r.standardDistance,y:l.y-r.standardDistance}),d.push({x:p.x+1.5*r.standardDistance,y:p.y})):d.push({x:l.x,y:p.y});break;case s.Side.LEFT:p.x-l.x<0?(d.push({x:l.x,y:l.y-r.standardDistance}),d.push({x:p.x-1.5*r.standardDistance,y:l.y-r.standardDistance}),d.push({x:p.x-1.5*r.standardDistance,y:p.y})):d.push({x:l.x,y:p.y});break;case s.Side.TOP:d.push({x:l.x,y:Math.min(l.y,p.y)-1.5*r.standardDistance}),d.push({x:p.x,y:Math.min(l.y,p.y)-1.5*r.standardDistance});break;case s.Side.BOTTOM:p.x!==l.x&&(d.push({x:l.x,y:(l.y+p.y)/2}),d.push({x:p.x,y:(l.y+p.y)/2}))}break;case s.Side.BOTTOM:switch(u){case s.Side.RIGHT:p.x-l.x>0?(d.push({x:l.x,y:l.y+r.standardDistance}),d.push({x:p.x+1.5*r.standardDistance,y:l.y+r.standardDistance}),d.push({x:p.x+1.5*r.standardDistance,y:p.y})):d.push({x:l.x,y:p.y});break;case s.Side.LEFT:p.x-l.x<0?(d.push({x:l.x,y:l.y+r.standardDistance}),d.push({x:p.x-1.5*r.standardDistance,y:l.y+r.standardDistance}),d.push({x:p.x-1.5*r.standardDistance,y:p.y})):d.push({x:l.x,y:p.y});break;default:(p=o.get(s.Side.TOP)).x!==l.x&&(d.push({x:l.x,y:(l.y+p.y)/2}),d.push({x:p.x,y:(l.y+p.y)/2}))}}return d},e.prototype.getBestConnectionAnchors=function(t,e,n,o){var r=e.get(s.Side.RIGHT),i=n.get(s.Side.LEFT);if(i.x-r.x>o.standardDistance)return{source:s.Side.RIGHT,target:s.Side.LEFT};if(r=e.get(s.Side.LEFT),i=n.get(s.Side.RIGHT),r.x-i.x>o.standardDistance)return{source:s.Side.LEFT,target:s.Side.RIGHT};if(r=e.get(s.Side.TOP),i=n.get(s.Side.BOTTOM),r.y-i.y>o.standardDistance)return{source:s.Side.TOP,target:s.Side.BOTTOM};if(r=e.get(s.Side.BOTTOM),(i=n.get(s.Side.TOP)).y-r.y>o.standardDistance)return{source:s.Side.BOTTOM,target:s.Side.TOP};if(r=e.get(s.Side.RIGHT),(i=n.get(s.Side.TOP)).x-r.x>.5*o.standardDistance&&i.y-r.y>o.standardDistance)return{source:s.Side.RIGHT,target:s.Side.TOP};if((i=n.get(s.Side.BOTTOM)).x-r.x>.5*o.standardDistance&&r.y-i.y>o.standardDistance)return{source:s.Side.RIGHT,target:s.Side.BOTTOM};if(r=e.get(s.Side.LEFT),i=n.get(s.Side.BOTTOM),r.x-i.x>.5*o.standardDistance&&r.y-i.y>o.standardDistance)return{source:s.Side.LEFT,target:s.Side.BOTTOM};if(i=n.get(s.Side.TOP),r.x-i.x>.5*o.standardDistance&&i.y-r.y>o.standardDistance)return{source:s.Side.LEFT,target:s.Side.TOP};if(r=e.get(s.Side.TOP),i=n.get(s.Side.RIGHT),r.y-i.y>.5*o.standardDistance&&r.x-i.x>o.standardDistance)return{source:s.Side.TOP,target:s.Side.RIGHT};if(i=n.get(s.Side.LEFT),r.y-i.y>.5*o.standardDistance&&i.x-r.x>o.standardDistance)return{source:s.Side.TOP,target:s.Side.LEFT};if(r=e.get(s.Side.BOTTOM),(i=n.get(s.Side.RIGHT)).y-r.y>.5*o.standardDistance&&r.x-i.x>o.standardDistance)return{source:s.Side.BOTTOM,target:s.Side.RIGHT};if((i=n.get(s.Side.LEFT)).y-r.y>.5*o.standardDistance&&i.x-r.x>o.standardDistance)return{source:s.Side.BOTTOM,target:s.Side.LEFT};if(r=e.get(s.Side.TOP),i=n.get(s.Side.TOP),!c.includes(n.bounds,r)&&!c.includes(e.bounds,i))if(r.y-i.y<0){if(Math.abs(r.x-i.x)>(e.bounds.width+o.standardDistance)/2)return{source:s.Side.TOP,target:s.Side.TOP}}else if(Math.abs(r.x-i.x)>n.bounds.width/2)return{source:s.Side.TOP,target:s.Side.TOP};if(r=e.get(s.Side.RIGHT),i=n.get(s.Side.RIGHT),!c.includes(n.bounds,r)&&!c.includes(e.bounds,i))if(r.x-i.x>0){if(Math.abs(r.y-i.y)>(e.bounds.height+o.standardDistance)/2)return{source:s.Side.RIGHT,target:s.Side.RIGHT}}else if(Math.abs(r.y-i.y)>n.bounds.height/2)return{source:s.Side.RIGHT,target:s.Side.RIGHT};return r=e.get(s.Side.TOP),i=n.get(s.Side.RIGHT),c.includes(n.bounds,r)||c.includes(e.bounds,i)?(i=n.get(s.Side.LEFT),c.includes(n.bounds,r)||c.includes(e.bounds,i)?(r=e.get(s.Side.BOTTOM),i=n.get(s.Side.RIGHT),c.includes(n.bounds,r)||c.includes(e.bounds,i)?(i=n.get(s.Side.LEFT),c.includes(n.bounds,r)||c.includes(e.bounds,i)?{source:s.Side.RIGHT,target:s.Side.BOTTOM}:{source:s.Side.BOTTOM,target:s.Side.LEFT}):{source:s.Side.BOTTOM,target:s.Side.RIGHT}):{source:s.Side.TOP,target:s.Side.LEFT}):{source:s.Side.TOP,target:s.Side.RIGHT}},e.KIND="manhattan",e}(s.LinearEdgeRouter);e.ManhattanEdgeRouter=d},1072:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3682),a=n(3199),c=n(1229),s=n(1984),u=n(7040),d=n(5056),l=n(1235),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.routingPoints=[],e}return r(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this.index.getById(this.sourceId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){return this.index.getById(this.targetId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.routingPoints.reduce((function(t,e){return a.combine(t,{x:e.x,y:e.y,width:0,height:0})}),a.EMPTY_BOUNDS)},enumerable:!0,configurable:!0}),e}(i.SChildElement);function f(t){for(var e={x:NaN,y:NaN,width:0,height:0},n=0,o=t;n<o.length;n++){var r=o[n];isNaN(e.x)?(e.x=r.x,e.y=r.y):(r.x<e.x?(e.width+=e.x-r.x,e.x=r.x):r.x>e.x+e.width&&(e.width=r.x-e.x),r.y<e.y?(e.height+=e.y-r.y,e.y=r.y):r.y>e.y+e.height&&(e.height=r.y-e.y))}return e}e.SRoutableElement=p,e.connectableFeature=Symbol("connectableFeature"),e.isConnectable=function(t){return t.hasFeature(e.connectableFeature)&&t.canConnect},e.getAbsoluteRouteBounds=function(t,e){void 0===e&&(e=t.routingPoints);for(var n=f(e),o=t;o instanceof i.SChildElement;){var r=o.parent;n=r.localToParent(n),o=r}return n},e.getRouteBounds=f;var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.strokeWidth=0,e}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"incomingEdges",{get:function(){return this.index.getIncomingEdges(this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outgoingEdges",{get:function(){return this.index.getOutgoingEdges(this)},enumerable:!0,configurable:!0}),e.prototype.canConnect=function(t,e){return!0},e}(c.SShapeElement);e.SConnectableElement=y;var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editMode=!1,e.hoverFeedback=!1,e.selected=!1,e}return r(e,t),e.prototype.hasFeature=function(t){return-1!==e.DEFAULT_FEATURES.indexOf(t)},e.DEFAULT_FEATURES=[u.selectFeature,l.moveFeature,d.hoverFeedbackFeature],e}(i.SChildElement);e.SRoutingHandle=h;var g=function(t){function e(){var e=t.call(this)||this;return e.type="dangling-anchor",e.size={width:0,height:0},e}return r(e,t),e.DEFAULT_FEATURES=[s.deletableFeature],e}(y);e.SDanglingAnchor=g,e.edgeInProgressID="edge-in-progress",e.edgeInProgressTargetHandleID=e.edgeInProgressID+"-target-anchor"},4238:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9807),a=n(3199),c=n(9245),s=n(3705),u=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+i.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds,r=a.center(o),i=r.x-e.x,c=r.y-e.y,s=Math.sqrt(i*i+c*c),u=i/s||0,d=c/s||0;return{x:r.x-u*(.5*o.width+n),y:r.y-d*(.5*o.height+n)}},t=r([c.injectable()],t)}();e.EllipseAnchor=u;var d=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+i.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){void 0===n&&(n=0);var o=t.bounds,r=a.center(o),i=new l(r,e);if(!a.almostEquals(r.y,e.y)){var c=this.getXIntersection(o.y,r,e);c>=o.x&&c<=o.x+o.width&&i.addCandidate(c,o.y-n);var s=this.getXIntersection(o.y+o.height,r,e);s>=o.x&&s<=o.x+o.width&&i.addCandidate(s,o.y+o.height+n)}if(!a.almostEquals(r.x,e.x)){var u=this.getYIntersection(o.x,r,e);u>=o.y&&u<=o.y+o.height&&i.addCandidate(o.x-n,u);var d=this.getYIntersection(o.x+o.width,r,e);d>=o.y&&d<=o.y+o.height&&i.addCandidate(o.x+o.width+n,d)}return i.best},t.prototype.getXIntersection=function(t,e,n){var o=(t-e.y)/(n.y-e.y);return(n.x-e.x)*o+e.x},t.prototype.getYIntersection=function(t,e,n){var o=(t-e.x)/(n.x-e.x);return(n.y-e.y)*o+e.y},t=r([c.injectable()],t)}();e.RectangleAnchor=d;var l=function(){function t(t,e){this.centerPoint=t,this.refPoint=e,this.currentDist=-1}return t.prototype.addCandidate=function(t,e){var n=this.refPoint.x-t,o=this.refPoint.y-e,r=n*n+o*o;(this.currentDist<0||r<this.currentDist)&&(this.currentBest={x:t,y:e},this.currentDist=r)},Object.defineProperty(t.prototype,"best",{get:function(){return void 0===this.currentBest?this.centerPoint:this.currentBest},enumerable:!0,configurable:!0}),t}(),p=function(){function t(){}return Object.defineProperty(t.prototype,"kind",{get:function(){return s.PolylineEdgeRouter.KIND+":"+i.DIAMOND_ANCHOR_KIND},enumerable:!0,configurable:!0}),t.prototype.getAnchor=function(t,e,n){var o=t.bounds,r=new a.PointToPointLine(a.center(o),e),i=new a.Diamond(o).closestSideLine(e),c=a.intersection(i,r);return a.shiftTowards(c,e,n)},t=r([c.injectable()],t)}();e.DiamondAnchor=p},3705:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(9245),u=n(3199),d=n(1072),l=n(9807),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var n;return i(e,t),n=e,Object.defineProperty(e.prototype,"kind",{get:function(){return n.KIND},enumerable:!0,configurable:!0}),e.prototype.getOptions=function(t){return{minimalPointDistance:2,removeAngleThreshold:.1,standardDistance:20,selfEdgeOffset:.25}},e.prototype.route=function(t){var e,n,o=t.source,r=t.target;if(void 0===o||void 0===r)return[];var i=this.getOptions(t),a=t.routingPoints.length>0?t.routingPoints:[];this.cleanupRoutingPoints(t,a,!1,!1);var c=void 0!==a?a.length:0;if(0===c){var s=u.center(r.bounds);e=this.getTranslatedAnchor(o,s,r.parent,t,t.sourceAnchorCorrection);var d=u.center(o.bounds);n=this.getTranslatedAnchor(r,d,o.parent,t,t.targetAnchorCorrection)}else{var l=a[0];e=this.getTranslatedAnchor(o,l,t.parent,t,t.sourceAnchorCorrection);var p=a[c-1];n=this.getTranslatedAnchor(r,p,t.parent,t,t.targetAnchorCorrection)}var f=[];f.push({kind:"source",x:e.x,y:e.y});for(var y=0;y<c;y++){var h=a[y];(y>0&&y<c-1||0===y&&u.maxDistance(e,h)>=i.minimalPointDistance+(t.sourceAnchorCorrection||0)||y===c-1&&u.maxDistance(h,n)>=i.minimalPointDistance+(t.targetAnchorCorrection||0))&&f.push({kind:"linear",x:h.x,y:h.y,pointIndex:y})}return f.push({kind:"target",x:n.x,y:n.y}),this.filterEditModeHandles(f,t,i)},e.prototype.filterEditModeHandles=function(t,e,n){if(0===e.children.length)return t;for(var o=0,r=function(){var r=t[o];if(void 0!==r.pointIndex){var i=e.children.find((function(t){return t instanceof d.SRoutingHandle&&"junction"===t.kind&&t.pointIndex===r.pointIndex}));if(void 0!==i&&i.editMode&&o>0&&o<t.length-1){var a=t[o-1],c=t[o+1],s={x:a.x-r.x,y:a.y-r.y},l={x:c.x-r.x,y:c.y-r.y},p=u.angleBetweenPoints(s,l);if(Math.abs(Math.PI-p)<n.removeAngleThreshold)return t.splice(o,1),"continue"}}o++};o<t.length;)r();return t},e.prototype.createRoutingHandles=function(t){var e=t.routingPoints.length;this.addHandle(t,"source","routing-point",-2),this.addHandle(t,"line","volatile-routing-point",-1);for(var n=0;n<e;n++)this.addHandle(t,"junction","routing-point",n),this.addHandle(t,"line","volatile-routing-point",n);this.addHandle(t,"target","routing-point",e)},e.prototype.getInnerHandlePosition=function(t,e,n){if("line"===n.kind){var o=this.findRouteSegment(t,e,n.pointIndex),r=o.start,i=o.end;if(void 0!==r&&void 0!==i)return u.centerOfLine(r,i)}},e.prototype.applyInnerHandleMoves=function(t,e){var n=this;e.forEach((function(e){var o=e.handle,r=t.routingPoints,i=o.pointIndex;"line"===o.kind&&(o.kind="junction",o.type="routing-point",r.splice(i+1,0,e.fromPosition||r[Math.max(i,0)]),t.children.forEach((function(t){t instanceof d.SRoutingHandle&&(t===o||t.pointIndex>i)&&t.pointIndex++})),n.addHandle(t,"line","volatile-routing-point",i),n.addHandle(t,"line","volatile-routing-point",i+1),i++),i>=0&&i<r.length&&(r[i]=e.toPosition)}))},e.KIND="polyline",a([s.inject(l.AnchorComputerRegistry),c("design:type",l.AnchorComputerRegistry)],e.prototype,"anchorRegistry",void 0),e=n=a([s.injectable()],e)}(n(1915).LinearEdgeRouter);e.PolylineEdgeRouter=p},7946:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(3682),l=n(3834),p=n(1267),f=n(1384),y=n(1072),h=n(3705);var g=function(t){function e(e){var n=t.call(this)||this;return e.forEach((function(t){return n.register(t.kind,t)})),n}return i(e,t),Object.defineProperty(e.prototype,"defaultKind",{get:function(){return h.PolylineEdgeRouter.KIND},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return t.prototype.get.call(this,e||this.defaultKind)},e.prototype.routeAllChildren=function(t){for(var e=this.doRouteAllChildren(t),n=0,o=this.postProcessors;n<o.length;n++){o[n].apply(e)}return e},e.prototype.doRouteAllChildren=function(t){for(var e=this,n=new _,o=new Map,r=[t];r.length>0;)for(var i=0,a=r.shift().children;i<a.length;i++){var c=a[i];if(c instanceof y.SRoutableElement){var s=c.routerKind||this.defaultKind;o.has(s)?o.get(s).push(c):o.set(s,[c])}c instanceof d.SParentElement&&r.push(c)}return o.forEach((function(o,r){var i=e.get(r);if(void 0!==i.routeAll)n.setAll(i.routeAll(o,t));else for(var a=0,c=o;a<c.length;a++){var s=c[a];n.set(s.id,e.route(s))}})),n},e.prototype.route=function(t,e){var n=p.findArgValue(e,"edgeRouting");if(n){var o=n.get(t.id);if(o)return o}return this.get(t.routerKind).route(t)},a([u.multiInject(l.TYPES.IEdgeRoutePostprocessor),u.optional(),c("design:type",Array)],e.prototype,"postProcessors",void 0),e=a([u.injectable(),s(0,u.multiInject(l.TYPES.IEdgeRouter)),c("design:paramtypes",[Array])],e)}(f.InstanceRegistry);e.EdgeRouterRegistry=g;var _=function(){function t(){this.routesMap=new Map}return t.prototype.set=function(t,e){this.routesMap.set(t,e)},t.prototype.setAll=function(t){var e=this;t.routes.forEach((function(t,n){return e.set(n,t)}))},t.prototype.get=function(t){return this.routesMap.get(t)},Object.defineProperty(t.prototype,"routes",{get:function(){return this.routesMap},enumerable:!0,configurable:!0}),t}();e.EdgeRouting=_},8865:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9245),a=n(1072),c=function(){function t(){}return t.prototype.isVisible=function(t,e,n){if("hidden"===n.targetKind)return!0;if(0===e.length)return!0;var o=a.getAbsoluteRouteBounds(t,e),r=t.root.canvasBounds;return o.x<=r.width&&o.x+o.width>=0&&o.y<=r.height&&o.y+o.height>=0},t=r([i.injectable()],t)}();e.RoutableView=c},9251:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(3803),a=n(4588),c=new o.ContainerModule((function(t,e,n){a.configureCommand({bind:t,isBound:n},i.SelectCommand),a.configureCommand({bind:t,isBound:n},i.SelectAllCommand),a.configureCommand({bind:t,isBound:n},i.GetSelectionCommand),t(r.TYPES.KeyListener).to(i.SelectKeyboardListener),t(r.TYPES.MouseListener).to(i.SelectMouseListener)}));e.default=c},7040:(t,e)=>{"use strict";function n(t){return t.hasFeature(e.selectFeature)}Object.defineProperty(e,"__esModule",{value:!0}),e.selectFeature=Symbol("selectFeature"),e.isSelectable=n,e.isSelected=function(t){return void 0!==t&&n(t)&&t.selected}},3803:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(9672),l=n(4051),p=n(4344),f=n(3682),y=n(8127),h=n(3834),g=n(1886),_=n(5504),m=n(1469),v=n(8126),b=n(1933),S=n(6903),P=n(6659),w=n(1211),O=n(181),E=n(1072),R=n(1072),T=n(8773),I=n(7040),A=function(){function t(e,n){void 0===e&&(e=[]),void 0===n&&(n=[]),this.selectedElementsIDs=e,this.deselectedElementsIDs=n,this.kind=t.KIND}return t.KIND="elementSelected",t}();e.SelectAction=A;var x=function(){function t(e){void 0===e&&(e=!0),this.select=e,this.kind=t.KIND}return t.KIND="allSelected",t}();e.SelectAllAction=x;var C=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(d.generateRequestId())},t.KIND="getSelection",t}();e.GetSelectionAction=C;var M=function(){function t(e,n){void 0===e&&(e=[]),this.selectedElementsIDs=e,this.responseId=n,this.kind=t.KIND}return t.KIND="selectionResult",t}();e.SelectionResult=M;var j=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.selected=[],n.deselected=[],n}return i(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.selectedElementsIDs.forEach((function(t){var o=n.index.getById(t);o instanceof f.SChildElement&&I.isSelectable(o)&&e.selected.push(o)})),this.action.deselectedElementsIDs.forEach((function(t){var o=n.index.getById(t);o instanceof f.SChildElement&&I.isSelectable(o)&&e.deselected.push(o)})),this.redo(t)},e.prototype.undo=function(t){for(var e=0,n=this.selected;e<n.length;e++){n[e].selected=!1}for(var o=0,r=this.deselected;o<r.length;o++){r[o].selected=!0}return t.root},e.prototype.redo=function(t){for(var e=0,n=this.deselected;e<n.length;e++){n[e].selected=!1}for(var o=0,r=this.selected;o<r.length;o++){r[o].selected=!0}return t.root},e.KIND=A.KIND,e=a([u.injectable(),s(0,u.inject(h.TYPES.Action)),c("design:paramtypes",[A])],e)}(l.Command);e.SelectCommand=j;var D=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.previousSelection={},n}return i(e,t),e.prototype.execute=function(t){return this.selectAll(t.root,this.action.select),t.root},e.prototype.selectAll=function(t,e){I.isSelectable(t)&&(this.previousSelection[t.id]=t.selected,t.selected=e);for(var n=0,o=t.children;n<o.length;n++){var r=o[n];this.selectAll(r,e)}},e.prototype.undo=function(t){var e=this,n=t.root.index;return Object.keys(this.previousSelection).forEach((function(t){var o=n.getById(t);void 0!==o&&I.isSelectable(o)&&(o.selected=e.previousSelection[t])})),t.root},e.prototype.redo=function(t){return this.selectAll(t.root,this.action.select),t.root},e.KIND=x.KIND,e=a([u.injectable(),s(0,u.inject(h.TYPES.Action)),c("design:paramtypes",[x])],e)}(l.Command);e.SelectAllCommand=D;var N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.wasSelected=!1,e.hasDragged=!1,e}return i(e,t),e.prototype.mouseDown=function(t,e){var n=[];if(0===e.button){if(void 0!==this.buttonHandlerRegistry&&t instanceof w.SButton&&t.enabled){var o=this.buttonHandlerRegistry.get(t.type);if(void 0!==o)return o.buttonPressed(t)}var r=y.findParentByFeature(t,I.isSelectable);if(void 0!==r||t instanceof f.SModelRoot){this.hasDragged=!1;var i=[];if(v.isCtrlOrCmd(e)||(i=b.toArray(t.root.index.all().filter((function(t){return I.isSelectable(t)&&t.selected&&!(r instanceof E.SRoutingHandle&&t===r.parent)})))),void 0!==r)if(r.selected)v.isCtrlOrCmd(e)?(this.wasSelected=!1,n.push(new A([],[r.id])),r instanceof R.SRoutableElement&&n.push(new O.SwitchEditModeAction([],[r.id]))):this.wasSelected=!0;else{this.wasSelected=!1,n.push(new A([r.id],i.map((function(t){return t.id})))),n.push(new T.BringToFrontAction([r.id]));var a=i.filter((function(t){return t instanceof R.SRoutableElement})).map((function(t){return t.id}));r instanceof R.SRoutableElement?n.push(new O.SwitchEditModeAction([r.id],a)):a.length>0&&n.push(new O.SwitchEditModeAction([],a))}else n.push(new A([],i.map((function(t){return t.id})))),(a=i.filter((function(t){return t instanceof R.SRoutableElement})).map((function(t){return t.id}))).length>0&&n.push(new O.SwitchEditModeAction([],a))}}return n},e.prototype.mouseMove=function(t,e){return this.hasDragged=!0,[]},e.prototype.mouseUp=function(t,e){if(0===e.button&&!this.hasDragged){var n=y.findParentByFeature(t,I.isSelectable);if(void 0!==n&&this.wasSelected)return[new A([n.id],[])]}return this.hasDragged=!1,[]},e.prototype.decorate=function(t,e){var n=y.findParentByFeature(e,I.isSelectable);return void 0!==n&&m.setClass(t,"selected",n.selected),t},a([u.inject(P.ButtonHandlerRegistry),u.optional(),c("design:type",P.ButtonHandlerRegistry)],e.prototype,"buttonHandlerRegistry",void 0),e}(_.MouseListener);e.SelectMouseListener=N;var L=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.previousSelection={},n}return i(e,t),e.prototype.retrieveResult=function(t){var e=t.root.index.all().filter((function(t){return I.isSelectable(t)&&t.selected})).map((function(t){return t.id}));return new M(b.toArray(e),this.action.requestId)},e.KIND=C.KIND,e=a([u.injectable(),s(0,u.inject(h.TYPES.Action)),c("design:paramtypes",[C])],e)}(p.ModelRequestCommand);e.GetSelectionCommand=L;var B=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return S.matchesKeystroke(e,"KeyA","ctrlCmd")?[new x]:[]},e}(g.KeyListener);e.SelectKeyboardListener=B},1668:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(8848),a=new o.ContainerModule((function(t){t(r.TYPES.KeyListener).to(i.UndoRedoKeyListener)}));e.default=a},8848:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(6903),a=n(1886),c=n(8126),s=function(){function t(){this.kind=t.KIND}return t.KIND="undo",t}();e.UndoAction=s;var u=function(){function t(){this.kind=t.KIND}return t.KIND="redo",t}();e.RedoAction=u;var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.keyDown=function(t,e){return i.matchesKeystroke(e,"KeyZ","ctrlCmd")?[new s]:i.matchesKeystroke(e,"KeyZ","ctrlCmd","shift")||!c.isMac()&&i.matchesKeystroke(e,"KeyY","ctrlCmd")?[new u]:[]},e}(a.KeyListener);e.UndoRedoKeyListener=d},2637:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(4588),i=n(6789),a=new o.ContainerModule((function(t,e,n){r.configureCommand({bind:t,isBound:n},i.UpdateModelCommand)}));e.default=a},8487:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3682);e.forEachMatch=function(t,e){Object.keys(t).forEach((function(n){return e(n,t[n])}))};var r=function(){function t(){}return t.prototype.match=function(t,e){var n={};return this.matchLeft(t,n),this.matchRight(e,n),n},t.prototype.matchLeft=function(t,e,n){var r=e[t.id];if(void 0!==r?(r.left=t,r.leftParentId=n):(r={left:t,leftParentId:n},e[t.id]=r),o.isParent(t))for(var i=0,a=t.children;i<a.length;i++){var c=a[i];this.matchLeft(c,e,t.id)}},t.prototype.matchRight=function(t,e,n){var r=e[t.id];if(void 0!==r?(r.right=t,r.rightParentId=n):(r={right:t,rightParentId:n},e[t.id]=r),o.isParent(t))for(var i=0,a=t.children;i<a.length;i++){var c=a[i];this.matchRight(c,e,t.id)}},t}();e.ModelMatcher=r,e.applyMatches=function(t,e){var n;t instanceof o.SModelRoot?n=t.index:(n=new o.SModelIndex).add(t);for(var r=0,i=e;r<i.length;r++){var a=i[r],c=!1;if(void 0!==a.left&&void 0!==a.leftParentId){var s=n.getById(a.leftParentId);if(void 0!==s&&void 0!==s.children){var u=s.children.indexOf(a.left);u>=0&&(void 0!==a.right&&a.leftParentId===a.rightParentId?(s.children.splice(u,1,a.right),c=!0):s.children.splice(u,1)),n.remove(a.left)}}if(!c&&void 0!==a.right&&void 0!==a.rightParentId){var d=n.getById(a.rightParentId);void 0!==d&&(void 0===d.children&&(d.children=[]),d.children.push(a.right))}}}},6789:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(3199),l=n(4633),p=n(4051),f=n(4265),y=n(3682),h=n(3263),g=n(8681),_=n(1235),m=n(1229),v=n(6651),b=n(7040),S=n(8487),P=n(8246),w=n(3834),O=n(1945),E=n(7946),R=n(1072),T=n(8127),I=function(){function t(e,n,o){void 0===n&&(n=!0),this.animate=n,this.cause=o,this.kind=t.KIND,void 0!==e.id?this.newRoot=e:this.matches=e}return t.KIND="updateModel",t}();e.UpdateModelAction=I;var A=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){var e;return void 0!==this.action.newRoot?e=t.modelFactory.createRoot(this.action.newRoot):(e=t.modelFactory.createRoot(t.root),void 0!==this.action.matches&&this.applyMatches(e,this.action.matches,t)),this.oldRoot=t.root,this.newRoot=e,this.performUpdate(this.oldRoot,this.newRoot,t)},e.prototype.performUpdate=function(t,e,n){if(void 0!==this.action.animate&&!this.action.animate||t.id!==e.id)return t.type===e.type&&d.isValidDimension(t.canvasBounds)&&(e.canvasBounds=t.canvasBounds),O.isViewport(t)&&O.isViewport(e)&&(e.zoom=t.zoom,e.scroll=t.scroll),e;var o=void 0;o=void 0===this.action.matches?(new S.ModelMatcher).match(t,e):this.convertToMatchResult(this.action.matches,t,e);var r=this.computeAnimation(e,o,n);return r instanceof l.Animation?r.start():r},e.prototype.applyMatches=function(t,e,n){for(var o=t.index,r=0,i=e;r<i.length;r++){if(void 0!==(s=i[r]).left)(u=o.getById(s.left.id))instanceof y.SChildElement&&u.parent.remove(u)}for(var a=0,c=e;a<c.length;a++){var s;if(void 0!==(s=c[a]).right){var u=n.modelFactory.createElement(s.right),d=void 0;void 0!==s.rightParentId&&(d=o.getById(s.rightParentId)),d instanceof y.SParentElement?d.add(u):t.add(u)}}},e.prototype.convertToMatchResult=function(t,e,n){for(var o={},r=0,i=t;r<i.length;r++){var a=i[r],c={},s=void 0;void 0!==a.left&&(s=a.left.id,c.left=e.index.getById(s),c.leftParentId=a.leftParentId),void 0!==a.right&&(s=a.right.id,c.right=n.index.getById(s),c.rightParentId=a.rightParentId),void 0!==s&&(o[s]=c)}return o},e.prototype.computeAnimation=function(t,e,n){var o=this,r={fades:[]};S.forEachMatch(e,(function(e,i){if(void 0!==i.left&&void 0!==i.right)o.updateElement(i.left,i.right,r);else if(void 0!==i.right){var a=i.right;g.isFadeable(a)&&(a.opacity=0,r.fades.push({element:a,type:"in"}))}else if(i.left instanceof y.SChildElement){var c=i.left;if(g.isFadeable(c)&&void 0!==i.leftParentId&&!T.containsSome(t,c)){var s=t.index.getById(i.leftParentId);if(s instanceof y.SParentElement){var u=n.modelFactory.createElement(c);s.add(u),r.fades.push({element:u,type:"out"})}}}}));var i=this.createAnimations(r,t,n);return i.length>=2?new l.CompoundAnimation(t,n,i):1===i.length?i[0]:t},e.prototype.updateElement=function(t,e,n){if(_.isLocateable(t)&&_.isLocateable(e)){var o=t.position,r=e.position;d.almostEquals(o.x,r.x)&&d.almostEquals(o.y,r.y)||(void 0===n.moves&&(n.moves=[]),n.moves.push({element:e,fromPosition:o,toPosition:r}),e.position=o)}m.isSizeable(t)&&m.isSizeable(e)&&(d.isValidDimension(e.bounds)?d.almostEquals(t.bounds.width,e.bounds.width)&&d.almostEquals(t.bounds.height,e.bounds.height)||(void 0===n.resizes&&(n.resizes=[]),n.resizes.push({element:e,fromDimension:{width:t.bounds.width,height:t.bounds.height},toDimension:{width:e.bounds.width,height:e.bounds.height}})):e.bounds={x:e.bounds.x,y:e.bounds.y,width:t.bounds.width,height:t.bounds.height}),t instanceof R.SRoutableElement&&e instanceof R.SRoutableElement&&this.edgeRouterRegistry&&(void 0===n.edgeMementi&&(n.edgeMementi=[]),n.edgeMementi.push({edge:e,before:this.takeSnapshot(t),after:this.takeSnapshot(e)})),b.isSelectable(t)&&b.isSelectable(e)&&(e.selected=t.selected),t instanceof y.SModelRoot&&e instanceof y.SModelRoot&&(e.canvasBounds=t.canvasBounds),t instanceof v.ViewportRootElement&&e instanceof v.ViewportRootElement&&(e.scroll=t.scroll,e.zoom=t.zoom)},e.prototype.takeSnapshot=function(t){return this.edgeRouterRegistry.get(t.routerKind).takeSnapshot(t)},e.prototype.createAnimations=function(t,e,n){var o=[];if(t.fades.length>0&&o.push(new f.FadeAnimation(e,t.fades,n,!0)),void 0!==t.moves&&t.moves.length>0){for(var r=new Map,i=0,a=t.moves;i<a.length;i++){var c=a[i];r.set(c.element.id,c)}o.push(new h.MoveAnimation(e,r,n,!1))}if(void 0!==t.resizes&&t.resizes.length>0){for(var s=new Map,u=0,d=t.resizes;u<d.length;u++){var l=d[u];s.set(l.element.id,l)}o.push(new P.ResizeAnimation(e,s,n,!1))}return void 0!==t.edgeMementi&&t.edgeMementi.length>0&&o.push(new h.MorphEdgesAnimation(e,t.edgeMementi,n,!1)),o},e.prototype.undo=function(t){return this.performUpdate(this.newRoot,this.oldRoot,t)},e.prototype.redo=function(t){return this.performUpdate(this.oldRoot,this.newRoot,t)},e.KIND=I.KIND,a([u.inject(E.EdgeRouterRegistry),u.optional(),c("design:type",E.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=a([u.injectable(),s(0,u.inject(w.TYPES.Action)),c("design:paramtypes",[I])],e)}(p.Command);e.UpdateModelCommand=A},1455:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(3199),d=n(6903),l=n(3682),p=n(4051),f=n(1886),y=n(1229),h=n(7040),g=n(7217),_=n(1945),m=n(9245),v=n(3834),b=function(){function t(e,n,o){void 0===n&&(n=!0),void 0===o&&(o=!1),this.elementIds=e,this.animate=n,this.retainZoom=o,this.kind=t.KIND}return t.KIND="center",t}();e.CenterAction=b;var S=function(){function t(e,n,o,r){void 0===r&&(r=!0),this.elementIds=e,this.padding=n,this.maxZoom=o,this.animate=r,this.kind=t.KIND}return t.KIND="fit",t}();e.FitToScreenAction=S;var P=function(t){function e(e){var n=t.call(this)||this;return n.animate=e,n}return i(e,t),e.prototype.initialize=function(t){var e=this;if(_.isViewport(t)){this.oldViewport={scroll:t.scroll,zoom:t.zoom};var n=[];if(this.getElementIds().forEach((function(o){var r=t.index.getById(o);r&&y.isBoundsAware(r)&&n.push(e.boundsInViewport(r,r.bounds,t))})),0===n.length&&t.index.all().forEach((function(o){h.isSelectable(o)&&o.selected&&y.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))})),0===n.length&&t.index.all().forEach((function(o){y.isBoundsAware(o)&&n.push(e.boundsInViewport(o,o.bounds,t))})),0!==n.length){var o=n.reduce((function(t,e){return u.combine(t,e)}));u.isValidDimension(o)&&(this.newViewport=this.getNewViewport(o,t))}}},e.prototype.boundsInViewport=function(t,e,n){return t instanceof l.SChildElement&&t.parent!==n?this.boundsInViewport(t.parent,t.parent.localToParent(e),n):e},e.prototype.execute=function(t){return this.initialize(t.root),this.redo(t)},e.prototype.undo=function(t){var e=t.root;if(_.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new g.ViewportAnimation(e,this.newViewport,this.oldViewport,t).start();e.scroll=this.oldViewport.scroll,e.zoom=this.oldViewport.zoom}return e},e.prototype.redo=function(t){var e=t.root;if(_.isViewport(e)&&void 0!==this.newViewport&&!this.equal(this.newViewport,this.oldViewport)){if(this.animate)return new g.ViewportAnimation(e,this.oldViewport,this.newViewport,t).start();e.scroll=this.newViewport.scroll,e.zoom=this.newViewport.zoom}return e},e.prototype.equal=function(t,e){return t.zoom===e.zoom&&t.scroll.x===e.scroll.x&&t.scroll.y===e.scroll.y},e=a([m.injectable(),c("design:paramtypes",[Boolean])],e)}(p.Command);e.BoundsAwareViewportCommand=P;var w=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return i(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(u.isValidDimension(e.canvasBounds)){var n=this.action.retainZoom&&_.isViewport(e)?e.zoom:1,o=u.center(t);return{scroll:{x:o.x-.5*e.canvasBounds.width/n,y:o.y-.5*e.canvasBounds.height/n},zoom:n}}},e.KIND=b.KIND,e=a([s(0,m.inject(v.TYPES.Action)),c("design:paramtypes",[b])],e)}(P);e.CenterCommand=w;var O=function(t){function e(e){var n=t.call(this,e.animate)||this;return n.action=e,n}return i(e,t),e.prototype.getElementIds=function(){return this.action.elementIds},e.prototype.getNewViewport=function(t,e){if(u.isValidDimension(e.canvasBounds)){var n=u.center(t),o=void 0===this.action.padding?0:2*this.action.padding,r=Math.min(e.canvasBounds.width/(t.width+o),e.canvasBounds.height/(t.height+o));return void 0!==this.action.maxZoom&&(r=Math.min(r,this.action.maxZoom)),r===1/0&&(r=1),{scroll:{x:n.x-.5*e.canvasBounds.width/r,y:n.y-.5*e.canvasBounds.height/r},zoom:r}}},e.KIND=S.KIND,e=a([s(0,m.inject(v.TYPES.Action)),c("design:paramtypes",[S])],e)}(P);e.FitToScreenCommand=O;var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.keyDown=function(t,e){return d.matchesKeystroke(e,"KeyC","ctrlCmd","shift")?[new b([])]:d.matchesKeystroke(e,"KeyF","ctrlCmd","shift")?[new S([])]:[]},e}(f.KeyListener);e.CenterKeyboardListener=E},2001:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(1455),a=n(7217),c=n(1085),s=n(5483),u=n(4588),d=new o.ContainerModule((function(t,e,n){u.configureCommand({bind:t,isBound:n},i.CenterCommand),u.configureCommand({bind:t,isBound:n},i.FitToScreenCommand),u.configureCommand({bind:t,isBound:n},a.SetViewportCommand),u.configureCommand({bind:t,isBound:n},a.GetViewportCommand),t(r.TYPES.KeyListener).to(i.CenterKeyboardListener),t(r.TYPES.MouseListener).to(c.ScrollMouseListener),t(r.TYPES.MouseListener).to(s.ZoomMouseListener)}));e.default=d},1945:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3682);e.viewportFeature=Symbol("viewportFeature"),e.isViewport=function(t){return t instanceof o.SModelRoot&&t.hasFeature(e.viewportFeature)&&"zoom"in t&&"scroll"in t}},1085:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3682),a=n(5504),c=n(8127),s=n(7217),u=n(1945),d=n(1235),l=n(1072),p=n(1039),f=n(1455),y=n(8126);e.isScrollable=function(t){return"scroll"in t};var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollbarMouseDownDelay=200,e}return r(e,t),e.prototype.mouseDown=function(t,e){var n=this;if(void 0===c.findParentByFeature(t,d.isMoveable)&&!(t instanceof l.SRoutingHandle)){var o=c.findParentByFeature(t,u.isViewport);if(o){if(this.lastScrollPosition={x:e.pageX,y:e.pageY},this.scrollbar=this.getScrollbar(e),this.scrollbar)return window.clearTimeout(this.scrollbarMouseDownTimeout),this.moveScrollBar(o,e,this.scrollbar,!0).map((function(t){return new Promise((function(e){n.scrollbarMouseDownTimeout=window.setTimeout((function(){return e(t)}),n.scrollbarMouseDownDelay)}))}))}else this.lastScrollPosition=void 0,this.scrollbar=void 0}return[]},e.prototype.mouseMove=function(t,e){if(0===e.buttons)return this.mouseUp(t,e);var n;if(this.scrollbar&&(window.clearTimeout(this.scrollbarMouseDownTimeout),n=c.findParentByFeature(t,u.isViewport)))return this.moveScrollBar(n,e,this.scrollbar);if(this.lastScrollPosition&&(n=c.findParentByFeature(t,u.isViewport)))return this.dragCanvas(n,e,this.lastScrollPosition);return[]},e.prototype.mouseEnter=function(t,e){return t instanceof i.SModelRoot&&0===e.buttons&&this.mouseUp(t,e),[]},e.prototype.mouseUp=function(t,e){return this.lastScrollPosition=void 0,this.scrollbar=void 0,[]},e.prototype.doubleClick=function(t,e){if(c.findParentByFeature(t,u.isViewport)){var n=this.getScrollbar(e);if(n){window.clearTimeout(this.scrollbarMouseDownTimeout);var o=this.findClickTarget(n,e),r=void 0;if(o&&o.id.startsWith("horizontal-projection:")?r=o.id.substring("horizontal-projection:".length):o&&o.id.startsWith("vertical-projection:")&&(r=o.id.substring("vertical-projection:".length)),r)return[new f.CenterAction([r],!0,!0)]}}return[]},e.prototype.dragCanvas=function(t,e,n){var o=(e.pageX-n.x)/t.zoom,r=(e.pageY-n.y)/t.zoom,i={scroll:{x:t.scroll.x-o,y:t.scroll.y-r},zoom:t.zoom};return this.lastScrollPosition={x:e.pageX,y:e.pageY},[new s.SetViewportAction(t.id,i,!1)]},e.prototype.moveScrollBar=function(t,e,n,o){void 0===o&&(o=!1);var r=p.getModelBounds(t);if(!r||t.zoom<=0)return[];var i,a=n.getBoundingClientRect();if("horizontal"===this.getScrollbarOrientation(n)){if(a.width<=0)return[];var c=t.canvasBounds.width/(t.zoom*r.width)*a.width;(u=e.clientX-a.x-c/2)<0?u=0:u>a.width-c&&(u=a.width-c),i={x:r.x+u/a.width*r.width,y:t.scroll.y}}else{if(a.height<=0)return[];var u;c=t.canvasBounds.height/(t.zoom*r.height)*a.height;(u=e.clientY-a.y-c/2)<0?u=0:u>a.height-c&&(u=a.height-c),i={x:t.scroll.x,y:r.y+u/a.height*r.height}}return[new s.SetViewportAction(t.id,{scroll:i,zoom:t.zoom},o)]},e.prototype.getScrollbar=function(t){for(var e=t.target;e;){if(e.classList&&e.classList.contains("sprotty-projection-bar"))return e;e=e.parentElement}},e.prototype.getScrollbarOrientation=function(t){return t.classList.contains("horizontal")?"horizontal":"vertical"},e.prototype.findClickTarget=function(t,e){var n=Array.from(t.children).filter((function(t){return t.id&&t.classList.contains("sprotty-projection")&&y.hitsMouseEvent(t,e)}));if(n.length>0)return n[n.length-1]},e}(a.MouseListener);e.ScrollMouseListener=h},6651:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3199),a=n(3682),c=n(1945),s=n(6312),u=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll={x:0,y:0},n.zoom=1,n.position=i.ORIGIN_POINT,n.size=i.EMPTY_DIMENSION,n}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.prototype.localToParent=function(t){var e={x:(t.x-this.scroll.x)*this.zoom,y:(t.y-this.scroll.y)*this.zoom,width:-1,height:-1};return i.isBounds(t)&&(e.width=t.width*this.zoom,e.height=t.height*this.zoom),e},e.prototype.parentToLocal=function(t){var e={x:t.x/this.zoom+this.scroll.x,y:t.y/this.zoom+this.scroll.y,width:-1,height:-1};return i.isBounds(t)&&i.isValidDimension(t)&&(e.width=t.width/this.zoom,e.height=t.height/this.zoom),e},e.DEFAULT_FEATURES=[c.viewportFeature,s.exportFeature],e}(a.SModelRoot);e.ViewportRootElement=u},7217:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(3199),d=n(9672),l=n(4051),p=n(4633),f=n(1945),y=n(9245),h=n(3834),g=n(4344),_=function(){function t(e,n,o){this.elementId=e,this.newViewport=n,this.animate=o,this.kind=t.KIND}return t.KIND="viewport",t}();e.SetViewportAction=_;var m=function(){function t(e){void 0===e&&(e=""),this.requestId=e,this.kind=t.KIND}return t.create=function(){return new t(d.generateRequestId())},t.KIND="getViewport",t}();e.GetViewportAction=m;var v=function(){function t(e,n,o){this.viewport=e,this.canvasBounds=n,this.responseId=o,this.kind=t.KIND}return t.KIND="viewportResult",t}();e.ViewportResult=v;var b=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.newViewport=e.newViewport,n}var n;return i(e,t),n=e,e.prototype.execute=function(t){var e=t.root,n=e.index.getById(this.action.elementId);if(n&&f.isViewport(n)){if(this.element=n,this.oldViewport={scroll:this.element.scroll,zoom:this.element.zoom},this.action.animate)return new P(this.element,this.oldViewport,this.newViewport,t).start();this.element.scroll=this.newViewport.scroll,this.element.zoom=this.newViewport.zoom}return e},e.prototype.undo=function(t){return new P(this.element,this.newViewport,this.oldViewport,t).start()},e.prototype.redo=function(t){return new P(this.element,this.oldViewport,this.newViewport,t).start()},e.prototype.merge=function(t,e){return!this.action.animate&&t instanceof n&&this.element===t.element&&(this.newViewport=t.newViewport,!0)},e.KIND=_.KIND,e=n=a([y.injectable(),s(0,y.inject(h.TYPES.Action)),c("design:paramtypes",[_])],e)}(l.MergeableCommand);e.SetViewportCommand=b;var S=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.retrieveResult=function(t){var e,n=t.root;return e=f.isViewport(n)?{scroll:n.scroll,zoom:n.zoom}:{scroll:u.ORIGIN_POINT,zoom:1},new v(e,n.canvasBounds,this.action.requestId)},e.KIND=m.KIND,e=a([s(0,y.inject(h.TYPES.Action)),c("design:paramtypes",[m])],e)}(g.ModelRequestCommand);e.GetViewportCommand=S;var P=function(t){function e(e,n,o,r){var i=t.call(this,r)||this;return i.element=e,i.oldViewport=n,i.newViewport=o,i.context=r,i.zoomFactor=Math.log(o.zoom/n.zoom),i}return i(e,t),e.prototype.tween=function(t,e){return this.element.scroll={x:(1-t)*this.oldViewport.scroll.x+t*this.newViewport.scroll.x,y:(1-t)*this.oldViewport.scroll.y+t*this.newViewport.scroll.y},this.element.zoom=this.oldViewport.zoom*Math.exp(t*this.zoomFactor),e.root},e}(p.Animation);e.ViewportAnimation=P},5483:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(8126),a=n(5504),c=n(8127),s=n(7217),u=n(1945);e.isZoomable=function(t){return"zoom"in t},e.getZoom=function(t){var e=1,n=c.findParentByFeature(t,u.isViewport);return n&&(e=n.zoom),e};var d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.wheel=function(t,e){var n=c.findParentByFeature(t,u.isViewport);if(n){var o=this.getZoomFactor(e),r=this.getViewportOffset(t.root,e),i=1/(o*n.zoom)-1/n.zoom,a={scroll:{x:n.scroll.x-i*r.x,y:n.scroll.y-i*r.y},zoom:n.zoom*o};return[new s.SetViewportAction(n.id,a,!1)]}return[]},e.prototype.getViewportOffset=function(t,e){var n=t.canvasBounds,o=i.getWindowScroll();return{x:e.clientX+o.x-n.x,y:e.clientY+o.y-n.y}},e.prototype.getZoomFactor=function(t){return t.deltaMode===t.DOM_DELTA_PAGE?Math.exp(.5*-t.deltaY):t.deltaMode===t.DOM_DELTA_LINE?Math.exp(.05*-t.deltaY):Math.exp(.005*-t.deltaY)},e}(a.MouseListener);e.ZoomMouseListener=d},9446:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(4588),i=n(8773),a=new o.ContainerModule((function(t,e,n){r.configureCommand({bind:t,isBound:n},i.BringToFrontCommand)}));e.default=a},8773:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(3834),l=n(3682),p=n(4051),f=n(1072),y=function(){function t(e){this.elementIDs=e,this.kind=t.KIND}return t.KIND="bringToFront",t}();e.BringToFrontAction=y;var h=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n.selected=[],n}return i(e,t),e.prototype.execute=function(t){var e=this,n=t.root;return this.action.elementIDs.forEach((function(t){var o=n.index.getById(t);o instanceof f.SRoutableElement&&(o.source&&e.addToSelection(o.source),o.target&&e.addToSelection(o.target)),o instanceof l.SChildElement&&e.addToSelection(o),e.includeConnectedEdges(o)})),this.redo(t)},e.prototype.includeConnectedEdges=function(t){var e=this;if(t instanceof f.SConnectableElement&&(t.incomingEdges.forEach((function(t){return e.addToSelection(t)})),t.outgoingEdges.forEach((function(t){return e.addToSelection(t)}))),t instanceof l.SParentElement)for(var n=0,o=t.children;n<o.length;n++){var r=o[n];this.includeConnectedEdges(r)}},e.prototype.addToSelection=function(t){this.selected.push({element:t,index:t.parent.children.indexOf(t)})},e.prototype.undo=function(t){for(var e=this.selected.length-1;e>=0;e--){var n=this.selected[e],o=n.element;o.parent.move(o,n.index)}return t.root},e.prototype.redo=function(t){for(var e=0;e<this.selected.length;e++)this.bringToFront(this.selected[e]);return t.root},e.prototype.bringToFront=function(t){var e=t.element,n=e.parent.children.length;e.parent.move(e,n-1)},e.KIND=y.KIND,e=a([u.injectable(),s(0,u.inject(d.TYPES.Action)),c("design:paramtypes",[y])],e)}(p.Command);e.BringToFrontCommand=h},5029:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(3834),i=n(9019),a=new o.ContainerModule((function(t,e,n,o){o(r.TYPES.IModelFactory).to(i.SGraphFactory).inSingletonScope()}));e.default=a},9019:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(1294),u=n(3682),d=n(8127),l=n(6660),p=n(1211),f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultGraphFeatures=s.createFeatureSet(l.SGraph.DEFAULT_FEATURES),e.defaultNodeFeatures=s.createFeatureSet(l.SNode.DEFAULT_FEATURES),e.defaultPortFeatures=s.createFeatureSet(l.SPort.DEFAULT_FEATURES),e.defaultEdgeFeatures=s.createFeatureSet(l.SEdge.DEFAULT_FEATURES),e.defaultLabelFeatures=s.createFeatureSet(l.SLabel.DEFAULT_FEATURES),e.defaultCompartmentFeatures=s.createFeatureSet(l.SCompartment.DEFAULT_FEATURES),e.defaultButtonFeatures=s.createFeatureSet(p.SButton.DEFAULT_FEATURES),e}return i(e,t),e.prototype.createElement=function(t,e){var n;if(this.registry.hasKey(t.type)){var o=this.registry.get(t.type,void 0);if(!(o instanceof u.SChildElement))throw new Error("Element with type "+t.type+" was expected to be an SChildElement.");n=o}else this.isNodeSchema(t)?(n=new l.SNode).features=this.defaultNodeFeatures:this.isPortSchema(t)?(n=new l.SPort).features=this.defaultPortFeatures:this.isEdgeSchema(t)?(n=new l.SEdge).features=this.defaultEdgeFeatures:this.isLabelSchema(t)?(n=new l.SLabel).features=this.defaultLabelFeatures:this.isCompartmentSchema(t)?(n=new l.SCompartment).features=this.defaultCompartmentFeatures:this.isButtonSchema(t)?(n=new p.SButton).features=this.defaultButtonFeatures:n=new u.SChildElement;return this.initializeChild(n,t,e)},e.prototype.createRoot=function(t){var e;if(this.registry.hasKey(t.type)){var n=this.registry.get(t.type,void 0);if(!(n instanceof u.SModelRoot))throw new Error("Element with type "+t.type+" was expected to be an SModelRoot.");e=n}else this.isGraphSchema(t)?(e=new l.SGraph).features=this.defaultGraphFeatures:e=new u.SModelRoot;return this.initializeRoot(e,t)},e.prototype.isGraphSchema=function(t){return"graph"===d.getBasicType(t)},e.prototype.isNodeSchema=function(t){return"node"===d.getBasicType(t)},e.prototype.isPortSchema=function(t){return"port"===d.getBasicType(t)},e.prototype.isEdgeSchema=function(t){return"edge"===d.getBasicType(t)},e.prototype.isLabelSchema=function(t){return"label"===d.getBasicType(t)},e.prototype.isCompartmentSchema=function(t){return"comp"===d.getBasicType(t)},e.prototype.isButtonSchema=function(t){return"button"===d.getBasicType(t)},e=a([c.injectable()],e)}(s.SModelFactory);e.SGraphFactory=f},6660:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3682),a=n(1229),c=n(4698),s=n(1984),u=n(8167),d=n(8681),l=n(5056),p=n(1235),f=n(1072),y=n(7040),h=n(6651),g=n(3199),_=n(1933),m=function(t){function e(e){return void 0===e&&(e=new O),t.call(this,e)||this}return r(e,t),e}(h.ViewportRootElement);e.SGraph=m;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.prototype.canConnect=function(t,e){return void 0===this.children.find((function(t){return t instanceof b}))},e.DEFAULT_FEATURES=[f.connectableFeature,s.deletableFeature,y.selectFeature,a.boundsFeature,p.moveFeature,a.layoutContainerFeature,d.fadeFeature,l.hoverFeedbackFeature,l.popupFeature],e}(f.SConnectableElement);e.SNode=v;var b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[f.connectableFeature,y.selectFeature,a.boundsFeature,d.fadeFeature,l.hoverFeedbackFeature],e}(f.SConnectableElement);e.SPort=b;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.hoverFeedback=!1,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[u.editFeature,s.deletableFeature,y.selectFeature,d.fadeFeature,l.hoverFeedbackFeature],e}(f.SRoutableElement);e.SEdge=S;var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.selected=!1,e.alignment=g.ORIGIN_POINT,e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[a.boundsFeature,a.alignFeature,a.layoutableChildFeature,c.edgeLayoutFeature,d.fadeFeature],e}(a.SShapeElement);e.SLabel=P;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.opacity=1,e}return r(e,t),e.DEFAULT_FEATURES=[a.boundsFeature,a.layoutContainerFeature,a.layoutableChildFeature,d.fadeFeature],e}(a.SShapeElement);e.SCompartment=w;var O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.outgoing=new Map,e.incoming=new Map,e}return r(e,t),e.prototype.add=function(e){if(t.prototype.add.call(this,e),e instanceof S){if(e.sourceId){var n=this.outgoing.get(e.sourceId);void 0===n?this.outgoing.set(e.sourceId,[e]):n.push(e)}if(e.targetId){var o=this.incoming.get(e.targetId);void 0===o?this.incoming.set(e.targetId,[e]):o.push(e)}}},e.prototype.remove=function(e){if(t.prototype.remove.call(this,e),e instanceof S){var n=this.outgoing.get(e.sourceId);if(void 0!==n)(o=n.indexOf(e))>=0&&(1===n.length?this.outgoing.delete(e.sourceId):n.splice(o,1));var o,r=this.incoming.get(e.targetId);if(void 0!==r)(o=r.indexOf(e))>=0&&(1===r.length?this.incoming.delete(e.targetId):r.splice(o,1))}},e.prototype.getAttachedElements=function(t){var e=this;return new _.FluentIterableImpl((function(){return{outgoing:e.outgoing.get(t.id),incoming:e.incoming.get(t.id),nextOutgoingIndex:0,nextIncomingIndex:0}}),(function(t){var e=t.nextOutgoingIndex;if(void 0!==t.outgoing&&e<t.outgoing.length)return t.nextOutgoingIndex=e+1,{done:!1,value:t.outgoing[e]};if(e=t.nextIncomingIndex,void 0!==t.incoming)for(;e<t.incoming.length;){var n=t.incoming[e];if(n.sourceId!==n.targetId)return t.nextIncomingIndex=e+1,{done:!1,value:n};e++}return{done:!0,value:void 0}}))},e.prototype.getIncomingEdges=function(t){return this.incoming.get(t.id)||[]},e.prototype.getOutgoingEdges=function(t){return this.outgoing.get(t.id)||[]},e}(i.SModelIndex);e.SGraphIndex=O},1216:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var s=n(9245),u=n(8127),d=n(1469),l=n(9179),p=n(6193),f=n(4698),y=n(1072),h=n(7946),g=n(8865),_=n(5181),m=n(3199),v=function(){function t(){}return t.prototype.render=function(t,e,n){var o=this.edgeRouterRegistry.routeAllChildren(t),r="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return _.svg("svg",{"class-sprotty-graph":!0},_.svg("g",{transform:r},e.renderChildren(t,{edgeRouting:o})))},a([s.inject(h.EdgeRouterRegistry),c("design:type",h.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),t=a([s.injectable()],t)}();e.SGraphView=v;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e,n){var o=this.edgeRouterRegistry.route(t,n);if(0===o.length)return this.renderDanglingEdge("Cannot compute route",t,e);if(!this.isVisible(t,o,e)){if(0===t.children.length)return;return _.svg("g",null,e.renderChildren(t,{route:o}))}return _.svg("g",{"class-sprotty-edge":!0,"class-mouseover":t.hoverFeedback},this.renderLine(t,o,e,n),this.renderAdditionals(t,o,e),e.renderChildren(t,{route:o}))},e.prototype.renderLine=function(t,e,n,o){for(var r=e[0],i="M "+r.x+","+r.y,a=1;a<e.length;a++){var c=e[a];i+=" L "+c.x+","+c.y}return _.svg("path",{d:i})},e.prototype.renderAdditionals=function(t,e,n){return[]},e.prototype.renderDanglingEdge=function(t,e,n){return _.svg("text",{"class-sprotty-edge-dangling":!0,title:t},"?")},a([s.inject(h.EdgeRouterRegistry),c("design:type",h.EdgeRouterRegistry)],e.prototype,"edgeRouterRegistry",void 0),e=a([s.injectable()],e)}(g.RoutableView);e.PolylineEdgeView=b;var S=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jumpOffsetBefore=5,e.jumpOffsetAfter=5,e.skipOffsetBefore=3,e.skipOffsetAfter=2,e}return i(e,t),e.prototype.renderLine=function(t,e,n,o){for(var r="",i=0;i<e.length;i++){var a=e[i];0===i&&(r="M "+a.x+","+a.y),p.isIntersectingRoutedPoint(a)&&(r+=this.intersectionPath(t,e,a,o)),0!==i&&(r+=" L "+a.x+","+a.y)}return _.svg("path",{d:r})},e.prototype.intersectionPath=function(t,e,n,o){for(var r="",i=0,a=n.intersections.sort(p.BY_X_THEN_Y);i<a.length;i++){var c=a[i],s=this.getOtherLineSegment(t,c,o);if(void 0!==s){var u=this.getLineSegment(t,c,o,e),d=c.intersectionPoint;Math.abs(u.slopeOrMax)<Math.abs(s.slopeOrMax)?r+=this.createJumpPath(d,u):r+=this.createSkipPath(d,u)}}return r},e.prototype.getOtherLineSegment=function(t,e,n){var o=e.routable1===t.id?e.routable2:e.routable1,r=t.index.getById(o);if(r instanceof y.SRoutableElement)return this.getLineSegment(r,e,n)},e.prototype.getLineSegment=function(t,e,n,o){var r=o||this.edgeRouterRegistry.route(t,n),i=e.routable1===t.id?e.segmentIndex1:e.segmentIndex2;return new m.PointToPointLine(r[i],r[i+1])},e.prototype.createJumpPath=function(t,e){var n=m.shiftTowards(t,e.p1,this.jumpOffsetBefore),o=m.shiftTowards(t,e.p2,this.jumpOffsetAfter),r=e.p1.x<e.p2.x?1:0;return" L "+n.x+","+n.y+" A 1,1 0,0 "+r+" "+o.x+","+o.y},e.prototype.createSkipPath=function(t,e){var n,o;t.y<e.p1.y?(n=-this.skipOffsetBefore,o=this.jumpOffsetAfter+this.skipOffsetAfter):(n=this.jumpOffsetBefore+this.skipOffsetAfter,o=-this.skipOffsetBefore);var r=m.shiftTowards(t,e.p1,n),i=m.shiftTowards(t,e.p2,o);return" L "+r.x+","+r.y+" M "+i.x+","+i.y},e=a([s.injectable()],e)}(b);e.JumpingPolylineEdgeView=S;var P=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.skipOffsetBefore=3,e.skipOffsetAfter=3,e}return i(e,t),e.prototype.createJumpPath=function(t,e){return""},e.prototype.createSkipPath=function(t,e){var n=m.shiftTowards(t,e.p1,this.skipOffsetBefore),o=m.shiftTowards(t,e.p2,this.skipOffsetAfter);return" L "+n.x+","+n.y+" M "+o.x+","+o.y},e=a([s.injectable()],e)}(S);e.PolylineEdgeViewWithGapsOnIntersections=P;var w=function(){function t(){this.minimalPointDistance=10}return t.prototype.render=function(t,e,n){if(n&&n.route&&t.parent instanceof y.SRoutableElement){var o=this.edgeRouterRegistry.get(t.parent.routerKind),r=void 0===n.route?this.edgeRouterRegistry.route(t.parent,n):n.route,i=o.getHandlePosition(t.parent,r,t);if(void 0!==i){var a=_.svg("circle",{"class-sprotty-routing-handle":!0,"class-selected":t.selected,"class-mouseover":t.hoverFeedback,cx:i.x,cy:i.y,r:this.getRadius()});return d.setAttr(a,"data-kind",t.kind),a}}return _.svg("g",null)},t.prototype.getRadius=function(){return 7},a([s.inject(h.EdgeRouterRegistry),c("design:type",h.EdgeRouterRegistry)],t.prototype,"edgeRouterRegistry",void 0),t=a([s.injectable()],t)}();e.SRoutingHandleView=w;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e){if(f.isEdgeLayoutable(t)||this.isVisible(t,e)){var n=_.svg("text",{"class-sprotty-label":!0},t.text),o=u.getSubType(t);return o&&d.setAttr(n,"class",o),n}},e=a([s.injectable()],e)}(l.ShapeView);e.SLabelView=O;var E=function(){function t(){}return t.prototype.render=function(t,e,n){var o="translate("+t.bounds.x+", "+t.bounds.y+")",r=_.svg("g",{transform:o,"class-sprotty-comp":"{true}"},e.renderChildren(t)),i=u.getSubType(t);return i&&d.setAttr(r,"class",i),r},t=a([s.injectable()],t)}();e.SCompartmentView=E},3090:function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),o(n(9672)),o(n(3787)),o(n(6691)),o(n(3971)),o(n(8480)),o(n(4633)),o(n(1638)),o(n(4051)),o(n(4588)),o(n(894)),o(n(9686)),o(n(4228)),o(n(6536)),o(n(1294)),o(n(8127)),o(n(3682)),o(n(9981)),o(n(2721)),o(n(594)),o(n(1856)),o(n(1886)),o(n(5504)),o(n(3152)),o(n(1267)),o(n(4034)),o(n(3552)),o(n(6901)),o(n(3921)),o(n(1469)),o(n(3834));var i=r(n(8973));e.defaultModule=i.default,o(n(9080)),o(n(320)),o(n(6921)),o(n(1229)),o(n(6483)),o(n(7900)),o(n(5944)),o(n(9179)),o(n(6659)),o(n(1211)),o(n(5975)),o(n(7463)),o(n(5960)),o(n(7565)),o(n(1545)),o(n(7619)),o(n(4784)),o(n(4698)),o(n(4552)),o(n(1793)),o(n(57)),o(n(1984)),o(n(4977)),o(n(3696)),o(n(181)),o(n(8167)),o(n(7812)),o(n(4898)),o(n(9240)),o(n(1432)),o(n(575)),o(n(6312)),o(n(3133)),o(n(4265)),o(n(8681)),o(n(197)),o(n(5056)),o(n(1704)),o(n(1948)),o(n(1087)),o(n(6193)),o(n(8132)),o(n(1235)),o(n(3263)),o(n(2099)),o(n(7749)),o(n(3292)),o(n(7310)),o(n(1039)),o(n(7635)),o(n(9807)),o(n(1915)),o(n(5955)),o(n(2379)),o(n(1072)),o(n(4238)),o(n(3705)),o(n(7946)),o(n(8865)),o(n(7040)),o(n(3803)),o(n(8848)),o(n(8487)),o(n(6789)),o(n(1455)),o(n(1945)),o(n(1085)),o(n(6651)),o(n(7217)),o(n(5483)),o(n(8773));var a=r(n(5029));e.graphModule=a.default;var c=r(n(9767));e.boundsModule=c.default;var s=r(n(274));e.buttonModule=s.default;var u=r(n(2587));e.commandPaletteModule=u.default;var d=r(n(3403));e.contextMenuModule=d.default;var l=r(n(1830));e.decorationModule=l.default;var p=r(n(4284));e.edgeIntersectionModule=p.default;var f=r(n(7619));e.edgeLayoutModule=f.default;var y=r(n(490));e.expandModule=y.default;var h=r(n(7985));e.exportModule=h.default;var g=r(n(9066));e.fadeModule=g.default;var _=r(n(5387));e.hoverModule=_.default;var m=r(n(1547));e.moveModule=m.default;var v=r(n(1380));e.openModule=v.default;var b=r(n(970));e.routingModule=b.default;var S=r(n(9251));e.selectModule=S.default;var P=r(n(1668));e.undoRedoModule=P.default;var w=r(n(2637));e.updateModule=w.default;var O=r(n(2001));e.viewportModule=O.default;var E=r(n(9446));e.zorderModule=E.default,o(n(9019)),o(n(6660)),o(n(1216)),o(n(7562)),o(n(3756)),o(n(8016)),o(n(5181)),o(n(5564)),o(n(2976)),o(n(6175)),o(n(2248)),o(n(7929)),o(n(1575)),o(n(2919)),o(n(5966));var R=r(n(4155));e.modelSourceModule=R.default,o(n(8126)),o(n(6040)),o(n(3199)),o(n(7368)),o(n(7326)),o(n(1384))},3756:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5181),u=n(9245),d=c(n(8581)),l=n(1469),p=n(9179),f=n(5564),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e){if(!(t instanceof f.ShapedPreRenderedElement)||this.isVisible(t,e)){var n=d.default(t.code);if(null!==n)return this.correctNamespace(n),n}},e.prototype.correctNamespace=function(t){"svg"!==t.sel&&"g"!==t.sel||l.setNamespace(t,"http://www.w3.org/2000/svg")},e=a([u.injectable()],e)}(p.ShapeView);e.PreRenderedView=y;var h=function(){function t(){}return t.prototype.render=function(t,e){var n=d.default(t.code);if(null!==n){var o=s.svg("g",null,s.svg("foreignObject",{requiredFeatures:"http://www.w3.org/TR/SVG11/feature#Extensibility",height:t.bounds.height,width:t.bounds.width,x:0,y:0},n),e.renderChildren(t));return l.setAttr(o,"class",t.type),l.setNamespace(n,t.namespace),o}},t=a([u.injectable()],t)}();e.ForeignObjectView=h},8016:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5181),a=n(9245),c=n(1469),s=function(){function t(){}return t.prototype.render=function(t,e){for(var n=i.html("div",null,e.renderChildren(t)),o=0,r=t.classes;o<r.length;o++){var a=r[o];c.setClass(n,a,!0)}return n},t=r([a.injectable()],t)}();e.HtmlRootView=s},5181:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4047),r=["hook","on","style","class","props","attrs","dataset"];function i(t,e,n){var o={};return n&&(o.ns=n),null===t||(r.forEach((function(e){t[e]&&(o[e]=t[e])})),Object.keys(t).forEach((function(n){if("key"!==n&&"classNames"!==n&&"selector"!==n){var r=n.indexOf("-");r>0?i(n.slice(0,r),n.slice(r+1),t[n]):o[n]||i(e,n,t[n])}}))),o;function i(t,e,n){(o[t]||(o[t]={}))[e]=n}}function a(t,e){return void 0===e&&(e="props"),function(n,r){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];return o.jsx(n,i(r,e,t),a)}}e.JSX=a;var c=a();e.html=c;var s=a("http://www.w3.org/2000/svg","attrs");e.svg=s},5564:function(t,e,n){"use strict";var o,r=this&&this.__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},o(t,e)},function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(3682),a=n(3199),c=n(1229),s=n(1235),u=n(7040),d=n(6660),l=n(9807),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.CircularNode=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.RectangularNode=f;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.DIAMOND_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SNode);e.DiamondNode=y;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.ELLIPTIC_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SPort);e.CircularPort=h;var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"anchorKind",{get:function(){return l.RECTANGULAR_ANCHOR_KIND},enumerable:!0,configurable:!0}),e}(d.SPort);e.RectangularPort=g;var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.classes=[],e}return r(e,t),e}(i.SModelRoot);e.HtmlRoot=_;var m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(i.SChildElement);e.PreRenderedElement=m;var v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.position=a.ORIGIN_POINT,e.size=a.EMPTY_DIMENSION,e.selected=!1,e.alignment=a.ORIGIN_POINT,e}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}},set:function(t){this.position={x:t.x,y:t.y},this.size={width:t.width,height:t.height}},enumerable:!0,configurable:!0}),e.DEFAULT_FEATURES=[s.moveFeature,c.boundsFeature,u.selectFeature,c.alignFeature],e}(m);e.ShapedPreRenderedElement=v;var b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return a.isValidDimension(this.size)?{x:this.position.x,y:this.position.y,width:this.size.width,height:this.size.height}:c.isBoundsAware(this.parent)?{x:this.position.x,y:this.position.y,width:this.parent.bounds.width,height:this.parent.bounds.height}:a.EMPTY_BOUNDS},enumerable:!0,configurable:!0}),e}(v);e.ForeignObjectElement=b},7562:function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(8973)),i=o(n(4155)),a=o(n(9767)),c=o(n(274)),s=o(n(2587)),u=o(n(3403)),d=o(n(1830)),l=o(n(7619)),p=n(57),f=o(n(490)),y=o(n(7985)),h=o(n(9066)),g=o(n(5387)),_=o(n(1547)),m=o(n(1380)),v=o(n(970)),b=o(n(9251)),S=o(n(1668)),P=o(n(2637)),w=o(n(2001)),O=o(n(9446));e.loadDefaultModules=function(t,e){var n=[r.default,i.default,a.default,c.default,s.default,u.default,d.default,p.edgeEditModule,l.default,f.default,y.default,h.default,g.default,p.labelEditModule,p.labelEditUiModule,_.default,m.default,v.default,b.default,S.default,P.default,w.default,O.default];if(e&&e.exclude)for(var o=0,E=e.exclude;o<E.length;o++){var R=E[o],T=n.indexOf(R);T>=0&&n.splice(T,1)}t.load.apply(t,n)}},2976:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var c=n(5181),s=n(6660),u=n(9179),d=n(3199),l=n(9245),p=function(){function t(){}return t.prototype.render=function(t,e,n){var o="scale("+t.zoom+") translate("+-t.scroll.x+","+-t.scroll.y+")";return c.svg("svg",null,c.svg("g",{transform:o},e.renderChildren(t)))},t=a([l.injectable()],t)}();e.SvgViewportView=p;var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e,n){if(this.isVisible(t,e)){var o=this.getRadius(t);return c.svg("g",null,c.svg("circle",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,r:o,cx:o,cy:o}),e.renderChildren(t))}},e.prototype.getRadius=function(t){var e=Math.min(t.size.width,t.size.height);return e>0?e/2:0},e=a([l.injectable()],e)}(u.ShapeView);e.CircularNodeView=f;var y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e,n){if(this.isVisible(t,e))return c.svg("g",null,c.svg("rect",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,x:"0",y:"0",width:Math.max(t.size.width,0),height:Math.max(t.size.height,0)}),e.renderChildren(t))},e=a([l.injectable()],e)}(u.ShapeView);e.RectangularNodeView=y;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.render=function(t,e,n){if(this.isVisible(t,e)){var o=new d.Diamond({height:Math.max(t.size.height,0),width:Math.max(t.size.width,0),x:0,y:0}),r=g(o.topPoint)+" "+g(o.rightPoint)+" "+g(o.bottomPoint)+" "+g(o.leftPoint);return c.svg("g",null,c.svg("polygon",{"class-sprotty-node":t instanceof s.SNode,"class-sprotty-port":t instanceof s.SPort,"class-mouseover":t.hoverFeedback,"class-selected":t.selected,points:r}),e.renderChildren(t))}},e=a([l.injectable()],e)}(u.ShapeView);function g(t){return t.x+","+t.y}e.DiamondNodeView=h;var _=function(){function t(){}return t.prototype.render=function(t,e){return c.svg("g",null)},t=a([l.injectable()],t)}();e.EmptyGroupView=_},8581:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(4047);function r(t){var e={},n=Object.keys(t).reduce((function(e,n){var o;if("style"!==n&&"class"!==n){var r=function(t){a||(a=document.createElement("div"));return t.replace(i,(function(t){return null===a?"":(a.innerHTML=t,null===a.textContent?"":a.textContent)}))}(t[n]);e?e[n]=r:((o={})[n]=r,e=o)}return e}),null);n&&(e.attrs=n);var o=function(t){var e=function(t,e){var n,o=e.split(":"),r=function(t){return""+(t=t.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}))).charAt(0).toLowerCase()+t.substring(1)}(o[0].trim());if(r){var i=o[1].replace("!important","").trim();t?t[r]=i:((n={})[r]=i,t=n)}return t};try{return t.style.split(";").reduce(e,null)}catch(t){return null}}(t);o&&(e.style=o);var r=function(t){var e=function(t,e){var n;return(e=e.trim())&&(t?t[e]=!0:((n={})[e]=!0,t=n)),t};try{return t.class.split(" ").reduce(e,null)}catch(t){return null}}(t);return r&&(e.class=r),e}var i=new RegExp("&[a-z0-9#]+;","gi"),a=null;var c=null,s=new Map,u=!1;function d(t,e){var n;switch(null!==e&&(n=s.get(e)),null==t?void 0:t.nodeType){case 1:if(void 0===n)return;n.children=n.children?n.children:[];for(var i=n.children,a=t.attributes,d={},l=0;l<a.length;l++){var p=a.item(l);p&&(d[p.name]=p.value)}var f=o.h(t.nodeName,r(d));i.push(f),s.set(t,f);break;case 3:var y=t.textContent;if(null!==y&&void 0!==n){n.children=n.children?n.children:[];var h=(i=n.children).length>0?i[i.length-1]:null;u||"string"==typeof h||null===h||void 0!==h.sel?i.push(o.vnode(void 0,void 0,void 0,y,void 0)):h.text=h.text+y,u=!1}break;case 8:u=!0;break;case 9:c=o.vnode(void 0,void 0,[],void 0,void 0),s.set(t,c)}}e.default=function(t){var e,n,r=new window.DOMParser;if(void 0===r||void 0===t||""===t)return null;var i,a,s=r.parseFromString(t,"application/xml");if("parsererror"===(null===(e=null==s?void 0:s.firstChild)||void 0===e?void 0:e.nodeName)){var l=""+(null===(n=null==s?void 0:s.firstChild)||void 0===n?void 0:n.textContent);return o.h("parsererror",[l])}return u=!1,c=null,function(t,e){var n=t,o=null,r=[],i=function(t){var e=t.firstChild;null!==e&&(o=t),n=e};for(e(n,o),i(n);;){for(;n;)r.push(n),e(n,o),i(n);var a=r.pop();if(n=a||null,!r.length)break;if(o=r[r.length-1],n){var c=n.nextSibling;null==c&&(o=r[r.length-1]),n=c}}}(s,d),null===c?null:void 0===(a=null==(i=c)?void 0:i.children)?null:1===a.length&&"string"!=typeof a[0]?a[0]:null}},6175:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__param||function(t,e){return function(n,o){e(n,o,t)}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(9245),d=n(4051),l=n(3834),p=n(2919),f=function(){this.kind=y.KIND};e.CommitModelAction=f;var y=function(t){function e(e){var n=t.call(this)||this;return n.action=e,n}return i(e,t),e.prototype.execute=function(t){return this.newModel=t.modelFactory.createSchema(t.root),this.doCommit(this.newModel,t.root,!0)},e.prototype.doCommit=function(t,e,n){var o=this,r=this.modelSource.commitModel(t);return r instanceof Promise?r.then((function(t){return n&&(o.originalModel=t),e})):(n&&(this.originalModel=r),e)},e.prototype.undo=function(t){return this.doCommit(this.originalModel,t.root,!1)},e.prototype.redo=function(t){return this.doCommit(this.newModel,t.root,!1)},e.KIND="commitModel",a([u.inject(l.TYPES.ModelSource),c("design:type",p.ModelSource)],e.prototype,"modelSource",void 0),e=a([u.injectable(),s(0,u.inject(l.TYPES.Action)),c("design:paramtypes",[f])],e)}(d.SystemCommand);e.CommitModelCommand=y},4155:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(9245),r=n(4588),i=n(3834),a=n(6175),c=n(2919),s=new o.ContainerModule((function(t,e,n){t(i.TYPES.ModelSourceProvider).toProvider((function(t){return function(){return new Promise((function(e){e(t.container.get(i.TYPES.ModelSource))}))}})),r.configureCommand({bind:t,isBound:n},a.CommitModelCommand),t(i.TYPES.IActionHandlerInitializer).toService(i.TYPES.ModelSource),t(c.ComputedBoundsApplicator).toSelf().inSingletonScope()}));e.default=s},2248:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},a.apply(this,arguments)},c=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},s=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var u=n(6837),d=n(9245),l=n(6536),p=n(3834),f=n(9080),y=n(4898),h=n(3133),g=n(197),_=n(3292),m=n(6789),v=n(2703),b=n(2919);function S(t){return v.hasOwnProperty(t,"action")}e.isActionMessage=S;var P=function(){function t(){this.kind=t.KIND}return t.KIND="serverStatus",t}();e.ServerStatusAction=P;var w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentRoot={type:"NONE",id:"ROOT"},e}return i(e,t),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.register(f.ComputedBoundsAction.KIND,this),e.register(f.RequestBoundsCommand.KIND,this),e.register(g.RequestPopupModelAction.KIND,this),e.register(y.CollapseExpandAction.KIND,this),e.register(y.CollapseExpandAllAction.KIND,this),e.register(_.OpenAction.KIND,this),e.register(P.KIND,this),this.clientId||(this.clientId=this.viewerOptions.baseDiv)},e.prototype.handle=function(t){this.handleLocally(t)&&this.forwardToServer(t)},e.prototype.forwardToServer=function(t){var e={clientId:this.clientId,action:t};this.logger.log(this,"sending",e),this.sendMessage(e)},e.prototype.messageReceived=function(t){var e=this,n="string"==typeof t?JSON.parse(t):t;S(n)&&n.action?n.clientId&&n.clientId!==this.clientId||(n.action.__receivedFromServer=!0,this.logger.log(this,"receiving",n),this.actionDispatcher.dispatch(n.action).then((function(){e.storeNewModel(n.action)}))):this.logger.error(this,"received data is not an action message",n)},e.prototype.handleLocally=function(t){switch(this.storeNewModel(t),t.kind){case f.ComputedBoundsAction.KIND:return this.handleComputedBounds(t);case l.RequestModelAction.KIND:return this.handleRequestModel(t);case f.RequestBoundsCommand.KIND:return!1;case h.ExportSvgAction.KIND:return this.handleExportSvgAction(t);case P.KIND:return this.handleServerStateAction(t)}return!t.__receivedFromServer},e.prototype.storeNewModel=function(t){if(t.kind===l.SetModelCommand.KIND||t.kind===m.UpdateModelCommand.KIND||t.kind===f.RequestBoundsCommand.KIND){var e=t.newRoot;e&&(this.currentRoot=e,t.kind!==l.SetModelCommand.KIND&&t.kind!==m.UpdateModelCommand.KIND||(this.lastSubmittedModelType=e.type))}},e.prototype.handleRequestModel=function(t){var e=a({needsClientLayout:this.viewerOptions.needsClientLayout,needsServerLayout:this.viewerOptions.needsServerLayout},t.options),n=a(a({},t),{options:e});return this.forwardToServer(n),!1},e.prototype.handleComputedBounds=function(t){if(this.viewerOptions.needsServerLayout)return!0;var e=this.currentRoot;return this.computedBoundsApplicator.apply(e,t),e.type===this.lastSubmittedModelType?this.actionDispatcher.dispatch(new m.UpdateModelAction(e)):this.actionDispatcher.dispatch(new l.SetModelAction(e)),this.lastSubmittedModelType=e.type,!1},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});return u.saveAs(e,"diagram.svg"),!1},e.prototype.handleServerStateAction=function(t){return!1},e.prototype.commitModel=function(t){var e=this.currentRoot;return this.currentRoot=t,e},c([d.inject(p.TYPES.ILogger),s("design:type",Object)],e.prototype,"logger",void 0),c([d.inject(b.ComputedBoundsApplicator),s("design:type",b.ComputedBoundsApplicator)],e.prototype,"computedBoundsApplicator",void 0),e=c([d.injectable()],e)}(b.ModelSource);e.DiagramServer=w},7929:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},c=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(e,"__esModule",{value:!0});var d=n(6837),l=n(9245),p=n(3834),f=n(6536),y=n(3682),h=n(8127),g=n(1294),_=n(9080),m=n(7217),v=n(3133),b=n(197),S=n(8487),P=n(6789),w=n(3803),O=n(2919),E=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.currentRoot=g.EMPTY_ROOT,e}return i(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this.currentRoot},set:function(t){this.setModel(t)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),e.register(_.ComputedBoundsAction.KIND,this),e.register(b.RequestPopupModelAction.KIND,this)},e.prototype.setModel=function(t){return this.currentRoot=t,this.submitModel(t,!1)},e.prototype.commitModel=function(t){var e=this.currentRoot;return this.currentRoot=t,e},e.prototype.updateModel=function(t){return void 0===t?this.submitModel(this.currentRoot,!0):(this.currentRoot=t,this.submitModel(t,!0))},e.prototype.getSelection=function(){return s(this,void 0,void 0,(function(){var t,e;return u(this,(function(n){switch(n.label){case 0:return[4,this.actionDispatcher.request(w.GetSelectionAction.create())];case 1:return t=n.sent(),(e=new y.SModelIndex).add(this.currentRoot),[2,e.all().filter((function(e){return t.selectedElementsIDs.indexOf(e.id)>=0}))]}}))}))},e.prototype.getViewport=function(){return s(this,void 0,void 0,(function(){var t;return u(this,(function(e){switch(e.label){case 0:return[4,this.actionDispatcher.request(m.GetViewportAction.create())];case 1:return[2,{scroll:(t=e.sent()).viewport.scroll,zoom:t.viewport.zoom,canvasBounds:t.canvasBounds}]}}))}))},e.prototype.submitModel=function(t,e,n){return s(this,void 0,void 0,(function(){var o,r;return u(this,(function(i){switch(i.label){case 0:return this.viewerOptions.needsClientLayout?[4,this.actionDispatcher.request(_.RequestBoundsAction.create(t))]:[3,3];case 1:return o=i.sent(),r=this.computedBoundsApplicator.apply(this.currentRoot,o),[4,this.doSubmitModel(t,!0,n,r)];case 2:return i.sent(),[3,5];case 3:return[4,this.doSubmitModel(t,e,n)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.doSubmitModel=function(t,e,n,o){return s(this,void 0,void 0,(function(){var r,i,a,c,s;return u(this,(function(u){switch(u.label){case 0:if(void 0===this.layoutEngine)return[3,6];u.label=1;case 1:return u.trys.push([1,5,,6]),(r=this.layoutEngine.layout(t,o))instanceof Promise?[4,r]:[3,3];case 2:return t=u.sent(),[3,4];case 3:void 0!==r&&(t=r),u.label=4;case 4:return[3,6];case 5:return i=u.sent(),this.logger.error(this,i.toString(),i.stack),[3,6];case 6:return a=this.lastSubmittedModelType,this.lastSubmittedModelType=t.type,n&&n.kind===f.RequestModelAction.KIND&&n.requestId?(c=n,[4,this.actionDispatcher.dispatch(new f.SetModelAction(t,c.requestId))]):[3,8];case 7:return u.sent(),[3,12];case 8:return e&&t.type===a?(s=Array.isArray(e)?e:t,[4,this.actionDispatcher.dispatch(new P.UpdateModelAction(s,!0,n))]):[3,10];case 9:return u.sent(),[3,12];case 10:return[4,this.actionDispatcher.dispatch(new f.SetModelAction(t))];case 11:u.sent(),u.label=12;case 12:return[2]}}))}))},e.prototype.applyMatches=function(t){var e=this.currentRoot;return S.applyMatches(e,t),this.submitModel(e,t)},e.prototype.addElements=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var r=o[n];void 0!==r.element&&void 0!==r.parentId?e.push({right:r.element,rightParentId:r.parentId}):void 0!==r.id&&e.push({right:r,rightParentId:this.currentRoot.id})}return this.applyMatches(e)},e.prototype.removeElements=function(t){var e=[],n=new y.SModelIndex;n.add(this.currentRoot);for(var o=0,r=t;o<r.length;o++){var i,a=r[o];if(void 0!==a.elementId&&void 0!==a.parentId)void 0!==(i=n.getById(a.elementId))&&e.push({left:i,leftParentId:a.parentId});else void 0!==(i=n.getById(a))&&e.push({left:i,leftParentId:this.currentRoot.id})}return this.applyMatches(e)},e.prototype.handle=function(t){switch(t.kind){case f.RequestModelAction.KIND:this.handleRequestModel(t);break;case _.ComputedBoundsAction.KIND:this.computedBoundsApplicator.apply(this.currentRoot,t);break;case b.RequestPopupModelAction.KIND:this.handleRequestPopupModel(t);break;case v.ExportSvgAction.KIND:this.handleExportSvgAction(t)}},e.prototype.handleRequestModel=function(t){this.submitModel(this.currentRoot,!1,t)},e.prototype.handleRequestPopupModel=function(t){if(void 0!==this.popupModelProvider){var e=h.findElement(this.currentRoot,t.elementId),n=this.popupModelProvider.getPopupModel(t,e);void 0!==n&&(n.canvasBounds=t.bounds,this.actionDispatcher.dispatch(new b.SetPopupModelAction(n,t.requestId)))}},e.prototype.handleExportSvgAction=function(t){var e=new Blob([t.svg],{type:"text/plain;charset=utf-8"});d.saveAs(e,"diagram.svg")},a([l.inject(p.TYPES.ILogger),c("design:type",Object)],e.prototype,"logger",void 0),a([l.inject(O.ComputedBoundsApplicator),c("design:type",O.ComputedBoundsApplicator)],e.prototype,"computedBoundsApplicator",void 0),a([l.inject(p.TYPES.IPopupModelProvider),l.optional(),c("design:type",Object)],e.prototype,"popupModelProvider",void 0),a([l.inject(p.TYPES.IModelLayoutEngine),l.optional(),c("design:type",Object)],e.prototype,"layoutEngine",void 0),e=a([l.injectable()],e)}(O.ModelSource);e.LocalModelSource=E},1575:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(7326),u=n(3834),d=function(){function t(e,n,o,r,i){this.severity=e,this.time=n,this.caller=o,this.message=r,this.params=i,this.kind=t.KIND}return t.KIND="logging",t}();e.LoggingAction=d;var l=function(){function t(){}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.error&&this.forward(t,e,s.LogLevel.error,n)},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.warn&&this.forward(t,e,s.LogLevel.warn,n)},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];this.logLevel>=s.LogLevel.info&&this.forward(t,e,s.LogLevel.info,n)},t.prototype.log=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(this.logLevel>=s.LogLevel.log)try{var i="object"===o(t)?t.constructor.name:String(t);console.log.apply(t,a([i+": "+e],n))}catch(t){}},t.prototype.forward=function(t,e,n,r){var i=new Date,a=new d(s.LogLevel[n],i.toLocaleTimeString(),"object"===o(t)?t.constructor.name:String(t),e,r.map((function(t){return JSON.stringify(t)})));this.modelSourceProvider().then((function(n){try{n.handle(a)}catch(n){try{console.log.apply(t,[e,a,n])}catch(t){}}}))},r([c.inject(u.TYPES.ModelSourceProvider),i("design:type",Function)],t.prototype,"modelSourceProvider",void 0),r([c.inject(u.TYPES.LogLevel),i("design:type",Number)],t.prototype,"logLevel",void 0),t=r([c.injectable()],t)}();e.ForwardingLogger=l},2919:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)},i=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},a=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=n(6536),u=n(3834),d=n(3133),l=n(3682),p=function(){function t(){}return t.prototype.initialize=function(t){t.register(s.RequestModelAction.KIND,this),t.register(d.ExportSvgAction.KIND,this)},i([c.inject(u.TYPES.IActionDispatcher),a("design:type",Object)],t.prototype,"actionDispatcher",void 0),i([c.inject(u.TYPES.ViewerOptions),a("design:type",Object)],t.prototype,"viewerOptions",void 0),t=i([c.injectable()],t)}();e.ModelSource=p;var f=function(){function t(){}return t.prototype.apply=function(t,e){var n=new l.SModelIndex;n.add(t);for(var o=0,r=e.bounds;o<r.length;o++){var i=r[o];void 0!==(s=n.getById(i.elementId))&&this.applyBounds(s,i.newPosition,i.newSize)}if(void 0!==e.alignments)for(var a=0,c=e.alignments;a<c.length;a++){var s,u=c[a];void 0!==(s=n.getById(u.elementId))&&this.applyAlignment(s,u.newAlignment)}return n},t.prototype.applyAlignment=function(t,e){t.alignment={x:e.x,y:e.y}},t.prototype.applyBounds=function(t,e,n){var o=t;e&&(o.position=r({},e)),o.size=r({},n)},t=i([c.injectable()],t)}();e.ComputedBoundsApplicator=f},5966:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r,i=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},r(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),a=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var c=n(9245),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.listen=function(t){var e=this;t.addEventListener("message",(function(t){e.messageReceived(t.data)})),t.addEventListener("error",(function(t){e.logger.error(e,"error event received",t)})),this.webSocket=t},e.prototype.disconnect=function(){this.webSocket&&(this.webSocket.close(),this.webSocket=void 0)},e.prototype.sendMessage=function(t){if(!this.webSocket)throw new Error("WebSocket is not connected");this.webSocket.send(JSON.stringify(t))},e=a([c.injectable()],e)}(n(2248).DiagramServer);e.WebSocketDiagramServer=s},9029:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};e.Deferred=n},8126:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3199);function r(){return-1!==window.navigator.userAgent.indexOf("Mac")}e.isCtrlOrCmd=function(t){return r()?t.metaKey:t.ctrlKey},e.isMac=r,e.isCrossSite=function(t){if(t&&"undefined"!=typeof window&&window.location){var e="";return window.location.protocol&&(e+=window.location.protocol+"//"),window.location.host&&(e+=window.location.host),e.length>0&&!t.startsWith(e)}return!1},e.getWindowScroll=function(){return"undefined"==typeof window?o.ORIGIN_POINT:{x:window.pageXOffset,y:window.pageYOffset}},e.hitsMouseEvent=function(t,e){var n=t.getBoundingClientRect();return e.clientX>=n.left&&e.clientX<=n.right&&e.clientY>=n.top&&e.clientY<=n.bottom}},6040:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rgb=function(t,e,n){return{red:t,green:e,blue:n}},e.toSVG=function(t){return"rgb("+t.red+","+t.green+","+t.blue+")"};var n=function(){function t(t){this.stops=t}return t.prototype.getColor=function(t){t=Math.max(0,Math.min(.99999999,t));var e=Math.floor(t*this.stops.length);return this.stops[e]},t}();e.ColorMap=n},3199:(t,e)=>{"use strict";function n(t,e){return{x:t.x+e.x,y:t.y+e.y}}function o(t,e){return{x:t.x-e.x,y:t.y-e.y}}function r(t,e){return t.x===e.x&&t.y===e.y}function i(t){return t.width>=0&&t.height>=0}function a(t){return{x:t.x+(t.width>=0?.5*t.width:0),y:t.y+(t.height>=0?.5*t.height:0)}}function c(t){var n=s(t);return 0===n||1===n?e.ORIGIN_POINT:{x:t.x/n,y:t.y/n}}function s(t){return Math.sqrt(Math.pow(t.x,2)+Math.pow(t.y,2))}Object.defineProperty(e,"__esModule",{value:!0}),e.ORIGIN_POINT=Object.freeze({x:0,y:0}),e.add=n,e.subtract=o,e.pointEquals=r,e.EMPTY_DIMENSION=Object.freeze({width:-1,height:-1}),e.isValidDimension=i,e.EMPTY_BOUNDS=Object.freeze({x:0,y:0,width:-1,height:-1}),e.isBounds=function(t){return"x"in t&&"y"in t&&"width"in t&&"height"in t},e.combine=function(t,n){if(!i(t))return i(n)?n:e.EMPTY_BOUNDS;if(!i(n))return t;var o=Math.min(t.x,n.x),r=Math.min(t.y,n.y);return{x:o,y:r,width:Math.max(t.x+(t.width>=0?t.width:0),n.x+(n.width>=0?n.width:0))-o,height:Math.max(t.y+(t.height>=0?t.height:0),n.y+(n.height>=0?n.height:0))-r}},e.translate=function(t,e){return{x:t.x+e.x,y:t.y+e.y,width:t.width,height:t.height}},e.center=a,e.centerOfLine=function(t,e){return a({x:t.x>e.x?e.x:t.x,y:t.y>e.y?e.y:t.y,width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)})},e.includes=function(t,e){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},function(t){t[t.left=0]="left",t[t.right=1]="right",t[t.up=2]="up",t[t.down=3]="down"}(e.Direction||(e.Direction={})),e.euclideanDistance=function(t,e){var n=e.x-t.x,o=e.y-t.y;return Math.sqrt(n*n+o*o)},e.manhattanDistance=function(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},e.maxDistance=function(t,e){return Math.max(Math.abs(e.x-t.x),Math.abs(e.y-t.y))},e.angleOfPoint=function(t){return Math.atan2(t.y,t.x)},e.angleBetweenPoints=function(t,e){var n=Math.sqrt((t.x*t.x+t.y*t.y)*(e.x*e.x+e.y*e.y));if(isNaN(n)||0===n)return NaN;var o=t.x*e.x+t.y*e.y;return Math.acos(o/n)},e.shiftTowards=function(t,e,r){var i=c(o(e,t));return n(t,{x:i.x*r,y:i.y*r})},e.normalize=c,e.magnitude=s,e.toDegrees=function(t){return 180*t/Math.PI},e.toRadians=function(t){return t*Math.PI/180},e.almostEquals=function(t,e){return Math.abs(t-e)<.001},e.linear=function(t,e,n){return{x:(1-n)*t.x+n*e.x,y:(1-n)*t.y+n*e.y}};var u=function(){function t(t){this.bounds=t}return Object.defineProperty(t.prototype,"topPoint",{get:function(){return{x:this.bounds.x+this.bounds.width/2,y:this.bounds.y}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightPoint",{get:function(){return{x:this.bounds.x+this.bounds.width,y:this.bounds.y+this.bounds.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomPoint",{get:function(){return{x:this.bounds.x+this.bounds.width/2,y:this.bounds.y+this.bounds.height}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftPoint",{get:function(){return{x:this.bounds.x,y:this.bounds.y+this.bounds.height/2}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topRightSideLine",{get:function(){return new d(this.topPoint,this.rightPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topLeftSideLine",{get:function(){return new d(this.topPoint,this.leftPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomRightSideLine",{get:function(){return new d(this.bottomPoint,this.rightPoint)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottomLeftSideLine",{get:function(){return new d(this.bottomPoint,this.leftPoint)},enumerable:!0,configurable:!0}),t.prototype.closestSideLine=function(t){var e=a(this.bounds);return t.x>e.x?t.y>e.y?this.bottomRightSideLine:this.topRightSideLine:t.y>e.y?this.bottomLeftSideLine:this.topLeftSideLine},t}();e.Diamond=u;var d=function(){function t(t,e){this.p1=t,this.p2=e}return Object.defineProperty(t.prototype,"a",{get:function(){return this.p1.y-this.p2.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.p2.x-this.p1.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this.p2.x*this.p1.y-this.p1.x*this.p2.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"angle",{get:function(){return Math.atan2(-this.a,this.b)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slope",{get:function(){if(0!==this.b)return this.a/this.b},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"slopeOrMax",{get:function(){return void 0===this.slope?Number.MAX_SAFE_INTEGER:this.slope},enumerable:!0,configurable:!0}),t.prototype.intersection=function(t){if(!this.hasIndistinctPoints(t)){var e=this.p1.x,n=this.p1.y,o=this.p2.x,r=this.p2.y,i=t.p1.x,a=t.p1.y,c=t.p2.x,s=t.p2.y,u=(s-a)*(o-e)-(c-i)*(r-n);if(0!==u){var d=(c-i)*(n-a)-(s-a)*(e-i),l=(o-e)*(n-a)-(r-n)*(e-i);if(0!==d||0!==l){var p=d/u,f=l/u;if(!(p<0||p>1||f<0||f>1))return{x:e+p*(o-e),y:n+p*(r-n)}}}}},t.prototype.hasIndistinctPoints=function(t){return r(this.p1,t.p1)||r(this.p1,t.p2)||r(this.p2,t.p1)||r(this.p2,t.p2)},t}();e.PointToPointLine=d,e.intersection=function(t,e){return{x:(t.c*e.b-e.c*t.b)/(t.a*e.b-e.a*t.b),y:(t.a*e.c-e.a*t.c)/(t.a*e.b-e.a*t.b)}}},7368:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isInjectable=function(t){return void 0!==Reflect.getMetadata("inversify:paramtypes",t)}},1933:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.startFn=t,this.nextFn=e}return t.prototype[Symbol.iterator]=function(){var t,e=this,n=((t={state:this.startFn(),next:function(){return e.nextFn(n.state)}})[Symbol.iterator]=function(){return n},t);return n},t.prototype.filter=function(t){return o(this,t)},t.prototype.map=function(t){return r(this,t)},t.prototype.forEach=function(t){var e,n=this[Symbol.iterator](),o=0;do{void 0!==(e=n.next()).value&&t(e.value,o),o++}while(!e.done)},t.prototype.indexOf=function(t){var e,n=this[Symbol.iterator](),o=0;do{if((e=n.next()).value===t)return o;o++}while(!e.done);return-1},t}();function o(t,e){return new n((function(){return i(t)}),(function(t){var n;do{n=t.next()}while(!n.done&&!e(n.value));return n}))}function r(t,o){return new n((function(){return i(t)}),(function(t){var n=t.next(),r=n.done,i=n.value;return r?e.DONE_RESULT:{done:!1,value:o(i)}}))}function i(t){var n=t[Symbol.iterator];if("function"==typeof n)return n.call(t);var o=t.length;return"number"==typeof o&&o>=0?new a(t):{next:function(){return e.DONE_RESULT}}}e.FluentIterableImpl=n,e.toArray=function(t){if(t.constructor===Array)return t;var e=[];return t.forEach((function(t){return e.push(t)})),e},e.DONE_RESULT=Object.freeze({done:!0,value:void 0}),e.filterIterable=o,e.mapIterable=r;var a=function(){function t(t){this.array=t,this.index=0}return t.prototype.next=function(){return this.index<this.array.length?{done:!1,value:this.array[this.index++]}:e.DONE_RESULT},t.prototype[Symbol.iterator]=function(){return this},t}()},6903:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8126);function r(t){if(t.keyCode){var e=i[t.keyCode];if(void 0!==e)return e}return t.code}e.matchesKeystroke=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(r(t)!==e)return!1;if(o.isMac()){if(t.ctrlKey!==n.findIndex((function(t){return"ctrl"===t}))>=0)return!1;if(t.metaKey!==n.findIndex((function(t){return"meta"===t||"ctrlCmd"===t}))>=0)return!1}else{if(t.ctrlKey!==n.findIndex((function(t){return"ctrl"===t||"ctrlCmd"===t}))>=0)return!1;if(t.metaKey!==n.findIndex((function(t){return"meta"===t}))>=0)return!1}return t.altKey===n.findIndex((function(t){return"alt"===t}))>=0&&t.shiftKey===n.findIndex((function(t){return"shift"===t}))>=0},e.getActualCode=r;var i=new Array(256);!function(){function t(t,e){void 0===i[e]&&(i[e]=t)}t("Pause",3),t("Backspace",8),t("Tab",9),t("Enter",13),t("ShiftLeft",16),t("ShiftRight",16),t("ControlLeft",17),t("ControlRight",17),t("AltLeft",18),t("AltRight",18),t("CapsLock",20),t("Escape",27),t("Space",32),t("PageUp",33),t("PageDown",34),t("End",35),t("Home",36),t("ArrowLeft",37),t("ArrowUp",38),t("ArrowRight",39),t("ArrowDown",40),t("Insert",45),t("Delete",46),t("Digit1",49),t("Digit2",50),t("Digit3",51),t("Digit4",52),t("Digit5",53),t("Digit6",54),t("Digit7",55),t("Digit8",56),t("Digit9",57),t("Digit0",48),t("KeyA",65),t("KeyB",66),t("KeyC",67),t("KeyD",68),t("KeyE",69),t("KeyF",70),t("KeyG",71),t("KeyH",72),t("KeyI",73),t("KeyJ",74),t("KeyK",75),t("KeyL",76),t("KeyM",77),t("KeyN",78),t("KeyO",79),t("KeyP",80),t("KeyQ",81),t("KeyR",82),t("KeyS",83),t("KeyT",84),t("KeyU",85),t("KeyV",86),t("KeyW",87),t("KeyX",88),t("KeyY",89),t("KeyZ",90),t("OSLeft",91),t("MetaLeft",91),t("OSRight",92),t("MetaRight",92),t("ContextMenu",93),t("Numpad0",96),t("Numpad1",97),t("Numpad2",98),t("Numpad3",99),t("Numpad4",100),t("Numpad5",101),t("Numpad6",102),t("Numpad7",103),t("Numpad8",104),t("Numpad9",105),t("NumpadMultiply",106),t("NumpadAdd",107),t("NumpadSeparator",108),t("NumpadSubtract",109),t("NumpadDecimal",110),t("NumpadDivide",111),t("F1",112),t("F2",113),t("F3",114),t("F4",115),t("F5",116),t("F6",117),t("F7",118),t("F8",119),t("F9",120),t("F10",121),t("F11",122),t("F12",123),t("F13",124),t("F14",125),t("F15",126),t("F16",127),t("F17",128),t("F18",129),t("F19",130),t("F20",131),t("F21",132),t("F22",133),t("F23",134),t("F24",135),t("NumLock",144),t("ScrollLock",145),t("Semicolon",186),t("Equal",187),t("Comma",188),t("Minus",189),t("Period",190),t("Slash",191),t("Backquote",192),t("IntlRo",193),t("BracketLeft",219),t("Backslash",220),t("BracketRight",221),t("Quote",222),t("IntlYen",255)}()},7326:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c},i=this&&this.__metadata||function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0});var c,s=n(9245),u=n(3834);!function(t){t[t.none=0]="none",t[t.error=1]="error",t[t.warn=2]="warn",t[t.info=3]="info",t[t.log=4]="log"}(c=e.LogLevel||(e.LogLevel={}));var d=function(){function t(){this.logLevel=c.none}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o]},t=r([s.injectable()],t)}();e.NullLogger=d;var l=function(){function t(){this.logLevel=c.log,this.viewOptions={baseDiv:""}}return t.prototype.error=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=c.error)try{console.error.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.warn=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=c.warn)try{console.warn.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.info=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=c.info)try{console.info.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.log=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(this.logLevel>=c.log)try{console.log.apply(t,this.consoleArguments(t,e,n))}catch(t){}},t.prototype.consoleArguments=function(t,e,n){var r;r="object"===o(t)?t.constructor.name:t;var i=new Date;return a([i.toLocaleTimeString()+" "+this.viewOptions.baseDiv+" "+r+": "+e],n)},r([s.inject(u.TYPES.LogLevel),i("design:type",Number)],t.prototype,"logLevel",void 0),r([s.inject(u.TYPES.ViewerOptions),i("design:type",Object)],t.prototype,"viewOptions",void 0),t=r([s.injectable()],t)}();e.ConsoleLogger=l},2703:(t,e)=>{"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){return"object"===n(t)&&null!==t}Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=o,e.hasOwnProperty=function(t,e,r){return!(!o(t)||!Object.prototype.hasOwnProperty.call(t,e))&&("string"==typeof r?n(t[e])===r:"function"!=typeof r||r(t[e]))},e.safeAssign=function(t,e){return Object.assign(t,e)}},1384:function(t,e,n){"use strict";function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var r=this&&this.__decorate||function(t,e,n,r){var i,a=arguments.length,c=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===("undefined"==typeof Reflect?"undefined":o(Reflect))&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(a<3?i(c):a>3?i(e,n,c):i(e,n))||c);return a>3&&c&&Object.defineProperty(e,n,c),c};Object.defineProperty(e,"__esModule",{value:!0});var i=n(9245),a=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t,e){var n=this.elements.get(t);return n?new n(e):this.missing(t,e)},t.prototype.missing=function(t,e){throw new Error("Unknown registry key: "+t)},t=r([i.injectable()],t)}();e.ProviderRegistry=a;var c=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t,e){var n=this.elements.get(t);return n?n(e):this.missing(t,e)},t.prototype.missing=function(t,e){throw new Error("Unknown registry key: "+t)},t=r([i.injectable()],t)}();e.FactoryRegistry=c;var s=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");if(this.hasKey(t))throw new Error("Key is already registered: "+t);this.elements.set(t,e)},t.prototype.deregister=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.hasKey=function(t){return this.elements.has(t)},t.prototype.get=function(t){var e=this.elements.get(t);return e||this.missing(t)},t.prototype.missing=function(t){throw new Error("Unknown registry key: "+t)},t=r([i.injectable()],t)}();e.InstanceRegistry=s;var u=function(){function t(){this.elements=new Map}return t.prototype.register=function(t,e){if(void 0===t)throw new Error("Key is undefined");var n=this.elements.get(t);void 0!==n?n.push(e):this.elements.set(t,[e])},t.prototype.deregisterAll=function(t){if(void 0===t)throw new Error("Key is undefined");this.elements.delete(t)},t.prototype.get=function(t){var e=this.elements.get(t);return void 0!==e?e:[]},t=r([i.injectable()],t)}();e.MultiInstanceRegistry=u},9934:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var o=n(6674),r=n(6867);function i(t,e,n,r,i){var a={},c="number"==typeof i,s=void 0!==i&&c?i.toString():n;if(c&&void 0!==n)throw new Error(o.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var u=a[s];if(Array.isArray(u))for(var d=0,l=u;d<l.length;d++){var p=l[d];if(p.key===r.key)throw new Error(o.DUPLICATED_METADATA+" "+p.key.toString())}else u=[];u.push(r),a[s]=u,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function c(t,e){return function(n,o){e(n,o,t)}}e.tagParameter=function(t,e,n,o){i(r.TAGGED,t,e,o,n)},e.tagProperty=function(t,e,n){i(r.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([c(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},5744:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var o=n(6674),r=n(6867),i=n(7738),a=n(9934),c=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=c,e.inject=function(t){return function(e,n,c){if(void 0===t)throw new Error(o.UNDEFINED_INJECT_ANNOTATION(e.name));var s=new i.Metadata(r.INJECT_TAG,t);"number"==typeof c?a.tagParameter(e,n,c,s):a.tagProperty(e,n,s)}}},4315:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var o=n(6674),r=n(6867);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,t))throw new Error(o.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(r.PARAM_TYPES,e,t),t}}},1693:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var o=n(6867),r=n(7738),i=n(9934);e.multiInject=function(t){return function(e,n,a){var c=new r.Metadata(o.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,c):i.tagProperty(e,n,c)}}},8085:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var o=n(6867),r=n(7738),i=n(9934);e.named=function(t){return function(e,n,a){var c=new r.Metadata(o.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,c):i.tagProperty(e,n,c)}}},6515:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var o=n(6867),r=n(7738),i=n(9934);e.optional=function(){return function(t,e,n){var a=new r.Metadata(o.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},7014:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var o=n(6674),r=n(6867),i=n(7738);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(r.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,t.constructor))throw new Error(o.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,a,t.constructor)}}},2052:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var o=n(7738),r=n(9934);e.tagged=function(t,e){return function(n,i,a){var c=new o.Metadata(t,e);"number"==typeof a?r.tagParameter(n,i,a,c):r.tagProperty(n,i,c)}}},5638:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var o=n(6867),r=n(7738),i=n(9934);e.targetName=function(t){return function(e,n,a){var c=new r.Metadata(o.NAME_TAG,t);i.tagParameter(e,n,a,c)}}},6757:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var o=n(6867),r=n(7738),i=n(9934);e.unmanaged=function(){return function(t,e,n){var a=new r.Metadata(o.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},4290:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var o=n(8421),r=n(7791),i=function(){function t(t,e){this.id=r.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=o.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=e.scope===o.BindingScopeEnum.Singleton&&this.activated,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},3184:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},6674:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:";e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.";e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class";e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]};e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},8421:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6867:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NON_CUSTOM_TAG_KEYS=e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct",e.NON_CUSTOM_TAG_KEYS=[e.INJECT_TAG,e.MULTI_INJECT_TAG,e.NAME_TAG,e.UNMANAGED_TAG,e.NAMED_TAG,e.OPTIONAL_TAG]},1389:function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}},i=this&&this.__spreadArray||function(t,e){for(var n=0,o=e.length,r=t.length;n<o;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var a=n(4290),c=n(6674),s=n(8421),u=n(6867),d=n(1377),l=n(6311),p=n(1927),f=n(1860),y=n(7791),h=n(5800),g=n(5700),_=n(175),m=function(){function t(t){this._appliedMiddleware=[];var e=t||{};if("object"!=typeof e)throw new Error(""+c.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=s.BindingScopeEnum.Transient;else if(e.defaultScope!==s.BindingScopeEnum.Singleton&&e.defaultScope!==s.BindingScopeEnum.Transient&&e.defaultScope!==s.BindingScopeEnum.Request)throw new Error(""+c.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+c.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+c.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=y.id(),this._bindingDictionary=new _.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new d.MetadataReader}return t.merge=function(e,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];var a=new t,c=i([e,n],o).map((function(t){return l.getBindingDictionary(t)})),s=l.getBindingDictionary(a);function u(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return c.forEach((function(t){u(t,s)})),a},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),o=0,r=t;o<r.length;o++){var i=r[o],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,o,i,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,o=t,r.label=1;case 1:return n<o.length?(i=o[n],a=e(i.id),[4,i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=o(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||s.BindingScopeEnum.Transient,n=new a.Binding(t,e);return this._bindingDictionary.add(t,n),new f.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(c.CANNOT_UNBIND+" "+h.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new _.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,u.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var o=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),i=l.createMockRequest(this,t,e,n);o=r.some((function(t){return t.constraint(i)}))}return!o&&this.parent&&(o=this.parent.isBoundTagged(t,e,n)),o},t.prototype.snapshot=function(){this._snapshots.push(g.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(c.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._appliedMiddleware=this._appliedMiddleware.concat(t);var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,s.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,u.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,s.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,s.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,u.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),this._appliedMiddleware.forEach((function(t){e.applyMiddleware(t)})),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(o){var r=t.rebind.bind(t)(o);return e(r,n),r}};return function(o){return{bindFunction:(r=o,function(n){var o=t.bind.bind(t)(n);return e(o,r),o}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(o),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,n,o,r,i){var a=null,s={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:r,serviceIdentifier:o,targetType:n,value:i};if(this._middleware){if(null==(a=this._middleware(s)))throw new Error(c.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(s);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=l.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),p.resolve(n)}},t}();e.Container=m},3244:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var o=n(7791),r=function(t){this.id=o.id(),this.registry=t};e.ContainerModule=r;var i=function(t){this.id=o.id(),this.registry=t};e.AsyncContainerModule=i},5700:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var n=function(){function t(){}return t.of=function(e,n){var o=new t;return o.bindings=e,o.middleware=n,o},t}();e.ContainerSnapshot=n},175:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var o=n(6674),r=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(o.NULL_ARGUMENT);if(null==e)throw new Error(o.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(o.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(o.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,o){var r=n.filter((function(e){return!t(e)}));r.length>0?e._map.set(o,r):e._map.delete(o)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=r},6700:(t,e,n)=>{"use strict";e.b2=void 0,n(6867);var o=n(1389);var r=n(8421);var i=n(3244);var a=n(4315);Object.defineProperty(e,"b2",{enumerable:!0,get:function(){return a.injectable}});var c=n(2052);var s=n(8085);var u=n(5744);var d=n(6515);var l=n(6757);var p=n(1693);var f=n(5638);var y=n(7014);var h=n(1377);var g=n(7791);var _=n(9934);var m=n(758);var v=n(5800);var b=n(600)},5228:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var o=n(7791),r=function(){function t(t){this.id=o.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=r},7738:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var o=n(6867),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===o.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=r},1377:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var o=n(6867),r=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(o.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(o.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(o.TAGGED_PROP,t)||[]},t}();e.MetadataReader=r},5314:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var n=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=n},6311:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var o=n(3184),r=n(6674),i=n(8421),a=n(6867),c=n(5265),s=n(5800),u=n(5228),d=n(7738),l=n(5314),p=n(6e3),f=n(6748),y=n(8924);function h(t){return t._bindingDictionary}function g(t,e,n,i,a){var c=m(n.container,a.serviceIdentifier),u=[];return c.length===o.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),c=m(n.container,a.serviceIdentifier)),u=e?c:c.filter((function(t){var e=new f.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case o.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=s.getServiceIdentifierAsString(t),c=r.NOT_REGISTERED;throw c+=s.listMetadataForTarget(a,n),c+=s.listRegisteredBindingsForServiceIdentifier(i,a,m),new Error(c);case o.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case o.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=s.getServiceIdentifierAsString(t),c=r.AMBIGUOUS_MATCH+" "+a;throw c+=s.listRegisteredBindingsForServiceIdentifier(i,a,m),new Error(c)}}(a.serviceIdentifier,u,a,n.container),u}function _(t,e,n,o,a,c){var s,u;if(null===a){s=g(t,e,o,null,c),u=new f.Request(n,o,null,s,c);var d=new l.Plan(o,u);o.addPlan(d)}else s=g(t,e,o,a,c),u=a.addChildRequest(c.serviceIdentifier,s,c);s.forEach((function(e){var n=null;if(c.isArray())n=u.addChildRequest(e.serviceIdentifier,e,c);else{if(e.cache)return;n=u}if(e.type===i.BindingTypeEnum.Instance&&null!==e.implementationType){var a=p.getDependencies(t,e.implementationType);if(!o.container.options.skipBaseClassChecks){var s=p.getBaseClassDependencyCount(t,e.implementationType);if(a.length<s){var d=r.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(e.implementationType));throw new Error(d)}}a.forEach((function(e){_(t,!1,e.serviceIdentifier,o,n,e)}))}}))}function m(t,e){var n=[],o=h(t);return o.hasKey(e)?n=o.get(e):null!==t.parent&&(n=m(t.parent,e)),n}e.getBindingDictionary=h,e.plan=function(t,e,n,o,r,i,l,p){void 0===p&&(p=!1);var f=new u.Context(e),h=function(t,e,n,o,r,i){var c=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,s=new d.Metadata(c,n),u=new y.Target(e,o,n,s);if(void 0!==r){var l=new d.Metadata(r,i);u.metadata.push(l)}return u}(n,o,r,"",i,l);try{return _(t,p,r,f,null,h),f}catch(t){throw c.isStackOverflowExeption(t)&&f.plan&&s.circularDependencyToException(f.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,o){var r=new y.Target(i.TargetTypeEnum.Variable,"",e,new d.Metadata(n,o)),a=new u.Context(t);return new f.Request(e,a,null,[],r)}},8460:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var n=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=n},6e3:function(t,e,n){"use strict";var o=this&&this.__spreadArray||function(t,e){for(var n=0,o=e.length,r=t.length;n<o;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var r=n(5744),i=n(6674),a=n(8421),c=n(6867),s=n(5800);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return s.getFunctionName}});var u=n(8924);function d(t,e,n,r){var a=t.getConstructorMetadata(n),c=a.compilerGeneratedMetadata;if(void 0===c){var s=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var u=a.userGeneratedMetadata,d=Object.keys(u),f=0===n.length&&d.length>0,y=d.length>n.length,h=function(t,e,n,o,r){for(var i=[],a=0;a<r;a++){var c=l(a,t,e,n,o);null!==c&&i.push(c)}return i}(r,e,c,u,f||y?d.length:n.length),g=p(t,n);return o(o([],h),g)}function l(t,e,n,o,c){var s=c[t.toString()]||[],d=f(s),l=!0!==d.unmanaged,p=o[t],y=d.inject||d.multiInject;if((p=y||p)instanceof r.LazyServiceIdentifer&&(p=p.unwrap()),l){if(!e&&(p===Object||p===Function||void 0===p)){var h=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(h)}var g=new u.Target(a.TargetTypeEnum.ConstructorArgument,d.targetName,p);return g.metadata=s,g}return null}function p(t,e){for(var n=t.getPropertiesMetadata(e),r=[],i=0,c=Object.keys(n);i<c.length;i++){var s=c[i],d=n[s],l=f(n[s]),y=l.targetName||s,h=l.inject||l.multiInject,g=new u.Target(a.TargetTypeEnum.ClassProperty,y,h);g.metadata=d,r.push(g)}var _=Object.getPrototypeOf(e.prototype).constructor;if(_!==Object){var m=p(t,_);r=o(o([],r),m)}return r}function f(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[c.INJECT_TAG],multiInject:e[c.MULTI_INJECT_TAG],targetName:e[c.NAME_TAG],unmanaged:e[c.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return d(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var o=Object.getPrototypeOf(n.prototype).constructor;if(o!==Object){var r=d(e,s.getFunctionName(o),o,!0),i=r.map((function(t){return t.metadata.filter((function(t){return t.key===c.UNMANAGED_TAG}))})),a=[].concat.apply([],i).length,u=r.length-a;return u>0?u:t(e,o)}return 0}},6748:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var o=n(7791),r=function(){function t(t,e,n,r,i){this.id=o.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,o){var r=new t(e,this.parentContext,this,n,o);return this.childRequests.push(r),r},t}();e.Request=r},8924:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var o=n(6867),r=n(7791),i=n(7738),a=n(8460),c=function(){function t(t,e,n,c){this.id=r.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var s=null;"string"==typeof c?s=new i.Metadata(o.NAMED_TAG,c):c instanceof i.Metadata&&(s=c),null!==s&&this.metadata.push(s)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(o.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(o.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(o.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return o.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))}))},t.prototype.isOptional=function(){return this.matchesTag(o.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===o.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return o.NON_CUSTOM_TAG_KEYS.every((function(e){return t.key!==e}))})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(o.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var o=0,r=e.metadata;o<r.length;o++){var i=r[o];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=c},2279:function(t,e,n){"use strict";var o=this&&this.__spreadArray||function(t,e){for(var n=0,o=e.length,r=t.length;n<o;n++,r++)t[r]=e[n];return t};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var r=n(6674),i=n(8421),a=n(6867);e.resolveInstance=function(t,e,n){var c,s,u=null;if(e.length>0){var d=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);s=d,u=function(t,e,n){var o=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty})),r=o.map(n);return o.forEach((function(e,n){var o;o=e.target.name.value();var i=r[n];t[o]=i})),t}(u=new((c=t).bind.apply(c,o([void 0],s))),e,n)}else u=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(r.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,u),u}},1927:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var o=n(6674),r=n(8421),i=n(5265),a=n(5800),c=n(2279),s=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(o.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},u=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,i=e.childRequests,d=e.target&&e.target.isArray(),l=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(d&&l)return i.map((function(e){return u(t)(e)}));var p=null;if(!e.target.isOptional()||0!==n.length){var f=n[0],y=f.scope===r.BindingScopeEnum.Singleton,h=f.scope===r.BindingScopeEnum.Request;if(y&&f.activated)return f.cache;if(h&&null!==t&&t.has(f.id))return t.get(f.id);if(f.type===r.BindingTypeEnum.ConstantValue)p=f.cache,f.activated=!0;else if(f.type===r.BindingTypeEnum.Function)p=f.cache,f.activated=!0;else if(f.type===r.BindingTypeEnum.Constructor)p=f.implementationType;else if(f.type===r.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)p=s("toDynamicValue",f.serviceIdentifier,(function(){return f.dynamicValue(e.parentContext)}));else if(f.type===r.BindingTypeEnum.Factory&&null!==f.factory)p=s("toFactory",f.serviceIdentifier,(function(){return f.factory(e.parentContext)}));else if(f.type===r.BindingTypeEnum.Provider&&null!==f.provider)p=s("toProvider",f.serviceIdentifier,(function(){return f.provider(e.parentContext)}));else{if(f.type!==r.BindingTypeEnum.Instance||null===f.implementationType){var g=a.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(o.INVALID_BINDING_TYPE+" "+g)}p=c.resolveInstance(f.implementationType,i,u(t))}return"function"==typeof f.onActivation&&(p=f.onActivation(e.parentContext,p)),y&&(f.cache=p,f.activated=!0),h&&null!==t&&!t.has(f.id)&&t.set(f.id,p),p}}};e.resolve=function(t){return u(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},3366:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var o=n(8421),r=n(1325),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=o.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=o.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=o.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},9812:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var o=n(3366),r=n(1811),i=n(8370),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new o.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},1811:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var o=n(8370),r=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new o.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=r},1860:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var o=n(6674),r=n(8421),i=n(9812),a=n(1325),c=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+o.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(o.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=r.BindingTypeEnum.Function,this._binding.scope=r.BindingScopeEnum.Singleton,e},t.prototype.toAutoFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=t,this._binding.scope=r.BindingScopeEnum.Singleton,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=c},1325:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var o=n(1811),r=n(8370),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},8370:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var o=n(1811),r=n(758),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=r.namedConstraint(t),new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=r.taggedConstraint(t)(e),new o.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return r.typeConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return r.namedConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return r.taggedConstraint(t)(e)(n.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},758:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var o=n(6867),r=n(7738),i=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||i(n,e))};e.traverseAncerstors=i;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new r.Metadata(t,e),n}};e.taggedConstraint=a;var c=a(o.NAMED_TAG);e.namedConstraint=c;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var o=e.bindings[0].implementationType;return t===o}return!1}}},600:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0;e.multiBindToService=function(t){return function(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},5265:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var o=n(6674);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===o.STACK_OVERFLOW}},7791:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var n=0;e.id=function(){return n++}},5800:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var o=n(6674);function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function i(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||i(t.parentRequest,e))}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var o="",r=n(t,e);return 0!==r.length&&(o="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),o=o+"\n "+e,t.constraint.metaData&&(o=o+" - "+t.constraint.metaData)}))),o},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(i(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var o=r(e.serviceIdentifier);return n.push(o),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",o=e.getNamedTag(),r=e.getCustomTags();return null!==o&&(n+=o.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=a},2022:function(t){t.exports=function(){"use strict";function t(t){var e,n,o=document,r=o.createElement("div"),i=r.style,a=navigator.userAgent,c=-1!==a.indexOf("Firefox")&&-1!==a.indexOf("Mobile"),s=t.debounceWaitMs||0,u=t.preventSubmit||!1,d=c?"input":"keyup",l=[],p="",f=2,y=t.showOnFocus,h=0;if(void 0!==t.minLength&&(f=t.minLength),!t.input)throw new Error("input undefined");var g=t.input;function _(){var t=r.parentNode;t&&t.removeChild(r)}function m(){n&&window.clearTimeout(n)}function v(){r.parentNode||o.body.appendChild(r)}function b(){return!!r.parentNode}function S(){h++,l=[],p="",e=void 0,_()}function P(){if(b()){i.height="auto",i.width=g.offsetWidth+"px";var e=g.getBoundingClientRect(),n=e.top+g.offsetHeight,o=window.innerHeight-n;o<0&&(o=0),i.top=n+"px",i.bottom="",i.left=e.left+"px",i.maxHeight=o+"px",t.customize&&t.customize(g,e,r,o)}}function w(){for(;r.firstChild;)r.removeChild(r.firstChild);var n=function(t,e){var n=o.createElement("div");return n.textContent=t.label||"",n};t.render&&(n=t.render);var i=function(t,e){var n=o.createElement("div");return n.textContent=t,n};t.renderGroup&&(i=t.renderGroup);var a=o.createDocumentFragment(),c="#9?$";if(l.forEach((function(o){if(o.group&&o.group!==c){c=o.group;var r=i(o.group,p);r&&(r.className+=" group",a.appendChild(r))}var s=n(o,p);s&&(s.addEventListener("click",(function(e){t.onSelect(o,g),S(),e.preventDefault(),e.stopPropagation()})),o===e&&(s.className+=" selected"),a.appendChild(s))})),r.appendChild(a),l.length<1){if(!t.emptyMsg)return void S();var s=o.createElement("div");s.className="empty",s.textContent=t.emptyMsg,r.appendChild(s)}v(),P(),I()}function O(){b()&&w()}function E(){O()}function R(t){t.target!==r?O():t.preventDefault()}function T(t){for(var e=t.which||t.keyCode||0,n=0,o=[38,13,27,39,37,16,17,18,20,91,9];n<o.length;n++)if(e===o[n])return;40===e&&b()||j(0)}function I(){var t=r.getElementsByClassName("selected");if(t.length>0){var e=t[0],n=e.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(e=n),e.offsetTop<r.scrollTop)r.scrollTop=e.offsetTop;else{var o=e.offsetTop+e.offsetHeight,i=r.scrollTop+r.offsetHeight;o>i&&(r.scrollTop+=o-i)}}}function A(){if(l.length<1)e=void 0;else if(e===l[0])e=l[l.length-1];else for(var t=l.length-1;t>0;t--)if(e===l[t]||1===t){e=l[t-1];break}}function x(){if(l.length<1&&(e=void 0),e&&e!==l[l.length-1]){for(var t=0;t<l.length-1;t++)if(e===l[t]){e=l[t+1];break}}else e=l[0]}function C(n){var o=n.which||n.keyCode||0;if(38===o||40===o||27===o){var r=b();if(27===o)S();else{if(!b||l.length<1)return;38===o?A():x(),w()}return n.preventDefault(),void(r&&n.stopPropagation())}13===o&&(e&&(t.onSelect(e,g),S()),u&&n.preventDefault())}function M(){y&&j(1)}function j(o){var r=++h,i=g.value;i.length>=f||1===o?(m(),n=window.setTimeout((function(){t.fetch(i,(function(t){h===r&&t&&(p=i,e=(l=t).length>0?l[0]:void 0,w())}),0)}),0===o?s:0)):S()}function D(){setTimeout((function(){o.activeElement!==g&&S()}),200)}function N(){g.removeEventListener("focus",M),g.removeEventListener("keydown",C),g.removeEventListener(d,T),g.removeEventListener("blur",D),window.removeEventListener("resize",E),o.removeEventListener("scroll",R,!0),m(),S(),h++}return r.className="autocomplete "+(t.className||""),i.position="fixed",r.addEventListener("mousedown",(function(t){t.stopPropagation(),t.preventDefault()})),g.addEventListener("keydown",C),g.addEventListener(d,T),g.addEventListener("blur",D),g.addEventListener("focus",M),window.addEventListener("resize",E),o.addEventListener("scroll",R,!0),{destroy:N}}return t}()},6837:function(t,e){var n,o,r;o=[],n=function(){"use strict";function e(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,n){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){a(o.response,e,n)},o.onerror=function(){console.error("could not download file")},o.send()}function o(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(t,e,a){var c=i.URL||i.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener","string"==typeof t?(s.href=t,s.origin===location.origin?r(s):o(s.href)?n(t,e,a):r(s,s.target="_blank")):(s.href=c.createObjectURL(t),setTimeout((function(){c.revokeObjectURL(s.href)}),4e4),setTimeout((function(){r(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,i,a){if(i=i||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,a),i);else if(o(t))n(t,i,a);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout((function(){r(c)}))}}:function(t,e,o,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,o);var a="application/octet-stream"===t.type,c=/constructor/i.test(i.HTMLElement)||i.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&c)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var d=i.URL||i.webkitURL,l=d.createObjectURL(t);r?r.location=l:location.href=l,r=null,setTimeout((function(){d.revokeObjectURL(l)}),4e4)}});i.saveAs=a.saveAs=a,t.exports=a},void 0===(r="function"==typeof n?n.apply(e,o):n)||(t.exports=r)},7329:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagProperty=e.tagParameter=e.decorate=void 0;var o=n(5493),r=n(6701);function i(t,e,n,r,i){var a={},c="number"==typeof i,s=void 0!==i&&c?i.toString():n;if(c&&void 0!==n)throw new Error(o.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(a=Reflect.getMetadata(t,e));var u=a[s];if(Array.isArray(u))for(var d=0,l=u;d<l.length;d++){var p=l[d];if(p.key===r.key)throw new Error(o.DUPLICATED_METADATA+" "+p.key.toString())}else u=[];u.push(r),a[s]=u,Reflect.defineMetadata(t,a,e)}function a(t,e){Reflect.decorate(t,e)}function c(t,e){return function(n,o){e(n,o,t)}}e.tagParameter=function(t,e,n,o){i(r.TAGGED,t,e,o,n)},e.tagProperty=function(t,e,n){i(r.TAGGED_PROP,t.constructor,e,n)},e.decorate=function(t,e,n){"number"==typeof n?a([c(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):a([t],e)}},8122:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inject=e.LazyServiceIdentifer=void 0;var o=n(5493),r=n(6701),i=n(4963),a=n(7329),c=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=c,e.inject=function(t){return function(e,n,c){if(void 0===t)throw new Error(o.UNDEFINED_INJECT_ANNOTATION(e.name));var s=new i.Metadata(r.INJECT_TAG,t);"number"==typeof c?a.tagParameter(e,n,c,s):a.tagProperty(e,n,s)}}},3169:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=void 0;var o=n(5493),r=n(6701);e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(r.PARAM_TYPES,t))throw new Error(o.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(r.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(r.PARAM_TYPES,e,t),t}}},3511:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=void 0;var o=n(6701),r=n(4963),i=n(7329);e.multiInject=function(t){return function(e,n,a){var c=new r.Metadata(o.MULTI_INJECT_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,c):i.tagProperty(e,n,c)}}},7765:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.named=void 0;var o=n(6701),r=n(4963),i=n(7329);e.named=function(t){return function(e,n,a){var c=new r.Metadata(o.NAMED_TAG,t);"number"==typeof a?i.tagParameter(e,n,a,c):i.tagProperty(e,n,c)}}},1059:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.optional=void 0;var o=n(6701),r=n(4963),i=n(7329);e.optional=function(){return function(t,e,n){var a=new r.Metadata(o.OPTIONAL_TAG,!0);"number"==typeof n?i.tagParameter(t,e,n,a):i.tagProperty(t,e,a)}}},5570:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=void 0;var o=n(5493),r=n(6701),i=n(4963);e.postConstruct=function(){return function(t,e,n){var a=new i.Metadata(r.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(r.POST_CONSTRUCT,t.constructor))throw new Error(o.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(r.POST_CONSTRUCT,a,t.constructor)}}},860:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=void 0;var o=n(4963),r=n(7329);e.tagged=function(t,e){return function(n,i,a){var c=new o.Metadata(t,e);"number"==typeof a?r.tagParameter(n,i,a,c):r.tagProperty(n,i,c)}}},6898:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=void 0;var o=n(6701),r=n(4963),i=n(7329);e.targetName=function(t){return function(e,n,a){var c=new r.Metadata(o.NAME_TAG,t);i.tagParameter(e,n,a,c)}}},6726:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=void 0;var o=n(6701),r=n(4963),i=n(7329);e.unmanaged=function(){return function(t,e,n){var a=new r.Metadata(o.UNMANAGED_TAG,!0);i.tagParameter(t,e,n,a)}}},8819:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Binding=void 0;var o=n(6128),r=n(7815),i=function(){function t(t,e){this.id=r.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=o.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=i},6822:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingCount=void 0;e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}},5493:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STACK_OVERFLOW=e.CIRCULAR_DEPENDENCY_IN_FACTORY=e.POST_CONSTRUCT_ERROR=e.MULTIPLE_POST_CONSTRUCT_METHODS=e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK=e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE=e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE=e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT=e.ARGUMENTS_LENGTH_MISMATCH=e.INVALID_DECORATOR_OPERATION=e.INVALID_TO_SELF_VALUE=e.INVALID_FUNCTION_BINDING=e.INVALID_MIDDLEWARE_RETURN=e.NO_MORE_SNAPSHOTS_AVAILABLE=e.INVALID_BINDING_TYPE=e.NOT_IMPLEMENTED=e.CIRCULAR_DEPENDENCY=e.UNDEFINED_INJECT_ANNOTATION=e.MISSING_INJECT_ANNOTATION=e.MISSING_INJECTABLE_ANNOTATION=e.NOT_REGISTERED=e.CANNOT_UNBIND=e.AMBIGUOUS_MATCH=e.KEY_NOT_FOUND=e.NULL_ARGUMENT=e.DUPLICATED_METADATA=e.DUPLICATED_INJECTABLE_DECORATOR=void 0,e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"},6128:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TargetTypeEnum=e.BindingTypeEnum=e.BindingScopeEnum=void 0;e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}},6701:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.POST_CONSTRUCT=e.DESIGN_PARAM_TYPES=e.PARAM_TYPES=e.TAGGED_PROP=e.TAGGED=e.MULTI_INJECT_TAG=e.INJECT_TAG=e.OPTIONAL_TAG=e.UNMANAGED_TAG=e.NAME_TAG=e.NAMED_TAG=void 0,e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"},9581:function(t,e,n){"use strict";var o=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;var i=n(8819),a=n(5493),c=n(6128),s=n(6701),u=n(3071),d=n(6180),l=n(5190),p=n(7416),f=n(7815),y=n(5306),h=n(1104),g=n(9774),_=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+a.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=c.BindingScopeEnum.Transient;else if(e.defaultScope!==c.BindingScopeEnum.Singleton&&e.defaultScope!==c.BindingScopeEnum.Transient&&e.defaultScope!==c.BindingScopeEnum.Request)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+a.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=f.id(),this._bindingDictionary=new g.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new u.MetadataReader}return t.merge=function(e,n){var o=new t,r=d.getBindingDictionary(o),i=d.getBindingDictionary(e),a=d.getBindingDictionary(n);function c(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return c(i,r),c(a,r),o},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),o=0,r=t;o<r.length;o++){var i=r[o],a=n(i.id);i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o(this,void 0,void 0,(function(){var e,n,o,i,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,o=t,r.label=1;case 1:return n<o.length?(i=o[n],a=e(i.id),[4,i.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=o(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||c.BindingScopeEnum.Transient,n=new i.Binding(t,e);return this._bindingDictionary.add(t,n),new p.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(a.CANNOT_UNBIND+" "+y.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new g.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,s.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var o=!1;if(this._bindingDictionary.hasKey(t)){var r=this._bindingDictionary.get(t),i=d.createMockRequest(this,t,e,n);o=r.some((function(t){return t.constraint(i)}))}return!o&&this.parent&&(o=this.parent.isBoundTagged(t,e,n)),o},t.prototype.snapshot=function(){this._snapshots.push(h.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(a.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,c.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,c.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,s.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,c.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,c.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,s.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(o){var r=t.rebind.bind(t)(o);return e(r,n),r}};return function(o){return{bindFunction:(r=o,function(n){var o=t.bind.bind(t)(n);return e(o,r),o}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(o),unbindFunction:function(e){t.unbind.bind(t)(e)}};var r}},t.prototype._get=function(t,e,n,o,r,i){var c=null,s={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:r,serviceIdentifier:o,targetType:n,value:i};if(this._middleware){if(null==(c=this._middleware(s)))throw new Error(a.INVALID_MIDDLEWARE_RETURN)}else c=this._planAndResolve()(s);return c},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=d.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),l.resolve(n)}},t}();e.Container=_},3240:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncContainerModule=e.ContainerModule=void 0;var o=n(7815),r=function(t){this.id=o.id(),this.registry=t};e.ContainerModule=r;var i=function(t){this.id=o.id(),this.registry=t};e.AsyncContainerModule=i},1104:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerSnapshot=void 0;var n=function(){function t(){}return t.of=function(e,n){var o=new t;return o.bindings=e,o.middleware=n,o},t}();e.ContainerSnapshot=n},9774:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Lookup=void 0;var o=n(5493),r=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(o.NULL_ARGUMENT);if(null==e)throw new Error(o.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(o.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(o.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,o){var r=n.filter((function(e){return!t(e)}));r.length>0?e._map.set(o,r):e._map.delete(o)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(o.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=r},9245:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=void 0;var o=n(6701);e.METADATA_KEY=o;var r=n(9581);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return r.Container}});var i=n(6128);Object.defineProperty(e,"BindingScopeEnum",{enumerable:!0,get:function(){return i.BindingScopeEnum}}),Object.defineProperty(e,"BindingTypeEnum",{enumerable:!0,get:function(){return i.BindingTypeEnum}}),Object.defineProperty(e,"TargetTypeEnum",{enumerable:!0,get:function(){return i.TargetTypeEnum}});var a=n(3240);Object.defineProperty(e,"AsyncContainerModule",{enumerable:!0,get:function(){return a.AsyncContainerModule}}),Object.defineProperty(e,"ContainerModule",{enumerable:!0,get:function(){return a.ContainerModule}});var c=n(3169);Object.defineProperty(e,"injectable",{enumerable:!0,get:function(){return c.injectable}});var s=n(860);Object.defineProperty(e,"tagged",{enumerable:!0,get:function(){return s.tagged}});var u=n(7765);Object.defineProperty(e,"named",{enumerable:!0,get:function(){return u.named}});var d=n(8122);Object.defineProperty(e,"inject",{enumerable:!0,get:function(){return d.inject}}),Object.defineProperty(e,"LazyServiceIdentifer",{enumerable:!0,get:function(){return d.LazyServiceIdentifer}});var l=n(1059);Object.defineProperty(e,"optional",{enumerable:!0,get:function(){return l.optional}});var p=n(6726);Object.defineProperty(e,"unmanaged",{enumerable:!0,get:function(){return p.unmanaged}});var f=n(3511);Object.defineProperty(e,"multiInject",{enumerable:!0,get:function(){return f.multiInject}});var y=n(6898);Object.defineProperty(e,"targetName",{enumerable:!0,get:function(){return y.targetName}});var h=n(5570);Object.defineProperty(e,"postConstruct",{enumerable:!0,get:function(){return h.postConstruct}});var g=n(3071);Object.defineProperty(e,"MetadataReader",{enumerable:!0,get:function(){return g.MetadataReader}});var _=n(7815);Object.defineProperty(e,"id",{enumerable:!0,get:function(){return _.id}});var m=n(7329);Object.defineProperty(e,"decorate",{enumerable:!0,get:function(){return m.decorate}});var v=n(809);Object.defineProperty(e,"traverseAncerstors",{enumerable:!0,get:function(){return v.traverseAncerstors}}),Object.defineProperty(e,"taggedConstraint",{enumerable:!0,get:function(){return v.taggedConstraint}}),Object.defineProperty(e,"namedConstraint",{enumerable:!0,get:function(){return v.namedConstraint}}),Object.defineProperty(e,"typeConstraint",{enumerable:!0,get:function(){return v.typeConstraint}});var b=n(5306);Object.defineProperty(e,"getServiceIdentifierAsString",{enumerable:!0,get:function(){return b.getServiceIdentifierAsString}});var S=n(8364);Object.defineProperty(e,"multiBindToService",{enumerable:!0,get:function(){return S.multiBindToService}})},6020:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var o=n(7815),r=function(){function t(t){this.id=o.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=r},4963:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var o=n(6701),r=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===o.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=r},3071:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataReader=void 0;var o=n(6701),r=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(o.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(o.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(o.TAGGED_PROP,t)||[]},t}();e.MetadataReader=r},2330:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Plan=void 0;var n=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=n},6180:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=e.createMockRequest=e.plan=void 0;var o=n(6822),r=n(5493),i=n(6128),a=n(6701),c=n(867),s=n(5306),u=n(6020),d=n(4963),l=n(2330),p=n(597),f=n(7668),y=n(2328);function h(t){return t._bindingDictionary}function g(t,e,n,i,a){var c=m(n.container,a.serviceIdentifier),u=[];return c.length===o.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof a.serviceIdentifier&&t.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),c=m(n.container,a.serviceIdentifier)),u=e?c:c.filter((function(t){var e=new f.Request(t.serviceIdentifier,n,i,t,a);return t.constraint(e)})),function(t,e,n,i){switch(e.length){case o.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var a=s.getServiceIdentifierAsString(t),c=r.NOT_REGISTERED;throw c+=s.listMetadataForTarget(a,n),c+=s.listRegisteredBindingsForServiceIdentifier(i,a,m),new Error(c);case o.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case o.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;a=s.getServiceIdentifierAsString(t),c=r.AMBIGUOUS_MATCH+" "+a;throw c+=s.listRegisteredBindingsForServiceIdentifier(i,a,m),new Error(c)}}(a.serviceIdentifier,u,a,n.container),u}function _(t,e,n,o,a,c){var s,u;if(null===a){s=g(t,e,o,null,c),u=new f.Request(n,o,null,s,c);var d=new l.Plan(o,u);o.addPlan(d)}else s=g(t,e,o,a,c),u=a.addChildRequest(c.serviceIdentifier,s,c);s.forEach((function(e){var n=null;if(c.isArray())n=u.addChildRequest(e.serviceIdentifier,e,c);else{if(e.cache)return;n=u}if(e.type===i.BindingTypeEnum.Instance&&null!==e.implementationType){var a=p.getDependencies(t,e.implementationType);if(!o.container.options.skipBaseClassChecks){var s=p.getBaseClassDependencyCount(t,e.implementationType);if(a.length<s){var d=r.ARGUMENTS_LENGTH_MISMATCH(p.getFunctionName(e.implementationType));throw new Error(d)}}a.forEach((function(e){_(t,!1,e.serviceIdentifier,o,n,e)}))}}))}function m(t,e){var n=[],o=h(t);return o.hasKey(e)?n=o.get(e):null!==t.parent&&(n=m(t.parent,e)),n}e.getBindingDictionary=h,e.plan=function(t,e,n,o,r,i,l,p){void 0===p&&(p=!1);var f=new u.Context(e),h=function(t,e,n,o,r,i){var c=t?a.MULTI_INJECT_TAG:a.INJECT_TAG,s=new d.Metadata(c,n),u=new y.Target(e,o,n,s);if(void 0!==r){var l=new d.Metadata(r,i);u.metadata.push(l)}return u}(n,o,r,"",i,l);try{return _(t,p,r,f,null,h),f}catch(t){throw c.isStackOverflowExeption(t)&&f.plan&&s.circularDependencyToException(f.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,o){var r=new y.Target(i.TargetTypeEnum.Variable,"",e,new d.Metadata(n,o)),a=new u.Context(t);return new f.Request(e,a,null,[],r)}},1007:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QueryableString=void 0;var n=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=n},597:function(t,e,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=e.getBaseClassDependencyCount=e.getDependencies=void 0;var r=n(8122),i=n(5493),a=n(6128),c=n(6701),s=n(5306);Object.defineProperty(e,"getFunctionName",{enumerable:!0,get:function(){return s.getFunctionName}});var u=n(2328);function d(t,e,n,r){var a=t.getConstructorMetadata(n),c=a.compilerGeneratedMetadata;if(void 0===c){var s=i.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var u=a.userGeneratedMetadata,d=Object.keys(u),f=function(t,e,n,o,r){for(var i=[],a=0;a<r;a++){var c=l(a,t,e,n,o);null!==c&&i.push(c)}return i}(r,e,c,u,0===n.length&&d.length>0?d.length:n.length),y=p(t,n);return o(f,y)}function l(t,e,n,o,c){var s=c[t.toString()]||[],d=f(s),l=!0!==d.unmanaged,p=o[t],y=d.inject||d.multiInject;if((p=y||p)instanceof r.LazyServiceIdentifer&&(p=p.unwrap()),l){if(!e&&(p===Object||p===Function||void 0===p)){var h=i.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(h)}var g=new u.Target(a.TargetTypeEnum.ConstructorArgument,d.targetName,p);return g.metadata=s,g}return null}function p(t,e){for(var n=t.getPropertiesMetadata(e),r=[],i=0,c=Object.keys(n);i<c.length;i++){var s=c[i],d=n[s],l=f(n[s]),y=l.targetName||s,h=l.inject||l.multiInject,g=new u.Target(a.TargetTypeEnum.ClassProperty,y,h);g.metadata=d,r.push(g)}var _=Object.getPrototypeOf(e.prototype).constructor;if(_!==Object){var m=p(t,_);r=o(r,m)}return r}function f(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[c.INJECT_TAG],multiInject:e[c.MULTI_INJECT_TAG],targetName:e[c.NAME_TAG],unmanaged:e[c.UNMANAGED_TAG]}}e.getDependencies=function(t,e){return d(t,s.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,n){var o=Object.getPrototypeOf(n.prototype).constructor;if(o!==Object){var r=d(e,s.getFunctionName(o),o,!0),i=r.map((function(t){return t.metadata.filter((function(t){return t.key===c.UNMANAGED_TAG}))})),a=[].concat.apply([],i).length,u=r.length-a;return u>0?u:t(e,o)}return 0}},7668:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Request=void 0;var o=n(7815),r=function(){function t(t,e,n,r,i){this.id=o.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,o){var r=new t(e,this.parentContext,this,n,o);return this.childRequests.push(r),r},t}();e.Request=r},2328:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Target=void 0;var o=n(6701),r=n(7815),i=n(4963),a=n(1007),c=function(){function t(t,e,n,c){this.id=r.id(),this.type=t,this.serviceIdentifier=n,this.name=new a.QueryableString(e||""),this.metadata=new Array;var s=null;"string"==typeof c?s=new i.Metadata(o.NAMED_TAG,c):c instanceof i.Metadata&&(s=c),null!==s&&this.metadata.push(s)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(o.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(o.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(o.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==o.INJECT_TAG&&t.key!==o.MULTI_INJECT_TAG&&t.key!==o.NAME_TAG&&t.key!==o.UNMANAGED_TAG&&t.key!==o.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(o.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===o.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==o.INJECT_TAG&&t.key!==o.MULTI_INJECT_TAG&&t.key!==o.NAME_TAG&&t.key!==o.UNMANAGED_TAG&&t.key!==o.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(o.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var o=0,r=e.metadata;o<r.length;o++){var i=r[o];if(i.key===t&&i.value===n)return!0}return!1}},t}();e.Target=c},5798:function(t,e,n){"use strict";var o=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var o=Array(t),r=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,c=i.length;a<c;a++,r++)o[r]=i[a];return o};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=void 0;var r=n(5493),i=n(6128),a=n(6701);e.resolveInstance=function(t,e,n){var c,s,u=null;if(e.length>0){var d=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ConstructorArgument})).map(n);s=d,u=function(t,e,n){var o=e.filter((function(t){return null!==t.target&&t.target.type===i.TargetTypeEnum.ClassProperty})),r=o.map(n);return o.forEach((function(e,n){var o;o=e.target.name.value();var i=r[n];t[o]=i})),t}(u=new((c=t).bind.apply(c,o([void 0],s))),e,n)}else u=new t;return function(t,e){if(Reflect.hasMetadata(a.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(a.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(r.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,u),u}},5190:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.resolve=void 0;var o=n(5493),r=n(6128),i=n(867),a=n(5306),c=n(5798),s=function(t,e,n){try{return n()}catch(n){throw i.isStackOverflowExeption(n)?new Error(o.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},u=function(t){return function(e){e.parentContext.setCurrentRequest(e);var n=e.bindings,i=e.childRequests,d=e.target&&e.target.isArray(),l=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(d&&l)return i.map((function(e){return u(t)(e)}));var p=null;if(!e.target.isOptional()||0!==n.length){var f=n[0],y=f.scope===r.BindingScopeEnum.Singleton,h=f.scope===r.BindingScopeEnum.Request;if(y&&f.activated)return f.cache;if(h&&null!==t&&t.has(f.id))return t.get(f.id);if(f.type===r.BindingTypeEnum.ConstantValue)p=f.cache;else if(f.type===r.BindingTypeEnum.Function)p=f.cache;else if(f.type===r.BindingTypeEnum.Constructor)p=f.implementationType;else if(f.type===r.BindingTypeEnum.DynamicValue&&null!==f.dynamicValue)p=s("toDynamicValue",f.serviceIdentifier,(function(){return f.dynamicValue(e.parentContext)}));else if(f.type===r.BindingTypeEnum.Factory&&null!==f.factory)p=s("toFactory",f.serviceIdentifier,(function(){return f.factory(e.parentContext)}));else if(f.type===r.BindingTypeEnum.Provider&&null!==f.provider)p=s("toProvider",f.serviceIdentifier,(function(){return f.provider(e.parentContext)}));else{if(f.type!==r.BindingTypeEnum.Instance||null===f.implementationType){var g=a.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(o.INVALID_BINDING_TYPE+" "+g)}p=c.resolveInstance(f.implementationType,i,u(t))}return"function"==typeof f.onActivation&&(p=f.onActivation(e.parentContext,p)),y&&(f.cache=p,f.activated=!0),h&&null!==t&&!t.has(f.id)&&t.set(f.id,p),p}}};e.resolve=function(t){return u(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}},5742:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInSyntax=void 0;var o=n(6128),r=n(8251),i=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=o.BindingScopeEnum.Request,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=o.BindingScopeEnum.Singleton,new r.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=o.BindingScopeEnum.Transient,new r.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=i},5556:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingInWhenOnSyntax=void 0;var o=n(5742),r=n(9562),i=n(190),a=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new i.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new r.BindingOnSyntax(this._binding),this._bindingInSyntax=new o.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=a},9562:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingOnSyntax=void 0;var o=n(190),r=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new o.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=r},7416:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingToSyntax=void 0;var o=n(5493),r=n(6128),i=n(5556),a=n(8251),c=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=r.BindingTypeEnum.Instance,this._binding.implementationType=t,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+o.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=r.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=r.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new i.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=r.BindingTypeEnum.Constructor,this._binding.implementationType=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(o.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=r.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=r.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new a.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=r.BindingTypeEnum.Provider,this._binding.provider=t,new a.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=c},8251:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenOnSyntax=void 0;var o=n(9562),r=n(190),i=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new r.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new o.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=i},190:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BindingWhenSyntax=void 0;var o=n(9562),r=n(809),i=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=r.namedConstraint(t),new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new o.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=r.taggedConstraint(t)(e),new o.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return r.typeConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return r.namedConstraint(t)(e.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return r.taggedConstraint(t)(e)(n.parentRequest)},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.typeConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,r.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,r.namedConstraint(t))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!r.traverseAncerstors(n,r.taggedConstraint(t)(e))},new o.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return r.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!r.traverseAncerstors(e,t)},new o.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=i},809:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.typeConstraint=e.namedConstraint=e.taggedConstraint=e.traverseAncerstors=void 0;var o=n(6701),r=n(4963),i=function(t,e){var n=t.parentRequest;return null!==n&&(!!e(n)||i(n,e))};e.traverseAncerstors=i;var a=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new r.Metadata(t,e),n}};e.taggedConstraint=a;var c=a(o.NAMED_TAG);e.namedConstraint=c;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var o=e.bindings[0].implementationType;return t===o}return!1}}},8364:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=void 0,e.multiBindToService=function(t){return function(e){return function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}},867:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=void 0;var o=n(5493);e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===o.STACK_OVERFLOW}},7815:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.id=void 0;var n=0;e.id=function(){return n++}},5306:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.circularDependencyToException=e.listMetadataForTarget=e.listRegisteredBindingsForServiceIdentifier=e.getServiceIdentifierAsString=e.getFunctionName=void 0;var o=n(5493);function r(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function i(t,e){return null!==t.parentRequest&&(t.parentRequest.serviceIdentifier===e||i(t.parentRequest,e))}function a(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}e.getServiceIdentifierAsString=r,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var o="",r=n(t,e);return 0!==r.length&&(o="\nRegistered bindings:",r.forEach((function(t){var e="Object";null!==t.implementationType&&(e=a(t.implementationType)),o=o+"\n "+e,t.constraint.metaData&&(o=o+" - "+t.constraint.metaData)}))),o},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(i(e,e.serviceIdentifier)){var n=function(t){return function t(e,n){void 0===n&&(n=[]);var o=r(e.serviceIdentifier);return n.push(o),null!==e.parentRequest?t(e.parentRequest,n):n}(t).reverse().join(" --\x3e ")}(e);throw new Error(o.CIRCULAR_DEPENDENCY+" "+n)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",o=e.getNamedTag(),r=e.getCustomTags();return null!==o&&(n+=o.toString()+"\n"),null!==r&&r.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=a},4047:(t,e,n)=>{"use strict";n.r(e),n.d(e,{array:()=>i,attachTo:()=>O,attributesModule:()=>T,classModule:()=>A,datasetModule:()=>M,eventListenersModule:()=>L,h:()=>h,htmlDomApi:()=>o,init:()=>f,jsx:()=>Y,primitive:()=>a,propsModule:()=>F,styleModule:()=>K,thunk:()=>v,toVNode:()=>E,vnode:()=>r});const o={createElement:function(t,e){return document.createElement(t,e)},createElementNS:function(t,e,n){return document.createElementNS(t,e,n)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},getTextContent:function(t){return t.textContent},isElement:function(t){return 1===t.nodeType},isText:function(t){return 3===t.nodeType},isComment:function(t){return 8===t.nodeType}};function r(t,e,n,o,r){return{sel:t,data:e,children:n,text:o,elm:r,key:void 0===e?void 0:e.key}}const i=Array.isArray;function a(t){return"string"==typeof t||"number"==typeof t}function c(t){return void 0===t}function s(t){return void 0!==t}const u=r("",{},[],void 0,void 0);function d(t,e){var n,o;const r=t.key===e.key,i=(null===(n=t.data)||void 0===n?void 0:n.is)===(null===(o=e.data)||void 0===o?void 0:o.is);return t.sel===e.sel&&r&&i}function l(t,e,n){var o;const r={};for(let i=e;i<=n;++i){const e=null===(o=t[i])||void 0===o?void 0:o.key;void 0!==e&&(r[e]=i)}return r}const p=["create","update","remove","destroy","pre","post"];function f(t,e){let n,f;const y={create:[],update:[],remove:[],destroy:[],pre:[],post:[]},h=void 0!==e?e:o;for(n=0;n<p.length;++n)for(y[p[n]]=[],f=0;f<t.length;++f){const e=t[f][p[n]];void 0!==e&&y[p[n]].push(e)}function g(t){const e=t.id?"#"+t.id:"",n=t.getAttribute("class"),o=n?"."+n.split(" ").join("."):"";return r(h.tagName(t).toLowerCase()+e+o,{},[],void 0,t)}function _(t,e){return function(){if(0==--e){const e=h.parentNode(t);h.removeChild(e,t)}}}function m(t,e){var n,o;let r,d=t.data;if(void 0!==d){const e=null===(n=d.hook)||void 0===n?void 0:n.init;s(e)&&(e(t),d=t.data)}const l=t.children,p=t.sel;if("!"===p)c(t.text)&&(t.text=""),t.elm=h.createComment(t.text);else if(void 0!==p){const n=p.indexOf("#"),c=p.indexOf(".",n),f=n>0?n:p.length,g=c>0?c:p.length,_=-1!==n||-1!==c?p.slice(0,Math.min(f,g)):p,v=t.elm=s(d)&&s(r=d.ns)?h.createElementNS(r,_,d):h.createElement(_,d);for(f<g&&v.setAttribute("id",p.slice(f+1,g)),c>0&&v.setAttribute("class",p.slice(g+1).replace(/\./g," ")),r=0;r<y.create.length;++r)y.create[r](u,t);if(i(l))for(r=0;r<l.length;++r){const t=l[r];null!=t&&h.appendChild(v,m(t,e))}else a(t.text)&&h.appendChild(v,h.createTextNode(t.text));const b=t.data.hook;s(b)&&(null===(o=b.create)||void 0===o||o.call(b,u,t),b.insert&&e.push(t))}else t.elm=h.createTextNode(t.text);return t.elm}function v(t,e,n,o,r,i){for(;o<=r;++o){const r=n[o];null!=r&&h.insertBefore(t,m(r,i),e)}}function b(t){var e,n;const o=t.data;if(void 0!==o){null===(n=null===(e=null==o?void 0:o.hook)||void 0===e?void 0:e.destroy)||void 0===n||n.call(e,t);for(let e=0;e<y.destroy.length;++e)y.destroy[e](t);if(void 0!==t.children)for(let e=0;e<t.children.length;++e){const n=t.children[e];null!=n&&"string"!=typeof n&&b(n)}}}function S(t,e,n,o){for(var r,i;n<=o;++n){let o,a;const c=e[n];if(null!=c)if(s(c.sel)){b(c),o=y.remove.length+1,a=_(c.elm,o);for(let t=0;t<y.remove.length;++t)y.remove[t](c,a);const t=null===(i=null===(r=null==c?void 0:c.data)||void 0===r?void 0:r.hook)||void 0===i?void 0:i.remove;s(t)?t(c,a):a()}else h.removeChild(t,c.elm)}}function P(t,e,n){var o,r,i,a,u;const p=null===(o=e.data)||void 0===o?void 0:o.hook;null===(r=null==p?void 0:p.prepatch)||void 0===r||r.call(p,t,e);const f=e.elm=t.elm,g=t.children,_=e.children;if(t!==e){if(void 0!==e.data){for(let n=0;n<y.update.length;++n)y.update[n](t,e);null===(a=null===(i=e.data.hook)||void 0===i?void 0:i.update)||void 0===a||a.call(i,t,e)}c(e.text)?s(g)&&s(_)?g!==_&&function(t,e,n,o){let r,i,a,s,u=0,p=0,f=e.length-1,y=e[0],g=e[f],_=n.length-1,b=n[0],w=n[_];for(;u<=f&&p<=_;)null==y?y=e[++u]:null==g?g=e[--f]:null==b?b=n[++p]:null==w?w=n[--_]:d(y,b)?(P(y,b,o),y=e[++u],b=n[++p]):d(g,w)?(P(g,w,o),g=e[--f],w=n[--_]):d(y,w)?(P(y,w,o),h.insertBefore(t,y.elm,h.nextSibling(g.elm)),y=e[++u],w=n[--_]):d(g,b)?(P(g,b,o),h.insertBefore(t,g.elm,y.elm),g=e[--f],b=n[++p]):(void 0===r&&(r=l(e,u,f)),i=r[b.key],c(i)?h.insertBefore(t,m(b,o),y.elm):(a=e[i],a.sel!==b.sel?h.insertBefore(t,m(b,o),y.elm):(P(a,b,o),e[i]=void 0,h.insertBefore(t,a.elm,y.elm))),b=n[++p]);(u<=f||p<=_)&&(u>f?(s=null==n[_+1]?null:n[_+1].elm,v(t,s,n,p,_,o)):S(t,e,u,f))}(f,g,_,n):s(_)?(s(t.text)&&h.setTextContent(f,""),v(f,null,_,0,_.length-1,n)):s(g)?S(f,g,0,g.length-1):s(t.text)&&h.setTextContent(f,""):t.text!==e.text&&(s(g)&&S(f,g,0,g.length-1),h.setTextContent(f,e.text)),null===(u=null==p?void 0:p.postpatch)||void 0===u||u.call(p,t,e)}}return function(t,e){let n,o,r;const i=[];for(n=0;n<y.pre.length;++n)y.pre[n]();for(function(t){return void 0!==t.sel}(t)||(t=g(t)),d(t,e)?P(t,e,i):(o=t.elm,r=h.parentNode(o),m(e,i),null!==r&&(h.insertBefore(r,e.elm,h.nextSibling(o)),S(r,[t],0,0))),n=0;n<i.length;++n)i[n].data.hook.insert(i[n]);for(n=0;n<y.post.length;++n)y.post[n]();return e}}function y(t,e,n){if(t.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==e)for(let t=0;t<e.length;++t){const n=e[t].data;void 0!==n&&y(n,e[t].children,e[t].sel)}}function h(t,e,n){let o,c,s,u={};if(void 0!==n?(null!==e&&(u=e),i(n)?o=n:a(n)?c=n:n&&n.sel&&(o=[n])):null!=e&&(i(e)?o=e:a(e)?c=e:e&&e.sel?o=[e]:u=e),void 0!==o)for(s=0;s<o.length;++s)a(o[s])&&(o[s]=r(void 0,void 0,void 0,o[s],void 0));return"s"!==t[0]||"v"!==t[1]||"g"!==t[2]||3!==t.length&&"."!==t[3]&&"#"!==t[3]||y(u,o,t),r(t,u,o,c,void 0)}function g(t,e){t.data.fn=e.data.fn,t.data.args=e.data.args,e.data=t.data,e.children=t.children,e.text=t.text,e.elm=t.elm}function _(t){const e=t.data;g(e.fn(...e.args),t)}function m(t,e){let n;const o=t.data,r=e.data,i=o.args,a=r.args;if(o.fn===r.fn&&i.length===a.length){for(n=0;n<a.length;++n)if(i[n]!==a[n])return void g(r.fn(...a),e);g(t,e)}else g(r.fn(...a),e)}const v=function(t,e,n,o){return void 0===o&&(o=n,n=e,e=void 0),h(t,{key:e,hook:{init:_,prepatch:m},fn:n,args:o})};function b(t,e){const n=t.data.attachData;e.data.attachData.placeholder=n.placeholder,e.data.attachData.real=n.real,t.elm=t.data.attachData.real}function S(t,e){e.elm=e.data.attachData.placeholder}function P(t){void 0!==t.elm&&t.elm.parentNode.removeChild(t.elm),t.elm=t.data.attachData.real}function w(t,e){const n=e.elm,o=e.data.attachData,r=document.createElement("span");e.elm=r,o.target.appendChild(n),o.real=n,o.placeholder=r}function O(t,e){void 0===e.data&&(e.data={}),void 0===e.data.hook&&(e.data.hook={});const n=e.data,o=e.data.hook;return n.attachData={target:t,placeholder:void 0,real:void 0},o.create=w,o.prepatch=b,o.postpatch=S,o.destroy=P,e}function E(t,e){const n=void 0!==e?e:o;let i;if(n.isElement(t)){const o=t.id?"#"+t.id:"",i=t.getAttribute("class"),a=i?"."+i.split(" ").join("."):"",c=n.tagName(t).toLowerCase()+o+a,s={},u=[];let d,l,p;const f=t.attributes,y=t.childNodes;for(l=0,p=f.length;l<p;l++)d=f[l].nodeName,"id"!==d&&"class"!==d&&(s[d]=f[l].nodeValue);for(l=0,p=y.length;l<p;l++)u.push(E(y[l],e));return r(c,{attrs:s},u,void 0,t)}return n.isText(t)?(i=n.getTextContent(t),r(void 0,void 0,void 0,i,t)):n.isComment(t)?(i=n.getTextContent(t),r("!",{},[],i,t)):r("",{},[],void 0,t)}function R(t,e){let n;const o=e.elm;let r=t.data.attrs,i=e.data.attrs;if((r||i)&&r!==i){for(n in r=r||{},i=i||{},i){const t=i[n];r[n]!==t&&(!0===t?o.setAttribute(n,""):!1===t?o.removeAttribute(n):120!==n.charCodeAt(0)?o.setAttribute(n,t):58===n.charCodeAt(3)?o.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,t):58===n.charCodeAt(5)?o.setAttributeNS("http://www.w3.org/1999/xlink",n,t):o.setAttribute(n,t))}for(n in r)n in i||o.removeAttribute(n)}}const T={create:R,update:R};function I(t,e){let n,o;const r=e.elm;let i=t.data.class,a=e.data.class;if((i||a)&&i!==a){for(o in i=i||{},a=a||{},i)i[o]&&!Object.prototype.hasOwnProperty.call(a,o)&&r.classList.remove(o);for(o in a)n=a[o],n!==i[o]&&r.classList[n?"add":"remove"](o)}}const A={create:I,update:I},x=/[A-Z]/g;function C(t,e){const n=e.elm;let o,r=t.data.dataset,i=e.data.dataset;if(!r&&!i)return;if(r===i)return;r=r||{},i=i||{};const a=n.dataset;for(o in r)i[o]||(a?o in a&&delete a[o]:n.removeAttribute("data-"+o.replace(x,"-$&").toLowerCase()));for(o in i)r[o]!==i[o]&&(a?a[o]=i[o]:n.setAttribute("data-"+o.replace(x,"-$&").toLowerCase(),i[o]))}const M={create:C,update:C};function j(t,e,n){if("function"==typeof t)t.call(e,n,e);else if("object"==typeof t)for(let o=0;o<t.length;o++)j(t[o],e,n)}function D(t,e){const n=t.type,o=e.data.on;o&&o[n]&&j(o[n],e,t)}function N(t,e){const n=t.data.on,o=t.listener,r=t.elm,i=e&&e.data.on,a=e&&e.elm;let c;if(n!==i){if(n&&o)if(i)for(c in n)i[c]||r.removeEventListener(c,o,!1);else for(c in n)r.removeEventListener(c,o,!1);if(i){const o=e.listener=t.listener||function t(e){D(e,t.vnode)};if(o.vnode=e,n)for(c in i)n[c]||a.addEventListener(c,o,!1);else for(c in i)a.addEventListener(c,o,!1)}}}const L={create:N,update:N,destroy:N};function B(t,e){let n,o,r;const i=e.elm;let a=t.data.props,c=e.data.props;if((a||c)&&a!==c)for(n in a=a||{},c=c||{},c)o=c[n],r=a[n],r===o||"value"===n&&i[n]===o||(i[n]=o)}const F={create:B,update:B},k="undefined"!=typeof window&&window.requestAnimationFrame.bind(window)||setTimeout;let G=!1;function V(t,e,n){var o;o=function(){t[e]=n},k((function(){k(o)}))}function H(t,e){let n,o;const r=e.elm;let i=t.data.style,a=e.data.style;if(!i&&!a)return;if(i===a)return;i=i||{},a=a||{};const c="delayed"in i;for(o in i)a[o]||("-"===o[0]&&"-"===o[1]?r.style.removeProperty(o):r.style[o]="");for(o in a)if(n=a[o],"delayed"===o&&a.delayed)for(const t in a.delayed)n=a.delayed[t],c&&n===i.delayed[t]||V(r.style,t,n);else"remove"!==o&&n!==i[o]&&("-"===o[0]&&"-"===o[1]?r.style.setProperty(o,n):r.style[o]=n)}const K={pre:function(){G=!1},create:H,update:H,destroy:function(t){let e,n;const o=t.elm,r=t.data.style;if(r&&(e=r.destroy))for(n in e)o.style[n]=e[n]},remove:function(t,e){const n=t.data.style;if(!n||!n.remove)return void e();let o;G||(t.elm.offsetLeft,G=!0);const r=t.elm;let i=0;const a=n.remove;let c=0;const s=[];for(o in a)s.push(o),r.style[o]=a[o];const u=getComputedStyle(r)["transition-property"].split(", ");for(;i<u.length;++i)-1!==s.indexOf(u[i])&&c++;r.addEventListener("transitionend",(function(t){t.target===r&&--c,0===c&&e()}))}};function U(t,e){for(const n of t)null!=n&&!1!==n&&""!==n&&(Array.isArray(n)?U(n,e):"string"==typeof n||"number"==typeof n||"boolean"==typeof n?e.push(r(void 0,void 0,void 0,String(n),void 0)):e.push(n));return e}function Y(t,e,...n){const o=U(n,[]);return"function"==typeof t?t(e,o):1===o.length&&!o[0].sel&&o[0].text?h(t,e,o[0].text):h(t,e,o)}Y||(Y={})},868:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});class o{constructor(t=[],e=r){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,o=e[t];for(;t>0;){const r=t-1>>1,i=e[r];if(n(o,i)>=0)break;e[t]=i,t=r}e[t]=o}_down(t){const{data:e,compare:n}=this,o=this.length>>1,r=e[t];for(;t<o;){let o=1+(t<<1),i=e[o];const a=o+1;if(a<this.length&&n(e[a],i)<0&&(o=a,i=e[a]),n(i,r)>=0)break;e[t]=i,t=o}e[t]=r}}function r(t,e){return t<e?-1:t>e?1:0}},7147:t=>{"use strict";t.exports=require("fs")},1017:t=>{"use strict";t.exports=require("path")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o].call(i.exports,i,i.exports,n),i.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};return(()=>{"use strict";n.r(o),n.d(o,{LibavoidRouter:()=>y,load:()=>_});var t,e=(t=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||__filename,function(e){var o,r,i;e=e||{},o||(o=void 0!==e?e:{}),o.ready=new Promise((function(t,e){r=t,i=e}));var a,c={};for(a in o)o.hasOwnProperty(a)&&(c[a]=o[a]);var s,u,d,l,p="./this.program";s="object"==typeof window,u="function"==typeof importScripts,d="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,l=!s&&!d&&!u;var f,y,h,g,_,m="";d?(m=u?n(1017).dirname(m)+"/":__dirname+"/",f=function(t,e){return g||(g=n(7147)),_||(_=n(1017)),t=_.normalize(t),g.readFileSync(t,e?null:"utf8")},h=function(t){return(t=f(t,!0)).buffer||(t=new Uint8Array(t)),E(t.buffer),t},1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),process.on("uncaughtException",(function(t){throw t})),process.on("unhandledRejection",H),o.inspect=function(){return"[Emscripten Module object]"}):l?("undefined"!=typeof read&&(f=function(t){return read(t)}),h=function(t){return"function"==typeof readbuffer?new Uint8Array(readbuffer(t)):(E("object"==typeof(t=read(t,"binary"))),t)},"undefined"!=typeof print&&("undefined"==typeof console&&(console={}),console.log=print,console.warn=console.error="undefined"!=typeof printErr?printErr:print)):(s||u)&&(u?m=self.location.href:"undefined"!=typeof document&&document.currentScript&&(m=document.currentScript.src),t&&(m=t),m=0!==m.indexOf("blob:")?m.substr(0,m.lastIndexOf("/")+1):"",f=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},u&&(h=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),y=function(t,e,n){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){200==o.status||0==o.status&&o.response?e(o.response):n()},o.onerror=n,o.send(null)});var v=o.print||console.log.bind(console),b=o.printErr||console.warn.bind(console);for(a in c)c.hasOwnProperty(a)&&(o[a]=c[a]);c=null,o.thisProgram&&(p=o.thisProgram);var S,P,w=[];o.wasmBinary&&(P=o.wasmBinary),o.noExitRuntime,"object"!=typeof WebAssembly&&H("no native wasm support detected");var O=!1;function E(t,e){t||H("Assertion failed: "+e)}var R="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function T(t,e,n){var o=e+n;for(n=e;t[n]&&!(n>=o);)++n;if(16<n-e&&t.subarray&&R)return R.decode(t.subarray(e,n));for(o="";e<n;){var r=t[e++];if(128&r){var i=63&t[e++];if(192==(224&r))o+=String.fromCharCode((31&r)<<6|i);else{var a=63&t[e++];65536>(r=224==(240&r)?(15&r)<<12|i<<6|a:(7&r)<<18|i<<12|a<<6|63&t[e++])?o+=String.fromCharCode(r):(r-=65536,o+=String.fromCharCode(55296|r>>10,56320|1023&r))}}else o+=String.fromCharCode(r)}return o}function I(t){return t?T(x,t,void 0):""}var A,x,C,M,j=[],D=[],N=[],L=[],B=!1;function F(){var t=o.preRun.shift();j.unshift(t)}D.push({Uc:function(){ct()}});var k=0,G=null,V=null;function H(t){throw o.onAbort&&o.onAbort(t),b(t),O=!0,t=new WebAssembly.RuntimeError("abort("+t+"). Build with -s ASSERTIONS=1 for more info."),i(t),t}function K(t){var e=Y;return String.prototype.startsWith?e.startsWith(t):0===e.indexOf(t)}function U(){return K("data:application/octet-stream;base64,")}o.preloadedImages={},o.preloadedAudios={};var Y="libavoid.wasm";if(!U()){var q=Y;Y=o.locateFile?o.locateFile(q,m):m+q}function z(){var t=Y;try{if(t==Y&&P)return new Uint8Array(P);if(h)return h(t);throw"both async and sync fetching of the wasm failed"}catch(t){H(t)}}function W(t){for(;0<t.length;){var e=t.shift();if("function"==typeof e)e(o);else{var n=e.Uc;"number"==typeof n?void 0===e.Pc?M.get(n)():M.get(n)(e.Pc):n(void 0===e.Pc?null:e.Pc)}}}function J(t){this.Gc=t-16,this.Rc=function(t){C[this.Gc+8>>2]=t},this.Tc=function(){return C[this.Gc+8>>2]},this.ud=function(t){C[this.Gc+0>>2]=t},this.Gd=function(){C[this.Gc+4>>2]=0},this.td=function(){A[this.Gc+12>>0]=0},this.Hd=function(){A[this.Gc+13>>0]=0},this.rd=function(t,e){this.Rc(t),this.ud(e),this.Gd(),this.td(),this.Hd()}}var X={};function Z(){if(!Q){var t,e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"};for(t in X)e[t]=X[t];var n=[];for(t in e)n.push(t+"="+e[t]);Q=n}return Q}var Q,$=[null,[],[]];function tt(t){return 0==t%4&&(0!=t%100||0==t%400)}function et(t,e){for(var n=0,o=0;o<=e;n+=t[o++]);return n}var nt=[31,29,31,30,31,30,31,31,30,31,30,31],ot=[31,28,31,30,31,30,31,31,30,31,30,31];function rt(t,e){for(t=new Date(t.getTime());0<e;){var n=t.getMonth(),o=(tt(t.getFullYear())?nt:ot)[n];if(!(e>o-t.getDate())){t.setDate(t.getDate()+e);break}e-=o-t.getDate()+1,t.setDate(1),11>n?t.setMonth(n+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1))}return t}function it(t,e,n,o){function r(t,e,n){for(t="number"==typeof t?t.toString():t||"";t.length<e;)t=n[0]+t;return t}function i(t,e){return r(t,e,"0")}function a(t,e){function n(t){return 0>t?-1:0<t?1:0}var o;return 0===(o=n(t.getFullYear()-e.getFullYear()))&&0===(o=n(t.getMonth()-e.getMonth()))&&(o=n(t.getDate()-e.getDate())),o}function c(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function s(t){t=rt(new Date(t.Jc+1900,0,1),t.Oc);var e=new Date(t.getFullYear()+1,0,4),n=c(new Date(t.getFullYear(),0,4));return e=c(e),0>=a(n,t)?0>=a(e,t)?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var u=C[o+40>>2];for(var d in o={Md:C[o>>2],Ld:C[o+4>>2],Mc:C[o+8>>2],Lc:C[o+12>>2],Kc:C[o+16>>2],Jc:C[o+20>>2],Nc:C[o+24>>2],Oc:C[o+28>>2],Od:C[o+32>>2],Kd:C[o+36>>2],Nd:u?I(u):""},n=I(n),u={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"})n=n.replace(new RegExp(d,"g"),u[d]);var l="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),p="January February March April May June July August September October November December".split(" ");for(d in u={"%a":function(t){return l[t.Nc].substring(0,3)},"%A":function(t){return l[t.Nc]},"%b":function(t){return p[t.Kc].substring(0,3)},"%B":function(t){return p[t.Kc]},"%C":function(t){return i((t.Jc+1900)/100|0,2)},"%d":function(t){return i(t.Lc,2)},"%e":function(t){return r(t.Lc,2," ")},"%g":function(t){return s(t).toString().substring(2)},"%G":function(t){return s(t)},"%H":function(t){return i(t.Mc,2)},"%I":function(t){return 0==(t=t.Mc)?t=12:12<t&&(t-=12),i(t,2)},"%j":function(t){return i(t.Lc+et(tt(t.Jc+1900)?nt:ot,t.Kc-1),3)},"%m":function(t){return i(t.Kc+1,2)},"%M":function(t){return i(t.Ld,2)},"%n":function(){return"\n"},"%p":function(t){return 0<=t.Mc&&12>t.Mc?"AM":"PM"},"%S":function(t){return i(t.Md,2)},"%t":function(){return"\t"},"%u":function(t){return t.Nc||7},"%U":function(t){var e=new Date(t.Jc+1900,0,1),n=0===e.getDay()?e:rt(e,7-e.getDay());return 0>a(n,t=new Date(t.Jc+1900,t.Kc,t.Lc))?i(Math.ceil((31-n.getDate()+(et(tt(t.getFullYear())?nt:ot,t.getMonth()-1)-31)+t.getDate())/7),2):0===a(n,e)?"01":"00"},"%V":function(t){var e=new Date(t.Jc+1901,0,4),n=c(new Date(t.Jc+1900,0,4));e=c(e);var o=rt(new Date(t.Jc+1900,0,1),t.Oc);return 0>a(o,n)?"53":0>=a(e,o)?"01":i(Math.ceil((n.getFullYear()<t.Jc+1900?t.Oc+32-n.getDate():t.Oc+1-n.getDate())/7),2)},"%w":function(t){return t.Nc},"%W":function(t){var e=new Date(t.Jc,0,1),n=1===e.getDay()?e:rt(e,0===e.getDay()?1:7-e.getDay()+1);return 0>a(n,t=new Date(t.Jc+1900,t.Kc,t.Lc))?i(Math.ceil((31-n.getDate()+(et(tt(t.getFullYear())?nt:ot,t.getMonth()-1)-31)+t.getDate())/7),2):0===a(n,e)?"01":"00"},"%y":function(t){return(t.Jc+1900).toString().substring(2)},"%Y":function(t){return t.Jc+1900},"%z":function(t){var e=0<=(t=t.Kd);return t=Math.abs(t)/60,(e?"+":"-")+String("0000"+(t/60*100+t%60)).slice(-4)},"%Z":function(t){return t.Nd},"%%":function(){return"%"}})0<=n.indexOf(d)&&(n=n.replace(new RegExp(d,"g"),u[d](o)));return d=function(t){for(var e=0,n=0;n<t.length;++n){var o=t.charCodeAt(n);55296<=o&&57343>=o&&(o=65536+((1023&o)<<10)|1023&t.charCodeAt(++n)),127>=o?++e:e=2047>=o?e+2:65535>=o?e+3:e+4}if(e=Array(e+1),o=e.length,n=0,0<o){o=n+o-1;for(var r=0;r<t.length;++r){var i=t.charCodeAt(r);if(55296<=i&&57343>=i&&(i=65536+((1023&i)<<10)|1023&t.charCodeAt(++r)),127>=i){if(n>=o)break;e[n++]=i}else{if(2047>=i){if(n+1>=o)break;e[n++]=192|i>>6}else{if(65535>=i){if(n+2>=o)break;e[n++]=224|i>>12}else{if(n+3>=o)break;e[n++]=240|i>>18,e[n++]=128|i>>12&63}e[n++]=128|i>>6&63}e[n++]=128|63&i}}e[n]=0}return e}(n),d.length>e?0:(A.set(d,t),d.length-1)}var at={a:function(t,e,n,o){H("Assertion failed: "+I(t)+", at: "+[e?I(e):"unknown filename",n,o?I(o):"unknown function"])},e:function(t){return st(t+16)+16},d:function(t,e,n){throw new J(t).rd(e,n),t},b:function(){H()},c:function t(){return void 0===t.start&&(t.start=Date.now()),1e3*(Date.now()-t.start)|0},l:function(t,e,n){x.copyWithin(t,e,e+n)},m:function(){H("OOM")},h:function(t,e){var n=0;return Z().forEach((function(o,r){var i=e+n;for(r=C[t+4*r>>2]=i,i=0;i<o.length;++i)A[r++>>0]=o.charCodeAt(i);A[r>>0]=0,n+=o.length+1})),0},i:function(t,e){var n=Z();C[t>>2]=n.length;var o=0;return n.forEach((function(t){o+=t.length+1})),C[e>>2]=o,0},j:function(){return 0},k:function(){},f:function(t,e,n,o){for(var r=0,i=0;i<n;i++){for(var a=C[e+8*i>>2],c=C[e+(8*i+4)>>2],s=0;s<c;s++){var u=x[a+s],d=$[t];0===u||10===u?((1===t?v:b)(T(d,0)),d.length=0):d.push(u)}r+=c}return C[o>>2]=r,0},g:function(t,e,n,o){return it(t,e,n,o)}};!function(){function t(t){o.asm=t.exports,t=o.asm.n.buffer,o.HEAP8=A=new Int8Array(t),o.HEAP16=new Int16Array(t),o.HEAP32=C=new Int32Array(t),o.HEAPU8=x=new Uint8Array(t),o.HEAPU16=new Uint16Array(t),o.HEAPU32=new Uint32Array(t),o.HEAPF32=new Float32Array(t),o.HEAPF64=new Float64Array(t),M=o.asm.p,k--,o.monitorRunDependencies&&o.monitorRunDependencies(k),0==k&&(null!==G&&(clearInterval(G),G=null),V&&(t=V,V=null,t()))}function e(e){t(e.instance)}function n(t){return function(){if(!P&&(s||u)){if("function"==typeof fetch&&!K("file://"))return fetch(Y,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+Y+"'";return t.arrayBuffer()})).catch((function(){return z()}));if(y)return new Promise((function(t,e){y(Y,(function(e){t(new Uint8Array(e))}),e)}))}return Promise.resolve().then((function(){return z()}))}().then((function(t){return WebAssembly.instantiate(t,r)})).then(t,(function(t){b("failed to asynchronously prepare wasm: "+t),H(t)}))}var r={a:at};if(k++,o.monitorRunDependencies&&o.monitorRunDependencies(k),o.instantiateWasm)try{return o.instantiateWasm(r,t)}catch(t){return b("Module.instantiateWasm callback failed with error: "+t),!1}(P||"function"!=typeof WebAssembly.instantiateStreaming||U()||K("file://")||"function"!=typeof fetch?n(e):fetch(Y,{credentials:"same-origin"}).then((function(t){return WebAssembly.instantiateStreaming(t,r).then(e,(function(t){return b("wasm streaming compile failed: "+t),b("falling back to ArrayBuffer instantiation"),n(e)}))}))).catch(i)}();var ct=o.___wasm_call_ctors=function(){return(ct=o.___wasm_call_ctors=o.asm.o).apply(null,arguments)},st=o._malloc=function(){return(st=o._malloc=o.asm.q).apply(null,arguments)};o._free=function(){return(o._free=o.asm.r).apply(null,arguments)};var ut,dt=o._emscripten_bind_VoidPtr___destroy___0=function(){return(dt=o._emscripten_bind_VoidPtr___destroy___0=o.asm.s).apply(null,arguments)},lt=o._emscripten_bind_HyperedgeImprover_HyperedgeImprover_0=function(){return(lt=o._emscripten_bind_HyperedgeImprover_HyperedgeImprover_0=o.asm.t).apply(null,arguments)},pt=o._emscripten_bind_HyperedgeImprover_clear_0=function(){return(pt=o._emscripten_bind_HyperedgeImprover_clear_0=o.asm.u).apply(null,arguments)},ft=o._emscripten_bind_HyperedgeImprover_setRouter_1=function(){return(ft=o._emscripten_bind_HyperedgeImprover_setRouter_1=o.asm.v).apply(null,arguments)},yt=o._emscripten_bind_HyperedgeImprover___destroy___0=function(){return(yt=o._emscripten_bind_HyperedgeImprover___destroy___0=o.asm.w).apply(null,arguments)},ht=o._emscripten_bind_Box_Box_0=function(){return(ht=o._emscripten_bind_Box_Box_0=o.asm.x).apply(null,arguments)},gt=o._emscripten_bind_Box_length_1=function(){return(gt=o._emscripten_bind_Box_length_1=o.asm.y).apply(null,arguments)},_t=o._emscripten_bind_Box_width_0=function(){return(_t=o._emscripten_bind_Box_width_0=o.asm.z).apply(null,arguments)},mt=o._emscripten_bind_Box_height_0=function(){return(mt=o._emscripten_bind_Box_height_0=o.asm.A).apply(null,arguments)},vt=o._emscripten_bind_Box_get_min_0=function(){return(vt=o._emscripten_bind_Box_get_min_0=o.asm.B).apply(null,arguments)},bt=o._emscripten_bind_Box_set_min_1=function(){return(bt=o._emscripten_bind_Box_set_min_1=o.asm.C).apply(null,arguments)},St=o._emscripten_bind_Box_get_max_0=function(){return(St=o._emscripten_bind_Box_get_max_0=o.asm.D).apply(null,arguments)},Pt=o._emscripten_bind_Box_set_max_1=function(){return(Pt=o._emscripten_bind_Box_set_max_1=o.asm.E).apply(null,arguments)},wt=o._emscripten_bind_Box___destroy___0=function(){return(wt=o._emscripten_bind_Box___destroy___0=o.asm.F).apply(null,arguments)},Ot=o._emscripten_bind_PolygonInterface_clear_0=function(){return(Ot=o._emscripten_bind_PolygonInterface_clear_0=o.asm.G).apply(null,arguments)},Et=o._emscripten_bind_PolygonInterface_empty_0=function(){return(Et=o._emscripten_bind_PolygonInterface_empty_0=o.asm.H).apply(null,arguments)},Rt=o._emscripten_bind_PolygonInterface_size_0=function(){return(Rt=o._emscripten_bind_PolygonInterface_size_0=o.asm.I).apply(null,arguments)},Tt=o._emscripten_bind_PolygonInterface_id_0=function(){return(Tt=o._emscripten_bind_PolygonInterface_id_0=o.asm.J).apply(null,arguments)},It=o._emscripten_bind_PolygonInterface_at_1=function(){return(It=o._emscripten_bind_PolygonInterface_at_1=o.asm.K).apply(null,arguments)},At=o._emscripten_bind_PolygonInterface_boundingRectPolygon_0=function(){return(At=o._emscripten_bind_PolygonInterface_boundingRectPolygon_0=o.asm.L).apply(null,arguments)},xt=o._emscripten_bind_PolygonInterface_offsetBoundingBox_1=function(){return(xt=o._emscripten_bind_PolygonInterface_offsetBoundingBox_1=o.asm.M).apply(null,arguments)},Ct=o._emscripten_bind_PolygonInterface_offsetPolygon_1=function(){return(Ct=o._emscripten_bind_PolygonInterface_offsetPolygon_1=o.asm.N).apply(null,arguments)},Mt=o._emscripten_bind_PolygonInterface___destroy___0=function(){return(Mt=o._emscripten_bind_PolygonInterface___destroy___0=o.asm.O).apply(null,arguments)},jt=o._emscripten_bind_Polygon_Polygon_0=function(){return(jt=o._emscripten_bind_Polygon_Polygon_0=o.asm.P).apply(null,arguments)},Dt=o._emscripten_bind_Polygon_Polygon_1=function(){return(Dt=o._emscripten_bind_Polygon_Polygon_1=o.asm.Q).apply(null,arguments)},Nt=o._emscripten_bind_Polygon_setPoint_2=function(){return(Nt=o._emscripten_bind_Polygon_setPoint_2=o.asm.R).apply(null,arguments)},Lt=o._emscripten_bind_Polygon_size_0=function(){return(Lt=o._emscripten_bind_Polygon_size_0=o.asm.S).apply(null,arguments)},Bt=o._emscripten_bind_Polygon_get_ps_1=function(){return(Bt=o._emscripten_bind_Polygon_get_ps_1=o.asm.T).apply(null,arguments)},Ft=o._emscripten_bind_Polygon_set_ps_2=function(){return(Ft=o._emscripten_bind_Polygon_set_ps_2=o.asm.U).apply(null,arguments)},kt=o._emscripten_bind_Polygon___destroy___0=function(){return(kt=o._emscripten_bind_Polygon___destroy___0=o.asm.V).apply(null,arguments)},Gt=o._emscripten_bind_Point_Point_0=function(){return(Gt=o._emscripten_bind_Point_Point_0=o.asm.W).apply(null,arguments)},Vt=o._emscripten_bind_Point_Point_2=function(){return(Vt=o._emscripten_bind_Point_Point_2=o.asm.X).apply(null,arguments)},Ht=o._emscripten_bind_Point_equal_1=function(){return(Ht=o._emscripten_bind_Point_equal_1=o.asm.Y).apply(null,arguments)},Kt=o._emscripten_bind_Point_get_x_0=function(){return(Kt=o._emscripten_bind_Point_get_x_0=o.asm.Z).apply(null,arguments)},Ut=o._emscripten_bind_Point_set_x_1=function(){return(Ut=o._emscripten_bind_Point_set_x_1=o.asm._).apply(null,arguments)},Yt=o._emscripten_bind_Point_get_y_0=function(){return(Yt=o._emscripten_bind_Point_get_y_0=o.asm.$).apply(null,arguments)},qt=o._emscripten_bind_Point_set_y_1=function(){return(qt=o._emscripten_bind_Point_set_y_1=o.asm.aa).apply(null,arguments)},zt=o._emscripten_bind_Point_get_id_0=function(){return(zt=o._emscripten_bind_Point_get_id_0=o.asm.ba).apply(null,arguments)},Wt=o._emscripten_bind_Point_set_id_1=function(){return(Wt=o._emscripten_bind_Point_set_id_1=o.asm.ca).apply(null,arguments)},Jt=o._emscripten_bind_Point_get_vn_0=function(){return(Jt=o._emscripten_bind_Point_get_vn_0=o.asm.da).apply(null,arguments)},Xt=o._emscripten_bind_Point_set_vn_1=function(){return(Xt=o._emscripten_bind_Point_set_vn_1=o.asm.ea).apply(null,arguments)},Zt=o._emscripten_bind_Point___destroy___0=function(){return(Zt=o._emscripten_bind_Point___destroy___0=o.asm.fa).apply(null,arguments)},Qt=o._emscripten_bind_Rectangle_Rectangle_3=function(){return(Qt=o._emscripten_bind_Rectangle_Rectangle_3=o.asm.ga).apply(null,arguments)},$t=o._emscripten_bind_Rectangle___destroy___0=function(){return($t=o._emscripten_bind_Rectangle___destroy___0=o.asm.ha).apply(null,arguments)},te=o._emscripten_bind_HyperedgeTreeNode_HyperedgeTreeNode_0=function(){return(te=o._emscripten_bind_HyperedgeTreeNode_HyperedgeTreeNode_0=o.asm.ia).apply(null,arguments)},ee=o._emscripten_bind_HyperedgeTreeNode_writeEdgesToConns_2=function(){return(ee=o._emscripten_bind_HyperedgeTreeNode_writeEdgesToConns_2=o.asm.ja).apply(null,arguments)},ne=o._emscripten_bind_HyperedgeTreeNode___destroy___0=function(){return(ne=o._emscripten_bind_HyperedgeTreeNode___destroy___0=o.asm.ka).apply(null,arguments)},oe=o._emscripten_bind_HyperedgeTreeEdge_HyperedgeTreeEdge_3=function(){return(oe=o._emscripten_bind_HyperedgeTreeEdge_HyperedgeTreeEdge_3=o.asm.la).apply(null,arguments)},re=o._emscripten_bind_HyperedgeTreeEdge___destroy___0=function(){return(re=o._emscripten_bind_HyperedgeTreeEdge___destroy___0=o.asm.ma).apply(null,arguments)},ie=o._emscripten_bind_AStarPath_AStarPath_0=function(){return(ie=o._emscripten_bind_AStarPath_AStarPath_0=o.asm.na).apply(null,arguments)},ae=o._emscripten_bind_AStarPath_search_4=function(){return(ae=o._emscripten_bind_AStarPath_search_4=o.asm.oa).apply(null,arguments)},ce=o._emscripten_bind_AStarPath___destroy___0=function(){return(ce=o._emscripten_bind_AStarPath___destroy___0=o.asm.pa).apply(null,arguments)},se=o._emscripten_bind_ConnEnd_ConnEnd_1=function(){return(se=o._emscripten_bind_ConnEnd_ConnEnd_1=o.asm.qa).apply(null,arguments)},ue=o._emscripten_bind_ConnEnd_ConnEnd_2=function(){return(ue=o._emscripten_bind_ConnEnd_ConnEnd_2=o.asm.ra).apply(null,arguments)},de=o._emscripten_bind_ConnEnd___destroy___0=function(){return(de=o._emscripten_bind_ConnEnd___destroy___0=o.asm.sa).apply(null,arguments)},le=o._emscripten_bind_ActionInfo_ActionInfo_2=function(){return(le=o._emscripten_bind_ActionInfo_ActionInfo_2=o.asm.ta).apply(null,arguments)},pe=o._emscripten_bind_ActionInfo_ActionInfo_3=function(){return(pe=o._emscripten_bind_ActionInfo_ActionInfo_3=o.asm.ua).apply(null,arguments)},fe=o._emscripten_bind_ActionInfo_ActionInfo_4=function(){return(fe=o._emscripten_bind_ActionInfo_ActionInfo_4=o.asm.va).apply(null,arguments)},ye=o._emscripten_bind_ActionInfo_obstacle_0=function(){return(ye=o._emscripten_bind_ActionInfo_obstacle_0=o.asm.wa).apply(null,arguments)},he=o._emscripten_bind_ActionInfo_shape_0=function(){return(he=o._emscripten_bind_ActionInfo_shape_0=o.asm.xa).apply(null,arguments)},ge=o._emscripten_bind_ActionInfo_conn_0=function(){return(ge=o._emscripten_bind_ActionInfo_conn_0=o.asm.ya).apply(null,arguments)},_e=o._emscripten_bind_ActionInfo_junction_0=function(){return(_e=o._emscripten_bind_ActionInfo_junction_0=o.asm.za).apply(null,arguments)},me=o._emscripten_bind_ActionInfo_addConnEndUpdate_3=function(){return(me=o._emscripten_bind_ActionInfo_addConnEndUpdate_3=o.asm.Aa).apply(null,arguments)},ve=o._emscripten_bind_ActionInfo_get_type_0=function(){return(ve=o._emscripten_bind_ActionInfo_get_type_0=o.asm.Ba).apply(null,arguments)},be=o._emscripten_bind_ActionInfo_set_type_1=function(){return(be=o._emscripten_bind_ActionInfo_set_type_1=o.asm.Ca).apply(null,arguments)},Se=o._emscripten_bind_ActionInfo_get_objPtr_0=function(){return(Se=o._emscripten_bind_ActionInfo_get_objPtr_0=o.asm.Da).apply(null,arguments)},Pe=o._emscripten_bind_ActionInfo_set_objPtr_1=function(){return(Pe=o._emscripten_bind_ActionInfo_set_objPtr_1=o.asm.Ea).apply(null,arguments)},we=o._emscripten_bind_ActionInfo_get_newPoly_0=function(){return(we=o._emscripten_bind_ActionInfo_get_newPoly_0=o.asm.Fa).apply(null,arguments)},Oe=o._emscripten_bind_ActionInfo_set_newPoly_1=function(){return(Oe=o._emscripten_bind_ActionInfo_set_newPoly_1=o.asm.Ga).apply(null,arguments)},Ee=o._emscripten_bind_ActionInfo_get_newPosition_0=function(){return(Ee=o._emscripten_bind_ActionInfo_get_newPosition_0=o.asm.Ha).apply(null,arguments)},Re=o._emscripten_bind_ActionInfo_set_newPosition_1=function(){return(Re=o._emscripten_bind_ActionInfo_set_newPosition_1=o.asm.Ia).apply(null,arguments)},Te=o._emscripten_bind_ActionInfo_get_firstMove_0=function(){return(Te=o._emscripten_bind_ActionInfo_get_firstMove_0=o.asm.Ja).apply(null,arguments)},Ie=o._emscripten_bind_ActionInfo_set_firstMove_1=function(){return(Ie=o._emscripten_bind_ActionInfo_set_firstMove_1=o.asm.Ka).apply(null,arguments)},Ae=o._emscripten_bind_ActionInfo___destroy___0=function(){return(Ae=o._emscripten_bind_ActionInfo___destroy___0=o.asm.La).apply(null,arguments)},xe=o._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_2=function(){return(xe=o._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_2=o.asm.Ma).apply(null,arguments)},Ce=o._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_3=function(){return(Ce=o._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_3=o.asm.Na).apply(null,arguments)},Me=o._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_6=function(){return(Me=o._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_6=o.asm.Oa).apply(null,arguments)},je=o._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_7=function(){return(je=o._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_7=o.asm.Pa).apply(null,arguments)},De=o._emscripten_bind_ShapeConnectionPin_setConnectionCost_1=function(){return(De=o._emscripten_bind_ShapeConnectionPin_setConnectionCost_1=o.asm.Qa).apply(null,arguments)},Ne=o._emscripten_bind_ShapeConnectionPin_position_0=function(){return(Ne=o._emscripten_bind_ShapeConnectionPin_position_0=o.asm.Ra).apply(null,arguments)},Le=o._emscripten_bind_ShapeConnectionPin_position_1=function(){return(Le=o._emscripten_bind_ShapeConnectionPin_position_1=o.asm.Sa).apply(null,arguments)},Be=o._emscripten_bind_ShapeConnectionPin_directions_0=function(){return(Be=o._emscripten_bind_ShapeConnectionPin_directions_0=o.asm.Ta).apply(null,arguments)},Fe=o._emscripten_bind_ShapeConnectionPin_setExclusive_1=function(){return(Fe=o._emscripten_bind_ShapeConnectionPin_setExclusive_1=o.asm.Ua).apply(null,arguments)},ke=o._emscripten_bind_ShapeConnectionPin_isExclusive_0=function(){return(ke=o._emscripten_bind_ShapeConnectionPin_isExclusive_0=o.asm.Va).apply(null,arguments)},Ge=o._emscripten_bind_ShapeConnectionPin___destroy___0=function(){return(Ge=o._emscripten_bind_ShapeConnectionPin___destroy___0=o.asm.Wa).apply(null,arguments)},Ve=o._emscripten_bind_Obstacle_id_0=function(){return(Ve=o._emscripten_bind_Obstacle_id_0=o.asm.Xa).apply(null,arguments)},He=o._emscripten_bind_Obstacle_polygon_0=function(){return(He=o._emscripten_bind_Obstacle_polygon_0=o.asm.Ya).apply(null,arguments)},Ke=o._emscripten_bind_Obstacle_router_0=function(){return(Ke=o._emscripten_bind_Obstacle_router_0=o.asm.Za).apply(null,arguments)},Ue=o._emscripten_bind_Obstacle_position_0=function(){return(Ue=o._emscripten_bind_Obstacle_position_0=o.asm._a).apply(null,arguments)},Ye=o._emscripten_bind_Obstacle___destroy___0=function(){return(Ye=o._emscripten_bind_Obstacle___destroy___0=o.asm.$a).apply(null,arguments)},qe=o._emscripten_bind_JunctionRef_JunctionRef_2=function(){return(qe=o._emscripten_bind_JunctionRef_JunctionRef_2=o.asm.ab).apply(null,arguments)},ze=o._emscripten_bind_JunctionRef_JunctionRef_3=function(){return(ze=o._emscripten_bind_JunctionRef_JunctionRef_3=o.asm.bb).apply(null,arguments)},We=o._emscripten_bind_JunctionRef_position_0=function(){return(We=o._emscripten_bind_JunctionRef_position_0=o.asm.cb).apply(null,arguments)},Je=o._emscripten_bind_JunctionRef___destroy___0=function(){return(Je=o._emscripten_bind_JunctionRef___destroy___0=o.asm.db).apply(null,arguments)},Xe=o._emscripten_bind_ShapeRef_ShapeRef_2=function(){return(Xe=o._emscripten_bind_ShapeRef_ShapeRef_2=o.asm.eb).apply(null,arguments)},Ze=o._emscripten_bind_ShapeRef_ShapeRef_3=function(){return(Ze=o._emscripten_bind_ShapeRef_ShapeRef_3=o.asm.fb).apply(null,arguments)},Qe=o._emscripten_bind_ShapeRef_polygon_0=function(){return(Qe=o._emscripten_bind_ShapeRef_polygon_0=o.asm.gb).apply(null,arguments)},$e=o._emscripten_bind_ShapeRef_position_0=function(){return($e=o._emscripten_bind_ShapeRef_position_0=o.asm.hb).apply(null,arguments)},tn=o._emscripten_bind_ShapeRef___destroy___0=function(){return(tn=o._emscripten_bind_ShapeRef___destroy___0=o.asm.ib).apply(null,arguments)},en=o._emscripten_bind_HyperedgeNewAndDeletedObjectLists___destroy___0=function(){return(en=o._emscripten_bind_HyperedgeNewAndDeletedObjectLists___destroy___0=o.asm.jb).apply(null,arguments)},nn=o._emscripten_bind_HyperedgeRerouter_HyperedgeRerouter_0=function(){return(nn=o._emscripten_bind_HyperedgeRerouter_HyperedgeRerouter_0=o.asm.kb).apply(null,arguments)},on=o._emscripten_bind_HyperedgeRerouter_registerHyperedgeForRerouting_1=function(){return(on=o._emscripten_bind_HyperedgeRerouter_registerHyperedgeForRerouting_1=o.asm.lb).apply(null,arguments)},rn=o._emscripten_bind_HyperedgeRerouter___destroy___0=function(){return(rn=o._emscripten_bind_HyperedgeRerouter___destroy___0=o.asm.mb).apply(null,arguments)},an=o._emscripten_bind_VertInf___destroy___0=function(){return(an=o._emscripten_bind_VertInf___destroy___0=o.asm.nb).apply(null,arguments)},cn=o._emscripten_bind_VertID_VertID_0=function(){return(cn=o._emscripten_bind_VertID_VertID_0=o.asm.ob).apply(null,arguments)},sn=o._emscripten_bind_VertID_VertID_2=function(){return(sn=o._emscripten_bind_VertID_VertID_2=o.asm.pb).apply(null,arguments)},un=o._emscripten_bind_VertID_VertID_3=function(){return(un=o._emscripten_bind_VertID_VertID_3=o.asm.qb).apply(null,arguments)},dn=o._emscripten_bind_VertID_get_objID_0=function(){return(dn=o._emscripten_bind_VertID_get_objID_0=o.asm.rb).apply(null,arguments)},ln=o._emscripten_bind_VertID_set_objID_1=function(){return(ln=o._emscripten_bind_VertID_set_objID_1=o.asm.sb).apply(null,arguments)},pn=o._emscripten_bind_VertID_get_vn_0=function(){return(pn=o._emscripten_bind_VertID_get_vn_0=o.asm.tb).apply(null,arguments)},fn=o._emscripten_bind_VertID_set_vn_1=function(){return(fn=o._emscripten_bind_VertID_set_vn_1=o.asm.ub).apply(null,arguments)},yn=o._emscripten_bind_VertID_get_props_0=function(){return(yn=o._emscripten_bind_VertID_get_props_0=o.asm.vb).apply(null,arguments)},hn=o._emscripten_bind_VertID_set_props_1=function(){return(hn=o._emscripten_bind_VertID_set_props_1=o.asm.wb).apply(null,arguments)},gn=o._emscripten_bind_VertID_get_src_0=function(){return(gn=o._emscripten_bind_VertID_get_src_0=o.asm.xb).apply(null,arguments)},_n=o._emscripten_bind_VertID_get_tar_0=function(){return(_n=o._emscripten_bind_VertID_get_tar_0=o.asm.yb).apply(null,arguments)},mn=o._emscripten_bind_VertID_get_PROP_ConnPoint_0=function(){return(mn=o._emscripten_bind_VertID_get_PROP_ConnPoint_0=o.asm.zb).apply(null,arguments)},vn=o._emscripten_bind_VertID_get_PROP_OrthShapeEdge_0=function(){return(vn=o._emscripten_bind_VertID_get_PROP_OrthShapeEdge_0=o.asm.Ab).apply(null,arguments)},bn=o._emscripten_bind_VertID_get_PROP_ConnectionPin_0=function(){return(bn=o._emscripten_bind_VertID_get_PROP_ConnectionPin_0=o.asm.Bb).apply(null,arguments)},Sn=o._emscripten_bind_VertID_get_PROP_ConnCheckpoint_0=function(){return(Sn=o._emscripten_bind_VertID_get_PROP_ConnCheckpoint_0=o.asm.Cb).apply(null,arguments)},Pn=o._emscripten_bind_VertID_get_PROP_DummyPinHelper_0=function(){return(Pn=o._emscripten_bind_VertID_get_PROP_DummyPinHelper_0=o.asm.Db).apply(null,arguments)},wn=o._emscripten_bind_VertID___destroy___0=function(){return(wn=o._emscripten_bind_VertID___destroy___0=o.asm.Eb).apply(null,arguments)},On=o._emscripten_bind_MinimumTerminalSpanningTree___destroy___0=function(){return(On=o._emscripten_bind_MinimumTerminalSpanningTree___destroy___0=o.asm.Fb).apply(null,arguments)},En=o._emscripten_bind_Checkpoint_Checkpoint_1=function(){return(En=o._emscripten_bind_Checkpoint_Checkpoint_1=o.asm.Gb).apply(null,arguments)},Rn=o._emscripten_bind_Checkpoint___destroy___0=function(){return(Rn=o._emscripten_bind_Checkpoint___destroy___0=o.asm.Hb).apply(null,arguments)},Tn=o._emscripten_bind_ConnRef_ConnRef_3=function(){return(Tn=o._emscripten_bind_ConnRef_ConnRef_3=o.asm.Ib).apply(null,arguments)},In=o._emscripten_bind_ConnRef_ConnRef_4=function(){return(In=o._emscripten_bind_ConnRef_ConnRef_4=o.asm.Jb).apply(null,arguments)},An=o._emscripten_bind_ConnRef_id_0=function(){return(An=o._emscripten_bind_ConnRef_id_0=o.asm.Kb).apply(null,arguments)},xn=o._emscripten_bind_ConnRef_setCallback_2=function(){return(xn=o._emscripten_bind_ConnRef_setCallback_2=o.asm.Lb).apply(null,arguments)},Cn=o._emscripten_bind_ConnRef_setSourceEndpoint_1=function(){return(Cn=o._emscripten_bind_ConnRef_setSourceEndpoint_1=o.asm.Mb).apply(null,arguments)},Mn=o._emscripten_bind_ConnRef_setDestEndpoint_1=function(){return(Mn=o._emscripten_bind_ConnRef_setDestEndpoint_1=o.asm.Nb).apply(null,arguments)},jn=o._emscripten_bind_ConnRef_routingType_0=function(){return(jn=o._emscripten_bind_ConnRef_routingType_0=o.asm.Ob).apply(null,arguments)},Dn=o._emscripten_bind_ConnRef_setRoutingType_1=function(){return(Dn=o._emscripten_bind_ConnRef_setRoutingType_1=o.asm.Pb).apply(null,arguments)},Nn=o._emscripten_bind_ConnRef_displayRoute_0=function(){return(Nn=o._emscripten_bind_ConnRef_displayRoute_0=o.asm.Qb).apply(null,arguments)},Ln=o._emscripten_bind_ConnRef___destroy___0=function(){return(Ln=o._emscripten_bind_ConnRef___destroy___0=o.asm.Rb).apply(null,arguments)},Bn=o._emscripten_bind_EdgeInf_EdgeInf_2=function(){return(Bn=o._emscripten_bind_EdgeInf_EdgeInf_2=o.asm.Sb).apply(null,arguments)},Fn=o._emscripten_bind_EdgeInf_EdgeInf_3=function(){return(Fn=o._emscripten_bind_EdgeInf_EdgeInf_3=o.asm.Tb).apply(null,arguments)},kn=o._emscripten_bind_EdgeInf___destroy___0=function(){return(kn=o._emscripten_bind_EdgeInf___destroy___0=o.asm.Ub).apply(null,arguments)},Gn=o._emscripten_bind_LineRep_get_begin_0=function(){return(Gn=o._emscripten_bind_LineRep_get_begin_0=o.asm.Vb).apply(null,arguments)},Vn=o._emscripten_bind_LineRep_set_begin_1=function(){return(Vn=o._emscripten_bind_LineRep_set_begin_1=o.asm.Wb).apply(null,arguments)},Hn=o._emscripten_bind_LineRep_get_end_0=function(){return(Hn=o._emscripten_bind_LineRep_get_end_0=o.asm.Xb).apply(null,arguments)},Kn=o._emscripten_bind_LineRep_set_end_1=function(){return(Kn=o._emscripten_bind_LineRep_set_end_1=o.asm.Yb).apply(null,arguments)},Un=o._emscripten_bind_LineRep___destroy___0=function(){return(Un=o._emscripten_bind_LineRep___destroy___0=o.asm.Zb).apply(null,arguments)},Yn=o._emscripten_bind_Router_Router_1=function(){return(Yn=o._emscripten_bind_Router_Router_1=o.asm._b).apply(null,arguments)},qn=o._emscripten_bind_Router_processTransaction_0=function(){return(qn=o._emscripten_bind_Router_processTransaction_0=o.asm.$b).apply(null,arguments)},zn=o._emscripten_bind_Router_printInfo_0=function(){return(zn=o._emscripten_bind_Router_printInfo_0=o.asm.ac).apply(null,arguments)},Wn=o._emscripten_bind_Router_deleteConnector_1=function(){return(Wn=o._emscripten_bind_Router_deleteConnector_1=o.asm.bc).apply(null,arguments)},Jn=o._emscripten_bind_Router_moveShape_3=function(){return(Jn=o._emscripten_bind_Router_moveShape_3=o.asm.cc).apply(null,arguments)},Xn=o._emscripten_bind_Router___destroy___0=function(){return(Xn=o._emscripten_bind_Router___destroy___0=o.asm.dc).apply(null,arguments)},Zn=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirNone=function(){return(Zn=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirNone=o.asm.ec).apply(null,arguments)},Qn=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirUp=function(){return(Qn=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirUp=o.asm.fc).apply(null,arguments)},$n=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirDown=function(){return($n=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirDown=o.asm.gc).apply(null,arguments)},to=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirLeft=function(){return(to=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirLeft=o.asm.hc).apply(null,arguments)},eo=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirRight=function(){return(eo=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirRight=o.asm.ic).apply(null,arguments)},no=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirAll=function(){return(no=o._emscripten_enum_Avoid_ConnDirFlag_ConnDirAll=o.asm.jc).apply(null,arguments)},oo=o._emscripten_enum_Avoid_ConnEndType_ConnEndPoint=function(){return(oo=o._emscripten_enum_Avoid_ConnEndType_ConnEndPoint=o.asm.kc).apply(null,arguments)},ro=o._emscripten_enum_Avoid_ConnEndType_ConnEndShapePin=function(){return(ro=o._emscripten_enum_Avoid_ConnEndType_ConnEndShapePin=o.asm.lc).apply(null,arguments)},io=o._emscripten_enum_Avoid_ConnEndType_ConnEndJunction=function(){return(io=o._emscripten_enum_Avoid_ConnEndType_ConnEndJunction=o.asm.mc).apply(null,arguments)},ao=o._emscripten_enum_Avoid_ConnEndType_ConnEndEmpty=function(){return(ao=o._emscripten_enum_Avoid_ConnEndType_ConnEndEmpty=o.asm.nc).apply(null,arguments)},co=o._emscripten_enum_Avoid_ActionType_ShapeMove=function(){return(co=o._emscripten_enum_Avoid_ActionType_ShapeMove=o.asm.oc).apply(null,arguments)},so=o._emscripten_enum_Avoid_ActionType_ShapeAdd=function(){return(so=o._emscripten_enum_Avoid_ActionType_ShapeAdd=o.asm.pc).apply(null,arguments)},uo=o._emscripten_enum_Avoid_ActionType_ShapeRemove=function(){return(uo=o._emscripten_enum_Avoid_ActionType_ShapeRemove=o.asm.qc).apply(null,arguments)},lo=o._emscripten_enum_Avoid_ActionType_JunctionMove=function(){return(lo=o._emscripten_enum_Avoid_ActionType_JunctionMove=o.asm.rc).apply(null,arguments)},po=o._emscripten_enum_Avoid_ActionType_JunctionAdd=function(){return(po=o._emscripten_enum_Avoid_ActionType_JunctionAdd=o.asm.sc).apply(null,arguments)},fo=o._emscripten_enum_Avoid_ActionType_JunctionRemove=function(){return(fo=o._emscripten_enum_Avoid_ActionType_JunctionRemove=o.asm.tc).apply(null,arguments)},yo=o._emscripten_enum_Avoid_ActionType_ConnChange=function(){return(yo=o._emscripten_enum_Avoid_ActionType_ConnChange=o.asm.uc).apply(null,arguments)},ho=o._emscripten_enum_Avoid_ActionType_ConnectionPinChange=function(){return(ho=o._emscripten_enum_Avoid_ActionType_ConnectionPinChange=o.asm.vc).apply(null,arguments)},go=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW90=function(){return(go=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW90=o.asm.wc).apply(null,arguments)},_o=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW180=function(){return(_o=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW180=o.asm.xc).apply(null,arguments)},mo=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW270=function(){return(mo=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW270=o.asm.yc).apply(null,arguments)},vo=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipX=function(){return(vo=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipX=o.asm.zc).apply(null,arguments)},bo=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipY=function(){return(bo=o._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipY=o.asm.Ac).apply(null,arguments)},So=o._emscripten_enum_Avoid_ConnType_ConnType_None=function(){return(So=o._emscripten_enum_Avoid_ConnType_ConnType_None=o.asm.Bc).apply(null,arguments)},Po=o._emscripten_enum_Avoid_ConnType_ConnType_PolyLine=function(){return(Po=o._emscripten_enum_Avoid_ConnType_ConnType_PolyLine=o.asm.Cc).apply(null,arguments)},wo=o._emscripten_enum_Avoid_ConnType_ConnType_Orthogonal=function(){return(wo=o._emscripten_enum_Avoid_ConnType_ConnType_Orthogonal=o.asm.Dc).apply(null,arguments)},Oo=o._emscripten_enum_Avoid_RouterFlag_PolyLineRouting=function(){return(Oo=o._emscripten_enum_Avoid_RouterFlag_PolyLineRouting=o.asm.Ec).apply(null,arguments)},Eo=o._emscripten_enum_Avoid_RouterFlag_OrthogonalRouting=function(){return(Eo=o._emscripten_enum_Avoid_RouterFlag_OrthogonalRouting=o.asm.Fc).apply(null,arguments)};function Ro(){function t(){if(!ut&&(ut=!0,o.calledRun=!0,!O)){if(B=!0,W(D),W(N),r(o),o.onRuntimeInitialized&&o.onRuntimeInitialized(),o.postRun)for("function"==typeof o.postRun&&(o.postRun=[o.postRun]);o.postRun.length;){var t=o.postRun.shift();L.unshift(t)}W(L)}}if(!(0<k)){if(o.preRun)for("function"==typeof o.preRun&&(o.preRun=[o.preRun]);o.preRun.length;)F();W(j),0<k||(o.setStatus?(o.setStatus("Running..."),setTimeout((function(){setTimeout((function(){o.setStatus("")}),1),t()}),1)):t())}}if(V=function t(){ut||Ro(),ut||(V=t)},o.run=Ro,o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();function To(){}function Io(t){return(t||To).Ic}function Ao(t,e){var n=Io(e),o=n[t];return o||((o=Object.create((e||To).prototype)).Gc=t,n[t]=o)}Ro(),To.prototype=Object.create(To.prototype),To.prototype.constructor=To,To.prototype.Hc=To,To.Ic={},o.WrapperObject=To,o.getCache=Io,o.wrapPointer=Ao,o.castObject=function(t,e){return Ao(t.Gc,e)},o.NULL=Ao(0),o.destroy=function(t){if(!t.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";t.__destroy__(),delete Io(t.Hc)[t.Gc]},o.compare=function(t,e){return t.Gc===e.Gc},o.getPointer=function(t){return t.Gc},o.getClass=function(t){return t.Hc};var xo=0,Co=0,Mo=[],jo=0;function Do(){throw"cannot construct a VoidPtr, no constructor in IDL"}function No(){this.Gc=lt(),Io(No)[this.Gc]=this}function Lo(){this.Gc=ht(),Io(Lo)[this.Gc]=this}function Bo(){throw"cannot construct a PolygonInterface, no constructor in IDL"}function Fo(t){t&&"object"==typeof t&&(t=t.Gc),this.Gc=void 0===t?jt():Dt(t),Io(Fo)[this.Gc]=this}function ko(t,e){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),this.Gc=void 0===t?Gt():void 0===e?_emscripten_bind_Point_Point_1(t):Vt(t,e),Io(ko)[this.Gc]=this}function Go(t,e,n){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),this.Gc=Qt(t,e,n),Io(Go)[this.Gc]=this}function Vo(){this.Gc=te(),Io(Vo)[this.Gc]=this}function Ho(t,e,n){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),this.Gc=oe(t,e,n),Io(Ho)[this.Gc]=this}function Ko(){this.Gc=ie(),Io(Ko)[this.Gc]=this}function Uo(t,e){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),this.Gc=void 0===e?se(t):ue(t,e),Io(Uo)[this.Gc]=this}function Yo(t,e,n,o){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),o&&"object"==typeof o&&(o=o.Gc),this.Gc=void 0===n?le(t,e):void 0===o?pe(t,e,n):fe(t,e,n,o),Io(Yo)[this.Gc]=this}function qo(t,e,n,o,r,i,a){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),o&&"object"==typeof o&&(o=o.Gc),r&&"object"==typeof r&&(r=r.Gc),i&&"object"==typeof i&&(i=i.Gc),a&&"object"==typeof a&&(a=a.Gc),this.Gc=void 0===n?xe(t,e):void 0===o?Ce(t,e,n):void 0===r?_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_4(t,e,n,o):void 0===i?_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_5(t,e,n,o,r):void 0===a?Me(t,e,n,o,r,i):je(t,e,n,o,r,i,a),Io(qo)[this.Gc]=this}function zo(){throw"cannot construct a Obstacle, no constructor in IDL"}function Wo(t,e,n){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),this.Gc=void 0===n?qe(t,e):ze(t,e,n),Io(Wo)[this.Gc]=this}function Jo(t,e,n){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),this.Gc=void 0===n?Xe(t,e):Ze(t,e,n),Io(Jo)[this.Gc]=this}function Xo(){throw"cannot construct a HyperedgeNewAndDeletedObjectLists, no constructor in IDL"}function Zo(){this.Gc=nn(),Io(Zo)[this.Gc]=this}function Qo(){throw"cannot construct a VertInf, no constructor in IDL"}function $o(t,e,n){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),this.Gc=void 0===t?cn():void 0===e?_emscripten_bind_VertID_VertID_1(t):void 0===n?sn(t,e):un(t,e,n),Io($o)[this.Gc]=this}function tr(){throw"cannot construct a MinimumTerminalSpanningTree, no constructor in IDL"}function er(t){t&&"object"==typeof t&&(t=t.Gc),this.Gc=En(t),Io(er)[this.Gc]=this}function nr(t,e,n,o){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),o&&"object"==typeof o&&(o=o.Gc),this.Gc=void 0===o?Tn(t,e,n):In(t,e,n,o),Io(nr)[this.Gc]=this}function or(t,e,n){t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),this.Gc=void 0===n?Bn(t,e):Fn(t,e,n),Io(or)[this.Gc]=this}function rr(){throw"cannot construct a LineRep, no constructor in IDL"}function ir(t){t&&"object"==typeof t&&(t=t.Gc),this.Gc=Yn(t),Io(ir)[this.Gc]=this}return Do.prototype=Object.create(To.prototype),Do.prototype.constructor=Do,Do.prototype.Hc=Do,Do.Ic={},o.VoidPtr=Do,Do.prototype.__destroy__=function(){dt(this.Gc)},No.prototype=Object.create(To.prototype),No.prototype.constructor=No,No.prototype.Hc=No,No.Ic={},o.HyperedgeImprover=No,No.prototype.clear=No.prototype.clear=function(){pt(this.Gc)},No.prototype.setRouter=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),ft(e,t)},No.prototype.__destroy__=function(){yt(this.Gc)},Lo.prototype=Object.create(To.prototype),Lo.prototype.constructor=Lo,Lo.prototype.Hc=Lo,Lo.Ic={},o.Box=Lo,Lo.prototype.length=Lo.prototype.length=function(t){var e=this.Gc;return t&&"object"==typeof t&&(t=t.Gc),gt(e,t)},Lo.prototype.width=Lo.prototype.width=function(){return _t(this.Gc)},Lo.prototype.height=Lo.prototype.height=function(){return mt(this.Gc)},Lo.prototype.get_min=Lo.prototype.ed=function(){return Ao(vt(this.Gc),ko)},Lo.prototype.set_min=Lo.prototype.zd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),bt(e,t)},Object.defineProperty(Lo.prototype,"min",{get:Lo.prototype.ed,set:Lo.prototype.zd}),Lo.prototype.get_max=Lo.prototype.dd=function(){return Ao(St(this.Gc),ko)},Lo.prototype.set_max=Lo.prototype.yd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Pt(e,t)},Object.defineProperty(Lo.prototype,"max",{get:Lo.prototype.dd,set:Lo.prototype.yd}),Lo.prototype.__destroy__=function(){wt(this.Gc)},Bo.prototype=Object.create(To.prototype),Bo.prototype.constructor=Bo,Bo.prototype.Hc=Bo,Bo.Ic={},o.PolygonInterface=Bo,Bo.prototype.clear=Bo.prototype.clear=function(){Ot(this.Gc)},Bo.prototype.empty=Bo.prototype.empty=function(){return!!Et(this.Gc)},Bo.prototype.size=Bo.prototype.size=function(){return Rt(this.Gc)},Bo.prototype.id=Bo.prototype.id=function(){return Tt(this.Gc)},Bo.prototype.at=function(t){var e=this.Gc;return t&&"object"==typeof t&&(t=t.Gc),Ao(It(e,t),ko)},Bo.prototype.boundingRectPolygon=function(){return Ao(At(this.Gc),Fo)},Bo.prototype.offsetBoundingBox=function(t){var e=this.Gc;return t&&"object"==typeof t&&(t=t.Gc),Ao(xt(e,t),Lo)},Bo.prototype.offsetPolygon=function(t){var e=this.Gc;return t&&"object"==typeof t&&(t=t.Gc),Ao(Ct(e,t),Fo)},Bo.prototype.__destroy__=function(){Mt(this.Gc)},Fo.prototype=Object.create(To.prototype),Fo.prototype.constructor=Fo,Fo.prototype.Hc=Fo,Fo.Ic={},o.Polygon=Fo,Fo.prototype.setPoint=function(t,e){var n=this.Gc;t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),Nt(n,t,e)},Fo.prototype.size=Fo.prototype.size=function(){return Lt(this.Gc)},Fo.prototype.get_ps=Fo.prototype.md=function(t){var e=this.Gc;return t&&"object"==typeof t&&(t=t.Gc),Ao(Bt(e,t),ko)},Fo.prototype.set_ps=Fo.prototype.Fd=function(t,e){var n=this.Gc;if(jo){for(var r=0;r<Mo.length;r++)o._free(Mo[r]);Mo.length=0,o._free(xo),xo=0,Co+=jo,jo=0}xo||(Co+=128,E(xo=o._malloc(Co))),t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),Ft(n,t,e)},Object.defineProperty(Fo.prototype,"ps",{get:Fo.prototype.md,set:Fo.prototype.Fd}),Fo.prototype.__destroy__=function(){kt(this.Gc)},ko.prototype=Object.create(To.prototype),ko.prototype.constructor=ko,ko.prototype.Hc=ko,ko.Ic={},o.Point=ko,ko.prototype.equal=ko.prototype.equal=function(t){var e=this.Gc;return t&&"object"==typeof t&&(t=t.Gc),!!Ht(e,t)},ko.prototype.get_x=ko.prototype.pd=function(){return Kt(this.Gc)},ko.prototype.set_x=ko.prototype.Id=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Ut(e,t)},Object.defineProperty(ko.prototype,"x",{get:ko.prototype.pd,set:ko.prototype.Id}),ko.prototype.get_y=ko.prototype.qd=function(){return Yt(this.Gc)},ko.prototype.set_y=ko.prototype.Jd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),qt(e,t)},Object.defineProperty(ko.prototype,"y",{get:ko.prototype.qd,set:ko.prototype.Jd}),ko.prototype.get_id=ko.prototype.cd=function(){return zt(this.Gc)},ko.prototype.set_id=ko.prototype.xd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Wt(e,t)},Object.defineProperty(ko.prototype,"id",{get:ko.prototype.cd,set:ko.prototype.xd}),ko.prototype.get_vn=ko.prototype.Qc=function(){return Jt(this.Gc)},ko.prototype.set_vn=ko.prototype.Sc=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Xt(e,t)},Object.defineProperty(ko.prototype,"vn",{get:ko.prototype.Qc,set:ko.prototype.Sc}),ko.prototype.__destroy__=function(){Zt(this.Gc)},Go.prototype=Object.create(To.prototype),Go.prototype.constructor=Go,Go.prototype.Hc=Go,Go.Ic={},o.Rectangle=Go,Go.prototype.__destroy__=function(){$t(this.Gc)},Vo.prototype=Object.create(To.prototype),Vo.prototype.constructor=Vo,Vo.prototype.Hc=Vo,Vo.Ic={},o.HyperedgeTreeNode=Vo,Vo.prototype.writeEdgesToConns=function(t,e){var n=this.Gc;t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),ee(n,t,e)},Vo.prototype.__destroy__=function(){ne(this.Gc)},Ho.prototype=Object.create(To.prototype),Ho.prototype.constructor=Ho,Ho.prototype.Hc=Ho,Ho.Ic={},o.HyperedgeTreeEdge=Ho,Ho.prototype.__destroy__=function(){re(this.Gc)},Ko.prototype=Object.create(To.prototype),Ko.prototype.constructor=Ko,Ko.prototype.Hc=Ko,Ko.Ic={},o.AStarPath=Ko,Ko.prototype.search=Ko.prototype.search=function(t,e,n,o){var r=this.Gc;t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),o&&"object"==typeof o&&(o=o.Gc),ae(r,t,e,n,o)},Ko.prototype.__destroy__=function(){ce(this.Gc)},Uo.prototype=Object.create(To.prototype),Uo.prototype.constructor=Uo,Uo.prototype.Hc=Uo,Uo.Ic={},o.ConnEnd=Uo,Uo.prototype.__destroy__=function(){de(this.Gc)},Yo.prototype=Object.create(To.prototype),Yo.prototype.constructor=Yo,Yo.prototype.Hc=Yo,Yo.Ic={},o.ActionInfo=Yo,Yo.prototype.obstacle=function(){return Ao(ye(this.Gc),zo)},Yo.prototype.shape=Yo.prototype.shape=function(){return Ao(he(this.Gc),Jo)},Yo.prototype.conn=function(){return Ao(ge(this.Gc),nr)},Yo.prototype.junction=function(){return Ao(_e(this.Gc),Wo)},Yo.prototype.addConnEndUpdate=function(t,e,n){var o=this.Gc;t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),me(o,t,e,n)},Yo.prototype.get_type=Yo.prototype.Tc=function(){return ve(this.Gc)},Yo.prototype.set_type=Yo.prototype.Rc=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),be(e,t)},Object.defineProperty(Yo.prototype,"type",{get:Yo.prototype.Tc,set:Yo.prototype.Rc}),Yo.prototype.get_objPtr=Yo.prototype.kd=function(){return Ao(Se(this.Gc),Do)},Yo.prototype.set_objPtr=Yo.prototype.Dd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Pe(e,t)},Object.defineProperty(Yo.prototype,"objPtr",{get:Yo.prototype.kd,set:Yo.prototype.Dd}),Yo.prototype.get_newPoly=Yo.prototype.gd=function(){return Ao(we(this.Gc),Fo)},Yo.prototype.set_newPoly=Yo.prototype.Ad=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Oe(e,t)},Object.defineProperty(Yo.prototype,"newPoly",{get:Yo.prototype.gd,set:Yo.prototype.Ad}),Yo.prototype.get_newPosition=Yo.prototype.hd=function(){return Ao(Ee(this.Gc),ko)},Yo.prototype.set_newPosition=Yo.prototype.Bd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Re(e,t)},Object.defineProperty(Yo.prototype,"newPosition",{get:Yo.prototype.hd,set:Yo.prototype.Bd}),Yo.prototype.get_firstMove=Yo.prototype.bd=function(){return!!Te(this.Gc)},Yo.prototype.set_firstMove=Yo.prototype.wd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Ie(e,t)},Object.defineProperty(Yo.prototype,"firstMove",{get:Yo.prototype.bd,set:Yo.prototype.wd}),Yo.prototype.__destroy__=function(){Ae(this.Gc)},qo.prototype=Object.create(To.prototype),qo.prototype.constructor=qo,qo.prototype.Hc=qo,qo.Ic={},o.ShapeConnectionPin=qo,qo.prototype.setConnectionCost=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),De(e,t)},qo.prototype.position=qo.prototype.position=function(t){var e=this.Gc;return t&&"object"==typeof t&&(t=t.Gc),Ao(void 0===t?Ne(e):Le(e,t),ko)},qo.prototype.directions=function(){return Be(this.Gc)},qo.prototype.setExclusive=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Fe(e,t)},qo.prototype.isExclusive=function(){return!!ke(this.Gc)},qo.prototype.__destroy__=function(){Ge(this.Gc)},zo.prototype=Object.create(To.prototype),zo.prototype.constructor=zo,zo.prototype.Hc=zo,zo.Ic={},o.Obstacle=zo,zo.prototype.id=zo.prototype.id=function(){return Ve(this.Gc)},zo.prototype.polygon=function(){return Ao(He(this.Gc),Fo)},zo.prototype.router=function(){return Ao(Ke(this.Gc),ir)},zo.prototype.position=zo.prototype.position=function(){return Ao(Ue(this.Gc),ko)},zo.prototype.__destroy__=function(){Ye(this.Gc)},Wo.prototype=Object.create(To.prototype),Wo.prototype.constructor=Wo,Wo.prototype.Hc=Wo,Wo.Ic={},o.JunctionRef=Wo,Wo.prototype.position=Wo.prototype.position=function(){return Ao(We(this.Gc),ko)},Wo.prototype.__destroy__=function(){Je(this.Gc)},Jo.prototype=Object.create(To.prototype),Jo.prototype.constructor=Jo,Jo.prototype.Hc=Jo,Jo.Ic={},o.ShapeRef=Jo,Jo.prototype.polygon=function(){return Ao(Qe(this.Gc),Fo)},Jo.prototype.position=Jo.prototype.position=function(){return Ao($e(this.Gc),ko)},Jo.prototype.__destroy__=function(){tn(this.Gc)},Xo.prototype=Object.create(To.prototype),Xo.prototype.constructor=Xo,Xo.prototype.Hc=Xo,Xo.Ic={},o.HyperedgeNewAndDeletedObjectLists=Xo,Xo.prototype.__destroy__=function(){en(this.Gc)},Zo.prototype=Object.create(To.prototype),Zo.prototype.constructor=Zo,Zo.prototype.Hc=Zo,Zo.Ic={},o.HyperedgeRerouter=Zo,Zo.prototype.registerHyperedgeForRerouting=function(t){var e=this.Gc;return t&&"object"==typeof t&&(t=t.Gc),on(e,t)},Zo.prototype.__destroy__=function(){rn(this.Gc)},Qo.prototype=Object.create(To.prototype),Qo.prototype.constructor=Qo,Qo.prototype.Hc=Qo,Qo.Ic={},o.VertInf=Qo,Qo.prototype.__destroy__=function(){an(this.Gc)},$o.prototype=Object.create(To.prototype),$o.prototype.constructor=$o,$o.prototype.Hc=$o,$o.Ic={},o.VertID=$o,$o.prototype.get_objID=$o.prototype.jd=function(){return dn(this.Gc)},$o.prototype.set_objID=$o.prototype.Cd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),ln(e,t)},Object.defineProperty($o.prototype,"objID",{get:$o.prototype.jd,set:$o.prototype.Cd}),$o.prototype.get_vn=$o.prototype.Qc=function(){return pn(this.Gc)},$o.prototype.set_vn=$o.prototype.Sc=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),fn(e,t)},Object.defineProperty($o.prototype,"vn",{get:$o.prototype.Qc,set:$o.prototype.Sc}),$o.prototype.get_props=$o.prototype.ld=function(){return yn(this.Gc)},$o.prototype.set_props=$o.prototype.Ed=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),hn(e,t)},Object.defineProperty($o.prototype,"props",{get:$o.prototype.ld,set:$o.prototype.Ed}),$o.prototype.get_src=$o.prototype.nd=function(){return gn(this.Gc)},Object.defineProperty($o.prototype,"src",{get:$o.prototype.nd}),$o.prototype.get_tar=$o.prototype.od=function(){return _n(this.Gc)},Object.defineProperty($o.prototype,"tar",{get:$o.prototype.od}),$o.prototype.get_PROP_ConnPoint=$o.prototype.Wc=function(){return mn(this.Gc)},Object.defineProperty($o.prototype,"PROP_ConnPoint",{get:$o.prototype.Wc}),$o.prototype.get_PROP_OrthShapeEdge=$o.prototype.Zc=function(){return vn(this.Gc)},Object.defineProperty($o.prototype,"PROP_OrthShapeEdge",{get:$o.prototype.Zc}),$o.prototype.get_PROP_ConnectionPin=$o.prototype.Xc=function(){return bn(this.Gc)},Object.defineProperty($o.prototype,"PROP_ConnectionPin",{get:$o.prototype.Xc}),$o.prototype.get_PROP_ConnCheckpoint=$o.prototype.Vc=function(){return Sn(this.Gc)},Object.defineProperty($o.prototype,"PROP_ConnCheckpoint",{get:$o.prototype.Vc}),$o.prototype.get_PROP_DummyPinHelper=$o.prototype.Yc=function(){return Pn(this.Gc)},Object.defineProperty($o.prototype,"PROP_DummyPinHelper",{get:$o.prototype.Yc}),$o.prototype.__destroy__=function(){wn(this.Gc)},tr.prototype=Object.create(To.prototype),tr.prototype.constructor=tr,tr.prototype.Hc=tr,tr.Ic={},o.MinimumTerminalSpanningTree=tr,tr.prototype.__destroy__=function(){On(this.Gc)},er.prototype=Object.create(To.prototype),er.prototype.constructor=er,er.prototype.Hc=er,er.Ic={},o.Checkpoint=er,er.prototype.__destroy__=function(){Rn(this.Gc)},nr.prototype=Object.create(To.prototype),nr.prototype.constructor=nr,nr.prototype.Hc=nr,nr.Ic={},o.ConnRef=nr,nr.prototype.id=nr.prototype.id=function(){return An(this.Gc)},nr.prototype.setCallback=function(t,e){var n=this.Gc;if(E(t instanceof Function,"Expecting function"),!S){S=new WeakMap;for(var o=0;o<M.length;o++){var r=M.get(o);r&&S.set(r,o)}}if(S.has(t))t=S.get(t);else{if(w.length)o=w.pop();else{try{M.grow(1)}catch(t){if(!(t instanceof RangeError))throw t;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}o=M.length-1}try{M.set(o,t)}catch(e){if(!(e instanceof TypeError))throw e;if("function"==typeof WebAssembly.Function){var i={i:"i32",j:"i64",f:"f32",d:"f64"},a={parameters:[],results:[]};for(r=1;2>r;++r)a.parameters.push(i["vi"[r]]);r=new WebAssembly.Function(a,t)}else{for(a={i:127,j:126,f:125,d:124},(i=[1,0,1,96]).push(1),r=0;1>r;++r)i.push(a["i"[r]]);i.push(0),i[1]=i.length-2,r=new Uint8Array([0,97,115,109,1,0,0,0].concat(i,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0])),r=new WebAssembly.Module(r),r=new WebAssembly.Instance(r,{e:{f:t}}).exports.f}M.set(o,r)}S.set(t,o),t=o}e&&"object"==typeof e&&(e=e.Gc),xn(n,t,e)},nr.prototype.setSourceEndpoint=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Cn(e,t)},nr.prototype.setDestEndpoint=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Mn(e,t)},nr.prototype.routingType=function(){return jn(this.Gc)},nr.prototype.setRoutingType=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Dn(e,t)},nr.prototype.displayRoute=function(){return Ao(Nn(this.Gc),Fo)},nr.prototype.__destroy__=function(){Ln(this.Gc)},or.prototype=Object.create(To.prototype),or.prototype.constructor=or,or.prototype.Hc=or,or.Ic={},o.EdgeInf=or,or.prototype.__destroy__=function(){kn(this.Gc)},rr.prototype=Object.create(To.prototype),rr.prototype.constructor=rr,rr.prototype.Hc=rr,rr.Ic={},o.LineRep=rr,rr.prototype.get_begin=rr.prototype.$c=function(){return Ao(Gn(this.Gc),ko)},rr.prototype.set_begin=rr.prototype.sd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Vn(e,t)},Object.defineProperty(rr.prototype,"begin",{get:rr.prototype.$c,set:rr.prototype.sd}),rr.prototype.get_end=rr.prototype.ad=function(){return Ao(Hn(this.Gc),ko)},rr.prototype.set_end=rr.prototype.vd=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Kn(e,t)},Object.defineProperty(rr.prototype,"end",{get:rr.prototype.ad,set:rr.prototype.vd}),rr.prototype.__destroy__=function(){Un(this.Gc)},ir.prototype=Object.create(To.prototype),ir.prototype.constructor=ir,ir.prototype.Hc=ir,ir.Ic={},o.Router=ir,ir.prototype.processTransaction=function(){return!!qn(this.Gc)},ir.prototype.printInfo=function(){zn(this.Gc)},ir.prototype.deleteConnector=function(t){var e=this.Gc;t&&"object"==typeof t&&(t=t.Gc),Wn(e,t)},ir.prototype.moveShape=function(t,e,n){var o=this.Gc;t&&"object"==typeof t&&(t=t.Gc),e&&"object"==typeof e&&(e=e.Gc),n&&"object"==typeof n&&(n=n.Gc),Jn(o,t,e,n)},ir.prototype.__destroy__=function(){Xn(this.Gc)},function(){function t(){o.ConnDirNone=Zn(),o.ConnDirUp=Qn(),o.ConnDirDown=$n(),o.ConnDirLeft=to(),o.ConnDirRight=eo(),o.ConnDirAll=no(),o.ConnEndPoint=oo(),o.ConnEndShapePin=ro(),o.ConnEndJunction=io(),o.ConnEndEmpty=ao(),o.ShapeMove=co(),o.ShapeAdd=so(),o.ShapeRemove=uo(),o.JunctionMove=lo(),o.JunctionAdd=po(),o.JunctionRemove=fo(),o.ConnChange=yo(),o.ConnectionPinChange=ho(),o.TransformationType_CW90=go(),o.TransformationType_CW180=_o(),o.TransformationType_CW270=mo(),o.TransformationType_FlipX=vo(),o.TransformationType_FlipY=bo(),o.ConnType_None=So(),o.ConnType_PolyLine=Po(),o.ConnType_Orthogonal=wo(),o.PolyLineRouting=Oo(),o.OrthogonalRouting=Eo()}B?t():N.unshift(t)}(),e.ready});const r=e,i={avoidLib:void 0,async load(){this.avoidLib?console.log("Avoid library is already initialized"):this.avoidLib=await r()},getInstance(){if(!this.avoidLib)throw new Error("Avoid library should be initialized before using");return this.avoidLib}};var a=n(6700),c=n(3090);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var u,d=(u=function(t,e){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},u(t,e)},function(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=function(){return l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},l.apply(this,arguments)},p=function(t,e,n,o){var r,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,n,a):r(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},f=function(t,e){if("object"===("undefined"==typeof Reflect?"undefined":s(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};var y=function(t){function e(){var e=t.call(this)||this;e.renderedTimes=0;var n=i.getInstance();return e.avoidRouter=new n.Router(n.OrthogonalRouting|n.PolyLineRouting),e.avoidRoutes={},console.log("router",e.avoidRouter),e}var n;return d(e,t),n=e,Object.defineProperty(e.prototype,"kind",{get:function(){return n.KIND},enumerable:!1,configurable:!0}),e.prototype.getAllBoundsAwareChildren=function(t){for(var e=[],n=0,o=t.children;n<o.length;n++){var r=o[n];(0,c.isBoundsAware)(r)&&e.push(r),r instanceof c.SParentElement&&e.push.apply(e,this.getAllBoundsAwareChildren(r))}return e},e.prototype.getCenterPoint=function(t){for(var e=t.bounds.width/2,n=t.bounds.height/2,o=t;o&&(o.position&&(e+=o.position.x,n+=o.position.y),!o.parent||"graph"!==o.parent.id);)o=o.parent;return{x:e,y:n}},e.prototype.avoidRoutesToEdgeRoutes=function(t){for(var e=new c.EdgeRouting,n=0,o=t;n<o.length;n++){for(var r=o[n],i=[],a=r.connRef.displayRoute(),s=0;s<a.size();s++){var u="linear";0===s?u="source":s===a.size()-1&&(u="target"),i.push({x:a.get_ps(s).x,y:a.get_ps(s).y,kind:u,pointIndex:1})}e.set(r.child.id,i),this.avoidRoutes[r.child.id]=l(l({},this.avoidRoutes[r.child.id]),{routes:i})}return e},e.prototype.routeAll=function(t,e){var n=[],o=i.getInstance();this.avoidRouter=new o.Router(o.OrthogonalRouting|o.PolyLineRouting);for(var r=0,a=t;r<a.length;r++){var c=a[r],s=this.getCenterPoint(c.source),u=this.getCenterPoint(c.target),d=new o.ConnRef(this.avoidRouter,new o.ConnEnd(new o.Point(s.x,s.y)),new o.ConnEnd(new o.Point(u.x,u.y))),l=o.PolyLineRouting;"manhattan"===c.routerKind&&(l=o.OrthogonalRouting),d.setRoutingType(l),n.push({child:c,connRef:d,routes:[]}),this.avoidRoutes[c.id]={connRef:d,child:c,routes:[]}}var p=this.getAllBoundsAwareChildren(e);console.log("connectables count: ",p.length);for(var f=0,y=p;f<y.length;f++){c=y[f];var h=this.getCenterPoint(c),g=new o.Rectangle(new o.Point(h.x,h.y),c.bounds.width,c.bounds.height);new o.ShapeRef(this.avoidRouter,g)}this.avoidRouter.processTransaction();for(var _=this.avoidRoutesToEdgeRoutes(n),m=0,v=n;m<v.length;m++){var b=v[m];this.avoidRouter.deleteConnector(b.connRef)}return o.destroy(this.avoidRouter),this.renderedTimes+=1,console.log(n),_},e.prototype.route=function(t,e){return console.log("get",t,e,this.avoidRoutes),this.routeAll([t],t).get(t.id)||[]},e.prototype.calculateSegment=function(t,e){if(!(e<0||e>1)){var n=this.avoidRoutes[t.id].routes;if(console.log("points",n.length),!(n.length<2)){for(var o=[],r=0,i=0;i<n.length-1;++i)o[i]=(0,c.euclideanDistance)(n[i],n[i+1]),r+=o[i];var a=0,s=e*r;for(i=0;i<n.length-1;++i){var u=a+o[i];if(o[i]>1e-8&&u>=s){var d=Math.max(0,s-a)/o[i];return{segmentStart:n[i],segmentEnd:n[i+1],lambda:d}}a=u}return{segmentEnd:n.pop(),segmentStart:n.pop(),lambda:1}}}},e.prototype.createRoutingHandles=function(t){var e=t.routingPoints.length;this.addHandle(t,"source","routing-point",-2),this.addHandle(t,"line","volatile-routing-point",-1);for(var n=0;n<e;n++)this.addHandle(t,"junction","routing-point",n),this.addHandle(t,"line","volatile-routing-point",n);this.addHandle(t,"target","routing-point",e)},e.prototype.applyInnerHandleMoves=function(t,e){var n=this;e.forEach((function(e){var o=e.handle,r=t.routingPoints,i=o.pointIndex;"line"===o.kind&&(o.kind="junction",o.type="routing-point",r.splice(i+1,0,e.fromPosition||r[Math.max(i,0)]),t.children.forEach((function(t){t instanceof c.SRoutingHandle&&(t===o||t.pointIndex>i)&&t.pointIndex++})),n.addHandle(t,"line","volatile-routing-point",i),n.addHandle(t,"line","volatile-routing-point",i+1),i++),i>=0&&i<r.length&&(r[i]=e.toPosition)}))},e.prototype.getInnerHandlePosition=function(t,e,n){if("line"===n.kind){var o=this.findRouteSegment(t,e,n.pointIndex),r=o.start,i=o.end;if(void 0!==r&&void 0!==i)return(0,c.centerOfLine)(r,i)}},e.prototype.getOptions=function(t){return{minimalPointDistance:2,removeAngleThreshold:.1,standardDistance:20,selfEdgeOffset:.25}},e.KIND="libavoid",e=n=p([(0,a.b2)(),f("design:paramtypes",[])],e)}(c.LinearEdgeRouter),h=function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function a(t){try{s(o.next(t))}catch(t){i(t)}}function c(t){try{s(o.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((o=o.apply(t,e||[])).next())}))},g=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}};function _(){return h(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,i.load()];case 1:return t.sent(),[2]}}))}))}})(),o})()}));
//# sourceMappingURL=index.js.map