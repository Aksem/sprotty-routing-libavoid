{"version":3,"file":"index.js","mappings":"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","sources":["webpack://MyLibrary/webpack/universalModuleDefinition","webpack://MyLibrary/../sprotty/lib/base/actions/action-dispatcher.js","webpack://MyLibrary/../sprotty/lib/base/actions/action-handler.js","webpack://MyLibrary/../sprotty/lib/base/actions/action.js","webpack://MyLibrary/../sprotty/lib/base/actions/diagram-locker.js","webpack://MyLibrary/../sprotty/lib/base/animations/animation-frame-syncer.js","webpack://MyLibrary/../sprotty/lib/base/animations/animation.js","webpack://MyLibrary/../sprotty/lib/base/animations/easing.js","webpack://MyLibrary/../sprotty/lib/base/commands/command-registration.js","webpack://MyLibrary/../sprotty/lib/base/commands/command-stack-options.js","webpack://MyLibrary/../sprotty/lib/base/commands/command-stack.js","webpack://MyLibrary/../sprotty/lib/base/commands/command.js","webpack://MyLibrary/../sprotty/lib/base/commands/request-command.js","webpack://MyLibrary/../sprotty/lib/base/di.config.js","webpack://MyLibrary/../sprotty/lib/base/features/initialize-canvas.js","webpack://MyLibrary/../sprotty/lib/base/features/set-model.js","webpack://MyLibrary/../sprotty/lib/base/model/smodel-factory.js","webpack://MyLibrary/../sprotty/lib/base/model/smodel-utils.js","webpack://MyLibrary/../sprotty/lib/base/model/smodel.js","webpack://MyLibrary/../sprotty/lib/base/tool-manager/tool-manager.js","webpack://MyLibrary/../sprotty/lib/base/tool-manager/tool.js","webpack://MyLibrary/../sprotty/lib/base/types.js","webpack://MyLibrary/../sprotty/lib/base/ui-extensions/ui-extension-registry.js","webpack://MyLibrary/../sprotty/lib/base/ui-extensions/ui-extension.js","webpack://MyLibrary/../sprotty/lib/base/views/css-class-postprocessor.js","webpack://MyLibrary/../sprotty/lib/base/views/dom-helper.js","webpack://MyLibrary/../sprotty/lib/base/views/id-postprocessor.js","webpack://MyLibrary/../sprotty/lib/base/views/key-tool.js","webpack://MyLibrary/../sprotty/lib/base/views/mouse-tool.js","webpack://MyLibrary/../sprotty/lib/base/views/thunk-view.js","webpack://MyLibrary/../sprotty/lib/base/views/view.js","webpack://MyLibrary/../sprotty/lib/base/views/viewer-cache.js","webpack://MyLibrary/../sprotty/lib/base/views/viewer-options.js","webpack://MyLibrary/../sprotty/lib/base/views/viewer.js","webpack://MyLibrary/../sprotty/lib/base/views/vnode-postprocessor.js","webpack://MyLibrary/../sprotty/lib/base/views/vnode-utils.js","webpack://MyLibrary/../sprotty/lib/features/bounds/abstract-layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/bounds-manipulation.js","webpack://MyLibrary/../sprotty/lib/features/bounds/di.config.js","webpack://MyLibrary/../sprotty/lib/features/bounds/hbox-layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/hidden-bounds-updater.js","webpack://MyLibrary/../sprotty/lib/features/bounds/layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/model.js","webpack://MyLibrary/../sprotty/lib/features/bounds/resize.js","webpack://MyLibrary/../sprotty/lib/features/bounds/stack-layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/vbox-layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/views.js","webpack://MyLibrary/../sprotty/lib/features/button/button-handler.js","webpack://MyLibrary/../sprotty/lib/features/button/di.config.js","webpack://MyLibrary/../sprotty/lib/features/button/model.js","webpack://MyLibrary/../sprotty/lib/features/command-palette/action-providers.js","webpack://MyLibrary/../sprotty/lib/features/command-palette/command-palette.js","webpack://MyLibrary/../sprotty/lib/features/command-palette/di.config.js","webpack://MyLibrary/../sprotty/lib/features/context-menu/context-menu-service.js","webpack://MyLibrary/../sprotty/lib/features/context-menu/di.config.js","webpack://MyLibrary/../sprotty/lib/features/context-menu/menu-providers.js","webpack://MyLibrary/../sprotty/lib/features/context-menu/mouse-listener.js","webpack://MyLibrary/../sprotty/lib/features/decoration/decoration-placer.js","webpack://MyLibrary/../sprotty/lib/features/decoration/di.config.js","webpack://MyLibrary/../sprotty/lib/features/decoration/model.js","webpack://MyLibrary/../sprotty/lib/features/decoration/views.js","webpack://MyLibrary/../sprotty/lib/features/edge-intersection/di.config.js","webpack://MyLibrary/../sprotty/lib/features/edge-intersection/intersection-finder.js","webpack://MyLibrary/../sprotty/lib/features/edge-intersection/sweepline.js","webpack://MyLibrary/../sprotty/lib/features/edge-layout/di.config.js","webpack://MyLibrary/../sprotty/lib/features/edge-layout/edge-layout.js","webpack://MyLibrary/../sprotty/lib/features/edge-layout/model.js","webpack://MyLibrary/../sprotty/lib/features/edit/create-on-drag.js","webpack://MyLibrary/../sprotty/lib/features/edit/create.js","webpack://MyLibrary/../sprotty/lib/features/edit/delete.js","webpack://MyLibrary/../sprotty/lib/features/edit/di.config.js","webpack://MyLibrary/../sprotty/lib/features/edit/edit-label-ui.js","webpack://MyLibrary/../sprotty/lib/features/edit/edit-label.js","webpack://MyLibrary/../sprotty/lib/features/edit/edit-routing.js","webpack://MyLibrary/../sprotty/lib/features/edit/model.js","webpack://MyLibrary/../sprotty/lib/features/edit/reconnect.js","webpack://MyLibrary/../sprotty/lib/features/expand/di.config.js","webpack://MyLibrary/../sprotty/lib/features/expand/expand.js","webpack://MyLibrary/../sprotty/lib/features/expand/model.js","webpack://MyLibrary/../sprotty/lib/features/expand/views.js","webpack://MyLibrary/../sprotty/lib/features/export/di.config.js","webpack://MyLibrary/../sprotty/lib/features/export/export.js","webpack://MyLibrary/../sprotty/lib/features/export/model.js","webpack://MyLibrary/../sprotty/lib/features/export/svg-exporter.js","webpack://MyLibrary/../sprotty/lib/features/fade/di.config.js","webpack://MyLibrary/../sprotty/lib/features/fade/fade.js","webpack://MyLibrary/../sprotty/lib/features/fade/model.js","webpack://MyLibrary/../sprotty/lib/features/hover/di.config.js","webpack://MyLibrary/../sprotty/lib/features/hover/hover.js","webpack://MyLibrary/../sprotty/lib/features/hover/model.js","webpack://MyLibrary/../sprotty/lib/features/hover/popup-position-updater.js","webpack://MyLibrary/../sprotty/lib/features/move/di.config.js","webpack://MyLibrary/../sprotty/lib/features/move/model.js","webpack://MyLibrary/../sprotty/lib/features/move/move.js","webpack://MyLibrary/../sprotty/lib/features/move/snap.js","webpack://MyLibrary/../sprotty/lib/features/nameable/model.js","webpack://MyLibrary/../sprotty/lib/features/open/di.config.js","webpack://MyLibrary/../sprotty/lib/features/open/model.js","webpack://MyLibrary/../sprotty/lib/features/open/open.js","webpack://MyLibrary/../sprotty/lib/features/projection/model.js","webpack://MyLibrary/../sprotty/lib/features/projection/views.js","webpack://MyLibrary/../sprotty/lib/features/routing/anchor.js","webpack://MyLibrary/../sprotty/lib/features/routing/di.config.js","webpack://MyLibrary/../sprotty/lib/features/routing/linear-edge-router.js","webpack://MyLibrary/../sprotty/lib/features/routing/manhattan-anchors.js","webpack://MyLibrary/../sprotty/lib/features/routing/manhattan-edge-router.js","webpack://MyLibrary/../sprotty/lib/features/routing/model.js","webpack://MyLibrary/../sprotty/lib/features/routing/polyline-anchors.js","webpack://MyLibrary/../sprotty/lib/features/routing/polyline-edge-router.js","webpack://MyLibrary/../sprotty/lib/features/routing/routing.js","webpack://MyLibrary/../sprotty/lib/features/routing/views.js","webpack://MyLibrary/../sprotty/lib/features/select/di.config.js","webpack://MyLibrary/../sprotty/lib/features/select/model.js","webpack://MyLibrary/../sprotty/lib/features/select/select.js","webpack://MyLibrary/../sprotty/lib/features/undo-redo/di.config.js","webpack://MyLibrary/../sprotty/lib/features/undo-redo/undo-redo.js","webpack://MyLibrary/../sprotty/lib/features/update/di.config.js","webpack://MyLibrary/../sprotty/lib/features/update/model-matching.js","webpack://MyLibrary/../sprotty/lib/features/update/update-model.js","webpack://MyLibrary/../sprotty/lib/features/viewport/center-fit.js","webpack://MyLibrary/../sprotty/lib/features/viewport/di.config.js","webpack://MyLibrary/../sprotty/lib/features/viewport/model.js","webpack://MyLibrary/../sprotty/lib/features/viewport/scroll.js","webpack://MyLibrary/../sprotty/lib/features/viewport/viewport-root.js","webpack://MyLibrary/../sprotty/lib/features/viewport/viewport.js","webpack://MyLibrary/../sprotty/lib/features/viewport/zoom.js","webpack://MyLibrary/../sprotty/lib/features/zorder/di.config.js","webpack://MyLibrary/../sprotty/lib/features/zorder/zorder.js","webpack://MyLibrary/../sprotty/lib/graph/di.config.js","webpack://MyLibrary/../sprotty/lib/graph/sgraph-factory.js","webpack://MyLibrary/../sprotty/lib/graph/sgraph.js","webpack://MyLibrary/../sprotty/lib/graph/views.js","webpack://MyLibrary/../sprotty/lib/index.js","webpack://MyLibrary/../sprotty/lib/lib/generic-views.js","webpack://MyLibrary/../sprotty/lib/lib/html-views.js","webpack://MyLibrary/../sprotty/lib/lib/jsx.js","webpack://MyLibrary/../sprotty/lib/lib/model.js","webpack://MyLibrary/../sprotty/lib/lib/modules.js","webpack://MyLibrary/../sprotty/lib/lib/svg-views.js","webpack://MyLibrary/../sprotty/lib/lib/virtualize.js","webpack://MyLibrary/../sprotty/lib/model-source/commit-model.js","webpack://MyLibrary/../sprotty/lib/model-source/di.config.js","webpack://MyLibrary/../sprotty/lib/model-source/diagram-server.js","webpack://MyLibrary/../sprotty/lib/model-source/local-model-source.js","webpack://MyLibrary/../sprotty/lib/model-source/logging.js","webpack://MyLibrary/../sprotty/lib/model-source/model-source.js","webpack://MyLibrary/../sprotty/lib/model-source/websocket.js","webpack://MyLibrary/../sprotty/lib/utils/async.js","webpack://MyLibrary/../sprotty/lib/utils/browser.js","webpack://MyLibrary/../sprotty/lib/utils/color.js","webpack://MyLibrary/../sprotty/lib/utils/geometry.js","webpack://MyLibrary/../sprotty/lib/utils/inversify.js","webpack://MyLibrary/../sprotty/lib/utils/iterable.js","webpack://MyLibrary/../sprotty/lib/utils/keyboard.js","webpack://MyLibrary/../sprotty/lib/utils/logging.js","webpack://MyLibrary/../sprotty/lib/utils/object.js","webpack://MyLibrary/../sprotty/lib/utils/registry.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/decorator_utils.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/inject.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/injectable.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/multi_inject.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/named.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/optional.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/post_construct.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/tagged.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/target_name.js","webpack://MyLibrary/./node_modules/inversify/lib/annotation/unmanaged.js","webpack://MyLibrary/./node_modules/inversify/lib/bindings/binding.js","webpack://MyLibrary/./node_modules/inversify/lib/bindings/binding_count.js","webpack://MyLibrary/./node_modules/inversify/lib/constants/error_msgs.js","webpack://MyLibrary/./node_modules/inversify/lib/constants/literal_types.js","webpack://MyLibrary/./node_modules/inversify/lib/constants/metadata_keys.js","webpack://MyLibrary/./node_modules/inversify/lib/container/container.js","webpack://MyLibrary/./node_modules/inversify/lib/container/container_module.js","webpack://MyLibrary/./node_modules/inversify/lib/container/container_snapshot.js","webpack://MyLibrary/./node_modules/inversify/lib/container/lookup.js","webpack://MyLibrary/./node_modules/inversify/lib/inversify.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/context.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/metadata.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/metadata_reader.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/plan.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/planner.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/queryable_string.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/reflection_utils.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/request.js","webpack://MyLibrary/./node_modules/inversify/lib/planning/target.js","webpack://MyLibrary/./node_modules/inversify/lib/resolution/instantiation.js","webpack://MyLibrary/./node_modules/inversify/lib/resolution/resolver.js","webpack://MyLibrary/./node_modules/inversify/lib/syntax/binding_in_syntax.js","webpack://MyLibrary/./node_modules/inversify/lib/syntax/binding_in_when_on_syntax.js","webpack://MyLibrary/./node_modules/inversify/lib/syntax/binding_on_syntax.js","webpack://MyLibrary/./node_modules/inversify/lib/syntax/binding_to_syntax.js","webpack://MyLibrary/./node_modules/inversify/lib/syntax/binding_when_on_syntax.js","webpack://MyLibrary/./node_modules/inversify/lib/syntax/binding_when_syntax.js","webpack://MyLibrary/./node_modules/inversify/lib/syntax/constraint_helpers.js","webpack://MyLibrary/./node_modules/inversify/lib/utils/binding_utils.js","webpack://MyLibrary/./node_modules/inversify/lib/utils/exceptions.js","webpack://MyLibrary/./node_modules/inversify/lib/utils/id.js","webpack://MyLibrary/./node_modules/inversify/lib/utils/serialization.js","webpack://MyLibrary/../sprotty/node_modules/autocompleter/autocomplete.js","webpack://MyLibrary/../sprotty/node_modules/file-saver/dist/FileSaver.min.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/decorator_utils.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/inject.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/injectable.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/multi_inject.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/named.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/optional.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/post_construct.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/tagged.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/target_name.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/unmanaged.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/bindings/binding.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/bindings/binding_count.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/constants/error_msgs.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/constants/literal_types.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/constants/metadata_keys.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/container/container.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/container/container_module.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/container/container_snapshot.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/container/lookup.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/inversify.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/context.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/metadata.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/metadata_reader.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/plan.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/planner.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/queryable_string.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/reflection_utils.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/request.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/target.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/resolution/instantiation.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/resolution/resolver.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_in_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_in_when_on_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_on_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_to_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_when_on_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_when_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/constraint_helpers.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/utils/binding_utils.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/utils/exceptions.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/utils/id.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/utils/serialization.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/htmldomapi.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/vnode.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/is.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/init.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/h.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/thunk.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/helpers/attachto.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/tovnode.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/attributes.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/class.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/dataset.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/eventlisteners.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/props.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/style.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/jsx.js","webpack://MyLibrary/../sprotty/node_modules/tinyqueue/index.js","webpack://MyLibrary/external node-commonjs \"fs\"","webpack://MyLibrary/external node-commonjs \"path\"","webpack://MyLibrary/webpack/bootstrap","webpack://MyLibrary/webpack/runtime/define property getters","webpack://MyLibrary/webpack/runtime/hasOwnProperty shorthand","webpack://MyLibrary/webpack/runtime/make namespace object","webpack://MyLibrary/./node_modules/libavoid-js/src/generated/libavoid.js","webpack://MyLibrary/./node_modules/libavoid-js/src/index.js","webpack://MyLibrary/./src/libavoid-router.ts","webpack://MyLibrary/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MyLibrary\"] = factory();\n\telse\n\t\troot[\"MyLibrary\"] = factory();\n})(global, function() {\nreturn ","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar async_1 = require(\"../../utils/async\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\nvar set_model_1 = require(\"../features/set-model\");\nvar undo_redo_1 = require(\"../../features/undo-redo/undo-redo\");\nvar action_1 = require(\"./action\");\n/**\n * Collects actions, converts them to commands and dispatches them.\n * Also acts as the proxy to model sources such as diagram servers.\n */\nvar ActionDispatcher = /** @class */ (function () {\n    function ActionDispatcher() {\n        this.postponedActions = [];\n        this.requests = new Map();\n    }\n    ActionDispatcher.prototype.initialize = function () {\n        var _this = this;\n        if (!this.initialized) {\n            this.initialized = this.actionHandlerRegistryProvider().then(function (registry) {\n                _this.actionHandlerRegistry = registry;\n                _this.handleAction(new set_model_1.SetModelAction(smodel_factory_1.EMPTY_ROOT));\n            });\n        }\n        return this.initialized;\n    };\n    /**\n     * Dispatch an action by querying all handlers that are registered for its kind.\n     * The returned promise is resolved when all handler results (commands or actions)\n     * have been processed.\n     */\n    ActionDispatcher.prototype.dispatch = function (action) {\n        var _this = this;\n        return this.initialize().then(function () {\n            if (_this.blockUntil !== undefined) {\n                return _this.handleBlocked(action, _this.blockUntil);\n            }\n            else if (_this.diagramLocker.isAllowed(action)) {\n                return _this.handleAction(action);\n            }\n            return undefined;\n        });\n    };\n    /**\n     * Calls `dispatch` on every action in the given array. The returned promise\n     * is resolved when the promises of all `dispatch` calls have been resolved.\n     */\n    ActionDispatcher.prototype.dispatchAll = function (actions) {\n        var _this = this;\n        return Promise.all(actions.map(function (action) { return _this.dispatch(action); }));\n    };\n    /**\n     * Dispatch a request. The returned promise is resolved when a response with matching\n     * identifier is dispatched. That response is _not_ passed to the registered action\n     * handlers. Instead, it is the responsibility of the caller of this method to handle\n     * the response properly. For example, it can be sent to the registered handlers by\n     * passing it again to the `dispatch` method.\n     */\n    ActionDispatcher.prototype.request = function (action) {\n        if (!action.requestId) {\n            return Promise.reject(new Error('Request without requestId'));\n        }\n        var deferred = new async_1.Deferred();\n        this.requests.set(action.requestId, deferred);\n        this.dispatch(action);\n        return deferred.promise;\n    };\n    ActionDispatcher.prototype.handleAction = function (action) {\n        if (action.kind === undo_redo_1.UndoAction.KIND) {\n            return this.commandStack.undo().then(function () { });\n        }\n        if (action.kind === undo_redo_1.RedoAction.KIND) {\n            return this.commandStack.redo().then(function () { });\n        }\n        if (action_1.isResponseAction(action)) {\n            var deferred = this.requests.get(action.responseId);\n            if (deferred !== undefined) {\n                this.requests.delete(action.responseId);\n                if (action.kind === action_1.RejectAction.KIND) {\n                    var rejectAction = action;\n                    deferred.reject(new Error(rejectAction.message));\n                    this.logger.warn(this, \"Request with id \" + action.responseId + \" failed.\", rejectAction.message, rejectAction.detail);\n                }\n                else {\n                    deferred.resolve(action);\n                }\n                return Promise.resolve();\n            }\n            this.logger.log(this, 'No matching request for response', action);\n        }\n        var handlers = this.actionHandlerRegistry.get(action.kind);\n        if (handlers.length === 0) {\n            this.logger.warn(this, 'Missing handler for action', action);\n            var error = new Error(\"Missing handler for action '\" + action.kind + \"'\");\n            if (action_1.isRequestAction(action)) {\n                var deferred = this.requests.get(action.requestId);\n                if (deferred !== undefined) {\n                    this.requests.delete(action.requestId);\n                    deferred.reject(error);\n                }\n            }\n            return Promise.reject(error);\n        }\n        this.logger.log(this, 'Handle', action);\n        var promises = [];\n        for (var _i = 0, handlers_1 = handlers; _i < handlers_1.length; _i++) {\n            var handler = handlers_1[_i];\n            var result = handler.handle(action);\n            if (action_1.isAction(result)) {\n                promises.push(this.dispatch(result));\n            }\n            else if (result !== undefined) {\n                promises.push(this.commandStack.execute(result));\n                this.blockUntil = result.blockUntil;\n            }\n        }\n        return Promise.all(promises);\n    };\n    ActionDispatcher.prototype.handleBlocked = function (action, predicate) {\n        var _this = this;\n        if (predicate(action)) {\n            this.blockUntil = undefined;\n            var result = this.handleAction(action);\n            var actions = this.postponedActions;\n            this.postponedActions = [];\n            for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n                var a = actions_1[_i];\n                this.dispatch(a.action).then(a.resolve, a.reject);\n            }\n            return result;\n        }\n        else {\n            this.logger.log(this, 'Action is postponed due to block condition', action);\n            return new Promise(function (resolve, reject) {\n                _this.postponedActions.push({ action: action, resolve: resolve, reject: reject });\n            });\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ActionHandlerRegistryProvider),\n        __metadata(\"design:type\", Function)\n    ], ActionDispatcher.prototype, \"actionHandlerRegistryProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ICommandStack),\n        __metadata(\"design:type\", Object)\n    ], ActionDispatcher.prototype, \"commandStack\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], ActionDispatcher.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.AnimationFrameSyncer),\n        __metadata(\"design:type\", animation_frame_syncer_1.AnimationFrameSyncer)\n    ], ActionDispatcher.prototype, \"syncer\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IDiagramLocker),\n        __metadata(\"design:type\", Object)\n    ], ActionDispatcher.prototype, \"diagramLocker\", void 0);\n    ActionDispatcher = __decorate([\n        inversify_1.injectable()\n    ], ActionDispatcher);\n    return ActionDispatcher;\n}());\nexports.ActionDispatcher = ActionDispatcher;\n//# sourceMappingURL=action-dispatcher.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar inversify_2 = require(\"../../utils/inversify\");\n/**\n * The action handler registry maps actions to their handlers using the Action.kind property.\n */\nvar ActionHandlerRegistry = /** @class */ (function (_super) {\n    __extends(ActionHandlerRegistry, _super);\n    function ActionHandlerRegistry(registrations, initializers) {\n        var _this = _super.call(this) || this;\n        registrations.forEach(function (registration) {\n            return _this.register(registration.actionKind, registration.factory());\n        });\n        initializers.forEach(function (initializer) {\n            return _this.initializeActionHandler(initializer);\n        });\n        return _this;\n    }\n    ActionHandlerRegistry.prototype.initializeActionHandler = function (initializer) {\n        initializer.initialize(this);\n    };\n    ActionHandlerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ActionHandlerRegistration)), __param(0, inversify_1.optional()),\n        __param(1, inversify_1.multiInject(types_1.TYPES.IActionHandlerInitializer)), __param(1, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array, Array])\n    ], ActionHandlerRegistry);\n    return ActionHandlerRegistry;\n}(registry_1.MultiInstanceRegistry));\nexports.ActionHandlerRegistry = ActionHandlerRegistry;\n/**\n * Utility function to register an action handler for an action kind.\n */\nfunction configureActionHandler(context, kind, constr) {\n    if (typeof constr === 'function') {\n        if (!inversify_2.isInjectable(constr)) {\n            throw new Error(\"Action handlers should be @injectable: \" + constr.name);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(types_1.TYPES.ActionHandlerRegistration).toDynamicValue(function (ctx) { return ({\n        actionKind: kind,\n        factory: function () { return ctx.container.get(constr); }\n    }); });\n}\nexports.configureActionHandler = configureActionHandler;\n/**\n * Utility function to register an action handler for an action kind.\n */\nfunction onAction(context, kind, handle) {\n    context.bind(types_1.TYPES.ActionHandlerRegistration).toConstantValue({\n        actionKind: kind,\n        factory: function () { return ({ handle: handle }); }\n    });\n}\nexports.onAction = onAction;\n//# sourceMappingURL=action-handler.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar object_1 = require(\"../../utils/object\");\nfunction isAction(object) {\n    return object_1.hasOwnProperty(object, 'kind', 'string');\n}\nexports.isAction = isAction;\nfunction isRequestAction(object) {\n    return isAction(object) && object_1.hasOwnProperty(object, 'requestId', 'string');\n}\nexports.isRequestAction = isRequestAction;\nvar nextRequestId = 1;\n/**\n * Generate a unique `requestId` for a request action.\n */\nfunction generateRequestId() {\n    return (nextRequestId++).toString();\n}\nexports.generateRequestId = generateRequestId;\nfunction isResponseAction(object) {\n    return isAction(object) && object_1.hasOwnProperty(object, 'responseId', 'string')\n        && object.responseId !== '';\n}\nexports.isResponseAction = isResponseAction;\n/**\n * A reject action is fired to indicate that a request must be rejected.\n */\nvar RejectAction = /** @class */ (function () {\n    function RejectAction(message, responseId, detail) {\n        this.message = message;\n        this.responseId = responseId;\n        this.detail = detail;\n        this.kind = RejectAction.KIND;\n    }\n    RejectAction.KIND = 'rejectRequest';\n    return RejectAction;\n}());\nexports.RejectAction = RejectAction;\n/**\n * A list of actions with a label.\n * Labeled actions are used to denote a group of actions in a user-interface context, e.g.,\n * to define an entry in the command palette or in the context menu.\n */\nvar LabeledAction = /** @class */ (function () {\n    function LabeledAction(label, actions, icon) {\n        this.label = label;\n        this.actions = actions;\n        this.icon = icon;\n    }\n    return LabeledAction;\n}());\nexports.LabeledAction = LabeledAction;\nfunction isLabeledAction(element) {\n    return element !== undefined\n        && element.label !== undefined\n        && element.actions !== undefined;\n}\nexports.isLabeledAction = isLabeledAction;\n//# sourceMappingURL=action.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar DefaultDiagramLocker = /** @class */ (function () {\n    function DefaultDiagramLocker() {\n    }\n    DefaultDiagramLocker.prototype.isAllowed = function (action) {\n        return true;\n    };\n    DefaultDiagramLocker = __decorate([\n        inversify_1.injectable()\n    ], DefaultDiagramLocker);\n    return DefaultDiagramLocker;\n}());\nexports.DefaultDiagramLocker = DefaultDiagramLocker;\n//# sourceMappingURL=diagram-locker.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar AnimationFrameSyncer = /** @class */ (function () {\n    function AnimationFrameSyncer() {\n        this.tasks = [];\n        this.endTasks = [];\n        this.triggered = false;\n    }\n    AnimationFrameSyncer.prototype.isAvailable = function () {\n        return typeof requestAnimationFrame === \"function\";\n    };\n    AnimationFrameSyncer.prototype.onNextFrame = function (task) {\n        this.tasks.push(task);\n        this.trigger();\n    };\n    AnimationFrameSyncer.prototype.onEndOfNextFrame = function (task) {\n        this.endTasks.push(task);\n        this.trigger();\n    };\n    AnimationFrameSyncer.prototype.trigger = function () {\n        var _this = this;\n        if (!this.triggered) {\n            this.triggered = true;\n            if (this.isAvailable())\n                requestAnimationFrame(function (time) { return _this.run(time); });\n            else\n                setTimeout(function (time) { return _this.run(time); });\n        }\n    };\n    AnimationFrameSyncer.prototype.run = function (time) {\n        var tasks = this.tasks;\n        var endTasks = this.endTasks;\n        this.triggered = false;\n        this.tasks = [];\n        this.endTasks = [];\n        tasks.forEach(function (task) { return task.call(undefined, time); });\n        endTasks.forEach(function (task) { return task.call(undefined, time); });\n    };\n    AnimationFrameSyncer = __decorate([\n        inversify_1.injectable()\n    ], AnimationFrameSyncer);\n    return AnimationFrameSyncer;\n}());\nexports.AnimationFrameSyncer = AnimationFrameSyncer;\n//# sourceMappingURL=animation-frame-syncer.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar easing_1 = require(\"./easing\");\n/**\n * An animation uses the rendering loop of the browser to smoothly\n * calculate a transition between two states of a model element.\n */\nvar Animation = /** @class */ (function () {\n    function Animation(context, ease) {\n        if (ease === void 0) { ease = easing_1.easeInOut; }\n        this.context = context;\n        this.ease = ease;\n    }\n    Animation.prototype.start = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var start = undefined;\n            var frames = 0;\n            var lambda = function (time) {\n                frames++;\n                var dtime;\n                if (start === undefined) {\n                    start = time;\n                    dtime = 0;\n                }\n                else {\n                    dtime = time - start;\n                }\n                var t = Math.min(1, dtime / _this.context.duration);\n                var current = _this.tween(_this.ease(t), _this.context);\n                _this.context.modelChanged.update(current);\n                if (t === 1) {\n                    _this.context.logger.log(_this, (frames * 1000 / _this.context.duration) + ' fps');\n                    resolve(current);\n                }\n                else {\n                    _this.context.syncer.onNextFrame(lambda);\n                }\n            };\n            if (_this.context.syncer.isAvailable()) {\n                _this.context.syncer.onNextFrame(lambda);\n            }\n            else {\n                var finalModel = _this.tween(1, _this.context);\n                resolve(finalModel);\n            }\n        });\n    };\n    return Animation;\n}());\nexports.Animation = Animation;\nvar CompoundAnimation = /** @class */ (function (_super) {\n    __extends(CompoundAnimation, _super);\n    function CompoundAnimation(model, context, components, ease) {\n        if (components === void 0) { components = []; }\n        if (ease === void 0) { ease = easing_1.easeInOut; }\n        var _this = _super.call(this, context, ease) || this;\n        _this.model = model;\n        _this.context = context;\n        _this.components = components;\n        _this.ease = ease;\n        return _this;\n    }\n    CompoundAnimation.prototype.include = function (animation) {\n        this.components.push(animation);\n        return this;\n    };\n    CompoundAnimation.prototype.tween = function (t, context) {\n        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {\n            var a = _a[_i];\n            a.tween(t, context);\n        }\n        return this.model;\n    };\n    return CompoundAnimation;\n}(Animation));\nexports.CompoundAnimation = CompoundAnimation;\n//# sourceMappingURL=animation.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Slows down animations towards the begin and the end.\n *\n * @param x the value between 0 (start of animation) and 1 (end of\n *     animation) linearly interpolated in time.\n * @returns {number} the eased value between 0 and 1\n */\nfunction easeInOut(x) {\n    if (x < 0.5)\n        return x * x * 2;\n    else\n        return 1 - (1 - x) * (1 - x) * 2;\n}\nexports.easeInOut = easeInOut;\n//# sourceMappingURL=easing.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar inversify_2 = require(\"../../utils/inversify\");\nvar types_1 = require(\"../types\");\nvar CommandActionHandler = /** @class */ (function () {\n    function CommandActionHandler(commandRegistration) {\n        this.commandRegistration = commandRegistration;\n    }\n    CommandActionHandler.prototype.handle = function (action) {\n        return this.commandRegistration.factory(action);\n    };\n    return CommandActionHandler;\n}());\nexports.CommandActionHandler = CommandActionHandler;\nvar CommandActionHandlerInitializer = /** @class */ (function () {\n    function CommandActionHandlerInitializer(registrations) {\n        this.registrations = registrations;\n    }\n    CommandActionHandlerInitializer.prototype.initialize = function (registry) {\n        this.registrations.forEach(function (registration) {\n            return registry.register(registration.kind, new CommandActionHandler(registration));\n        });\n    };\n    CommandActionHandlerInitializer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.CommandRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], CommandActionHandlerInitializer);\n    return CommandActionHandlerInitializer;\n}());\nexports.CommandActionHandlerInitializer = CommandActionHandlerInitializer;\n/**\n * Use this method in your DI configuration to register a new command to the diagram.\n */\nfunction configureCommand(context, constr) {\n    if (!inversify_2.isInjectable(constr)) {\n        throw new Error(\"Commands should be @injectable: \" + constr.name);\n    }\n    if (!context.isBound(constr)) {\n        context.bind(constr).toSelf();\n    }\n    context.bind(types_1.TYPES.CommandRegistration).toDynamicValue(function (ctx) { return ({\n        kind: constr.KIND,\n        factory: function (action) {\n            var childContainer = new inversify_1.Container();\n            childContainer.parent = ctx.container;\n            childContainer.bind(types_1.TYPES.Action).toConstantValue(action);\n            return childContainer.get(constr);\n        }\n    }); });\n}\nexports.configureCommand = configureCommand;\n//# sourceMappingURL=command-registration.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar object_1 = require(\"../../utils/object\");\nvar types_1 = require(\"../types\");\nfunction overrideCommandStackOptions(container, options) {\n    var defaultOptions = container.get(types_1.TYPES.CommandStackOptions);\n    object_1.safeAssign(defaultOptions, options);\n    return defaultOptions;\n}\nexports.overrideCommandStackOptions = overrideCommandStackOptions;\n//# sourceMappingURL=command-stack-options.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar smodel_1 = require(\"../model/smodel\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\nvar command_1 = require(\"./command\");\n/**\n * The implementation of the ICommandStack. Clients should not use this\n * class directly.\n *\n * The command stack holds the current model as the result of the current\n * promise. When a new command is executed/undone/redone, its execution is\n * chained using <code>Promise#then()</code> to the current Promise. This\n * way we can handle long running commands without blocking the current\n * thread.\n *\n * The command stack also does the special handling for special commands:\n *\n * System commands should be transparent to the user and as such be\n * automatically undone/redone with the next plain command. Additional care\n * must be taken that system commands that are executed after undo don't\n * break the correspondence between the topmost commands on the undo and\n * redo stacks.\n *\n * Hidden commands only tell the viewer to render a hidden model such that\n * its bounds can be extracted from the DOM and forwarded as separate actions.\n * Hidden commands should not leave any trace on the undo/redo/off stacks.\n *\n * Mergeable commands should be merged with their predecessor if possible,\n * such that e.g. multiple subsequent moves of the smae element can be undone\n * in one single step.\n */\nvar CommandStack = /** @class */ (function () {\n    function CommandStack() {\n        this.undoStack = [];\n        this.redoStack = [];\n        /**\n         * System commands should be transparent to the user in undo/redo\n         * operations. When a system command is executed when the redo\n         * stack is not empty, it is pushed to offStack instead.\n         *\n         * On redo, all commands form this stack are undone such that the\n         * redo operation gets the exact same model as when it was executed\n         * first.\n         *\n         * On undo, all commands form this stack are undone as well as\n         * system ommands should be transparent to the user.\n         */\n        this.offStack = [];\n    }\n    CommandStack.prototype.initialize = function () {\n        this.currentPromise = Promise.resolve({\n            main: {\n                model: this.modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT),\n                modelChanged: false,\n            },\n            hidden: {\n                model: this.modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT),\n                modelChanged: false,\n            },\n            popup: {\n                model: this.modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT),\n                modelChanged: false,\n            }\n        });\n    };\n    Object.defineProperty(CommandStack.prototype, \"currentModel\", {\n        get: function () {\n            return this.currentPromise.then(function (state) { return state.main.model; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CommandStack.prototype.executeAll = function (commands) {\n        var _this = this;\n        commands.forEach(function (command) {\n            _this.logger.log(_this, 'Executing', command);\n            _this.handleCommand(command, command.execute, _this.mergeOrPush);\n        });\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.execute = function (command) {\n        this.logger.log(this, 'Executing', command);\n        this.handleCommand(command, command.execute, this.mergeOrPush);\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.undo = function () {\n        var _this = this;\n        this.undoOffStackSystemCommands();\n        this.undoPreceedingSystemCommands();\n        var command = this.undoStack[this.undoStack.length - 1];\n        if (command !== undefined && !this.isBlockUndo(command)) {\n            this.undoStack.pop();\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, function (c, context) {\n                _this.redoStack.push(c);\n            });\n        }\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.redo = function () {\n        var _this = this;\n        this.undoOffStackSystemCommands();\n        var command = this.redoStack.pop();\n        if (command !== undefined) {\n            this.logger.log(this, 'Redoing', command);\n            this.handleCommand(command, command.redo, function (c, context) {\n                _this.pushToUndoStack(c);\n            });\n        }\n        this.redoFollowingSystemCommands();\n        return this.thenUpdate();\n    };\n    /**\n     * Chains the current promise with another Promise that performs the\n     * given operation on the given command.\n     *\n     * @param beforeResolve a function that is called directly before\n     *      resolving the Promise to return the new model. Usually puts the\n     *      command on the appropriate stack.\n     */\n    CommandStack.prototype.handleCommand = function (command, operation, beforeResolve) {\n        var _this = this;\n        this.currentPromise = this.currentPromise.then(function (state) {\n            return new Promise(function (resolve) {\n                var target;\n                if (command instanceof command_1.HiddenCommand)\n                    target = 'hidden';\n                else if (command instanceof command_1.PopupCommand)\n                    target = 'popup';\n                else\n                    target = 'main';\n                var context = _this.createContext(state.main.model);\n                var commandResult;\n                try {\n                    commandResult = operation.call(command, context);\n                }\n                catch (error) {\n                    _this.logger.error(_this, \"Failed to execute command:\", error);\n                    commandResult = state[target].model;\n                }\n                var newState = copyState(state);\n                if (commandResult instanceof Promise) {\n                    commandResult.then(function (newModel) {\n                        if (target === 'main')\n                            beforeResolve.call(_this, command, context);\n                        newState[target] = { model: newModel, modelChanged: true };\n                        resolve(newState);\n                    });\n                }\n                else if (commandResult instanceof smodel_1.SModelRoot) {\n                    if (target === 'main')\n                        beforeResolve.call(_this, command, context);\n                    newState[target] = { model: commandResult, modelChanged: true };\n                    resolve(newState);\n                }\n                else {\n                    if (target === 'main')\n                        beforeResolve.call(_this, command, context);\n                    newState[target] = {\n                        model: commandResult.model,\n                        modelChanged: state[target].modelChanged || commandResult.modelChanged,\n                        cause: commandResult.cause\n                    };\n                    resolve(newState);\n                }\n            });\n        });\n    };\n    CommandStack.prototype.pushToUndoStack = function (command) {\n        this.undoStack.push(command);\n        if (this.options.undoHistoryLimit >= 0 && this.undoStack.length > this.options.undoHistoryLimit)\n            this.undoStack.splice(0, this.undoStack.length - this.options.undoHistoryLimit);\n    };\n    /**\n     * Notifies the Viewer to render the new model and/or the new hidden model\n     * and returns a Promise for the new model.\n     */\n    CommandStack.prototype.thenUpdate = function () {\n        var _this = this;\n        this.currentPromise = this.currentPromise.then(function (state) {\n            var newState = copyState(state);\n            if (state.hidden.modelChanged) {\n                _this.updateHidden(state.hidden.model, state.hidden.cause);\n                newState.hidden.modelChanged = false;\n                newState.hidden.cause = undefined;\n            }\n            if (state.main.modelChanged) {\n                _this.update(state.main.model, state.main.cause);\n                newState.main.modelChanged = false;\n                newState.main.cause = undefined;\n            }\n            if (state.popup.modelChanged) {\n                _this.updatePopup(state.popup.model, state.popup.cause);\n                newState.popup.modelChanged = false;\n                newState.popup.cause = undefined;\n            }\n            return newState;\n        });\n        return this.currentModel;\n    };\n    /**\n     * Notify the `ModelViewer` that the model has changed.\n     */\n    CommandStack.prototype.update = function (model, cause) {\n        if (this.modelViewer === undefined) {\n            this.modelViewer = this.viewerProvider.modelViewer;\n        }\n        this.modelViewer.update(model, cause);\n    };\n    /**\n     * Notify the `HiddenModelViewer` that the hidden model has changed.\n     */\n    CommandStack.prototype.updateHidden = function (model, cause) {\n        if (this.hiddenModelViewer === undefined) {\n            this.hiddenModelViewer = this.viewerProvider.hiddenModelViewer;\n        }\n        this.hiddenModelViewer.update(model, cause);\n    };\n    /**\n     * Notify the `PopupModelViewer` that the popup model has changed.\n     */\n    CommandStack.prototype.updatePopup = function (model, cause) {\n        if (this.popupModelViewer === undefined) {\n            this.popupModelViewer = this.viewerProvider.popupModelViewer;\n        }\n        this.popupModelViewer.update(model, cause);\n    };\n    /**\n     * Handling of commands after their execution.\n     *\n     * Hidden commands are not pushed to any stack.\n     *\n     * System commands are pushed to the <code>offStack</code> when the redo\n     * stack is not empty, allowing to undo the before a redo to keep the chain\n     * of commands consistent.\n     *\n     * Mergable commands are merged if possible.\n     */\n    CommandStack.prototype.mergeOrPush = function (command, context) {\n        var _this = this;\n        if (this.isBlockUndo(command)) {\n            this.undoStack = [];\n            this.redoStack = [];\n            this.offStack = [];\n            this.pushToUndoStack(command);\n            return;\n        }\n        if (this.isPushToOffStack(command) && this.redoStack.length > 0) {\n            if (this.offStack.length > 0) {\n                var lastCommand = this.offStack[this.offStack.length - 1];\n                if (lastCommand instanceof command_1.MergeableCommand && lastCommand.merge(command, context))\n                    return;\n            }\n            this.offStack.push(command);\n            return;\n        }\n        if (this.isPushToUndoStack(command)) {\n            this.offStack.forEach(function (c) { return _this.undoStack.push(c); });\n            this.offStack = [];\n            this.redoStack = [];\n            if (this.undoStack.length > 0) {\n                var lastCommand = this.undoStack[this.undoStack.length - 1];\n                if (lastCommand instanceof command_1.MergeableCommand && lastCommand.merge(command, context))\n                    return;\n            }\n            this.pushToUndoStack(command);\n        }\n    };\n    /**\n     * Reverts all system commands on the offStack.\n     */\n    CommandStack.prototype.undoOffStackSystemCommands = function () {\n        var command = this.offStack.pop();\n        while (command !== undefined) {\n            this.logger.log(this, 'Undoing off-stack', command);\n            this.handleCommand(command, command.undo, function () { });\n            command = this.offStack.pop();\n        }\n    };\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>undo()</code> to revert all system commands\n     * at the top of the undoStack.\n     */\n    CommandStack.prototype.undoPreceedingSystemCommands = function () {\n        var _this = this;\n        var command = this.undoStack[this.undoStack.length - 1];\n        while (command !== undefined && this.isPushToOffStack(command)) {\n            this.undoStack.pop();\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, function (c, context) {\n                _this.redoStack.push(c);\n            });\n            command = this.undoStack[this.undoStack.length - 1];\n        }\n    };\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>redo()</code> to re-execute all system commands\n     * at the top of the redoStack.\n     */\n    CommandStack.prototype.redoFollowingSystemCommands = function () {\n        var _this = this;\n        var command = this.redoStack[this.redoStack.length - 1];\n        while (command !== undefined && this.isPushToOffStack(command)) {\n            this.redoStack.pop();\n            this.logger.log(this, 'Redoing ', command);\n            this.handleCommand(command, command.redo, function (c, context) {\n                _this.pushToUndoStack(c);\n            });\n            command = this.redoStack[this.redoStack.length - 1];\n        }\n    };\n    /**\n     * Assembles the context object that is passed to the commands execution method.\n     */\n    CommandStack.prototype.createContext = function (currentModel) {\n        return {\n            root: currentModel,\n            modelChanged: this,\n            modelFactory: this.modelFactory,\n            duration: this.options.defaultDuration,\n            logger: this.logger,\n            syncer: this.syncer\n        };\n    };\n    CommandStack.prototype.isPushToOffStack = function (command) {\n        return command instanceof command_1.SystemCommand;\n    };\n    CommandStack.prototype.isPushToUndoStack = function (command) {\n        return !(command instanceof command_1.HiddenCommand);\n    };\n    CommandStack.prototype.isBlockUndo = function (command) {\n        return command instanceof command_1.ResetCommand;\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IModelFactory),\n        __metadata(\"design:type\", Object)\n    ], CommandStack.prototype, \"modelFactory\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IViewerProvider),\n        __metadata(\"design:type\", Object)\n    ], CommandStack.prototype, \"viewerProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], CommandStack.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.AnimationFrameSyncer),\n        __metadata(\"design:type\", animation_frame_syncer_1.AnimationFrameSyncer)\n    ], CommandStack.prototype, \"syncer\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.CommandStackOptions),\n        __metadata(\"design:type\", Object)\n    ], CommandStack.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.postConstruct(),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", []),\n        __metadata(\"design:returntype\", void 0)\n    ], CommandStack.prototype, \"initialize\", null);\n    CommandStack = __decorate([\n        inversify_1.injectable()\n    ], CommandStack);\n    return CommandStack;\n}());\nexports.CommandStack = CommandStack;\nfunction copyState(state) {\n    return {\n        main: __assign({}, state.main),\n        hidden: __assign({}, state.hidden),\n        popup: __assign({}, state.popup)\n    };\n}\n//# sourceMappingURL=command-stack.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\n/**\n * Base class for all commands.\n *\n * Command instances are created via dependency injection and should take\n * the respective action as an injected constructor parameter. They must\n * also define a static <code>KIND</code> which is used to map an\n * <code>Action#kind</code>.\n *\n * <pre>\n * export class MyCommand extends Command {\n *   static KIND = 'MyCommand'\n *   constructor(@inject(TYPES.Action) action: MyAction) {\n *   ...\n * }\n * @inject(TYPES.Action)\n * </pre>\n */\nvar Command = /** @class */ (function () {\n    function Command() {\n    }\n    Command = __decorate([\n        inversify_1.injectable()\n    ], Command);\n    return Command;\n}());\nexports.Command = Command;\n/**\n * A mergeable command can accumulate subsequent commands of the same kind.\n *\n * For example, multiple subsequent move commands can be merged to yield a\n * single command, such that undo will roll them back altogether. Otherwise\n * the user would have to push CTRL-Z for each mouse move element that\n * resuted in a command.\n */\nvar MergeableCommand = /** @class */ (function (_super) {\n    __extends(MergeableCommand, _super);\n    function MergeableCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Tries to merge the given command with this.\n     *\n     * @param command\n     * @param context\n     */\n    MergeableCommand.prototype.merge = function (command, context) {\n        return false;\n    };\n    MergeableCommand = __decorate([\n        inversify_1.injectable()\n    ], MergeableCommand);\n    return MergeableCommand;\n}(Command));\nexports.MergeableCommand = MergeableCommand;\n/**\n * A hidden command is used to trigger the rendering of a model on a\n * hidden canvas.\n *\n * Some graphical elements are styled using CSS, others have bounds that\n * require to layout their children before being computed. In such cases\n * we cannot tell about the size of elements without acutally rendering\n * the DOM. We render them to an invisible canvas. This can be achieved\n * using hidden commands.\n *\n * Hidden commands do not change the model directly, and are as such\n * neither undoable nor redoable. The command stack does not push them on\n * any stack and forwards the resulting model to the invisible viewer.\n */\nvar HiddenCommand = /** @class */ (function (_super) {\n    __extends(HiddenCommand, _super);\n    function HiddenCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HiddenCommand.prototype.undo = function (context) {\n        context.logger.error(this, 'Cannot undo a hidden command');\n        return context.root;\n    };\n    HiddenCommand.prototype.redo = function (context) {\n        context.logger.error(this, 'Cannot redo a hidden command');\n        return context.root;\n    };\n    HiddenCommand = __decorate([\n        inversify_1.injectable()\n    ], HiddenCommand);\n    return HiddenCommand;\n}(Command));\nexports.HiddenCommand = HiddenCommand;\nvar PopupCommand = /** @class */ (function (_super) {\n    __extends(PopupCommand, _super);\n    function PopupCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PopupCommand = __decorate([\n        inversify_1.injectable()\n    ], PopupCommand);\n    return PopupCommand;\n}(Command));\nexports.PopupCommand = PopupCommand;\n/**\n * A system command is triggered by the system, e.g. in order to update bounds\n * in the model with data fetched from the DOM.\n *\n * As it is automatically triggered it should not count as a single command in\n * undo/redo operations. Into the bargain, such an automatic command could occur\n * after an undo and as such make the next redo command invalid because it is\n * based on a model state that has changed. The command stack handles system\n * commands in a special way to overcome these issues.\n */\nvar SystemCommand = /** @class */ (function (_super) {\n    __extends(SystemCommand, _super);\n    function SystemCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SystemCommand = __decorate([\n        inversify_1.injectable()\n    ], SystemCommand);\n    return SystemCommand;\n}(Command));\nexports.SystemCommand = SystemCommand;\n/**\n * A reset command deletes all undo/redo stacks and cannot be undone.\n *\n * It marks a point of no return.\n */\nvar ResetCommand = /** @class */ (function (_super) {\n    __extends(ResetCommand, _super);\n    function ResetCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ResetCommand = __decorate([\n        inversify_1.injectable()\n    ], ResetCommand);\n    return ResetCommand;\n}(Command));\nexports.ResetCommand = ResetCommand;\n//# sourceMappingURL=command.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar command_1 = require(\"./command\");\n/**\n * A command that does not modify the internal model, but retrieves information\n * from it by dispatching a response action.\n */\nvar ModelRequestCommand = /** @class */ (function (_super) {\n    __extends(ModelRequestCommand, _super);\n    function ModelRequestCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ModelRequestCommand.prototype.execute = function (context) {\n        var result = this.retrieveResult(context);\n        this.actionDispatcher.dispatch(result);\n        return { model: context.root, modelChanged: false };\n    };\n    ModelRequestCommand.prototype.undo = function (context) {\n        return { model: context.root, modelChanged: false };\n    };\n    ModelRequestCommand.prototype.redo = function (context) {\n        return { model: context.root, modelChanged: false };\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], ModelRequestCommand.prototype, \"actionDispatcher\", void 0);\n    ModelRequestCommand = __decorate([\n        inversify_1.injectable()\n    ], ModelRequestCommand);\n    return ModelRequestCommand;\n}(command_1.SystemCommand));\nexports.ModelRequestCommand = ModelRequestCommand;\n//# sourceMappingURL=request-command.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"./types\");\nvar initialize_canvas_1 = require(\"./features/initialize-canvas\");\nvar logging_1 = require(\"../utils/logging\");\nvar action_dispatcher_1 = require(\"./actions/action-dispatcher\");\nvar action_handler_1 = require(\"./actions/action-handler\");\nvar command_stack_1 = require(\"./commands/command-stack\");\nvar smodel_factory_1 = require(\"./model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"./animations/animation-frame-syncer\");\nvar viewer_1 = require(\"./views/viewer\");\nvar viewer_options_1 = require(\"./views/viewer-options\");\nvar mouse_tool_1 = require(\"./views/mouse-tool\");\nvar key_tool_1 = require(\"./views/key-tool\");\nvar vnode_postprocessor_1 = require(\"./views/vnode-postprocessor\");\nvar view_1 = require(\"./views/view\");\nvar viewer_cache_1 = require(\"./views/viewer-cache\");\nvar dom_helper_1 = require(\"./views/dom-helper\");\nvar id_postprocessor_1 = require(\"./views/id-postprocessor\");\nvar command_registration_1 = require(\"./commands/command-registration\");\nvar css_class_postprocessor_1 = require(\"./views/css-class-postprocessor\");\nvar tool_manager_1 = require(\"./tool-manager/tool-manager\");\nvar tool_1 = require(\"./tool-manager/tool\");\nvar set_model_1 = require(\"./features/set-model\");\nvar ui_extension_registry_1 = require(\"./ui-extensions/ui-extension-registry\");\nvar diagram_locker_1 = require(\"./actions/diagram-locker\");\nvar defaultContainerModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    // Logging ---------------------------------------------\n    bind(types_1.TYPES.ILogger).to(logging_1.NullLogger).inSingletonScope();\n    bind(types_1.TYPES.LogLevel).toConstantValue(logging_1.LogLevel.warn);\n    // Registries ---------------------------------------------\n    bind(types_1.TYPES.SModelRegistry).to(smodel_factory_1.SModelRegistry).inSingletonScope();\n    bind(action_handler_1.ActionHandlerRegistry).toSelf().inSingletonScope();\n    bind(types_1.TYPES.ActionHandlerRegistryProvider).toProvider(function (ctx) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(ctx.container.get(action_handler_1.ActionHandlerRegistry));\n            });\n        };\n    });\n    bind(types_1.TYPES.ViewRegistry).to(view_1.ViewRegistry).inSingletonScope();\n    // Model Creation ---------------------------------------------\n    bind(types_1.TYPES.IModelFactory).to(smodel_factory_1.SModelFactory).inSingletonScope();\n    // Action Dispatcher ---------------------------------------------\n    bind(types_1.TYPES.IActionDispatcher).to(action_dispatcher_1.ActionDispatcher).inSingletonScope();\n    bind(types_1.TYPES.IActionDispatcherProvider).toProvider(function (ctx) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(ctx.container.get(types_1.TYPES.IActionDispatcher));\n            });\n        };\n    });\n    bind(types_1.TYPES.IDiagramLocker).to(diagram_locker_1.DefaultDiagramLocker).inSingletonScope();\n    // Action handler\n    bind(types_1.TYPES.IActionHandlerInitializer).to(command_registration_1.CommandActionHandlerInitializer);\n    // Command Stack ---------------------------------------------\n    bind(types_1.TYPES.ICommandStack).to(command_stack_1.CommandStack).inSingletonScope();\n    bind(types_1.TYPES.ICommandStackProvider).toProvider(function (ctx) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(ctx.container.get(types_1.TYPES.ICommandStack));\n            });\n        };\n    });\n    bind(types_1.TYPES.CommandStackOptions).toConstantValue({\n        defaultDuration: 250,\n        undoHistoryLimit: 50\n    });\n    // Viewer ---------------------------------------------\n    bind(viewer_1.ModelViewer).toSelf().inSingletonScope();\n    bind(viewer_1.HiddenModelViewer).toSelf().inSingletonScope();\n    bind(viewer_1.PopupModelViewer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.ModelViewer).toDynamicValue(function (ctx) {\n        var container = ctx.container.createChild();\n        container.bind(types_1.TYPES.IViewer).toService(viewer_1.ModelViewer);\n        container.bind(viewer_cache_1.ViewerCache).toSelf();\n        return container.get(viewer_cache_1.ViewerCache);\n    }).inSingletonScope();\n    bind(types_1.TYPES.PopupModelViewer).toDynamicValue(function (ctx) {\n        var container = ctx.container.createChild();\n        container.bind(types_1.TYPES.IViewer).toService(viewer_1.PopupModelViewer);\n        container.bind(viewer_cache_1.ViewerCache).toSelf();\n        return container.get(viewer_cache_1.ViewerCache);\n    }).inSingletonScope();\n    bind(types_1.TYPES.HiddenModelViewer).toService(viewer_1.HiddenModelViewer);\n    bind(types_1.TYPES.IViewerProvider).toDynamicValue(function (ctx) {\n        return {\n            get modelViewer() {\n                return ctx.container.get(types_1.TYPES.ModelViewer);\n            },\n            get hiddenModelViewer() {\n                return ctx.container.get(types_1.TYPES.HiddenModelViewer);\n            },\n            get popupModelViewer() {\n                return ctx.container.get(types_1.TYPES.PopupModelViewer);\n            }\n        };\n    });\n    bind(types_1.TYPES.ViewerOptions).toConstantValue(viewer_options_1.defaultViewerOptions());\n    bind(types_1.TYPES.PatcherProvider).to(viewer_1.PatcherProvider).inSingletonScope();\n    bind(types_1.TYPES.DOMHelper).to(dom_helper_1.DOMHelper).inSingletonScope();\n    bind(types_1.TYPES.ModelRendererFactory).toFactory(function (ctx) {\n        return function (targetKind, processors, args) {\n            if (args === void 0) { args = {}; }\n            var viewRegistry = ctx.container.get(types_1.TYPES.ViewRegistry);\n            return new viewer_1.ModelRenderer(viewRegistry, targetKind, processors, args);\n        };\n    });\n    // Tools & Postprocessors --------------------------------------\n    bind(id_postprocessor_1.IdPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(id_postprocessor_1.IdPostprocessor);\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(id_postprocessor_1.IdPostprocessor);\n    bind(css_class_postprocessor_1.CssClassPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(css_class_postprocessor_1.CssClassPostprocessor);\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(css_class_postprocessor_1.CssClassPostprocessor);\n    bind(mouse_tool_1.MouseTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(mouse_tool_1.MouseTool);\n    bind(key_tool_1.KeyTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(key_tool_1.KeyTool);\n    bind(vnode_postprocessor_1.FocusFixPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(vnode_postprocessor_1.FocusFixPostprocessor);\n    bind(types_1.TYPES.PopupVNodePostprocessor).toService(id_postprocessor_1.IdPostprocessor);\n    bind(mouse_tool_1.PopupMouseTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.PopupVNodePostprocessor).toService(mouse_tool_1.PopupMouseTool);\n    // Animation Frame Sync ------------------------------------------\n    bind(types_1.TYPES.AnimationFrameSyncer).to(animation_frame_syncer_1.AnimationFrameSyncer).inSingletonScope();\n    // Canvas Initialization ---------------------------------------------\n    var context = { bind: bind, isBound: isBound };\n    command_registration_1.configureCommand(context, initialize_canvas_1.InitializeCanvasBoundsCommand);\n    bind(initialize_canvas_1.CanvasBoundsInitializer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(initialize_canvas_1.CanvasBoundsInitializer);\n    // Model commands ---------------------------------------------\n    command_registration_1.configureCommand(context, set_model_1.SetModelCommand);\n    // Tool manager initialization ------------------------------------\n    bind(types_1.TYPES.IToolManager).to(tool_manager_1.ToolManager).inSingletonScope();\n    bind(types_1.TYPES.KeyListener).to(tool_manager_1.DefaultToolsEnablingKeyListener);\n    bind(tool_manager_1.ToolManagerActionHandler).toSelf().inSingletonScope();\n    action_handler_1.configureActionHandler(context, tool_1.EnableDefaultToolsAction.KIND, tool_manager_1.ToolManagerActionHandler);\n    action_handler_1.configureActionHandler(context, tool_1.EnableToolsAction.KIND, tool_manager_1.ToolManagerActionHandler);\n    // UIExtension registry initialization ------------------------------------\n    bind(types_1.TYPES.UIExtensionRegistry).to(ui_extension_registry_1.UIExtensionRegistry).inSingletonScope();\n    command_registration_1.configureCommand(context, ui_extension_registry_1.SetUIExtensionVisibilityCommand);\n    // Tracker for last known mouse position on diagram ------------------------\n    bind(mouse_tool_1.MousePositionTracker).toSelf().inSingletonScope();\n    bind(types_1.TYPES.MouseListener).toService(mouse_tool_1.MousePositionTracker);\n});\nexports.default = defaultContainerModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../model/smodel\");\nvar command_1 = require(\"../commands/command\");\nvar browser_1 = require(\"../../utils/browser\");\n/**\n * Grabs the bounds from the root element in page coordinates and fires a\n * InitializeCanvasBoundsAction. This size is needed for other actions such\n * as FitToScreenAction.\n */\nvar CanvasBoundsInitializer = /** @class */ (function () {\n    function CanvasBoundsInitializer() {\n    }\n    CanvasBoundsInitializer.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot && !geometry_1.isValidDimension(element.canvasBounds)) {\n            this.rootAndVnode = [element, vnode];\n        }\n        return vnode;\n    };\n    CanvasBoundsInitializer.prototype.postUpdate = function () {\n        if (this.rootAndVnode !== undefined) {\n            var domElement = this.rootAndVnode[1].elm;\n            var oldBounds = this.rootAndVnode[0].canvasBounds;\n            if (domElement !== undefined) {\n                var newBounds = this.getBoundsInPage(domElement);\n                if (!(geometry_1.almostEquals(newBounds.x, oldBounds.x)\n                    && geometry_1.almostEquals(newBounds.y, oldBounds.y)\n                    && geometry_1.almostEquals(newBounds.width, oldBounds.width)\n                    && geometry_1.almostEquals(newBounds.height, oldBounds.width)))\n                    this.actionDispatcher.dispatch(new InitializeCanvasBoundsAction(newBounds));\n            }\n            this.rootAndVnode = undefined;\n        }\n    };\n    CanvasBoundsInitializer.prototype.getBoundsInPage = function (element) {\n        var bounds = element.getBoundingClientRect();\n        var scroll = browser_1.getWindowScroll();\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], CanvasBoundsInitializer.prototype, \"actionDispatcher\", void 0);\n    CanvasBoundsInitializer = __decorate([\n        inversify_1.injectable()\n    ], CanvasBoundsInitializer);\n    return CanvasBoundsInitializer;\n}());\nexports.CanvasBoundsInitializer = CanvasBoundsInitializer;\nvar InitializeCanvasBoundsAction = /** @class */ (function () {\n    function InitializeCanvasBoundsAction(newCanvasBounds) {\n        this.newCanvasBounds = newCanvasBounds;\n        this.kind = InitializeCanvasBoundsAction.KIND;\n    }\n    InitializeCanvasBoundsAction.KIND = 'initializeCanvasBounds';\n    return InitializeCanvasBoundsAction;\n}());\nexports.InitializeCanvasBoundsAction = InitializeCanvasBoundsAction;\nvar InitializeCanvasBoundsCommand = /** @class */ (function (_super) {\n    __extends(InitializeCanvasBoundsCommand, _super);\n    function InitializeCanvasBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    InitializeCanvasBoundsCommand.prototype.execute = function (context) {\n        this.newCanvasBounds = this.action.newCanvasBounds;\n        context.root.canvasBounds = this.newCanvasBounds;\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.prototype.undo = function (context) {\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.prototype.redo = function (context) {\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.KIND = InitializeCanvasBoundsAction.KIND;\n    InitializeCanvasBoundsCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [InitializeCanvasBoundsAction])\n    ], InitializeCanvasBoundsCommand);\n    return InitializeCanvasBoundsCommand;\n}(command_1.SystemCommand));\nexports.InitializeCanvasBoundsCommand = InitializeCanvasBoundsCommand;\n//# sourceMappingURL=initialize-canvas.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../actions/action\");\nvar command_1 = require(\"../commands/command\");\nvar types_1 = require(\"../types\");\nvar initialize_canvas_1 = require(\"./initialize-canvas\");\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) in order to request a model. Usually this\n * is the first message that is sent to the source, so it is also used to initiate the communication.\n * The response is a SetModelAction or an UpdateModelAction.\n */\nvar RequestModelAction = /** @class */ (function () {\n    function RequestModelAction(options, requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.options = options;\n        this.requestId = requestId;\n        this.kind = RequestModelAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    RequestModelAction.create = function (options) {\n        return new RequestModelAction(options, action_1.generateRequestId());\n    };\n    RequestModelAction.KIND = 'requestModel';\n    return RequestModelAction;\n}());\nexports.RequestModelAction = RequestModelAction;\n/**\n * Sent from the model source to the client in order to set the model. If a model is already present, it is replaced.\n */\nvar SetModelAction = /** @class */ (function () {\n    function SetModelAction(newRoot, responseId) {\n        if (responseId === void 0) { responseId = ''; }\n        this.newRoot = newRoot;\n        this.responseId = responseId;\n        this.kind = SetModelAction.KIND;\n    }\n    SetModelAction.KIND = 'setModel';\n    return SetModelAction;\n}());\nexports.SetModelAction = SetModelAction;\nvar SetModelCommand = /** @class */ (function (_super) {\n    __extends(SetModelCommand, _super);\n    function SetModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetModelCommand.prototype.execute = function (context) {\n        this.oldRoot = context.modelFactory.createRoot(context.root);\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    };\n    SetModelCommand.prototype.undo = function (context) {\n        return this.oldRoot;\n    };\n    SetModelCommand.prototype.redo = function (context) {\n        return this.newRoot;\n    };\n    Object.defineProperty(SetModelCommand.prototype, \"blockUntil\", {\n        get: function () {\n            return function (action) { return action.kind === initialize_canvas_1.InitializeCanvasBoundsCommand.KIND; };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SetModelCommand.KIND = SetModelAction.KIND;\n    SetModelCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetModelAction])\n    ], SetModelCommand);\n    return SetModelCommand;\n}(command_1.ResetCommand));\nexports.SetModelCommand = SetModelCommand;\n//# sourceMappingURL=set-model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar smodel_1 = require(\"./smodel\");\n/**\n * The default model factory creates SModelRoot for the root element and SChildElement for all other\n * model elements.\n */\nvar SModelFactory = /** @class */ (function () {\n    function SModelFactory() {\n    }\n    SModelFactory.prototype.createElement = function (schema, parent) {\n        var child;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SChildElement))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SChildElement.\");\n            child = regElement;\n        }\n        else {\n            child = new smodel_1.SChildElement();\n        }\n        return this.initializeChild(child, schema, parent);\n    };\n    SModelFactory.prototype.createRoot = function (schema) {\n        var root;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SModelRoot))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SModelRoot.\");\n            root = regElement;\n        }\n        else {\n            root = new smodel_1.SModelRoot();\n        }\n        return this.initializeRoot(root, schema);\n    };\n    SModelFactory.prototype.createSchema = function (element) {\n        var _this = this;\n        var schema = {};\n        for (var key in element) {\n            if (!this.isReserved(element, key)) {\n                var value = element[key];\n                if (typeof value !== 'function')\n                    schema[key] = value;\n            }\n        }\n        if (element instanceof smodel_1.SParentElement)\n            schema['children'] = element.children.map(function (child) { return _this.createSchema(child); });\n        return schema;\n    };\n    SModelFactory.prototype.initializeElement = function (element, schema) {\n        for (var key in schema) {\n            if (!this.isReserved(element, key)) {\n                var value = schema[key];\n                if (typeof value !== 'function')\n                    element[key] = value;\n            }\n        }\n        return element;\n    };\n    SModelFactory.prototype.isReserved = function (element, propertyName) {\n        if (['children', 'parent', 'index'].indexOf(propertyName) >= 0)\n            return true;\n        var obj = element;\n        do {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, propertyName);\n            if (descriptor !== undefined)\n                return descriptor.get !== undefined;\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return false;\n    };\n    SModelFactory.prototype.initializeParent = function (parent, schema) {\n        var _this = this;\n        this.initializeElement(parent, schema);\n        if (smodel_1.isParent(schema)) {\n            parent.children = schema.children.map(function (childSchema) { return _this.createElement(childSchema, parent); });\n        }\n        return parent;\n    };\n    SModelFactory.prototype.initializeChild = function (child, schema, parent) {\n        this.initializeParent(child, schema);\n        if (parent !== undefined) {\n            child.parent = parent;\n        }\n        return child;\n    };\n    SModelFactory.prototype.initializeRoot = function (root, schema) {\n        this.initializeParent(root, schema);\n        root.index.add(root);\n        return root;\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.SModelRegistry),\n        __metadata(\"design:type\", SModelRegistry)\n    ], SModelFactory.prototype, \"registry\", void 0);\n    SModelFactory = __decorate([\n        inversify_1.injectable()\n    ], SModelFactory);\n    return SModelFactory;\n}());\nexports.SModelFactory = SModelFactory;\nexports.EMPTY_ROOT = Object.freeze({\n    type: 'NONE',\n    id: 'EMPTY'\n});\n/**\n * Model element classes registered here are considered automatically when constructring a model from its schema.\n */\nvar SModelRegistry = /** @class */ (function (_super) {\n    __extends(SModelRegistry, _super);\n    function SModelRegistry(registrations) {\n        var _this = _super.call(this) || this;\n        registrations.forEach(function (registration) {\n            var defaultFeatures = _this.getDefaultFeatures(registration.constr);\n            if (!defaultFeatures && registration.features && registration.features.enable)\n                defaultFeatures = [];\n            if (defaultFeatures) {\n                var featureSet_1 = createFeatureSet(defaultFeatures, registration.features);\n                _this.register(registration.type, function () {\n                    var element = new registration.constr();\n                    element.features = featureSet_1;\n                    return element;\n                });\n            }\n            else {\n                _this.register(registration.type, function () { return new registration.constr(); });\n            }\n        });\n        return _this;\n    }\n    SModelRegistry.prototype.getDefaultFeatures = function (constr) {\n        var obj = constr;\n        do {\n            var defaultFeatures = obj.DEFAULT_FEATURES;\n            if (defaultFeatures)\n                return defaultFeatures;\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return undefined;\n    };\n    SModelRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.SModelElementRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], SModelRegistry);\n    return SModelRegistry;\n}(registry_1.FactoryRegistry));\nexports.SModelRegistry = SModelRegistry;\nfunction createFeatureSet(defaults, custom) {\n    var featureSet = new Set(defaults);\n    if (custom && custom.enable) {\n        for (var _i = 0, _a = custom.enable; _i < _a.length; _i++) {\n            var f = _a[_i];\n            featureSet.add(f);\n        }\n    }\n    if (custom && custom.disable) {\n        for (var _b = 0, _c = custom.disable; _b < _c.length; _b++) {\n            var f = _c[_b];\n            featureSet.delete(f);\n        }\n    }\n    return featureSet;\n}\nexports.createFeatureSet = createFeatureSet;\n//# sourceMappingURL=smodel-factory.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../types\");\nvar smodel_1 = require(\"./smodel\");\n/**\n * Register a model element constructor for an element type.\n */\nfunction registerModelElement(context, type, constr, features) {\n    context.bind(types_1.TYPES.SModelElementRegistration).toConstantValue({\n        type: type, constr: constr, features: features\n    });\n}\nexports.registerModelElement = registerModelElement;\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the basic type of a model element.\n */\nfunction getBasicType(schema) {\n    if (!schema.type)\n        return '';\n    var colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(0, colonIndex);\n    else\n        return schema.type;\n}\nexports.getBasicType = getBasicType;\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the sub-type of a model element.\n */\nfunction getSubType(schema) {\n    if (!schema.type)\n        return '';\n    var colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(colonIndex + 1);\n    else\n        return schema.type;\n}\nexports.getSubType = getSubType;\n/**\n * Find the element with the given identifier. If you need to find multiple elements, using an\n * SModelIndex might be more effective.\n */\nfunction findElement(parent, elementId) {\n    if (parent.id === elementId)\n        return parent;\n    if (parent.children !== undefined) {\n        for (var _i = 0, _a = parent.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            var result = findElement(child, elementId);\n            if (result !== undefined)\n                return result;\n        }\n    }\n    return undefined;\n}\nexports.findElement = findElement;\n/**\n * Find a parent element that satisfies the given predicate.\n */\nfunction findParent(element, predicate) {\n    var current = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof smodel_1.SChildElement)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\nexports.findParent = findParent;\n/**\n * Find a parent element that implements the feature identified with the given predicate.\n */\nfunction findParentByFeature(element, predicate) {\n    var current = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof smodel_1.SChildElement)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\nexports.findParentByFeature = findParentByFeature;\n/**\n * Translate a point from the coordinate system of the source element to the coordinate system\n * of the target element.\n */\nfunction translatePoint(point, source, target) {\n    if (source !== target) {\n        // Translate from the source to the root element\n        while (source instanceof smodel_1.SChildElement) {\n            point = source.localToParent(point);\n            source = source.parent;\n            if (source === target)\n                return point;\n        }\n        // Translate from the root to the target element\n        var targetTrace = [];\n        while (target instanceof smodel_1.SChildElement) {\n            targetTrace.push(target);\n            target = target.parent;\n        }\n        if (source !== target)\n            throw new Error(\"Incompatible source and target: \" + source.id + \", \" + target.id);\n        for (var i = targetTrace.length - 1; i >= 0; i--) {\n            point = targetTrace[i].parentToLocal(point);\n        }\n    }\n    return point;\n}\nexports.translatePoint = translatePoint;\n/**\n * Translate some bounds from the coordinate system of the source element to the coordinate system\n * of the target element.\n */\nfunction translateBounds(bounds, source, target) {\n    var upperLeft = translatePoint(bounds, source, target);\n    var lowerRight = translatePoint({ x: bounds.x + bounds.width, y: bounds.y + bounds.height }, source, target);\n    return {\n        x: upperLeft.x,\n        y: upperLeft.y,\n        width: lowerRight.x - upperLeft.x,\n        height: lowerRight.y - upperLeft.y\n    };\n}\nexports.translateBounds = translateBounds;\n/**\n * Tests if the given model contains an id of then given element or one of its descendants.\n */\nfunction containsSome(root, element) {\n    var test = function (el) { return root.index.getById(el.id) !== undefined; };\n    var find = function (elements) { return elements.some(function (el) { return test(el) || find(el.children); }); };\n    return find([element]);\n}\nexports.containsSome = containsSome;\n//# sourceMappingURL=smodel-utils.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar iterable_1 = require(\"../../utils/iterable\");\n/**\n * Base class for all elements of the diagram model.\n * Each model element must have a unique ID and a type that is used to look up its view.\n */\nvar SModelElement = /** @class */ (function () {\n    function SModelElement() {\n    }\n    Object.defineProperty(SModelElement.prototype, \"root\", {\n        get: function () {\n            var current = this;\n            while (current) {\n                if (current instanceof SModelRoot)\n                    return current;\n                else if (current instanceof SChildElement)\n                    current = current.parent;\n                else\n                    current = undefined;\n            }\n            throw new Error(\"Element has no root\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SModelElement.prototype, \"index\", {\n        get: function () {\n            return this.root.index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * A feature is a symbol identifying some functionality that can be enabled or disabled for\n     * a model element. The set of supported features is determined by the `features` property.\n     */\n    SModelElement.prototype.hasFeature = function (feature) {\n        return this.features !== undefined && this.features.has(feature);\n    };\n    return SModelElement;\n}());\nexports.SModelElement = SModelElement;\nfunction isParent(element) {\n    var children = element.children;\n    return children !== undefined && children.constructor === Array;\n}\nexports.isParent = isParent;\n/**\n * A parent element may contain child elements, thus the diagram model forms a tree.\n */\nvar SParentElement = /** @class */ (function (_super) {\n    __extends(SParentElement, _super);\n    function SParentElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.children = [];\n        return _this;\n    }\n    SParentElement.prototype.add = function (child, index) {\n        var children = this.children;\n        if (index === undefined) {\n            children.push(child);\n        }\n        else {\n            if (index < 0 || index > this.children.length) {\n                throw new Error(\"Child index \" + index + \" out of bounds (0..\" + children.length + \")\");\n            }\n            children.splice(index, 0, child);\n        }\n        child.parent = this;\n        this.index.add(child);\n    };\n    SParentElement.prototype.remove = function (child) {\n        var children = this.children;\n        var i = children.indexOf(child);\n        if (i < 0) {\n            throw new Error(\"No such child \" + child.id);\n        }\n        children.splice(i, 1);\n        this.index.remove(child);\n    };\n    SParentElement.prototype.removeAll = function (filter) {\n        var _this = this;\n        var children = this.children;\n        if (filter !== undefined) {\n            for (var i = children.length - 1; i >= 0; i--) {\n                if (filter(children[i])) {\n                    var child = children.splice(i, 1)[0];\n                    this.index.remove(child);\n                }\n            }\n        }\n        else {\n            children.forEach(function (child) {\n                _this.index.remove(child);\n            });\n            children.splice(0, children.length);\n        }\n    };\n    SParentElement.prototype.move = function (child, newIndex) {\n        var children = this.children;\n        var i = children.indexOf(child);\n        if (i === -1) {\n            throw new Error(\"No such child \" + child.id);\n        }\n        else {\n            if (newIndex < 0 || newIndex > children.length - 1) {\n                throw new Error(\"Child index \" + newIndex + \" out of bounds (0..\" + children.length + \")\");\n            }\n            children.splice(i, 1);\n            children.splice(newIndex, 0, child);\n        }\n    };\n    /**\n     * Transform the given bounds from the local coordinate system of this element to the coordinate\n     * system of its parent. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    SParentElement.prototype.localToParent = function (point) {\n        return geometry_1.isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    };\n    /**\n     * Transform the given bounds from the coordinate system of this element's parent to its local\n     * coordinate system. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    SParentElement.prototype.parentToLocal = function (point) {\n        return geometry_1.isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    };\n    return SParentElement;\n}(SModelElement));\nexports.SParentElement = SParentElement;\n/**\n * A child element is contained in a parent element. All elements except the model root are child\n * elements. In order to keep the model class hierarchy simple, every child element is also a\n * parent element, although for many elements the array of children is empty (i.e. they are\n * leafs in the model element tree).\n */\nvar SChildElement = /** @class */ (function (_super) {\n    __extends(SChildElement, _super);\n    function SChildElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SChildElement;\n}(SParentElement));\nexports.SChildElement = SChildElement;\n/**\n * Base class for the root element of the diagram model tree.\n */\nvar SModelRoot = /** @class */ (function (_super) {\n    __extends(SModelRoot, _super);\n    function SModelRoot(index) {\n        if (index === void 0) { index = new SModelIndex(); }\n        var _this = _super.call(this) || this;\n        _this.canvasBounds = geometry_1.EMPTY_BOUNDS;\n        // Override the index property from SModelElement, which has a getter, with a data property\n        Object.defineProperty(_this, 'index', {\n            value: index,\n            writable: false\n        });\n        return _this;\n    }\n    return SModelRoot;\n}(SParentElement));\nexports.SModelRoot = SModelRoot;\nvar ID_CHARS = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nfunction createRandomId(length) {\n    if (length === void 0) { length = 8; }\n    var id = \"\";\n    for (var i = 0; i < length; i++) {\n        id += ID_CHARS.charAt(Math.floor(Math.random() * ID_CHARS.length));\n    }\n    return id;\n}\nexports.createRandomId = createRandomId;\n/**\n * Used to speed up model element lookup by id.\n */\nvar SModelIndex = /** @class */ (function () {\n    function SModelIndex() {\n        this.id2element = new Map();\n    }\n    SModelIndex.prototype.add = function (element) {\n        if (!element.id) {\n            do {\n                element.id = createRandomId();\n            } while (this.contains(element));\n        }\n        else if (this.contains(element)) {\n            throw new Error(\"Duplicate ID in model: \" + element.id);\n        }\n        this.id2element.set(element.id, element);\n        if (element.children !== undefined && element.children.constructor === Array) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.add(child);\n                if (!(child instanceof SChildElement)) {\n                    if (this.id2parent === undefined) {\n                        this.id2parent = new Map();\n                    }\n                    this.id2parent.set(child.id, element);\n                }\n            }\n        }\n    };\n    SModelIndex.prototype.remove = function (element) {\n        this.id2element.delete(element.id);\n        if (element.children !== undefined && element.children.constructor === Array) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if (!(child instanceof SChildElement)) {\n                    if (this.id2parent === undefined) {\n                        this.id2parent = new Map();\n                    }\n                    this.id2parent.delete(child.id);\n                }\n                this.remove(child);\n            }\n        }\n    };\n    SModelIndex.prototype.contains = function (element) {\n        return this.id2element.has(element.id);\n    };\n    SModelIndex.prototype.getById = function (id) {\n        return this.id2element.get(id);\n    };\n    /**\n     * This utility method is for SModelElementSchema. For SChildElements, simply\n     * use the `parent` property.\n     */\n    SModelIndex.prototype.getParent = function (id) {\n        if (this.id2parent !== undefined) {\n            return this.id2parent.get(id);\n        }\n        var element = this.getById(id);\n        if (element instanceof SChildElement) {\n            return element.parent;\n        }\n        return undefined;\n    };\n    /**\n     * This utility method is for SModelElementSchema. For SModelElements, simply\n     * use the `root` property.\n     */\n    SModelIndex.prototype.getRoot = function (element) {\n        if (this.id2parent !== undefined) {\n            var current = element;\n            while (current) {\n                var parent_1 = this.id2parent.get(current.id);\n                if (parent_1 === undefined) {\n                    return current;\n                }\n                current = parent_1;\n            }\n        }\n        if (element instanceof SChildElement) {\n            return element.root;\n        }\n        throw new Error(\"Element has no root\");\n    };\n    SModelIndex.prototype.getAttachedElements = function (element) {\n        return [];\n    };\n    SModelIndex.prototype.all = function () {\n        return iterable_1.mapIterable(this.id2element, function (_a) {\n            var key = _a[0], value = _a[1];\n            return value;\n        });\n    };\n    return SModelIndex;\n}());\nexports.SModelIndex = SModelIndex;\n//# sourceMappingURL=smodel.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar tool_1 = require(\"./tool\");\nvar key_tool_1 = require(\"../views/key-tool\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar ToolManager = /** @class */ (function () {\n    function ToolManager() {\n        this.tools = [];\n        this.defaultTools = [];\n        this.actives = [];\n    }\n    Object.defineProperty(ToolManager.prototype, \"managedTools\", {\n        get: function () {\n            return this.defaultTools.concat(this.tools);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ToolManager.prototype, \"activeTools\", {\n        get: function () {\n            return this.actives;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ToolManager.prototype.disableActiveTools = function () {\n        this.actives.forEach(function (tool) { return tool.disable(); });\n        this.actives.splice(0, this.actives.length);\n    };\n    ToolManager.prototype.enableDefaultTools = function () {\n        this.enable(this.defaultTools.map(function (tool) { return tool.id; }));\n    };\n    ToolManager.prototype.enable = function (toolIds) {\n        var _this = this;\n        this.disableActiveTools();\n        var tools = toolIds.map(function (id) { return _this.tool(id); });\n        tools.forEach(function (tool) {\n            if (tool !== undefined) {\n                tool.enable();\n                _this.actives.push(tool);\n            }\n        });\n    };\n    ToolManager.prototype.tool = function (toolId) {\n        return this.managedTools.find(function (tool) { return tool.id === toolId; });\n    };\n    ToolManager.prototype.registerDefaultTools = function () {\n        var tools = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tools[_i] = arguments[_i];\n        }\n        for (var _a = 0, tools_1 = tools; _a < tools_1.length; _a++) {\n            var tool = tools_1[_a];\n            this.defaultTools.push(tool);\n        }\n    };\n    ToolManager.prototype.registerTools = function () {\n        var tools = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tools[_i] = arguments[_i];\n        }\n        for (var _a = 0, tools_2 = tools; _a < tools_2.length; _a++) {\n            var tool = tools_2[_a];\n            this.tools.push(tool);\n        }\n    };\n    ToolManager = __decorate([\n        inversify_1.injectable()\n    ], ToolManager);\n    return ToolManager;\n}());\nexports.ToolManager = ToolManager;\nvar ToolManagerActionHandler = /** @class */ (function () {\n    function ToolManagerActionHandler() {\n    }\n    ToolManagerActionHandler.prototype.handle = function (action) {\n        switch (action.kind) {\n            case tool_1.EnableDefaultToolsAction.KIND:\n                this.toolManager.enableDefaultTools();\n                break;\n            case tool_1.EnableToolsAction.KIND:\n                this.toolManager.enable(action.toolIds);\n                break;\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IToolManager),\n        __metadata(\"design:type\", Object)\n    ], ToolManagerActionHandler.prototype, \"toolManager\", void 0);\n    ToolManagerActionHandler = __decorate([\n        inversify_1.injectable()\n    ], ToolManagerActionHandler);\n    return ToolManagerActionHandler;\n}());\nexports.ToolManagerActionHandler = ToolManagerActionHandler;\nvar DefaultToolsEnablingKeyListener = /** @class */ (function (_super) {\n    __extends(DefaultToolsEnablingKeyListener, _super);\n    function DefaultToolsEnablingKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DefaultToolsEnablingKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            return [new tool_1.EnableDefaultToolsAction()];\n        }\n        return [];\n    };\n    DefaultToolsEnablingKeyListener = __decorate([\n        inversify_1.injectable()\n    ], DefaultToolsEnablingKeyListener);\n    return DefaultToolsEnablingKeyListener;\n}(key_tool_1.KeyListener));\nexports.DefaultToolsEnablingKeyListener = DefaultToolsEnablingKeyListener;\n//# sourceMappingURL=tool-manager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Action to enable the tools of the specified `toolIds`.\n */\nvar EnableToolsAction = /** @class */ (function () {\n    function EnableToolsAction(toolIds) {\n        this.toolIds = toolIds;\n        this.kind = EnableToolsAction.KIND;\n    }\n    EnableToolsAction.KIND = \"enable-tools\";\n    return EnableToolsAction;\n}());\nexports.EnableToolsAction = EnableToolsAction;\n/**\n * Action to disable the currently active tools and enable the default tools instead.\n */\nvar EnableDefaultToolsAction = /** @class */ (function () {\n    function EnableDefaultToolsAction() {\n        this.kind = EnableDefaultToolsAction.KIND;\n    }\n    EnableDefaultToolsAction.KIND = \"enable-default-tools\";\n    return EnableDefaultToolsAction;\n}());\nexports.EnableDefaultToolsAction = EnableDefaultToolsAction;\n//# sourceMappingURL=tool.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable @typescript-eslint/naming-convention */\nexports.TYPES = {\n    Action: Symbol('Action'),\n    IActionDispatcher: Symbol('IActionDispatcher'),\n    IActionDispatcherProvider: Symbol('IActionDispatcherProvider'),\n    IActionHandlerInitializer: Symbol('IActionHandlerInitializer'),\n    ActionHandlerRegistration: Symbol('ActionHandlerRegistration'),\n    ActionHandlerRegistryProvider: Symbol('ActionHandlerRegistryProvider'),\n    IAnchorComputer: Symbol('IAnchor'),\n    AnimationFrameSyncer: Symbol('AnimationFrameSyncer'),\n    IButtonHandler: Symbol('IButtonHandler'),\n    ICommandPaletteActionProvider: Symbol('ICommandPaletteActionProvider'),\n    ICommandPaletteActionProviderRegistry: Symbol('ICommandPaletteActionProviderRegistry'),\n    CommandRegistration: Symbol('CommandRegistration'),\n    ICommandStack: Symbol('ICommandStack'),\n    CommandStackOptions: Symbol('CommandStackOptions'),\n    ICommandStackProvider: Symbol('ICommandStackProvider'),\n    IContextMenuItemProvider: Symbol.for(\"IContextMenuProvider\"),\n    IContextMenuProviderRegistry: Symbol.for(\"IContextMenuProviderRegistry\"),\n    IContextMenuService: Symbol.for(\"IContextMenuService\"),\n    IContextMenuServiceProvider: Symbol.for(\"IContextMenuServiceProvider\"),\n    DOMHelper: Symbol('DOMHelper'),\n    IDiagramLocker: Symbol('IDiagramLocker'),\n    IEdgeRouter: Symbol('IEdgeRouter'),\n    IEdgeRoutePostprocessor: Symbol('IEdgeRoutePostprocessor'),\n    IEditLabelValidationDecorator: Symbol('IEditLabelValidationDecorator'),\n    IEditLabelValidator: Symbol('IEditLabelValidator'),\n    HiddenModelViewer: Symbol('HiddenModelViewer'),\n    HiddenVNodePostprocessor: Symbol('HiddenVNodeDecorator'),\n    HoverState: Symbol('HoverState'),\n    KeyListener: Symbol('KeyListener'),\n    LayoutRegistration: Symbol('LayoutRegistration'),\n    LayoutRegistry: Symbol('LayoutRegistry'),\n    Layouter: Symbol('Layouter'),\n    LogLevel: Symbol('LogLevel'),\n    ILogger: Symbol('ILogger'),\n    IModelFactory: Symbol('IModelFactory'),\n    IModelLayoutEngine: Symbol('IModelLayoutEngine'),\n    ModelRendererFactory: Symbol('ModelRendererFactory'),\n    ModelSource: Symbol('ModelSource'),\n    ModelSourceProvider: Symbol('ModelSourceProvider'),\n    ModelViewer: Symbol('ModelViewer'),\n    MouseListener: Symbol('MouseListener'),\n    PatcherProvider: Symbol('PatcherProvider'),\n    IPopupModelProvider: Symbol('IPopupModelProvider'),\n    PopupModelViewer: Symbol('PopupModelViewer'),\n    PopupMouseListener: Symbol('PopupMouseListener'),\n    PopupVNodePostprocessor: Symbol('PopupVNodeDecorator'),\n    SModelElementRegistration: Symbol('SModelElementRegistration'),\n    SModelRegistry: Symbol('SModelRegistry'),\n    ISnapper: Symbol('ISnapper'),\n    SvgExporter: Symbol('SvgExporter'),\n    IToolManager: Symbol('IToolManager'),\n    IUIExtension: Symbol('IUIExtension'),\n    UIExtensionRegistry: Symbol('UIExtensionRegistry'),\n    IVNodePostprocessor: Symbol('IVNodePostprocessor'),\n    ViewRegistration: Symbol('ViewRegistration'),\n    ViewRegistry: Symbol('ViewRegistry'),\n    IViewer: Symbol('IViewer'),\n    ViewerOptions: Symbol('ViewerOptions'),\n    IViewerProvider: Symbol('IViewerProvider'),\n};\n/* eslint-enable */\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar registry_1 = require(\"../../utils/registry\");\nvar command_1 = require(\"../commands/command\");\nvar types_1 = require(\"../types\");\n/**\n * The registry maintaining UI extensions registered via `TYPES.IUIExtension`.\n */\nvar UIExtensionRegistry = /** @class */ (function (_super) {\n    __extends(UIExtensionRegistry, _super);\n    function UIExtensionRegistry(extensions) {\n        if (extensions === void 0) { extensions = []; }\n        var _this = _super.call(this) || this;\n        extensions.forEach(function (extension) { return _this.register(extension.id(), extension); });\n        return _this;\n    }\n    UIExtensionRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IUIExtension)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], UIExtensionRegistry);\n    return UIExtensionRegistry;\n}(registry_1.InstanceRegistry));\nexports.UIExtensionRegistry = UIExtensionRegistry;\n/**\n * Action to set the visibility state of the UI extension with the specified `id`.\n */\nvar SetUIExtensionVisibilityAction = /** @class */ (function () {\n    function SetUIExtensionVisibilityAction(extensionId, visible, contextElementsId) {\n        if (contextElementsId === void 0) { contextElementsId = []; }\n        this.extensionId = extensionId;\n        this.visible = visible;\n        this.contextElementsId = contextElementsId;\n        this.kind = SetUIExtensionVisibilityAction.KIND;\n    }\n    SetUIExtensionVisibilityAction.KIND = \"setUIExtensionVisibility\";\n    return SetUIExtensionVisibilityAction;\n}());\nexports.SetUIExtensionVisibilityAction = SetUIExtensionVisibilityAction;\nvar SetUIExtensionVisibilityCommand = /** @class */ (function (_super) {\n    __extends(SetUIExtensionVisibilityCommand, _super);\n    function SetUIExtensionVisibilityCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetUIExtensionVisibilityCommand.prototype.execute = function (context) {\n        var extension = this.registry.get(this.action.extensionId);\n        if (extension) {\n            this.action.visible ? extension.show.apply(extension, __spreadArrays([context.root], this.action.contextElementsId)) : extension.hide();\n        }\n        return { model: context.root, modelChanged: false };\n    };\n    SetUIExtensionVisibilityCommand.prototype.undo = function (context) {\n        return { model: context.root, modelChanged: false };\n    };\n    SetUIExtensionVisibilityCommand.prototype.redo = function (context) {\n        return { model: context.root, modelChanged: false };\n    };\n    SetUIExtensionVisibilityCommand.KIND = SetUIExtensionVisibilityAction.KIND;\n    __decorate([\n        inversify_1.inject(types_1.TYPES.UIExtensionRegistry),\n        __metadata(\"design:type\", UIExtensionRegistry)\n    ], SetUIExtensionVisibilityCommand.prototype, \"registry\", void 0);\n    SetUIExtensionVisibilityCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetUIExtensionVisibilityAction])\n    ], SetUIExtensionVisibilityCommand);\n    return SetUIExtensionVisibilityCommand;\n}(command_1.SystemCommand));\nexports.SetUIExtensionVisibilityCommand = SetUIExtensionVisibilityCommand;\n//# sourceMappingURL=ui-extension-registry.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\n/**\n * Abstract base class for UI extensions.\n */\nvar AbstractUIExtension = /** @class */ (function () {\n    function AbstractUIExtension() {\n    }\n    AbstractUIExtension.prototype.show = function (root) {\n        var contextElementIds = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            contextElementIds[_i - 1] = arguments[_i];\n        }\n        this.activeElement = document.activeElement;\n        if (!this.containerElement) {\n            if (!this.initialize())\n                return;\n        }\n        this.onBeforeShow.apply(this, __spreadArrays([this.containerElement, root], contextElementIds));\n        this.setContainerVisible(true);\n    };\n    AbstractUIExtension.prototype.hide = function () {\n        this.setContainerVisible(false);\n        this.restoreFocus();\n        this.activeElement = null;\n    };\n    AbstractUIExtension.prototype.restoreFocus = function () {\n        var focusedElement = this.activeElement;\n        if (focusedElement) {\n            focusedElement.focus();\n        }\n    };\n    AbstractUIExtension.prototype.initialize = function () {\n        var baseDiv = document.getElementById(this.options.baseDiv);\n        if (!baseDiv) {\n            this.logger.warn(this, \"Could not obtain sprotty base container for initializing UI extension \" + this.id, this);\n            return false;\n        }\n        this.containerElement = this.getOrCreateContainer(baseDiv.id);\n        this.initializeContents(this.containerElement);\n        if (baseDiv) {\n            baseDiv.insertBefore(this.containerElement, baseDiv.firstChild);\n        }\n        return true;\n    };\n    AbstractUIExtension.prototype.getOrCreateContainer = function (baseDivId) {\n        var container = document.getElementById(this.id());\n        if (container === null) {\n            container = document.createElement('div');\n            container.id = baseDivId + \"_\" + this.id();\n            container.classList.add(this.containerClass());\n        }\n        return container;\n    };\n    AbstractUIExtension.prototype.setContainerVisible = function (visible) {\n        if (this.containerElement) {\n            if (visible) {\n                this.containerElement.style.visibility = 'visible';\n                this.containerElement.style.opacity = '1';\n            }\n            else {\n                this.containerElement.style.visibility = 'hidden';\n                this.containerElement.style.opacity = '0';\n            }\n        }\n    };\n    /**\n     * Updates the `containerElement` under the given `context` before it becomes visible.\n     *\n     * Subclasses may override this method to, for instance, modifying the position of the\n     * `containerElement`, add or remove elements, etc. depending on the specified `root`\n     * or `contextElementIds`.\n     */\n    AbstractUIExtension.prototype.onBeforeShow = function (containerElement, root) {\n        var contextElementIds = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            contextElementIds[_i - 2] = arguments[_i];\n        }\n        // default: do nothing\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], AbstractUIExtension.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], AbstractUIExtension.prototype, \"logger\", void 0);\n    AbstractUIExtension = __decorate([\n        inversify_1.injectable()\n    ], AbstractUIExtension);\n    return AbstractUIExtension;\n}());\nexports.AbstractUIExtension = AbstractUIExtension;\n//# sourceMappingURL=ui-extension.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar inversify_1 = require(\"inversify\");\nvar smodel_utils_1 = require(\"../model/smodel-utils\");\nvar CssClassPostprocessor = /** @class */ (function () {\n    function CssClassPostprocessor() {\n    }\n    CssClassPostprocessor.prototype.decorate = function (vnode, element) {\n        if (element.cssClasses) {\n            for (var _i = 0, _a = element.cssClasses; _i < _a.length; _i++) {\n                var cssClass = _a[_i];\n                vnode_utils_1.setClass(vnode, cssClass, true);\n            }\n        }\n        // append model subtype as class\n        var subType = smodel_utils_1.getSubType(element);\n        if (subType && subType !== element.type) {\n            vnode_utils_1.setClass(vnode, subType, true);\n        }\n        return vnode;\n    };\n    CssClassPostprocessor.prototype.postUpdate = function () {\n        // empty\n    };\n    CssClassPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], CssClassPostprocessor);\n    return CssClassPostprocessor;\n}());\nexports.CssClassPostprocessor = CssClassPostprocessor;\n//# sourceMappingURL=css-class-postprocessor.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar DOMHelper = /** @class */ (function () {\n    function DOMHelper() {\n    }\n    DOMHelper.prototype.getPrefix = function () {\n        var prefix = this.viewerOptions !== undefined && this.viewerOptions.baseDiv !== undefined ?\n            this.viewerOptions.baseDiv + \"_\" : \"\";\n        return prefix;\n    };\n    DOMHelper.prototype.createUniqueDOMElementId = function (element) {\n        return this.getPrefix() + element.id;\n    };\n    DOMHelper.prototype.findSModelIdByDOMElement = function (element) {\n        return element.id.replace(this.getPrefix(), '');\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], DOMHelper.prototype, \"viewerOptions\", void 0);\n    DOMHelper = __decorate([\n        inversify_1.injectable()\n    ], DOMHelper);\n    return DOMHelper;\n}());\nexports.DOMHelper = DOMHelper;\n//# sourceMappingURL=dom-helper.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar dom_helper_1 = require(\"./dom-helper\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar IdPostprocessor = /** @class */ (function () {\n    function IdPostprocessor() {\n    }\n    IdPostprocessor.prototype.decorate = function (vnode, element) {\n        var attrs = vnode_utils_1.getAttrs(vnode);\n        if (attrs.id !== undefined)\n            this.logger.warn(vnode, 'Overriding id of vnode (' + attrs.id + '). Make sure not to set it manually in view.');\n        attrs.id = this.domHelper.createUniqueDOMElementId(element);\n        if (!vnode.key)\n            vnode.key = element.id;\n        return vnode;\n    };\n    IdPostprocessor.prototype.postUpdate = function () {\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], IdPostprocessor.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.DOMHelper),\n        __metadata(\"design:type\", dom_helper_1.DOMHelper)\n    ], IdPostprocessor.prototype, \"domHelper\", void 0);\n    IdPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], IdPostprocessor);\n    return IdPostprocessor;\n}());\nexports.IdPostprocessor = IdPostprocessor;\n//# sourceMappingURL=id-postprocessor.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_1 = require(\"../model/smodel\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar KeyTool = /** @class */ (function () {\n    function KeyTool(keyListeners) {\n        if (keyListeners === void 0) { keyListeners = []; }\n        this.keyListeners = keyListeners;\n    }\n    KeyTool.prototype.register = function (keyListener) {\n        this.keyListeners.push(keyListener);\n    };\n    KeyTool.prototype.deregister = function (keyListener) {\n        var index = this.keyListeners.indexOf(keyListener);\n        if (index >= 0)\n            this.keyListeners.splice(index, 1);\n    };\n    KeyTool.prototype.handleEvent = function (methodName, model, event) {\n        var actions = this.keyListeners\n            .map(function (listener) { return listener[methodName].apply(listener, [model, event]); })\n            .reduce(function (a, b) { return a.concat(b); });\n        if (actions.length > 0) {\n            event.preventDefault();\n            this.actionDispatcher.dispatchAll(actions);\n        }\n    };\n    KeyTool.prototype.keyDown = function (element, event) {\n        this.handleEvent('keyDown', element, event);\n    };\n    KeyTool.prototype.keyUp = function (element, event) {\n        this.handleEvent('keyUp', element, event);\n    };\n    KeyTool.prototype.focus = function () { };\n    KeyTool.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot) {\n            vnode_utils_1.on(vnode, 'focus', this.focus.bind(this, element));\n            vnode_utils_1.on(vnode, 'keydown', this.keyDown.bind(this, element));\n            vnode_utils_1.on(vnode, 'keyup', this.keyUp.bind(this, element));\n        }\n        return vnode;\n    };\n    KeyTool.prototype.postUpdate = function () {\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], KeyTool.prototype, \"actionDispatcher\", void 0);\n    KeyTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.KeyListener)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], KeyTool);\n    return KeyTool;\n}());\nexports.KeyTool = KeyTool;\nvar KeyListener = /** @class */ (function () {\n    function KeyListener() {\n    }\n    KeyListener.prototype.keyDown = function (element, event) {\n        return [];\n    };\n    KeyListener.prototype.keyUp = function (element, event) {\n        return [];\n    };\n    KeyListener = __decorate([\n        inversify_1.injectable()\n    ], KeyListener);\n    return KeyListener;\n}());\nexports.KeyListener = KeyListener;\n//# sourceMappingURL=key-tool.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../actions/action\");\nvar smodel_1 = require(\"../model/smodel\");\nvar types_1 = require(\"../types\");\nvar dom_helper_1 = require(\"./dom-helper\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar MouseTool = /** @class */ (function () {\n    function MouseTool(mouseListeners) {\n        if (mouseListeners === void 0) { mouseListeners = []; }\n        this.mouseListeners = mouseListeners;\n    }\n    MouseTool.prototype.register = function (mouseListener) {\n        this.mouseListeners.push(mouseListener);\n    };\n    MouseTool.prototype.deregister = function (mouseListener) {\n        var index = this.mouseListeners.indexOf(mouseListener);\n        if (index >= 0)\n            this.mouseListeners.splice(index, 1);\n    };\n    MouseTool.prototype.getTargetElement = function (model, event) {\n        var target = event.target;\n        var index = model.index;\n        while (target) {\n            if (target.id) {\n                var element = index.getById(this.domHelper.findSModelIdByDOMElement(target));\n                if (element !== undefined)\n                    return element;\n            }\n            target = target.parentNode;\n        }\n        return undefined;\n    };\n    MouseTool.prototype.handleEvent = function (methodName, model, event) {\n        var _this = this;\n        this.focusOnMouseEvent(methodName, model);\n        var element = this.getTargetElement(model, event);\n        if (!element)\n            return;\n        var actions = this.mouseListeners\n            .map(function (listener) { return listener[methodName](element, event); })\n            .reduce(function (a, b) { return a.concat(b); });\n        if (actions.length > 0) {\n            event.preventDefault();\n            for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n                var actionOrPromise = actions_1[_i];\n                if (action_1.isAction(actionOrPromise)) {\n                    this.actionDispatcher.dispatch(actionOrPromise);\n                }\n                else {\n                    actionOrPromise.then(function (action) {\n                        _this.actionDispatcher.dispatch(action);\n                    });\n                }\n            }\n        }\n    };\n    MouseTool.prototype.focusOnMouseEvent = function (methodName, model) {\n        if (document) {\n            var domElement = document.getElementById(this.domHelper.createUniqueDOMElementId(model));\n            if (methodName === 'mouseDown' && domElement !== null && typeof domElement.focus === 'function')\n                domElement.focus();\n        }\n    };\n    MouseTool.prototype.mouseOver = function (model, event) {\n        this.handleEvent('mouseOver', model, event);\n    };\n    MouseTool.prototype.mouseOut = function (model, event) {\n        this.handleEvent('mouseOut', model, event);\n    };\n    MouseTool.prototype.mouseEnter = function (model, event) {\n        this.handleEvent('mouseEnter', model, event);\n    };\n    MouseTool.prototype.mouseLeave = function (model, event) {\n        this.handleEvent('mouseLeave', model, event);\n    };\n    MouseTool.prototype.mouseDown = function (model, event) {\n        this.handleEvent('mouseDown', model, event);\n    };\n    MouseTool.prototype.mouseMove = function (model, event) {\n        this.handleEvent('mouseMove', model, event);\n    };\n    MouseTool.prototype.mouseUp = function (model, event) {\n        this.handleEvent('mouseUp', model, event);\n    };\n    MouseTool.prototype.wheel = function (model, event) {\n        this.handleEvent('wheel', model, event);\n    };\n    MouseTool.prototype.doubleClick = function (model, event) {\n        this.handleEvent('doubleClick', model, event);\n    };\n    MouseTool.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot) {\n            vnode_utils_1.on(vnode, 'mouseover', this.mouseOver.bind(this, element));\n            vnode_utils_1.on(vnode, 'mouseout', this.mouseOut.bind(this, element));\n            vnode_utils_1.on(vnode, 'mouseenter', this.mouseEnter.bind(this, element));\n            vnode_utils_1.on(vnode, 'mouseleave', this.mouseLeave.bind(this, element));\n            vnode_utils_1.on(vnode, 'mousedown', this.mouseDown.bind(this, element));\n            vnode_utils_1.on(vnode, 'mouseup', this.mouseUp.bind(this, element));\n            vnode_utils_1.on(vnode, 'mousemove', this.mouseMove.bind(this, element));\n            vnode_utils_1.on(vnode, 'wheel', this.wheel.bind(this, element));\n            vnode_utils_1.on(vnode, 'contextmenu', function (event) {\n                event.preventDefault();\n            });\n            vnode_utils_1.on(vnode, 'dblclick', this.doubleClick.bind(this, element));\n        }\n        vnode = this.mouseListeners.reduce(function (n, listener) { return listener.decorate(n, element); }, vnode);\n        return vnode;\n    };\n    MouseTool.prototype.postUpdate = function () {\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], MouseTool.prototype, \"actionDispatcher\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.DOMHelper),\n        __metadata(\"design:type\", dom_helper_1.DOMHelper)\n    ], MouseTool.prototype, \"domHelper\", void 0);\n    MouseTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.MouseListener)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], MouseTool);\n    return MouseTool;\n}());\nexports.MouseTool = MouseTool;\nvar PopupMouseTool = /** @class */ (function (_super) {\n    __extends(PopupMouseTool, _super);\n    function PopupMouseTool(mouseListeners) {\n        if (mouseListeners === void 0) { mouseListeners = []; }\n        var _this = _super.call(this, mouseListeners) || this;\n        _this.mouseListeners = mouseListeners;\n        return _this;\n    }\n    PopupMouseTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.PopupMouseListener)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], PopupMouseTool);\n    return PopupMouseTool;\n}(MouseTool));\nexports.PopupMouseTool = PopupMouseTool;\nvar MouseListener = /** @class */ (function () {\n    function MouseListener() {\n    }\n    MouseListener.prototype.mouseOver = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseOut = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseEnter = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseLeave = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseDown = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseMove = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseUp = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.wheel = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.doubleClick = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    MouseListener = __decorate([\n        inversify_1.injectable()\n    ], MouseListener);\n    return MouseListener;\n}());\nexports.MouseListener = MouseListener;\nvar MousePositionTracker = /** @class */ (function (_super) {\n    __extends(MousePositionTracker, _super);\n    function MousePositionTracker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MousePositionTracker.prototype.mouseMove = function (target, event) {\n        this.lastPosition = target.root.parentToLocal({ x: event.offsetX, y: event.offsetY });\n        return [];\n    };\n    Object.defineProperty(MousePositionTracker.prototype, \"lastPositionOnDiagram\", {\n        /**\n         * Returns the last tracked mouse cursor position relative to the diagram root or `undefined`\n         * if no mouse cursor position was ever tracked yet.\n         */\n        get: function () {\n            return this.lastPosition;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MousePositionTracker = __decorate([\n        inversify_1.injectable()\n    ], MousePositionTracker);\n    return MousePositionTracker;\n}(MouseListener));\nexports.MousePositionTracker = MousePositionTracker;\n//# sourceMappingURL=mouse-tool.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom_1 = require(\"snabbdom\");\nvar inversify_1 = require(\"inversify\");\n/**\n * An view that avoids calculation and patching of VNodes unless some model properties have changed.\n * Based on snabbdom's thunks.\n */\nvar ThunkView = /** @class */ (function () {\n    function ThunkView() {\n    }\n    ThunkView.prototype.render = function (model, context) {\n        var _this = this;\n        return snabbdom_1.h(this.selector(model), {\n            key: model.id,\n            hook: {\n                init: this.init.bind(this),\n                prepatch: this.prepatch.bind(this)\n            },\n            fn: function () { return _this.renderAndDecorate(model, context); },\n            args: this.watchedArgs(model),\n            thunk: true\n        });\n    };\n    ThunkView.prototype.renderAndDecorate = function (model, context) {\n        var vnode = this.doRender(model, context);\n        context.decorate(vnode, model);\n        return vnode;\n    };\n    ThunkView.prototype.copyToThunk = function (vnode, thunk) {\n        thunk.elm = vnode.elm;\n        vnode.data.fn = thunk.data.fn;\n        vnode.data.args = thunk.data.args;\n        thunk.data = vnode.data;\n        thunk.children = vnode.children;\n        thunk.text = vnode.text;\n        thunk.elm = vnode.elm;\n    };\n    ThunkView.prototype.init = function (thunk) {\n        var cur = thunk.data;\n        var vnode = cur.fn.apply(undefined, cur.args);\n        this.copyToThunk(vnode, thunk);\n    };\n    ThunkView.prototype.prepatch = function (oldVnode, thunk) {\n        var old = oldVnode.data, cur = thunk.data;\n        if (!this.equals(old.args, cur.args))\n            this.copyToThunk(cur.fn.apply(undefined, cur.args), thunk);\n        else\n            this.copyToThunk(oldVnode, thunk);\n    };\n    ThunkView.prototype.equals = function (oldArg, newArg) {\n        if (Array.isArray(oldArg) && Array.isArray(newArg)) {\n            if (oldArg.length !== newArg.length)\n                return false;\n            for (var i = 0; i < newArg.length; ++i) {\n                if (!this.equals(oldArg[i], newArg[i]))\n                    return false;\n            }\n        }\n        else if (typeof oldArg === 'object' && typeof newArg === 'object') {\n            if (Object.keys(oldArg).length !== Object.keys(newArg).length)\n                return false;\n            for (var key in oldArg) {\n                if (key !== 'parent' && key !== 'root' && (!(key in newArg) || !this.equals(oldArg[key], newArg[key])))\n                    return false;\n            }\n        }\n        else if (oldArg !== newArg) {\n            return false;\n        }\n        return true;\n    };\n    ThunkView = __decorate([\n        inversify_1.injectable()\n    ], ThunkView);\n    return ThunkView;\n}());\nexports.ThunkView = ThunkView;\nfunction isThunk(vnode) {\n    return 'thunk' in vnode;\n}\nexports.isThunk = isThunk;\n//# sourceMappingURL=thunk-view.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"../../lib/jsx\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar inversify_2 = require(\"../../utils/inversify\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar smodel_utils_1 = require(\"../model/smodel-utils\");\n/**\n * Searches for the property specified in `key` in the specified `args`,\n * including its direct or indirect `IRenderingArgs#parentArgs`.\n *\n * @param arg the rendering arguments.\n * @param key the key to search for.\n * @returns the found value or `undefined.\n */\nfunction findArgValue(arg, key) {\n    while (arg !== undefined && !(key in arg) && arg.parentArgs) {\n        arg = arg.parentArgs;\n    }\n    return arg ? arg[key] : undefined;\n}\nexports.findArgValue = findArgValue;\n/**\n * Allows to look up the IView for a given SModelElement based on its type.\n */\nvar ViewRegistry = /** @class */ (function (_super) {\n    __extends(ViewRegistry, _super);\n    function ViewRegistry(registrations) {\n        var _this = _super.call(this) || this;\n        _this.registerDefaults();\n        registrations.forEach(function (registration) {\n            return _this.register(registration.type, registration.factory());\n        });\n        return _this;\n    }\n    ViewRegistry.prototype.registerDefaults = function () {\n        this.register(smodel_factory_1.EMPTY_ROOT.type, new EmptyView());\n    };\n    ViewRegistry.prototype.missing = function (key) {\n        return new MissingView();\n    };\n    ViewRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ViewRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ViewRegistry);\n    return ViewRegistry;\n}(registry_1.InstanceRegistry));\nexports.ViewRegistry = ViewRegistry;\n/**\n * Combines `registerModelElement` and `configureView`.\n */\nfunction configureModelElement(context, type, modelConstr, viewConstr, features) {\n    smodel_utils_1.registerModelElement(context, type, modelConstr, features);\n    configureView(context, type, viewConstr);\n}\nexports.configureModelElement = configureModelElement;\n/**\n * Utility function to register a view for a model element type.\n */\nfunction configureView(context, type, constr) {\n    if (typeof constr === 'function') {\n        if (!inversify_2.isInjectable(constr)) {\n            throw new Error(\"Views should be @injectable: \" + constr.name);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(types_1.TYPES.ViewRegistration).toDynamicValue(function (ctx) { return ({\n        type: type,\n        factory: function () { return ctx.container.get(constr); }\n    }); });\n}\nexports.configureView = configureView;\n/**\n * This view is used when the model is the EMPTY_ROOT.\n */\nvar EmptyView = /** @class */ (function () {\n    function EmptyView() {\n    }\n    EmptyView.prototype.render = function (model, context) {\n        return jsx_1.svg(\"svg\", { \"class-sprotty-empty\": true });\n    };\n    EmptyView = __decorate([\n        inversify_1.injectable()\n    ], EmptyView);\n    return EmptyView;\n}());\nexports.EmptyView = EmptyView;\n/**\n * This view is used when no view has been registered for a model element type.\n */\nvar MissingView = /** @class */ (function () {\n    function MissingView() {\n    }\n    MissingView.prototype.render = function (model, context) {\n        var position = model.position || geometry_1.ORIGIN_POINT;\n        return jsx_1.svg(\"text\", { \"class-sprotty-missing\": true, x: position.x, y: position.y },\n            \"?\",\n            model.id,\n            \"?\");\n    };\n    MissingView = __decorate([\n        inversify_1.injectable()\n    ], MissingView);\n    return MissingView;\n}());\nexports.MissingView = MissingView;\n//# sourceMappingURL=view.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\n/**\n * Updating the view is rather expensive, and it doesn't make sense to calculate\n * more then one update per animation (rendering) frame. So this class batches\n * all incoming model changes and only renders the last one when the next animation\n * frame comes.\n */\nvar ViewerCache = /** @class */ (function () {\n    function ViewerCache() {\n    }\n    ViewerCache.prototype.update = function (model, cause) {\n        if (cause !== undefined) {\n            // Forward the update immediately in order to pass the cause action\n            this.delegate.update(model, cause);\n            this.cachedModel = undefined;\n        }\n        else {\n            var isCacheEmpty = this.cachedModel === undefined;\n            this.cachedModel = model;\n            if (isCacheEmpty) {\n                this.scheduleUpdate();\n            }\n        }\n    };\n    ViewerCache.prototype.scheduleUpdate = function () {\n        var _this = this;\n        this.syncer.onEndOfNextFrame(function () {\n            if (_this.cachedModel) {\n                _this.delegate.update(_this.cachedModel);\n                _this.cachedModel = undefined;\n            }\n        });\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IViewer),\n        __metadata(\"design:type\", Object)\n    ], ViewerCache.prototype, \"delegate\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.AnimationFrameSyncer),\n        __metadata(\"design:type\", animation_frame_syncer_1.AnimationFrameSyncer)\n    ], ViewerCache.prototype, \"syncer\", void 0);\n    ViewerCache = __decorate([\n        inversify_1.injectable()\n    ], ViewerCache);\n    return ViewerCache;\n}());\nexports.ViewerCache = ViewerCache;\n//# sourceMappingURL=viewer-cache.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar object_1 = require(\"../../utils/object\");\nvar types_1 = require(\"../types\");\nexports.defaultViewerOptions = function () { return ({\n    baseDiv: 'sprotty',\n    baseClass: 'sprotty',\n    hiddenDiv: 'sprotty-hidden',\n    hiddenClass: 'sprotty-hidden',\n    popupDiv: 'sprotty-popup',\n    popupClass: 'sprotty-popup',\n    popupClosedClass: 'sprotty-popup-closed',\n    needsClientLayout: true,\n    needsServerLayout: false,\n    popupOpenDelay: 1000,\n    popupCloseDelay: 300\n}); };\n/**\n * Utility function to partially set viewer options. Default values (from `defaultViewerOptions`) are used for\n * options that are not specified.\n */\nfunction configureViewerOptions(context, options) {\n    var opt = __assign(__assign({}, exports.defaultViewerOptions()), options);\n    if (context.isBound(types_1.TYPES.ViewerOptions))\n        context.rebind(types_1.TYPES.ViewerOptions).toConstantValue(opt);\n    else\n        context.bind(types_1.TYPES.ViewerOptions).toConstantValue(opt);\n}\nexports.configureViewerOptions = configureViewerOptions;\n/**\n * Utility function to partially override the currently configured viewer options in a DI container.\n */\nfunction overrideViewerOptions(container, options) {\n    var opt = container.get(types_1.TYPES.ViewerOptions);\n    object_1.safeAssign(opt, options);\n    return opt;\n}\nexports.overrideViewerOptions = overrideViewerOptions;\n//# sourceMappingURL=viewer-options.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx html */\nvar inversify_1 = require(\"inversify\");\nvar snabbdom_1 = require(\"snabbdom\");\nvar jsx_1 = require(\"../../lib/jsx\"); // must be html here, as we're creating a div\nvar browser_1 = require(\"../../utils/browser\");\nvar initialize_canvas_1 = require(\"../features/initialize-canvas\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar types_1 = require(\"../types\");\nvar thunk_view_1 = require(\"./thunk-view\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar ModelRenderer = /** @class */ (function () {\n    function ModelRenderer(viewRegistry, targetKind, postprocessors, args) {\n        if (args === void 0) { args = {}; }\n        this.viewRegistry = viewRegistry;\n        this.targetKind = targetKind;\n        this.postprocessors = postprocessors;\n        this.args = args;\n    }\n    ModelRenderer.prototype.decorate = function (vnode, element) {\n        if (thunk_view_1.isThunk(vnode)) {\n            return vnode;\n        }\n        return this.postprocessors.reduce(function (n, processor) { return processor.decorate(n, element); }, vnode);\n    };\n    ModelRenderer.prototype.renderElement = function (element) {\n        var view = this.viewRegistry.get(element.type);\n        var vnode = view.render(element, this, this.args);\n        if (vnode) {\n            return this.decorate(vnode, element);\n        }\n        else {\n            return undefined;\n        }\n    };\n    ModelRenderer.prototype.renderChildren = function (element, args) {\n        var context = args ?\n            new ModelRenderer(this.viewRegistry, this.targetKind, this.postprocessors, __assign(__assign({}, args), { parentArgs: this.args })) : this;\n        return element.children\n            .map(function (child) { return context.renderElement(child); })\n            .filter(function (vnode) { return vnode !== undefined; });\n    };\n    ModelRenderer.prototype.postUpdate = function (cause) {\n        this.postprocessors.forEach(function (processor) { return processor.postUpdate(cause); });\n    };\n    return ModelRenderer;\n}());\nexports.ModelRenderer = ModelRenderer;\nvar PatcherProvider = /** @class */ (function () {\n    function PatcherProvider() {\n        this.patcher = snabbdom_1.init(this.createModules());\n    }\n    PatcherProvider.prototype.createModules = function () {\n        return [\n            snabbdom_1.propsModule,\n            snabbdom_1.attributesModule,\n            snabbdom_1.classModule,\n            snabbdom_1.styleModule,\n            snabbdom_1.eventListenersModule\n        ];\n    };\n    PatcherProvider = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [])\n    ], PatcherProvider);\n    return PatcherProvider;\n}());\nexports.PatcherProvider = PatcherProvider;\n/**\n * The component that turns the model into an SVG DOM.\n * Uses a VDOM based on snabbdom.js for performance.\n */\nvar ModelViewer = /** @class */ (function () {\n    function ModelViewer(modelRendererFactory, patcherProvider, postprocessors) {\n        this.renderer = modelRendererFactory('main', postprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n    ModelViewer.prototype.update = function (model, cause) {\n        var _this = this;\n        this.logger.log(this, 'rendering', model);\n        var newVDOM = jsx_1.html(\"div\", { id: this.options.baseDiv }, this.renderer.renderElement(model));\n        if (this.lastVDOM !== undefined) {\n            var hadFocus = this.hasFocus();\n            vnode_utils_1.copyClassesFromVNode(this.lastVDOM, newVDOM);\n            this.lastVDOM = this.patcher.call(this, this.lastVDOM, newVDOM);\n            this.restoreFocus(hadFocus);\n        }\n        else if (typeof document !== 'undefined') {\n            var placeholder = document.getElementById(this.options.baseDiv);\n            if (placeholder !== null) {\n                if (typeof window !== 'undefined') {\n                    window.addEventListener('resize', function () {\n                        _this.onWindowResize(newVDOM);\n                    });\n                }\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n                vnode_utils_1.setClass(newVDOM, this.options.baseClass, true);\n                this.lastVDOM = this.patcher.call(this, placeholder, newVDOM);\n            }\n            else {\n                this.logger.error(this, 'element not in DOM:', this.options.baseDiv);\n            }\n        }\n        this.renderer.postUpdate(cause);\n    };\n    ModelViewer.prototype.hasFocus = function () {\n        if (typeof document !== 'undefined' && document.activeElement && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            var lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                var lastElement = lastRootVNode.elm;\n                return document.activeElement === lastElement;\n            }\n        }\n        return false;\n    };\n    ModelViewer.prototype.restoreFocus = function (focus) {\n        if (focus && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            var lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                var lastElement = lastRootVNode.elm;\n                if (lastElement && typeof lastElement.focus === 'function')\n                    lastElement.focus();\n            }\n        }\n    };\n    ModelViewer.prototype.onWindowResize = function (vdom) {\n        var baseDiv = document.getElementById(this.options.baseDiv);\n        if (baseDiv !== null) {\n            var newBounds = this.getBoundsInPage(baseDiv);\n            this.actiondispatcher.dispatch(new initialize_canvas_1.InitializeCanvasBoundsAction(newBounds));\n        }\n    };\n    ModelViewer.prototype.getBoundsInPage = function (element) {\n        var bounds = element.getBoundingClientRect();\n        var scroll = browser_1.getWindowScroll();\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], ModelViewer.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], ModelViewer.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], ModelViewer.prototype, \"actiondispatcher\", void 0);\n    ModelViewer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelRendererFactory)),\n        __param(1, inversify_1.inject(types_1.TYPES.PatcherProvider)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.IVNodePostprocessor)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Function, PatcherProvider, Array])\n    ], ModelViewer);\n    return ModelViewer;\n}());\nexports.ModelViewer = ModelViewer;\n/**\n * Viewer for the _hidden_ model. This serves as an intermediate step to compute bounds\n * of elements. The model is rendered in a section that is not visible to the user,\n * and then the bounds are extracted from the DOM.\n */\nvar HiddenModelViewer = /** @class */ (function () {\n    function HiddenModelViewer(modelRendererFactory, patcherProvider, hiddenPostprocessors) {\n        this.hiddenRenderer = modelRendererFactory('hidden', hiddenPostprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n    HiddenModelViewer.prototype.update = function (hiddenModel, cause) {\n        this.logger.log(this, 'rendering hidden');\n        var newVDOM;\n        if (hiddenModel.type === smodel_factory_1.EMPTY_ROOT.type) {\n            newVDOM = jsx_1.html(\"div\", { id: this.options.hiddenDiv });\n        }\n        else {\n            var hiddenVNode = this.hiddenRenderer.renderElement(hiddenModel);\n            if (hiddenVNode) {\n                vnode_utils_1.setAttr(hiddenVNode, 'opacity', 0);\n            }\n            newVDOM = jsx_1.html(\"div\", { id: this.options.hiddenDiv }, hiddenVNode);\n        }\n        if (this.lastHiddenVDOM !== undefined) {\n            vnode_utils_1.copyClassesFromVNode(this.lastHiddenVDOM, newVDOM);\n            this.lastHiddenVDOM = this.patcher.call(this, this.lastHiddenVDOM, newVDOM);\n        }\n        else {\n            var placeholder = document.getElementById(this.options.hiddenDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement('div');\n                document.body.appendChild(placeholder);\n            }\n            else {\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n            }\n            vnode_utils_1.setClass(newVDOM, this.options.baseClass, true);\n            vnode_utils_1.setClass(newVDOM, this.options.hiddenClass, true);\n            this.lastHiddenVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.hiddenRenderer.postUpdate(cause);\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], HiddenModelViewer.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], HiddenModelViewer.prototype, \"logger\", void 0);\n    HiddenModelViewer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelRendererFactory)),\n        __param(1, inversify_1.inject(types_1.TYPES.PatcherProvider)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.HiddenVNodePostprocessor)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Function, PatcherProvider, Array])\n    ], HiddenModelViewer);\n    return HiddenModelViewer;\n}());\nexports.HiddenModelViewer = HiddenModelViewer;\nvar PopupModelViewer = /** @class */ (function () {\n    function PopupModelViewer(modelRendererFactory, patcherProvider, popupPostprocessors) {\n        this.modelRendererFactory = modelRendererFactory;\n        this.popupRenderer = this.modelRendererFactory('popup', popupPostprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n    PopupModelViewer.prototype.update = function (model, cause) {\n        this.logger.log(this, 'rendering popup', model);\n        var popupClosed = model.type === smodel_factory_1.EMPTY_ROOT.type;\n        var newVDOM;\n        if (popupClosed) {\n            newVDOM = jsx_1.html(\"div\", { id: this.options.popupDiv });\n        }\n        else {\n            var position = model.canvasBounds;\n            var inlineStyle = {\n                top: position.y + 'px',\n                left: position.x + 'px'\n            };\n            newVDOM = jsx_1.html(\"div\", { id: this.options.popupDiv, style: inlineStyle }, this.popupRenderer.renderElement(model));\n        }\n        if (this.lastPopupVDOM !== undefined) {\n            vnode_utils_1.copyClassesFromVNode(this.lastPopupVDOM, newVDOM);\n            vnode_utils_1.setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, this.lastPopupVDOM, newVDOM);\n        }\n        else if (typeof document !== 'undefined') {\n            var placeholder = document.getElementById(this.options.popupDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement('div');\n                document.body.appendChild(placeholder);\n            }\n            else {\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n            }\n            vnode_utils_1.setClass(newVDOM, this.options.popupClass, true);\n            vnode_utils_1.setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.popupRenderer.postUpdate(cause);\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], PopupModelViewer.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], PopupModelViewer.prototype, \"logger\", void 0);\n    PopupModelViewer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelRendererFactory)),\n        __param(1, inversify_1.inject(types_1.TYPES.PatcherProvider)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.PopupVNodePostprocessor)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Function, PatcherProvider, Array])\n    ], PopupModelViewer);\n    return PopupModelViewer;\n}());\nexports.PopupModelViewer = PopupModelViewer;\n//# sourceMappingURL=viewer.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar FocusFixPostprocessor = /** @class */ (function () {\n    function FocusFixPostprocessor() {\n    }\n    FocusFixPostprocessor.prototype.decorate = function (vnode, element) {\n        if (vnode.sel && vnode.sel.startsWith('svg'))\n            // allows to set focus in Firefox\n            vnode_utils_1.setAttr(vnode, 'tabindex', 0);\n        return vnode;\n    };\n    FocusFixPostprocessor.prototype.postUpdate = function () {\n    };\n    FocusFixPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], FocusFixPostprocessor);\n    return FocusFixPostprocessor;\n}());\nexports.FocusFixPostprocessor = FocusFixPostprocessor;\n//# sourceMappingURL=vnode-postprocessor.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction setAttr(vnode, name, value) {\n    getAttrs(vnode)[name] = value;\n}\nexports.setAttr = setAttr;\nfunction setClass(vnode, name, value) {\n    getClass(vnode)[name] = value;\n}\nexports.setClass = setClass;\nfunction setNamespace(node, ns) {\n    if (node.data === undefined)\n        node.data = {};\n    node.data.ns = ns;\n    var children = node.children;\n    if (children !== undefined) {\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (typeof child !== 'string')\n                setNamespace(child, ns);\n        }\n    }\n}\nexports.setNamespace = setNamespace;\nfunction copyClassesFromVNode(source, target) {\n    var classList = getClass(source);\n    Object.keys(classList).forEach(function (c) { return setClass(target, c, true); });\n}\nexports.copyClassesFromVNode = copyClassesFromVNode;\nfunction copyClassesFromElement(element, target) {\n    var classList = element.classList;\n    for (var i = 0; i < classList.length; i++) {\n        var item = classList.item(i);\n        if (item)\n            setClass(target, item, true);\n    }\n}\nexports.copyClassesFromElement = copyClassesFromElement;\nfunction mergeStyle(vnode, style) {\n    getData(vnode).style = __assign(__assign({}, (getData(vnode).style || {})), style);\n}\nexports.mergeStyle = mergeStyle;\nfunction on(vnode, event, listener) {\n    var val = getOn(vnode);\n    if (val[event]) {\n        throw new Error('EventListener for ' + event + ' already registered on VNode');\n    }\n    val[event] = listener;\n}\nexports.on = on;\nfunction getAttrs(vnode) {\n    var data = getData(vnode);\n    if (!data.attrs)\n        data.attrs = {};\n    return data.attrs;\n}\nexports.getAttrs = getAttrs;\nfunction getData(vnode) {\n    if (!vnode.data)\n        vnode.data = {};\n    return vnode.data;\n}\nfunction getClass(vnode) {\n    var data = getData(vnode);\n    if (!data.class)\n        data.class = {};\n    return data.class;\n}\nfunction getOn(vnode) {\n    var data = getData(vnode);\n    if (!data.on)\n        data.on = {};\n    return data.on;\n}\n//# sourceMappingURL=vnode-utils.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\nvar AbstractLayout = /** @class */ (function () {\n    function AbstractLayout() {\n    }\n    AbstractLayout.prototype.layout = function (container, layouter) {\n        var boundsData = layouter.getBoundsData(container);\n        var options = this.getLayoutOptions(container);\n        var childrenSize = this.getChildrenSize(container, options, layouter);\n        var maxWidth = options.paddingFactor * (options.resizeContainer\n            ? childrenSize.width\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).width) - options.paddingLeft - options.paddingRight);\n        var maxHeight = options.paddingFactor * (options.resizeContainer\n            ? childrenSize.height\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).height) - options.paddingTop - options.paddingBottom);\n        if (maxWidth > 0 && maxHeight > 0) {\n            var offset = this.layoutChildren(container, layouter, options, maxWidth, maxHeight);\n            boundsData.bounds = this.getFinalContainerBounds(container, offset, options, maxWidth, maxHeight);\n            boundsData.boundsChanged = true;\n        }\n    };\n    AbstractLayout.prototype.getFinalContainerBounds = function (container, lastOffset, options, maxWidth, maxHeight) {\n        return {\n            x: container.bounds.x,\n            y: container.bounds.y,\n            width: Math.max(options.minWidth, maxWidth + options.paddingLeft + options.paddingRight),\n            height: Math.max(options.minHeight, maxHeight + options.paddingTop + options.paddingBottom)\n        };\n    };\n    AbstractLayout.prototype.getFixedContainerBounds = function (container, layoutOptions, layouter) {\n        var currentContainer = container;\n        while (true) {\n            if (model_1.isBoundsAware(currentContainer)) {\n                var bounds = currentContainer.bounds;\n                if (model_1.isLayoutContainer(currentContainer) && layoutOptions.resizeContainer)\n                    layouter.log.error(currentContainer, 'Resizable container found while detecting fixed bounds');\n                if (geometry_1.isValidDimension(bounds))\n                    return bounds;\n            }\n            if (currentContainer instanceof smodel_1.SChildElement) {\n                currentContainer = currentContainer.parent;\n            }\n            else {\n                layouter.log.error(currentContainer, 'Cannot detect fixed bounds');\n                return geometry_1.EMPTY_BOUNDS;\n            }\n        }\n    };\n    AbstractLayout.prototype.layoutChildren = function (container, layouter, containerOptions, maxWidth, maxHeight) {\n        var _this = this;\n        var currentOffset = {\n            x: containerOptions.paddingLeft + 0.5 * (maxWidth - (maxWidth / containerOptions.paddingFactor)),\n            y: containerOptions.paddingTop + 0.5 * (maxHeight - (maxHeight / containerOptions.paddingFactor))\n        };\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var boundsData = layouter.getBoundsData(child);\n                var bounds = boundsData.bounds;\n                var childOptions = _this.getChildLayoutOptions(child, containerOptions);\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    currentOffset = _this.layoutChild(child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight);\n                }\n            }\n        });\n        return currentOffset;\n    };\n    AbstractLayout.prototype.getDx = function (hAlign, bounds, maxWidth) {\n        switch (hAlign) {\n            case 'left':\n                return 0;\n            case 'center':\n                return 0.5 * (maxWidth - bounds.width);\n            case 'right':\n                return maxWidth - bounds.width;\n        }\n    };\n    AbstractLayout.prototype.getDy = function (vAlign, bounds, maxHeight) {\n        switch (vAlign) {\n            case 'top':\n                return 0;\n            case 'center':\n                return 0.5 * (maxHeight - bounds.height);\n            case 'bottom':\n                return maxHeight - bounds.height;\n        }\n    };\n    AbstractLayout.prototype.getChildLayoutOptions = function (child, containerOptions) {\n        var layoutOptions = child.layoutOptions;\n        if (layoutOptions === undefined)\n            return containerOptions;\n        else\n            return this.spread(containerOptions, layoutOptions);\n    };\n    AbstractLayout.prototype.getLayoutOptions = function (element) {\n        var _this = this;\n        var current = element;\n        var allOptions = [];\n        while (current !== undefined) {\n            var layoutOptions = current.layoutOptions;\n            if (layoutOptions !== undefined)\n                allOptions.push(layoutOptions);\n            if (current instanceof smodel_1.SChildElement)\n                current = current.parent;\n            else\n                break;\n        }\n        return allOptions.reverse().reduce(function (a, b) { return _this.spread(a, b); }, this.getDefaultLayoutOptions());\n    };\n    AbstractLayout = __decorate([\n        inversify_1.injectable()\n    ], AbstractLayout);\n    return AbstractLayout;\n}());\nexports.AbstractLayout = AbstractLayout;\n//# sourceMappingURL=abstract-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar types_1 = require(\"../../base/types\");\nvar model_1 = require(\"./model\");\n/**\n * Sent from the model source (e.g. a DiagramServer) to the client to update the bounds of some\n * (or all) model elements.\n */\nvar SetBoundsAction = /** @class */ (function () {\n    function SetBoundsAction(bounds) {\n        this.bounds = bounds;\n        this.kind = SetBoundsAction.KIND;\n    }\n    SetBoundsAction.KIND = 'setBounds';\n    return SetBoundsAction;\n}());\nexports.SetBoundsAction = SetBoundsAction;\n/**\n * Sent from the model source to the client to request bounds for the given model. The model is\n * rendered invisibly so the bounds can derived from the DOM. The response is a ComputedBoundsAction.\n * This hidden rendering round-trip is necessary if the client is responsible for parts of the layout\n * (see `needsClientLayout` viewer option).\n */\nvar RequestBoundsAction = /** @class */ (function () {\n    function RequestBoundsAction(newRoot, requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.newRoot = newRoot;\n        this.requestId = requestId;\n        this.kind = RequestBoundsAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    RequestBoundsAction.create = function (newRoot) {\n        return new RequestBoundsAction(newRoot, action_1.generateRequestId());\n    };\n    RequestBoundsAction.KIND = 'requestBounds';\n    return RequestBoundsAction;\n}());\nexports.RequestBoundsAction = RequestBoundsAction;\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) to transmit the result of bounds\n * computation as a response to a RequestBoundsAction. If the server is responsible for parts of\n * the layout (see `needsServerLayout` viewer option), it can do so after applying the computed bounds\n * received with this action. Otherwise there is no need to send the computed bounds to the server,\n * so they can be processed locally by the client.\n */\nvar ComputedBoundsAction = /** @class */ (function () {\n    function ComputedBoundsAction(bounds, revision, alignments, responseId) {\n        if (responseId === void 0) { responseId = ''; }\n        this.bounds = bounds;\n        this.revision = revision;\n        this.alignments = alignments;\n        this.responseId = responseId;\n        this.kind = ComputedBoundsAction.KIND;\n    }\n    ComputedBoundsAction.KIND = 'computedBounds';\n    return ComputedBoundsAction;\n}());\nexports.ComputedBoundsAction = ComputedBoundsAction;\n/**\n * Request a layout of the diagram or the selected elements only.\n */\nvar LayoutAction = /** @class */ (function () {\n    function LayoutAction() {\n        this.kind = LayoutAction.KIND;\n    }\n    LayoutAction.KIND = 'layout';\n    return LayoutAction;\n}());\nexports.LayoutAction = LayoutAction;\nvar SetBoundsCommand = /** @class */ (function (_super) {\n    __extends(SetBoundsCommand, _super);\n    function SetBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.bounds = [];\n        return _this;\n    }\n    SetBoundsCommand.prototype.execute = function (context) {\n        var _this = this;\n        this.action.bounds.forEach(function (b) {\n            var element = context.root.index.getById(b.elementId);\n            if (element && model_1.isBoundsAware(element)) {\n                _this.bounds.push({\n                    element: element,\n                    oldBounds: element.bounds,\n                    newPosition: b.newPosition,\n                    newSize: b.newSize\n                });\n            }\n        });\n        return this.redo(context);\n    };\n    SetBoundsCommand.prototype.undo = function (context) {\n        this.bounds.forEach(function (b) { return b.element.bounds = b.oldBounds; });\n        return context.root;\n    };\n    SetBoundsCommand.prototype.redo = function (context) {\n        this.bounds.forEach(function (b) {\n            if (b.newPosition)\n                b.element.bounds = __assign(__assign({}, b.newPosition), b.newSize);\n            else\n                // keep the position\n                b.element.bounds = __assign({ x: b.element.bounds.x, y: b.element.bounds.y }, b.newSize);\n        });\n        return context.root;\n    };\n    SetBoundsCommand.KIND = SetBoundsAction.KIND;\n    SetBoundsCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetBoundsAction])\n    ], SetBoundsCommand);\n    return SetBoundsCommand;\n}(command_1.SystemCommand));\nexports.SetBoundsCommand = SetBoundsCommand;\nvar RequestBoundsCommand = /** @class */ (function (_super) {\n    __extends(RequestBoundsCommand, _super);\n    function RequestBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    RequestBoundsCommand.prototype.execute = function (context) {\n        return {\n            model: context.modelFactory.createRoot(this.action.newRoot),\n            modelChanged: true,\n            cause: this.action\n        };\n    };\n    Object.defineProperty(RequestBoundsCommand.prototype, \"blockUntil\", {\n        get: function () {\n            return function (action) { return action.kind === ComputedBoundsAction.KIND; };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RequestBoundsCommand.KIND = RequestBoundsAction.KIND;\n    RequestBoundsCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [RequestBoundsAction])\n    ], RequestBoundsCommand);\n    return RequestBoundsCommand;\n}(command_1.HiddenCommand));\nexports.RequestBoundsCommand = RequestBoundsCommand;\n//# sourceMappingURL=bounds-manipulation.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar bounds_manipulation_1 = require(\"./bounds-manipulation\");\nvar hidden_bounds_updater_1 = require(\"./hidden-bounds-updater\");\nvar layout_1 = require(\"./layout\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar hbox_layout_1 = require(\"./hbox-layout\");\nvar vbox_layout_1 = require(\"./vbox-layout\");\nvar stack_layout_1 = require(\"./stack-layout\");\nvar boundsModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, bounds_manipulation_1.SetBoundsCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, bounds_manipulation_1.RequestBoundsCommand);\n    bind(hidden_bounds_updater_1.HiddenBoundsUpdater).toSelf().inSingletonScope();\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(hidden_bounds_updater_1.HiddenBoundsUpdater);\n    bind(types_1.TYPES.Layouter).to(layout_1.Layouter).inSingletonScope();\n    bind(types_1.TYPES.LayoutRegistry).to(layout_1.LayoutRegistry).inSingletonScope();\n    layout_1.configureLayout({ bind: bind, isBound: isBound }, vbox_layout_1.VBoxLayouter.KIND, vbox_layout_1.VBoxLayouter);\n    layout_1.configureLayout({ bind: bind, isBound: isBound }, hbox_layout_1.HBoxLayouter.KIND, hbox_layout_1.HBoxLayouter);\n    layout_1.configureLayout({ bind: bind, isBound: isBound }, stack_layout_1.StackLayouter.KIND, stack_layout_1.StackLayouter);\n});\nexports.default = boundsModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\nvar model_1 = require(\"./model\");\n/**\n * Layouts children of a container in horizontal (left->right) direction.\n */\nvar HBoxLayouter = /** @class */ (function (_super) {\n    __extends(HBoxLayouter, _super);\n    function HBoxLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HBoxLayouter.prototype.getChildrenSize = function (container, containerOptions, layouter) {\n        var maxWidth = 0;\n        var maxHeight = -1;\n        var isFirst = true;\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var bounds = layouter.getBoundsData(child).bounds;\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    if (isFirst)\n                        isFirst = false;\n                    else\n                        maxWidth += containerOptions.hGap;\n                    maxWidth += bounds.width;\n                    maxHeight = Math.max(maxHeight, bounds.height);\n                }\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    HBoxLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: currentOffset.x + child.bounds.x - bounds.x,\n            y: containerOptions.paddingTop + child.bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x + bounds.width + containerOptions.hGap,\n            y: currentOffset.y\n        };\n    };\n    HBoxLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hGap: 1,\n            vAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    };\n    HBoxLayouter.prototype.spread = function (a, b) {\n        return __assign(__assign({}, a), b);\n    };\n    HBoxLayouter.KIND = 'hbox';\n    HBoxLayouter = __decorate([\n        inversify_1.injectable()\n    ], HBoxLayouter);\n    return HBoxLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.HBoxLayouter = HBoxLayouter;\n//# sourceMappingURL=hbox-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar types_1 = require(\"../../base/types\");\nvar bounds_manipulation_1 = require(\"./bounds-manipulation\");\nvar layout_1 = require(\"./layout\");\nvar model_1 = require(\"./model\");\nvar BoundsData = /** @class */ (function () {\n    function BoundsData() {\n    }\n    return BoundsData;\n}());\nexports.BoundsData = BoundsData;\n/**\n * Grabs the bounds from hidden SVG DOM elements, applies layouts and fires\n * ComputedBoundsActions.\n *\n * The actual bounds of an element can usually not be determined from the SModel\n * as they depend on the view implementation and CSS stylings. So the best way is\n * to grab them from a live (but hidden) SVG using getBBox().\n *\n * If an element is Alignable, and the top-left corner of its bounding box is not\n * the origin, we also issue a realign with the ComputedBoundsAction.\n */\nvar HiddenBoundsUpdater = /** @class */ (function () {\n    function HiddenBoundsUpdater() {\n        this.element2boundsData = new Map;\n    }\n    HiddenBoundsUpdater.prototype.decorate = function (vnode, element) {\n        if (model_1.isSizeable(element) || model_1.isLayoutContainer(element)) {\n            this.element2boundsData.set(element, {\n                vnode: vnode,\n                bounds: element.bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            });\n        }\n        if (element instanceof smodel_1.SModelRoot)\n            this.root = element;\n        return vnode;\n    };\n    HiddenBoundsUpdater.prototype.postUpdate = function (cause) {\n        if (cause === undefined || cause.kind !== bounds_manipulation_1.RequestBoundsAction.KIND) {\n            return;\n        }\n        var request = cause;\n        this.getBoundsFromDOM();\n        this.layouter.layout(this.element2boundsData);\n        var resizes = [];\n        var realignments = [];\n        this.element2boundsData.forEach(function (boundsData, element) {\n            if (boundsData.boundsChanged && boundsData.bounds !== undefined) {\n                var resize = {\n                    elementId: element.id,\n                    newSize: {\n                        width: boundsData.bounds.width,\n                        height: boundsData.bounds.height\n                    }\n                };\n                // don't copy position if the element is layouted by the server\n                if (element instanceof smodel_1.SChildElement && model_1.isLayoutContainer(element.parent))\n                    resize.newPosition = {\n                        x: boundsData.bounds.x,\n                        y: boundsData.bounds.y,\n                    };\n                resizes.push(resize);\n            }\n            if (boundsData.alignmentChanged && boundsData.alignment !== undefined)\n                realignments.push({\n                    elementId: element.id,\n                    newAlignment: boundsData.alignment\n                });\n        });\n        var revision = (this.root !== undefined) ? this.root.revision : undefined;\n        this.actionDispatcher.dispatch(new bounds_manipulation_1.ComputedBoundsAction(resizes, revision, realignments, request.requestId));\n        this.element2boundsData.clear();\n    };\n    HiddenBoundsUpdater.prototype.getBoundsFromDOM = function () {\n        var _this = this;\n        this.element2boundsData.forEach(function (boundsData, element) {\n            if (boundsData.bounds && model_1.isSizeable(element)) {\n                var vnode = boundsData.vnode;\n                if (vnode && vnode.elm) {\n                    var boundingBox = _this.getBounds(vnode.elm, element);\n                    if (model_1.isAlignable(element) && !(geometry_1.almostEquals(boundingBox.x, 0) && geometry_1.almostEquals(boundingBox.y, 0))) {\n                        boundsData.alignment = {\n                            x: -boundingBox.x,\n                            y: -boundingBox.y\n                        };\n                        boundsData.alignmentChanged = true;\n                    }\n                    var newBounds = {\n                        x: element.bounds.x,\n                        y: element.bounds.y,\n                        width: boundingBox.width,\n                        height: boundingBox.height\n                    };\n                    if (!(geometry_1.almostEquals(newBounds.x, element.bounds.x)\n                        && geometry_1.almostEquals(newBounds.y, element.bounds.y)\n                        && geometry_1.almostEquals(newBounds.width, element.bounds.width)\n                        && geometry_1.almostEquals(newBounds.height, element.bounds.height))) {\n                        boundsData.bounds = newBounds;\n                        boundsData.boundsChanged = true;\n                    }\n                }\n            }\n        });\n    };\n    HiddenBoundsUpdater.prototype.getBounds = function (elm, element) {\n        if (typeof elm.getBBox !== 'function') {\n            this.logger.error(this, 'Not an SVG element:', elm);\n            return geometry_1.EMPTY_BOUNDS;\n        }\n        var bounds = elm.getBBox();\n        return {\n            x: bounds.x,\n            y: bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], HiddenBoundsUpdater.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], HiddenBoundsUpdater.prototype, \"actionDispatcher\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.Layouter),\n        __metadata(\"design:type\", layout_1.Layouter)\n    ], HiddenBoundsUpdater.prototype, \"layouter\", void 0);\n    HiddenBoundsUpdater = __decorate([\n        inversify_1.injectable()\n    ], HiddenBoundsUpdater);\n    return HiddenBoundsUpdater;\n}());\nexports.HiddenBoundsUpdater = HiddenBoundsUpdater;\n//# sourceMappingURL=hidden-bounds-updater.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"./model\");\nvar inversify_2 = require(\"../../utils/inversify\");\nvar LayoutRegistry = /** @class */ (function (_super) {\n    __extends(LayoutRegistry, _super);\n    function LayoutRegistry(layouts) {\n        if (layouts === void 0) { layouts = []; }\n        var _this = _super.call(this) || this;\n        layouts.forEach(function (layout) {\n            if (_this.hasKey(layout.layoutKind)) {\n                _this.logger.warn('Layout kind is already defined: ', layout.layoutKind);\n            }\n            else {\n                _this.register(layout.layoutKind, layout.factory());\n            }\n        });\n        return _this;\n    }\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], LayoutRegistry.prototype, \"logger\", void 0);\n    LayoutRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.LayoutRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], LayoutRegistry);\n    return LayoutRegistry;\n}(registry_1.InstanceRegistry));\nexports.LayoutRegistry = LayoutRegistry;\nvar Layouter = /** @class */ (function () {\n    function Layouter() {\n    }\n    Layouter.prototype.layout = function (element2boundsData) {\n        new StatefulLayouter(element2boundsData, this.layoutRegistry, this.logger).layout();\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.LayoutRegistry),\n        __metadata(\"design:type\", LayoutRegistry)\n    ], Layouter.prototype, \"layoutRegistry\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], Layouter.prototype, \"logger\", void 0);\n    Layouter = __decorate([\n        inversify_1.injectable()\n    ], Layouter);\n    return Layouter;\n}());\nexports.Layouter = Layouter;\nvar StatefulLayouter = /** @class */ (function () {\n    function StatefulLayouter(element2boundsData, layoutRegistry, log) {\n        var _this = this;\n        this.element2boundsData = element2boundsData;\n        this.layoutRegistry = layoutRegistry;\n        this.log = log;\n        this.toBeLayouted = [];\n        element2boundsData.forEach(function (data, element) {\n            if (model_1.isLayoutContainer(element))\n                _this.toBeLayouted.push(element);\n        });\n    }\n    StatefulLayouter.prototype.getBoundsData = function (element) {\n        var boundsData = this.element2boundsData.get(element);\n        var bounds = element.bounds;\n        if (model_1.isLayoutContainer(element) && this.toBeLayouted.indexOf(element) >= 0) {\n            bounds = this.doLayout(element);\n        }\n        if (!boundsData) {\n            boundsData = {\n                bounds: bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            };\n            this.element2boundsData.set(element, boundsData);\n        }\n        return boundsData;\n    };\n    StatefulLayouter.prototype.layout = function () {\n        while (this.toBeLayouted.length > 0) {\n            var element = this.toBeLayouted[0];\n            this.doLayout(element);\n        }\n    };\n    StatefulLayouter.prototype.doLayout = function (element) {\n        var index = this.toBeLayouted.indexOf(element);\n        if (index >= 0)\n            this.toBeLayouted.splice(index, 1);\n        var layout = this.layoutRegistry.get(element.layout);\n        if (layout)\n            layout.layout(element, this);\n        var boundsData = this.element2boundsData.get(element);\n        if (boundsData !== undefined && boundsData.bounds !== undefined) {\n            return boundsData.bounds;\n        }\n        else {\n            this.log.error(element, 'Layout failed');\n            return geometry_1.EMPTY_BOUNDS;\n        }\n    };\n    return StatefulLayouter;\n}());\nexports.StatefulLayouter = StatefulLayouter;\nfunction configureLayout(context, kind, constr) {\n    if (typeof constr === 'function') {\n        if (!inversify_2.isInjectable(constr)) {\n            throw new Error(\"Layouts be @injectable: \" + constr.name);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(types_1.TYPES.LayoutRegistration).toDynamicValue(function (ctx) { return ({\n        layoutKind: kind,\n        factory: function () { return ctx.container.get(constr); }\n    }); });\n}\nexports.configureLayout = configureLayout;\n//# sourceMappingURL=layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar browser_1 = require(\"../../utils/browser\");\nexports.boundsFeature = Symbol('boundsFeature');\nexports.layoutContainerFeature = Symbol('layoutContainerFeature');\nexports.layoutableChildFeature = Symbol('layoutableChildFeature');\nexports.alignFeature = Symbol('alignFeature');\nfunction isBoundsAware(element) {\n    return 'bounds' in element;\n}\nexports.isBoundsAware = isBoundsAware;\nfunction isLayoutContainer(element) {\n    return isBoundsAware(element)\n        && element.hasFeature(exports.layoutContainerFeature)\n        && 'layout' in element;\n}\nexports.isLayoutContainer = isLayoutContainer;\nfunction isLayoutableChild(element) {\n    return isBoundsAware(element)\n        && element.hasFeature(exports.layoutableChildFeature);\n}\nexports.isLayoutableChild = isLayoutableChild;\nfunction isSizeable(element) {\n    return element.hasFeature(exports.boundsFeature) && isBoundsAware(element);\n}\nexports.isSizeable = isSizeable;\nfunction isAlignable(element) {\n    return element.hasFeature(exports.alignFeature)\n        && 'alignment' in element;\n}\nexports.isAlignable = isAlignable;\nfunction getAbsoluteBounds(element) {\n    var boundsAware = smodel_utils_1.findParentByFeature(element, isBoundsAware);\n    if (boundsAware !== undefined) {\n        var bounds = boundsAware.bounds;\n        var current = boundsAware;\n        while (current instanceof smodel_1.SChildElement) {\n            var parent_1 = current.parent;\n            bounds = parent_1.localToParent(bounds);\n            current = parent_1;\n        }\n        return bounds;\n    }\n    else if (element instanceof smodel_1.SModelRoot) {\n        var canvasBounds = element.canvasBounds;\n        return { x: 0, y: 0, width: canvasBounds.width, height: canvasBounds.height };\n    }\n    else {\n        return geometry_1.EMPTY_BOUNDS;\n    }\n}\nexports.getAbsoluteBounds = getAbsoluteBounds;\n/**\n * Returns the \"client-absolute\" bounds of the specified `element`.\n *\n * The client-absolute bounds are relative to the entire browser page.\n *\n * @param element The element to get the bounds for.\n * @param domHelper The dom helper to obtain the SVG element's id.\n * @param viewerOptions The viewer options to obtain sprotty's container div id.\n */\nfunction getAbsoluteClientBounds(element, domHelper, viewerOptions) {\n    var x = 0;\n    var y = 0;\n    var width = 0;\n    var height = 0;\n    var svgElementId = domHelper.createUniqueDOMElementId(element);\n    var svgElement = document.getElementById(svgElementId);\n    if (svgElement) {\n        var rect = svgElement.getBoundingClientRect();\n        var scroll_1 = browser_1.getWindowScroll();\n        x = rect.left + scroll_1.x;\n        y = rect.top + scroll_1.y;\n        width = rect.width;\n        height = rect.height;\n    }\n    var container = document.getElementById(viewerOptions.baseDiv);\n    if (container) {\n        while (container.offsetParent instanceof HTMLElement\n            && (container = container.offsetParent)) {\n            x -= container.offsetLeft;\n            y -= container.offsetTop;\n        }\n    }\n    return { x: x, y: y, width: width, height: height };\n}\nexports.getAbsoluteClientBounds = getAbsoluteClientBounds;\nfunction findChildrenAtPosition(parent, point) {\n    var matches = [];\n    doFindChildrenAtPosition(parent, point, matches);\n    return matches;\n}\nexports.findChildrenAtPosition = findChildrenAtPosition;\nfunction doFindChildrenAtPosition(parent, point, matches) {\n    parent.children.forEach(function (child) {\n        if (isBoundsAware(child) && geometry_1.includes(child.bounds, point))\n            matches.push(child);\n        if (child instanceof smodel_1.SParentElement) {\n            var newPoint = child.parentToLocal(point);\n            doFindChildrenAtPosition(child, newPoint, matches);\n        }\n    });\n}\n/**\n * Abstract class for elements with a position and a size.\n */\nvar SShapeElement = /** @class */ (function (_super) {\n    __extends(SShapeElement, _super);\n    function SShapeElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        return _this;\n    }\n    Object.defineProperty(SShapeElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SShapeElement.prototype.localToParent = function (point) {\n        var result = {\n            x: point.x + this.position.x,\n            y: point.y + this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    };\n    SShapeElement.prototype.parentToLocal = function (point) {\n        var result = {\n            x: point.x - this.position.x,\n            y: point.y - this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    };\n    return SShapeElement;\n}(smodel_1.SChildElement));\nexports.SShapeElement = SShapeElement;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar animation_1 = require(\"../../base/animations/animation\");\nvar ResizeAnimation = /** @class */ (function (_super) {\n    __extends(ResizeAnimation, _super);\n    function ResizeAnimation(model, elementResizes, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementResizes = elementResizes;\n        _this.reverse = reverse;\n        return _this;\n    }\n    ResizeAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.elementResizes.forEach(function (elementResize) {\n            var element = elementResize.element;\n            var newDimension = (_this.reverse) ? {\n                width: (1 - t) * elementResize.toDimension.width + t * elementResize.fromDimension.width,\n                height: (1 - t) * elementResize.toDimension.height + t * elementResize.fromDimension.height\n            } : {\n                width: (1 - t) * elementResize.fromDimension.width + t * elementResize.toDimension.width,\n                height: (1 - t) * elementResize.fromDimension.height + t * elementResize.toDimension.height\n            };\n            element.bounds = {\n                x: element.bounds.x,\n                y: element.bounds.y,\n                width: newDimension.width,\n                height: newDimension.height\n            };\n        });\n        return this.model;\n    };\n    return ResizeAnimation;\n}(animation_1.Animation));\nexports.ResizeAnimation = ResizeAnimation;\n//# sourceMappingURL=resize.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\nvar model_1 = require(\"./model\");\nvar StackLayouter = /** @class */ (function (_super) {\n    __extends(StackLayouter, _super);\n    function StackLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StackLayouter.prototype.getChildrenSize = function (container, options, layouter) {\n        var maxWidth = -1;\n        var maxHeight = -1;\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var bounds = layouter.getBoundsData(child).bounds;\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    maxWidth = Math.max(maxWidth, bounds.width);\n                    maxHeight = Math.max(maxHeight, bounds.height);\n                }\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    StackLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        var dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + child.bounds.x - bounds.x + dx,\n            y: containerOptions.paddingTop + child.bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return currentOffset;\n    };\n    StackLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hAlign: 'center',\n            vAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    };\n    StackLayouter.prototype.spread = function (a, b) {\n        return __assign(__assign({}, a), b);\n    };\n    StackLayouter.KIND = 'stack';\n    StackLayouter = __decorate([\n        inversify_1.injectable()\n    ], StackLayouter);\n    return StackLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.StackLayouter = StackLayouter;\n//# sourceMappingURL=stack-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\nvar model_1 = require(\"./model\");\n/**\n * Layouts children of a container in vertical (top->bottom) direction.\n */\nvar VBoxLayouter = /** @class */ (function (_super) {\n    __extends(VBoxLayouter, _super);\n    function VBoxLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VBoxLayouter.prototype.getChildrenSize = function (container, containerOptions, layouter) {\n        var maxWidth = -1;\n        var maxHeight = 0;\n        var isFirst = true;\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var bounds = layouter.getBoundsData(child).bounds;\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    maxHeight += bounds.height;\n                    if (isFirst)\n                        isFirst = false;\n                    else\n                        maxHeight += containerOptions.vGap;\n                    maxWidth = Math.max(maxWidth, bounds.width);\n                }\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    VBoxLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + child.bounds.x - bounds.x + dx,\n            y: currentOffset.y + child.bounds.y - bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x,\n            y: currentOffset.y + bounds.height + containerOptions.vGap\n        };\n    };\n    VBoxLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            vGap: 1,\n            hAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    };\n    VBoxLayouter.prototype.spread = function (a, b) {\n        return __assign(__assign({}, a), b);\n    };\n    VBoxLayouter.KIND = 'vbox';\n    VBoxLayouter = __decorate([\n        inversify_1.injectable()\n    ], VBoxLayouter);\n    return VBoxLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.VBoxLayouter = VBoxLayouter;\n//# sourceMappingURL=vbox-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"./model\");\nvar ShapeView = /** @class */ (function () {\n    function ShapeView() {\n    }\n    /**\n     * Check whether the given model element is in the current viewport. Use this method\n     * in your `render` implementation to skip rendering in case the element is not visible.\n     * This can greatly enhance performance for large models.\n     */\n    ShapeView.prototype.isVisible = function (model, context) {\n        if (context.targetKind === 'hidden') {\n            // Don't hide any element for hidden rendering\n            return true;\n        }\n        if (!geometry_1.isValidDimension(model.bounds)) {\n            // We should hide only if we know the element's bounds\n            return true;\n        }\n        var ab = model_1.getAbsoluteBounds(model);\n        var canvasBounds = model.root.canvasBounds;\n        return ab.x <= canvasBounds.width\n            && ab.x + ab.width >= 0\n            && ab.y <= canvasBounds.height\n            && ab.y + ab.height >= 0;\n    };\n    ShapeView = __decorate([\n        inversify_1.injectable()\n    ], ShapeView);\n    return ShapeView;\n}());\nexports.ShapeView = ShapeView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar registry_1 = require(\"../../utils/registry\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar ButtonHandlerRegistry = /** @class */ (function (_super) {\n    __extends(ButtonHandlerRegistry, _super);\n    function ButtonHandlerRegistry(buttonHandlerFactories) {\n        var _this = _super.call(this) || this;\n        buttonHandlerFactories.forEach(function (factory) { return _this.register(factory.TYPE, new factory()); });\n        return _this;\n    }\n    ButtonHandlerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IButtonHandler)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ButtonHandlerRegistry);\n    return ButtonHandlerRegistry;\n}(registry_1.InstanceRegistry));\nexports.ButtonHandlerRegistry = ButtonHandlerRegistry;\n//# sourceMappingURL=button-handler.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar button_handler_1 = require(\"./button-handler\");\nvar buttonModule = new inversify_1.ContainerModule(function (bind) {\n    bind(button_handler_1.ButtonHandlerRegistry).toSelf().inSingletonScope();\n});\nexports.default = buttonModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../fade/model\");\nvar SButton = /** @class */ (function (_super) {\n    __extends(SButton, _super);\n    function SButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        return _this;\n    }\n    SButton.DEFAULT_FEATURES = [model_1.boundsFeature, model_1.layoutableChildFeature, model_2.fadeFeature];\n    return SButton;\n}(model_1.SShapeElement));\nexports.SButton = SButton;\n//# sourceMappingURL=model.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar types_1 = require(\"../../base/types\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar model_1 = require(\"../nameable/model\");\nvar select_1 = require(\"../select/select\");\nvar center_fit_1 = require(\"../viewport/center-fit\");\nvar CommandPaletteActionProviderRegistry = /** @class */ (function () {\n    function CommandPaletteActionProviderRegistry(actionProviders) {\n        if (actionProviders === void 0) { actionProviders = []; }\n        this.actionProviders = actionProviders;\n    }\n    CommandPaletteActionProviderRegistry.prototype.getActions = function (root, text, lastMousePosition, index) {\n        var actionLists = this.actionProviders.map(function (provider) { return provider.getActions(root, text, lastMousePosition, index); });\n        return Promise.all(actionLists).then(function (p) { return p.reduce(function (acc, promise) { return promise !== undefined ? acc.concat(promise) : acc; }); });\n    };\n    CommandPaletteActionProviderRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ICommandPaletteActionProvider)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], CommandPaletteActionProviderRegistry);\n    return CommandPaletteActionProviderRegistry;\n}());\nexports.CommandPaletteActionProviderRegistry = CommandPaletteActionProviderRegistry;\nvar RevealNamedElementActionProvider = /** @class */ (function () {\n    function RevealNamedElementActionProvider(logger) {\n        this.logger = logger;\n    }\n    RevealNamedElementActionProvider.prototype.getActions = function (root, text, lastMousePosition, index) {\n        if (index !== undefined && index % 2 === 0)\n            return Promise.resolve(this.createSelectActions(root));\n        else\n            return Promise.resolve([new action_1.LabeledAction(\"Select all\", [new select_1.SelectAllAction()])]);\n    };\n    RevealNamedElementActionProvider.prototype.createSelectActions = function (modelRoot) {\n        var nameables = iterable_1.toArray(modelRoot.index.all().filter(function (element) { return model_1.isNameable(element); }));\n        return nameables.map(function (nameable) { return new action_1.LabeledAction(\"Reveal \" + model_1.name(nameable), [new select_1.SelectAction([nameable.id]), new center_fit_1.CenterAction([nameable.id])], 'fa-eye'); });\n    };\n    RevealNamedElementActionProvider = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ILogger)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], RevealNamedElementActionProvider);\n    return RevealNamedElementActionProvider;\n}());\nexports.RevealNamedElementActionProvider = RevealNamedElementActionProvider;\n//# sourceMappingURL=action-providers.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar types_1 = require(\"../../base/types\");\nvar ui_extension_1 = require(\"../../base/ui-extensions/ui-extension\");\nvar ui_extension_registry_1 = require(\"../../base/ui-extensions/ui-extension-registry\");\nvar dom_helper_1 = require(\"../../base/views/dom-helper\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../select/model\");\nvar action_providers_1 = require(\"./action-providers\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\n// import of function autocomplete(...) doesn't work\n// see also https://github.com/kraaden/autocomplete/issues/13\n// this is a workaround to still get the function including type support\nvar configureAutocomplete = require(\"autocompleter\");\nvar CommandPalette = /** @class */ (function (_super) {\n    __extends(CommandPalette, _super);\n    function CommandPalette() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.loadingIndicatorClasses = ['loading'];\n        _this.xOffset = 20;\n        _this.yOffset = 20;\n        _this.defaultWidth = 400;\n        _this.debounceWaitMs = 100;\n        _this.noCommandsMsg = \"No commands available\";\n        _this.paletteIndex = 0;\n        return _this;\n    }\n    CommandPalette_1 = CommandPalette;\n    CommandPalette.prototype.id = function () { return CommandPalette_1.ID; };\n    CommandPalette.prototype.containerClass = function () { return \"command-palette\"; };\n    CommandPalette.prototype.show = function (root) {\n        var contextElementIds = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            contextElementIds[_i - 1] = arguments[_i];\n        }\n        _super.prototype.show.apply(this, __spreadArrays([root], contextElementIds));\n        this.paletteIndex = 0;\n        this.contextActions = undefined;\n        this.inputElement.value = \"\";\n        this.autoCompleteResult = configureAutocomplete(this.autocompleteSettings(root));\n        this.inputElement.focus();\n    };\n    CommandPalette.prototype.initializeContents = function (containerElement) {\n        var _this = this;\n        containerElement.style.position = \"absolute\";\n        this.inputElement = document.createElement('input');\n        this.inputElement.style.width = '100%';\n        this.inputElement.addEventListener('keydown', function (event) { return _this.hideIfEscapeEvent(event); });\n        this.inputElement.addEventListener('keydown', function (event) { return _this.cylceIfInvokePaletteKey(event); });\n        this.inputElement.onblur = function () { return window.setTimeout(function () { return _this.hide(); }, 200); };\n        containerElement.appendChild(this.inputElement);\n    };\n    CommandPalette.prototype.hideIfEscapeEvent = function (event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            this.hide();\n        }\n    };\n    CommandPalette.prototype.cylceIfInvokePaletteKey = function (event) {\n        if (CommandPalette_1.isInvokePaletteKey(event)) {\n            this.cycle();\n        }\n    };\n    CommandPalette.prototype.cycle = function () {\n        this.contextActions = undefined;\n        this.paletteIndex++;\n    };\n    CommandPalette.prototype.onBeforeShow = function (containerElement, root) {\n        var selectedElementIds = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            selectedElementIds[_i - 2] = arguments[_i];\n        }\n        var x = this.xOffset;\n        var y = this.yOffset;\n        var selectedElements = iterable_1.toArray(root.index.all().filter(function (e) { return model_2.isSelectable(e) && e.selected; }));\n        if (selectedElements.length === 1) {\n            var bounds = model_1.getAbsoluteClientBounds(selectedElements[0], this.domHelper, this.viewerOptions);\n            x += bounds.x + bounds.width;\n            y += bounds.y;\n        }\n        else {\n            var bounds = model_1.getAbsoluteClientBounds(root, this.domHelper, this.viewerOptions);\n            x += bounds.x;\n            y += bounds.y;\n        }\n        containerElement.style.left = x + \"px\";\n        containerElement.style.top = y + \"px\";\n        containerElement.style.width = this.defaultWidth + \"px\";\n    };\n    CommandPalette.prototype.autocompleteSettings = function (root) {\n        var _this = this;\n        return {\n            input: this.inputElement,\n            emptyMsg: this.noCommandsMsg,\n            className: \"command-palette-suggestions\",\n            debounceWaitMs: this.debounceWaitMs,\n            showOnFocus: true,\n            minLength: -1,\n            fetch: function (text, update) {\n                return _this.updateAutoCompleteActions(update, text, root);\n            },\n            onSelect: function (item) { return _this.onSelect(item); },\n            render: function (item, currentValue) {\n                return _this.renderLabeledActionSuggestion(item, currentValue);\n            },\n            customize: function (input, inputRect, container, maxHeight) {\n                _this.customizeSuggestionContainer(container, inputRect, maxHeight);\n            }\n        };\n    };\n    CommandPalette.prototype.onSelect = function (item) {\n        this.executeAction(item);\n        this.hide();\n    };\n    CommandPalette.prototype.updateAutoCompleteActions = function (update, text, root) {\n        var _this = this;\n        this.onLoading();\n        if (this.contextActions) {\n            update(this.filterActions(text, this.contextActions));\n            this.onLoaded('success');\n        }\n        else {\n            this.actionProviderRegistry\n                .getActions(root, text, this.mousePositionTracker.lastPositionOnDiagram, this.paletteIndex)\n                .then(function (actions) {\n                _this.contextActions = actions;\n                update(_this.filterActions(text, actions));\n                _this.onLoaded('success');\n            })\n                .catch(function (reason) {\n                _this.logger.error(_this, \"Failed to obtain actions from command palette action providers\", reason);\n                _this.onLoaded('error');\n            });\n        }\n    };\n    CommandPalette.prototype.onLoading = function () {\n        var _a;\n        if (this.loadingIndicator && this.containerElement.contains(this.loadingIndicator)) {\n            return;\n        }\n        this.loadingIndicator = document.createElement('span');\n        (_a = this.loadingIndicator.classList).add.apply(_a, this.loadingIndicatorClasses);\n        this.containerElement.appendChild(this.loadingIndicator);\n    };\n    CommandPalette.prototype.onLoaded = function (success) {\n        if (this.containerElement.contains(this.loadingIndicator)) {\n            this.containerElement.removeChild(this.loadingIndicator);\n        }\n    };\n    CommandPalette.prototype.renderLabeledActionSuggestion = function (item, value) {\n        var itemElement = document.createElement(\"div\");\n        var wordMatcher = espaceForRegExp(value).split(\" \").join(\"|\");\n        var regex = new RegExp(wordMatcher, \"gi\");\n        if (item.icon) {\n            this.renderIcon(itemElement, item.icon);\n        }\n        itemElement.innerHTML += item.label.replace(regex, function (match) { return \"<em>\" + match + \"</em>\"; });\n        return itemElement;\n    };\n    CommandPalette.prototype.renderIcon = function (itemElement, icon) {\n        itemElement.innerHTML += \"<span class=\\\"icon fa \" + icon + \"\\\"></span>\";\n    };\n    CommandPalette.prototype.filterActions = function (filterText, actions) {\n        return iterable_1.toArray(actions.filter(function (action) {\n            var label = action.label.toLowerCase();\n            var searchWords = filterText.split(' ');\n            return searchWords.every(function (word) { return label.indexOf(word.toLowerCase()) !== -1; });\n        }));\n    };\n    CommandPalette.prototype.customizeSuggestionContainer = function (container, inputRect, maxHeight) {\n        // move container into our command palette container as this is already positioned correctly\n        if (this.containerElement) {\n            this.containerElement.appendChild(container);\n        }\n    };\n    CommandPalette.prototype.hide = function () {\n        _super.prototype.hide.call(this);\n        if (this.autoCompleteResult) {\n            this.autoCompleteResult.destroy();\n        }\n    };\n    CommandPalette.prototype.executeAction = function (input) {\n        var _this = this;\n        this.actionDispatcherProvider()\n            .then(function (actionDispatcher) { return actionDispatcher.dispatchAll(toActionArray(input)); })\n            .catch(function (reason) { return _this.logger.error(_this, 'No action dispatcher available to execute command palette action', reason); });\n    };\n    var CommandPalette_1;\n    CommandPalette.ID = \"command-palette\";\n    CommandPalette.isInvokePaletteKey = function (event) { return keyboard_1.matchesKeystroke(event, 'Space', 'ctrl'); };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcherProvider),\n        __metadata(\"design:type\", Function)\n    ], CommandPalette.prototype, \"actionDispatcherProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ICommandPaletteActionProviderRegistry),\n        __metadata(\"design:type\", action_providers_1.CommandPaletteActionProviderRegistry)\n    ], CommandPalette.prototype, \"actionProviderRegistry\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], CommandPalette.prototype, \"viewerOptions\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.DOMHelper),\n        __metadata(\"design:type\", dom_helper_1.DOMHelper)\n    ], CommandPalette.prototype, \"domHelper\", void 0);\n    __decorate([\n        inversify_1.inject(mouse_tool_1.MousePositionTracker),\n        __metadata(\"design:type\", mouse_tool_1.MousePositionTracker)\n    ], CommandPalette.prototype, \"mousePositionTracker\", void 0);\n    CommandPalette = CommandPalette_1 = __decorate([\n        inversify_1.injectable()\n    ], CommandPalette);\n    return CommandPalette;\n}(ui_extension_1.AbstractUIExtension));\nexports.CommandPalette = CommandPalette;\nfunction toActionArray(input) {\n    if (action_1.isLabeledAction(input)) {\n        return input.actions;\n    }\n    else if (action_1.isAction(input)) {\n        return [input];\n    }\n    return [];\n}\nfunction espaceForRegExp(value) {\n    return value.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n}\nvar CommandPaletteKeyListener = /** @class */ (function (_super) {\n    __extends(CommandPaletteKeyListener, _super);\n    function CommandPaletteKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CommandPaletteKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            return [new ui_extension_registry_1.SetUIExtensionVisibilityAction(CommandPalette.ID, false, [])];\n        }\n        else if (CommandPalette.isInvokePaletteKey(event)) {\n            var selectedElements = iterable_1.toArray(element.index.all().filter(function (e) { return model_2.isSelectable(e) && e.selected; }).map(function (e) { return e.id; }));\n            return [new ui_extension_registry_1.SetUIExtensionVisibilityAction(CommandPalette.ID, true, selectedElements)];\n        }\n        return [];\n    };\n    return CommandPaletteKeyListener;\n}(key_tool_1.KeyListener));\nexports.CommandPaletteKeyListener = CommandPaletteKeyListener;\n//# sourceMappingURL=command-palette.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar action_providers_1 = require(\"./action-providers\");\nvar command_palette_1 = require(\"./command-palette\");\nvar commandPaletteModule = new inversify_1.ContainerModule(function (bind) {\n    bind(command_palette_1.CommandPalette).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IUIExtension).toService(command_palette_1.CommandPalette);\n    bind(types_1.TYPES.KeyListener).to(command_palette_1.CommandPaletteKeyListener);\n    bind(action_providers_1.CommandPaletteActionProviderRegistry).toSelf().inSingletonScope();\n    bind(types_1.TYPES.ICommandPaletteActionProviderRegistry).toService(action_providers_1.CommandPaletteActionProviderRegistry);\n});\nexports.default = commandPaletteModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction toAnchor(anchor) {\n    return anchor instanceof HTMLElement ? { x: anchor.offsetLeft, y: anchor.offsetTop } : anchor;\n}\nexports.toAnchor = toAnchor;\n//# sourceMappingURL=context-menu-service.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar menu_providers_1 = require(\"./menu-providers\");\nvar mouse_listener_1 = require(\"./mouse-listener\");\nvar types_1 = require(\"../../base/types\");\nvar contextMenuModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IContextMenuServiceProvider).toProvider(function (ctx) {\n        return function () {\n            return new Promise(function (resolve, reject) {\n                if (ctx.container.isBound(types_1.TYPES.IContextMenuService)) {\n                    resolve(ctx.container.get(types_1.TYPES.IContextMenuService));\n                }\n                else {\n                    reject();\n                }\n            });\n        };\n    });\n    bind(types_1.TYPES.MouseListener).to(mouse_listener_1.ContextMenuMouseListener);\n    bind(types_1.TYPES.IContextMenuProviderRegistry).to(menu_providers_1.ContextMenuProviderRegistry);\n});\nexports.default = contextMenuModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar delete_1 = require(\"../edit/delete\");\nvar model_1 = require(\"../select/model\");\nvar ContextMenuProviderRegistry = /** @class */ (function () {\n    function ContextMenuProviderRegistry(menuProviders) {\n        if (menuProviders === void 0) { menuProviders = []; }\n        this.menuProviders = menuProviders;\n    }\n    ContextMenuProviderRegistry.prototype.getItems = function (root, lastMousePosition) {\n        var menues = this.menuProviders.map(function (provider) { return provider.getItems(root, lastMousePosition); });\n        return Promise.all(menues).then(this.flattenAndRestructure);\n    };\n    ContextMenuProviderRegistry.prototype.flattenAndRestructure = function (p) {\n        var menuItems = p.reduce(function (acc, promise) { return promise !== undefined ? acc.concat(promise) : acc; }, []);\n        var menuItemsWithParentId = menuItems.filter(function (menuItem) { return menuItem.parentId; });\n        var _loop_1 = function (menuItem) {\n            if (menuItem.parentId) {\n                var fragments = menuItem.parentId.split(\".\");\n                var matchingParent = undefined;\n                var nextParents = menuItems;\n                var _loop_2 = function (fragment) {\n                    matchingParent = nextParents.find(function (item) { return fragment === item.id; });\n                    if (matchingParent && matchingParent.children)\n                        nextParents = matchingParent.children;\n                };\n                for (var _i = 0, fragments_1 = fragments; _i < fragments_1.length; _i++) {\n                    var fragment = fragments_1[_i];\n                    _loop_2(fragment);\n                }\n                if (matchingParent) {\n                    if (matchingParent.children) {\n                        matchingParent.children.push(menuItem);\n                    }\n                    else {\n                        matchingParent.children = [menuItem];\n                    }\n                    menuItems = menuItems.filter(function (item) { return item !== menuItem; });\n                }\n            }\n        };\n        for (var _i = 0, menuItemsWithParentId_1 = menuItemsWithParentId; _i < menuItemsWithParentId_1.length; _i++) {\n            var menuItem = menuItemsWithParentId_1[_i];\n            _loop_1(menuItem);\n        }\n        return menuItems;\n    };\n    ContextMenuProviderRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IContextMenuItemProvider)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ContextMenuProviderRegistry);\n    return ContextMenuProviderRegistry;\n}());\nexports.ContextMenuProviderRegistry = ContextMenuProviderRegistry;\nvar DeleteContextMenuItemProvider = /** @class */ (function () {\n    function DeleteContextMenuItemProvider() {\n    }\n    DeleteContextMenuItemProvider.prototype.getItems = function (root, lastMousePosition) {\n        var selectedElements = Array.from(root.index.all().filter(model_1.isSelected).filter(delete_1.isDeletable));\n        return Promise.resolve([\n            {\n                id: \"delete\",\n                label: \"Delete\",\n                sortString: \"d\",\n                group: \"edit\",\n                actions: [new delete_1.DeleteElementAction(selectedElements.map(function (e) { return e.id; }))],\n                isEnabled: function () { return selectedElements.length > 0; }\n            }\n        ]);\n    };\n    DeleteContextMenuItemProvider = __decorate([\n        inversify_1.injectable()\n    ], DeleteContextMenuItemProvider);\n    return DeleteContextMenuItemProvider;\n}());\nexports.DeleteContextMenuItemProvider = DeleteContextMenuItemProvider;\n//# sourceMappingURL=menu-providers.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar menu_providers_1 = require(\"./menu-providers\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar types_1 = require(\"../../base/types\");\nvar model_1 = require(\"../select/model\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar ContextMenuMouseListener = /** @class */ (function (_super) {\n    __extends(ContextMenuMouseListener, _super);\n    function ContextMenuMouseListener(contextMenuService, menuProvider) {\n        var _this = _super.call(this) || this;\n        _this.contextMenuService = contextMenuService;\n        _this.menuProvider = menuProvider;\n        return _this;\n    }\n    ContextMenuMouseListener.prototype.mouseDown = function (target, event) {\n        if (event.button === 2) {\n            this.showContextMenu(target, event);\n        }\n        return [];\n    };\n    ContextMenuMouseListener.prototype.showContextMenu = function (target, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var menuService, rejected_1, mousePosition, isTargetSelected, selectableTarget, restoreSelection, menuItems;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.contextMenuService()];\n                    case 1:\n                        menuService = _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        rejected_1 = _a.sent();\n                        // IContextMenuService is not bound => do nothing\n                        return [2 /*return*/];\n                    case 3:\n                        mousePosition = { x: event.x, y: event.y };\n                        isTargetSelected = false;\n                        selectableTarget = smodel_utils_1.findParentByFeature(target, model_1.isSelectable);\n                        if (selectableTarget) {\n                            isTargetSelected = selectableTarget.selected;\n                            selectableTarget.selected = true;\n                        }\n                        restoreSelection = function () { if (selectableTarget)\n                            selectableTarget.selected = isTargetSelected; };\n                        return [4 /*yield*/, this.menuProvider.getItems(target.root, mousePosition)];\n                    case 4:\n                        menuItems = _a.sent();\n                        menuService.show(menuItems, mousePosition, restoreSelection);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ContextMenuMouseListener = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.IContextMenuServiceProvider)),\n        __param(1, inversify_1.inject(types_1.TYPES.IContextMenuProviderRegistry)),\n        __metadata(\"design:paramtypes\", [Function, menu_providers_1.ContextMenuProviderRegistry])\n    ], ContextMenuMouseListener);\n    return ContextMenuMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ContextMenuMouseListener = ContextMenuMouseListener;\n//# sourceMappingURL=mouse-listener.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_2 = require(\"../bounds/model\");\nvar model_3 = require(\"../routing/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar DecorationPlacer = /** @class */ (function () {\n    function DecorationPlacer() {\n    }\n    DecorationPlacer.prototype.decorate = function (vnode, element) {\n        if (model_1.isDecoration(element)) {\n            var position = this.getPosition(element);\n            var translate = 'translate(' + position.x + ', ' + position.y + ')';\n            vnode_utils_1.setAttr(vnode, 'transform', translate);\n        }\n        return vnode;\n    };\n    DecorationPlacer.prototype.getPosition = function (element) {\n        if (element instanceof smodel_1.SChildElement && element.parent instanceof model_3.SRoutableElement) {\n            var route = this.edgeRouterRegistry.route(element.parent);\n            if (route.length > 1) {\n                var index = Math.floor(0.5 * (route.length - 1));\n                var offset = model_2.isSizeable(element)\n                    ? {\n                        x: -0.5 * element.bounds.width,\n                        y: -0.5 * element.bounds.width\n                    }\n                    : geometry_1.ORIGIN_POINT;\n                return {\n                    x: 0.5 * (route[index].x + route[index + 1].x) + offset.x,\n                    y: 0.5 * (route[index].y + route[index + 1].y) + offset.y\n                };\n            }\n        }\n        if (model_2.isSizeable(element))\n            return {\n                x: -0.666 * element.bounds.width,\n                y: -0.666 * element.bounds.height\n            };\n        return geometry_1.ORIGIN_POINT;\n    };\n    DecorationPlacer.prototype.postUpdate = function () {\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], DecorationPlacer.prototype, \"edgeRouterRegistry\", void 0);\n    DecorationPlacer = __decorate([\n        inversify_1.injectable()\n    ], DecorationPlacer);\n    return DecorationPlacer;\n}());\nexports.DecorationPlacer = DecorationPlacer;\n//# sourceMappingURL=decoration-placer.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar view_1 = require(\"../../base/views/view\");\nvar inversify_1 = require(\"inversify\");\nvar model_1 = require(\"./model\");\nvar views_1 = require(\"./views\");\nvar types_1 = require(\"../../base/types\");\nvar decoration_placer_1 = require(\"./decoration-placer\");\nvar decorationModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    view_1.configureModelElement({ bind: bind, isBound: isBound }, 'marker', model_1.SIssueMarker, views_1.IssueMarkerView);\n    bind(decoration_placer_1.DecorationPlacer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(decoration_placer_1.DecorationPlacer);\n});\nexports.default = decorationModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../hover/model\");\nvar model_2 = require(\"../bounds/model\");\nexports.decorationFeature = Symbol('decorationFeature');\nfunction isDecoration(e) {\n    return e.hasFeature(exports.decorationFeature);\n}\nexports.isDecoration = isDecoration;\nvar SDecoration = /** @class */ (function (_super) {\n    __extends(SDecoration, _super);\n    function SDecoration() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SDecoration.DEFAULT_FEATURES = [exports.decorationFeature, model_2.boundsFeature, model_1.hoverFeedbackFeature, model_1.popupFeature];\n    return SDecoration;\n}(model_2.SShapeElement));\nexports.SDecoration = SDecoration;\nvar SIssueMarker = /** @class */ (function (_super) {\n    __extends(SIssueMarker, _super);\n    function SIssueMarker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SIssueMarker;\n}(SDecoration));\nexports.SIssueMarker = SIssueMarker;\nvar SIssue = /** @class */ (function () {\n    function SIssue() {\n    }\n    return SIssue;\n}());\nexports.SIssue = SIssue;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"../../lib/jsx\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar inversify_1 = require(\"inversify\");\nvar IssueMarkerView = /** @class */ (function () {\n    function IssueMarkerView() {\n    }\n    IssueMarkerView.prototype.render = function (marker, context) {\n        var scale = 16 / 1792;\n        var trafo = \"scale(\" + scale + \", \" + scale + \")\";\n        var maxSeverity = this.getMaxSeverity(marker);\n        var group = jsx_1.svg(\"g\", { \"class-sprotty-issue\": true },\n            jsx_1.svg(\"g\", { transform: trafo },\n                jsx_1.svg(\"path\", { d: this.getPath(maxSeverity) })));\n        vnode_utils_1.setClass(group, 'sprotty-' + maxSeverity, true);\n        return group;\n    };\n    IssueMarkerView.prototype.getMaxSeverity = function (marker) {\n        var currentSeverity = 'info';\n        for (var _i = 0, _a = marker.issues.map(function (s) { return s.severity; }); _i < _a.length; _i++) {\n            var severity = _a[_i];\n            if (severity === 'error' || (severity === 'warning' && currentSeverity === 'info'))\n                currentSeverity = severity;\n        }\n        return currentSeverity;\n    };\n    IssueMarkerView.prototype.getPath = function (severity) {\n        switch (severity) {\n            case 'error':\n            case 'warning':\n                // eslint-disable-next-line max-len\n                return \"M768 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z\";\n            case 'info':\n                // eslint-disable-next-line max-len\n                return \"M1024 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z\";\n        }\n    };\n    IssueMarkerView = __decorate([\n        inversify_1.injectable()\n    ], IssueMarkerView);\n    return IssueMarkerView;\n}());\nexports.IssueMarkerView = IssueMarkerView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar intersection_finder_1 = require(\"../edge-intersection/intersection-finder\");\nvar edgeIntersectionModule = new inversify_1.ContainerModule(function (bind) {\n    bind(intersection_finder_1.IntersectionFinder).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IEdgeRoutePostprocessor).toService(intersection_finder_1.IntersectionFinder);\n});\nexports.default = edgeIntersectionModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar tinyqueue_1 = __importDefault(require(\"tinyqueue\"));\nvar sweepline_1 = require(\"./sweepline\");\nfunction isIntersectingRoutedPoint(routedPoint) {\n    return routedPoint !== undefined && 'intersections' in routedPoint && 'kind' in routedPoint;\n}\nexports.isIntersectingRoutedPoint = isIntersectingRoutedPoint;\nexports.BY_X_THEN_Y = function (a, b) {\n    if (a.intersectionPoint.x === b.intersectionPoint.x) {\n        return a.intersectionPoint.y - b.intersectionPoint.y;\n    }\n    return a.intersectionPoint.x - b.intersectionPoint.x;\n};\n/**\n * Finds intersections among edges and updates routed points to reflect those intersections.\n */\nvar IntersectionFinder = /** @class */ (function () {\n    function IntersectionFinder() {\n    }\n    /**\n     * Finds all intersections in the specified `routing` and replaces the `RoutedPoints` that are\n     * intersecting by adding intersection information to routing points (@see `IntersectingRoutedPoints`).\n     * @param routing the edge routing to find intersections for and update.\n     */\n    IntersectionFinder.prototype.apply = function (routing) {\n        var intersections = this.find(routing);\n        this.addToRouting(intersections, routing);\n    };\n    /**\n     * Finds the intersections in the specified `routing` and returns them.\n     * @param routing the edge routing to find intersections for and update.\n     * @returns the identified intersections.\n     */\n    IntersectionFinder.prototype.find = function (routing) {\n        var eventQueue = new tinyqueue_1.default(undefined, sweepline_1.checkWhichEventIsLeft);\n        routing.routes.forEach(function (route, routeId) { return sweepline_1.addRoute(routeId, route, eventQueue); });\n        return sweepline_1.runSweep(eventQueue);\n    };\n    IntersectionFinder.prototype.addToRouting = function (intersections, routing) {\n        for (var _i = 0, intersections_1 = intersections; _i < intersections_1.length; _i++) {\n            var intersection = intersections_1[_i];\n            var routable1 = routing.get(intersection.routable1);\n            var routable2 = routing.get(intersection.routable2);\n            this.addIntersectionToRoutedPoint(intersection, routable1, intersection.segmentIndex1);\n            this.addIntersectionToRoutedPoint(intersection, routable2, intersection.segmentIndex2);\n        }\n    };\n    IntersectionFinder.prototype.addIntersectionToRoutedPoint = function (intersection, routedPoint, segmentIndex) {\n        if (routedPoint && routedPoint.length > segmentIndex) {\n            var segment = routedPoint[segmentIndex + 1];\n            if (isIntersectingRoutedPoint(segment)) {\n                segment.intersections.push(intersection);\n            }\n            else {\n                var intersectingRoutedPoint = __assign(__assign({}, segment), { intersections: [intersection] });\n                routedPoint[segmentIndex + 1] = intersectingRoutedPoint;\n            }\n        }\n    };\n    IntersectionFinder = __decorate([\n        inversify_1.injectable()\n    ], IntersectionFinder);\n    return IntersectionFinder;\n}());\nexports.IntersectionFinder = IntersectionFinder;\n//# sourceMappingURL=intersection-finder.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 Rowan Winsemius and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// Based on the sweepline implementation at https://github.com/rowanwins/sweepline-intersections\n// which is published under the terms of MIT, but has been adapted to the use case of sprotty.\nvar tinyqueue_1 = __importDefault(require(\"tinyqueue\"));\nvar geometry_1 = require(\"../../utils/geometry\");\n/*\n * The algorithm implemented in this module is loosely based on the Bentley-Ottmann algorithm for\n * finding intersection among line segments in `O((n+k) log n)`, whereas `n` is the number of line\n * segments and `k` is the number of intersections.\n * The underlying idea is to use a imaginary sweep line that moves over the x/y plane and testing\n * only the line segments for intersection that the sweepline currently crosses, instead of\n * testing all segment with each other, which would be `O(n^2)`.\n * It does so by generating a prioritized event queue for start and end events of the line segments\n * and working its way through the queue (i.e., sweeping).\n * More information can be found at https://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm\n * In contrast to the original Bently-Ottmann algorithm, the implementation below does not use a tree\n * data structure to store the segments in order to simplify the implementation.\n * See also https://github.com/rowanwins/sweepline-intersections#algorithm-notes\n */\n/**\n * Add the specified `route` to the event `queue` from left to right.\n * @param routeId id of the route.\n * @param route the route as array of points.\n * @param queue the queue to add the route to.\n */\nfunction addRoute(routeId, route, queue) {\n    if (route.length < 1)\n        return;\n    var currentPoint = route[0];\n    var nextPoint = undefined;\n    for (var i = 0; i < route.length - 1; i++) {\n        nextPoint = route[i + 1];\n        var e1 = new SweepEvent(routeId, currentPoint, i);\n        var e2 = new SweepEvent(routeId, nextPoint, i + 1);\n        e1.otherEvent = e2;\n        e2.otherEvent = e1;\n        if (checkWhichEventIsLeft(e1, e2) > 0) {\n            e2.isLeftEndpoint = true;\n            e1.isLeftEndpoint = false;\n        }\n        else {\n            e1.isLeftEndpoint = true;\n            e2.isLeftEndpoint = false;\n        }\n        queue.push(e1);\n        queue.push(e2);\n        currentPoint = nextPoint;\n    }\n}\nexports.addRoute = addRoute;\n/**\n * Returns which of the two events is left.\n * This is used to classify the endpoints of a segment when generating the\n * event queue.\n */\nfunction checkWhichEventIsLeft(e1, e2) {\n    if (e1.point.x > e2.point.x)\n        return 1;\n    if (e1.point.x < e2.point.x)\n        return -1;\n    if (e1.point.y !== e2.point.y)\n        return e1.point.y > e2.point.y ? 1 : -1;\n    return 1;\n}\nexports.checkWhichEventIsLeft = checkWhichEventIsLeft;\n/**\n * An event -- or with other words a start or end point of a segment -- in the context\n * of the event queue for the sweep.\n *\n * Stores the original Sprotty `edgeId` and the segment index of this segment in the edge\n * to keep track of which edge and segment this event originated from.\n */\nvar SweepEvent = /** @class */ (function () {\n    function SweepEvent(edgeId, point, segmentIndex) {\n        this.edgeId = edgeId;\n        this.point = point;\n        this.segmentIndex = segmentIndex;\n    }\n    return SweepEvent;\n}());\nexports.SweepEvent = SweepEvent;\n/**\n * A line segment consists of a start and a stop event.\n */\nvar Segment = /** @class */ (function () {\n    function Segment(event) {\n        this.leftSweepEvent = event;\n        this.rightSweepEvent = event.otherEvent;\n    }\n    return Segment;\n}());\nexports.Segment = Segment;\n/**\n * Performs the main sweep algorithm on the specified event queue.\n *\n * An empty priority queue is created to store segments encountered.\n * An item is removed from the priority queue if the vertex is the left endpoint\n * of a segment, we test it against every other segment in the segment queue for\n * intersections with any intersection recorded. We then add the vertex (and it's\n * associated right endpoint) to the segment queue.\n * If we encounter a right endpoint we remove the first item from the segment queue.\n *\n * Each pair of segments are only tested once. And only segments that overlap on the\n * x plane are tested against each other.\n *\n * @param eventQueue the event queue.\n * @returns the identified intersections.\n */\nfunction runSweep(eventQueue) {\n    var intersectionPoints = [];\n    var outQueue = new tinyqueue_1.default([], checkWhichSegmentHasRightEndpointFirst);\n    while (eventQueue.length) {\n        var event_1 = eventQueue.pop();\n        if (event_1 === null || event_1 === void 0 ? void 0 : event_1.isLeftEndpoint) {\n            var segment = new Segment(event_1);\n            for (var i = 0; i < outQueue.data.length; i++) {\n                var otherSegment = outQueue.data[i];\n                var intersection = intersectionOfSegments(segment, otherSegment);\n                if (intersection) {\n                    intersectionPoints.push({\n                        routable1: event_1.edgeId,\n                        routable2: otherSegment.leftSweepEvent.edgeId,\n                        segmentIndex1: getSegmentIndex(segment),\n                        segmentIndex2: getSegmentIndex(otherSegment),\n                        intersectionPoint: intersection\n                    });\n                }\n            }\n            outQueue.push(segment);\n        }\n        else if ((event_1 === null || event_1 === void 0 ? void 0 : event_1.isLeftEndpoint) === false) {\n            outQueue.pop();\n        }\n    }\n    return intersectionPoints;\n}\nexports.runSweep = runSweep;\n/**\n * Specifies which of the two specified segments has a right endpoint first.\n * Used as a comparator to sort the event queue.\n */\nfunction checkWhichSegmentHasRightEndpointFirst(seg1, seg2) {\n    if (seg1.rightSweepEvent.point.x > seg2.rightSweepEvent.point.x)\n        return 1;\n    if (seg1.rightSweepEvent.point.x < seg2.rightSweepEvent.point.x)\n        return -1;\n    if (seg1.rightSweepEvent.point.y !== seg2.rightSweepEvent.point.y)\n        return seg1.rightSweepEvent.point.y < seg2.rightSweepEvent.point.y ? 1 : -1;\n    return 1;\n}\nexports.checkWhichSegmentHasRightEndpointFirst = checkWhichSegmentHasRightEndpointFirst;\nfunction getSegmentIndex(segment) {\n    return Math.min(segment.leftSweepEvent.segmentIndex, segment.rightSweepEvent.segmentIndex);\n}\nexports.getSegmentIndex = getSegmentIndex;\n/**\n * Tests whether two segments intersect and returns the intersection point if existing.\n */\nfunction intersectionOfSegments(seg1, seg2) {\n    if (seg1.leftSweepEvent.edgeId === seg2.leftSweepEvent.edgeId) {\n        return undefined;\n    }\n    var seg1Line = new geometry_1.PointToPointLine(seg1.leftSweepEvent.point, seg1.rightSweepEvent.point);\n    var seg2Line = new geometry_1.PointToPointLine(seg2.leftSweepEvent.point, seg2.rightSweepEvent.point);\n    return seg1Line.intersection(seg2Line);\n}\nexports.intersectionOfSegments = intersectionOfSegments;\n//# sourceMappingURL=sweepline.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar edge_layout_1 = require(\"./edge-layout\");\nvar edgeLayoutModule = new inversify_1.ContainerModule(function (bind) {\n    bind(edge_layout_1.EdgeLayoutPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(edge_layout_1.EdgeLayoutPostprocessor);\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(edge_layout_1.EdgeLayoutPostprocessor);\n});\nexports.default = edgeLayoutModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar sgraph_1 = require(\"../../graph/sgraph\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"./model\");\nvar routing_1 = require(\"../routing/routing\");\nvar EdgeLayoutPostprocessor = /** @class */ (function () {\n    function EdgeLayoutPostprocessor() {\n    }\n    EdgeLayoutPostprocessor.prototype.decorate = function (vnode, element) {\n        if (model_2.isEdgeLayoutable(element) && element.parent instanceof sgraph_1.SEdge) {\n            if (element.bounds !== geometry_1.EMPTY_BOUNDS) {\n                var placement = this.getEdgePlacement(element);\n                var edge = element.parent;\n                var position = Math.min(1, Math.max(0, placement.position));\n                var router = this.edgeRouterRegistry.get(edge.routerKind);\n                var pointOnEdge = router.pointAt(edge, position);\n                var derivativeOnEdge = router.derivativeAt(edge, position);\n                var transform = '';\n                if (pointOnEdge && derivativeOnEdge) {\n                    transform += \"translate(\" + pointOnEdge.x + \", \" + pointOnEdge.y + \")\";\n                    var angle = geometry_1.toDegrees(Math.atan2(derivativeOnEdge.y, derivativeOnEdge.x));\n                    if (placement.rotate) {\n                        var flippedAngle = angle;\n                        if (Math.abs(angle) > 90) {\n                            if (angle < 0)\n                                flippedAngle += 180;\n                            else if (angle > 0)\n                                flippedAngle -= 180;\n                        }\n                        transform += \" rotate(\" + flippedAngle + \")\";\n                        var alignment = this.getRotatedAlignment(element, placement, flippedAngle !== angle);\n                        transform += \" translate(\" + alignment.x + \", \" + alignment.y + \")\";\n                    }\n                    else {\n                        var alignment = this.getAlignment(element, placement, angle);\n                        transform += \" translate(\" + alignment.x + \", \" + alignment.y + \")\";\n                    }\n                    vnode_utils_1.setAttr(vnode, 'transform', transform);\n                }\n            }\n        }\n        return vnode;\n    };\n    EdgeLayoutPostprocessor.prototype.getRotatedAlignment = function (element, placement, flip) {\n        var x = model_1.isAlignable(element) ? element.alignment.x : 0;\n        var y = model_1.isAlignable(element) ? element.alignment.y : 0;\n        var bounds = element.bounds;\n        if (placement.side === 'on')\n            return { x: x - 0.5 * bounds.height, y: y - 0.5 * bounds.height };\n        if (flip) {\n            if (placement.position < 0.3333333)\n                x -= bounds.width + placement.offset;\n            else if (placement.position < 0.6666666)\n                x -= 0.5 * bounds.width;\n            else\n                x += placement.offset;\n            switch (placement.side) {\n                case 'left':\n                case 'bottom':\n                    y -= placement.offset + bounds.height;\n                    break;\n                case 'right':\n                case 'top':\n                    y += placement.offset;\n            }\n        }\n        else {\n            if (placement.position < 0.3333333)\n                x += placement.offset;\n            else if (placement.position < 0.6666666)\n                x -= 0.5 * bounds.width;\n            else\n                x -= bounds.width + placement.offset;\n            switch (placement.side) {\n                case 'right':\n                case 'bottom':\n                    y += -placement.offset - bounds.height;\n                    break;\n                case 'left':\n                case 'top':\n                    y += placement.offset;\n            }\n        }\n        return { x: x, y: y };\n    };\n    EdgeLayoutPostprocessor.prototype.getEdgePlacement = function (element) {\n        var current = element;\n        var allPlacements = [];\n        while (current !== undefined) {\n            var placement = current.edgePlacement;\n            if (placement !== undefined)\n                allPlacements.push(placement);\n            if (current instanceof smodel_1.SChildElement)\n                current = current.parent;\n            else\n                break;\n        }\n        return allPlacements.reverse().reduce(function (a, b) { return __assign(__assign({}, a), b); }, model_2.DEFAULT_EDGE_PLACEMENT);\n    };\n    EdgeLayoutPostprocessor.prototype.getAlignment = function (label, placement, angle) {\n        var bounds = label.bounds;\n        var x = model_1.isAlignable(label) ? label.alignment.x - bounds.width : 0;\n        var y = model_1.isAlignable(label) ? label.alignment.y - bounds.height : 0;\n        if (placement.side === 'on')\n            return { x: x + 0.5 * bounds.height, y: y + 0.5 * bounds.height };\n        var quadrant = this.getQuadrant(angle);\n        var midLeft = { x: placement.offset, y: y + 0.5 * bounds.height };\n        var topLeft = { x: placement.offset, y: y + bounds.height + placement.offset };\n        var topRight = { x: -bounds.width - placement.offset, y: y + bounds.height + placement.offset };\n        var midRight = { x: -bounds.width - placement.offset, y: y + 0.5 * bounds.height };\n        var bottomRight = { x: -bounds.width - placement.offset, y: y - placement.offset };\n        var bottomLeft = { x: placement.offset, y: y - placement.offset };\n        switch (placement.side) {\n            case 'left':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return geometry_1.linear(topLeft, topRight, quadrant.position);\n                    case 'north':\n                        return geometry_1.linear(topRight, bottomRight, quadrant.position);\n                    case 'east':\n                        return geometry_1.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'south':\n                        return geometry_1.linear(bottomLeft, topLeft, quadrant.position);\n                }\n                break;\n            case 'right':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return geometry_1.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'north':\n                        return geometry_1.linear(bottomLeft, topLeft, quadrant.position);\n                    case 'east':\n                        return geometry_1.linear(topLeft, topRight, quadrant.position);\n                    case 'south':\n                        return geometry_1.linear(topRight, bottomRight, quadrant.position);\n                }\n                break;\n            case 'top':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return geometry_1.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'north':\n                        return this.linearFlip(bottomLeft, midLeft, midRight, bottomRight, quadrant.position);\n                    case 'east':\n                        return geometry_1.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'south':\n                        return this.linearFlip(bottomLeft, midLeft, midRight, bottomRight, quadrant.position);\n                }\n                break;\n            case 'bottom':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return geometry_1.linear(topLeft, topRight, quadrant.position);\n                    case 'north':\n                        return this.linearFlip(topRight, midRight, midLeft, topLeft, quadrant.position);\n                    case 'east':\n                        return geometry_1.linear(topLeft, topRight, quadrant.position);\n                    case 'south':\n                        return this.linearFlip(topRight, midRight, midLeft, topLeft, quadrant.position);\n                }\n                break;\n        }\n        return { x: 0, y: 0 };\n    };\n    EdgeLayoutPostprocessor.prototype.getQuadrant = function (angle) {\n        if (Math.abs(angle) > 135)\n            return { orientation: 'west', position: (angle > 0 ? angle - 135 : angle + 225) / 90 };\n        else if (angle < -45)\n            return { orientation: 'north', position: (angle + 135) / 90 };\n        else if (angle < 45)\n            return { orientation: 'east', position: (angle + 45) / 90 };\n        else\n            return { orientation: 'south', position: (angle - 45) / 90 };\n    };\n    EdgeLayoutPostprocessor.prototype.linearFlip = function (p0, p1, p2, p3, position) {\n        return position < 0.5 ? geometry_1.linear(p0, p1, 2 * position) : geometry_1.linear(p2, p3, 2 * position - 1);\n    };\n    EdgeLayoutPostprocessor.prototype.postUpdate = function () { };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], EdgeLayoutPostprocessor.prototype, \"edgeRouterRegistry\", void 0);\n    EdgeLayoutPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], EdgeLayoutPostprocessor);\n    return EdgeLayoutPostprocessor;\n}());\nexports.EdgeLayoutPostprocessor = EdgeLayoutPostprocessor;\n//# sourceMappingURL=edge-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../routing/model\");\nexports.edgeLayoutFeature = Symbol('edgeLayout');\nfunction isEdgeLayoutable(element) {\n    return element instanceof smodel_1.SChildElement\n        && element.parent instanceof model_2.SRoutableElement\n        && checkEdgeLayoutable(element)\n        && model_1.isBoundsAware(element)\n        && element.hasFeature(exports.edgeLayoutFeature);\n}\nexports.isEdgeLayoutable = isEdgeLayoutable;\nfunction checkEdgeLayoutable(element) {\n    return 'edgePlacement' in element;\n}\nvar EdgePlacement = /** @class */ (function (_super) {\n    __extends(EdgePlacement, _super);\n    function EdgePlacement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EdgePlacement;\n}(Object));\nexports.EdgePlacement = EdgePlacement;\nexports.DEFAULT_EDGE_PLACEMENT = {\n    rotate: true,\n    side: 'top',\n    position: 0.5,\n    offset: 7\n};\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.creatingOnDragFeature = Symbol('creatingOnDragFeature');\nfunction isCreatingOnDrag(element) {\n    return element.hasFeature(exports.creatingOnDragFeature) && element.createAction !== undefined;\n}\nexports.isCreatingOnDrag = isCreatingOnDrag;\n//# sourceMappingURL=create-on-drag.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar CreateElementAction = /** @class */ (function () {\n    function CreateElementAction(containerId, elementSchema) {\n        this.containerId = containerId;\n        this.elementSchema = elementSchema;\n        this.kind = CreateElementAction.KIND;\n    }\n    CreateElementAction.KIND = \"createElement\";\n    return CreateElementAction;\n}());\nexports.CreateElementAction = CreateElementAction;\nvar CreateElementCommand = /** @class */ (function (_super) {\n    __extends(CreateElementCommand, _super);\n    function CreateElementCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    CreateElementCommand.prototype.execute = function (context) {\n        var container = context.root.index.getById(this.action.containerId);\n        if (container instanceof smodel_1.SParentElement) {\n            this.container = container;\n            this.newElement = context.modelFactory.createElement(this.action.elementSchema);\n            this.container.add(this.newElement);\n        }\n        return context.root;\n    };\n    CreateElementCommand.prototype.undo = function (context) {\n        this.container.remove(this.newElement);\n        return context.root;\n    };\n    CreateElementCommand.prototype.redo = function (context) {\n        this.container.add(this.newElement);\n        return context.root;\n    };\n    CreateElementCommand.KIND = CreateElementAction.KIND;\n    CreateElementCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [CreateElementAction])\n    ], CreateElementCommand);\n    return CreateElementCommand;\n}(command_1.Command));\nexports.CreateElementCommand = CreateElementCommand;\n//# sourceMappingURL=create.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar types_1 = require(\"../../base/types\");\nvar inversify_1 = require(\"inversify\");\nexports.deletableFeature = Symbol('deletableFeature');\nfunction isDeletable(element) {\n    return element instanceof smodel_1.SChildElement && element.hasFeature(exports.deletableFeature);\n}\nexports.isDeletable = isDeletable;\nvar DeleteElementAction = /** @class */ (function () {\n    function DeleteElementAction(elementIds) {\n        this.elementIds = elementIds;\n        this.kind = DeleteElementAction.KIND;\n    }\n    DeleteElementAction.KIND = 'delete';\n    return DeleteElementAction;\n}());\nexports.DeleteElementAction = DeleteElementAction;\nvar ResolvedDelete = /** @class */ (function () {\n    function ResolvedDelete() {\n    }\n    return ResolvedDelete;\n}());\nexports.ResolvedDelete = ResolvedDelete;\nvar DeleteElementCommand = /** @class */ (function (_super) {\n    __extends(DeleteElementCommand, _super);\n    function DeleteElementCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.resolvedDeletes = [];\n        return _this;\n    }\n    DeleteElementCommand.prototype.execute = function (context) {\n        var index = context.root.index;\n        for (var _i = 0, _a = this.action.elementIds; _i < _a.length; _i++) {\n            var id = _a[_i];\n            var element = index.getById(id);\n            if (element && isDeletable(element)) {\n                this.resolvedDeletes.push({ child: element, parent: element.parent });\n                element.parent.remove(element);\n            }\n        }\n        return context.root;\n    };\n    DeleteElementCommand.prototype.undo = function (context) {\n        for (var _i = 0, _a = this.resolvedDeletes; _i < _a.length; _i++) {\n            var resolvedDelete = _a[_i];\n            resolvedDelete.parent.add(resolvedDelete.child);\n        }\n        return context.root;\n    };\n    DeleteElementCommand.prototype.redo = function (context) {\n        for (var _i = 0, _a = this.resolvedDeletes; _i < _a.length; _i++) {\n            var resolvedDelete = _a[_i];\n            resolvedDelete.parent.remove(resolvedDelete.child);\n        }\n        return context.root;\n    };\n    DeleteElementCommand.KIND = DeleteElementAction.KIND;\n    DeleteElementCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [DeleteElementAction])\n    ], DeleteElementCommand);\n    return DeleteElementCommand;\n}(command_1.Command));\nexports.DeleteElementCommand = DeleteElementCommand;\n//# sourceMappingURL=delete.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar action_handler_1 = require(\"../../base/actions/action-handler\");\nvar view_1 = require(\"../../base/views/view\");\nvar model_1 = require(\"../../features/routing/model\");\nvar svg_views_1 = require(\"../../lib/svg-views\");\nvar delete_1 = require(\"./delete\");\nvar edit_label_1 = require(\"./edit-label\");\nvar edit_label_ui_1 = require(\"./edit-label-ui\");\nvar edit_routing_1 = require(\"./edit-routing\");\nvar reconnect_1 = require(\"./reconnect\");\nexports.edgeEditModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    var context = { bind: bind, isBound: isBound };\n    command_registration_1.configureCommand(context, edit_routing_1.SwitchEditModeCommand);\n    command_registration_1.configureCommand(context, reconnect_1.ReconnectCommand);\n    command_registration_1.configureCommand(context, delete_1.DeleteElementCommand);\n    view_1.configureModelElement(context, 'dangling-anchor', model_1.SDanglingAnchor, svg_views_1.EmptyGroupView);\n});\nexports.labelEditModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.MouseListener).to(edit_label_1.EditLabelMouseListener);\n    bind(types_1.TYPES.KeyListener).to(edit_label_1.EditLabelKeyListener);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, edit_label_1.ApplyLabelEditCommand);\n});\nexports.labelEditUiModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    var context = { bind: bind, isBound: isBound };\n    action_handler_1.configureActionHandler(context, edit_label_1.EditLabelAction.KIND, edit_label_ui_1.EditLabelActionHandler);\n    bind(edit_label_ui_1.EditLabelUI).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IUIExtension).toService(edit_label_ui_1.EditLabelUI);\n});\n//# sourceMappingURL=di.config.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019-2020 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar ui_extension_1 = require(\"../../base/ui-extensions/ui-extension\");\nvar ui_extension_registry_1 = require(\"../../base/ui-extensions/ui-extension-registry\");\nvar dom_helper_1 = require(\"../../base/views/dom-helper\");\nvar commit_model_1 = require(\"../../model-source/commit-model\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_1 = require(\"../bounds/model\");\nvar zoom_1 = require(\"../viewport/zoom\");\nvar edit_label_1 = require(\"./edit-label\");\nvar model_2 = require(\"./model\");\n/** Shows a UI extension for editing a label on emitted `EditLabelAction`s. */\nvar EditLabelActionHandler = /** @class */ (function () {\n    function EditLabelActionHandler() {\n    }\n    EditLabelActionHandler.prototype.handle = function (action) {\n        if (edit_label_1.isEditLabelAction(action)) {\n            return new ui_extension_registry_1.SetUIExtensionVisibilityAction(EditLabelUI.ID, true, [action.labelId]);\n        }\n    };\n    EditLabelActionHandler = __decorate([\n        inversify_1.injectable()\n    ], EditLabelActionHandler);\n    return EditLabelActionHandler;\n}());\nexports.EditLabelActionHandler = EditLabelActionHandler;\nvar EditLabelUI = /** @class */ (function (_super) {\n    __extends(EditLabelUI, _super);\n    function EditLabelUI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.validationTimeout = undefined;\n        _this.isActive = false;\n        _this.blockApplyEditOnInvalidInput = true;\n        _this.isCurrentLabelValid = true;\n        return _this;\n    }\n    EditLabelUI_1 = EditLabelUI;\n    EditLabelUI.prototype.id = function () { return EditLabelUI_1.ID; };\n    EditLabelUI.prototype.containerClass = function () { return \"label-edit\"; };\n    Object.defineProperty(EditLabelUI.prototype, \"labelId\", {\n        get: function () { return this.label ? this.label.id : 'unknown'; },\n        enumerable: true,\n        configurable: true\n    });\n    EditLabelUI.prototype.initializeContents = function (containerElement) {\n        var _this = this;\n        containerElement.style.position = 'absolute';\n        this.inputElement = document.createElement('input');\n        this.textAreaElement = document.createElement('textarea');\n        [this.inputElement, this.textAreaElement].forEach(function (element) {\n            element.onkeydown = function (event) { return _this.applyLabelEditOnEvent(event, 'Enter'); };\n            _this.configureAndAdd(element, containerElement);\n        });\n    };\n    EditLabelUI.prototype.configureAndAdd = function (element, containerElement) {\n        var _this = this;\n        element.style.visibility = 'hidden';\n        element.style.position = 'absolute';\n        element.style.top = '0px';\n        element.style.left = '0px';\n        element.addEventListener('keydown', function (event) { return _this.hideIfEscapeEvent(event); });\n        element.addEventListener('keyup', function (event) { return _this.validateLabelIfContentChange(event, element.value); });\n        element.addEventListener('blur', function () { return window.setTimeout(function () { return _this.applyLabelEdit(); }, 200); });\n        containerElement.appendChild(element);\n    };\n    Object.defineProperty(EditLabelUI.prototype, \"editControl\", {\n        get: function () {\n            if (this.label && this.label.isMultiLine) {\n                return this.textAreaElement;\n            }\n            return this.inputElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EditLabelUI.prototype.hideIfEscapeEvent = function (event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            this.hide();\n        }\n    };\n    EditLabelUI.prototype.applyLabelEditOnEvent = function (event, code) {\n        var modifiers = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            modifiers[_i - 2] = arguments[_i];\n        }\n        if (keyboard_1.matchesKeystroke.apply(void 0, __spreadArrays([event, code ? code : 'Enter'], modifiers))) {\n            event.preventDefault();\n            this.applyLabelEdit();\n        }\n    };\n    EditLabelUI.prototype.validateLabelIfContentChange = function (event, value) {\n        if (this.previousLabelContent === undefined || this.previousLabelContent !== value) {\n            this.previousLabelContent = value;\n            this.performLabelValidation(event, this.editControl.value);\n        }\n    };\n    EditLabelUI.prototype.applyLabelEdit = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.isActive) {\n                            return [2 /*return*/];\n                        }\n                        if (!this.blockApplyEditOnInvalidInput) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.validateLabel(this.editControl.value)];\n                    case 1:\n                        result = _a.sent();\n                        if ('error' === result.severity) {\n                            this.editControl.focus();\n                            return [2 /*return*/];\n                        }\n                        _a.label = 2;\n                    case 2:\n                        this.actionDispatcherProvider()\n                            .then(function (actionDispatcher) { return actionDispatcher.dispatchAll([new edit_label_1.ApplyLabelEditAction(_this.labelId, _this.editControl.value), new commit_model_1.CommitModelAction()]); })\n                            .catch(function (reason) { return _this.logger.error(_this, 'No action dispatcher available to execute apply label edit action', reason); });\n                        this.hide();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EditLabelUI.prototype.performLabelValidation = function (event, value) {\n        var _this = this;\n        if (this.validationTimeout) {\n            window.clearTimeout(this.validationTimeout);\n        }\n        this.validationTimeout = window.setTimeout(function () { return _this.validateLabel(value); }, 200);\n    };\n    EditLabelUI.prototype.validateLabel = function (value) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, reason_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.labelValidator && this.label)) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.labelValidator.validate(value, this.label)];\n                    case 2:\n                        result = _a.sent();\n                        this.isCurrentLabelValid = 'error' !== result.severity;\n                        this.showValidationResult(result);\n                        return [2 /*return*/, result];\n                    case 3:\n                        reason_1 = _a.sent();\n                        this.logger.error(this, 'Error validating edited label', reason_1);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        this.isCurrentLabelValid = true;\n                        return [2 /*return*/, { severity: 'ok', message: undefined }];\n                }\n            });\n        });\n    };\n    EditLabelUI.prototype.showValidationResult = function (result) {\n        this.clearValidationResult();\n        if (this.validationDecorator) {\n            this.validationDecorator.decorate(this.editControl, result);\n        }\n    };\n    EditLabelUI.prototype.clearValidationResult = function () {\n        if (this.validationDecorator) {\n            this.validationDecorator.dispose(this.editControl);\n        }\n    };\n    EditLabelUI.prototype.show = function (root) {\n        var contextElementIds = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            contextElementIds[_i - 1] = arguments[_i];\n        }\n        if (!hasEditableLabel(contextElementIds, root) || this.isActive) {\n            return;\n        }\n        _super.prototype.show.apply(this, __spreadArrays([root], contextElementIds));\n        this.isActive = true;\n    };\n    EditLabelUI.prototype.hide = function () {\n        this.editControl.style.visibility = 'hidden';\n        _super.prototype.hide.call(this);\n        this.clearValidationResult();\n        this.isActive = false;\n        this.isCurrentLabelValid = true;\n        this.previousLabelContent = undefined;\n        if (this.labelElement) {\n            this.labelElement.style.visibility = 'visible';\n        }\n    };\n    EditLabelUI.prototype.onBeforeShow = function (containerElement, root) {\n        var contextElementIds = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            contextElementIds[_i - 2] = arguments[_i];\n        }\n        this.label = getEditableLabels(contextElementIds, root)[0];\n        this.previousLabelContent = this.label.text;\n        this.setPosition(containerElement);\n        this.applyTextContents();\n        this.applyFontStyling();\n        this.editControl.style.visibility = 'visible';\n        this.editControl.focus();\n    };\n    EditLabelUI.prototype.setPosition = function (containerElement) {\n        var x = 0;\n        var y = 0;\n        var width = 100;\n        var height = 20;\n        if (this.label) {\n            var zoom = zoom_1.getZoom(this.label);\n            var bounds = model_1.getAbsoluteClientBounds(this.label, this.domHelper, this.viewerOptions);\n            x = bounds.x + (this.label.editControlPositionCorrection ? this.label.editControlPositionCorrection.x : 0) * zoom;\n            y = bounds.y + (this.label.editControlPositionCorrection ? this.label.editControlPositionCorrection.y : 0) * zoom;\n            height = (this.label.editControlDimension ? this.label.editControlDimension.height : height) * zoom;\n            width = (this.label.editControlDimension ? this.label.editControlDimension.width : width) * zoom;\n        }\n        containerElement.style.left = x + \"px\";\n        containerElement.style.top = y + \"px\";\n        containerElement.style.width = width + \"px\";\n        this.editControl.style.width = width + \"px\";\n        containerElement.style.height = height + \"px\";\n        this.editControl.style.height = height + \"px\";\n    };\n    EditLabelUI.prototype.applyTextContents = function () {\n        if (this.label) {\n            this.editControl.value = this.label.text;\n            if (this.editControl instanceof HTMLTextAreaElement) {\n                this.editControl.selectionStart = 0;\n                this.editControl.selectionEnd = 0;\n                this.editControl.scrollTop = 0;\n                this.editControl.scrollLeft = 0;\n            }\n            else {\n                this.editControl.setSelectionRange(0, this.editControl.value.length);\n            }\n        }\n    };\n    EditLabelUI.prototype.applyFontStyling = function () {\n        if (this.label) {\n            this.labelElement = document.getElementById(this.domHelper.createUniqueDOMElementId(this.label));\n            if (this.labelElement) {\n                this.labelElement.style.visibility = 'hidden';\n                var style = window.getComputedStyle(this.labelElement);\n                this.editControl.style.font = style.font;\n                this.editControl.style.fontStyle = style.fontStyle;\n                this.editControl.style.fontFamily = style.fontFamily;\n                this.editControl.style.fontSize = scaledFont(style.fontSize, zoom_1.getZoom(this.label));\n                this.editControl.style.fontWeight = style.fontWeight;\n                this.editControl.style.lineHeight = style.lineHeight;\n            }\n        }\n    };\n    var EditLabelUI_1;\n    EditLabelUI.ID = \"editLabelUi\";\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcherProvider),\n        __metadata(\"design:type\", Function)\n    ], EditLabelUI.prototype, \"actionDispatcherProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], EditLabelUI.prototype, \"viewerOptions\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.DOMHelper),\n        __metadata(\"design:type\", dom_helper_1.DOMHelper)\n    ], EditLabelUI.prototype, \"domHelper\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IEditLabelValidator), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], EditLabelUI.prototype, \"labelValidator\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IEditLabelValidationDecorator), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], EditLabelUI.prototype, \"validationDecorator\", void 0);\n    EditLabelUI = EditLabelUI_1 = __decorate([\n        inversify_1.injectable()\n    ], EditLabelUI);\n    return EditLabelUI;\n}(ui_extension_1.AbstractUIExtension));\nexports.EditLabelUI = EditLabelUI;\nfunction hasEditableLabel(contextElementIds, root) {\n    return getEditableLabels(contextElementIds, root).length === 1;\n}\nfunction getEditableLabels(contextElementIds, root) {\n    return contextElementIds.map(function (id) { return root.index.getById(id); }).filter(model_2.isEditableLabel);\n}\nfunction scaledFont(font, zoom) {\n    return font.replace(/([0-9]+)/, function (match) {\n        return String(Number.parseInt(match, 10) * zoom);\n    });\n}\n//# sourceMappingURL=edit-label-ui.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar types_1 = require(\"../../base/types\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_1 = require(\"../select/model\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar model_2 = require(\"./model\");\nvar EditLabelAction = /** @class */ (function () {\n    function EditLabelAction(labelId) {\n        this.labelId = labelId;\n        this.kind = EditLabelAction.KIND;\n    }\n    EditLabelAction.KIND = 'EditLabel';\n    return EditLabelAction;\n}());\nexports.EditLabelAction = EditLabelAction;\nfunction isEditLabelAction(element) {\n    return action_1.isAction(element) && element.kind === EditLabelAction.KIND && 'labelId' in element;\n}\nexports.isEditLabelAction = isEditLabelAction;\nvar ApplyLabelEditAction = /** @class */ (function () {\n    function ApplyLabelEditAction(labelId, text) {\n        this.labelId = labelId;\n        this.text = text;\n        this.kind = ApplyLabelEditAction.KIND;\n    }\n    ApplyLabelEditAction.KIND = 'applyLabelEdit';\n    return ApplyLabelEditAction;\n}());\nexports.ApplyLabelEditAction = ApplyLabelEditAction;\nvar ResolvedLabelEdit = /** @class */ (function () {\n    function ResolvedLabelEdit() {\n    }\n    return ResolvedLabelEdit;\n}());\nexports.ResolvedLabelEdit = ResolvedLabelEdit;\nvar ApplyLabelEditCommand = /** @class */ (function (_super) {\n    __extends(ApplyLabelEditCommand, _super);\n    function ApplyLabelEditCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    ApplyLabelEditCommand.prototype.execute = function (context) {\n        var index = context.root.index;\n        var label = index.getById(this.action.labelId);\n        if (label && model_2.isEditableLabel(label)) {\n            this.resolvedLabelEdit = { label: label, oldLabel: label.text, newLabel: this.action.text };\n            label.text = this.action.text;\n        }\n        return context.root;\n    };\n    ApplyLabelEditCommand.prototype.undo = function (context) {\n        if (this.resolvedLabelEdit) {\n            this.resolvedLabelEdit.label.text = this.resolvedLabelEdit.oldLabel;\n        }\n        return context.root;\n    };\n    ApplyLabelEditCommand.prototype.redo = function (context) {\n        if (this.resolvedLabelEdit) {\n            this.resolvedLabelEdit.label.text = this.resolvedLabelEdit.newLabel;\n        }\n        return context.root;\n    };\n    ApplyLabelEditCommand.KIND = ApplyLabelEditAction.KIND;\n    ApplyLabelEditCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [ApplyLabelEditAction])\n    ], ApplyLabelEditCommand);\n    return ApplyLabelEditCommand;\n}(command_1.Command));\nexports.ApplyLabelEditCommand = ApplyLabelEditCommand;\nvar EditLabelMouseListener = /** @class */ (function (_super) {\n    __extends(EditLabelMouseListener, _super);\n    function EditLabelMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EditLabelMouseListener.prototype.doubleClick = function (target, event) {\n        var editableLabel = getEditableLabel(target);\n        if (editableLabel) {\n            return [new EditLabelAction(editableLabel.id)];\n        }\n        return [];\n    };\n    return EditLabelMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.EditLabelMouseListener = EditLabelMouseListener;\nvar EditLabelKeyListener = /** @class */ (function (_super) {\n    __extends(EditLabelKeyListener, _super);\n    function EditLabelKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EditLabelKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'F2')) {\n            var editableLabels = iterable_1.toArray(element.index.all()\n                .filter(function (e) { return model_1.isSelectable(e) && e.selected; })).map(getEditableLabel)\n                .filter(function (e) { return e !== undefined; });\n            if (editableLabels.length === 1) {\n                return [new EditLabelAction(editableLabels[0].id)];\n            }\n        }\n        return [];\n    };\n    return EditLabelKeyListener;\n}(key_tool_1.KeyListener));\nexports.EditLabelKeyListener = EditLabelKeyListener;\nfunction getEditableLabel(element) {\n    if (model_2.isEditableLabel(element)) {\n        return element;\n    }\n    else if (model_2.isWithEditableLabel(element) && element.editableLabel) {\n        return element.editableLabel;\n    }\n    return undefined;\n}\nexports.getEditableLabel = getEditableLabel;\n//# sourceMappingURL=edit-label.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar types_1 = require(\"../../base/types\");\nvar model_1 = require(\"../routing/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar model_2 = require(\"./model\");\nvar SwitchEditModeAction = /** @class */ (function () {\n    function SwitchEditModeAction(elementsToActivate, elementsToDeactivate) {\n        if (elementsToActivate === void 0) { elementsToActivate = []; }\n        if (elementsToDeactivate === void 0) { elementsToDeactivate = []; }\n        this.elementsToActivate = elementsToActivate;\n        this.elementsToDeactivate = elementsToDeactivate;\n        this.kind = SwitchEditModeAction.KIND;\n    }\n    SwitchEditModeAction.KIND = \"switchEditMode\";\n    return SwitchEditModeAction;\n}());\nexports.SwitchEditModeAction = SwitchEditModeAction;\nvar SwitchEditModeCommand = /** @class */ (function (_super) {\n    __extends(SwitchEditModeCommand, _super);\n    function SwitchEditModeCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.elementsToActivate = [];\n        _this.elementsToDeactivate = [];\n        _this.handlesToRemove = [];\n        return _this;\n    }\n    SwitchEditModeCommand.prototype.execute = function (context) {\n        var _this = this;\n        var index = context.root.index;\n        this.action.elementsToActivate.forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined)\n                _this.elementsToActivate.push(element);\n        });\n        this.action.elementsToDeactivate.forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined)\n                _this.elementsToDeactivate.push(element);\n            if (element instanceof model_1.SRoutingHandle && element.parent instanceof model_1.SRoutableElement) {\n                var parent_1 = element.parent;\n                if (_this.shouldRemoveHandle(element, parent_1)) {\n                    _this.handlesToRemove.push({ handle: element, parent: parent_1 });\n                    _this.elementsToDeactivate.push(parent_1);\n                    _this.elementsToActivate.push(parent_1);\n                }\n            }\n        });\n        return this.doExecute(context);\n    };\n    SwitchEditModeCommand.prototype.doExecute = function (context) {\n        var _this = this;\n        this.handlesToRemove.forEach(function (entry) {\n            entry.point = entry.parent.routingPoints.splice(entry.handle.pointIndex, 1)[0];\n        });\n        this.elementsToDeactivate.forEach(function (element) {\n            if (element instanceof model_1.SRoutableElement)\n                element.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n            else if (element instanceof model_1.SRoutingHandle) {\n                element.editMode = false;\n                if (element.danglingAnchor) {\n                    if (element.parent instanceof model_1.SRoutableElement && element.danglingAnchor.original) {\n                        if (element.parent.source === element.danglingAnchor)\n                            element.parent.sourceId = element.danglingAnchor.original.id;\n                        else if (element.parent.target === element.danglingAnchor)\n                            element.parent.targetId = element.danglingAnchor.original.id;\n                        element.danglingAnchor.parent.remove(element.danglingAnchor);\n                        element.danglingAnchor = undefined;\n                    }\n                }\n            }\n        });\n        this.elementsToActivate.forEach(function (element) {\n            if (model_2.canEditRouting(element) && element instanceof smodel_1.SParentElement) {\n                var router = _this.edgeRouterRegistry.get(element.routerKind);\n                router.createRoutingHandles(element);\n            }\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = true;\n        });\n        return context.root;\n    };\n    SwitchEditModeCommand.prototype.shouldRemoveHandle = function (handle, parent) {\n        if (handle.kind === 'junction') {\n            var route = this.edgeRouterRegistry.route(parent);\n            return route.find(function (rp) { return rp.pointIndex === handle.pointIndex; }) === undefined;\n        }\n        return false;\n    };\n    SwitchEditModeCommand.prototype.undo = function (context) {\n        var _this = this;\n        this.handlesToRemove.forEach(function (entry) {\n            if (entry.point !== undefined)\n                entry.parent.routingPoints.splice(entry.handle.pointIndex, 0, entry.point);\n        });\n        this.elementsToActivate.forEach(function (element) {\n            if (element instanceof model_1.SRoutableElement)\n                element.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = false;\n        });\n        this.elementsToDeactivate.forEach(function (element) {\n            if (model_2.canEditRouting(element)) {\n                var router = _this.edgeRouterRegistry.get(element.routerKind);\n                router.createRoutingHandles(element);\n            }\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = true;\n        });\n        return context.root;\n    };\n    SwitchEditModeCommand.prototype.redo = function (context) {\n        return this.doExecute(context);\n    };\n    SwitchEditModeCommand.KIND = SwitchEditModeAction.KIND;\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], SwitchEditModeCommand.prototype, \"edgeRouterRegistry\", void 0);\n    SwitchEditModeCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SwitchEditModeAction])\n    ], SwitchEditModeCommand);\n    return SwitchEditModeCommand;\n}(command_1.Command));\nexports.SwitchEditModeCommand = SwitchEditModeCommand;\n//# sourceMappingURL=edit-routing.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../routing/model\");\nexports.editFeature = Symbol('editFeature');\nfunction canEditRouting(element) {\n    return element instanceof model_1.SRoutableElement && element.hasFeature(exports.editFeature);\n}\nexports.canEditRouting = canEditRouting;\nexports.editLabelFeature = Symbol('editLabelFeature');\nfunction isEditableLabel(element) {\n    return 'text' in element && element.hasFeature(exports.editLabelFeature);\n}\nexports.isEditableLabel = isEditableLabel;\nexports.withEditLabelFeature = Symbol('withEditLabelFeature');\nfunction isWithEditableLabel(element) {\n    return 'editableLabel' in element && element.hasFeature(exports.withEditLabelFeature);\n}\nexports.isWithEditableLabel = isWithEditableLabel;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../../base/commands/command\");\nvar types_1 = require(\"../../base/types\");\nvar model_1 = require(\"../routing/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar ReconnectAction = /** @class */ (function () {\n    function ReconnectAction(routableId, newSourceId, newTargetId) {\n        this.routableId = routableId;\n        this.newSourceId = newSourceId;\n        this.newTargetId = newTargetId;\n        this.kind = ReconnectAction.KIND;\n    }\n    ReconnectAction.KIND = 'reconnect';\n    return ReconnectAction;\n}());\nexports.ReconnectAction = ReconnectAction;\nvar ReconnectCommand = /** @class */ (function (_super) {\n    __extends(ReconnectCommand, _super);\n    function ReconnectCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    ReconnectCommand.prototype.execute = function (context) {\n        this.doExecute(context);\n        return context.root;\n    };\n    ReconnectCommand.prototype.doExecute = function (context) {\n        var index = context.root.index;\n        var edge = index.getById(this.action.routableId);\n        if (edge instanceof model_1.SRoutableElement) {\n            var router = this.edgeRouterRegistry.get(edge.routerKind);\n            var before = router.takeSnapshot(edge);\n            router.applyReconnect(edge, this.action.newSourceId, this.action.newTargetId);\n            var after = router.takeSnapshot(edge);\n            this.memento = {\n                edge: edge,\n                before: before,\n                after: after\n            };\n        }\n    };\n    ReconnectCommand.prototype.undo = function (context) {\n        if (this.memento) {\n            var router = this.edgeRouterRegistry.get(this.memento.edge.routerKind);\n            router.applySnapshot(this.memento.edge, this.memento.before);\n        }\n        return context.root;\n    };\n    ReconnectCommand.prototype.redo = function (context) {\n        if (this.memento) {\n            var router = this.edgeRouterRegistry.get(this.memento.edge.routerKind);\n            router.applySnapshot(this.memento.edge, this.memento.after);\n        }\n        return context.root;\n    };\n    ReconnectCommand.KIND = ReconnectAction.KIND;\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], ReconnectCommand.prototype, \"edgeRouterRegistry\", void 0);\n    ReconnectCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [ReconnectAction])\n    ], ReconnectCommand);\n    return ReconnectCommand;\n}(command_1.Command));\nexports.ReconnectCommand = ReconnectCommand;\n//# sourceMappingURL=reconnect.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar expand_1 = require(\"./expand\");\nvar expandModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IButtonHandler).toConstructor(expand_1.ExpandButtonHandler);\n});\nexports.default = expandModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\n/**\n * Sent from the client to the model source to recalculate a diagram when elements\n * are collapsed/expanded by the client.\n */\nvar CollapseExpandAction = /** @class */ (function () {\n    function CollapseExpandAction(expandIds, collapseIds) {\n        this.expandIds = expandIds;\n        this.collapseIds = collapseIds;\n        this.kind = CollapseExpandAction.KIND;\n    }\n    CollapseExpandAction.KIND = 'collapseExpand';\n    return CollapseExpandAction;\n}());\nexports.CollapseExpandAction = CollapseExpandAction;\n/**\n * Programmatic action for expanding or collapsing all elements.\n */\nvar CollapseExpandAllAction = /** @class */ (function () {\n    /**\n     * If `expand` is true, all elements are expanded, othewise they are collapsed.\n     */\n    function CollapseExpandAllAction(expand) {\n        if (expand === void 0) { expand = true; }\n        this.expand = expand;\n        this.kind = CollapseExpandAllAction.KIND;\n    }\n    CollapseExpandAllAction.KIND = 'collapseExpandAll';\n    return CollapseExpandAllAction;\n}());\nexports.CollapseExpandAllAction = CollapseExpandAllAction;\nvar ExpandButtonHandler = /** @class */ (function () {\n    function ExpandButtonHandler() {\n    }\n    ExpandButtonHandler.prototype.buttonPressed = function (button) {\n        var expandable = smodel_utils_1.findParentByFeature(button, model_1.isExpandable);\n        if (expandable !== undefined) {\n            return [new CollapseExpandAction(expandable.expanded ? [] : [expandable.id], expandable.expanded ? [expandable.id] : [])];\n        }\n        else {\n            return [];\n        }\n    };\n    ExpandButtonHandler.TYPE = 'button:expand';\n    ExpandButtonHandler = __decorate([\n        inversify_1.injectable()\n    ], ExpandButtonHandler);\n    return ExpandButtonHandler;\n}());\nexports.ExpandButtonHandler = ExpandButtonHandler;\n//# sourceMappingURL=expand.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expandFeature = Symbol('expandFeature');\nfunction isExpandable(element) {\n    return element.hasFeature(exports.expandFeature) && 'expanded' in element;\n}\nexports.isExpandable = isExpandable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"../../lib/jsx\");\nvar model_1 = require(\"./model\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar inversify_1 = require(\"inversify\");\nvar ExpandButtonView = /** @class */ (function () {\n    function ExpandButtonView() {\n    }\n    ExpandButtonView.prototype.render = function (button, context) {\n        var expandable = smodel_utils_1.findParentByFeature(button, model_1.isExpandable);\n        var path = (expandable !== undefined && expandable.expanded)\n            ? 'M 1,5 L 8,12 L 15,5 Z'\n            : 'M 1,8 L 8,15 L 8,1 Z';\n        return jsx_1.svg(\"g\", { \"class-sprotty-button\": \"{true}\", \"class-enabled\": \"{button.enabled}\" },\n            jsx_1.svg(\"rect\", { x: 0, y: 0, width: 16, height: 16, opacity: 0 }),\n            jsx_1.svg(\"path\", { d: path }));\n    };\n    ExpandButtonView = __decorate([\n        inversify_1.injectable()\n    ], ExpandButtonView);\n    return ExpandButtonView;\n}());\nexports.ExpandButtonView = ExpandButtonView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar export_1 = require(\"./export\");\nvar svg_exporter_1 = require(\"./svg-exporter\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar exportSvgModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.KeyListener).to(export_1.ExportSvgKeyListener).inSingletonScope();\n    bind(types_1.TYPES.HiddenVNodePostprocessor).to(export_1.ExportSvgPostprocessor).inSingletonScope();\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, export_1.ExportSvgCommand);\n    bind(types_1.TYPES.SvgExporter).to(svg_exporter_1.SvgExporter).inSingletonScope();\n});\nexports.default = exportSvgModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../../base/commands/command\");\nvar model_1 = require(\"../select/model\");\nvar action_1 = require(\"../../base/actions/action\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_2 = require(\"./model\");\nvar svg_exporter_1 = require(\"./svg-exporter\");\nvar model_3 = require(\"../viewport/model\");\nvar model_4 = require(\"../hover/model\");\nvar types_1 = require(\"../../base/types\");\nvar ExportSvgKeyListener = /** @class */ (function (_super) {\n    __extends(ExportSvgKeyListener, _super);\n    function ExportSvgKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExportSvgKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyE', 'ctrlCmd', 'shift'))\n            return [new RequestExportSvgAction()];\n        else\n            return [];\n    };\n    ExportSvgKeyListener = __decorate([\n        inversify_1.injectable()\n    ], ExportSvgKeyListener);\n    return ExportSvgKeyListener;\n}(key_tool_1.KeyListener));\nexports.ExportSvgKeyListener = ExportSvgKeyListener;\nvar RequestExportSvgAction = /** @class */ (function () {\n    function RequestExportSvgAction(requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.requestId = requestId;\n        this.kind = RequestExportSvgAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    RequestExportSvgAction.create = function () {\n        return new RequestExportSvgAction(action_1.generateRequestId());\n    };\n    RequestExportSvgAction.KIND = 'requestExportSvg';\n    return RequestExportSvgAction;\n}());\nexports.RequestExportSvgAction = RequestExportSvgAction;\nvar ExportSvgCommand = /** @class */ (function (_super) {\n    __extends(ExportSvgCommand, _super);\n    function ExportSvgCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    ExportSvgCommand.prototype.execute = function (context) {\n        if (model_2.isExportable(context.root)) {\n            var root = context.modelFactory.createRoot(context.root);\n            if (model_2.isExportable(root)) {\n                if (model_3.isViewport(root)) {\n                    root.zoom = 1;\n                    root.scroll = { x: 0, y: 0 };\n                }\n                root.index.all().forEach(function (element) {\n                    if (model_1.isSelectable(element) && element.selected)\n                        element.selected = false;\n                    if (model_4.isHoverable(element) && element.hoverFeedback)\n                        element.hoverFeedback = false;\n                });\n                return {\n                    model: root,\n                    modelChanged: true,\n                    cause: this.action\n                };\n            }\n        }\n        return {\n            model: context.root,\n            modelChanged: false\n        };\n    };\n    ExportSvgCommand.KIND = RequestExportSvgAction.KIND;\n    ExportSvgCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [RequestExportSvgAction])\n    ], ExportSvgCommand);\n    return ExportSvgCommand;\n}(command_1.HiddenCommand));\nexports.ExportSvgCommand = ExportSvgCommand;\nvar ExportSvgPostprocessor = /** @class */ (function () {\n    function ExportSvgPostprocessor() {\n    }\n    ExportSvgPostprocessor.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot)\n            this.root = element;\n        return vnode;\n    };\n    ExportSvgPostprocessor.prototype.postUpdate = function (cause) {\n        if (this.root && cause !== undefined && cause.kind === RequestExportSvgAction.KIND) {\n            this.svgExporter.export(this.root, cause);\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.SvgExporter),\n        __metadata(\"design:type\", svg_exporter_1.SvgExporter)\n    ], ExportSvgPostprocessor.prototype, \"svgExporter\", void 0);\n    ExportSvgPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], ExportSvgPostprocessor);\n    return ExportSvgPostprocessor;\n}());\nexports.ExportSvgPostprocessor = ExportSvgPostprocessor;\n//# sourceMappingURL=export.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.exportFeature = Symbol('exportFeature');\nfunction isExportable(element) {\n    return element.hasFeature(exports.exportFeature);\n}\nexports.isExportable = isExportable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../bounds/model\");\nvar action_dispatcher_1 = require(\"../../base/actions/action-dispatcher\");\nvar types_1 = require(\"../../base/types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar inversify_1 = require(\"inversify\");\nvar ExportSvgAction = /** @class */ (function () {\n    function ExportSvgAction(svg, responseId) {\n        if (responseId === void 0) { responseId = ''; }\n        this.svg = svg;\n        this.responseId = responseId;\n        this.kind = ExportSvgAction.KIND;\n    }\n    ExportSvgAction.KIND = 'exportSvg';\n    return ExportSvgAction;\n}());\nexports.ExportSvgAction = ExportSvgAction;\nvar SvgExporter = /** @class */ (function () {\n    function SvgExporter() {\n    }\n    SvgExporter.prototype.export = function (root, request) {\n        if (typeof document !== 'undefined') {\n            var div = document.getElementById(this.options.hiddenDiv);\n            if (div !== null && div.firstElementChild && div.firstElementChild.tagName === 'svg') {\n                var svgElement = div.firstElementChild;\n                var svg = this.createSvg(svgElement, root);\n                this.actionDispatcher.dispatch(new ExportSvgAction(svg, request ? request.requestId : ''));\n            }\n        }\n    };\n    SvgExporter.prototype.createSvg = function (svgElementOrig, root) {\n        var serializer = new XMLSerializer();\n        var svgCopy = serializer.serializeToString(svgElementOrig);\n        var iframe = document.createElement('iframe');\n        document.body.appendChild(iframe);\n        if (!iframe.contentWindow)\n            throw new Error('IFrame has no contentWindow');\n        var docCopy = iframe.contentWindow.document;\n        docCopy.open();\n        docCopy.write(svgCopy);\n        docCopy.close();\n        var svgElementNew = docCopy.getElementById(svgElementOrig.id);\n        svgElementNew.removeAttribute('opacity');\n        this.copyStyles(svgElementOrig, svgElementNew, ['width', 'height', 'opacity']);\n        svgElementNew.setAttribute('version', '1.1');\n        var bounds = this.getBounds(root);\n        svgElementNew.setAttribute('viewBox', bounds.x + \" \" + bounds.y + \" \" + bounds.width + \" \" + bounds.height);\n        var svgCode = serializer.serializeToString(svgElementNew);\n        document.body.removeChild(iframe);\n        return svgCode;\n    };\n    SvgExporter.prototype.copyStyles = function (source, target, skipedProperties) {\n        var sourceStyle = getComputedStyle(source);\n        var targetStyle = getComputedStyle(target);\n        var diffStyle = '';\n        for (var i = 0; i < sourceStyle.length; i++) {\n            var key = sourceStyle[i];\n            if (skipedProperties.indexOf(key) === -1) {\n                var value = sourceStyle.getPropertyValue(key);\n                if (targetStyle.getPropertyValue(key) !== value) {\n                    diffStyle += key + \":\" + value + \";\";\n                }\n            }\n        }\n        if (diffStyle !== '')\n            target.setAttribute('style', diffStyle);\n        // IE doesn't retrun anything on source.children\n        for (var i = 0; i < source.childNodes.length; ++i) {\n            var sourceChild = source.childNodes[i];\n            var targetChild = target.childNodes[i];\n            if (sourceChild instanceof Element)\n                this.copyStyles(sourceChild, targetChild, []);\n        }\n    };\n    SvgExporter.prototype.getBounds = function (root) {\n        var allBounds = [geometry_1.EMPTY_BOUNDS];\n        root.children.forEach(function (element) {\n            if (model_1.isBoundsAware(element)) {\n                allBounds.push(element.bounds);\n            }\n        });\n        return allBounds.reduce(function (one, two) { return geometry_1.combine(one, two); });\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], SvgExporter.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", action_dispatcher_1.ActionDispatcher)\n    ], SvgExporter.prototype, \"actionDispatcher\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], SvgExporter.prototype, \"log\", void 0);\n    SvgExporter = __decorate([\n        inversify_1.injectable()\n    ], SvgExporter);\n    return SvgExporter;\n}());\nexports.SvgExporter = SvgExporter;\n//# sourceMappingURL=svg-exporter.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar fade_1 = require(\"./fade\");\nvar fadeModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IVNodePostprocessor).to(fade_1.ElementFader).inSingletonScope();\n});\nexports.default = fadeModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar model_1 = require(\"./model\");\nvar FadeAnimation = /** @class */ (function (_super) {\n    __extends(FadeAnimation, _super);\n    function FadeAnimation(model, elementFades, context, removeAfterFadeOut) {\n        if (removeAfterFadeOut === void 0) { removeAfterFadeOut = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementFades = elementFades;\n        _this.removeAfterFadeOut = removeAfterFadeOut;\n        return _this;\n    }\n    FadeAnimation.prototype.tween = function (t, context) {\n        for (var _i = 0, _a = this.elementFades; _i < _a.length; _i++) {\n            var elementFade = _a[_i];\n            var element = elementFade.element;\n            if (elementFade.type === 'in') {\n                element.opacity = t;\n            }\n            else if (elementFade.type === 'out') {\n                element.opacity = 1 - t;\n                if (t === 1 && this.removeAfterFadeOut && element instanceof smodel_1.SChildElement) {\n                    element.parent.remove(element);\n                }\n            }\n        }\n        return this.model;\n    };\n    return FadeAnimation;\n}(animation_1.Animation));\nexports.FadeAnimation = FadeAnimation;\nvar ElementFader = /** @class */ (function () {\n    function ElementFader() {\n    }\n    ElementFader.prototype.decorate = function (vnode, element) {\n        if (model_1.isFadeable(element) && element.opacity !== 1) {\n            vnode_utils_1.setAttr(vnode, 'opacity', element.opacity);\n        }\n        return vnode;\n    };\n    ElementFader.prototype.postUpdate = function () {\n    };\n    ElementFader = __decorate([\n        inversify_1.injectable()\n    ], ElementFader);\n    return ElementFader;\n}());\nexports.ElementFader = ElementFader;\n//# sourceMappingURL=fade.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fadeFeature = Symbol('fadeFeature');\nfunction isFadeable(element) {\n    return element.hasFeature(exports.fadeFeature) && element['opacity'] !== undefined;\n}\nexports.isFadeable = isFadeable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar hover_1 = require(\"./hover\");\nvar popup_position_updater_1 = require(\"./popup-position-updater\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar action_handler_1 = require(\"../../base/actions/action-handler\");\nvar center_fit_1 = require(\"../viewport/center-fit\");\nvar viewport_1 = require(\"../viewport/viewport\");\nvar move_1 = require(\"../move/move\");\nvar hoverModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.PopupVNodePostprocessor).to(popup_position_updater_1.PopupPositionUpdater).inSingletonScope();\n    bind(types_1.TYPES.MouseListener).to(hover_1.HoverMouseListener);\n    bind(types_1.TYPES.PopupMouseListener).to(hover_1.PopupHoverMouseListener);\n    bind(types_1.TYPES.KeyListener).to(hover_1.HoverKeyListener);\n    bind(types_1.TYPES.HoverState).toConstantValue({\n        mouseOverTimer: undefined,\n        mouseOutTimer: undefined,\n        popupOpen: false,\n        previousPopupElement: undefined\n    });\n    bind(hover_1.ClosePopupActionHandler).toSelf().inSingletonScope();\n    var context = { bind: bind, isBound: isBound };\n    command_registration_1.configureCommand(context, hover_1.HoverFeedbackCommand);\n    command_registration_1.configureCommand(context, hover_1.SetPopupModelCommand);\n    action_handler_1.configureActionHandler(context, hover_1.SetPopupModelCommand.KIND, hover_1.ClosePopupActionHandler);\n    action_handler_1.configureActionHandler(context, center_fit_1.FitToScreenCommand.KIND, hover_1.ClosePopupActionHandler);\n    action_handler_1.configureActionHandler(context, center_fit_1.CenterCommand.KIND, hover_1.ClosePopupActionHandler);\n    action_handler_1.configureActionHandler(context, viewport_1.SetViewportCommand.KIND, hover_1.ClosePopupActionHandler);\n    action_handler_1.configureActionHandler(context, move_1.MoveCommand.KIND, hover_1.ClosePopupActionHandler);\n});\nexports.default = hoverModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar types_1 = require(\"../../base/types\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_factory_1 = require(\"../../base/model/smodel-factory\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"./model\");\n/**\n * Triggered when the user puts the mouse pointer over an element.\n */\nvar HoverFeedbackAction = /** @class */ (function () {\n    function HoverFeedbackAction(mouseoverElement, mouseIsOver) {\n        this.mouseoverElement = mouseoverElement;\n        this.mouseIsOver = mouseIsOver;\n        this.kind = HoverFeedbackAction.KIND;\n    }\n    HoverFeedbackAction.KIND = 'hoverFeedback';\n    return HoverFeedbackAction;\n}());\nexports.HoverFeedbackAction = HoverFeedbackAction;\nvar HoverFeedbackCommand = /** @class */ (function (_super) {\n    __extends(HoverFeedbackCommand, _super);\n    function HoverFeedbackCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    HoverFeedbackCommand.prototype.execute = function (context) {\n        var model = context.root;\n        var modelElement = model.index.getById(this.action.mouseoverElement);\n        if (modelElement) {\n            if (model_2.isHoverable(modelElement)) {\n                modelElement.hoverFeedback = this.action.mouseIsOver;\n            }\n        }\n        return this.redo(context);\n    };\n    HoverFeedbackCommand.prototype.undo = function (context) {\n        return context.root;\n    };\n    HoverFeedbackCommand.prototype.redo = function (context) {\n        return context.root;\n    };\n    HoverFeedbackCommand.KIND = HoverFeedbackAction.KIND;\n    HoverFeedbackCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [HoverFeedbackAction])\n    ], HoverFeedbackCommand);\n    return HoverFeedbackCommand;\n}(command_1.SystemCommand));\nexports.HoverFeedbackCommand = HoverFeedbackCommand;\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on\n * that element. This action is sent from the client to the model source, e.g. a DiagramServer.\n * The response is a SetPopupModelAction.\n */\nvar RequestPopupModelAction = /** @class */ (function () {\n    function RequestPopupModelAction(elementId, bounds, requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.elementId = elementId;\n        this.bounds = bounds;\n        this.requestId = requestId;\n        this.kind = RequestPopupModelAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    RequestPopupModelAction.create = function (elementId, bounds) {\n        return new RequestPopupModelAction(elementId, bounds, action_1.generateRequestId());\n    };\n    RequestPopupModelAction.KIND = 'requestPopupModel';\n    return RequestPopupModelAction;\n}());\nexports.RequestPopupModelAction = RequestPopupModelAction;\n/**\n * Sent from the model source to the client to display a popup in response to a RequestPopupModelAction.\n * This action can also be used to remove any existing popup by choosing EMPTY_ROOT as root element.\n */\nvar SetPopupModelAction = /** @class */ (function () {\n    function SetPopupModelAction(newRoot, responseId) {\n        if (responseId === void 0) { responseId = ''; }\n        this.newRoot = newRoot;\n        this.responseId = responseId;\n        this.kind = SetPopupModelAction.KIND;\n    }\n    SetPopupModelAction.KIND = 'setPopupModel';\n    return SetPopupModelAction;\n}());\nexports.SetPopupModelAction = SetPopupModelAction;\nvar SetPopupModelCommand = /** @class */ (function (_super) {\n    __extends(SetPopupModelCommand, _super);\n    function SetPopupModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetPopupModelCommand.prototype.execute = function (context) {\n        this.oldRoot = context.root;\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    };\n    SetPopupModelCommand.prototype.undo = function (context) {\n        return this.oldRoot;\n    };\n    SetPopupModelCommand.prototype.redo = function (context) {\n        return this.newRoot;\n    };\n    SetPopupModelCommand.KIND = SetPopupModelAction.KIND;\n    SetPopupModelCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetPopupModelAction])\n    ], SetPopupModelCommand);\n    return SetPopupModelCommand;\n}(command_1.PopupCommand));\nexports.SetPopupModelCommand = SetPopupModelCommand;\nvar AbstractHoverMouseListener = /** @class */ (function (_super) {\n    __extends(AbstractHoverMouseListener, _super);\n    function AbstractHoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractHoverMouseListener.prototype.mouseDown = function (target, event) {\n        this.mouseIsDown = true;\n        return [];\n    };\n    AbstractHoverMouseListener.prototype.mouseUp = function (target, event) {\n        this.mouseIsDown = false;\n        return [];\n    };\n    AbstractHoverMouseListener.prototype.stopMouseOutTimer = function () {\n        if (this.state.mouseOutTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOutTimer);\n            this.state.mouseOutTimer = undefined;\n        }\n    };\n    AbstractHoverMouseListener.prototype.startMouseOutTimer = function () {\n        var _this = this;\n        this.stopMouseOutTimer();\n        return new Promise(function (resolve) {\n            _this.state.mouseOutTimer = window.setTimeout(function () {\n                _this.state.popupOpen = false;\n                _this.state.previousPopupElement = undefined;\n                resolve(new SetPopupModelAction({ type: smodel_factory_1.EMPTY_ROOT.type, id: smodel_factory_1.EMPTY_ROOT.id }));\n            }, _this.options.popupCloseDelay);\n        });\n    };\n    AbstractHoverMouseListener.prototype.stopMouseOverTimer = function () {\n        if (this.state.mouseOverTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOverTimer);\n            this.state.mouseOverTimer = undefined;\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], AbstractHoverMouseListener.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.HoverState),\n        __metadata(\"design:type\", Object)\n    ], AbstractHoverMouseListener.prototype, \"state\", void 0);\n    return AbstractHoverMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.AbstractHoverMouseListener = AbstractHoverMouseListener;\nvar HoverMouseListener = /** @class */ (function (_super) {\n    __extends(HoverMouseListener, _super);\n    function HoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HoverMouseListener.prototype.computePopupBounds = function (target, mousePosition) {\n        // Default position: below the mouse cursor\n        var offset = { x: -5, y: 20 };\n        var targetBounds = model_1.getAbsoluteBounds(target);\n        var canvasBounds = target.root.canvasBounds;\n        var boundsInWindow = geometry_1.translate(targetBounds, canvasBounds);\n        var distRight = boundsInWindow.x + boundsInWindow.width - mousePosition.x;\n        var distBottom = boundsInWindow.y + boundsInWindow.height - mousePosition.y;\n        if (distBottom <= distRight && this.allowSidePosition(target, 'below', distBottom)) {\n            // Put the popup below the target element\n            offset = { x: -5, y: Math.round(distBottom + 5) };\n        }\n        else if (distRight <= distBottom && this.allowSidePosition(target, 'right', distRight)) {\n            // Put the popup right of the target element\n            offset = { x: Math.round(distRight + 5), y: -5 };\n        }\n        var leftPopupPosition = mousePosition.x + offset.x;\n        var canvasRightBorderPosition = canvasBounds.x + canvasBounds.width;\n        if (leftPopupPosition > canvasRightBorderPosition) {\n            leftPopupPosition = canvasRightBorderPosition;\n        }\n        var topPopupPosition = mousePosition.y + offset.y;\n        var canvasBottomBorderPosition = canvasBounds.y + canvasBounds.height;\n        if (topPopupPosition > canvasBottomBorderPosition) {\n            topPopupPosition = canvasBottomBorderPosition;\n        }\n        return { x: leftPopupPosition, y: topPopupPosition, width: -1, height: -1 };\n    };\n    HoverMouseListener.prototype.allowSidePosition = function (target, side, distance) {\n        return !(target instanceof smodel_1.SModelRoot) && distance <= 150;\n    };\n    HoverMouseListener.prototype.startMouseOverTimer = function (target, event) {\n        var _this = this;\n        this.stopMouseOverTimer();\n        return new Promise(function (resolve) {\n            _this.state.mouseOverTimer = window.setTimeout(function () {\n                var popupBounds = _this.computePopupBounds(target, { x: event.pageX, y: event.pageY });\n                resolve(new RequestPopupModelAction(target.id, popupBounds));\n                _this.state.popupOpen = true;\n                _this.state.previousPopupElement = target;\n            }, _this.options.popupOpenDelay);\n        });\n    };\n    HoverMouseListener.prototype.mouseOver = function (target, event) {\n        var result = [];\n        if (!this.mouseIsDown) {\n            var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n            if (this.state.popupOpen && (popupTarget === undefined ||\n                this.state.previousPopupElement !== undefined && this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOutTimer());\n            }\n            else {\n                this.stopMouseOverTimer();\n                this.stopMouseOutTimer();\n            }\n            if (popupTarget !== undefined &&\n                (this.state.previousPopupElement === undefined || this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOverTimer(popupTarget, event));\n            }\n            if (this.lastHoverFeedbackElementId) {\n                result.push(new HoverFeedbackAction(this.lastHoverFeedbackElementId, false));\n                this.lastHoverFeedbackElementId = undefined;\n            }\n            var hoverTarget = smodel_utils_1.findParentByFeature(target, model_2.isHoverable);\n            if (hoverTarget !== undefined) {\n                result.push(new HoverFeedbackAction(hoverTarget.id, true));\n                this.lastHoverFeedbackElementId = hoverTarget.id;\n            }\n        }\n        return result;\n    };\n    HoverMouseListener.prototype.mouseOut = function (target, event) {\n        var result = [];\n        if (!this.mouseIsDown) {\n            var elementUnderMouse = document.elementFromPoint(event.x, event.y);\n            if (!this.isSprottyPopup(elementUnderMouse)) {\n                if (this.state.popupOpen) {\n                    var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n                    if (this.state.previousPopupElement !== undefined && popupTarget !== undefined\n                        && this.state.previousPopupElement.id === popupTarget.id)\n                        result.push(this.startMouseOutTimer());\n                }\n                this.stopMouseOverTimer();\n                var hoverTarget = smodel_utils_1.findParentByFeature(target, model_2.isHoverable);\n                if (hoverTarget !== undefined) {\n                    result.push(new HoverFeedbackAction(hoverTarget.id, false));\n                    this.lastHoverFeedbackElementId = undefined;\n                }\n            }\n        }\n        return result;\n    };\n    HoverMouseListener.prototype.isSprottyPopup = function (element) {\n        return element\n            ? (element.id === this.options.popupDiv\n                || (!!element.parentElement && this.isSprottyPopup(element.parentElement)))\n            : false;\n    };\n    HoverMouseListener.prototype.mouseMove = function (target, event) {\n        var result = [];\n        if (!this.mouseIsDown) {\n            if (this.state.previousPopupElement !== undefined && this.closeOnMouseMove(this.state.previousPopupElement, event)) {\n                result.push(this.startMouseOutTimer());\n            }\n            var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n            if (popupTarget !== undefined && (this.state.previousPopupElement === undefined\n                || this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOverTimer(popupTarget, event));\n            }\n        }\n        return result;\n    };\n    HoverMouseListener.prototype.closeOnMouseMove = function (target, event) {\n        return target instanceof smodel_1.SModelRoot;\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], HoverMouseListener.prototype, \"options\", void 0);\n    HoverMouseListener = __decorate([\n        inversify_1.injectable()\n    ], HoverMouseListener);\n    return HoverMouseListener;\n}(AbstractHoverMouseListener));\nexports.HoverMouseListener = HoverMouseListener;\nvar PopupHoverMouseListener = /** @class */ (function (_super) {\n    __extends(PopupHoverMouseListener, _super);\n    function PopupHoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PopupHoverMouseListener.prototype.mouseOut = function (target, event) {\n        return [this.startMouseOutTimer()];\n    };\n    PopupHoverMouseListener.prototype.mouseOver = function (target, event) {\n        this.stopMouseOutTimer();\n        this.stopMouseOverTimer();\n        return [];\n    };\n    PopupHoverMouseListener = __decorate([\n        inversify_1.injectable()\n    ], PopupHoverMouseListener);\n    return PopupHoverMouseListener;\n}(AbstractHoverMouseListener));\nexports.PopupHoverMouseListener = PopupHoverMouseListener;\nvar HoverKeyListener = /** @class */ (function (_super) {\n    __extends(HoverKeyListener, _super);\n    function HoverKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HoverKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            return [new SetPopupModelAction({ type: smodel_factory_1.EMPTY_ROOT.type, id: smodel_factory_1.EMPTY_ROOT.id })];\n        }\n        return [];\n    };\n    return HoverKeyListener;\n}(key_tool_1.KeyListener));\nexports.HoverKeyListener = HoverKeyListener;\nvar ClosePopupActionHandler = /** @class */ (function () {\n    function ClosePopupActionHandler() {\n        this.popupOpen = false;\n    }\n    ClosePopupActionHandler.prototype.handle = function (action) {\n        if (action.kind === SetPopupModelCommand.KIND) {\n            this.popupOpen = action.newRoot.type !== smodel_factory_1.EMPTY_ROOT.type;\n        }\n        else if (this.popupOpen) {\n            return new SetPopupModelAction({ id: smodel_factory_1.EMPTY_ROOT.id, type: smodel_factory_1.EMPTY_ROOT.type });\n        }\n    };\n    ClosePopupActionHandler = __decorate([\n        inversify_1.injectable()\n    ], ClosePopupActionHandler);\n    return ClosePopupActionHandler;\n}());\nexports.ClosePopupActionHandler = ClosePopupActionHandler;\n//# sourceMappingURL=hover.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hoverFeedbackFeature = Symbol('hoverFeedbackFeature');\nfunction isHoverable(element) {\n    return element.hasFeature(exports.hoverFeedbackFeature);\n}\nexports.isHoverable = isHoverable;\nexports.popupFeature = Symbol('popupFeature');\nfunction hasPopupFeature(element) {\n    return element.hasFeature(exports.popupFeature);\n}\nexports.hasPopupFeature = hasPopupFeature;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar PopupPositionUpdater = /** @class */ (function () {\n    function PopupPositionUpdater() {\n    }\n    PopupPositionUpdater.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    PopupPositionUpdater.prototype.postUpdate = function () {\n        var popupDiv = document.getElementById(this.options.popupDiv);\n        if (popupDiv !== null && typeof window !== 'undefined') {\n            var boundingClientRect = popupDiv.getBoundingClientRect();\n            if (window.innerHeight < boundingClientRect.height + boundingClientRect.top) {\n                popupDiv.style.top = (window.pageYOffset + window.innerHeight - boundingClientRect.height - 5) + 'px';\n            }\n            if (window.innerWidth < boundingClientRect.left + boundingClientRect.width) {\n                popupDiv.style.left = (window.pageXOffset + window.innerWidth - boundingClientRect.width - 5) + 'px';\n            }\n            if (boundingClientRect.left < 0) {\n                popupDiv.style.left = '0px';\n            }\n            if (boundingClientRect.top < 0) {\n                popupDiv.style.top = '0px';\n            }\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], PopupPositionUpdater.prototype, \"options\", void 0);\n    PopupPositionUpdater = __decorate([\n        inversify_1.injectable()\n    ], PopupPositionUpdater);\n    return PopupPositionUpdater;\n}());\nexports.PopupPositionUpdater = PopupPositionUpdater;\n//# sourceMappingURL=popup-position-updater.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar move_1 = require(\"./move\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar moveModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.MouseListener).to(move_1.MoveMouseListener);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, move_1.MoveCommand);\n    bind(move_1.LocationPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(move_1.LocationPostprocessor);\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(move_1.LocationPostprocessor);\n});\nexports.default = moveModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.moveFeature = Symbol('moveFeature');\nfunction isLocateable(element) {\n    return element['position'] !== undefined;\n}\nexports.isLocateable = isLocateable;\nfunction isMoveable(element) {\n    return element.hasFeature(exports.moveFeature) && isLocateable(element);\n}\nexports.isMoveable = isMoveable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar types_1 = require(\"../../base/types\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar sgraph_1 = require(\"../../graph/sgraph\");\nvar commit_model_1 = require(\"../../model-source/commit-model\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"../bounds/model\");\nvar create_on_drag_1 = require(\"../edit/create-on-drag\");\nvar delete_1 = require(\"../edit/delete\");\nvar edit_routing_1 = require(\"../edit/edit-routing\");\nvar reconnect_1 = require(\"../edit/reconnect\");\nvar model_2 = require(\"../routing/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar model_3 = require(\"../edge-layout/model\");\nvar model_4 = require(\"../select/model\");\nvar select_1 = require(\"../select/select\");\nvar model_5 = require(\"../viewport/model\");\nvar model_6 = require(\"./model\");\nvar MoveAction = /** @class */ (function () {\n    function MoveAction(moves, animate, finished) {\n        if (animate === void 0) { animate = true; }\n        if (finished === void 0) { finished = false; }\n        this.moves = moves;\n        this.animate = animate;\n        this.finished = finished;\n        this.kind = MoveAction.KIND;\n    }\n    MoveAction.KIND = 'move';\n    return MoveAction;\n}());\nexports.MoveAction = MoveAction;\nvar MoveCommand = /** @class */ (function (_super) {\n    __extends(MoveCommand, _super);\n    function MoveCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.resolvedMoves = new Map;\n        _this.edgeMementi = [];\n        return _this;\n    }\n    MoveCommand_1 = MoveCommand;\n    MoveCommand.prototype.execute = function (context) {\n        var _this = this;\n        var index = context.root.index;\n        var edge2handleMoves = new Map();\n        var attachedEdgeShifts = new Map();\n        this.action.moves.forEach(function (move) {\n            var element = index.getById(move.elementId);\n            if (element instanceof model_2.SRoutingHandle && _this.edgeRouterRegistry) {\n                var edge = element.parent;\n                if (edge instanceof model_2.SRoutableElement) {\n                    var resolvedMove = _this.resolveHandleMove(element, edge, move);\n                    if (resolvedMove) {\n                        var movesByEdge = edge2handleMoves.get(edge);\n                        if (!movesByEdge) {\n                            movesByEdge = [];\n                            edge2handleMoves.set(edge, movesByEdge);\n                        }\n                        movesByEdge.push(resolvedMove);\n                    }\n                }\n            }\n            else if (element && model_6.isLocateable(element)) {\n                var resolvedMove_1 = _this.resolveElementMove(element, move);\n                if (resolvedMove_1) {\n                    _this.resolvedMoves.set(resolvedMove_1.element.id, resolvedMove_1);\n                    if (_this.edgeRouterRegistry) {\n                        index.getAttachedElements(element).forEach(function (edge) {\n                            if (edge instanceof model_2.SRoutableElement) {\n                                var existingDelta = attachedEdgeShifts.get(edge);\n                                var newDelta = geometry_1.subtract(resolvedMove_1.toPosition, resolvedMove_1.fromPosition);\n                                var delta = (existingDelta)\n                                    ? geometry_1.linear(existingDelta, newDelta, 0.5)\n                                    : newDelta;\n                                attachedEdgeShifts.set(edge, delta);\n                            }\n                        });\n                    }\n                }\n            }\n        });\n        this.doMove(edge2handleMoves, attachedEdgeShifts);\n        if (this.action.animate) {\n            this.undoMove();\n            return new animation_1.CompoundAnimation(context.root, context, [\n                new MoveAnimation(context.root, this.resolvedMoves, context, false),\n                new MorphEdgesAnimation(context.root, this.edgeMementi, context, false)\n            ]).start();\n        }\n        return context.root;\n    };\n    MoveCommand.prototype.resolveHandleMove = function (handle, edge, move) {\n        var fromPosition = move.fromPosition;\n        if (!fromPosition) {\n            var router = this.edgeRouterRegistry.get(edge.routerKind);\n            fromPosition = router.getHandlePosition(edge, router.route(edge), handle);\n        }\n        if (fromPosition)\n            return {\n                handle: handle,\n                fromPosition: fromPosition,\n                toPosition: move.toPosition\n            };\n        return undefined;\n    };\n    MoveCommand.prototype.resolveElementMove = function (element, move) {\n        var fromPosition = move.fromPosition\n            || { x: element.position.x, y: element.position.y };\n        return {\n            element: element,\n            fromPosition: fromPosition,\n            toPosition: move.toPosition\n        };\n    };\n    MoveCommand.prototype.doMove = function (edge2move, attachedEdgeShifts) {\n        var _this = this;\n        this.resolvedMoves.forEach(function (res) {\n            res.element.position = res.toPosition;\n        });\n        // reset edges to state before\n        edge2move.forEach(function (moves, edge) {\n            var router = _this.edgeRouterRegistry.get(edge.routerKind);\n            var before = router.takeSnapshot(edge);\n            router.applyHandleMoves(edge, moves);\n            var after = router.takeSnapshot(edge);\n            _this.edgeMementi.push({ edge: edge, before: before, after: after });\n        });\n        attachedEdgeShifts.forEach(function (delta, edge) {\n            if (!edge2move.get(edge)) {\n                var router = _this.edgeRouterRegistry.get(edge.routerKind);\n                var before = router.takeSnapshot(edge);\n                if (edge.source\n                    && edge.target\n                    && _this.resolvedMoves.get(edge.source.id)\n                    && _this.resolvedMoves.get(edge.target.id)) {\n                    // move the entire edge when both source and target are moved\n                    edge.routingPoints = edge.routingPoints.map(function (rp) { return geometry_1.add(rp, delta); });\n                }\n                else {\n                    // add/remove RPs according to the new source/target positions\n                    var updateHandles = model_4.isSelectable(edge) && edge.selected;\n                    router.cleanupRoutingPoints(edge, edge.routingPoints, updateHandles, _this.action.finished);\n                }\n                var after = router.takeSnapshot(edge);\n                _this.edgeMementi.push({ edge: edge, before: before, after: after });\n            }\n        });\n    };\n    MoveCommand.prototype.undoMove = function () {\n        var _this = this;\n        this.resolvedMoves.forEach(function (res) {\n            res.element.position = res.fromPosition;\n        });\n        this.edgeMementi.forEach(function (memento) {\n            var router = _this.edgeRouterRegistry.get(memento.edge.routerKind);\n            router.applySnapshot(memento.edge, memento.before);\n        });\n    };\n    MoveCommand.prototype.undo = function (context) {\n        return new animation_1.CompoundAnimation(context.root, context, [\n            new MoveAnimation(context.root, this.resolvedMoves, context, true),\n            new MorphEdgesAnimation(context.root, this.edgeMementi, context, true)\n        ]).start();\n    };\n    MoveCommand.prototype.redo = function (context) {\n        return new animation_1.CompoundAnimation(context.root, context, [\n            new MoveAnimation(context.root, this.resolvedMoves, context, false),\n            new MorphEdgesAnimation(context.root, this.edgeMementi, context, false)\n        ]).start();\n    };\n    MoveCommand.prototype.merge = function (other, context) {\n        var _this = this;\n        if (!this.action.animate && other instanceof MoveCommand_1) {\n            other.resolvedMoves.forEach(function (otherMove, otherElementId) {\n                var existingMove = _this.resolvedMoves.get(otherElementId);\n                if (existingMove) {\n                    existingMove.toPosition = otherMove.toPosition;\n                }\n                else {\n                    _this.resolvedMoves.set(otherElementId, otherMove);\n                }\n            });\n            other.edgeMementi.forEach(function (otherMemento) {\n                var existingMemento = _this.edgeMementi.find(function (edgeMemento) { return edgeMemento.edge.id === otherMemento.edge.id; });\n                if (existingMemento) {\n                    existingMemento.after = otherMemento.after;\n                }\n                else {\n                    _this.edgeMementi.push(otherMemento);\n                }\n            });\n            return true;\n        }\n        else if (other instanceof reconnect_1.ReconnectCommand) {\n            var otherMemento_1 = other.memento;\n            if (otherMemento_1) {\n                var existingMemento = this.edgeMementi.find(function (edgeMemento) { return edgeMemento.edge.id === otherMemento_1.edge.id; });\n                if (existingMemento) {\n                    existingMemento.after = otherMemento_1.after;\n                }\n                else {\n                    this.edgeMementi.push(otherMemento_1);\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    var MoveCommand_1;\n    MoveCommand.KIND = MoveAction.KIND;\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry), inversify_1.optional(),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], MoveCommand.prototype, \"edgeRouterRegistry\", void 0);\n    MoveCommand = MoveCommand_1 = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [MoveAction])\n    ], MoveCommand);\n    return MoveCommand;\n}(command_1.MergeableCommand));\nexports.MoveCommand = MoveCommand;\nvar MoveAnimation = /** @class */ (function (_super) {\n    __extends(MoveAnimation, _super);\n    function MoveAnimation(model, elementMoves, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementMoves = elementMoves;\n        _this.reverse = reverse;\n        return _this;\n    }\n    MoveAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.elementMoves.forEach(function (elementMove) {\n            if (_this.reverse) {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.toPosition.x + t * elementMove.fromPosition.x,\n                    y: (1 - t) * elementMove.toPosition.y + t * elementMove.fromPosition.y\n                };\n            }\n            else {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.fromPosition.x + t * elementMove.toPosition.x,\n                    y: (1 - t) * elementMove.fromPosition.y + t * elementMove.toPosition.y\n                };\n            }\n        });\n        return this.model;\n    };\n    return MoveAnimation;\n}(animation_1.Animation));\nexports.MoveAnimation = MoveAnimation;\nvar MorphEdgesAnimation = /** @class */ (function (_super) {\n    __extends(MorphEdgesAnimation, _super);\n    function MorphEdgesAnimation(model, originalMementi, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.reverse = reverse;\n        _this.expanded = [];\n        originalMementi.forEach(function (edgeMemento) {\n            var start = _this.reverse ? edgeMemento.after : edgeMemento.before;\n            var end = _this.reverse ? edgeMemento.before : edgeMemento.after;\n            var startRoute = start.routedPoints;\n            var endRoute = end.routedPoints;\n            var maxRoutingPoints = Math.max(startRoute.length, endRoute.length);\n            _this.expanded.push({\n                startExpandedRoute: _this.growToSize(startRoute, maxRoutingPoints),\n                endExpandedRoute: _this.growToSize(endRoute, maxRoutingPoints),\n                memento: edgeMemento\n            });\n        });\n        return _this;\n    }\n    MorphEdgesAnimation.prototype.midPoint = function (edgeMemento) {\n        var edge = edgeMemento.edge;\n        var source = edgeMemento.edge.source;\n        var target = edgeMemento.edge.target;\n        return geometry_1.linear(smodel_utils_1.translatePoint(geometry_1.center(source.bounds), source.parent, edge.parent), smodel_utils_1.translatePoint(geometry_1.center(target.bounds), target.parent, edge.parent), 0.5);\n    };\n    MorphEdgesAnimation.prototype.start = function () {\n        this.expanded.forEach(function (morph) {\n            morph.memento.edge.removeAll(function (e) { return e instanceof model_2.SRoutingHandle; });\n        });\n        return _super.prototype.start.call(this);\n    };\n    MorphEdgesAnimation.prototype.tween = function (t) {\n        var _this = this;\n        if (t === 1) {\n            this.expanded.forEach(function (morph) {\n                var memento = morph.memento;\n                if (_this.reverse)\n                    memento.before.router.applySnapshot(memento.edge, memento.before);\n                else\n                    memento.after.router.applySnapshot(memento.edge, memento.after);\n            });\n        }\n        else {\n            this.expanded.forEach(function (morph) {\n                var newRoutingPoints = [];\n                // ignore source and target anchor\n                for (var i = 1; i < morph.startExpandedRoute.length - 1; ++i)\n                    newRoutingPoints.push(geometry_1.linear(morph.startExpandedRoute[i], morph.endExpandedRoute[i], t));\n                var closestSnapshot = t < 0.5 ? morph.memento.before : morph.memento.after;\n                var newSnapshot = __assign(__assign({}, closestSnapshot), { routingPoints: newRoutingPoints, routingHandles: [] });\n                closestSnapshot.router.applySnapshot(morph.memento.edge, newSnapshot);\n            });\n        }\n        return this.model;\n    };\n    MorphEdgesAnimation.prototype.growToSize = function (route, targetSize) {\n        var diff = targetSize - route.length;\n        if (diff <= 0)\n            return route;\n        var result = [];\n        result.push(route[0]);\n        var deltaDiff = 1 / (diff + 1);\n        var deltaSmaller = 1 / (route.length - 1);\n        var nextInsertion = 1;\n        for (var i = 1; i < route.length; ++i) {\n            var pos = deltaSmaller * i;\n            var insertions = 0;\n            while (pos > (nextInsertion + insertions) * deltaDiff)\n                ++insertions;\n            nextInsertion += insertions;\n            for (var j = 0; j < insertions; ++j) {\n                var p = geometry_1.linear(route[i - 1], route[i], (j + 1) / (insertions + 1));\n                result.push(p);\n            }\n            result.push(route[i]);\n        }\n        return result;\n    };\n    return MorphEdgesAnimation;\n}(animation_1.Animation));\nexports.MorphEdgesAnimation = MorphEdgesAnimation;\nvar MoveMouseListener = /** @class */ (function (_super) {\n    __extends(MoveMouseListener, _super);\n    function MoveMouseListener() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hasDragged = false;\n        _this.elementId2startPos = new Map();\n        return _this;\n    }\n    MoveMouseListener.prototype.mouseDown = function (target, event) {\n        var result = [];\n        if (event.button === 0) {\n            var moveable = smodel_utils_1.findParentByFeature(target, model_6.isMoveable);\n            var isRoutingHandle = target instanceof model_2.SRoutingHandle;\n            if (moveable !== undefined || isRoutingHandle || create_on_drag_1.isCreatingOnDrag(target)) {\n                this.startDragPosition = { x: event.pageX, y: event.pageY };\n            }\n            else {\n                this.startDragPosition = undefined;\n            }\n            this.hasDragged = false;\n            if (create_on_drag_1.isCreatingOnDrag(target)) {\n                result.push(new select_1.SelectAllAction(false));\n                result.push(target.createAction(model_2.edgeInProgressID));\n                result.push(new select_1.SelectAction([model_2.edgeInProgressID], []));\n                result.push(new edit_routing_1.SwitchEditModeAction([model_2.edgeInProgressID], []));\n                result.push(new select_1.SelectAction([model_2.edgeInProgressTargetHandleID], []));\n                result.push(new edit_routing_1.SwitchEditModeAction([model_2.edgeInProgressTargetHandleID], []));\n            }\n            else if (isRoutingHandle) {\n                result.push(new edit_routing_1.SwitchEditModeAction([target.id], []));\n            }\n        }\n        return result;\n    };\n    MoveMouseListener.prototype.mouseMove = function (target, event) {\n        var result = [];\n        if (event.buttons === 0)\n            this.mouseUp(target, event);\n        else if (this.startDragPosition) {\n            if (this.elementId2startPos.size === 0) {\n                this.collectStartPositions(target.root);\n            }\n            this.hasDragged = true;\n            var moveAction = this.getElementMoves(target, event, false);\n            if (moveAction)\n                result.push(moveAction);\n        }\n        return result;\n    };\n    MoveMouseListener.prototype.collectStartPositions = function (root) {\n        var _this = this;\n        var selectedElements = new Set(root.index.all()\n            .filter(function (element) { return model_4.isSelectable(element) && element.selected; }));\n        selectedElements.forEach(function (element) {\n            if (!_this.isChildOfSelected(selectedElements, element)) {\n                if (model_6.isMoveable(element))\n                    _this.elementId2startPos.set(element.id, element.position);\n                else if (element instanceof model_2.SRoutingHandle) {\n                    var position = _this.getHandlePosition(element);\n                    if (position)\n                        _this.elementId2startPos.set(element.id, position);\n                }\n            }\n        });\n    };\n    MoveMouseListener.prototype.isChildOfSelected = function (selectedElements, element) {\n        while (element instanceof smodel_1.SChildElement) {\n            element = element.parent;\n            if (model_6.isMoveable(element) && selectedElements.has(element)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    MoveMouseListener.prototype.getElementMoves = function (target, event, isFinished) {\n        var _this = this;\n        if (!this.startDragPosition)\n            return undefined;\n        var elementMoves = [];\n        var viewport = smodel_utils_1.findParentByFeature(target, model_5.isViewport);\n        var zoom = viewport ? viewport.zoom : 1;\n        var delta = {\n            x: (event.pageX - this.startDragPosition.x) / zoom,\n            y: (event.pageY - this.startDragPosition.y) / zoom\n        };\n        this.elementId2startPos.forEach(function (startPosition, elementId) {\n            var element = target.root.index.getById(elementId);\n            if (element) {\n                var toPosition = _this.snap({\n                    x: startPosition.x + delta.x,\n                    y: startPosition.y + delta.y\n                }, element, !event.shiftKey);\n                if (model_6.isMoveable(element)) {\n                    elementMoves.push({\n                        elementId: element.id,\n                        fromPosition: {\n                            x: element.position.x,\n                            y: element.position.y\n                        },\n                        toPosition: toPosition\n                    });\n                }\n                else if (element instanceof model_2.SRoutingHandle) {\n                    var point = _this.getHandlePosition(element);\n                    if (point !== undefined) {\n                        elementMoves.push({\n                            elementId: element.id,\n                            fromPosition: point,\n                            toPosition: toPosition\n                        });\n                    }\n                }\n            }\n        });\n        if (elementMoves.length > 0)\n            return new MoveAction(elementMoves, false, isFinished);\n        else\n            return undefined;\n    };\n    MoveMouseListener.prototype.snap = function (position, element, isSnap) {\n        if (isSnap && this.snapper)\n            return this.snapper.snap(position, element);\n        else\n            return position;\n    };\n    MoveMouseListener.prototype.getHandlePosition = function (handle) {\n        if (this.edgeRouterRegistry) {\n            var parent_1 = handle.parent;\n            if (!(parent_1 instanceof model_2.SRoutableElement))\n                return undefined;\n            var router = this.edgeRouterRegistry.get(parent_1.routerKind);\n            var route = router.route(parent_1);\n            return router.getHandlePosition(parent_1, route, handle);\n        }\n        return undefined;\n    };\n    MoveMouseListener.prototype.mouseEnter = function (target, event) {\n        if (target instanceof smodel_1.SModelRoot && event.buttons === 0 && !this.startDragPosition)\n            this.mouseUp(target, event);\n        return [];\n    };\n    MoveMouseListener.prototype.mouseUp = function (target, event) {\n        var _this = this;\n        var result = [];\n        var hasReconnected = false;\n        if (this.startDragPosition) {\n            var moveAction = this.getElementMoves(target, event, true);\n            if (moveAction)\n                result.push(moveAction);\n            target.root.index.all()\n                .forEach(function (element) {\n                if (element instanceof model_2.SRoutingHandle) {\n                    var parent_2 = element.parent;\n                    if (parent_2 instanceof model_2.SRoutableElement && element.danglingAnchor) {\n                        var handlePos = _this.getHandlePosition(element);\n                        if (handlePos) {\n                            var handlePosAbs = smodel_utils_1.translatePoint(handlePos, element.parent, element.root);\n                            var newEnd = model_1.findChildrenAtPosition(target.root, handlePosAbs)\n                                .find(function (e) { return model_2.isConnectable(e) && e.canConnect(parent_2, element.kind); });\n                            if (newEnd && _this.hasDragged) {\n                                result.push(new reconnect_1.ReconnectAction(element.parent.id, element.kind === 'source' ? newEnd.id : parent_2.sourceId, element.kind === 'target' ? newEnd.id : parent_2.targetId));\n                                hasReconnected = true;\n                            }\n                        }\n                    }\n                    if (element.editMode)\n                        result.push(new edit_routing_1.SwitchEditModeAction([], [element.id]));\n                }\n            });\n        }\n        if (!hasReconnected) {\n            var edgeInProgress = target.root.index.getById(model_2.edgeInProgressID);\n            if (edgeInProgress instanceof smodel_1.SChildElement) {\n                var deleteIds_1 = [];\n                deleteIds_1.push(model_2.edgeInProgressID);\n                edgeInProgress.children.forEach(function (c) {\n                    if (c instanceof model_2.SRoutingHandle && c.danglingAnchor)\n                        deleteIds_1.push(c.danglingAnchor.id);\n                });\n                result.push(new delete_1.DeleteElementAction(deleteIds_1));\n            }\n        }\n        if (this.hasDragged)\n            result.push(new commit_model_1.CommitModelAction());\n        this.hasDragged = false;\n        this.startDragPosition = undefined;\n        this.elementId2startPos.clear();\n        return result;\n    };\n    MoveMouseListener.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry), inversify_1.optional(),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], MoveMouseListener.prototype, \"edgeRouterRegistry\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ISnapper), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], MoveMouseListener.prototype, \"snapper\", void 0);\n    return MoveMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.MoveMouseListener = MoveMouseListener;\nvar LocationPostprocessor = /** @class */ (function () {\n    function LocationPostprocessor() {\n    }\n    LocationPostprocessor.prototype.decorate = function (vnode, element) {\n        if (model_3.isEdgeLayoutable(element) && element.parent instanceof sgraph_1.SEdge) {\n            // The element is handled by EdgeLayoutDecorator\n            return vnode;\n        }\n        var translate = '';\n        if (model_6.isLocateable(element) && element instanceof smodel_1.SChildElement && element.parent !== undefined) {\n            var pos = element.position;\n            if (pos.x !== 0 || pos.y !== 0) {\n                translate = 'translate(' + pos.x + ', ' + pos.y + ')';\n            }\n        }\n        if (model_1.isAlignable(element)) {\n            var ali = element.alignment;\n            if (ali.x !== 0 || ali.y !== 0) {\n                if (translate.length > 0) {\n                    translate += ' ';\n                }\n                translate += 'translate(' + ali.x + ', ' + ali.y + ')';\n            }\n        }\n        if (translate.length > 0) {\n            vnode_utils_1.setAttr(vnode, 'transform', translate);\n        }\n        return vnode;\n    };\n    LocationPostprocessor.prototype.postUpdate = function () {\n    };\n    LocationPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], LocationPostprocessor);\n    return LocationPostprocessor;\n}());\nexports.LocationPostprocessor = LocationPostprocessor;\n//# sourceMappingURL=move.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar model_1 = require(\"../bounds/model\");\n/**\n * A simple snapper that snaps the center of nodes and routing points to a grid.\n */\nvar CenterGridSnapper = /** @class */ (function () {\n    function CenterGridSnapper() {\n    }\n    Object.defineProperty(CenterGridSnapper.prototype, \"gridX\", {\n        get: function () {\n            return 10;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CenterGridSnapper.prototype, \"gridY\", {\n        get: function () {\n            return 10;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CenterGridSnapper.prototype.snap = function (position, element) {\n        if (element && model_1.isBoundsAware(element))\n            return {\n                x: Math.round((position.x + 0.5 * element.bounds.width) / this.gridX) * this.gridX - 0.5 * element.bounds.width,\n                y: Math.round((position.y + 0.5 * element.bounds.height) / this.gridY) * this.gridY - 0.5 * element.bounds.height\n            };\n        else\n            return {\n                x: Math.round(position.x / this.gridX) * this.gridX,\n                y: Math.round(position.y / this.gridY) * this.gridY\n            };\n    };\n    CenterGridSnapper = __decorate([\n        inversify_1.injectable()\n    ], CenterGridSnapper);\n    return CenterGridSnapper;\n}());\nexports.CenterGridSnapper = CenterGridSnapper;\n//# sourceMappingURL=snap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nameFeature = Symbol('nameableFeature');\nfunction isNameable(element) {\n    return element.hasFeature(exports.nameFeature);\n}\nexports.isNameable = isNameable;\nfunction name(element) {\n    if (isNameable(element)) {\n        return element.name;\n    }\n    else {\n        return undefined;\n    }\n}\nexports.name = name;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar open_1 = require(\"./open\");\nvar openModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.MouseListener).to(open_1.OpenMouseListener);\n});\nexports.default = openModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.openFeature = Symbol('openFeature');\nfunction isOpenable(element) {\n    return element.hasFeature(exports.openFeature);\n}\nexports.isOpenable = isOpenable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"./model\");\nvar OpenAction = /** @class */ (function () {\n    function OpenAction(elementId) {\n        this.elementId = elementId;\n        this.kind = OpenAction.KIND;\n    }\n    OpenAction.KIND = 'open';\n    return OpenAction;\n}());\nexports.OpenAction = OpenAction;\nvar OpenMouseListener = /** @class */ (function (_super) {\n    __extends(OpenMouseListener, _super);\n    function OpenMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OpenMouseListener.prototype.doubleClick = function (target, event) {\n        var openableTarget = smodel_utils_1.findParentByFeature(target, model_1.isOpenable);\n        if (openableTarget !== undefined) {\n            return [new OpenAction(openableTarget.id)];\n        }\n        return [];\n    };\n    return OpenMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.OpenMouseListener = OpenMouseListener;\n//# sourceMappingURL=open.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar object_1 = require(\"../../utils/object\");\nvar model_1 = require(\"../bounds/model\");\nfunction isProjectable(arg) {\n    return object_1.hasOwnProperty(arg, 'projectionCssClasses');\n}\nexports.isProjectable = isProjectable;\n/**\n * Gather all projections of elements contained in the given parent element.\n */\nfunction getProjections(parent) {\n    var result;\n    for (var _i = 0, _a = parent.children; _i < _a.length; _i++) {\n        var child = _a[_i];\n        if (isProjectable(child) && model_1.isBoundsAware(child) && child.projectionCssClasses.length > 0) {\n            var projection = {\n                elementId: child.id,\n                projectedBounds: getProjectedBounds(child),\n                cssClasses: child.projectionCssClasses\n            };\n            if (result) {\n                result.push(projection);\n            }\n            else {\n                result = [projection];\n            }\n        }\n        if (child.children.length > 0) {\n            var childProj = getProjections(child);\n            if (childProj) {\n                if (result) {\n                    result.push.apply(result, childProj);\n                }\n                else {\n                    result = childProj;\n                }\n            }\n        }\n    }\n    return result;\n}\nexports.getProjections = getProjections;\n/**\n * Compute the projected bounds of the given model element, that is the absolute position in the diagram.\n */\nfunction getProjectedBounds(model) {\n    var bounds = model.bounds;\n    var parent = model.parent;\n    while (parent instanceof smodel_1.SChildElement) {\n        bounds = parent.localToParent(bounds);\n        parent = parent.parent;\n    }\n    return bounds;\n}\nexports.getProjectedBounds = getProjectedBounds;\nvar MAX_COORD = 1000000000;\n/**\n * Determine the total bounds of a model; this takes the viewport into consideration\n * so it can be shown in the projections.\n */\nfunction getModelBounds(model) {\n    var minX = MAX_COORD;\n    var minY = MAX_COORD;\n    var maxX = -MAX_COORD;\n    var maxY = -MAX_COORD;\n    var bounds = model_1.isBoundsAware(model) ? model.bounds : undefined;\n    if (bounds && geometry_1.isValidDimension(bounds)) {\n        // Get the bounds directly from the model if it returns a valid size\n        minX = bounds.x;\n        minY = bounds.y;\n        maxX = minX + bounds.width;\n        maxY = minY + bounds.height;\n    }\n    else {\n        // Determine the min. / max coordinates of top-level model elements\n        // Note that this approach is slower, so provide valid bounds to speed up the process.\n        for (var _i = 0, _a = model.children; _i < _a.length; _i++) {\n            var element = _a[_i];\n            if (model_1.isBoundsAware(element)) {\n                var b = element.bounds;\n                minX = Math.min(minX, b.x);\n                minY = Math.min(minY, b.y);\n                maxX = Math.max(maxX, b.x + b.width);\n                maxY = Math.max(maxY, b.y + b.height);\n            }\n        }\n    }\n    // Enlarge the bounds by the current viewport to ensure it always fits into the projection\n    minX = Math.min(minX, model.scroll.x);\n    minY = Math.min(minY, model.scroll.y);\n    maxX = Math.max(maxX, model.scroll.x + model.canvasBounds.width / model.zoom);\n    maxY = Math.max(maxY, model.scroll.y + model.canvasBounds.height / model.zoom);\n    if (minX < maxX && minY < maxY) {\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY\n        };\n    }\n    return undefined;\n}\nexports.getModelBounds = getModelBounds;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx html */\nvar jsx_1 = require(\"../../lib/jsx\");\nvar inversify_1 = require(\"inversify\");\nvar snabbdom_1 = require(\"snabbdom\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar model_1 = require(\"./model\");\n/**\n * Special viewport root view that renders horizontal and vertical projection bars for quick navigation.\n */\nvar ProjectedViewportView = /** @class */ (function () {\n    function ProjectedViewportView() {\n    }\n    ProjectedViewportView.prototype.render = function (model, context, args) {\n        return jsx_1.html(\"div\", { \"class-sprotty-root\": true },\n            this.renderSvg(model, context, args),\n            this.renderProjections(model, context, args));\n    };\n    ProjectedViewportView.prototype.renderSvg = function (model, context, args) {\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        var ns = 'http://www.w3.org/2000/svg';\n        return snabbdom_1.h('svg', { ns: ns }, snabbdom_1.h('g', { ns: ns, attrs: { transform: transform } }, context.renderChildren(model)));\n    };\n    ProjectedViewportView.prototype.renderProjections = function (model, context, args) {\n        var _a;\n        if (model.zoom <= 0) {\n            return [];\n        }\n        var modelBounds = model_1.getModelBounds(model);\n        if (!modelBounds) {\n            return [];\n        }\n        var projections = (_a = model_1.getProjections(model)) !== null && _a !== void 0 ? _a : [];\n        return [\n            this.renderProjectionBar(projections, model, modelBounds, 'vertical'),\n            this.renderProjectionBar(projections, model, modelBounds, 'horizontal')\n        ];\n    };\n    ProjectedViewportView.prototype.renderProjectionBar = function (projections, model, modelBounds, orientation) {\n        var _this = this;\n        var params = { modelBounds: modelBounds, orientation: orientation };\n        // NOTE: Here we assume that the projection bars have the same size as the diagram canvas, i.e. they are drawn as overlay above the canvas.\n        params.factor = orientation === 'horizontal' ? model.canvasBounds.width / modelBounds.width : model.canvasBounds.height / modelBounds.height;\n        params.zoomedFactor = params.factor / model.zoom;\n        return jsx_1.html(\"div\", { \"class-sprotty-projection-bar\": true, \"class-horizontal\": orientation === 'horizontal', \"class-vertical\": orientation === 'vertical' },\n            this.renderViewport(model, params),\n            projections.map(function (p) { return _this.renderProjection(p, model, params); }));\n    };\n    ProjectedViewportView.prototype.renderViewport = function (model, params) {\n        var canvasSize, viewportPos;\n        if (params.orientation === 'horizontal') {\n            canvasSize = model.canvasBounds.width;\n            viewportPos = (model.scroll.x - params.modelBounds.x) * params.factor;\n        }\n        else {\n            canvasSize = model.canvasBounds.height;\n            viewportPos = (model.scroll.y - params.modelBounds.y) * params.factor;\n        }\n        var viewportSize = canvasSize * params.zoomedFactor;\n        if (viewportPos < 0) {\n            viewportSize += viewportPos;\n            viewportPos = 0;\n        }\n        else if (viewportPos > canvasSize) {\n            viewportPos = canvasSize;\n        }\n        if (viewportSize < 0) {\n            viewportSize = 0;\n        }\n        else if (viewportPos + viewportSize > canvasSize) {\n            viewportSize = canvasSize - viewportPos;\n        }\n        var style = params.orientation === 'horizontal' ? {\n            left: viewportPos + \"px\",\n            width: viewportSize + \"px\"\n        } : {\n            top: viewportPos + \"px\",\n            height: viewportSize + \"px\"\n        };\n        return jsx_1.html(\"div\", { \"class-sprotty-viewport\": true, style: style });\n    };\n    ProjectedViewportView.prototype.renderProjection = function (projection, model, params) {\n        var canvasSize, projPos, projSize;\n        if (params.orientation === 'horizontal') {\n            canvasSize = model.canvasBounds.width;\n            projPos = (projection.projectedBounds.x - params.modelBounds.x) * params.factor;\n            projSize = projection.projectedBounds.width * params.factor;\n        }\n        else {\n            canvasSize = model.canvasBounds.height;\n            projPos = (projection.projectedBounds.y - params.modelBounds.y) * params.factor;\n            projSize = projection.projectedBounds.height * params.factor;\n        }\n        if (projPos < 0) {\n            projSize += projPos;\n            projPos = 0;\n        }\n        else if (projPos > canvasSize) {\n            projPos = canvasSize;\n        }\n        if (projSize < 0) {\n            projSize = 0;\n        }\n        else if (projPos + projSize > canvasSize) {\n            projSize = canvasSize - projPos;\n        }\n        var style = params.orientation === 'horizontal' ? {\n            left: projPos + \"px\",\n            width: projSize + \"px\"\n        } : {\n            top: projPos + \"px\",\n            height: projSize + \"px\"\n        };\n        var result = jsx_1.html(\"div\", { id: params.orientation + \"-projection:\" + projection.elementId, \"class-sprotty-projection\": true, style: style });\n        projection.cssClasses.forEach(function (cl) { return vnode_utils_1.setClass(result, cl, true); });\n        return result;\n    };\n    ProjectedViewportView = __decorate([\n        inversify_1.injectable()\n    ], ProjectedViewportView);\n    return ProjectedViewportView;\n}());\nexports.ProjectedViewportView = ProjectedViewportView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar registry_1 = require(\"../../utils/registry\");\nexports.DIAMOND_ANCHOR_KIND = 'diamond';\nexports.ELLIPTIC_ANCHOR_KIND = 'elliptic';\nexports.RECTANGULAR_ANCHOR_KIND = 'rectangular';\nvar AnchorComputerRegistry = /** @class */ (function (_super) {\n    __extends(AnchorComputerRegistry, _super);\n    function AnchorComputerRegistry(anchors) {\n        var _this = _super.call(this) || this;\n        anchors.forEach(function (anchor) { return _this.register(anchor.kind, anchor); });\n        return _this;\n    }\n    Object.defineProperty(AnchorComputerRegistry.prototype, \"defaultAnchorKind\", {\n        get: function () {\n            return exports.RECTANGULAR_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AnchorComputerRegistry.prototype.get = function (routerKind, anchorKind) {\n        return _super.prototype.get.call(this, routerKind + \":\" + (anchorKind || this.defaultAnchorKind));\n    };\n    AnchorComputerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IAnchorComputer)),\n        __metadata(\"design:paramtypes\", [Array])\n    ], AnchorComputerRegistry);\n    return AnchorComputerRegistry;\n}(registry_1.InstanceRegistry));\nexports.AnchorComputerRegistry = AnchorComputerRegistry;\n//# sourceMappingURL=anchor.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar manhattan_edge_router_1 = require(\"./manhattan-edge-router\");\nvar polyline_edge_router_1 = require(\"./polyline-edge-router\");\nvar manhattan_anchors_1 = require(\"./manhattan-anchors\");\nvar polyline_anchors_1 = require(\"./polyline-anchors\");\nvar anchor_1 = require(\"./anchor\");\nvar routing_1 = require(\"./routing\");\nvar routingModule = new inversify_1.ContainerModule(function (bind) {\n    bind(routing_1.EdgeRouterRegistry).toSelf().inSingletonScope();\n    bind(anchor_1.AnchorComputerRegistry).toSelf().inSingletonScope();\n    bind(manhattan_edge_router_1.ManhattanEdgeRouter).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IEdgeRouter).toService(manhattan_edge_router_1.ManhattanEdgeRouter);\n    bind(types_1.TYPES.IAnchorComputer).to(manhattan_anchors_1.ManhattanEllipticAnchor).inSingletonScope();\n    bind(types_1.TYPES.IAnchorComputer).to(manhattan_anchors_1.ManhattanRectangularAnchor).inSingletonScope();\n    bind(types_1.TYPES.IAnchorComputer).to(manhattan_anchors_1.ManhattanDiamondAnchor).inSingletonScope();\n    bind(polyline_edge_router_1.PolylineEdgeRouter).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IEdgeRouter).toService(polyline_edge_router_1.PolylineEdgeRouter);\n    bind(types_1.TYPES.IAnchorComputer).to(polyline_anchors_1.EllipseAnchor);\n    bind(types_1.TYPES.IAnchorComputer).to(polyline_anchors_1.RectangleAnchor);\n    bind(types_1.TYPES.IAnchorComputer).to(polyline_anchors_1.DiamondAnchor);\n});\nexports.default = routingModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"../routing/model\");\nvar anchor_1 = require(\"./anchor\");\nvar model_2 = require(\"./model\");\nvar Side;\n(function (Side) {\n    Side[Side[\"RIGHT\"] = 0] = \"RIGHT\";\n    Side[Side[\"LEFT\"] = 1] = \"LEFT\";\n    Side[Side[\"TOP\"] = 2] = \"TOP\";\n    Side[Side[\"BOTTOM\"] = 3] = \"BOTTOM\";\n})(Side = exports.Side || (exports.Side = {}));\nvar DefaultAnchors = /** @class */ (function () {\n    function DefaultAnchors(element, edgeParent, kind) {\n        this.element = element;\n        this.kind = kind;\n        var bounds = element.bounds;\n        this.bounds = smodel_utils_1.translateBounds(bounds, element.parent, edgeParent);\n        this.left = { x: this.bounds.x, y: this.bounds.y + 0.5 * this.bounds.height, kind: kind };\n        this.right = { x: this.bounds.x + this.bounds.width, y: this.bounds.y + 0.5 * this.bounds.height, kind: kind };\n        this.top = { x: this.bounds.x + 0.5 * this.bounds.width, y: this.bounds.y, kind: kind };\n        this.bottom = { x: this.bounds.x + 0.5 * this.bounds.width, y: this.bounds.y + this.bounds.height, kind: kind };\n    }\n    DefaultAnchors.prototype.get = function (side) {\n        return this[Side[side].toLowerCase()];\n    };\n    DefaultAnchors.prototype.getNearestSide = function (point) {\n        var leftDistance = geometry_1.euclideanDistance(point, this.left);\n        var rightDistance = geometry_1.euclideanDistance(point, this.right);\n        var topDistance = geometry_1.euclideanDistance(point, this.top);\n        var bottomDistance = geometry_1.euclideanDistance(point, this.bottom);\n        var currentNearestSide = Side.LEFT;\n        var currentMinDist = leftDistance;\n        if (rightDistance < currentMinDist) {\n            currentMinDist = rightDistance;\n            currentNearestSide = Side.RIGHT;\n        }\n        if (topDistance < currentMinDist) {\n            currentMinDist = topDistance;\n            currentNearestSide = Side.TOP;\n        }\n        if (bottomDistance < currentMinDist) {\n            currentMinDist = bottomDistance;\n            currentNearestSide = Side.BOTTOM;\n        }\n        return currentNearestSide;\n    };\n    return DefaultAnchors;\n}());\nexports.DefaultAnchors = DefaultAnchors;\nvar LinearEdgeRouter = /** @class */ (function () {\n    function LinearEdgeRouter() {\n    }\n    LinearEdgeRouter.prototype.pointAt = function (edge, t) {\n        var segments = this.calculateSegment(edge, t);\n        if (!segments)\n            return undefined;\n        var segmentStart = segments.segmentStart, segmentEnd = segments.segmentEnd, lambda = segments.lambda;\n        return geometry_1.linear(segmentStart, segmentEnd, lambda);\n    };\n    LinearEdgeRouter.prototype.derivativeAt = function (edge, t) {\n        var segments = this.calculateSegment(edge, t);\n        if (!segments)\n            return undefined;\n        var segmentStart = segments.segmentStart, segmentEnd = segments.segmentEnd;\n        return {\n            x: segmentEnd.x - segmentStart.x,\n            y: segmentEnd.y - segmentStart.y\n        };\n    };\n    LinearEdgeRouter.prototype.calculateSegment = function (edge, t) {\n        if (t < 0 || t > 1)\n            return undefined;\n        var routedPoints = this.route(edge);\n        if (routedPoints.length < 2)\n            return undefined;\n        var segmentLengths = [];\n        var totalLength = 0;\n        for (var i = 0; i < routedPoints.length - 1; ++i) {\n            segmentLengths[i] = geometry_1.euclideanDistance(routedPoints[i], routedPoints[i + 1]);\n            totalLength += segmentLengths[i];\n        }\n        var currentLenght = 0;\n        var tAsLenght = t * totalLength;\n        for (var i = 0; i < routedPoints.length - 1; ++i) {\n            var newLength = currentLenght + segmentLengths[i];\n            // avoid division by (almost) zero\n            if (segmentLengths[i] > 1E-8) {\n                if (newLength >= tAsLenght) {\n                    var lambda = Math.max(0, (tAsLenght - currentLenght)) / segmentLengths[i];\n                    return {\n                        segmentStart: routedPoints[i],\n                        segmentEnd: routedPoints[i + 1],\n                        lambda: lambda\n                    };\n                }\n            }\n            currentLenght = newLength;\n        }\n        return {\n            segmentEnd: routedPoints.pop(),\n            segmentStart: routedPoints.pop(),\n            lambda: 1\n        };\n    };\n    LinearEdgeRouter.prototype.addHandle = function (edge, kind, type, routingPointIndex) {\n        var handle = new model_1.SRoutingHandle();\n        handle.kind = kind;\n        handle.pointIndex = routingPointIndex;\n        handle.type = type;\n        if (kind === 'target' && edge.id === model_1.edgeInProgressID)\n            handle.id = model_1.edgeInProgressTargetHandleID;\n        edge.add(handle);\n        return handle;\n    };\n    LinearEdgeRouter.prototype.getHandlePosition = function (edge, route, handle) {\n        switch (handle.kind) {\n            case 'source':\n                if (edge.source instanceof model_1.SDanglingAnchor)\n                    return edge.source.position;\n                else\n                    return route[0];\n            case 'target':\n                if (edge.target instanceof model_1.SDanglingAnchor)\n                    return edge.target.position;\n                else {\n                    return route[route.length - 1];\n                }\n            default:\n                var position = this.getInnerHandlePosition(edge, route, handle);\n                if (position !== undefined)\n                    return position;\n                if (handle.pointIndex >= 0 && handle.pointIndex < edge.routingPoints.length)\n                    return edge.routingPoints[handle.pointIndex];\n        }\n        return undefined;\n    };\n    LinearEdgeRouter.prototype.findRouteSegment = function (edge, route, handleIndex) {\n        var getIndex = function (rp) {\n            if (rp.pointIndex !== undefined)\n                return rp.pointIndex;\n            else if (rp.kind === 'target')\n                return edge.routingPoints.length;\n            else\n                return -2;\n        };\n        var start, end;\n        for (var _i = 0, route_1 = route; _i < route_1.length; _i++) {\n            var rp = route_1[_i];\n            var i = getIndex(rp);\n            if (i <= handleIndex && (start === undefined || i > getIndex(start)))\n                start = rp;\n            if (i > handleIndex && (end === undefined || i < getIndex(end)))\n                end = rp;\n        }\n        return { start: start, end: end };\n    };\n    LinearEdgeRouter.prototype.getTranslatedAnchor = function (connectable, refPoint, refContainer, edge, anchorCorrection) {\n        if (anchorCorrection === void 0) { anchorCorrection = 0; }\n        var translatedRefPoint = smodel_utils_1.translatePoint(refPoint, refContainer, connectable.parent);\n        var anchorComputer = this.getAnchorComputer(connectable);\n        var strokeCorrection = 0.5 * connectable.strokeWidth;\n        var anchor = anchorComputer.getAnchor(connectable, translatedRefPoint, anchorCorrection + strokeCorrection);\n        return smodel_utils_1.translatePoint(anchor, connectable.parent, edge.parent);\n    };\n    LinearEdgeRouter.prototype.getAnchorComputer = function (connectable) {\n        return this.anchorRegistry.get(this.kind, connectable.anchorKind);\n    };\n    LinearEdgeRouter.prototype.applyHandleMoves = function (edge, moves) {\n        var remainingMoves = moves.slice();\n        moves.forEach(function (move) {\n            var handle = move.handle;\n            if (handle.kind === 'source' && !(edge.source instanceof model_1.SDanglingAnchor)) {\n                // detach source\n                var anchor = new model_1.SDanglingAnchor();\n                anchor.id = edge.id + '_dangling-source';\n                anchor.original = edge.source;\n                anchor.position = move.toPosition;\n                handle.root.add(anchor);\n                handle.danglingAnchor = anchor;\n                edge.sourceId = anchor.id;\n            }\n            else if (handle.kind === 'target' && !(edge.target instanceof model_1.SDanglingAnchor)) {\n                // detach target\n                var anchor = new model_1.SDanglingAnchor();\n                anchor.id = edge.id + '_dangling-target';\n                anchor.original = edge.target;\n                anchor.position = move.toPosition;\n                handle.root.add(anchor);\n                handle.danglingAnchor = anchor;\n                edge.targetId = anchor.id;\n            }\n            if (handle.danglingAnchor) {\n                handle.danglingAnchor.position = move.toPosition;\n                remainingMoves.splice(remainingMoves.indexOf(move), 1);\n            }\n        });\n        if (remainingMoves.length > 0)\n            this.applyInnerHandleMoves(edge, remainingMoves);\n        this.cleanupRoutingPoints(edge, edge.routingPoints, true, true);\n    };\n    LinearEdgeRouter.prototype.cleanupRoutingPoints = function (edge, routingPoints, updateHandles, addRoutingPoints) {\n        var sourceAnchors = new DefaultAnchors(edge.source, edge.parent, \"source\");\n        var targetAnchors = new DefaultAnchors(edge.target, edge.parent, \"target\");\n        this.resetRoutingPointsOnReconnect(edge, routingPoints, updateHandles, sourceAnchors, targetAnchors);\n    };\n    LinearEdgeRouter.prototype.resetRoutingPointsOnReconnect = function (edge, routingPoints, updateHandles, sourceAnchors, targetAnchors) {\n        if (routingPoints.length === 0 || edge.source instanceof model_1.SDanglingAnchor || edge.target instanceof model_1.SDanglingAnchor) {\n            var options = this.getOptions(edge);\n            var corners = this.calculateDefaultCorners(edge, sourceAnchors, targetAnchors, options);\n            routingPoints.splice.apply(routingPoints, __spreadArrays([0, routingPoints.length], corners));\n            if (updateHandles) {\n                var maxPointIndex_1 = -2;\n                edge.children.forEach(function (child) {\n                    if (child instanceof model_1.SRoutingHandle) {\n                        if (child.kind === 'target')\n                            child.pointIndex = routingPoints.length;\n                        else if (child.kind === 'line' && child.pointIndex >= routingPoints.length)\n                            edge.remove(child);\n                        else\n                            maxPointIndex_1 = Math.max(child.pointIndex, maxPointIndex_1);\n                    }\n                });\n                for (var i = maxPointIndex_1; i < routingPoints.length - 1; ++i)\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', i);\n            }\n            return true;\n        }\n        return false;\n    };\n    LinearEdgeRouter.prototype.applyReconnect = function (edge, newSourceId, newTargetId) {\n        var hasChanged = false;\n        if (newSourceId) {\n            var newSource = edge.root.index.getById(newSourceId);\n            if (newSource instanceof model_2.SConnectableElement) {\n                edge.sourceId = newSource.id;\n                hasChanged = true;\n            }\n        }\n        if (newTargetId) {\n            var newTarget = edge.root.index.getById(newTargetId);\n            if (newTarget instanceof model_2.SConnectableElement) {\n                edge.targetId = newTarget.id;\n                hasChanged = true;\n            }\n        }\n        if (hasChanged) {\n            // reset attached elements in index\n            edge.index.remove(edge);\n            edge.index.add(edge);\n            if (this.getSelfEdgeIndex(edge) > -1) {\n                edge.routingPoints = [];\n                this.cleanupRoutingPoints(edge, edge.routingPoints, true, true);\n            }\n        }\n    };\n    LinearEdgeRouter.prototype.takeSnapshot = function (edge) {\n        return {\n            routingPoints: edge.routingPoints.slice(),\n            routingHandles: edge.children\n                .filter(function (child) { return child instanceof model_1.SRoutingHandle; })\n                .map(function (child) { return child; }),\n            routedPoints: this.route(edge),\n            router: this,\n            source: edge.source,\n            target: edge.target\n        };\n    };\n    LinearEdgeRouter.prototype.applySnapshot = function (edge, snapshot) {\n        edge.routingPoints = snapshot.routingPoints;\n        edge.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n        edge.routerKind = snapshot.router.kind;\n        snapshot.routingHandles.forEach(function (handle) { return edge.add(handle); });\n        if (snapshot.source)\n            edge.sourceId = snapshot.source.id;\n        if (snapshot.target)\n            edge.targetId = snapshot.target.id;\n        // update index\n        edge.root.index.remove(edge);\n        edge.root.index.add(edge);\n    };\n    LinearEdgeRouter.prototype.calculateDefaultCorners = function (edge, sourceAnchors, targetAnchors, options) {\n        var selfEdgeIndex = this.getSelfEdgeIndex(edge);\n        if (selfEdgeIndex >= 0) {\n            var standardDist = options.standardDistance;\n            var delta = options.selfEdgeOffset * Math.min(sourceAnchors.bounds.width, sourceAnchors.bounds.height);\n            switch (selfEdgeIndex % 4) {\n                case 0:\n                    return [\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.RIGHT).y + delta },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.BOTTOM).x + delta, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                    ];\n                case 1:\n                    return [\n                        { x: sourceAnchors.get(Side.BOTTOM).x - delta, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.LEFT).y + delta },\n                    ];\n                case 2:\n                    return [\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.LEFT).y - delta },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.TOP).x - delta, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                    ];\n                case 3:\n                    return [\n                        { x: sourceAnchors.get(Side.TOP).x + delta, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.RIGHT).y - delta },\n                    ];\n            }\n        }\n        return [];\n    };\n    LinearEdgeRouter.prototype.getSelfEdgeIndex = function (edge) {\n        if (!edge.source || edge.source !== edge.target)\n            return -1;\n        return edge.source.outgoingEdges\n            .filter(function (otherEdge) { return otherEdge.target === edge.source; })\n            .indexOf(edge);\n    };\n    __decorate([\n        inversify_1.inject(anchor_1.AnchorComputerRegistry),\n        __metadata(\"design:type\", anchor_1.AnchorComputerRegistry)\n    ], LinearEdgeRouter.prototype, \"anchorRegistry\", void 0);\n    LinearEdgeRouter = __decorate([\n        inversify_1.injectable()\n    ], LinearEdgeRouter);\n    return LinearEdgeRouter;\n}());\nexports.LinearEdgeRouter = LinearEdgeRouter;\n//# sourceMappingURL=linear-edge-router.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar anchor_1 = require(\"./anchor\");\nvar manhattan_edge_router_1 = require(\"./manhattan-edge-router\");\nvar inversify_1 = require(\"inversify\");\nvar ManhattanRectangularAnchor = /** @class */ (function () {\n    function ManhattanRectangularAnchor() {\n    }\n    ManhattanRectangularAnchor_1 = ManhattanRectangularAnchor;\n    Object.defineProperty(ManhattanRectangularAnchor.prototype, \"kind\", {\n        get: function () {\n            return ManhattanRectangularAnchor_1.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ManhattanRectangularAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        var b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        var bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        if (refPoint.x >= bounds.x && bounds.x + bounds.width >= refPoint.x) {\n            if (refPoint.y < bounds.y + 0.5 * bounds.height)\n                return { x: refPoint.x, y: bounds.y };\n            else\n                return { x: refPoint.x, y: bounds.y + bounds.height };\n        }\n        if (refPoint.y >= bounds.y && bounds.y + bounds.height >= refPoint.y) {\n            if (refPoint.x < bounds.x + 0.5 * bounds.width)\n                return { x: bounds.x, y: refPoint.y };\n            else\n                return { x: bounds.x + bounds.width, y: refPoint.y };\n        }\n        return geometry_1.center(bounds);\n    };\n    var ManhattanRectangularAnchor_1;\n    ManhattanRectangularAnchor.KIND = manhattan_edge_router_1.ManhattanEdgeRouter.KIND + ':' + anchor_1.RECTANGULAR_ANCHOR_KIND;\n    ManhattanRectangularAnchor = ManhattanRectangularAnchor_1 = __decorate([\n        inversify_1.injectable()\n    ], ManhattanRectangularAnchor);\n    return ManhattanRectangularAnchor;\n}());\nexports.ManhattanRectangularAnchor = ManhattanRectangularAnchor;\nvar ManhattanDiamondAnchor = /** @class */ (function () {\n    function ManhattanDiamondAnchor() {\n    }\n    ManhattanDiamondAnchor_1 = ManhattanDiamondAnchor;\n    Object.defineProperty(ManhattanDiamondAnchor.prototype, \"kind\", {\n        get: function () {\n            return ManhattanDiamondAnchor_1.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ManhattanDiamondAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        var bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        var c = geometry_1.center(bounds);\n        var outline = undefined;\n        var refLine = undefined;\n        if (refPoint.x >= bounds.x && refPoint.x <= bounds.x + bounds.width) {\n            if (bounds.x + 0.5 * bounds.width >= refPoint.x) {\n                refLine = new geometry_1.PointToPointLine(refPoint, { x: refPoint.x, y: c.y });\n                if (refPoint.y < c.y)\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            }\n            else {\n                refLine = new geometry_1.PointToPointLine(refPoint, { x: refPoint.x, y: c.y });\n                if (refPoint.y < c.y)\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            }\n        }\n        else if (refPoint.y >= bounds.y && refPoint.y <= bounds.y + bounds.height) {\n            if (bounds.y + 0.5 * bounds.height >= refPoint.y) {\n                refLine = new geometry_1.PointToPointLine(refPoint, { x: c.x, y: refPoint.y });\n                if (refPoint.x < c.x)\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y });\n            }\n            else {\n                refLine = new geometry_1.PointToPointLine(refPoint, { x: c.x, y: refPoint.y });\n                if (refPoint.x < c.x)\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n                else\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            }\n        }\n        if (!!refLine && !!outline)\n            return geometry_1.intersection(outline, refLine);\n        else\n            return c;\n    };\n    var ManhattanDiamondAnchor_1;\n    ManhattanDiamondAnchor.KIND = manhattan_edge_router_1.ManhattanEdgeRouter.KIND + ':' + anchor_1.DIAMOND_ANCHOR_KIND;\n    ManhattanDiamondAnchor = ManhattanDiamondAnchor_1 = __decorate([\n        inversify_1.injectable()\n    ], ManhattanDiamondAnchor);\n    return ManhattanDiamondAnchor;\n}());\nexports.ManhattanDiamondAnchor = ManhattanDiamondAnchor;\nvar ManhattanEllipticAnchor = /** @class */ (function () {\n    function ManhattanEllipticAnchor() {\n    }\n    ManhattanEllipticAnchor_1 = ManhattanEllipticAnchor;\n    Object.defineProperty(ManhattanEllipticAnchor.prototype, \"kind\", {\n        get: function () {\n            return ManhattanEllipticAnchor_1.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ManhattanEllipticAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        var bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        var c = geometry_1.center(bounds);\n        var refRelative = geometry_1.subtract(refPoint, c);\n        var x = c.x;\n        var y = c.y;\n        if (refPoint.x >= bounds.x && bounds.x + bounds.width >= refPoint.x) {\n            x += refRelative.x;\n            var dy = 0.5 * bounds.height * Math.sqrt(1 - (refRelative.x * refRelative.x) / (0.25 * bounds.width * bounds.width));\n            if (refRelative.y < 0)\n                y -= dy;\n            else\n                y += dy;\n        }\n        else if (refPoint.y >= bounds.y && bounds.y + bounds.height >= refPoint.y) {\n            y += refRelative.y;\n            var dx = 0.5 * bounds.width * Math.sqrt(1 - (refRelative.y * refRelative.y) / (0.25 * bounds.height * bounds.height));\n            if (refRelative.x < 0)\n                x -= dx;\n            else\n                x += dx;\n        }\n        return { x: x, y: y };\n    };\n    var ManhattanEllipticAnchor_1;\n    ManhattanEllipticAnchor.KIND = manhattan_edge_router_1.ManhattanEdgeRouter.KIND + ':' + anchor_1.ELLIPTIC_ANCHOR_KIND;\n    ManhattanEllipticAnchor = ManhattanEllipticAnchor_1 = __decorate([\n        inversify_1.injectable()\n    ], ManhattanEllipticAnchor);\n    return ManhattanEllipticAnchor;\n}());\nexports.ManhattanEllipticAnchor = ManhattanEllipticAnchor;\n//# sourceMappingURL=manhattan-anchors.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar linear_edge_router_1 = require(\"./linear-edge-router\");\nvar model_1 = require(\"./model\");\nvar ManhattanEdgeRouter = /** @class */ (function (_super) {\n    __extends(ManhattanEdgeRouter, _super);\n    function ManhattanEdgeRouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(ManhattanEdgeRouter.prototype, \"kind\", {\n        get: function () {\n            return ManhattanEdgeRouter.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ManhattanEdgeRouter.prototype.getOptions = function (edge) {\n        return {\n            standardDistance: 20,\n            minimalPointDistance: 3,\n            selfEdgeOffset: 0.25\n        };\n    };\n    ManhattanEdgeRouter.prototype.route = function (edge) {\n        if (!edge.source || !edge.target)\n            return [];\n        var routedCorners = this.createRoutedCorners(edge);\n        var sourceRefPoint = routedCorners[0]\n            || smodel_utils_1.translatePoint(geometry_1.center(edge.target.bounds), edge.target.parent, edge.parent);\n        var sourceAnchor = this.getTranslatedAnchor(edge.source, sourceRefPoint, edge.parent, edge, edge.sourceAnchorCorrection);\n        var targetRefPoint = routedCorners[routedCorners.length - 1]\n            || smodel_utils_1.translatePoint(geometry_1.center(edge.source.bounds), edge.source.parent, edge.parent);\n        var targetAnchor = this.getTranslatedAnchor(edge.target, targetRefPoint, edge.parent, edge, edge.targetAnchorCorrection);\n        if (!sourceAnchor || !targetAnchor)\n            return [];\n        var routedPoints = [];\n        routedPoints.push(__assign({ kind: 'source' }, sourceAnchor));\n        routedCorners.forEach(function (corner) { return routedPoints.push(corner); });\n        routedPoints.push(__assign({ kind: 'target' }, targetAnchor));\n        return routedPoints;\n    };\n    ManhattanEdgeRouter.prototype.createRoutedCorners = function (edge) {\n        var sourceAnchors = new linear_edge_router_1.DefaultAnchors(edge.source, edge.parent, 'source');\n        var targetAnchors = new linear_edge_router_1.DefaultAnchors(edge.target, edge.parent, 'target');\n        if (edge.routingPoints.length > 0) {\n            var routingPointsCopy = edge.routingPoints.slice();\n            this.cleanupRoutingPoints(edge, routingPointsCopy, false, true);\n            if (routingPointsCopy.length > 0)\n                return routingPointsCopy.map(function (routingPoint, index) {\n                    return __assign({ kind: 'linear', pointIndex: index }, routingPoint);\n                });\n        }\n        var options = this.getOptions(edge);\n        var corners = this.calculateDefaultCorners(edge, sourceAnchors, targetAnchors, options);\n        return corners.map(function (corner) {\n            return __assign({ kind: 'linear' }, corner);\n        });\n    };\n    ManhattanEdgeRouter.prototype.createRoutingHandles = function (edge) {\n        var routedPoints = this.route(edge);\n        this.commitRoute(edge, routedPoints);\n        if (routedPoints.length > 0) {\n            this.addHandle(edge, 'source', 'routing-point', -2);\n            for (var i = 0; i < routedPoints.length - 1; ++i)\n                this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', i - 1);\n            this.addHandle(edge, 'target', 'routing-point', routedPoints.length - 2);\n        }\n    };\n    ManhattanEdgeRouter.prototype.getInnerHandlePosition = function (edge, route, handle) {\n        var fraction = this.getFraction(handle.kind);\n        if (fraction !== undefined) {\n            var _a = this.findRouteSegment(edge, route, handle.pointIndex), start = _a.start, end = _a.end;\n            if (start !== undefined && end !== undefined)\n                return geometry_1.linear(start, end, fraction);\n        }\n        return undefined;\n    };\n    ManhattanEdgeRouter.prototype.getFraction = function (kind) {\n        switch (kind) {\n            case 'manhattan-50%': return 0.5;\n            default: return undefined;\n        }\n    };\n    ManhattanEdgeRouter.prototype.commitRoute = function (edge, routedPoints) {\n        var newRoutingPoints = [];\n        for (var i = 1; i < routedPoints.length - 1; ++i)\n            newRoutingPoints.push({ x: routedPoints[i].x, y: routedPoints[i].y });\n        edge.routingPoints = newRoutingPoints;\n    };\n    ManhattanEdgeRouter.prototype.applyInnerHandleMoves = function (edge, moves) {\n        var _this = this;\n        var route = this.route(edge);\n        var routingPoints = edge.routingPoints;\n        var minimalPointDistance = this.getOptions(edge).minimalPointDistance;\n        moves.forEach(function (move) {\n            var handle = move.handle;\n            var index = handle.pointIndex;\n            var correctedX = _this.correctX(routingPoints, index, move.toPosition.x, minimalPointDistance);\n            var correctedY = _this.correctY(routingPoints, index, move.toPosition.y, minimalPointDistance);\n            switch (handle.kind) {\n                case 'manhattan-50%':\n                    if (index < 0) {\n                        if (geometry_1.almostEquals(route[0].x, route[1].x))\n                            _this.alignX(routingPoints, 0, correctedX);\n                        else\n                            _this.alignY(routingPoints, 0, correctedY);\n                    }\n                    else if (index < routingPoints.length - 1) {\n                        if (geometry_1.almostEquals(routingPoints[index].x, routingPoints[index + 1].x)) {\n                            _this.alignX(routingPoints, index, correctedX);\n                            _this.alignX(routingPoints, index + 1, correctedX);\n                        }\n                        else {\n                            _this.alignY(routingPoints, index, correctedY);\n                            _this.alignY(routingPoints, index + 1, correctedY);\n                        }\n                    }\n                    else {\n                        if (geometry_1.almostEquals(route[route.length - 2].x, route[route.length - 1].x))\n                            _this.alignX(routingPoints, routingPoints.length - 1, correctedX);\n                        else\n                            _this.alignY(routingPoints, routingPoints.length - 1, correctedY);\n                    }\n                    break;\n            }\n        });\n    };\n    ManhattanEdgeRouter.prototype.correctX = function (routingPoints, index, x, minimalPointDistance) {\n        if (index > 0 && Math.abs(x - routingPoints[index - 1].x) < minimalPointDistance)\n            return routingPoints[index - 1].x;\n        else if (index < routingPoints.length - 2 && Math.abs(x - routingPoints[index + 2].x) < minimalPointDistance)\n            return routingPoints[index + 2].x;\n        else\n            return x;\n    };\n    ManhattanEdgeRouter.prototype.alignX = function (routingPoints, index, x) {\n        if (index >= 0 && index < routingPoints.length)\n            routingPoints[index] = {\n                x: x,\n                y: routingPoints[index].y\n            };\n    };\n    ManhattanEdgeRouter.prototype.correctY = function (routingPoints, index, y, minimalPointDistance) {\n        if (index > 0 && Math.abs(y - routingPoints[index - 1].y) < minimalPointDistance)\n            return routingPoints[index - 1].y;\n        else if (index < routingPoints.length - 2 && Math.abs(y - routingPoints[index + 2].y) < minimalPointDistance)\n            return routingPoints[index + 2].y;\n        else\n            return y;\n    };\n    ManhattanEdgeRouter.prototype.alignY = function (routingPoints, index, y) {\n        if (index >= 0 && index < routingPoints.length)\n            routingPoints[index] = {\n                x: routingPoints[index].x,\n                y: y\n            };\n    };\n    ManhattanEdgeRouter.prototype.cleanupRoutingPoints = function (edge, routingPoints, updateHandles, addRoutingPoints) {\n        var sourceAnchors = new linear_edge_router_1.DefaultAnchors(edge.source, edge.parent, \"source\");\n        var targetAnchors = new linear_edge_router_1.DefaultAnchors(edge.target, edge.parent, \"target\");\n        if (this.resetRoutingPointsOnReconnect(edge, routingPoints, updateHandles, sourceAnchors, targetAnchors))\n            return;\n        // delete leading RPs inside the bounds of the source\n        for (var i = 0; i < routingPoints.length; ++i)\n            if (geometry_1.includes(sourceAnchors.bounds, routingPoints[i])) {\n                routingPoints.splice(0, 1);\n                if (updateHandles) {\n                    this.removeHandle(edge, -1);\n                }\n            }\n            else {\n                break;\n            }\n        // delete trailing RPs inside the bounds of the target\n        for (var i = routingPoints.length - 1; i >= 0; --i)\n            if (geometry_1.includes(targetAnchors.bounds, routingPoints[i])) {\n                routingPoints.splice(i, 1);\n                if (updateHandles) {\n                    this.removeHandle(edge, i);\n                }\n            }\n            else {\n                break;\n            }\n        if (routingPoints.length >= 2) {\n            var options = this.getOptions(edge);\n            for (var i = routingPoints.length - 2; i >= 0; --i) {\n                if (geometry_1.manhattanDistance(routingPoints[i], routingPoints[i + 1]) < options.minimalPointDistance) {\n                    routingPoints.splice(i, 2);\n                    --i;\n                    if (updateHandles) {\n                        this.removeHandle(edge, i - 1);\n                        this.removeHandle(edge, i);\n                    }\n                }\n            }\n        }\n        if (addRoutingPoints) {\n            this.addAdditionalCorner(edge, routingPoints, sourceAnchors, targetAnchors, updateHandles);\n            this.addAdditionalCorner(edge, routingPoints, targetAnchors, sourceAnchors, updateHandles);\n            this.manhattanify(edge, routingPoints);\n        }\n    };\n    ManhattanEdgeRouter.prototype.removeHandle = function (edge, pointIndex) {\n        var toBeRemoved = [];\n        edge.children.forEach(function (child) {\n            if (child instanceof model_1.SRoutingHandle) {\n                if (child.pointIndex > pointIndex)\n                    --child.pointIndex;\n                else if (child.pointIndex === pointIndex)\n                    toBeRemoved.push(child);\n            }\n        });\n        toBeRemoved.forEach(function (child) { return edge.remove(child); });\n    };\n    ManhattanEdgeRouter.prototype.addAdditionalCorner = function (edge, routingPoints, currentAnchors, otherAnchors, updateHandles) {\n        if (routingPoints.length === 0)\n            return;\n        var refPoint = currentAnchors.kind === 'source' ? routingPoints[0] : routingPoints[routingPoints.length - 1];\n        var index = currentAnchors.kind === 'source' ? 0 : routingPoints.length;\n        var shiftIndex = index - (currentAnchors.kind === 'source' ? 1 : 0);\n        var isHorizontal;\n        if (routingPoints.length > 1) {\n            isHorizontal = index === 0\n                ? geometry_1.almostEquals(routingPoints[0].x, routingPoints[1].x)\n                : geometry_1.almostEquals(routingPoints[routingPoints.length - 1].x, routingPoints[routingPoints.length - 2].x);\n        }\n        else {\n            var nearestSide = otherAnchors.getNearestSide(refPoint);\n            isHorizontal = nearestSide === linear_edge_router_1.Side.TOP || nearestSide === linear_edge_router_1.Side.BOTTOM;\n        }\n        if (isHorizontal) {\n            if (refPoint.y < currentAnchors.get(linear_edge_router_1.Side.TOP).y || refPoint.y > currentAnchors.get(linear_edge_router_1.Side.BOTTOM).y) {\n                var newPoint = { x: currentAnchors.get(linear_edge_router_1.Side.TOP).x, y: refPoint.y };\n                routingPoints.splice(index, 0, newPoint);\n                if (updateHandles) {\n                    edge.children.forEach(function (child) {\n                        if (child instanceof model_1.SRoutingHandle && child.pointIndex >= shiftIndex)\n                            ++child.pointIndex;\n                    });\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', shiftIndex);\n                }\n            }\n        }\n        else {\n            if (refPoint.x < currentAnchors.get(linear_edge_router_1.Side.LEFT).x || refPoint.x > currentAnchors.get(linear_edge_router_1.Side.RIGHT).x) {\n                var newPoint = { x: refPoint.x, y: currentAnchors.get(linear_edge_router_1.Side.LEFT).y };\n                routingPoints.splice(index, 0, newPoint);\n                if (updateHandles) {\n                    edge.children.forEach(function (child) {\n                        if (child instanceof model_1.SRoutingHandle && child.pointIndex >= shiftIndex)\n                            ++child.pointIndex;\n                    });\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', shiftIndex);\n                }\n            }\n        }\n    };\n    /**\n     * Add artificial routing points to keep all angles rectilinear.\n     *\n     * This makes edge morphing look a lot smoother, where RP positions are interpolated\n     * linearly probably resulting in non-rectilinear angles. We don't add handles for\n     * these additional RPs.\n     */\n    ManhattanEdgeRouter.prototype.manhattanify = function (edge, routingPoints) {\n        for (var i = 1; i < routingPoints.length; ++i) {\n            var isVertical = Math.abs(routingPoints[i - 1].x - routingPoints[i].x) < 1;\n            var isHorizontal = Math.abs(routingPoints[i - 1].y - routingPoints[i].y) < 1;\n            if (!isVertical && !isHorizontal) {\n                routingPoints.splice(i, 0, {\n                    x: routingPoints[i - 1].x,\n                    y: routingPoints[i].y\n                });\n                ++i;\n            }\n        }\n    };\n    ManhattanEdgeRouter.prototype.calculateDefaultCorners = function (edge, sourceAnchors, targetAnchors, options) {\n        var selfEdge = _super.prototype.calculateDefaultCorners.call(this, edge, sourceAnchors, targetAnchors, options);\n        if (selfEdge.length > 0)\n            return selfEdge;\n        var bestAnchors = this.getBestConnectionAnchors(edge, sourceAnchors, targetAnchors, options);\n        var sourceSide = bestAnchors.source;\n        var targetSide = bestAnchors.target;\n        var corners = [];\n        var startPoint = sourceAnchors.get(sourceSide);\n        var endPoint = targetAnchors.get(targetSide);\n        switch (sourceSide) {\n            case linear_edge_router_1.Side.RIGHT:\n                switch (targetSide) {\n                    case linear_edge_router_1.Side.BOTTOM:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case linear_edge_router_1.Side.TOP:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case linear_edge_router_1.Side.RIGHT:\n                        corners.push({ x: Math.max(startPoint.x, endPoint.x) + 1.5 * options.standardDistance, y: startPoint.y });\n                        corners.push({ x: Math.max(startPoint.x, endPoint.x) + 1.5 * options.standardDistance, y: endPoint.y });\n                        break;\n                    case linear_edge_router_1.Side.LEFT:\n                        if (endPoint.y !== startPoint.y) {\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: startPoint.y });\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: endPoint.y });\n                        }\n                        break;\n                }\n                break;\n            case linear_edge_router_1.Side.LEFT:\n                switch (targetSide) {\n                    case linear_edge_router_1.Side.BOTTOM:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case linear_edge_router_1.Side.TOP:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    default:\n                        endPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n                        if (endPoint.y !== startPoint.y) {\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: startPoint.y });\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: endPoint.y });\n                        }\n                        break;\n                }\n                break;\n            case linear_edge_router_1.Side.TOP:\n                switch (targetSide) {\n                    case linear_edge_router_1.Side.RIGHT:\n                        if ((endPoint.x - startPoint.x) > 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: endPoint.y });\n                        }\n                        else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case linear_edge_router_1.Side.LEFT:\n                        if ((endPoint.x - startPoint.x) < 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: endPoint.y });\n                        }\n                        else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case linear_edge_router_1.Side.TOP:\n                        corners.push({ x: startPoint.x, y: Math.min(startPoint.y, endPoint.y) - 1.5 * options.standardDistance });\n                        corners.push({ x: endPoint.x, y: Math.min(startPoint.y, endPoint.y) - 1.5 * options.standardDistance });\n                        break;\n                    case linear_edge_router_1.Side.BOTTOM:\n                        if (endPoint.x !== startPoint.x) {\n                            corners.push({ x: startPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                            corners.push({ x: endPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                        }\n                        break;\n                }\n                break;\n            case linear_edge_router_1.Side.BOTTOM:\n                switch (targetSide) {\n                    case linear_edge_router_1.Side.RIGHT:\n                        if ((endPoint.x - startPoint.x) > 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: endPoint.y });\n                        }\n                        else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case linear_edge_router_1.Side.LEFT:\n                        if ((endPoint.x - startPoint.x) < 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: endPoint.y });\n                        }\n                        else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    default:\n                        endPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n                        if (endPoint.x !== startPoint.x) {\n                            corners.push({ x: startPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                            corners.push({ x: endPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                        }\n                        break;\n                }\n                break;\n        }\n        return corners;\n    };\n    ManhattanEdgeRouter.prototype.getBestConnectionAnchors = function (edge, sourceAnchors, targetAnchors, options) {\n        // distance is enough\n        var sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.RIGHT);\n        var targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if ((targetPoint.x - sourcePoint.x) > options.standardDistance)\n            return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.LEFT };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.LEFT);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if ((sourcePoint.x - targetPoint.x) > options.standardDistance)\n            return { source: linear_edge_router_1.Side.LEFT, target: linear_edge_router_1.Side.RIGHT };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.TOP);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        if ((sourcePoint.y - targetPoint.y) > options.standardDistance)\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.BOTTOM };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n        if ((targetPoint.y - sourcePoint.y) > options.standardDistance)\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.TOP };\n        // One additional point\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.RIGHT);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n        if (((targetPoint.x - sourcePoint.x) > 0.5 * options.standardDistance) && ((targetPoint.y - sourcePoint.y) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.TOP };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        if (((targetPoint.x - sourcePoint.x) > 0.5 * options.standardDistance) && ((sourcePoint.y - targetPoint.y) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.BOTTOM };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.LEFT);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        if (((sourcePoint.x - targetPoint.x) > 0.5 * options.standardDistance) && ((sourcePoint.y - targetPoint.y) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.LEFT, target: linear_edge_router_1.Side.BOTTOM };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n        if (((sourcePoint.x - targetPoint.x) > 0.5 * options.standardDistance) && ((targetPoint.y - sourcePoint.y) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.LEFT, target: linear_edge_router_1.Side.TOP };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.TOP);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (((sourcePoint.y - targetPoint.y) > 0.5 * options.standardDistance) && ((sourcePoint.x - targetPoint.x) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.RIGHT };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if (((sourcePoint.y - targetPoint.y) > 0.5 * options.standardDistance) && ((targetPoint.x - sourcePoint.x) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.LEFT };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (((targetPoint.y - sourcePoint.y) > 0.5 * options.standardDistance) && ((sourcePoint.x - targetPoint.x) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.RIGHT };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if (((targetPoint.y - sourcePoint.y) > 0.5 * options.standardDistance) && ((targetPoint.x - sourcePoint.x) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.LEFT };\n        // Two points\n        // priority NN >> EE >> NE >> NW >> SE >> SW\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.TOP);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint)) {\n            if ((sourcePoint.y - targetPoint.y) < 0) {\n                if (Math.abs(sourcePoint.x - targetPoint.x) > ((sourceAnchors.bounds.width + options.standardDistance) / 2))\n                    return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.TOP };\n            }\n            else {\n                if (Math.abs(sourcePoint.x - targetPoint.x) > (targetAnchors.bounds.width / 2))\n                    return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.TOP };\n            }\n        }\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.RIGHT);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint)) {\n            if ((sourcePoint.x - targetPoint.x) > 0) {\n                if (Math.abs(sourcePoint.y - targetPoint.y) > ((sourceAnchors.bounds.height + options.standardDistance) / 2))\n                    return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.RIGHT };\n            }\n            else if (Math.abs(sourcePoint.y - targetPoint.y) > (targetAnchors.bounds.height / 2))\n                return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.RIGHT };\n        }\n        // Secondly, judge NE NW is available\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.TOP);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint))\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.RIGHT };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint))\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.LEFT };\n        // Finally, judge SE SW is available\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint))\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.RIGHT };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint))\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.LEFT };\n        // Only to return to the\n        return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.BOTTOM };\n    };\n    ManhattanEdgeRouter.KIND = 'manhattan';\n    return ManhattanEdgeRouter;\n}(linear_edge_router_1.LinearEdgeRouter));\nexports.ManhattanEdgeRouter = ManhattanEdgeRouter;\n//# sourceMappingURL=manhattan-edge-router.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"../bounds/model\");\nvar delete_1 = require(\"../edit/delete\");\nvar model_2 = require(\"../select/model\");\nvar model_3 = require(\"../hover/model\");\nvar model_4 = require(\"../move/model\");\nvar SRoutableElement = /** @class */ (function (_super) {\n    __extends(SRoutableElement, _super);\n    function SRoutableElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.routingPoints = [];\n        return _this;\n    }\n    Object.defineProperty(SRoutableElement.prototype, \"source\", {\n        get: function () {\n            return this.index.getById(this.sourceId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SRoutableElement.prototype, \"target\", {\n        get: function () {\n            return this.index.getById(this.targetId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SRoutableElement.prototype, \"bounds\", {\n        get: function () {\n            // this should also work for splines, which have the convex hull property\n            return this.routingPoints.reduce(function (bounds, routingPoint) { return geometry_1.combine(bounds, {\n                x: routingPoint.x,\n                y: routingPoint.y,\n                width: 0,\n                height: 0\n            }); }, geometry_1.EMPTY_BOUNDS);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SRoutableElement;\n}(smodel_1.SChildElement));\nexports.SRoutableElement = SRoutableElement;\nexports.connectableFeature = Symbol('connectableFeature');\nfunction isConnectable(element) {\n    return element.hasFeature(exports.connectableFeature) && element.canConnect;\n}\nexports.isConnectable = isConnectable;\nfunction getAbsoluteRouteBounds(model, route) {\n    if (route === void 0) { route = model.routingPoints; }\n    var bounds = getRouteBounds(route);\n    var current = model;\n    while (current instanceof smodel_1.SChildElement) {\n        var parent_1 = current.parent;\n        bounds = parent_1.localToParent(bounds);\n        current = parent_1;\n    }\n    return bounds;\n}\nexports.getAbsoluteRouteBounds = getAbsoluteRouteBounds;\nfunction getRouteBounds(route) {\n    var bounds = { x: NaN, y: NaN, width: 0, height: 0 };\n    for (var _i = 0, route_1 = route; _i < route_1.length; _i++) {\n        var point = route_1[_i];\n        if (isNaN(bounds.x)) {\n            bounds.x = point.x;\n            bounds.y = point.y;\n        }\n        else {\n            if (point.x < bounds.x) {\n                bounds.width += bounds.x - point.x;\n                bounds.x = point.x;\n            }\n            else if (point.x > bounds.x + bounds.width) {\n                bounds.width = point.x - bounds.x;\n            }\n            if (point.y < bounds.y) {\n                bounds.height += bounds.y - point.y;\n                bounds.y = point.y;\n            }\n            else if (point.y > bounds.y + bounds.height) {\n                bounds.height = point.y - bounds.y;\n            }\n        }\n    }\n    return bounds;\n}\nexports.getRouteBounds = getRouteBounds;\n/**\n * A connectable element is one that can have outgoing and incoming edges, i.e. it can be the source\n * or target element of an edge. There are two kinds of connectable elements: nodes (`SNode`) and\n * ports (`SPort`). A node represents a main entity, while a port is a connection point inside a node.\n */\nvar SConnectableElement = /** @class */ (function (_super) {\n    __extends(SConnectableElement, _super);\n    function SConnectableElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    Object.defineProperty(SConnectableElement.prototype, \"anchorKind\", {\n        get: function () {\n            return undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SConnectableElement.prototype, \"incomingEdges\", {\n        /**\n         * The incoming edges of this connectable element. They are resolved by the index, which must\n         * be an `SGraphIndex`.\n         */\n        get: function () {\n            return this.index.getIncomingEdges(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SConnectableElement.prototype, \"outgoingEdges\", {\n        /**\n         * The outgoing edges of this connectable element. They are resolved by the index, which must\n         * be an `SGraphIndex`.\n         */\n        get: function () {\n            return this.index.getOutgoingEdges(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SConnectableElement.prototype.canConnect = function (routable, role) {\n        return true;\n    };\n    return SConnectableElement;\n}(model_1.SShapeElement));\nexports.SConnectableElement = SConnectableElement;\nvar SRoutingHandle = /** @class */ (function (_super) {\n    __extends(SRoutingHandle, _super);\n    function SRoutingHandle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** Whether the routing point is being dragged. */\n        _this.editMode = false;\n        _this.hoverFeedback = false;\n        _this.selected = false;\n        return _this;\n    }\n    /**\n     * SRoutingHandles are created using the constructor, so we hard-wire the\n     * default features\n     */\n    SRoutingHandle.prototype.hasFeature = function (feature) {\n        return SRoutingHandle.DEFAULT_FEATURES.indexOf(feature) !== -1;\n    };\n    SRoutingHandle.DEFAULT_FEATURES = [model_2.selectFeature, model_4.moveFeature, model_3.hoverFeedbackFeature];\n    return SRoutingHandle;\n}(smodel_1.SChildElement));\nexports.SRoutingHandle = SRoutingHandle;\nvar SDanglingAnchor = /** @class */ (function (_super) {\n    __extends(SDanglingAnchor, _super);\n    function SDanglingAnchor() {\n        var _this = _super.call(this) || this;\n        _this.type = 'dangling-anchor';\n        _this.size = { width: 0, height: 0 };\n        return _this;\n    }\n    SDanglingAnchor.DEFAULT_FEATURES = [delete_1.deletableFeature];\n    return SDanglingAnchor;\n}(SConnectableElement));\nexports.SDanglingAnchor = SDanglingAnchor;\nexports.edgeInProgressID = 'edge-in-progress';\nexports.edgeInProgressTargetHandleID = exports.edgeInProgressID + '-target-anchor';\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar anchor_1 = require(\"./anchor\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar inversify_1 = require(\"inversify\");\nvar polyline_edge_router_1 = require(\"./polyline-edge-router\");\nvar EllipseAnchor = /** @class */ (function () {\n    function EllipseAnchor() {\n    }\n    Object.defineProperty(EllipseAnchor.prototype, \"kind\", {\n        get: function () {\n            return polyline_edge_router_1.PolylineEdgeRouter.KIND + ':' + anchor_1.ELLIPTIC_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EllipseAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var bounds = connectable.bounds;\n        var c = geometry_1.center(bounds);\n        var dx = c.x - refPoint.x;\n        var dy = c.y - refPoint.y;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        var normX = (dx / distance) || 0;\n        var normY = (dy / distance) || 0;\n        return {\n            x: c.x - normX * (0.5 * bounds.width + offset),\n            y: c.y - normY * (0.5 * bounds.height + offset)\n        };\n    };\n    EllipseAnchor = __decorate([\n        inversify_1.injectable()\n    ], EllipseAnchor);\n    return EllipseAnchor;\n}());\nexports.EllipseAnchor = EllipseAnchor;\nvar RectangleAnchor = /** @class */ (function () {\n    function RectangleAnchor() {\n    }\n    Object.defineProperty(RectangleAnchor.prototype, \"kind\", {\n        get: function () {\n            return polyline_edge_router_1.PolylineEdgeRouter.KIND + ':' + anchor_1.RECTANGULAR_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RectangleAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var bounds = connectable.bounds;\n        var c = geometry_1.center(bounds);\n        var finder = new NearestPointFinder(c, refPoint);\n        if (!geometry_1.almostEquals(c.y, refPoint.y)) {\n            var xTop = this.getXIntersection(bounds.y, c, refPoint);\n            if (xTop >= bounds.x && xTop <= bounds.x + bounds.width)\n                finder.addCandidate(xTop, bounds.y - offset);\n            var xBottom = this.getXIntersection(bounds.y + bounds.height, c, refPoint);\n            if (xBottom >= bounds.x && xBottom <= bounds.x + bounds.width)\n                finder.addCandidate(xBottom, bounds.y + bounds.height + offset);\n        }\n        if (!geometry_1.almostEquals(c.x, refPoint.x)) {\n            var yLeft = this.getYIntersection(bounds.x, c, refPoint);\n            if (yLeft >= bounds.y && yLeft <= bounds.y + bounds.height)\n                finder.addCandidate(bounds.x - offset, yLeft);\n            var yRight = this.getYIntersection(bounds.x + bounds.width, c, refPoint);\n            if (yRight >= bounds.y && yRight <= bounds.y + bounds.height)\n                finder.addCandidate(bounds.x + bounds.width + offset, yRight);\n        }\n        return finder.best;\n    };\n    RectangleAnchor.prototype.getXIntersection = function (yIntersection, centerPoint, point) {\n        var t = (yIntersection - centerPoint.y) / (point.y - centerPoint.y);\n        return (point.x - centerPoint.x) * t + centerPoint.x;\n    };\n    RectangleAnchor.prototype.getYIntersection = function (xIntersection, centerPoint, point) {\n        var t = (xIntersection - centerPoint.x) / (point.x - centerPoint.x);\n        return (point.y - centerPoint.y) * t + centerPoint.y;\n    };\n    RectangleAnchor = __decorate([\n        inversify_1.injectable()\n    ], RectangleAnchor);\n    return RectangleAnchor;\n}());\nexports.RectangleAnchor = RectangleAnchor;\nvar NearestPointFinder = /** @class */ (function () {\n    function NearestPointFinder(centerPoint, refPoint) {\n        this.centerPoint = centerPoint;\n        this.refPoint = refPoint;\n        this.currentDist = -1;\n    }\n    NearestPointFinder.prototype.addCandidate = function (x, y) {\n        var dx = this.refPoint.x - x;\n        var dy = this.refPoint.y - y;\n        var dist = dx * dx + dy * dy;\n        if (this.currentDist < 0 || dist < this.currentDist) {\n            this.currentBest = {\n                x: x,\n                y: y\n            };\n            this.currentDist = dist;\n        }\n    };\n    Object.defineProperty(NearestPointFinder.prototype, \"best\", {\n        get: function () {\n            if (this.currentBest === undefined)\n                return this.centerPoint;\n            else\n                return this.currentBest;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return NearestPointFinder;\n}());\nvar DiamondAnchor = /** @class */ (function () {\n    function DiamondAnchor() {\n    }\n    Object.defineProperty(DiamondAnchor.prototype, \"kind\", {\n        get: function () {\n            return polyline_edge_router_1.PolylineEdgeRouter.KIND + ':' + anchor_1.DIAMOND_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DiamondAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        var bounds = connectable.bounds;\n        var referenceLine = new geometry_1.PointToPointLine(geometry_1.center(bounds), refPoint);\n        var closestDiamondSide = new geometry_1.Diamond(bounds).closestSideLine(refPoint);\n        var anchorPoint = geometry_1.intersection(closestDiamondSide, referenceLine);\n        return geometry_1.shiftTowards(anchorPoint, refPoint, offset);\n    };\n    DiamondAnchor = __decorate([\n        inversify_1.injectable()\n    ], DiamondAnchor);\n    return DiamondAnchor;\n}());\nexports.DiamondAnchor = DiamondAnchor;\n//# sourceMappingURL=polyline-anchors.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"./model\");\nvar anchor_1 = require(\"./anchor\");\nvar linear_edge_router_1 = require(\"./linear-edge-router\");\nvar PolylineEdgeRouter = /** @class */ (function (_super) {\n    __extends(PolylineEdgeRouter, _super);\n    function PolylineEdgeRouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PolylineEdgeRouter_1 = PolylineEdgeRouter;\n    Object.defineProperty(PolylineEdgeRouter.prototype, \"kind\", {\n        get: function () {\n            return PolylineEdgeRouter_1.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PolylineEdgeRouter.prototype.getOptions = function (edge) {\n        return {\n            minimalPointDistance: 2,\n            removeAngleThreshold: 0.1,\n            standardDistance: 20,\n            selfEdgeOffset: 0.25\n        };\n    };\n    PolylineEdgeRouter.prototype.route = function (edge) {\n        var source = edge.source;\n        var target = edge.target;\n        if (source === undefined || target === undefined) {\n            return [];\n        }\n        var sourceAnchor;\n        var targetAnchor;\n        var options = this.getOptions(edge);\n        var routingPoints = edge.routingPoints.length > 0\n            ? edge.routingPoints\n            : [];\n        this.cleanupRoutingPoints(edge, routingPoints, false, false);\n        var rpCount = routingPoints !== undefined ? routingPoints.length : 0;\n        if (rpCount === 0) {\n            // Use the target center as start anchor reference\n            var startRef = geometry_1.center(target.bounds);\n            sourceAnchor = this.getTranslatedAnchor(source, startRef, target.parent, edge, edge.sourceAnchorCorrection);\n            // Use the source center as end anchor reference\n            var endRef = geometry_1.center(source.bounds);\n            targetAnchor = this.getTranslatedAnchor(target, endRef, source.parent, edge, edge.targetAnchorCorrection);\n        }\n        else {\n            // Use the first routing point as start anchor reference\n            var p0 = routingPoints[0];\n            sourceAnchor = this.getTranslatedAnchor(source, p0, edge.parent, edge, edge.sourceAnchorCorrection);\n            // Use the last routing point as end anchor reference\n            var pn = routingPoints[rpCount - 1];\n            targetAnchor = this.getTranslatedAnchor(target, pn, edge.parent, edge, edge.targetAnchorCorrection);\n        }\n        var result = [];\n        result.push({ kind: 'source', x: sourceAnchor.x, y: sourceAnchor.y });\n        for (var i = 0; i < rpCount; i++) {\n            var p = routingPoints[i];\n            if (i > 0 && i < rpCount - 1\n                || i === 0 && geometry_1.maxDistance(sourceAnchor, p) >= options.minimalPointDistance + (edge.sourceAnchorCorrection || 0)\n                || i === rpCount - 1 && geometry_1.maxDistance(p, targetAnchor) >= options.minimalPointDistance + (edge.targetAnchorCorrection || 0)) {\n                result.push({ kind: 'linear', x: p.x, y: p.y, pointIndex: i });\n            }\n        }\n        result.push({ kind: 'target', x: targetAnchor.x, y: targetAnchor.y });\n        return this.filterEditModeHandles(result, edge, options);\n    };\n    /**\n     * Remove routed points that are in edit mode and for which the angle between the preceding and\n     * following points falls below a threshold.\n     */\n    PolylineEdgeRouter.prototype.filterEditModeHandles = function (route, edge, options) {\n        if (edge.children.length === 0)\n            return route;\n        var i = 0;\n        var _loop_1 = function () {\n            var curr = route[i];\n            if (curr.pointIndex !== undefined) {\n                var handle = edge.children.find(function (child) {\n                    return child instanceof model_1.SRoutingHandle && child.kind === 'junction' && child.pointIndex === curr.pointIndex;\n                });\n                if (handle !== undefined && handle.editMode && i > 0 && i < route.length - 1) {\n                    var prev = route[i - 1], next = route[i + 1];\n                    var prevDiff = { x: prev.x - curr.x, y: prev.y - curr.y };\n                    var nextDiff = { x: next.x - curr.x, y: next.y - curr.y };\n                    var angle = geometry_1.angleBetweenPoints(prevDiff, nextDiff);\n                    if (Math.abs(Math.PI - angle) < options.removeAngleThreshold) {\n                        route.splice(i, 1);\n                        return \"continue\";\n                    }\n                }\n            }\n            i++;\n        };\n        while (i < route.length) {\n            _loop_1();\n        }\n        return route;\n    };\n    PolylineEdgeRouter.prototype.createRoutingHandles = function (edge) {\n        var rpCount = edge.routingPoints.length;\n        this.addHandle(edge, 'source', 'routing-point', -2);\n        this.addHandle(edge, 'line', 'volatile-routing-point', -1);\n        for (var i = 0; i < rpCount; i++) {\n            this.addHandle(edge, 'junction', 'routing-point', i);\n            this.addHandle(edge, 'line', 'volatile-routing-point', i);\n        }\n        this.addHandle(edge, 'target', 'routing-point', rpCount);\n    };\n    PolylineEdgeRouter.prototype.getInnerHandlePosition = function (edge, route, handle) {\n        if (handle.kind === 'line') {\n            var _a = this.findRouteSegment(edge, route, handle.pointIndex), start = _a.start, end = _a.end;\n            if (start !== undefined && end !== undefined)\n                return geometry_1.centerOfLine(start, end);\n        }\n        return undefined;\n    };\n    PolylineEdgeRouter.prototype.applyInnerHandleMoves = function (edge, moves) {\n        var _this = this;\n        moves.forEach(function (move) {\n            var handle = move.handle;\n            var points = edge.routingPoints;\n            var index = handle.pointIndex;\n            if (handle.kind === 'line') {\n                // Upgrade to a proper routing point\n                handle.kind = 'junction';\n                handle.type = 'routing-point';\n                points.splice(index + 1, 0, move.fromPosition || points[Math.max(index, 0)]);\n                edge.children.forEach(function (child) {\n                    if (child instanceof model_1.SRoutingHandle && (child === handle || child.pointIndex > index))\n                        child.pointIndex++;\n                });\n                _this.addHandle(edge, 'line', 'volatile-routing-point', index);\n                _this.addHandle(edge, 'line', 'volatile-routing-point', index + 1);\n                index++;\n            }\n            if (index >= 0 && index < points.length) {\n                points[index] = move.toPosition;\n            }\n        });\n    };\n    var PolylineEdgeRouter_1;\n    PolylineEdgeRouter.KIND = 'polyline';\n    __decorate([\n        inversify_1.inject(anchor_1.AnchorComputerRegistry),\n        __metadata(\"design:type\", anchor_1.AnchorComputerRegistry)\n    ], PolylineEdgeRouter.prototype, \"anchorRegistry\", void 0);\n    PolylineEdgeRouter = PolylineEdgeRouter_1 = __decorate([\n        inversify_1.injectable()\n    ], PolylineEdgeRouter);\n    return PolylineEdgeRouter;\n}(linear_edge_router_1.LinearEdgeRouter));\nexports.PolylineEdgeRouter = PolylineEdgeRouter;\n//# sourceMappingURL=polyline-edge-router.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar types_1 = require(\"../../base/types\");\nvar view_1 = require(\"../../base/views/view\");\nvar registry_1 = require(\"../../utils/registry\");\nvar model_1 = require(\"./model\");\nvar polyline_edge_router_1 = require(\"./polyline-edge-router\");\nfunction isMultipleEdgesRouter(router) {\n    return router.routeAll !== undefined;\n}\nvar EdgeRouterRegistry = /** @class */ (function (_super) {\n    __extends(EdgeRouterRegistry, _super);\n    function EdgeRouterRegistry(edgeRouters) {\n        var _this = _super.call(this) || this;\n        edgeRouters.forEach(function (router) { return _this.register(router.kind, router); });\n        return _this;\n    }\n    Object.defineProperty(EdgeRouterRegistry.prototype, \"defaultKind\", {\n        get: function () {\n            return polyline_edge_router_1.PolylineEdgeRouter.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EdgeRouterRegistry.prototype.get = function (kind) {\n        return _super.prototype.get.call(this, kind || this.defaultKind);\n    };\n    /**\n     * Computes the routes of all edges contained by the specified `parent`.\n     * After all routes are available, it'll apply the registered `EdgeRoutePostProcessors`.\n     * @param parent the parent to traverse for edges\n     * @returns the routes of all edges that are children of `parent`\n     */\n    EdgeRouterRegistry.prototype.routeAllChildren = function (parent) {\n        var routing = this.doRouteAllChildren(parent);\n        for (var _i = 0, _a = this.postProcessors; _i < _a.length; _i++) {\n            var postProcessor = _a[_i];\n            postProcessor.apply(routing);\n        }\n        return routing;\n    };\n    /**\n     * Recursively traverses the children of `parent`, collects children grouped by router kind,\n     * and then routes them either.\n     * @param parent the parent to traverse for edges\n     * @returns the routes of all edges that are children of `parent`\n     */\n    EdgeRouterRegistry.prototype.doRouteAllChildren = function (parent) {\n        var routing = new EdgeRouting();\n        var routersEdges = {};\n        var elementsToProcess = [parent];\n        while (elementsToProcess.length > 0) {\n            var element = elementsToProcess.shift();\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if (child instanceof model_1.SRoutableElement) {\n                    var routerKind = child.routerKind || this.defaultKind;\n                    if (routerKind in routersEdges) {\n                        routersEdges[routerKind].push(child);\n                    }\n                    else {\n                        routersEdges[routerKind] = [child];\n                    }\n                }\n                if (child instanceof smodel_1.SParentElement) {\n                    elementsToProcess.push(child);\n                }\n            }\n        }\n        for (var _b = 0, _c = Object.keys(routersEdges); _b < _c.length; _b++) {\n            var routerKind = _c[_b];\n            var childRouter = this.get(routerKind);\n            if (isMultipleEdgesRouter(childRouter)) {\n                routing.setAll(childRouter.routeAll(routersEdges[routerKind], parent));\n            }\n            else {\n                for (var _d = 0, _e = routersEdges[routerKind]; _d < _e.length; _d++) {\n                    var edge = _e[_d];\n                    routing.set(edge.id, this.route(edge));\n                }\n            }\n        }\n        return routing;\n    };\n    /**\n     * Computes or obtains the route of a single edge.\n     * @param edge the edge to be routed\n     * @param args arguments that may contain an `EdgeRouting` already\n     * @returns the route of the specified `edge`\n     */\n    EdgeRouterRegistry.prototype.route = function (edge, args) {\n        var edgeRouting = view_1.findArgValue(args, 'edgeRouting');\n        if (edgeRouting) {\n            var route = edgeRouting.get(edge.id);\n            if (route) {\n                return route;\n            }\n        }\n        var router = this.get(edge.routerKind);\n        return router.route(edge);\n    };\n    __decorate([\n        inversify_1.multiInject(types_1.TYPES.IEdgeRoutePostprocessor), inversify_1.optional(),\n        __metadata(\"design:type\", Array)\n    ], EdgeRouterRegistry.prototype, \"postProcessors\", void 0);\n    EdgeRouterRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IEdgeRouter)),\n        __metadata(\"design:paramtypes\", [Array])\n    ], EdgeRouterRegistry);\n    return EdgeRouterRegistry;\n}(registry_1.InstanceRegistry));\nexports.EdgeRouterRegistry = EdgeRouterRegistry;\n/**\n * Map of edges and their computed routes.\n */\nvar EdgeRouting = /** @class */ (function () {\n    function EdgeRouting() {\n        this.routesMap = new Map();\n    }\n    EdgeRouting.prototype.set = function (routableId, route) {\n        this.routesMap.set(routableId, route);\n    };\n    EdgeRouting.prototype.setAll = function (otherRoutes) {\n        var _this = this;\n        otherRoutes.routes.forEach(function (route, routableId) { return _this.set(routableId, route); });\n    };\n    EdgeRouting.prototype.get = function (routableId) {\n        return this.routesMap.get(routableId);\n    };\n    Object.defineProperty(EdgeRouting.prototype, \"routes\", {\n        get: function () {\n            return this.routesMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EdgeRouting;\n}());\nexports.EdgeRouting = EdgeRouting;\n//# sourceMappingURL=routing.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar model_1 = require(\"./model\");\nvar RoutableView = /** @class */ (function () {\n    function RoutableView() {\n    }\n    /**\n     * Check whether the given model element is in the current viewport. Use this method\n     * in your `render` implementation to skip rendering in case the element is not visible.\n     * This can greatly enhance performance for large models.\n     */\n    RoutableView.prototype.isVisible = function (model, route, context) {\n        if (context.targetKind === 'hidden') {\n            // Don't hide any element for hidden rendering\n            return true;\n        }\n        if (route.length === 0) {\n            // We should hide only if we know the element's route\n            return true;\n        }\n        var ab = model_1.getAbsoluteRouteBounds(model, route);\n        var canvasBounds = model.root.canvasBounds;\n        return ab.x <= canvasBounds.width\n            && ab.x + ab.width >= 0\n            && ab.y <= canvasBounds.height\n            && ab.y + ab.height >= 0;\n    };\n    RoutableView = __decorate([\n        inversify_1.injectable()\n    ], RoutableView);\n    return RoutableView;\n}());\nexports.RoutableView = RoutableView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar select_1 = require(\"./select\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar selectModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, select_1.SelectCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, select_1.SelectAllCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, select_1.GetSelectionCommand);\n    bind(types_1.TYPES.KeyListener).to(select_1.SelectKeyboardListener);\n    bind(types_1.TYPES.MouseListener).to(select_1.SelectMouseListener);\n});\nexports.default = selectModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.selectFeature = Symbol('selectFeature');\nfunction isSelectable(element) {\n    return element.hasFeature(exports.selectFeature);\n}\nexports.isSelectable = isSelectable;\nfunction isSelected(element) {\n    return element !== undefined && isSelectable(element) && element.selected;\n}\nexports.isSelected = isSelected;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar request_command_1 = require(\"../../base/commands/request-command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar types_1 = require(\"../../base/types\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar browser_1 = require(\"../../utils/browser\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar button_handler_1 = require(\"../button/button-handler\");\nvar model_1 = require(\"../button/model\");\nvar edit_routing_1 = require(\"../edit/edit-routing\");\nvar model_2 = require(\"../routing/model\");\nvar model_3 = require(\"../routing/model\");\nvar zorder_1 = require(\"../zorder/zorder\");\nvar model_4 = require(\"./model\");\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The resulting\n * SelectCommand changes the `selected` state accordingly, so the elements can be rendered differently.\n * This action is also forwarded to the diagram server, if present, so it may react on the selection change.\n * Furthermore, the server can send such an action to the client in order to change the selection programmatically.\n */\nvar SelectAction = /** @class */ (function () {\n    function SelectAction(selectedElementsIDs, deselectedElementsIDs) {\n        if (selectedElementsIDs === void 0) { selectedElementsIDs = []; }\n        if (deselectedElementsIDs === void 0) { deselectedElementsIDs = []; }\n        this.selectedElementsIDs = selectedElementsIDs;\n        this.deselectedElementsIDs = deselectedElementsIDs;\n        this.kind = SelectAction.KIND;\n    }\n    SelectAction.KIND = 'elementSelected';\n    return SelectAction;\n}());\nexports.SelectAction = SelectAction;\n/**\n * Programmatic action for selecting or deselecting all elements.\n */\nvar SelectAllAction = /** @class */ (function () {\n    /**\n     * If `select` is true, all elements are selected, othewise they are deselected.\n     */\n    function SelectAllAction(select) {\n        if (select === void 0) { select = true; }\n        this.select = select;\n        this.kind = SelectAllAction.KIND;\n    }\n    SelectAllAction.KIND = 'allSelected';\n    return SelectAllAction;\n}());\nexports.SelectAllAction = SelectAllAction;\n/**\n * Request action for retrieving the current selection.\n */\nvar GetSelectionAction = /** @class */ (function () {\n    function GetSelectionAction(requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.requestId = requestId;\n        this.kind = GetSelectionAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    GetSelectionAction.create = function () {\n        return new GetSelectionAction(action_1.generateRequestId());\n    };\n    GetSelectionAction.KIND = 'getSelection';\n    return GetSelectionAction;\n}());\nexports.GetSelectionAction = GetSelectionAction;\nvar SelectionResult = /** @class */ (function () {\n    function SelectionResult(selectedElementsIDs, responseId) {\n        if (selectedElementsIDs === void 0) { selectedElementsIDs = []; }\n        this.selectedElementsIDs = selectedElementsIDs;\n        this.responseId = responseId;\n        this.kind = SelectionResult.KIND;\n    }\n    SelectionResult.KIND = 'selectionResult';\n    return SelectionResult;\n}());\nexports.SelectionResult = SelectionResult;\nvar SelectCommand = /** @class */ (function (_super) {\n    __extends(SelectCommand, _super);\n    function SelectCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.selected = [];\n        _this.deselected = [];\n        return _this;\n    }\n    SelectCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        this.action.selectedElementsIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof smodel_1.SChildElement && model_4.isSelectable(element)) {\n                _this.selected.push(element);\n            }\n        });\n        this.action.deselectedElementsIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof smodel_1.SChildElement && model_4.isSelectable(element)) {\n                _this.deselected.push(element);\n            }\n        });\n        return this.redo(context);\n    };\n    SelectCommand.prototype.undo = function (context) {\n        for (var _i = 0, _a = this.selected; _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.selected = false;\n        }\n        for (var _b = 0, _c = this.deselected; _b < _c.length; _b++) {\n            var element = _c[_b];\n            element.selected = true;\n        }\n        return context.root;\n    };\n    SelectCommand.prototype.redo = function (context) {\n        for (var _i = 0, _a = this.deselected; _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.selected = false;\n        }\n        for (var _b = 0, _c = this.selected; _b < _c.length; _b++) {\n            var element = _c[_b];\n            element.selected = true;\n        }\n        return context.root;\n    };\n    SelectCommand.KIND = SelectAction.KIND;\n    SelectCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SelectAction])\n    ], SelectCommand);\n    return SelectCommand;\n}(command_1.Command));\nexports.SelectCommand = SelectCommand;\nvar SelectAllCommand = /** @class */ (function (_super) {\n    __extends(SelectAllCommand, _super);\n    function SelectAllCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.previousSelection = {};\n        return _this;\n    }\n    SelectAllCommand.prototype.execute = function (context) {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    };\n    SelectAllCommand.prototype.selectAll = function (element, newState) {\n        if (model_4.isSelectable(element)) {\n            this.previousSelection[element.id] = element.selected;\n            element.selected = newState;\n        }\n        for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            this.selectAll(child, newState);\n        }\n    };\n    SelectAllCommand.prototype.undo = function (context) {\n        var _this = this;\n        var index = context.root.index;\n        Object.keys(this.previousSelection).forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined && model_4.isSelectable(element))\n                element.selected = _this.previousSelection[id];\n        });\n        return context.root;\n    };\n    SelectAllCommand.prototype.redo = function (context) {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    };\n    SelectAllCommand.KIND = SelectAllAction.KIND;\n    SelectAllCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SelectAllAction])\n    ], SelectAllCommand);\n    return SelectAllCommand;\n}(command_1.Command));\nexports.SelectAllCommand = SelectAllCommand;\nvar SelectMouseListener = /** @class */ (function (_super) {\n    __extends(SelectMouseListener, _super);\n    function SelectMouseListener() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.wasSelected = false;\n        _this.hasDragged = false;\n        return _this;\n    }\n    SelectMouseListener.prototype.mouseDown = function (target, event) {\n        var result = [];\n        if (event.button === 0) {\n            if (this.buttonHandlerRegistry !== undefined && target instanceof model_1.SButton && target.enabled) {\n                var buttonHandler = this.buttonHandlerRegistry.get(target.type);\n                if (buttonHandler !== undefined)\n                    return buttonHandler.buttonPressed(target);\n            }\n            var selectableTarget_1 = smodel_utils_1.findParentByFeature(target, model_4.isSelectable);\n            if (selectableTarget_1 !== undefined || target instanceof smodel_1.SModelRoot) {\n                this.hasDragged = false;\n                var deselect = [];\n                // multi-selection?\n                if (!browser_1.isCtrlOrCmd(event)) {\n                    deselect = iterable_1.toArray(target.root.index.all()\n                        .filter(function (element) { return model_4.isSelectable(element) && element.selected\n                        && !(selectableTarget_1 instanceof model_2.SRoutingHandle && element === selectableTarget_1.parent); }));\n                }\n                if (selectableTarget_1 !== undefined) {\n                    if (!selectableTarget_1.selected) {\n                        this.wasSelected = false;\n                        result.push(new SelectAction([selectableTarget_1.id], deselect.map(function (e) { return e.id; })));\n                        result.push(new zorder_1.BringToFrontAction([selectableTarget_1.id]));\n                        var routableDeselect = deselect.filter(function (e) { return e instanceof model_3.SRoutableElement; }).map(function (e) { return e.id; });\n                        if (selectableTarget_1 instanceof model_3.SRoutableElement)\n                            result.push(new edit_routing_1.SwitchEditModeAction([selectableTarget_1.id], routableDeselect));\n                        else if (routableDeselect.length > 0)\n                            result.push(new edit_routing_1.SwitchEditModeAction([], routableDeselect));\n                    }\n                    else if (browser_1.isCtrlOrCmd(event)) {\n                        this.wasSelected = false;\n                        result.push(new SelectAction([], [selectableTarget_1.id]));\n                        if (selectableTarget_1 instanceof model_3.SRoutableElement)\n                            result.push(new edit_routing_1.SwitchEditModeAction([], [selectableTarget_1.id]));\n                    }\n                    else {\n                        this.wasSelected = true;\n                    }\n                }\n                else {\n                    result.push(new SelectAction([], deselect.map(function (e) { return e.id; })));\n                    var routableDeselect = deselect.filter(function (e) { return e instanceof model_3.SRoutableElement; }).map(function (e) { return e.id; });\n                    if (routableDeselect.length > 0)\n                        result.push(new edit_routing_1.SwitchEditModeAction([], routableDeselect));\n                }\n            }\n        }\n        return result;\n    };\n    SelectMouseListener.prototype.mouseMove = function (target, event) {\n        this.hasDragged = true;\n        return [];\n    };\n    SelectMouseListener.prototype.mouseUp = function (target, event) {\n        if (event.button === 0) {\n            if (!this.hasDragged) {\n                var selectableTarget = smodel_utils_1.findParentByFeature(target, model_4.isSelectable);\n                if (selectableTarget !== undefined && this.wasSelected) {\n                    return [new SelectAction([selectableTarget.id], [])];\n                }\n            }\n        }\n        this.hasDragged = false;\n        return [];\n    };\n    SelectMouseListener.prototype.decorate = function (vnode, element) {\n        var selectableTarget = smodel_utils_1.findParentByFeature(element, model_4.isSelectable);\n        if (selectableTarget !== undefined)\n            vnode_utils_1.setClass(vnode, 'selected', selectableTarget.selected);\n        return vnode;\n    };\n    __decorate([\n        inversify_1.inject(button_handler_1.ButtonHandlerRegistry), inversify_1.optional(),\n        __metadata(\"design:type\", button_handler_1.ButtonHandlerRegistry)\n    ], SelectMouseListener.prototype, \"buttonHandlerRegistry\", void 0);\n    return SelectMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.SelectMouseListener = SelectMouseListener;\nvar GetSelectionCommand = /** @class */ (function (_super) {\n    __extends(GetSelectionCommand, _super);\n    function GetSelectionCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.previousSelection = {};\n        return _this;\n    }\n    GetSelectionCommand.prototype.retrieveResult = function (context) {\n        var selection = context.root.index.all()\n            .filter(function (e) { return model_4.isSelectable(e) && e.selected; })\n            .map(function (e) { return e.id; });\n        return new SelectionResult(iterable_1.toArray(selection), this.action.requestId);\n    };\n    GetSelectionCommand.KIND = GetSelectionAction.KIND;\n    GetSelectionCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [GetSelectionAction])\n    ], GetSelectionCommand);\n    return GetSelectionCommand;\n}(request_command_1.ModelRequestCommand));\nexports.GetSelectionCommand = GetSelectionCommand;\nvar SelectKeyboardListener = /** @class */ (function (_super) {\n    __extends(SelectKeyboardListener, _super);\n    function SelectKeyboardListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SelectKeyboardListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyA', 'ctrlCmd')) {\n            return [new SelectAllAction()];\n        }\n        return [];\n    };\n    return SelectKeyboardListener;\n}(key_tool_1.KeyListener));\nexports.SelectKeyboardListener = SelectKeyboardListener;\n//# sourceMappingURL=select.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar undo_redo_1 = require(\"./undo-redo\");\nvar undoRedoModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.KeyListener).to(undo_redo_1.UndoRedoKeyListener);\n});\nexports.default = undoRedoModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar browser_1 = require(\"../../utils/browser\");\nvar UndoAction = /** @class */ (function () {\n    function UndoAction() {\n        this.kind = UndoAction.KIND;\n    }\n    UndoAction.KIND = 'undo';\n    return UndoAction;\n}());\nexports.UndoAction = UndoAction;\nvar RedoAction = /** @class */ (function () {\n    function RedoAction() {\n        this.kind = RedoAction.KIND;\n    }\n    RedoAction.KIND = 'redo';\n    return RedoAction;\n}());\nexports.RedoAction = RedoAction;\nvar UndoRedoKeyListener = /** @class */ (function (_super) {\n    __extends(UndoRedoKeyListener, _super);\n    function UndoRedoKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    UndoRedoKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyZ', 'ctrlCmd'))\n            return [new UndoAction];\n        if (keyboard_1.matchesKeystroke(event, 'KeyZ', 'ctrlCmd', 'shift') || (!browser_1.isMac() && keyboard_1.matchesKeystroke(event, 'KeyY', 'ctrlCmd')))\n            return [new RedoAction];\n        return [];\n    };\n    return UndoRedoKeyListener;\n}(key_tool_1.KeyListener));\nexports.UndoRedoKeyListener = UndoRedoKeyListener;\n//# sourceMappingURL=undo-redo.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar update_model_1 = require(\"./update-model\");\nvar updateModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, update_model_1.UpdateModelCommand);\n});\nexports.default = updateModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nfunction forEachMatch(matchResult, callback) {\n    Object.keys(matchResult).forEach(function (id) { return callback(id, matchResult[id]); });\n}\nexports.forEachMatch = forEachMatch;\nvar ModelMatcher = /** @class */ (function () {\n    function ModelMatcher() {\n    }\n    ModelMatcher.prototype.match = function (left, right) {\n        var result = {};\n        this.matchLeft(left, result);\n        this.matchRight(right, result);\n        return result;\n    };\n    ModelMatcher.prototype.matchLeft = function (element, result, parentId) {\n        var match = result[element.id];\n        if (match !== undefined) {\n            match.left = element;\n            match.leftParentId = parentId;\n        }\n        else {\n            match = {\n                left: element,\n                leftParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (smodel_1.isParent(element)) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.matchLeft(child, result, element.id);\n            }\n        }\n    };\n    ModelMatcher.prototype.matchRight = function (element, result, parentId) {\n        var match = result[element.id];\n        if (match !== undefined) {\n            match.right = element;\n            match.rightParentId = parentId;\n        }\n        else {\n            match = {\n                right: element,\n                rightParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (smodel_1.isParent(element)) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.matchRight(child, result, element.id);\n            }\n        }\n    };\n    return ModelMatcher;\n}());\nexports.ModelMatcher = ModelMatcher;\nfunction applyMatches(root, matches) {\n    var index;\n    if (root instanceof smodel_1.SModelRoot) {\n        index = root.index;\n    }\n    else {\n        index = new smodel_1.SModelIndex();\n        index.add(root);\n    }\n    for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n        var match = matches_1[_i];\n        var newElementInserted = false;\n        if (match.left !== undefined && match.leftParentId !== undefined) {\n            var parent_1 = index.getById(match.leftParentId);\n            if (parent_1 !== undefined && parent_1.children !== undefined) {\n                var i = parent_1.children.indexOf(match.left);\n                if (i >= 0) {\n                    if (match.right !== undefined && match.leftParentId === match.rightParentId) {\n                        parent_1.children.splice(i, 1, match.right);\n                        newElementInserted = true;\n                    }\n                    else {\n                        parent_1.children.splice(i, 1);\n                    }\n                }\n                index.remove(match.left);\n            }\n        }\n        if (!newElementInserted && match.right !== undefined && match.rightParentId !== undefined) {\n            var parent_2 = index.getById(match.rightParentId);\n            if (parent_2 !== undefined) {\n                if (parent_2.children === undefined)\n                    parent_2.children = [];\n                parent_2.children.push(match.right);\n            }\n        }\n    }\n}\nexports.applyMatches = applyMatches;\n//# sourceMappingURL=model-matching.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar command_1 = require(\"../../base/commands/command\");\nvar fade_1 = require(\"../fade/fade\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar move_1 = require(\"../move/move\");\nvar model_1 = require(\"../fade/model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../bounds/model\");\nvar viewport_root_1 = require(\"../viewport/viewport-root\");\nvar model_4 = require(\"../select/model\");\nvar model_matching_1 = require(\"./model-matching\");\nvar resize_1 = require(\"../bounds/resize\");\nvar types_1 = require(\"../../base/types\");\nvar model_5 = require(\"../viewport/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar model_6 = require(\"../routing/model\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\n/**\n * Sent from the model source to the client in order to update the model. If no model is present yet,\n * this behaves the same as a SetModelAction. The transition from the old model to the new one can be animated.\n */\nvar UpdateModelAction = /** @class */ (function () {\n    function UpdateModelAction(input, animate, cause) {\n        if (animate === void 0) { animate = true; }\n        this.animate = animate;\n        this.cause = cause;\n        this.kind = UpdateModelAction.KIND;\n        if (input.id !== undefined)\n            this.newRoot = input;\n        else\n            this.matches = input;\n    }\n    UpdateModelAction.KIND = 'updateModel';\n    return UpdateModelAction;\n}());\nexports.UpdateModelAction = UpdateModelAction;\nvar UpdateModelCommand = /** @class */ (function (_super) {\n    __extends(UpdateModelCommand, _super);\n    function UpdateModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    UpdateModelCommand.prototype.execute = function (context) {\n        var newRoot;\n        if (this.action.newRoot !== undefined) {\n            newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        }\n        else {\n            newRoot = context.modelFactory.createRoot(context.root);\n            if (this.action.matches !== undefined)\n                this.applyMatches(newRoot, this.action.matches, context);\n        }\n        this.oldRoot = context.root;\n        this.newRoot = newRoot;\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    };\n    UpdateModelCommand.prototype.performUpdate = function (oldRoot, newRoot, context) {\n        if ((this.action.animate === undefined || this.action.animate) && oldRoot.id === newRoot.id) {\n            var matchResult = void 0;\n            if (this.action.matches === undefined) {\n                var matcher = new model_matching_1.ModelMatcher();\n                matchResult = matcher.match(oldRoot, newRoot);\n            }\n            else {\n                matchResult = this.convertToMatchResult(this.action.matches, oldRoot, newRoot);\n            }\n            var animationOrRoot = this.computeAnimation(newRoot, matchResult, context);\n            if (animationOrRoot instanceof animation_1.Animation)\n                return animationOrRoot.start();\n            else\n                return animationOrRoot;\n        }\n        else {\n            if (oldRoot.type === newRoot.type && geometry_1.isValidDimension(oldRoot.canvasBounds))\n                newRoot.canvasBounds = oldRoot.canvasBounds;\n            if (model_5.isViewport(oldRoot) && model_5.isViewport(newRoot)) {\n                newRoot.zoom = oldRoot.zoom;\n                newRoot.scroll = oldRoot.scroll;\n            }\n            return newRoot;\n        }\n    };\n    UpdateModelCommand.prototype.applyMatches = function (root, matches, context) {\n        var index = root.index;\n        for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n            var match = matches_1[_i];\n            if (match.left !== undefined) {\n                var element = index.getById(match.left.id);\n                if (element instanceof smodel_1.SChildElement)\n                    element.parent.remove(element);\n            }\n        }\n        for (var _a = 0, matches_2 = matches; _a < matches_2.length; _a++) {\n            var match = matches_2[_a];\n            if (match.right !== undefined) {\n                var element = context.modelFactory.createElement(match.right);\n                var parent_1 = void 0;\n                if (match.rightParentId !== undefined)\n                    parent_1 = index.getById(match.rightParentId);\n                if (parent_1 instanceof smodel_1.SParentElement)\n                    parent_1.add(element);\n                else\n                    root.add(element);\n            }\n        }\n    };\n    UpdateModelCommand.prototype.convertToMatchResult = function (matches, leftRoot, rightRoot) {\n        var result = {};\n        for (var _i = 0, matches_3 = matches; _i < matches_3.length; _i++) {\n            var match = matches_3[_i];\n            var converted = {};\n            var id = undefined;\n            if (match.left !== undefined) {\n                id = match.left.id;\n                converted.left = leftRoot.index.getById(id);\n                converted.leftParentId = match.leftParentId;\n            }\n            if (match.right !== undefined) {\n                id = match.right.id;\n                converted.right = rightRoot.index.getById(id);\n                converted.rightParentId = match.rightParentId;\n            }\n            if (id !== undefined)\n                result[id] = converted;\n        }\n        return result;\n    };\n    UpdateModelCommand.prototype.computeAnimation = function (newRoot, matchResult, context) {\n        var _this = this;\n        var animationData = {\n            fades: []\n        };\n        model_matching_1.forEachMatch(matchResult, function (id, match) {\n            if (match.left !== undefined && match.right !== undefined) {\n                // The element is still there, but may have been moved\n                _this.updateElement(match.left, match.right, animationData);\n            }\n            else if (match.right !== undefined) {\n                // An element has been added\n                var right = match.right;\n                if (model_1.isFadeable(right)) {\n                    right.opacity = 0;\n                    animationData.fades.push({\n                        element: right,\n                        type: 'in'\n                    });\n                }\n            }\n            else if (match.left instanceof smodel_1.SChildElement) {\n                // An element has been removed\n                var left = match.left;\n                if (model_1.isFadeable(left) && match.leftParentId !== undefined) {\n                    if (!smodel_utils_1.containsSome(newRoot, left)) {\n                        var parent_2 = newRoot.index.getById(match.leftParentId);\n                        if (parent_2 instanceof smodel_1.SParentElement) {\n                            var leftCopy = context.modelFactory.createElement(left);\n                            parent_2.add(leftCopy);\n                            animationData.fades.push({\n                                element: leftCopy,\n                                type: 'out'\n                            });\n                        }\n                    }\n                }\n            }\n        });\n        var animations = this.createAnimations(animationData, newRoot, context);\n        if (animations.length >= 2) {\n            return new animation_1.CompoundAnimation(newRoot, context, animations);\n        }\n        else if (animations.length === 1) {\n            return animations[0];\n        }\n        else {\n            return newRoot;\n        }\n    };\n    UpdateModelCommand.prototype.updateElement = function (left, right, animationData) {\n        if (model_2.isLocateable(left) && model_2.isLocateable(right)) {\n            var leftPos = left.position;\n            var rightPos = right.position;\n            if (!geometry_1.almostEquals(leftPos.x, rightPos.x) || !geometry_1.almostEquals(leftPos.y, rightPos.y)) {\n                if (animationData.moves === undefined)\n                    animationData.moves = [];\n                animationData.moves.push({\n                    element: right,\n                    fromPosition: leftPos,\n                    toPosition: rightPos\n                });\n                right.position = leftPos;\n            }\n        }\n        if (model_3.isSizeable(left) && model_3.isSizeable(right)) {\n            if (!geometry_1.isValidDimension(right.bounds)) {\n                right.bounds = {\n                    x: right.bounds.x,\n                    y: right.bounds.y,\n                    width: left.bounds.width,\n                    height: left.bounds.height\n                };\n            }\n            else if (!geometry_1.almostEquals(left.bounds.width, right.bounds.width)\n                || !geometry_1.almostEquals(left.bounds.height, right.bounds.height)) {\n                if (animationData.resizes === undefined)\n                    animationData.resizes = [];\n                animationData.resizes.push({\n                    element: right,\n                    fromDimension: {\n                        width: left.bounds.width,\n                        height: left.bounds.height,\n                    },\n                    toDimension: {\n                        width: right.bounds.width,\n                        height: right.bounds.height,\n                    }\n                });\n            }\n        }\n        if (left instanceof model_6.SRoutableElement && right instanceof model_6.SRoutableElement && this.edgeRouterRegistry) {\n            if (animationData.edgeMementi === undefined)\n                animationData.edgeMementi = [];\n            animationData.edgeMementi.push({\n                edge: right,\n                before: this.takeSnapshot(left),\n                after: this.takeSnapshot(right),\n            });\n        }\n        if (model_4.isSelectable(left) && model_4.isSelectable(right)) {\n            right.selected = left.selected;\n        }\n        if (left instanceof smodel_1.SModelRoot && right instanceof smodel_1.SModelRoot) {\n            right.canvasBounds = left.canvasBounds;\n        }\n        if (left instanceof viewport_root_1.ViewportRootElement && right instanceof viewport_root_1.ViewportRootElement) {\n            right.scroll = left.scroll;\n            right.zoom = left.zoom;\n        }\n    };\n    UpdateModelCommand.prototype.takeSnapshot = function (edge) {\n        var router = this.edgeRouterRegistry.get(edge.routerKind);\n        return router.takeSnapshot(edge);\n    };\n    UpdateModelCommand.prototype.createAnimations = function (data, root, context) {\n        var animations = [];\n        if (data.fades.length > 0) {\n            animations.push(new fade_1.FadeAnimation(root, data.fades, context, true));\n        }\n        if (data.moves !== undefined && data.moves.length > 0) {\n            var movesMap = new Map;\n            for (var _i = 0, _a = data.moves; _i < _a.length; _i++) {\n                var move = _a[_i];\n                movesMap.set(move.element.id, move);\n            }\n            animations.push(new move_1.MoveAnimation(root, movesMap, context, false));\n        }\n        if (data.resizes !== undefined && data.resizes.length > 0) {\n            var resizesMap = new Map;\n            for (var _b = 0, _c = data.resizes; _b < _c.length; _b++) {\n                var resize = _c[_b];\n                resizesMap.set(resize.element.id, resize);\n            }\n            animations.push(new resize_1.ResizeAnimation(root, resizesMap, context, false));\n        }\n        if (data.edgeMementi !== undefined && data.edgeMementi.length > 0) {\n            animations.push(new move_1.MorphEdgesAnimation(root, data.edgeMementi, context, false));\n        }\n        return animations;\n    };\n    UpdateModelCommand.prototype.undo = function (context) {\n        return this.performUpdate(this.newRoot, this.oldRoot, context);\n    };\n    UpdateModelCommand.prototype.redo = function (context) {\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    };\n    UpdateModelCommand.KIND = UpdateModelAction.KIND;\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry), inversify_1.optional(),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], UpdateModelCommand.prototype, \"edgeRouterRegistry\", void 0);\n    UpdateModelCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [UpdateModelAction])\n    ], UpdateModelCommand);\n    return UpdateModelCommand;\n}(command_1.Command));\nexports.UpdateModelCommand = UpdateModelCommand;\n//# sourceMappingURL=update-model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar command_1 = require(\"../../base/commands/command\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../select/model\");\nvar viewport_1 = require(\"./viewport\");\nvar model_3 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\n/**\n * Triggered when the user requests the viewer to center on the current model. The resulting\n * CenterCommand changes the scroll setting of the viewport accordingly.\n * It also resets the zoom to its default if retainZoom is false.\n * This action can also be sent from the model source to the client in order to perform such a\n * viewport change programmatically.\n */\nvar CenterAction = /** @class */ (function () {\n    function CenterAction(elementIds, animate, retainZoom) {\n        if (animate === void 0) { animate = true; }\n        if (retainZoom === void 0) { retainZoom = false; }\n        this.elementIds = elementIds;\n        this.animate = animate;\n        this.retainZoom = retainZoom;\n        this.kind = CenterAction.KIND;\n    }\n    CenterAction.KIND = 'center';\n    return CenterAction;\n}());\nexports.CenterAction = CenterAction;\n/**\n * Triggered when the user requests the viewer to fit its content to the available drawing area.\n * The resulting FitToScreenCommand changes the zoom and scroll settings of the viewport so the model\n * can be shown completely. This action can also be sent from the model source to the client in order\n * to perform such a viewport change programmatically.\n */\nvar FitToScreenAction = /** @class */ (function () {\n    function FitToScreenAction(elementIds, padding, maxZoom, animate) {\n        if (animate === void 0) { animate = true; }\n        this.elementIds = elementIds;\n        this.padding = padding;\n        this.maxZoom = maxZoom;\n        this.animate = animate;\n        this.kind = FitToScreenAction.KIND;\n    }\n    FitToScreenAction.KIND = 'fit';\n    return FitToScreenAction;\n}());\nexports.FitToScreenAction = FitToScreenAction;\nvar BoundsAwareViewportCommand = /** @class */ (function (_super) {\n    __extends(BoundsAwareViewportCommand, _super);\n    function BoundsAwareViewportCommand(animate) {\n        var _this = _super.call(this) || this;\n        _this.animate = animate;\n        return _this;\n    }\n    BoundsAwareViewportCommand.prototype.initialize = function (model) {\n        var _this = this;\n        if (model_3.isViewport(model)) {\n            this.oldViewport = {\n                scroll: model.scroll,\n                zoom: model.zoom\n            };\n            var allBounds_1 = [];\n            this.getElementIds().forEach(function (id) {\n                var element = model.index.getById(id);\n                if (element && model_1.isBoundsAware(element))\n                    allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n            });\n            if (allBounds_1.length === 0) {\n                model.index.all().forEach(function (element) {\n                    if (model_2.isSelectable(element) && element.selected && model_1.isBoundsAware(element))\n                        allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n                });\n            }\n            if (allBounds_1.length === 0) {\n                model.index.all().forEach(function (element) {\n                    if (model_1.isBoundsAware(element))\n                        allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n                });\n            }\n            if (allBounds_1.length !== 0) {\n                var bounds = allBounds_1.reduce(function (b0, b1) { return geometry_1.combine(b0, b1); });\n                if (geometry_1.isValidDimension(bounds))\n                    this.newViewport = this.getNewViewport(bounds, model);\n            }\n        }\n    };\n    BoundsAwareViewportCommand.prototype.boundsInViewport = function (element, bounds, viewport) {\n        if (element instanceof smodel_1.SChildElement && element.parent !== viewport)\n            return this.boundsInViewport(element.parent, element.parent.localToParent(bounds), viewport);\n        else\n            return bounds;\n    };\n    BoundsAwareViewportCommand.prototype.execute = function (context) {\n        this.initialize(context.root);\n        return this.redo(context);\n    };\n    BoundsAwareViewportCommand.prototype.undo = function (context) {\n        var model = context.root;\n        if (model_3.isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate)\n                return new viewport_1.ViewportAnimation(model, this.newViewport, this.oldViewport, context).start();\n            else {\n                model.scroll = this.oldViewport.scroll;\n                model.zoom = this.oldViewport.zoom;\n            }\n        }\n        return model;\n    };\n    BoundsAwareViewportCommand.prototype.redo = function (context) {\n        var model = context.root;\n        if (model_3.isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate) {\n                return new viewport_1.ViewportAnimation(model, this.oldViewport, this.newViewport, context).start();\n            }\n            else {\n                model.scroll = this.newViewport.scroll;\n                model.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    };\n    BoundsAwareViewportCommand.prototype.equal = function (vp1, vp2) {\n        return vp1.zoom === vp2.zoom && vp1.scroll.x === vp2.scroll.x && vp1.scroll.y === vp2.scroll.y;\n    };\n    BoundsAwareViewportCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [Boolean])\n    ], BoundsAwareViewportCommand);\n    return BoundsAwareViewportCommand;\n}(command_1.Command));\nexports.BoundsAwareViewportCommand = BoundsAwareViewportCommand;\nvar CenterCommand = /** @class */ (function (_super) {\n    __extends(CenterCommand, _super);\n    function CenterCommand(action) {\n        var _this = _super.call(this, action.animate) || this;\n        _this.action = action;\n        return _this;\n    }\n    CenterCommand.prototype.getElementIds = function () {\n        return this.action.elementIds;\n    };\n    CenterCommand.prototype.getNewViewport = function (bounds, model) {\n        if (!geometry_1.isValidDimension(model.canvasBounds)) {\n            return undefined;\n        }\n        var zoom = (this.action.retainZoom && model_3.isViewport(model)) ? model.zoom : 1;\n        var c = geometry_1.center(bounds);\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width / zoom,\n                y: c.y - 0.5 * model.canvasBounds.height / zoom\n            },\n            zoom: zoom\n        };\n    };\n    CenterCommand.KIND = CenterAction.KIND;\n    CenterCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [CenterAction])\n    ], CenterCommand);\n    return CenterCommand;\n}(BoundsAwareViewportCommand));\nexports.CenterCommand = CenterCommand;\nvar FitToScreenCommand = /** @class */ (function (_super) {\n    __extends(FitToScreenCommand, _super);\n    function FitToScreenCommand(action) {\n        var _this = _super.call(this, action.animate) || this;\n        _this.action = action;\n        return _this;\n    }\n    FitToScreenCommand.prototype.getElementIds = function () {\n        return this.action.elementIds;\n    };\n    FitToScreenCommand.prototype.getNewViewport = function (bounds, model) {\n        if (!geometry_1.isValidDimension(model.canvasBounds)) {\n            return undefined;\n        }\n        var c = geometry_1.center(bounds);\n        var delta = this.action.padding === undefined\n            ? 0\n            : 2 * this.action.padding;\n        var zoom = Math.min(model.canvasBounds.width / (bounds.width + delta), model.canvasBounds.height / (bounds.height + delta));\n        if (this.action.maxZoom !== undefined)\n            zoom = Math.min(zoom, this.action.maxZoom);\n        if (zoom === Infinity) {\n            zoom = 1;\n        }\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width / zoom,\n                y: c.y - 0.5 * model.canvasBounds.height / zoom\n            },\n            zoom: zoom\n        };\n    };\n    FitToScreenCommand.KIND = FitToScreenAction.KIND;\n    FitToScreenCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [FitToScreenAction])\n    ], FitToScreenCommand);\n    return FitToScreenCommand;\n}(BoundsAwareViewportCommand));\nexports.FitToScreenCommand = FitToScreenCommand;\nvar CenterKeyboardListener = /** @class */ (function (_super) {\n    __extends(CenterKeyboardListener, _super);\n    function CenterKeyboardListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CenterKeyboardListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyC', 'ctrlCmd', 'shift'))\n            return [new CenterAction([])];\n        if (keyboard_1.matchesKeystroke(event, 'KeyF', 'ctrlCmd', 'shift'))\n            return [new FitToScreenAction([])];\n        return [];\n    };\n    return CenterKeyboardListener;\n}(key_tool_1.KeyListener));\nexports.CenterKeyboardListener = CenterKeyboardListener;\n//# sourceMappingURL=center-fit.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar center_fit_1 = require(\"./center-fit\");\nvar viewport_1 = require(\"./viewport\");\nvar scroll_1 = require(\"./scroll\");\nvar zoom_1 = require(\"./zoom\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar viewportModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, center_fit_1.CenterCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, center_fit_1.FitToScreenCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, viewport_1.SetViewportCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, viewport_1.GetViewportCommand);\n    bind(types_1.TYPES.KeyListener).to(center_fit_1.CenterKeyboardListener);\n    bind(types_1.TYPES.MouseListener).to(scroll_1.ScrollMouseListener);\n    bind(types_1.TYPES.MouseListener).to(zoom_1.ZoomMouseListener);\n});\nexports.default = viewportModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nexports.viewportFeature = Symbol('viewportFeature');\nfunction isViewport(element) {\n    return element instanceof smodel_1.SModelRoot\n        && element.hasFeature(exports.viewportFeature)\n        && 'zoom' in element\n        && 'scroll' in element;\n}\nexports.isViewport = isViewport;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar viewport_1 = require(\"./viewport\");\nvar model_1 = require(\"./model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../routing/model\");\nvar model_4 = require(\"../projection/model\");\nvar center_fit_1 = require(\"./center-fit\");\nvar browser_1 = require(\"../../utils/browser\");\nfunction isScrollable(element) {\n    return 'scroll' in element;\n}\nexports.isScrollable = isScrollable;\nvar ScrollMouseListener = /** @class */ (function (_super) {\n    __extends(ScrollMouseListener, _super);\n    function ScrollMouseListener() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.scrollbarMouseDownDelay = 200;\n        return _this;\n    }\n    ScrollMouseListener.prototype.mouseDown = function (target, event) {\n        var _this = this;\n        var moveable = smodel_utils_1.findParentByFeature(target, model_2.isMoveable);\n        if (moveable === undefined && !(target instanceof model_3.SRoutingHandle)) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport) {\n                this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n                this.scrollbar = this.getScrollbar(event);\n                if (this.scrollbar) {\n                    window.clearTimeout(this.scrollbarMouseDownTimeout);\n                    return this.moveScrollBar(viewport, event, this.scrollbar, true)\n                        .map(function (action) { return new Promise(function (resolve) {\n                        _this.scrollbarMouseDownTimeout = window.setTimeout(function () { return resolve(action); }, _this.scrollbarMouseDownDelay);\n                    }); });\n                }\n            }\n            else {\n                this.lastScrollPosition = undefined;\n                this.scrollbar = undefined;\n            }\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseMove = function (target, event) {\n        if (event.buttons === 0) {\n            return this.mouseUp(target, event);\n        }\n        if (this.scrollbar) {\n            window.clearTimeout(this.scrollbarMouseDownTimeout);\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport) {\n                return this.moveScrollBar(viewport, event, this.scrollbar);\n            }\n        }\n        if (this.lastScrollPosition) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport) {\n                return this.dragCanvas(viewport, event, this.lastScrollPosition);\n            }\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseEnter = function (target, event) {\n        if (target instanceof smodel_1.SModelRoot && event.buttons === 0) {\n            this.mouseUp(target, event);\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseUp = function (target, event) {\n        this.lastScrollPosition = undefined;\n        this.scrollbar = undefined;\n        return [];\n    };\n    ScrollMouseListener.prototype.doubleClick = function (target, event) {\n        var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n        if (viewport) {\n            var scrollbar = this.getScrollbar(event);\n            if (scrollbar) {\n                window.clearTimeout(this.scrollbarMouseDownTimeout);\n                var targetElement = this.findClickTarget(scrollbar, event);\n                var elementId = void 0;\n                if (targetElement && targetElement.id.startsWith('horizontal-projection:')) {\n                    elementId = targetElement.id.substring('horizontal-projection:'.length);\n                }\n                else if (targetElement && targetElement.id.startsWith('vertical-projection:')) {\n                    elementId = targetElement.id.substring('vertical-projection:'.length);\n                }\n                if (elementId) {\n                    return [new center_fit_1.CenterAction([elementId], true, true)];\n                }\n            }\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.dragCanvas = function (viewport, event, lastScrollPosition) {\n        var dx = (event.pageX - lastScrollPosition.x) / viewport.zoom;\n        var dy = (event.pageY - lastScrollPosition.y) / viewport.zoom;\n        var newViewport = {\n            scroll: {\n                x: viewport.scroll.x - dx,\n                y: viewport.scroll.y - dy,\n            },\n            zoom: viewport.zoom\n        };\n        this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n        return [new viewport_1.SetViewportAction(viewport.id, newViewport, false)];\n    };\n    ScrollMouseListener.prototype.moveScrollBar = function (model, event, scrollbar, animate) {\n        if (animate === void 0) { animate = false; }\n        var modelBounds = model_4.getModelBounds(model);\n        if (!modelBounds || model.zoom <= 0) {\n            return [];\n        }\n        var scrollbarRect = scrollbar.getBoundingClientRect();\n        var newScroll;\n        if (this.getScrollbarOrientation(scrollbar) === 'horizontal') {\n            if (scrollbarRect.width <= 0) {\n                return [];\n            }\n            var viewportSize = (model.canvasBounds.width / (model.zoom * modelBounds.width)) * scrollbarRect.width;\n            var position = event.clientX - scrollbarRect.x - viewportSize / 2;\n            if (position < 0) {\n                position = 0;\n            }\n            else if (position > scrollbarRect.width - viewportSize) {\n                position = scrollbarRect.width - viewportSize;\n            }\n            newScroll = {\n                x: modelBounds.x + (position / scrollbarRect.width) * modelBounds.width,\n                y: model.scroll.y\n            };\n        }\n        else {\n            if (scrollbarRect.height <= 0) {\n                return [];\n            }\n            var viewportSize = (model.canvasBounds.height / (model.zoom * modelBounds.height)) * scrollbarRect.height;\n            var position = event.clientY - scrollbarRect.y - viewportSize / 2;\n            if (position < 0) {\n                position = 0;\n            }\n            else if (position > scrollbarRect.height - viewportSize) {\n                position = scrollbarRect.height - viewportSize;\n            }\n            newScroll = {\n                x: model.scroll.x,\n                y: modelBounds.y + (position / scrollbarRect.height) * modelBounds.height\n            };\n        }\n        return [new viewport_1.SetViewportAction(model.id, { scroll: newScroll, zoom: model.zoom }, animate)];\n    };\n    ScrollMouseListener.prototype.getScrollbar = function (event) {\n        var element = event.target;\n        while (element) {\n            if (element.classList && element.classList.contains('sprotty-projection-bar')) {\n                return element;\n            }\n            element = element.parentElement;\n        }\n        return undefined;\n    };\n    ScrollMouseListener.prototype.getScrollbarOrientation = function (scrollbar) {\n        if (scrollbar.classList.contains('horizontal')) {\n            return 'horizontal';\n        }\n        else {\n            return 'vertical';\n        }\n    };\n    ScrollMouseListener.prototype.findClickTarget = function (scrollbar, event) {\n        var matching = Array.from(scrollbar.children).filter(function (child) {\n            return child.id && child.classList.contains('sprotty-projection') && browser_1.hitsMouseEvent(child, event);\n        });\n        if (matching.length > 0) {\n            return matching[matching.length - 1];\n        }\n        return undefined;\n    };\n    return ScrollMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ScrollMouseListener = ScrollMouseListener;\n//# sourceMappingURL=scroll.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar model_2 = require(\"../export/model\");\n/**\n * Model root element that defines a viewport, so it transforms the coordinate system with\n * a `scroll` translation and a `zoom` scaling.\n */\nvar ViewportRootElement = /** @class */ (function (_super) {\n    __extends(ViewportRootElement, _super);\n    function ViewportRootElement(index) {\n        var _this = _super.call(this, index) || this;\n        _this.scroll = { x: 0, y: 0 };\n        _this.zoom = 1;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        return _this;\n    }\n    Object.defineProperty(ViewportRootElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ViewportRootElement.prototype.localToParent = function (point) {\n        var result = {\n            x: (point.x - this.scroll.x) * this.zoom,\n            y: (point.y - this.scroll.y) * this.zoom,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width * this.zoom;\n            result.height = point.height * this.zoom;\n        }\n        return result;\n    };\n    ViewportRootElement.prototype.parentToLocal = function (point) {\n        var result = {\n            x: (point.x / this.zoom) + this.scroll.x,\n            y: (point.y / this.zoom) + this.scroll.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point) && geometry_1.isValidDimension(point)) {\n            result.width = point.width / this.zoom;\n            result.height = point.height / this.zoom;\n        }\n        return result;\n    };\n    ViewportRootElement.DEFAULT_FEATURES = [model_1.viewportFeature, model_2.exportFeature];\n    return ViewportRootElement;\n}(smodel_1.SModelRoot));\nexports.ViewportRootElement = ViewportRootElement;\n//# sourceMappingURL=viewport-root.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar model_1 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar request_command_1 = require(\"../../base/commands/request-command\");\nvar SetViewportAction = /** @class */ (function () {\n    function SetViewportAction(elementId, newViewport, animate) {\n        this.elementId = elementId;\n        this.newViewport = newViewport;\n        this.animate = animate;\n        this.kind = SetViewportAction.KIND;\n    }\n    SetViewportAction.KIND = 'viewport';\n    return SetViewportAction;\n}());\nexports.SetViewportAction = SetViewportAction;\n/**\n * Request action for retrieving the current viewport and canvas bounds.\n */\nvar GetViewportAction = /** @class */ (function () {\n    function GetViewportAction(requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.requestId = requestId;\n        this.kind = GetViewportAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    GetViewportAction.create = function () {\n        return new GetViewportAction(action_1.generateRequestId());\n    };\n    GetViewportAction.KIND = 'getViewport';\n    return GetViewportAction;\n}());\nexports.GetViewportAction = GetViewportAction;\nvar ViewportResult = /** @class */ (function () {\n    function ViewportResult(viewport, canvasBounds, responseId) {\n        this.viewport = viewport;\n        this.canvasBounds = canvasBounds;\n        this.responseId = responseId;\n        this.kind = ViewportResult.KIND;\n    }\n    ViewportResult.KIND = 'viewportResult';\n    return ViewportResult;\n}());\nexports.ViewportResult = ViewportResult;\nvar SetViewportCommand = /** @class */ (function (_super) {\n    __extends(SetViewportCommand, _super);\n    function SetViewportCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.newViewport = action.newViewport;\n        return _this;\n    }\n    SetViewportCommand_1 = SetViewportCommand;\n    SetViewportCommand.prototype.execute = function (context) {\n        var model = context.root;\n        var element = model.index.getById(this.action.elementId);\n        if (element && model_1.isViewport(element)) {\n            this.element = element;\n            this.oldViewport = {\n                scroll: this.element.scroll,\n                zoom: this.element.zoom,\n            };\n            if (this.action.animate)\n                return new ViewportAnimation(this.element, this.oldViewport, this.newViewport, context).start();\n            else {\n                this.element.scroll = this.newViewport.scroll;\n                this.element.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    };\n    SetViewportCommand.prototype.undo = function (context) {\n        return new ViewportAnimation(this.element, this.newViewport, this.oldViewport, context).start();\n    };\n    SetViewportCommand.prototype.redo = function (context) {\n        return new ViewportAnimation(this.element, this.oldViewport, this.newViewport, context).start();\n    };\n    SetViewportCommand.prototype.merge = function (command, context) {\n        if (!this.action.animate && command instanceof SetViewportCommand_1 && this.element === command.element) {\n            this.newViewport = command.newViewport;\n            return true;\n        }\n        return false;\n    };\n    var SetViewportCommand_1;\n    SetViewportCommand.KIND = SetViewportAction.KIND;\n    SetViewportCommand = SetViewportCommand_1 = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetViewportAction])\n    ], SetViewportCommand);\n    return SetViewportCommand;\n}(command_1.MergeableCommand));\nexports.SetViewportCommand = SetViewportCommand;\nvar GetViewportCommand = /** @class */ (function (_super) {\n    __extends(GetViewportCommand, _super);\n    function GetViewportCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    GetViewportCommand.prototype.retrieveResult = function (context) {\n        var elem = context.root;\n        var viewport;\n        if (model_1.isViewport(elem)) {\n            viewport = { scroll: elem.scroll, zoom: elem.zoom };\n        }\n        else {\n            viewport = { scroll: geometry_1.ORIGIN_POINT, zoom: 1 };\n        }\n        return new ViewportResult(viewport, elem.canvasBounds, this.action.requestId);\n    };\n    GetViewportCommand.KIND = GetViewportAction.KIND;\n    GetViewportCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [GetViewportAction])\n    ], GetViewportCommand);\n    return GetViewportCommand;\n}(request_command_1.ModelRequestCommand));\nexports.GetViewportCommand = GetViewportCommand;\nvar ViewportAnimation = /** @class */ (function (_super) {\n    __extends(ViewportAnimation, _super);\n    function ViewportAnimation(element, oldViewport, newViewport, context) {\n        var _this = _super.call(this, context) || this;\n        _this.element = element;\n        _this.oldViewport = oldViewport;\n        _this.newViewport = newViewport;\n        _this.context = context;\n        _this.zoomFactor = Math.log(newViewport.zoom / oldViewport.zoom);\n        return _this;\n    }\n    ViewportAnimation.prototype.tween = function (t, context) {\n        this.element.scroll = {\n            x: (1 - t) * this.oldViewport.scroll.x + t * this.newViewport.scroll.x,\n            y: (1 - t) * this.oldViewport.scroll.y + t * this.newViewport.scroll.y\n        };\n        this.element.zoom = this.oldViewport.zoom * Math.exp(t * this.zoomFactor);\n        return context.root;\n    };\n    return ViewportAnimation;\n}(animation_1.Animation));\nexports.ViewportAnimation = ViewportAnimation;\n//# sourceMappingURL=viewport.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browser_1 = require(\"../../utils/browser\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar viewport_1 = require(\"./viewport\");\nvar model_1 = require(\"./model\");\nfunction isZoomable(element) {\n    return 'zoom' in element;\n}\nexports.isZoomable = isZoomable;\nfunction getZoom(label) {\n    var zoom = 1;\n    var viewport = smodel_utils_1.findParentByFeature(label, model_1.isViewport);\n    if (viewport) {\n        zoom = viewport.zoom;\n    }\n    return zoom;\n}\nexports.getZoom = getZoom;\nvar ZoomMouseListener = /** @class */ (function (_super) {\n    __extends(ZoomMouseListener, _super);\n    function ZoomMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZoomMouseListener.prototype.wheel = function (target, event) {\n        var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n        if (viewport) {\n            var newZoom = this.getZoomFactor(event);\n            var viewportOffset = this.getViewportOffset(target.root, event);\n            var offsetFactor = 1.0 / (newZoom * viewport.zoom) - 1.0 / viewport.zoom;\n            var newViewport = {\n                scroll: {\n                    x: viewport.scroll.x - offsetFactor * viewportOffset.x,\n                    y: viewport.scroll.y - offsetFactor * viewportOffset.y\n                },\n                zoom: viewport.zoom * newZoom\n            };\n            return [new viewport_1.SetViewportAction(viewport.id, newViewport, false)];\n        }\n        return [];\n    };\n    ZoomMouseListener.prototype.getViewportOffset = function (root, event) {\n        var canvasBounds = root.canvasBounds;\n        var windowScroll = browser_1.getWindowScroll();\n        return {\n            x: event.clientX + windowScroll.x - canvasBounds.x,\n            y: event.clientY + windowScroll.y - canvasBounds.y\n        };\n    };\n    ZoomMouseListener.prototype.getZoomFactor = function (event) {\n        if (event.deltaMode === event.DOM_DELTA_PAGE)\n            return Math.exp(-event.deltaY * 0.5);\n        else if (event.deltaMode === event.DOM_DELTA_LINE)\n            return Math.exp(-event.deltaY * 0.05);\n        else // deltaMode === DOM_DELTA_PIXEL\n            return Math.exp(-event.deltaY * 0.005);\n    };\n    return ZoomMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ZoomMouseListener = ZoomMouseListener;\n//# sourceMappingURL=zoom.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar zorder_1 = require(\"./zorder\");\nvar zorderModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, zorder_1.BringToFrontCommand);\n});\nexports.default = zorderModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar command_1 = require(\"../../base/commands/command\");\nvar model_1 = require(\"../routing/model\");\n/**\n * Action to render the selected elements in front of others by manipulating the z-order.\n */\nvar BringToFrontAction = /** @class */ (function () {\n    function BringToFrontAction(elementIDs) {\n        this.elementIDs = elementIDs;\n        this.kind = BringToFrontAction.KIND;\n    }\n    BringToFrontAction.KIND = 'bringToFront';\n    return BringToFrontAction;\n}());\nexports.BringToFrontAction = BringToFrontAction;\nvar BringToFrontCommand = /** @class */ (function (_super) {\n    __extends(BringToFrontCommand, _super);\n    function BringToFrontCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.selected = [];\n        return _this;\n    }\n    BringToFrontCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        this.action.elementIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof model_1.SRoutableElement) {\n                if (element.source)\n                    _this.addToSelection(element.source);\n                if (element.target)\n                    _this.addToSelection(element.target);\n            }\n            if (element instanceof smodel_1.SChildElement) {\n                _this.addToSelection(element);\n            }\n            _this.includeConnectedEdges(element);\n        });\n        return this.redo(context);\n    };\n    BringToFrontCommand.prototype.includeConnectedEdges = function (element) {\n        var _this = this;\n        if (element instanceof model_1.SConnectableElement) {\n            element.incomingEdges.forEach(function (edge) { return _this.addToSelection(edge); });\n            element.outgoingEdges.forEach(function (edge) { return _this.addToSelection(edge); });\n        }\n        if (element instanceof smodel_1.SParentElement) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.includeConnectedEdges(child);\n            }\n        }\n    };\n    BringToFrontCommand.prototype.addToSelection = function (element) {\n        this.selected.push({\n            element: element,\n            index: element.parent.children.indexOf(element)\n        });\n    };\n    BringToFrontCommand.prototype.undo = function (context) {\n        for (var i = this.selected.length - 1; i >= 0; i--) {\n            var selection = this.selected[i];\n            var element = selection.element;\n            element.parent.move(element, selection.index);\n        }\n        return context.root;\n    };\n    BringToFrontCommand.prototype.redo = function (context) {\n        for (var i = 0; i < this.selected.length; i++) {\n            this.bringToFront(this.selected[i]);\n        }\n        return context.root;\n    };\n    BringToFrontCommand.prototype.bringToFront = function (selection) {\n        var element = selection.element;\n        var childrenLength = element.parent.children.length;\n        element.parent.move(element, childrenLength - 1);\n    };\n    BringToFrontCommand.KIND = BringToFrontAction.KIND;\n    BringToFrontCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [BringToFrontAction])\n    ], BringToFrontCommand);\n    return BringToFrontCommand;\n}(command_1.Command));\nexports.BringToFrontCommand = BringToFrontCommand;\n//# sourceMappingURL=zorder.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar sgraph_factory_1 = require(\"./sgraph-factory\");\nvar graphModule = new inversify_1.ContainerModule(function (bind, unbind, isBound, rebind) {\n    rebind(types_1.TYPES.IModelFactory).to(sgraph_factory_1.SGraphFactory).inSingletonScope();\n});\nexports.default = graphModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_factory_1 = require(\"../base/model/smodel-factory\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar sgraph_1 = require(\"./sgraph\");\nvar model_1 = require(\"../features/button/model\");\n/**\n * @deprecated\n * Subclassing SModelFactory is discouraged. Use `registerModelElement`\n * or `configureModelElement` instead.\n */\nvar SGraphFactory = /** @class */ (function (_super) {\n    __extends(SGraphFactory, _super);\n    function SGraphFactory() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.defaultGraphFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SGraph.DEFAULT_FEATURES);\n        _this.defaultNodeFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SNode.DEFAULT_FEATURES);\n        _this.defaultPortFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SPort.DEFAULT_FEATURES);\n        _this.defaultEdgeFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SEdge.DEFAULT_FEATURES);\n        _this.defaultLabelFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SLabel.DEFAULT_FEATURES);\n        _this.defaultCompartmentFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SCompartment.DEFAULT_FEATURES);\n        _this.defaultButtonFeatures = smodel_factory_1.createFeatureSet(model_1.SButton.DEFAULT_FEATURES);\n        return _this;\n    }\n    SGraphFactory.prototype.createElement = function (schema, parent) {\n        var child;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SChildElement))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SChildElement.\");\n            child = regElement;\n        }\n        else if (this.isNodeSchema(schema)) {\n            child = new sgraph_1.SNode();\n            child.features = this.defaultNodeFeatures;\n        }\n        else if (this.isPortSchema(schema)) {\n            child = new sgraph_1.SPort();\n            child.features = this.defaultPortFeatures;\n        }\n        else if (this.isEdgeSchema(schema)) {\n            child = new sgraph_1.SEdge();\n            child.features = this.defaultEdgeFeatures;\n        }\n        else if (this.isLabelSchema(schema)) {\n            child = new sgraph_1.SLabel();\n            child.features = this.defaultLabelFeatures;\n        }\n        else if (this.isCompartmentSchema(schema)) {\n            child = new sgraph_1.SCompartment();\n            child.features = this.defaultCompartmentFeatures;\n        }\n        else if (this.isButtonSchema(schema)) {\n            child = new model_1.SButton();\n            child.features = this.defaultButtonFeatures;\n        }\n        else {\n            child = new smodel_1.SChildElement();\n        }\n        return this.initializeChild(child, schema, parent);\n    };\n    SGraphFactory.prototype.createRoot = function (schema) {\n        var root;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SModelRoot))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SModelRoot.\");\n            root = regElement;\n        }\n        else if (this.isGraphSchema(schema)) {\n            root = new sgraph_1.SGraph();\n            root.features = this.defaultGraphFeatures;\n        }\n        else {\n            root = new smodel_1.SModelRoot();\n        }\n        return this.initializeRoot(root, schema);\n    };\n    SGraphFactory.prototype.isGraphSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'graph';\n    };\n    SGraphFactory.prototype.isNodeSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'node';\n    };\n    SGraphFactory.prototype.isPortSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'port';\n    };\n    SGraphFactory.prototype.isEdgeSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'edge';\n    };\n    SGraphFactory.prototype.isLabelSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'label';\n    };\n    SGraphFactory.prototype.isCompartmentSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'comp';\n    };\n    SGraphFactory.prototype.isButtonSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'button';\n    };\n    SGraphFactory = __decorate([\n        inversify_1.injectable()\n    ], SGraphFactory);\n    return SGraphFactory;\n}(smodel_factory_1.SModelFactory));\nexports.SGraphFactory = SGraphFactory;\n//# sourceMappingURL=sgraph-factory.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../base/model/smodel\");\nvar model_1 = require(\"../features/bounds/model\");\nvar model_2 = require(\"../features/edge-layout/model\");\nvar delete_1 = require(\"../features/edit/delete\");\nvar model_3 = require(\"../features/edit/model\");\nvar model_4 = require(\"../features/fade/model\");\nvar model_5 = require(\"../features/hover/model\");\nvar model_6 = require(\"../features/move/model\");\nvar model_7 = require(\"../features/routing/model\");\nvar model_8 = require(\"../features/select/model\");\nvar viewport_root_1 = require(\"../features/viewport/viewport-root\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar iterable_1 = require(\"../utils/iterable\");\n/**\n * Root element for graph-like models.\n */\nvar SGraph = /** @class */ (function (_super) {\n    __extends(SGraph, _super);\n    function SGraph(index) {\n        if (index === void 0) { index = new SGraphIndex(); }\n        return _super.call(this, index) || this;\n    }\n    return SGraph;\n}(viewport_root_1.ViewportRootElement));\nexports.SGraph = SGraph;\n/**\n * Model element class for nodes, which are the main entities in a graph. A node can be connected to\n * another node via an SEdge. Such a connection can be direct, i.e. the node is the source or target of\n * the edge, or indirect through a port, i.e. it contains an SPort which is the source or target of the edge.\n */\nvar SNode = /** @class */ (function (_super) {\n    __extends(SNode, _super);\n    function SNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SNode.prototype.canConnect = function (routable, role) {\n        return this.children.find(function (c) { return c instanceof SPort; }) === undefined;\n    };\n    SNode.DEFAULT_FEATURES = [model_7.connectableFeature, delete_1.deletableFeature, model_8.selectFeature, model_1.boundsFeature,\n        model_6.moveFeature, model_1.layoutContainerFeature, model_4.fadeFeature, model_5.hoverFeedbackFeature, model_5.popupFeature];\n    return SNode;\n}(model_7.SConnectableElement));\nexports.SNode = SNode;\n/**\n * A port is a connection point for edges. It should always be contained in an SNode.\n */\nvar SPort = /** @class */ (function (_super) {\n    __extends(SPort, _super);\n    function SPort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SPort.DEFAULT_FEATURES = [model_7.connectableFeature, model_8.selectFeature, model_1.boundsFeature, model_4.fadeFeature,\n        model_5.hoverFeedbackFeature];\n    return SPort;\n}(model_7.SConnectableElement));\nexports.SPort = SPort;\n/**\n * Model element class for edges, which are the connectors in a graph. An edge has a source and a target,\n * each of which can be either a node or a port. The source and target elements are referenced via their\n * ids and can be resolved with the index stored in the root element.\n */\nvar SEdge = /** @class */ (function (_super) {\n    __extends(SEdge, _super);\n    function SEdge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SEdge.DEFAULT_FEATURES = [model_3.editFeature, delete_1.deletableFeature, model_8.selectFeature, model_4.fadeFeature,\n        model_5.hoverFeedbackFeature];\n    return SEdge;\n}(model_7.SRoutableElement));\nexports.SEdge = SEdge;\n/**\n * A label can be attached to a node, edge, or port, and contains some text to be rendered in its view.\n */\nvar SLabel = /** @class */ (function (_super) {\n    __extends(SLabel, _super);\n    function SLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.alignment = geometry_1.ORIGIN_POINT;\n        _this.opacity = 1;\n        return _this;\n    }\n    SLabel.DEFAULT_FEATURES = [model_1.boundsFeature, model_1.alignFeature, model_1.layoutableChildFeature,\n        model_2.edgeLayoutFeature, model_4.fadeFeature];\n    return SLabel;\n}(model_1.SShapeElement));\nexports.SLabel = SLabel;\n/**\n * A compartment is used to group multiple child elements such as labels of a node. Usually a `vbox`\n * or `hbox` layout is used to arrange these children.\n */\nvar SCompartment = /** @class */ (function (_super) {\n    __extends(SCompartment, _super);\n    function SCompartment() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.opacity = 1;\n        return _this;\n    }\n    SCompartment.DEFAULT_FEATURES = [model_1.boundsFeature, model_1.layoutContainerFeature, model_1.layoutableChildFeature,\n        model_4.fadeFeature];\n    return SCompartment;\n}(model_1.SShapeElement));\nexports.SCompartment = SCompartment;\n/**\n * A specialized model index that tracks outgoing and incoming edges.\n */\nvar SGraphIndex = /** @class */ (function (_super) {\n    __extends(SGraphIndex, _super);\n    function SGraphIndex() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.outgoing = new Map;\n        _this.incoming = new Map;\n        return _this;\n    }\n    SGraphIndex.prototype.add = function (element) {\n        _super.prototype.add.call(this, element);\n        if (element instanceof SEdge) {\n            // Register the edge in the outgoing map\n            if (element.sourceId) {\n                var sourceArr = this.outgoing.get(element.sourceId);\n                if (sourceArr === undefined)\n                    this.outgoing.set(element.sourceId, [element]);\n                else\n                    sourceArr.push(element);\n            }\n            // Register the edge in the incoming map\n            if (element.targetId) {\n                var targetArr = this.incoming.get(element.targetId);\n                if (targetArr === undefined)\n                    this.incoming.set(element.targetId, [element]);\n                else\n                    targetArr.push(element);\n            }\n        }\n    };\n    SGraphIndex.prototype.remove = function (element) {\n        _super.prototype.remove.call(this, element);\n        if (element instanceof SEdge) {\n            // Remove the edge from the outgoing map\n            var sourceArr = this.outgoing.get(element.sourceId);\n            if (sourceArr !== undefined) {\n                var index = sourceArr.indexOf(element);\n                if (index >= 0) {\n                    if (sourceArr.length === 1)\n                        this.outgoing.delete(element.sourceId);\n                    else\n                        sourceArr.splice(index, 1);\n                }\n            }\n            // Remove the edge from the incoming map\n            var targetArr = this.incoming.get(element.targetId);\n            if (targetArr !== undefined) {\n                var index = targetArr.indexOf(element);\n                if (index >= 0) {\n                    if (targetArr.length === 1)\n                        this.incoming.delete(element.targetId);\n                    else\n                        targetArr.splice(index, 1);\n                }\n            }\n        }\n    };\n    SGraphIndex.prototype.getAttachedElements = function (element) {\n        var _this = this;\n        return new iterable_1.FluentIterableImpl(function () { return ({\n            outgoing: _this.outgoing.get(element.id),\n            incoming: _this.incoming.get(element.id),\n            nextOutgoingIndex: 0,\n            nextIncomingIndex: 0\n        }); }, function (state) {\n            var index = state.nextOutgoingIndex;\n            if (state.outgoing !== undefined && index < state.outgoing.length) {\n                state.nextOutgoingIndex = index + 1;\n                return { done: false, value: state.outgoing[index] };\n            }\n            index = state.nextIncomingIndex;\n            if (state.incoming !== undefined) {\n                // Filter out self-loops: edges that are both outgoing and incoming\n                while (index < state.incoming.length) {\n                    var edge = state.incoming[index];\n                    if (edge.sourceId !== edge.targetId) {\n                        state.nextIncomingIndex = index + 1;\n                        return { done: false, value: edge };\n                    }\n                    index++;\n                }\n            }\n            return { done: true, value: undefined };\n        });\n    };\n    SGraphIndex.prototype.getIncomingEdges = function (element) {\n        return this.incoming.get(element.id) || [];\n    };\n    SGraphIndex.prototype.getOutgoingEdges = function (element) {\n        return this.outgoing.get(element.id) || [];\n    };\n    return SGraphIndex;\n}(smodel_1.SModelIndex));\nexports.SGraphIndex = SGraphIndex;\n//# sourceMappingURL=sgraph.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar inversify_1 = require(\"inversify\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar views_1 = require(\"../features/bounds/views\");\nvar intersection_finder_1 = require(\"../features/edge-intersection/intersection-finder\");\nvar model_1 = require(\"../features/edge-layout/model\");\nvar model_2 = require(\"../features/routing/model\");\nvar routing_1 = require(\"../features/routing/routing\");\nvar views_2 = require(\"../features/routing/views\");\nvar jsx_1 = require(\"../lib/jsx\");\nvar geometry_1 = require(\"../utils/geometry\");\n/**\n * IView component that turns an SGraph element and its children into a tree of virtual DOM elements.\n */\nvar SGraphView = /** @class */ (function () {\n    function SGraphView() {\n    }\n    SGraphView.prototype.render = function (model, context, args) {\n        var edgeRouting = this.edgeRouterRegistry.routeAllChildren(model);\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        return jsx_1.svg(\"svg\", { \"class-sprotty-graph\": true },\n            jsx_1.svg(\"g\", { transform: transform }, context.renderChildren(model, { edgeRouting: edgeRouting })));\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], SGraphView.prototype, \"edgeRouterRegistry\", void 0);\n    SGraphView = __decorate([\n        inversify_1.injectable()\n    ], SGraphView);\n    return SGraphView;\n}());\nexports.SGraphView = SGraphView;\nvar PolylineEdgeView = /** @class */ (function (_super) {\n    __extends(PolylineEdgeView, _super);\n    function PolylineEdgeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PolylineEdgeView.prototype.render = function (edge, context, args) {\n        var route = this.edgeRouterRegistry.route(edge, args);\n        if (route.length === 0) {\n            return this.renderDanglingEdge(\"Cannot compute route\", edge, context);\n        }\n        if (!this.isVisible(edge, route, context)) {\n            if (edge.children.length === 0) {\n                return undefined;\n            }\n            // The children of an edge are not necessarily inside the bounding box of the route,\n            // so we need to render a group to ensure the children have a chance to be rendered.\n            return jsx_1.svg(\"g\", null, context.renderChildren(edge, { route: route }));\n        }\n        return jsx_1.svg(\"g\", { \"class-sprotty-edge\": true, \"class-mouseover\": edge.hoverFeedback },\n            this.renderLine(edge, route, context, args),\n            this.renderAdditionals(edge, route, context),\n            context.renderChildren(edge, { route: route }));\n    };\n    PolylineEdgeView.prototype.renderLine = function (edge, segments, context, args) {\n        var firstPoint = segments[0];\n        var path = \"M \" + firstPoint.x + \",\" + firstPoint.y;\n        for (var i = 1; i < segments.length; i++) {\n            var p = segments[i];\n            path += \" L \" + p.x + \",\" + p.y;\n        }\n        return jsx_1.svg(\"path\", { d: path });\n    };\n    PolylineEdgeView.prototype.renderAdditionals = function (edge, segments, context) {\n        return [];\n    };\n    PolylineEdgeView.prototype.renderDanglingEdge = function (message, edge, context) {\n        return jsx_1.svg(\"text\", { \"class-sprotty-edge-dangling\": true, title: message }, \"?\");\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], PolylineEdgeView.prototype, \"edgeRouterRegistry\", void 0);\n    PolylineEdgeView = __decorate([\n        inversify_1.injectable()\n    ], PolylineEdgeView);\n    return PolylineEdgeView;\n}(views_2.RoutableView));\nexports.PolylineEdgeView = PolylineEdgeView;\n/**\n * A `PolylineEdgeView` that renders jumps over intersections.\n *\n * In order to find intersections, `IntersectionFinder` needs to be configured as a `TYPES.IEdgeRoutePostprocessor`\n * so that that intersections are declared as `IntersectingRoutedPoint` in the computed routes.\n *\n * @see IntersectionFinder\n * @see IntersectingRoutedPoint\n * @see EdgeRouterRegistry\n */\nvar JumpingPolylineEdgeView = /** @class */ (function (_super) {\n    __extends(JumpingPolylineEdgeView, _super);\n    function JumpingPolylineEdgeView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.jumpOffsetBefore = 5;\n        _this.jumpOffsetAfter = 5;\n        _this.skipOffsetBefore = 3;\n        _this.skipOffsetAfter = 2;\n        return _this;\n    }\n    JumpingPolylineEdgeView.prototype.renderLine = function (edge, segments, context, args) {\n        var path = '';\n        for (var i = 0; i < segments.length; i++) {\n            var p = segments[i];\n            if (i === 0) {\n                path = \"M \" + p.x + \",\" + p.y;\n            }\n            if (intersection_finder_1.isIntersectingRoutedPoint(p)) {\n                path += this.intersectionPath(edge, segments, p, args);\n            }\n            if (i !== 0) {\n                path += \" L \" + p.x + \",\" + p.y;\n            }\n        }\n        return jsx_1.svg(\"path\", { d: path });\n    };\n    JumpingPolylineEdgeView.prototype.intersectionPath = function (edge, segments, intersectingPoint, args) {\n        var path = '';\n        for (var _i = 0, _a = intersectingPoint.intersections.sort(intersection_finder_1.BY_X_THEN_Y); _i < _a.length; _i++) {\n            var intersection = _a[_i];\n            var otherLineSegment = this.getOtherLineSegment(edge, intersection, args);\n            if (otherLineSegment === undefined) {\n                continue;\n            }\n            var lineSegment = this.getLineSegment(edge, intersection, args, segments);\n            var intersectionPoint = intersection.intersectionPoint;\n            if (Math.abs(lineSegment.slopeOrMax) < Math.abs(otherLineSegment.slopeOrMax)) {\n                path += this.createJumpPath(intersectionPoint, lineSegment);\n            }\n            else {\n                path += this.createSkipPath(intersectionPoint, lineSegment);\n            }\n        }\n        return path;\n    };\n    JumpingPolylineEdgeView.prototype.getOtherLineSegment = function (currentEdge, intersection, args) {\n        var otherEdgeId = intersection.routable1 === currentEdge.id ? intersection.routable2 : intersection.routable1;\n        var otherEdge = currentEdge.index.getById(otherEdgeId);\n        if (!(otherEdge instanceof model_2.SRoutableElement)) {\n            return undefined;\n        }\n        return this.getLineSegment(otherEdge, intersection, args);\n    };\n    JumpingPolylineEdgeView.prototype.getLineSegment = function (edge, intersection, args, segments) {\n        var route = segments ? segments : this.edgeRouterRegistry.route(edge, args);\n        var index = intersection.routable1 === edge.id ? intersection.segmentIndex1 : intersection.segmentIndex2;\n        return new geometry_1.PointToPointLine(route[index], route[index + 1]);\n    };\n    JumpingPolylineEdgeView.prototype.createJumpPath = function (intersectionPoint, lineSegment) {\n        var anchorBefore = geometry_1.shiftTowards(intersectionPoint, lineSegment.p1, this.jumpOffsetBefore);\n        var anchorAfter = geometry_1.shiftTowards(intersectionPoint, lineSegment.p2, this.jumpOffsetAfter);\n        var rotation = lineSegment.p1.x < lineSegment.p2.x ? 1 : 0;\n        return \" L \" + anchorBefore.x + \",\" + anchorBefore.y + \" A 1,1 0,0 \" + rotation + \" \" + anchorAfter.x + \",\" + anchorAfter.y;\n    };\n    JumpingPolylineEdgeView.prototype.createSkipPath = function (intersectionPoint, lineSegment) {\n        var offsetBefore;\n        var offsetAfter;\n        if (intersectionPoint.y < lineSegment.p1.y) {\n            offsetBefore = -this.skipOffsetBefore;\n            offsetAfter = this.jumpOffsetAfter + this.skipOffsetAfter;\n        }\n        else {\n            offsetBefore = this.jumpOffsetBefore + this.skipOffsetAfter;\n            offsetAfter = -this.skipOffsetBefore;\n        }\n        var anchorBefore = geometry_1.shiftTowards(intersectionPoint, lineSegment.p1, offsetBefore);\n        var anchorAfter = geometry_1.shiftTowards(intersectionPoint, lineSegment.p2, offsetAfter);\n        return \" L \" + anchorBefore.x + \",\" + anchorBefore.y + \" M \" + anchorAfter.x + \",\" + anchorAfter.y;\n    };\n    JumpingPolylineEdgeView = __decorate([\n        inversify_1.injectable()\n    ], JumpingPolylineEdgeView);\n    return JumpingPolylineEdgeView;\n}(PolylineEdgeView));\nexports.JumpingPolylineEdgeView = JumpingPolylineEdgeView;\n/**\n * A `PolylineEdgeView` that renders gaps on intersections.\n *\n * In order to find intersections, `IntersectionFinder` needs to be configured as a `TYPES.IEdgeRoutePostprocessor`\n * so that that intersections are declared as `IntersectingRoutedPoint` in the computed routes.\n *\n * @see IntersectionFinder\n * @see IntersectingRoutedPoint\n * @see EdgeRouterRegistry\n */\nvar PolylineEdgeViewWithGapsOnIntersections = /** @class */ (function (_super) {\n    __extends(PolylineEdgeViewWithGapsOnIntersections, _super);\n    function PolylineEdgeViewWithGapsOnIntersections() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.skipOffsetBefore = 3;\n        _this.skipOffsetAfter = 3;\n        return _this;\n    }\n    PolylineEdgeViewWithGapsOnIntersections.prototype.createJumpPath = function (intersectionPoint, lineSegment) {\n        return \"\";\n    };\n    PolylineEdgeViewWithGapsOnIntersections.prototype.createSkipPath = function (intersectionPoint, lineSegment) {\n        var anchorBefore = geometry_1.shiftTowards(intersectionPoint, lineSegment.p1, this.skipOffsetBefore);\n        var anchorAfter = geometry_1.shiftTowards(intersectionPoint, lineSegment.p2, this.skipOffsetAfter);\n        return \" L \" + anchorBefore.x + \",\" + anchorBefore.y + \" M \" + anchorAfter.x + \",\" + anchorAfter.y;\n    };\n    PolylineEdgeViewWithGapsOnIntersections = __decorate([\n        inversify_1.injectable()\n    ], PolylineEdgeViewWithGapsOnIntersections);\n    return PolylineEdgeViewWithGapsOnIntersections;\n}(JumpingPolylineEdgeView));\nexports.PolylineEdgeViewWithGapsOnIntersections = PolylineEdgeViewWithGapsOnIntersections;\nvar SRoutingHandleView = /** @class */ (function () {\n    function SRoutingHandleView() {\n        this.minimalPointDistance = 10;\n    }\n    SRoutingHandleView.prototype.render = function (handle, context, args) {\n        if (args && args.route) {\n            if (handle.parent instanceof model_2.SRoutableElement) {\n                var router = this.edgeRouterRegistry.get(handle.parent.routerKind);\n                var theRoute = args.route === undefined ? this.edgeRouterRegistry.route(handle.parent, args) : args.route;\n                var position = router.getHandlePosition(handle.parent, theRoute, handle);\n                if (position !== undefined) {\n                    var node = jsx_1.svg(\"circle\", { \"class-sprotty-routing-handle\": true, \"class-selected\": handle.selected, \"class-mouseover\": handle.hoverFeedback, cx: position.x, cy: position.y, r: this.getRadius() });\n                    vnode_utils_1.setAttr(node, 'data-kind', handle.kind);\n                    return node;\n                }\n            }\n        }\n        // Fallback: Create an empty group\n        return jsx_1.svg(\"g\", null);\n    };\n    SRoutingHandleView.prototype.getRadius = function () {\n        return 7;\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], SRoutingHandleView.prototype, \"edgeRouterRegistry\", void 0);\n    SRoutingHandleView = __decorate([\n        inversify_1.injectable()\n    ], SRoutingHandleView);\n    return SRoutingHandleView;\n}());\nexports.SRoutingHandleView = SRoutingHandleView;\nvar SLabelView = /** @class */ (function (_super) {\n    __extends(SLabelView, _super);\n    function SLabelView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SLabelView.prototype.render = function (label, context) {\n        if (!model_1.isEdgeLayoutable(label) && !this.isVisible(label, context)) {\n            return undefined;\n        }\n        var vnode = jsx_1.svg(\"text\", { \"class-sprotty-label\": true }, label.text);\n        var subType = smodel_utils_1.getSubType(label);\n        if (subType) {\n            vnode_utils_1.setAttr(vnode, 'class', subType);\n        }\n        return vnode;\n    };\n    SLabelView = __decorate([\n        inversify_1.injectable()\n    ], SLabelView);\n    return SLabelView;\n}(views_1.ShapeView));\nexports.SLabelView = SLabelView;\nvar SCompartmentView = /** @class */ (function () {\n    function SCompartmentView() {\n    }\n    SCompartmentView.prototype.render = function (compartment, context, args) {\n        var translate = \"translate(\" + compartment.bounds.x + \", \" + compartment.bounds.y + \")\";\n        var vnode = jsx_1.svg(\"g\", { transform: translate, \"class-sprotty-comp\": \"{true}\" }, context.renderChildren(compartment));\n        var subType = smodel_utils_1.getSubType(compartment);\n        if (subType)\n            vnode_utils_1.setAttr(vnode, 'class', subType);\n        return vnode;\n    };\n    SCompartmentView = __decorate([\n        inversify_1.injectable()\n    ], SCompartmentView);\n    return SCompartmentView;\n}());\nexports.SCompartmentView = SCompartmentView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// ------------------ Base ------------------\n__export(require(\"./base/actions/action\"));\n__export(require(\"./base/actions/action-dispatcher\"));\n__export(require(\"./base/actions/action-handler\"));\n__export(require(\"./base/actions/diagram-locker\"));\n__export(require(\"./base/animations/animation-frame-syncer\"));\n__export(require(\"./base/animations/animation\"));\n__export(require(\"./base/animations/easing\"));\n__export(require(\"./base/commands/command\"));\n__export(require(\"./base/commands/command-registration\"));\n__export(require(\"./base/commands/command-stack-options\"));\n__export(require(\"./base/commands/command-stack\"));\n__export(require(\"./base/features/initialize-canvas\"));\n__export(require(\"./base/features/set-model\"));\n__export(require(\"./base/model/smodel-factory\"));\n__export(require(\"./base/model/smodel-utils\"));\n__export(require(\"./base/model/smodel\"));\n__export(require(\"./base/tool-manager/tool-manager\"));\n__export(require(\"./base/tool-manager/tool\"));\n__export(require(\"./base/ui-extensions/ui-extension-registry\"));\n__export(require(\"./base/ui-extensions/ui-extension\"));\n__export(require(\"./base/views/key-tool\"));\n__export(require(\"./base/views/mouse-tool\"));\n__export(require(\"./base/views/thunk-view\"));\n__export(require(\"./base/views/view\"));\n__export(require(\"./base/views/viewer-cache\"));\n__export(require(\"./base/views/viewer-options\"));\n__export(require(\"./base/views/viewer\"));\n__export(require(\"./base/views/vnode-postprocessor\"));\n__export(require(\"./base/views/vnode-utils\"));\n__export(require(\"./base/types\"));\nvar di_config_1 = __importDefault(require(\"./base/di.config\"));\nexports.defaultModule = di_config_1.default;\n// ------------------ Features ------------------\n__export(require(\"./features/bounds/bounds-manipulation\"));\n__export(require(\"./features/bounds/hidden-bounds-updater\"));\n__export(require(\"./features/bounds/layout\"));\n__export(require(\"./features/bounds/model\"));\n__export(require(\"./features/bounds/vbox-layout\"));\n__export(require(\"./features/bounds/hbox-layout\"));\n__export(require(\"./features/bounds/stack-layout\"));\n__export(require(\"./features/bounds/views\"));\n__export(require(\"./features/button/button-handler\"));\n__export(require(\"./features/button/model\"));\n__export(require(\"./features/command-palette/action-providers\"));\n__export(require(\"./features/command-palette/command-palette\"));\n__export(require(\"./features/context-menu/context-menu-service\"));\n__export(require(\"./features/context-menu/menu-providers\"));\n__export(require(\"./features/context-menu/mouse-listener\"));\n__export(require(\"./features/edge-layout/di.config\"));\n__export(require(\"./features/edge-layout/edge-layout\"));\n__export(require(\"./features/edge-layout/model\"));\n__export(require(\"./features/edit/create\"));\n__export(require(\"./features/edit/create-on-drag\"));\n__export(require(\"./features/edit/di.config\"));\n__export(require(\"./features/edit/delete\"));\n__export(require(\"./features/edit/edit-label\"));\n__export(require(\"./features/edit/edit-label-ui\"));\n__export(require(\"./features/edit/edit-routing\"));\n__export(require(\"./features/edit/model\"));\n__export(require(\"./features/edit/reconnect\"));\n__export(require(\"./features/expand/expand\"));\n__export(require(\"./features/expand/model\"));\n__export(require(\"./features/expand/views\"));\n__export(require(\"./features/export/export\"));\n__export(require(\"./features/export/model\"));\n__export(require(\"./features/export/svg-exporter\"));\n__export(require(\"./features/fade/fade\"));\n__export(require(\"./features/fade/model\"));\n__export(require(\"./features/hover/hover\"));\n__export(require(\"./features/hover/model\"));\n__export(require(\"./features/decoration/model\"));\n__export(require(\"./features/decoration/views\"));\n__export(require(\"./features/decoration/decoration-placer\"));\n__export(require(\"./features/edge-intersection/intersection-finder\"));\n__export(require(\"./features/edge-intersection/sweepline\"));\n__export(require(\"./features/move/model\"));\n__export(require(\"./features/move/move\"));\n__export(require(\"./features/move/snap\"));\n__export(require(\"./features/nameable/model\"));\n__export(require(\"./features/open/open\"));\n__export(require(\"./features/open/model\"));\n__export(require(\"./features/projection/model\"));\n__export(require(\"./features/projection/views\"));\n__export(require(\"./features/routing/anchor\"));\n__export(require(\"./features/routing/linear-edge-router\"));\n__export(require(\"./features/routing/manhattan-anchors\"));\n__export(require(\"./features/routing/manhattan-edge-router\"));\n__export(require(\"./features/routing/model\"));\n__export(require(\"./features/routing/polyline-anchors\"));\n__export(require(\"./features/routing/polyline-edge-router\"));\n__export(require(\"./features/routing/routing\"));\n__export(require(\"./features/routing/views\"));\n__export(require(\"./features/select/model\"));\n__export(require(\"./features/select/select\"));\n__export(require(\"./features/undo-redo/undo-redo\"));\n__export(require(\"./features/update/model-matching\"));\n__export(require(\"./features/update/update-model\"));\n__export(require(\"./features/viewport/center-fit\"));\n__export(require(\"./features/viewport/model\"));\n__export(require(\"./features/viewport/scroll\"));\n__export(require(\"./features/viewport/viewport-root\"));\n__export(require(\"./features/viewport/viewport\"));\n__export(require(\"./features/viewport/zoom\"));\n__export(require(\"./features/zorder/zorder\"));\nvar di_config_2 = __importDefault(require(\"./graph/di.config\"));\nexports.graphModule = di_config_2.default;\nvar di_config_3 = __importDefault(require(\"./features/bounds/di.config\"));\nexports.boundsModule = di_config_3.default;\nvar di_config_4 = __importDefault(require(\"./features/button/di.config\"));\nexports.buttonModule = di_config_4.default;\nvar di_config_5 = __importDefault(require(\"./features/command-palette/di.config\"));\nexports.commandPaletteModule = di_config_5.default;\nvar di_config_6 = __importDefault(require(\"./features/context-menu/di.config\"));\nexports.contextMenuModule = di_config_6.default;\nvar di_config_7 = __importDefault(require(\"./features/decoration/di.config\"));\nexports.decorationModule = di_config_7.default;\nvar di_config_8 = __importDefault(require(\"./features/edge-intersection/di.config\"));\nexports.edgeIntersectionModule = di_config_8.default;\nvar di_config_9 = __importDefault(require(\"./features/edge-layout/di.config\"));\nexports.edgeLayoutModule = di_config_9.default;\nvar di_config_10 = __importDefault(require(\"./features/expand/di.config\"));\nexports.expandModule = di_config_10.default;\nvar di_config_11 = __importDefault(require(\"./features/export/di.config\"));\nexports.exportModule = di_config_11.default;\nvar di_config_12 = __importDefault(require(\"./features/fade/di.config\"));\nexports.fadeModule = di_config_12.default;\nvar di_config_13 = __importDefault(require(\"./features/hover/di.config\"));\nexports.hoverModule = di_config_13.default;\nvar di_config_14 = __importDefault(require(\"./features/move/di.config\"));\nexports.moveModule = di_config_14.default;\nvar di_config_15 = __importDefault(require(\"./features/open/di.config\"));\nexports.openModule = di_config_15.default;\nvar di_config_16 = __importDefault(require(\"./features/routing/di.config\"));\nexports.routingModule = di_config_16.default;\nvar di_config_17 = __importDefault(require(\"./features/select/di.config\"));\nexports.selectModule = di_config_17.default;\nvar di_config_18 = __importDefault(require(\"./features/undo-redo/di.config\"));\nexports.undoRedoModule = di_config_18.default;\nvar di_config_19 = __importDefault(require(\"./features/update/di.config\"));\nexports.updateModule = di_config_19.default;\nvar di_config_20 = __importDefault(require(\"./features/viewport/di.config\"));\nexports.viewportModule = di_config_20.default;\nvar di_config_21 = __importDefault(require(\"./features/zorder/di.config\"));\nexports.zorderModule = di_config_21.default;\n// ------------------ Graph ------------------\n__export(require(\"./graph/sgraph-factory\"));\n__export(require(\"./graph/sgraph\"));\n__export(require(\"./graph/views\"));\n// ------------------ Library ------------------\n__export(require(\"./lib/modules\"));\n__export(require(\"./lib/generic-views\"));\n__export(require(\"./lib/html-views\"));\n__export(require(\"./lib/jsx\"));\n__export(require(\"./lib/model\"));\n__export(require(\"./lib/svg-views\"));\n// ------------------ Model Source ------------------\n__export(require(\"./model-source/commit-model\"));\n__export(require(\"./model-source/diagram-server\"));\n__export(require(\"./model-source/local-model-source\"));\n__export(require(\"./model-source/logging\"));\n__export(require(\"./model-source/model-source\"));\n__export(require(\"./model-source/websocket\"));\nvar di_config_22 = __importDefault(require(\"./model-source/di.config\"));\nexports.modelSourceModule = di_config_22.default;\n// ------------------ Utilities ------------------\n__export(require(\"./utils/browser\"));\n__export(require(\"./utils/color\"));\n__export(require(\"./utils/geometry\"));\n__export(require(\"./utils/inversify\"));\n__export(require(\"./utils/logging\"));\n__export(require(\"./utils/registry\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"./jsx\");\nvar inversify_1 = require(\"inversify\");\nvar virtualize_1 = __importDefault(require(\"./virtualize\"));\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar views_1 = require(\"../features/bounds/views\");\nvar model_1 = require(\"./model\");\nvar PreRenderedView = /** @class */ (function (_super) {\n    __extends(PreRenderedView, _super);\n    function PreRenderedView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PreRenderedView.prototype.render = function (model, context) {\n        if (model instanceof model_1.ShapedPreRenderedElement && !this.isVisible(model, context)) {\n            return undefined;\n        }\n        var node = virtualize_1.default(model.code);\n        if (node === null)\n            return undefined;\n        this.correctNamespace(node);\n        return node;\n    };\n    PreRenderedView.prototype.correctNamespace = function (node) {\n        if (node.sel === 'svg' || node.sel === 'g')\n            vnode_utils_1.setNamespace(node, 'http://www.w3.org/2000/svg');\n    };\n    PreRenderedView = __decorate([\n        inversify_1.injectable()\n    ], PreRenderedView);\n    return PreRenderedView;\n}(views_1.ShapeView));\nexports.PreRenderedView = PreRenderedView;\n/**\n * An SVG `foreignObject` view with a namespace specified by the provided `ForeignObjectElement`.\n * Note that `foreignObject` may not be supported by all browsers or SVG viewers.\n */\nvar ForeignObjectView = /** @class */ (function () {\n    function ForeignObjectView() {\n    }\n    ForeignObjectView.prototype.render = function (model, context) {\n        var foreignObjectContents = virtualize_1.default(model.code);\n        if (foreignObjectContents === null)\n            return undefined;\n        var node = jsx_1.svg(\"g\", null,\n            jsx_1.svg(\"foreignObject\", { requiredFeatures: 'http://www.w3.org/TR/SVG11/feature#Extensibility', height: model.bounds.height, width: model.bounds.width, x: 0, y: 0 }, foreignObjectContents),\n            context.renderChildren(model));\n        vnode_utils_1.setAttr(node, 'class', model.type);\n        vnode_utils_1.setNamespace(foreignObjectContents, model.namespace);\n        return node;\n    };\n    ForeignObjectView = __decorate([\n        inversify_1.injectable()\n    ], ForeignObjectView);\n    return ForeignObjectView;\n}());\nexports.ForeignObjectView = ForeignObjectView;\n//# sourceMappingURL=generic-views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx html */\nvar jsx_1 = require(\"./jsx\");\nvar inversify_1 = require(\"inversify\");\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\n/**\n * View for `HtmlRoot` elements. Typically this is used in hover popup boxes.\n */\nvar HtmlRootView = /** @class */ (function () {\n    function HtmlRootView() {\n    }\n    HtmlRootView.prototype.render = function (model, context) {\n        var root = jsx_1.html(\"div\", null, context.renderChildren(model));\n        for (var _i = 0, _a = model.classes; _i < _a.length; _i++) {\n            var c = _a[_i];\n            vnode_utils_1.setClass(root, c, true);\n        }\n        return root;\n    };\n    HtmlRootView = __decorate([\n        inversify_1.injectable()\n    ], HtmlRootView);\n    return HtmlRootView;\n}());\nexports.HtmlRootView = HtmlRootView;\n//# sourceMappingURL=html-views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom_1 = require(\"snabbdom\");\nvar modulesNS = ['hook', 'on', 'style', 'class', 'props', 'attrs', 'dataset'];\nvar SVGNS = 'http://www.w3.org/2000/svg';\nfunction normalizeAttrs(source, defNS, namespace) {\n    var data = {};\n    if (namespace) {\n        data.ns = namespace;\n    }\n    if (source === null) {\n        return data;\n    }\n    modulesNS.forEach(function (mod) {\n        if (source[mod]) {\n            data[mod] = source[mod];\n        }\n    });\n    Object.keys(source).forEach(function (key) {\n        if (key === 'key' || key === 'classNames' || key === 'selector')\n            return;\n        var idx = key.indexOf('-');\n        if (idx > 0)\n            addAttr(key.slice(0, idx), key.slice(idx + 1), source[key]);\n        else if (!data[key])\n            addAttr(defNS, key, source[key]);\n    });\n    return data;\n    function addAttr(modname, key, val) {\n        var mod = data[modname] || (data[modname] = {});\n        mod[key] = val;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction JSX(namespace, defNS) {\n    if (defNS === void 0) { defNS = 'props'; }\n    return function (tag, attrs) {\n        var children = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            children[_i - 2] = arguments[_i];\n        }\n        return snabbdom_1.jsx(tag, normalizeAttrs(attrs, defNS, namespace), children);\n    };\n}\nexports.JSX = JSX;\nvar html = JSX();\nexports.html = html;\nvar svg = JSX(SVGNS, 'attrs');\nexports.svg = svg;\n//# sourceMappingURL=jsx.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../base/model/smodel\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar model_1 = require(\"../features/bounds/model\");\nvar model_2 = require(\"../features/move/model\");\nvar model_3 = require(\"../features/select/model\");\nvar sgraph_1 = require(\"../graph/sgraph\");\nvar anchor_1 = require(\"../features/routing/anchor\");\n/**\n * A node that is represented by a circle.\n */\nvar CircularNode = /** @class */ (function (_super) {\n    __extends(CircularNode, _super);\n    function CircularNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(CircularNode.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.ELLIPTIC_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CircularNode;\n}(sgraph_1.SNode));\nexports.CircularNode = CircularNode;\n/**\n * A node that is represented by a rectangle.\n */\nvar RectangularNode = /** @class */ (function (_super) {\n    __extends(RectangularNode, _super);\n    function RectangularNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(RectangularNode.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.RECTANGULAR_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RectangularNode;\n}(sgraph_1.SNode));\nexports.RectangularNode = RectangularNode;\n/**\n * A node that is represented by a diamond.\n */\nvar DiamondNode = /** @class */ (function (_super) {\n    __extends(DiamondNode, _super);\n    function DiamondNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(DiamondNode.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.DIAMOND_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return DiamondNode;\n}(sgraph_1.SNode));\nexports.DiamondNode = DiamondNode;\n/**\n * A port that is represented by a circle.\n */\nvar CircularPort = /** @class */ (function (_super) {\n    __extends(CircularPort, _super);\n    function CircularPort() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(CircularPort.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.ELLIPTIC_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CircularPort;\n}(sgraph_1.SPort));\nexports.CircularPort = CircularPort;\n/**\n * A port that is represented by a rectangle.\n */\nvar RectangularPort = /** @class */ (function (_super) {\n    __extends(RectangularPort, _super);\n    function RectangularPort() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(RectangularPort.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.RECTANGULAR_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RectangularPort;\n}(sgraph_1.SPort));\nexports.RectangularPort = RectangularPort;\n/**\n * Root model element class for HTML content. Usually this is rendered with a `div` DOM element.\n */\nvar HtmlRoot = /** @class */ (function (_super) {\n    __extends(HtmlRoot, _super);\n    function HtmlRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.classes = [];\n        return _this;\n    }\n    return HtmlRoot;\n}(smodel_1.SModelRoot));\nexports.HtmlRoot = HtmlRoot;\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n */\nvar PreRenderedElement = /** @class */ (function (_super) {\n    __extends(PreRenderedElement, _super);\n    function PreRenderedElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PreRenderedElement;\n}(smodel_1.SChildElement));\nexports.PreRenderedElement = PreRenderedElement;\n/**\n * Same as PreRenderedElement, but with a position and a size.\n */\nvar ShapedPreRenderedElement = /** @class */ (function (_super) {\n    __extends(ShapedPreRenderedElement, _super);\n    function ShapedPreRenderedElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        _this.selected = false;\n        _this.alignment = geometry_1.ORIGIN_POINT;\n        return _this;\n    }\n    Object.defineProperty(ShapedPreRenderedElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShapedPreRenderedElement.DEFAULT_FEATURES = [model_2.moveFeature, model_1.boundsFeature, model_3.selectFeature, model_1.alignFeature];\n    return ShapedPreRenderedElement;\n}(PreRenderedElement));\nexports.ShapedPreRenderedElement = ShapedPreRenderedElement;\n/**\n * A `foreignObject` element to be transferred to the DOM within the SVG.\n *\n * This can be useful to to benefit from e.g. HTML rendering features, such as line wrapping, inside of\n * the SVG diagram.  Note that `foreignObject` is not supported by all browsers and SVG viewers may not\n * support rendering the `foreignObject` content.\n *\n * If no dimensions are specified in the schema element, this element will obtain the dimension of\n * its parent to fill the entire available room. Thus, this element requires specified bounds itself\n * or bounds to be available for its parent.\n */\nvar ForeignObjectElement = /** @class */ (function (_super) {\n    __extends(ForeignObjectElement, _super);\n    function ForeignObjectElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(ForeignObjectElement.prototype, \"bounds\", {\n        get: function () {\n            if (geometry_1.isValidDimension(this.size)) {\n                return {\n                    x: this.position.x,\n                    y: this.position.y,\n                    width: this.size.width,\n                    height: this.size.height\n                };\n            }\n            else if (model_1.isBoundsAware(this.parent)) {\n                return {\n                    x: this.position.x,\n                    y: this.position.y,\n                    width: this.parent.bounds.width,\n                    height: this.parent.bounds.height\n                };\n            }\n            return geometry_1.EMPTY_BOUNDS;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ForeignObjectElement;\n}(ShapedPreRenderedElement));\nexports.ForeignObjectElement = ForeignObjectElement;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar di_config_1 = __importDefault(require(\"../base/di.config\"));\nvar di_config_2 = __importDefault(require(\"../model-source/di.config\"));\nvar di_config_3 = __importDefault(require(\"../features/bounds/di.config\"));\nvar di_config_4 = __importDefault(require(\"../features/button/di.config\"));\nvar di_config_5 = __importDefault(require(\"../features/command-palette/di.config\"));\nvar di_config_6 = __importDefault(require(\"../features/context-menu/di.config\"));\nvar di_config_7 = __importDefault(require(\"../features/decoration/di.config\"));\nvar di_config_8 = __importDefault(require(\"../features/edge-layout/di.config\"));\nvar di_config_9 = require(\"../features/edit/di.config\");\nvar di_config_10 = __importDefault(require(\"../features/expand/di.config\"));\nvar di_config_11 = __importDefault(require(\"../features/export/di.config\"));\nvar di_config_12 = __importDefault(require(\"../features/fade/di.config\"));\nvar di_config_13 = __importDefault(require(\"../features/hover/di.config\"));\nvar di_config_14 = __importDefault(require(\"../features/move/di.config\"));\nvar di_config_15 = __importDefault(require(\"../features/open/di.config\"));\nvar di_config_16 = __importDefault(require(\"../features/routing/di.config\"));\nvar di_config_17 = __importDefault(require(\"../features/select/di.config\"));\nvar di_config_18 = __importDefault(require(\"../features/undo-redo/di.config\"));\nvar di_config_19 = __importDefault(require(\"../features/update/di.config\"));\nvar di_config_20 = __importDefault(require(\"../features/viewport/di.config\"));\nvar di_config_21 = __importDefault(require(\"../features/zorder/di.config\"));\n/**\n * Load the default set of container modules provided by Sprotty.\n */\nfunction loadDefaultModules(container, options) {\n    var modules = [\n        di_config_1.default, di_config_2.default, di_config_3.default, di_config_4.default,\n        di_config_5.default, di_config_6.default, di_config_7.default, di_config_9.edgeEditModule,\n        di_config_8.default, di_config_10.default, di_config_11.default, di_config_12.default,\n        di_config_13.default, di_config_9.labelEditModule, di_config_9.labelEditUiModule, di_config_14.default,\n        di_config_15.default, di_config_16.default, di_config_17.default, di_config_18.default,\n        di_config_19.default, di_config_20.default, di_config_21.default\n    ];\n    if (options && options.exclude) {\n        for (var _i = 0, _a = options.exclude; _i < _a.length; _i++) {\n            var mod = _a[_i];\n            var index = modules.indexOf(mod);\n            if (index >= 0)\n                modules.splice(index, 1);\n        }\n    }\n    container.load.apply(container, modules);\n}\nexports.loadDefaultModules = loadDefaultModules;\n//# sourceMappingURL=modules.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"./jsx\");\nvar sgraph_1 = require(\"../graph/sgraph\");\nvar views_1 = require(\"../features/bounds/views\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar inversify_1 = require(\"inversify\");\nvar SvgViewportView = /** @class */ (function () {\n    function SvgViewportView() {\n    }\n    SvgViewportView.prototype.render = function (model, context, args) {\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        return jsx_1.svg(\"svg\", null,\n            jsx_1.svg(\"g\", { transform: transform }, context.renderChildren(model)));\n    };\n    SvgViewportView = __decorate([\n        inversify_1.injectable()\n    ], SvgViewportView);\n    return SvgViewportView;\n}());\nexports.SvgViewportView = SvgViewportView;\nvar CircularNodeView = /** @class */ (function (_super) {\n    __extends(CircularNodeView, _super);\n    function CircularNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CircularNodeView.prototype.render = function (node, context, args) {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        var radius = this.getRadius(node);\n        return jsx_1.svg(\"g\", null,\n            jsx_1.svg(\"circle\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, r: radius, cx: radius, cy: radius }),\n            context.renderChildren(node));\n    };\n    CircularNodeView.prototype.getRadius = function (node) {\n        var d = Math.min(node.size.width, node.size.height);\n        return d > 0 ? d / 2 : 0;\n    };\n    CircularNodeView = __decorate([\n        inversify_1.injectable()\n    ], CircularNodeView);\n    return CircularNodeView;\n}(views_1.ShapeView));\nexports.CircularNodeView = CircularNodeView;\nvar RectangularNodeView = /** @class */ (function (_super) {\n    __extends(RectangularNodeView, _super);\n    function RectangularNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RectangularNodeView.prototype.render = function (node, context, args) {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        return jsx_1.svg(\"g\", null,\n            jsx_1.svg(\"rect\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, x: \"0\", y: \"0\", width: Math.max(node.size.width, 0), height: Math.max(node.size.height, 0) }),\n            context.renderChildren(node));\n    };\n    RectangularNodeView = __decorate([\n        inversify_1.injectable()\n    ], RectangularNodeView);\n    return RectangularNodeView;\n}(views_1.ShapeView));\nexports.RectangularNodeView = RectangularNodeView;\nvar DiamondNodeView = /** @class */ (function (_super) {\n    __extends(DiamondNodeView, _super);\n    function DiamondNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DiamondNodeView.prototype.render = function (node, context, args) {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        var diamond = new geometry_1.Diamond({ height: Math.max(node.size.height, 0), width: Math.max(node.size.width, 0), x: 0, y: 0 });\n        var points = svgStr(diamond.topPoint) + \" \" + svgStr(diamond.rightPoint) + \" \" + svgStr(diamond.bottomPoint) + \" \" + svgStr(diamond.leftPoint);\n        return jsx_1.svg(\"g\", null,\n            jsx_1.svg(\"polygon\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, points: points }),\n            context.renderChildren(node));\n    };\n    DiamondNodeView = __decorate([\n        inversify_1.injectable()\n    ], DiamondNodeView);\n    return DiamondNodeView;\n}(views_1.ShapeView));\nexports.DiamondNodeView = DiamondNodeView;\nfunction svgStr(point) {\n    return point.x + \",\" + point.y;\n}\nvar EmptyGroupView = /** @class */ (function () {\n    function EmptyGroupView() {\n    }\n    EmptyGroupView.prototype.render = function (model, context) {\n        return jsx_1.svg(\"g\", null);\n    };\n    EmptyGroupView = __decorate([\n        inversify_1.injectable()\n    ], EmptyGroupView);\n    return EmptyGroupView;\n}());\nexports.EmptyGroupView = EmptyGroupView;\n//# sourceMappingURL=svg-views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom_1 = require(\"snabbdom\");\nfunction buildVNodeData(attrs) {\n    var data = {};\n    var addData = function (memo, name) {\n        var _a;\n        if (name !== 'style' && name !== 'class') {\n            var val = unescapeEntities(attrs[name]);\n            memo ? memo[name] = val : memo = (_a = {}, _a[name] = val, _a);\n        }\n        return memo;\n    };\n    var _attrs = Object.keys(attrs).reduce(addData, null);\n    if (_attrs) {\n        data.attrs = _attrs;\n    }\n    var style = parseStyle(attrs);\n    if (style) {\n        data.style = style;\n    }\n    var classes = parseClass(attrs);\n    if (classes) {\n        data.class = classes;\n    }\n    return data;\n}\nfunction parseStyle(attrs) {\n    var addStyle = function (memo, styleProp) {\n        var _a;\n        var res = styleProp.split(':');\n        var name = transformName(res[0].trim());\n        if (name) {\n            var val = res[1].replace('!important', '').trim();\n            memo ? memo[name] = val : memo = (_a = {}, _a[name] = val, _a);\n        }\n        return memo;\n    };\n    try {\n        return attrs.style.split(';').reduce(addStyle, null);\n    }\n    catch (e) {\n        return null;\n    }\n}\nfunction parseClass(attrs) {\n    var addClass = function (memo, className) {\n        var _a;\n        className = className.trim();\n        if (className) {\n            memo ? memo[className] = true : memo = (_a = {}, _a[className] = true, _a);\n        }\n        return memo;\n    };\n    try {\n        return attrs.class.split(' ').reduce(addClass, null);\n    }\n    catch (e) {\n        return null;\n    }\n}\nfunction transformName(name) {\n    // Replace -a with A to help camel case style property names.\n    name = name.replace(/-(\\w)/g, function _replace($1, $2) {\n        return $2.toUpperCase();\n    });\n    // Handle properties that start with a -.\n    var firstChar = name.charAt(0).toLowerCase();\n    return \"\" + firstChar + name.substring(1);\n}\n// Regex for matching HTML entities.\nvar entityRegex = new RegExp('&[a-z0-9#]+;', 'gi');\n// Element for setting innerHTML for transforming entities.\nvar el = null;\nfunction unescapeEntities(text) {\n    // Create the element using the context if it doesn't exist.\n    if (!el) {\n        el = document.createElement('div');\n    }\n    return text.replace(entityRegex, function (entity) {\n        if (el === null)\n            return '';\n        el.innerHTML = entity;\n        return el.textContent === null ? '' : el.textContent;\n    });\n}\nfunction recurse(doc, func) {\n    var node = doc;\n    var parent = null;\n    var stack = [];\n    var setChild = function (n) {\n        var child = n.firstChild;\n        if (child !== null) {\n            parent = n;\n        }\n        node = child;\n    };\n    func(node, parent);\n    setChild(node);\n    while (true) {\n        while (node) {\n            stack.push(node);\n            func(node, parent);\n            setChild(node);\n        }\n        var _node = stack.pop();\n        node = _node ? _node : null;\n        if (!stack.length)\n            break;\n        parent = stack[stack.length - 1];\n        if (node) {\n            var sibling = node.nextSibling;\n            if (sibling == null) {\n                parent = stack[stack.length - 1];\n            }\n            node = sibling;\n        }\n    }\n}\nvar vdom = null;\nvar vnodeMap = new Map();\nvar delimited = false;\nfunction toVNode(node, parent) {\n    var current;\n    if (parent !== null) {\n        current = vnodeMap.get(parent);\n    }\n    switch (node === null || node === void 0 ? void 0 : node.nodeType) {\n        // element\n        case 1: {\n            if (current === undefined)\n                return;\n            current.children = current.children ? current.children : [];\n            var children = current.children;\n            var attributes = node.attributes;\n            var attrs = {};\n            for (var i = 0; i < attributes.length; i++) {\n                var attr = attributes.item(i);\n                if (attr) {\n                    attrs[attr.name] = attr.value;\n                }\n            }\n            var vn = snabbdom_1.h(node.nodeName, buildVNodeData(attrs));\n            children.push(vn);\n            vnodeMap.set(node, vn);\n            break;\n        }\n        // text\n        case 3: {\n            var text = node.textContent;\n            if (text !== null && current !== undefined) {\n                current.children = current.children ? current.children : [];\n                var children = current.children;\n                var lastData = children.length > 0 ? children[children.length - 1] : null;\n                if (!delimited && typeof lastData !== 'string' && lastData !== null && lastData.sel === undefined) {\n                    lastData.text = lastData.text + text;\n                }\n                else {\n                    children.push(snabbdom_1.vnode(undefined, undefined, undefined, text, undefined));\n                }\n                delimited = false;\n            }\n            break;\n        }\n        case 8: {\n            delimited = true;\n            break;\n        }\n        // document\n        case 9: {\n            vdom = snabbdom_1.vnode(undefined, undefined, [], undefined, undefined);\n            vnodeMap.set(node, vdom);\n            break;\n        }\n        default:\n            break;\n    }\n}\nfunction stripVNode(vnodes) {\n    var children = vnodes === null || vnodes === void 0 ? void 0 : vnodes.children;\n    if (typeof children === 'undefined')\n        return null;\n    if (children.length === 1 && typeof children[0] !== 'string')\n        return children[0];\n    return null;\n}\nfunction virtualizeString(html) {\n    var _a, _b;\n    var parser = new window.DOMParser();\n    if (parser === undefined || html === undefined || html === '')\n        return null;\n    var doc = parser.parseFromString(html, \"application/xml\");\n    if (((_a = doc === null || doc === void 0 ? void 0 : doc.firstChild) === null || _a === void 0 ? void 0 : _a.nodeName) === 'parsererror') {\n        var error = \"\" + ((_b = doc === null || doc === void 0 ? void 0 : doc.firstChild) === null || _b === void 0 ? void 0 : _b.textContent);\n        return snabbdom_1.h('parsererror', [error]);\n    }\n    delimited = false;\n    vdom = null;\n    recurse(doc, toVNode);\n    if (vdom === null)\n        return null;\n    return stripVNode(vdom);\n}\nexports.default = virtualizeString;\n//# sourceMappingURL=virtualize.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../base/commands/command\");\nvar types_1 = require(\"../base/types\");\nvar model_source_1 = require(\"./model-source\");\n/**\n * Commit the current SModel back to the model source.\n *\n * The SModel (AKA internal model) contains a lot of dirty/transitional state, such\n * as intermediate move postions or handles. When a user interaction that spans multiple\n * commands finishes, it fires a CommitModelAction to write the final changes back to\n * the model source.\n */\nvar CommitModelAction = /** @class */ (function () {\n    function CommitModelAction() {\n        this.kind = CommitModelCommand.KIND;\n    }\n    return CommitModelAction;\n}());\nexports.CommitModelAction = CommitModelAction;\nvar CommitModelCommand = /** @class */ (function (_super) {\n    __extends(CommitModelCommand, _super);\n    function CommitModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    CommitModelCommand.prototype.execute = function (context) {\n        this.newModel = context.modelFactory.createSchema(context.root);\n        return this.doCommit(this.newModel, context.root, true);\n    };\n    CommitModelCommand.prototype.doCommit = function (model, result, doSetOriginal) {\n        var _this = this;\n        var commitResult = this.modelSource.commitModel(model);\n        if (commitResult instanceof Promise) {\n            return commitResult.then(function (originalModel) {\n                if (doSetOriginal)\n                    _this.originalModel = originalModel;\n                return result;\n            });\n        }\n        else {\n            if (doSetOriginal)\n                this.originalModel = commitResult;\n            return result;\n        }\n    };\n    CommitModelCommand.prototype.undo = function (context) {\n        return this.doCommit(this.originalModel, context.root, false);\n    };\n    CommitModelCommand.prototype.redo = function (context) {\n        return this.doCommit(this.newModel, context.root, false);\n    };\n    CommitModelCommand.KIND = 'commitModel';\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ModelSource),\n        __metadata(\"design:type\", model_source_1.ModelSource)\n    ], CommitModelCommand.prototype, \"modelSource\", void 0);\n    CommitModelCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [CommitModelAction])\n    ], CommitModelCommand);\n    return CommitModelCommand;\n}(command_1.SystemCommand));\nexports.CommitModelCommand = CommitModelCommand;\n//# sourceMappingURL=commit-model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_registration_1 = require(\"../base/commands/command-registration\");\nvar types_1 = require(\"../base/types\");\nvar commit_model_1 = require(\"./commit-model\");\nvar model_source_1 = require(\"./model-source\");\n/**\n * This container module does NOT provide any binding for TYPES.ModelSource because that needs to be\n * done according to the needs of the application. You can choose between a local (LocalModelSource)\n * and a remote (e.g. WebSocketDiagramServer) implementation.\n */\nvar modelSourceModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.ModelSourceProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.ModelSource));\n            });\n        };\n    });\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, commit_model_1.CommitModelCommand);\n    bind(types_1.TYPES.IActionHandlerInitializer).toService(types_1.TYPES.ModelSource);\n    bind(model_source_1.ComputedBoundsApplicator).toSelf().inSingletonScope();\n});\nexports.default = modelSourceModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar file_saver_1 = require(\"file-saver\");\nvar inversify_1 = require(\"inversify\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar types_1 = require(\"../base/types\");\nvar bounds_manipulation_1 = require(\"../features/bounds/bounds-manipulation\");\nvar expand_1 = require(\"../features/expand/expand\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar hover_1 = require(\"../features/hover/hover\");\nvar open_1 = require(\"../features/open/open\");\nvar update_model_1 = require(\"../features/update/update-model\");\nvar object_1 = require(\"../utils/object\");\nvar model_source_1 = require(\"./model-source\");\nfunction isActionMessage(object) {\n    return object_1.hasOwnProperty(object, 'action');\n}\nexports.isActionMessage = isActionMessage;\n/**\n * Sent by the external server when to signal a state change.\n */\nvar ServerStatusAction = /** @class */ (function () {\n    function ServerStatusAction() {\n        this.kind = ServerStatusAction.KIND;\n    }\n    ServerStatusAction.KIND = 'serverStatus';\n    return ServerStatusAction;\n}());\nexports.ServerStatusAction = ServerStatusAction;\nvar receivedFromServerProperty = '__receivedFromServer';\n/**\n * A ModelSource that communicates with an external model provider, e.g.\n * a model editor.\n *\n * This class defines which actions are sent to and received from the\n * external model source.\n */\nvar DiagramServer = /** @class */ (function (_super) {\n    __extends(DiagramServer, _super);\n    function DiagramServer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.currentRoot = {\n            type: 'NONE',\n            id: 'ROOT'\n        };\n        return _this;\n    }\n    DiagramServer.prototype.initialize = function (registry) {\n        _super.prototype.initialize.call(this, registry);\n        // Register this model source\n        registry.register(bounds_manipulation_1.ComputedBoundsAction.KIND, this);\n        registry.register(bounds_manipulation_1.RequestBoundsCommand.KIND, this);\n        registry.register(hover_1.RequestPopupModelAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAllAction.KIND, this);\n        registry.register(open_1.OpenAction.KIND, this);\n        registry.register(ServerStatusAction.KIND, this);\n        if (!this.clientId)\n            this.clientId = this.viewerOptions.baseDiv;\n    };\n    DiagramServer.prototype.handle = function (action) {\n        var forwardToServer = this.handleLocally(action);\n        if (forwardToServer)\n            this.forwardToServer(action);\n    };\n    DiagramServer.prototype.forwardToServer = function (action) {\n        var message = {\n            clientId: this.clientId,\n            action: action\n        };\n        this.logger.log(this, 'sending', message);\n        this.sendMessage(message);\n    };\n    DiagramServer.prototype.messageReceived = function (data) {\n        var _this = this;\n        var object = typeof (data) === 'string' ? JSON.parse(data) : data;\n        if (isActionMessage(object) && object.action) {\n            if (!object.clientId || object.clientId === this.clientId) {\n                object.action[receivedFromServerProperty] = true;\n                this.logger.log(this, 'receiving', object);\n                this.actionDispatcher.dispatch(object.action).then(function () {\n                    _this.storeNewModel(object.action);\n                });\n            }\n        }\n        else {\n            this.logger.error(this, 'received data is not an action message', object);\n        }\n    };\n    /**\n     * Check whether the given action should be handled locally. Returns true if the action should\n     * still be sent to the server, and false if it's only handled locally.\n     */\n    DiagramServer.prototype.handleLocally = function (action) {\n        this.storeNewModel(action);\n        switch (action.kind) {\n            case bounds_manipulation_1.ComputedBoundsAction.KIND:\n                return this.handleComputedBounds(action);\n            case set_model_1.RequestModelAction.KIND:\n                return this.handleRequestModel(action);\n            case bounds_manipulation_1.RequestBoundsCommand.KIND:\n                return false;\n            case svg_exporter_1.ExportSvgAction.KIND:\n                return this.handleExportSvgAction(action);\n            case ServerStatusAction.KIND:\n                return this.handleServerStateAction(action);\n        }\n        return !action[receivedFromServerProperty];\n    };\n    /**\n     * Put the new model contained in the given action into the model storage, if there is any.\n     */\n    DiagramServer.prototype.storeNewModel = function (action) {\n        if (action.kind === set_model_1.SetModelCommand.KIND\n            || action.kind === update_model_1.UpdateModelCommand.KIND\n            || action.kind === bounds_manipulation_1.RequestBoundsCommand.KIND) {\n            var newRoot = action.newRoot;\n            if (newRoot) {\n                this.currentRoot = newRoot;\n                if (action.kind === set_model_1.SetModelCommand.KIND || action.kind === update_model_1.UpdateModelCommand.KIND) {\n                    this.lastSubmittedModelType = newRoot.type;\n                }\n            }\n        }\n    };\n    DiagramServer.prototype.handleRequestModel = function (action) {\n        var newOptions = __assign({ needsClientLayout: this.viewerOptions.needsClientLayout, needsServerLayout: this.viewerOptions.needsServerLayout }, action.options);\n        var newAction = __assign(__assign({}, action), { options: newOptions });\n        this.forwardToServer(newAction);\n        return false;\n    };\n    /**\n     * If the server requires to compute a layout, the computed bounds are forwarded. Otherwise they\n     * are applied to the current model locally and a model update is triggered.\n     */\n    DiagramServer.prototype.handleComputedBounds = function (action) {\n        if (this.viewerOptions.needsServerLayout) {\n            return true;\n        }\n        else {\n            var root = this.currentRoot;\n            this.computedBoundsApplicator.apply(root, action);\n            if (root.type === this.lastSubmittedModelType) {\n                this.actionDispatcher.dispatch(new update_model_1.UpdateModelAction(root));\n            }\n            else {\n                this.actionDispatcher.dispatch(new set_model_1.SetModelAction(root));\n            }\n            this.lastSubmittedModelType = root.type;\n            return false;\n        }\n    };\n    DiagramServer.prototype.handleExportSvgAction = function (action) {\n        var blob = new Blob([action.svg], { type: \"text/plain;charset=utf-8\" });\n        file_saver_1.saveAs(blob, \"diagram.svg\");\n        return false;\n    };\n    DiagramServer.prototype.handleServerStateAction = function (action) {\n        return false;\n    };\n    DiagramServer.prototype.commitModel = function (newRoot) {\n        var previousRoot = this.currentRoot;\n        this.currentRoot = newRoot;\n        return previousRoot;\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], DiagramServer.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(model_source_1.ComputedBoundsApplicator),\n        __metadata(\"design:type\", model_source_1.ComputedBoundsApplicator)\n    ], DiagramServer.prototype, \"computedBoundsApplicator\", void 0);\n    DiagramServer = __decorate([\n        inversify_1.injectable()\n    ], DiagramServer);\n    return DiagramServer;\n}(model_source_1.ModelSource));\nexports.DiagramServer = DiagramServer;\n//# sourceMappingURL=diagram-server.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar file_saver_1 = require(\"file-saver\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar smodel_factory_1 = require(\"../base/model/smodel-factory\");\nvar bounds_manipulation_1 = require(\"../features/bounds/bounds-manipulation\");\nvar viewport_1 = require(\"../features/viewport/viewport\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar hover_1 = require(\"../features/hover/hover\");\nvar model_matching_1 = require(\"../features/update/model-matching\");\nvar update_model_1 = require(\"../features/update/update-model\");\nvar select_1 = require(\"../features/select/select\");\nvar model_source_1 = require(\"./model-source\");\n/**\n * A model source that allows to set and modify the model through function calls.\n * This class can be used as a facade over the action-based API of sprotty. It handles\n * actions for bounds calculation and model updates.\n */\nvar LocalModelSource = /** @class */ (function (_super) {\n    __extends(LocalModelSource, _super);\n    function LocalModelSource() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.currentRoot = smodel_factory_1.EMPTY_ROOT;\n        return _this;\n    }\n    Object.defineProperty(LocalModelSource.prototype, \"model\", {\n        get: function () {\n            return this.currentRoot;\n        },\n        set: function (root) {\n            this.setModel(root);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LocalModelSource.prototype.initialize = function (registry) {\n        _super.prototype.initialize.call(this, registry);\n        // Register this model source\n        registry.register(bounds_manipulation_1.ComputedBoundsAction.KIND, this);\n        registry.register(hover_1.RequestPopupModelAction.KIND, this);\n    };\n    /**\n     * Set the model without incremental update.\n     */\n    LocalModelSource.prototype.setModel = function (newRoot) {\n        this.currentRoot = newRoot;\n        return this.submitModel(newRoot, false);\n    };\n    LocalModelSource.prototype.commitModel = function (newRoot) {\n        var previousRoot = this.currentRoot;\n        this.currentRoot = newRoot;\n        return previousRoot;\n    };\n    /**\n     * Apply an incremental update to the model with an animation showing the transition to\n     * the new state. If `newRoot` is undefined, the current root is submitted; in that case\n     * it is assumed that it has been modified before.\n     */\n    LocalModelSource.prototype.updateModel = function (newRoot) {\n        if (newRoot === undefined) {\n            return this.submitModel(this.currentRoot, true);\n        }\n        else {\n            this.currentRoot = newRoot;\n            return this.submitModel(newRoot, true);\n        }\n    };\n    /**\n     * Get the current selection from the model.\n     */\n    LocalModelSource.prototype.getSelection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var res, index;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.actionDispatcher.request(select_1.GetSelectionAction.create())];\n                    case 1:\n                        res = _a.sent();\n                        index = new smodel_1.SModelIndex();\n                        index.add(this.currentRoot);\n                        return [2 /*return*/, index.all().filter(function (e) { return res.selectedElementsIDs.indexOf(e.id) >= 0; })];\n                }\n            });\n        });\n    };\n    /**\n     * Get the current viewport from the model.\n     */\n    LocalModelSource.prototype.getViewport = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.actionDispatcher.request(viewport_1.GetViewportAction.create())];\n                    case 1:\n                        res = _a.sent();\n                        return [2 /*return*/, {\n                                scroll: res.viewport.scroll,\n                                zoom: res.viewport.zoom,\n                                canvasBounds: res.canvasBounds\n                            }];\n                }\n            });\n        });\n    };\n    /**\n     * If client layout is active, run a `RequestBoundsAction` and wait for the resulting\n     * `ComputedBoundsAction`, otherwise call `doSubmitModel()` directly.\n     */\n    LocalModelSource.prototype.submitModel = function (newRoot, update, cause) {\n        return __awaiter(this, void 0, void 0, function () {\n            var computedBounds, index;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.viewerOptions.needsClientLayout) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.actionDispatcher.request(bounds_manipulation_1.RequestBoundsAction.create(newRoot))];\n                    case 1:\n                        computedBounds = _a.sent();\n                        index = this.computedBoundsApplicator.apply(this.currentRoot, computedBounds);\n                        return [4 /*yield*/, this.doSubmitModel(newRoot, true, cause, index)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, this.doSubmitModel(newRoot, update, cause)];\n                    case 4:\n                        _a.sent();\n                        _a.label = 5;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Submit the given model with an `UpdateModelAction` or a `SetModelAction` depending on the\n     * `update` argument. If available, the model layout engine is invoked first.\n     */\n    LocalModelSource.prototype.doSubmitModel = function (newRoot, update, cause, index) {\n        return __awaiter(this, void 0, void 0, function () {\n            var layoutResult, error_1, lastSubmittedModelType, request, input;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.layoutEngine !== undefined)) return [3 /*break*/, 6];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 5, , 6]);\n                        layoutResult = this.layoutEngine.layout(newRoot, index);\n                        if (!(layoutResult instanceof Promise)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, layoutResult];\n                    case 2:\n                        newRoot = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        if (layoutResult !== undefined)\n                            newRoot = layoutResult;\n                        _a.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _a.sent();\n                        this.logger.error(this, error_1.toString(), error_1.stack);\n                        return [3 /*break*/, 6];\n                    case 6:\n                        lastSubmittedModelType = this.lastSubmittedModelType;\n                        this.lastSubmittedModelType = newRoot.type;\n                        if (!(cause && cause.kind === set_model_1.RequestModelAction.KIND && cause.requestId)) return [3 /*break*/, 8];\n                        request = cause;\n                        return [4 /*yield*/, this.actionDispatcher.dispatch(new set_model_1.SetModelAction(newRoot, request.requestId))];\n                    case 7:\n                        _a.sent();\n                        return [3 /*break*/, 12];\n                    case 8:\n                        if (!(update && newRoot.type === lastSubmittedModelType)) return [3 /*break*/, 10];\n                        input = Array.isArray(update) ? update : newRoot;\n                        return [4 /*yield*/, this.actionDispatcher.dispatch(new update_model_1.UpdateModelAction(input, true, cause))];\n                    case 9:\n                        _a.sent();\n                        return [3 /*break*/, 12];\n                    case 10: return [4 /*yield*/, this.actionDispatcher.dispatch(new set_model_1.SetModelAction(newRoot))];\n                    case 11:\n                        _a.sent();\n                        _a.label = 12;\n                    case 12: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Modify the current model with an array of matches.\n     */\n    LocalModelSource.prototype.applyMatches = function (matches) {\n        var root = this.currentRoot;\n        model_matching_1.applyMatches(root, matches);\n        return this.submitModel(root, matches);\n    };\n    /**\n     * Modify the current model by adding new elements.\n     */\n    LocalModelSource.prototype.addElements = function (elements) {\n        var matches = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var e = elements_1[_i];\n            var anye = e;\n            if (anye.element !== undefined && anye.parentId !== undefined) {\n                matches.push({\n                    right: anye.element,\n                    rightParentId: anye.parentId\n                });\n            }\n            else if (anye.id !== undefined) {\n                matches.push({\n                    right: anye,\n                    rightParentId: this.currentRoot.id\n                });\n            }\n        }\n        return this.applyMatches(matches);\n    };\n    /**\n     * Modify the current model by removing elements.\n     */\n    LocalModelSource.prototype.removeElements = function (elements) {\n        var matches = [];\n        var index = new smodel_1.SModelIndex();\n        index.add(this.currentRoot);\n        for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n            var e = elements_2[_i];\n            var anye = e;\n            if (anye.elementId !== undefined && anye.parentId !== undefined) {\n                var element = index.getById(anye.elementId);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: anye.parentId\n                    });\n                }\n            }\n            else {\n                var element = index.getById(anye);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: this.currentRoot.id\n                    });\n                }\n            }\n        }\n        return this.applyMatches(matches);\n    };\n    // ----- Methods for handling incoming actions ----------------------------\n    LocalModelSource.prototype.handle = function (action) {\n        switch (action.kind) {\n            case set_model_1.RequestModelAction.KIND:\n                this.handleRequestModel(action);\n                break;\n            case bounds_manipulation_1.ComputedBoundsAction.KIND:\n                this.computedBoundsApplicator.apply(this.currentRoot, action);\n                break;\n            case hover_1.RequestPopupModelAction.KIND:\n                this.handleRequestPopupModel(action);\n                break;\n            case svg_exporter_1.ExportSvgAction.KIND:\n                this.handleExportSvgAction(action);\n                break;\n        }\n    };\n    LocalModelSource.prototype.handleRequestModel = function (action) {\n        this.submitModel(this.currentRoot, false, action);\n    };\n    LocalModelSource.prototype.handleRequestPopupModel = function (action) {\n        if (this.popupModelProvider !== undefined) {\n            var element = smodel_utils_1.findElement(this.currentRoot, action.elementId);\n            var popupRoot = this.popupModelProvider.getPopupModel(action, element);\n            if (popupRoot !== undefined) {\n                popupRoot.canvasBounds = action.bounds;\n                this.actionDispatcher.dispatch(new hover_1.SetPopupModelAction(popupRoot, action.requestId));\n            }\n        }\n    };\n    LocalModelSource.prototype.handleExportSvgAction = function (action) {\n        var blob = new Blob([action.svg], { type: \"text/plain;charset=utf-8\" });\n        file_saver_1.saveAs(blob, \"diagram.svg\");\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], LocalModelSource.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(model_source_1.ComputedBoundsApplicator),\n        __metadata(\"design:type\", model_source_1.ComputedBoundsApplicator)\n    ], LocalModelSource.prototype, \"computedBoundsApplicator\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IPopupModelProvider), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], LocalModelSource.prototype, \"popupModelProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IModelLayoutEngine), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], LocalModelSource.prototype, \"layoutEngine\", void 0);\n    LocalModelSource = __decorate([\n        inversify_1.injectable()\n    ], LocalModelSource);\n    return LocalModelSource;\n}(model_source_1.ModelSource));\nexports.LocalModelSource = LocalModelSource;\n//# sourceMappingURL=local-model-source.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar logging_1 = require(\"../utils/logging\");\nvar types_1 = require(\"../base/types\");\nvar LoggingAction = /** @class */ (function () {\n    function LoggingAction(severity, time, caller, message, params) {\n        this.severity = severity;\n        this.time = time;\n        this.caller = caller;\n        this.message = message;\n        this.params = params;\n        this.kind = LoggingAction.KIND;\n    }\n    LoggingAction.KIND = 'logging';\n    return LoggingAction;\n}());\nexports.LoggingAction = LoggingAction;\n/**\n * A logger that forwards messages of type 'error', 'warn', and 'info' to the model source.\n */\nvar ForwardingLogger = /** @class */ (function () {\n    function ForwardingLogger() {\n    }\n    ForwardingLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.error)\n            this.forward(thisArg, message, logging_1.LogLevel.error, params);\n    };\n    ForwardingLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.warn)\n            this.forward(thisArg, message, logging_1.LogLevel.warn, params);\n    };\n    ForwardingLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.info)\n            this.forward(thisArg, message, logging_1.LogLevel.info, params);\n    };\n    ForwardingLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.log) {\n            // We cannot forward 'log' level messages since that would lead to endless loops\n            try {\n                var caller = typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg);\n                console.log.apply(thisArg, __spreadArrays([caller + ': ' + message], params));\n            }\n            catch (error) { }\n        }\n    };\n    ForwardingLogger.prototype.forward = function (thisArg, message, logLevel, params) {\n        var date = new Date();\n        var action = new LoggingAction(logging_1.LogLevel[logLevel], date.toLocaleTimeString(), typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg), message, params.map(function (p) { return JSON.stringify(p); }));\n        this.modelSourceProvider().then(function (modelSource) {\n            try {\n                modelSource.handle(action);\n            }\n            catch (error) {\n                try {\n                    console.log.apply(thisArg, [message, action, error]);\n                }\n                catch (e) { }\n            }\n        });\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ModelSourceProvider),\n        __metadata(\"design:type\", Function)\n    ], ForwardingLogger.prototype, \"modelSourceProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.LogLevel),\n        __metadata(\"design:type\", Number)\n    ], ForwardingLogger.prototype, \"logLevel\", void 0);\n    ForwardingLogger = __decorate([\n        inversify_1.injectable()\n    ], ForwardingLogger);\n    return ForwardingLogger;\n}());\nexports.ForwardingLogger = ForwardingLogger;\n//# sourceMappingURL=logging.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar types_1 = require(\"../base/types\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar smodel_1 = require(\"../base/model/smodel\");\n/**\n * A model source is serving the model to the event cycle. It represents\n * the entry point to the client for external sources, such as model\n * editors.\n *\n * As an IActionHandler it listens to actions in and reacts to them with\n * commands or actions if necessary. This way, you can implement action\n * protocols between the client and the outside world.\n *\n * There are two default implementations for a ModelSource:\n * <ul>\n * <li>the LocalModelSource handles the actions to calculate bounds and\n * set/update the model</li>\n * <li>the DiagramServer connects via websocket to a remote source. It\n * can be used to connect to a model editor that provides the model,\n * layouts diagrams, transfers selection and answers model queries from\n * the client.</li>\n */\nvar ModelSource = /** @class */ (function () {\n    function ModelSource() {\n    }\n    ModelSource.prototype.initialize = function (registry) {\n        // Register this model source\n        registry.register(set_model_1.RequestModelAction.KIND, this);\n        registry.register(svg_exporter_1.ExportSvgAction.KIND, this);\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], ModelSource.prototype, \"actionDispatcher\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], ModelSource.prototype, \"viewerOptions\", void 0);\n    ModelSource = __decorate([\n        inversify_1.injectable()\n    ], ModelSource);\n    return ModelSource;\n}());\nexports.ModelSource = ModelSource;\nvar ComputedBoundsApplicator = /** @class */ (function () {\n    function ComputedBoundsApplicator() {\n    }\n    ComputedBoundsApplicator.prototype.apply = function (root, action) {\n        var index = new smodel_1.SModelIndex();\n        index.add(root);\n        for (var _i = 0, _a = action.bounds; _i < _a.length; _i++) {\n            var b = _a[_i];\n            var element = index.getById(b.elementId);\n            if (element !== undefined)\n                this.applyBounds(element, b.newPosition, b.newSize);\n        }\n        if (action.alignments !== undefined) {\n            for (var _b = 0, _c = action.alignments; _b < _c.length; _b++) {\n                var a = _c[_b];\n                var element = index.getById(a.elementId);\n                if (element !== undefined)\n                    this.applyAlignment(element, a.newAlignment);\n            }\n        }\n        return index;\n    };\n    ComputedBoundsApplicator.prototype.applyAlignment = function (element, newAlignment) {\n        var e = element;\n        e.alignment = { x: newAlignment.x, y: newAlignment.y };\n    };\n    ComputedBoundsApplicator.prototype.applyBounds = function (element, newPosition, newSize) {\n        var e = element;\n        if (newPosition)\n            e.position = __assign({}, newPosition);\n        e.size = __assign({}, newSize);\n    };\n    ComputedBoundsApplicator = __decorate([\n        inversify_1.injectable()\n    ], ComputedBoundsApplicator);\n    return ComputedBoundsApplicator;\n}());\nexports.ComputedBoundsApplicator = ComputedBoundsApplicator;\n//# sourceMappingURL=model-source.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar diagram_server_1 = require(\"./diagram-server\");\n/**\n * An external ModelSource that connects to the model provider using a\n * websocket.\n */\nvar WebSocketDiagramServer = /** @class */ (function (_super) {\n    __extends(WebSocketDiagramServer, _super);\n    function WebSocketDiagramServer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WebSocketDiagramServer.prototype.listen = function (webSocket) {\n        var _this = this;\n        webSocket.addEventListener('message', function (event) {\n            _this.messageReceived(event.data);\n        });\n        webSocket.addEventListener('error', function (event) {\n            _this.logger.error(_this, 'error event received', event);\n        });\n        this.webSocket = webSocket;\n    };\n    WebSocketDiagramServer.prototype.disconnect = function () {\n        if (this.webSocket) {\n            this.webSocket.close();\n            this.webSocket = undefined;\n        }\n    };\n    WebSocketDiagramServer.prototype.sendMessage = function (message) {\n        if (this.webSocket) {\n            this.webSocket.send(JSON.stringify(message));\n        }\n        else {\n            throw new Error('WebSocket is not connected');\n        }\n    };\n    WebSocketDiagramServer = __decorate([\n        inversify_1.injectable()\n    ], WebSocketDiagramServer);\n    return WebSocketDiagramServer;\n}(diagram_server_1.DiagramServer));\nexports.WebSocketDiagramServer = WebSocketDiagramServer;\n//# sourceMappingURL=websocket.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nvar Deferred = /** @class */ (function () {\n    function Deferred() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n    }\n    return Deferred;\n}());\nexports.Deferred = Deferred;\n//# sourceMappingURL=async.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"./geometry\");\n/**\n * Returns whether the mouse or keyboard event includes the CMD key\n * on Mac or CTRL key on Linux / others.\n */\nfunction isCtrlOrCmd(event) {\n    if (isMac())\n        return event.metaKey;\n    else\n        return event.ctrlKey;\n}\nexports.isCtrlOrCmd = isCtrlOrCmd;\nfunction isMac() {\n    return window.navigator.userAgent.indexOf(\"Mac\") !== -1;\n}\nexports.isMac = isMac;\nfunction isCrossSite(url) {\n    if (url && typeof window !== 'undefined' && window.location) {\n        var baseURL = '';\n        if (window.location.protocol)\n            baseURL += window.location.protocol + '//';\n        if (window.location.host)\n            baseURL += window.location.host;\n        return baseURL.length > 0 && !url.startsWith(baseURL);\n    }\n    return false;\n}\nexports.isCrossSite = isCrossSite;\n/**\n * Returns the amount of scroll of the browser window as a point.\n */\nfunction getWindowScroll() {\n    if (typeof window === 'undefined') {\n        return geometry_1.ORIGIN_POINT;\n    }\n    return {\n        x: window.pageXOffset,\n        y: window.pageYOffset\n    };\n}\nexports.getWindowScroll = getWindowScroll;\n/**\n * Checks whether the given mouse event hits the given DOM element.\n */\nfunction hitsMouseEvent(child, event) {\n    var clientRect = child.getBoundingClientRect();\n    return event.clientX >= clientRect.left && event.clientX <= clientRect.right\n        && event.clientY >= clientRect.top && event.clientY <= clientRect.bottom;\n}\nexports.hitsMouseEvent = hitsMouseEvent;\n//# sourceMappingURL=browser.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction rgb(red, green, blue) {\n    return {\n        red: red,\n        green: green,\n        blue: blue\n    };\n}\nexports.rgb = rgb;\nfunction toSVG(c) {\n    return 'rgb(' + c.red + ',' + c.green + ',' + c.blue + ')';\n}\nexports.toSVG = toSVG;\nvar ColorMap = /** @class */ (function () {\n    function ColorMap(stops) {\n        this.stops = stops;\n    }\n    ColorMap.prototype.getColor = function (t) {\n        t = Math.max(0, Math.min(0.99999999, t));\n        var i = Math.floor(t * this.stops.length);\n        return this.stops[i];\n    };\n    return ColorMap;\n}());\nexports.ColorMap = ColorMap;\n//# sourceMappingURL=color.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * (x,y) coordinates of the origin.\n */\nexports.ORIGIN_POINT = Object.freeze({\n    x: 0,\n    y: 0\n});\n/**\n * Adds two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The sum of the two points\n */\nfunction add(p1, p2) {\n    return {\n        x: p1.x + p2.x,\n        y: p1.y + p2.y\n    };\n}\nexports.add = add;\n/**\n * Subtracts two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The difference of the two points\n */\nfunction subtract(p1, p2) {\n    return {\n        x: p1.x - p2.x,\n        y: p1.y - p2.y\n    };\n}\nexports.subtract = subtract;\n/**\n * Specifies whether a point has exactly the same coordinates as another point.\n * @param {Point} point1 a point\n * @param {Point} point2 another point\n * @returns {boolean} `true` if `point1` has exactly the same `x` and `y` values as `point2`, `false` otherwise.\n */\nfunction pointEquals(point1, point2) {\n    return point1.x === point2.x && point1.y === point2.y;\n}\nexports.pointEquals = pointEquals;\n/**\n * A dimension with both width and height set to a negative value, which is considered as undefined.\n */\nexports.EMPTY_DIMENSION = Object.freeze({\n    width: -1,\n    height: -1\n});\n/**\n * Checks whether the given dimention is valid, i.e. the width and height are non-zero.\n * @param {Dimension} b - Dimension object\n * @returns {boolean}\n */\nfunction isValidDimension(d) {\n    return d.width >= 0 && d.height >= 0;\n}\nexports.isValidDimension = isValidDimension;\nexports.EMPTY_BOUNDS = Object.freeze({\n    x: 0,\n    y: 0,\n    width: -1,\n    height: -1\n});\nfunction isBounds(element) {\n    return 'x' in element\n        && 'y' in element\n        && 'width' in element\n        && 'height' in element;\n}\nexports.isBounds = isBounds;\n/**\n * Combines the bounds of two objects into one, so that the new bounds\n * are the minimum bounds that covers both of the original bounds.\n * @param {Bounds} b0 - First bounds object\n * @param {Bounds} b1 - Second bounds object\n * @returns {Bounds} The combined bounds\n */\nfunction combine(b0, b1) {\n    if (!isValidDimension(b0))\n        return isValidDimension(b1) ? b1 : exports.EMPTY_BOUNDS;\n    if (!isValidDimension(b1))\n        return b0;\n    var minX = Math.min(b0.x, b1.x);\n    var minY = Math.min(b0.y, b1.y);\n    var maxX = Math.max(b0.x + (b0.width >= 0 ? b0.width : 0), b1.x + (b1.width >= 0 ? b1.width : 0));\n    var maxY = Math.max(b0.y + (b0.height >= 0 ? b0.height : 0), b1.y + (b1.height >= 0 ? b1.height : 0));\n    return {\n        x: minX, y: minY, width: maxX - minX, height: maxY - minY\n    };\n}\nexports.combine = combine;\n/**\n * Translates the given bounds.\n * @param {Bounds} b - Bounds object\n * @param {Point} p - Vector by which to translate the bounds\n * @returns {Bounds} The translated bounds\n */\nfunction translate(b, p) {\n    return {\n        x: b.x + p.x,\n        y: b.y + p.y,\n        width: b.width,\n        height: b.height\n    };\n}\nexports.translate = translate;\n/**\n * Returns the center point of the bounds of an object\n * @param {Bounds} b - Bounds object\n * @returns {Point} the center point\n */\nfunction center(b) {\n    return {\n        x: b.x + (b.width >= 0 ? 0.5 * b.width : 0),\n        y: b.y + (b.height >= 0 ? 0.5 * b.height : 0)\n    };\n}\nexports.center = center;\nfunction centerOfLine(s, e) {\n    var b = {\n        x: s.x > e.x ? e.x : s.x,\n        y: s.y > e.y ? e.y : s.y,\n        width: Math.abs(e.x - s.x),\n        height: Math.abs(e.y - s.y)\n    };\n    return center(b);\n}\nexports.centerOfLine = centerOfLine;\n/**\n * Checks whether the point p is included in the bounds b.\n */\nfunction includes(b, p) {\n    return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;\n}\nexports.includes = includes;\n/**\n * Enumeration of possible directions (left, right, up, down)\n * @deprecated do we use this? We should rather use a string type\n */\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"left\"] = 0] = \"left\";\n    Direction[Direction[\"right\"] = 1] = \"right\";\n    Direction[Direction[\"up\"] = 2] = \"up\";\n    Direction[Direction[\"down\"] = 3] = \"down\";\n})(Direction = exports.Direction || (exports.Direction = {}));\n/**\n * Returns the \"straight line\" distance between two points.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Eucledian distance\n */\nfunction euclideanDistance(a, b) {\n    var dx = b.x - a.x;\n    var dy = b.y - a.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexports.euclideanDistance = euclideanDistance;\n/**\n * Returns the distance between two points in a grid, using a\n * strictly vertical and/or horizontal path (versus straight line).\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Manhattan distance\n */\nfunction manhattanDistance(a, b) {\n    return Math.abs(b.x - a.x) + Math.abs(b.y - a.y);\n}\nexports.manhattanDistance = manhattanDistance;\n/**\n * Returns the maximum of the horizontal and the vertical distance.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The maximum distance\n */\nfunction maxDistance(a, b) {\n    return Math.max(Math.abs(b.x - a.x), Math.abs(b.y - a.y));\n}\nexports.maxDistance = maxDistance;\n/**\n * Computes the angle in radians of the given point to the x-axis of the coordinate system.\n * The result is in the range [-pi, pi].\n * @param {Point} p - A point in the Eucledian plane\n */\nfunction angleOfPoint(p) {\n    return Math.atan2(p.y, p.x);\n}\nexports.angleOfPoint = angleOfPoint;\n/**\n * Computes the angle in radians between the two given points (relative to the origin of the coordinate system).\n * The result is in the range [0, pi]. Returns NaN if the points are equal.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n */\nfunction angleBetweenPoints(a, b) {\n    var lengthProduct = Math.sqrt((a.x * a.x + a.y * a.y) * (b.x * b.x + b.y * b.y));\n    if (isNaN(lengthProduct) || lengthProduct === 0)\n        return NaN;\n    var dotProduct = a.x * b.x + a.y * b.y;\n    return Math.acos(dotProduct / lengthProduct);\n}\nexports.angleBetweenPoints = angleBetweenPoints;\n/**\n * Computes a point that is the original `point` shifted towards `refPoint` by the given `distance`.\n * @param {Point} point - Point to shift\n * @param {Point} refPoint - Point to shift towards\n * @param {Point} distance - Distance to shift\n */\nfunction shiftTowards(point, refPoint, distance) {\n    var diff = subtract(refPoint, point);\n    var normalized = normalize(diff);\n    var shift = { x: normalized.x * distance, y: normalized.y * distance };\n    return add(point, shift);\n}\nexports.shiftTowards = shiftTowards;\n/**\n * Computes the normalized vector from the vector given in `point`; that is, computing its unit vector.\n * @param {Point} point - Point representing the vector to be normalized\n * @returns {Point} The normalized point\n */\nfunction normalize(point) {\n    var mag = magnitude(point);\n    if (mag === 0 || mag === 1) {\n        return exports.ORIGIN_POINT;\n    }\n    return {\n        x: point.x / mag,\n        y: point.y / mag\n    };\n}\nexports.normalize = normalize;\n/**\n * Computes the magnitude of the vector given in `point`.\n * @param {Point} point - Point representing the vector to compute the magnitude for\n * @returns {number} The magnitude or also known as length of the `point`\n */\nfunction magnitude(point) {\n    return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n}\nexports.magnitude = magnitude;\n/**\n * Converts from radians to degrees\n * @param {number} a - A value in radians\n * @returns {number} The converted value\n */\nfunction toDegrees(a) {\n    return a * 180 / Math.PI;\n}\nexports.toDegrees = toDegrees;\n/**\n * Converts from degrees to radians\n * @param {number} a - A value in degrees\n * @returns {number} The converted value\n */\nfunction toRadians(a) {\n    return a * Math.PI / 180;\n}\nexports.toRadians = toRadians;\n/**\n * Returns whether two numbers are almost equal, within a small margin (0.001)\n * @param {number} a - First number\n * @param {number} b - Second number\n * @returns {boolean} True if the two numbers are almost equal\n */\nfunction almostEquals(a, b) {\n    return Math.abs(a - b) < 1e-3;\n}\nexports.almostEquals = almostEquals;\n/**\n * Calculates a linear combination of p0 and p1 using lambda, i.e.\n *   (1-lambda) * p0 + lambda * p1\n * @param p0\n * @param p1\n * @param lambda\n */\nfunction linear(p0, p1, lambda) {\n    return {\n        x: (1 - lambda) * p0.x + lambda * p1.x,\n        y: (1 - lambda) * p0.y + lambda * p1.y\n    };\n}\nexports.linear = linear;\n/**\n * A diamond or rhombus is a quadrilateral whose four sides all have the same length.\n * It consinsts of four points, a `topPoint`, `rightPoint`, `bottomPoint`, and a `leftPoint`,\n * which are connected by four lines -- the `topRightSideLight`, `topLeftSideLine`, `bottomRightSideLine`,\n * and the `bottomLeftSideLine`.\n */\nvar Diamond = /** @class */ (function () {\n    function Diamond(bounds) {\n        this.bounds = bounds;\n    }\n    Object.defineProperty(Diamond.prototype, \"topPoint\", {\n        get: function () {\n            return {\n                x: this.bounds.x + this.bounds.width / 2,\n                y: this.bounds.y\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"rightPoint\", {\n        get: function () {\n            return {\n                x: this.bounds.x + this.bounds.width,\n                y: this.bounds.y + this.bounds.height / 2\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"bottomPoint\", {\n        get: function () {\n            return {\n                x: this.bounds.x + this.bounds.width / 2,\n                y: this.bounds.y + this.bounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"leftPoint\", {\n        get: function () {\n            return {\n                x: this.bounds.x,\n                y: this.bounds.y + this.bounds.height / 2\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"topRightSideLine\", {\n        get: function () {\n            return new PointToPointLine(this.topPoint, this.rightPoint);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"topLeftSideLine\", {\n        get: function () {\n            return new PointToPointLine(this.topPoint, this.leftPoint);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"bottomRightSideLine\", {\n        get: function () {\n            return new PointToPointLine(this.bottomPoint, this.rightPoint);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"bottomLeftSideLine\", {\n        get: function () {\n            return new PointToPointLine(this.bottomPoint, this.leftPoint);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Return the closest side of this diamond to the specified `refPoint`.\n     * @param {Point} refPoint a reference point\n     * @returns {Line} a line representing the closest side\n     */\n    Diamond.prototype.closestSideLine = function (refPoint) {\n        var c = center(this.bounds);\n        if (refPoint.x > c.x) {\n            if (refPoint.y > c.y) {\n                return this.bottomRightSideLine;\n            }\n            else {\n                return this.topRightSideLine;\n            }\n        }\n        else {\n            if (refPoint.y > c.y) {\n                return this.bottomLeftSideLine;\n            }\n            else {\n                return this.topLeftSideLine;\n            }\n        }\n    };\n    return Diamond;\n}());\nexports.Diamond = Diamond;\n/**\n * A line made up from two points.\n */\nvar PointToPointLine = /** @class */ (function () {\n    function PointToPointLine(p1, p2) {\n        this.p1 = p1;\n        this.p2 = p2;\n    }\n    Object.defineProperty(PointToPointLine.prototype, \"a\", {\n        get: function () {\n            return this.p1.y - this.p2.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"b\", {\n        get: function () {\n            return this.p2.x - this.p1.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"c\", {\n        get: function () {\n            return this.p2.x * this.p1.y - this.p1.x * this.p2.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"angle\", {\n        /**\n         * The counter-clockwise angle of this line relative to the x-axis.\n         */\n        get: function () {\n            return Math.atan2(-this.a, this.b);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"slope\", {\n        /**\n         * The slope of the line.\n         * A vertical line returns `undefined`.\n         */\n        get: function () {\n            if (this.b === 0)\n                return undefined;\n            return this.a / this.b;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"slopeOrMax\", {\n        /**\n         * The slope of the line or `Number.MAX_SAFE_INTEGER` if vertical.\n         */\n        get: function () {\n            if (this.slope === undefined) {\n                return Number.MAX_SAFE_INTEGER;\n            }\n            return this.slope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @param otherLine the other line\n     * @returns the intersection point between `this` line and the `otherLine` if exists, or `undefined`.\n     */\n    PointToPointLine.prototype.intersection = function (otherLine) {\n        if (this.hasIndistinctPoints(otherLine)) {\n            return undefined;\n        }\n        var x1 = this.p1.x;\n        var y1 = this.p1.y;\n        var x2 = this.p2.x;\n        var y2 = this.p2.y;\n        var x3 = otherLine.p1.x;\n        var y3 = otherLine.p1.y;\n        var x4 = otherLine.p2.x;\n        var y4 = otherLine.p2.y;\n        var denominator = ((y4 - y3) * (x2 - x1)) - ((x4 - x3) * (y2 - y1));\n        if (denominator === 0) {\n            return undefined;\n        }\n        var numeratorA = ((x4 - x3) * (y1 - y3)) - ((y4 - y3) * (x1 - x3));\n        var numeratorB = ((x2 - x1) * (y1 - y3)) - ((y2 - y1) * (x1 - x3));\n        if (numeratorA === 0 && numeratorB === 0) {\n            return undefined;\n        }\n        var determinantA = numeratorA / denominator;\n        var determinantB = numeratorB / denominator;\n        if (determinantA < 0 || determinantA > 1 || determinantB < 0 || determinantB > 1) {\n            return undefined;\n        }\n        var x = x1 + (determinantA * (x2 - x1));\n        var y = y1 + (determinantA * (y2 - y1));\n        return { x: x, y: y };\n    };\n    /**\n     * @param otherLine the other line\n     * @returns whether the start and end point of this line is does not have distinct start\n     * or end points with the `otherLine`\n     */\n    PointToPointLine.prototype.hasIndistinctPoints = function (otherLine) {\n        return pointEquals(this.p1, otherLine.p1) ||\n            pointEquals(this.p1, otherLine.p2) ||\n            pointEquals(this.p2, otherLine.p1) ||\n            pointEquals(this.p2, otherLine.p2);\n    };\n    return PointToPointLine;\n}());\nexports.PointToPointLine = PointToPointLine;\n/**\n * Returns the intersection of two lines `l1` and `l2`\n * @param {Line} l1 - A line\n * @param {Line} l2 - Another line\n * @returns {Point} The intersection point of `l1` and `l2`\n */\nfunction intersection(l1, l2) {\n    return {\n        x: (l1.c * l2.b - l2.c * l1.b) / (l1.a * l2.b - l2.a * l1.b),\n        y: (l1.a * l2.c - l2.a * l1.c) / (l1.a * l2.b - l2.a * l1.b)\n    };\n}\nexports.intersection = intersection;\n//# sourceMappingURL=geometry.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isInjectable(constr) {\n    return Reflect.getMetadata('inversify:paramtypes', constr) !== undefined;\n}\nexports.isInjectable = isInjectable;\n//# sourceMappingURL=inversify.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A helper class that allows to easily create fluent iterables.\n */\nvar FluentIterableImpl = /** @class */ (function () {\n    function FluentIterableImpl(startFn, nextFn) {\n        this.startFn = startFn;\n        this.nextFn = nextFn;\n    }\n    FluentIterableImpl.prototype[Symbol.iterator] = function () {\n        var _a;\n        var _this = this;\n        var iterator = (_a = {\n                state: this.startFn(),\n                next: function () { return _this.nextFn(iterator.state); }\n            },\n            _a[Symbol.iterator] = function () { return iterator; },\n            _a);\n        return iterator;\n    };\n    FluentIterableImpl.prototype.filter = function (callback) {\n        return filterIterable(this, callback);\n    };\n    FluentIterableImpl.prototype.map = function (callback) {\n        return mapIterable(this, callback);\n    };\n    FluentIterableImpl.prototype.forEach = function (callback) {\n        var iterator = this[Symbol.iterator]();\n        var index = 0;\n        var result;\n        do {\n            result = iterator.next();\n            if (result.value !== undefined)\n                callback(result.value, index);\n            index++;\n        } while (!result.done);\n    };\n    FluentIterableImpl.prototype.indexOf = function (element) {\n        var iterator = this[Symbol.iterator]();\n        var index = 0;\n        var result;\n        do {\n            result = iterator.next();\n            if (result.value === element)\n                return index;\n            index++;\n        } while (!result.done);\n        return -1;\n    };\n    return FluentIterableImpl;\n}());\nexports.FluentIterableImpl = FluentIterableImpl;\n/**\n * Converts a FluentIterable into an array. If the input is an array, it is returned unchanged.\n */\nfunction toArray(input) {\n    if (input.constructor === Array) {\n        return input;\n    }\n    var result = [];\n    input.forEach(function (element) { return result.push(element); });\n    return result;\n}\nexports.toArray = toArray;\nexports.DONE_RESULT = Object.freeze({ done: true, value: undefined });\n/**\n * Create a fluent iterable that filters the content of the given iterable or array.\n */\nfunction filterIterable(input, callback) {\n    return new FluentIterableImpl(function () { return createIterator(input); }, function (iterator) {\n        var result;\n        do {\n            result = iterator.next();\n        } while (!result.done && !callback(result.value));\n        return result;\n    });\n}\nexports.filterIterable = filterIterable;\n/**\n * Create a fluent iterable that maps the content of the given iterable or array.\n */\nfunction mapIterable(input, callback) {\n    return new FluentIterableImpl(function () { return createIterator(input); }, function (iterator) {\n        var _a = iterator.next(), done = _a.done, value = _a.value;\n        if (done)\n            return exports.DONE_RESULT;\n        else\n            return { done: false, value: callback(value) };\n    });\n}\nexports.mapIterable = mapIterable;\n/**\n * Create an iterator for the given iterable or array.\n */\nfunction createIterator(collection) {\n    var method = collection[Symbol.iterator];\n    if (typeof method === 'function') {\n        return method.call(collection);\n    }\n    var length = collection.length;\n    if (typeof length === 'number' && length >= 0) {\n        return new ArrayIterator(collection);\n    }\n    return { next: function () { return exports.DONE_RESULT; } };\n}\n/**\n * Iterator implementation for arrays.\n */\nvar ArrayIterator = /** @class */ (function () {\n    function ArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n    }\n    ArrayIterator.prototype.next = function () {\n        if (this.index < this.array.length)\n            return { done: false, value: this.array[this.index++] };\n        else\n            return exports.DONE_RESULT;\n    };\n    ArrayIterator.prototype[Symbol.iterator] = function () {\n        return this;\n    };\n    return ArrayIterator;\n}());\n//# sourceMappingURL=iterable.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browser_1 = require(\"./browser\");\n/**\n * Returns whether the keyboard event matches the keystroke described by the given\n * code and modifiers. The code must comply to the format of the `code` property\n * of KeyboardEvent, but in contrast to that property, the actual keyboard layout is\n * considered by this function if possible.\n */\nfunction matchesKeystroke(event, code) {\n    var modifiers = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        modifiers[_i - 2] = arguments[_i];\n    }\n    if (getActualCode(event) !== code)\n        return false;\n    if (browser_1.isMac()) {\n        if (event.ctrlKey !== (modifiers.findIndex(function (m) { return m === 'ctrl'; }) >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(function (m) { return m === 'meta' || m === 'ctrlCmd'; }) >= 0))\n            return false;\n    }\n    else {\n        if (event.ctrlKey !== (modifiers.findIndex(function (m) { return m === 'ctrl' || m === 'ctrlCmd'; }) >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(function (m) { return m === 'meta'; }) >= 0))\n            return false;\n    }\n    if (event.altKey !== (modifiers.findIndex(function (m) { return m === 'alt'; }) >= 0))\n        return false;\n    if (event.shiftKey !== (modifiers.findIndex(function (m) { return m === 'shift'; }) >= 0))\n        return false;\n    return true;\n}\nexports.matchesKeystroke = matchesKeystroke;\n/**\n * Determines a key code from the given event. This is necessary because the `code` property of\n * a KeyboardEvent does not consider keyboard layouts.\n */\nfunction getActualCode(event) {\n    if (event.keyCode) {\n        var result = STRING_CODE[event.keyCode];\n        if (result !== undefined)\n            return result;\n    }\n    return event.code;\n}\nexports.getActualCode = getActualCode;\nvar STRING_CODE = new Array(256);\n(function () {\n    function addKeyCode(stringCode, numericCode) {\n        if (STRING_CODE[numericCode] === undefined)\n            STRING_CODE[numericCode] = stringCode;\n    }\n    addKeyCode('Pause', 3);\n    addKeyCode('Backspace', 8);\n    addKeyCode('Tab', 9);\n    addKeyCode('Enter', 13);\n    addKeyCode('ShiftLeft', 16);\n    addKeyCode('ShiftRight', 16);\n    addKeyCode('ControlLeft', 17);\n    addKeyCode('ControlRight', 17);\n    addKeyCode('AltLeft', 18);\n    addKeyCode('AltRight', 18);\n    addKeyCode('CapsLock', 20);\n    addKeyCode('Escape', 27);\n    addKeyCode('Space', 32);\n    addKeyCode('PageUp', 33);\n    addKeyCode('PageDown', 34);\n    addKeyCode('End', 35);\n    addKeyCode('Home', 36);\n    addKeyCode('ArrowLeft', 37);\n    addKeyCode('ArrowUp', 38);\n    addKeyCode('ArrowRight', 39);\n    addKeyCode('ArrowDown', 40);\n    addKeyCode('Insert', 45);\n    addKeyCode('Delete', 46);\n    addKeyCode('Digit1', 49);\n    addKeyCode('Digit2', 50);\n    addKeyCode('Digit3', 51);\n    addKeyCode('Digit4', 52);\n    addKeyCode('Digit5', 53);\n    addKeyCode('Digit6', 54);\n    addKeyCode('Digit7', 55);\n    addKeyCode('Digit8', 56);\n    addKeyCode('Digit9', 57);\n    addKeyCode('Digit0', 48);\n    addKeyCode('KeyA', 65);\n    addKeyCode('KeyB', 66);\n    addKeyCode('KeyC', 67);\n    addKeyCode('KeyD', 68);\n    addKeyCode('KeyE', 69);\n    addKeyCode('KeyF', 70);\n    addKeyCode('KeyG', 71);\n    addKeyCode('KeyH', 72);\n    addKeyCode('KeyI', 73);\n    addKeyCode('KeyJ', 74);\n    addKeyCode('KeyK', 75);\n    addKeyCode('KeyL', 76);\n    addKeyCode('KeyM', 77);\n    addKeyCode('KeyN', 78);\n    addKeyCode('KeyO', 79);\n    addKeyCode('KeyP', 80);\n    addKeyCode('KeyQ', 81);\n    addKeyCode('KeyR', 82);\n    addKeyCode('KeyS', 83);\n    addKeyCode('KeyT', 84);\n    addKeyCode('KeyU', 85);\n    addKeyCode('KeyV', 86);\n    addKeyCode('KeyW', 87);\n    addKeyCode('KeyX', 88);\n    addKeyCode('KeyY', 89);\n    addKeyCode('KeyZ', 90);\n    addKeyCode('OSLeft', 91);\n    addKeyCode('MetaLeft', 91);\n    addKeyCode('OSRight', 92);\n    addKeyCode('MetaRight', 92);\n    addKeyCode('ContextMenu', 93);\n    addKeyCode('Numpad0', 96);\n    addKeyCode('Numpad1', 97);\n    addKeyCode('Numpad2', 98);\n    addKeyCode('Numpad3', 99);\n    addKeyCode('Numpad4', 100);\n    addKeyCode('Numpad5', 101);\n    addKeyCode('Numpad6', 102);\n    addKeyCode('Numpad7', 103);\n    addKeyCode('Numpad8', 104);\n    addKeyCode('Numpad9', 105);\n    addKeyCode('NumpadMultiply', 106);\n    addKeyCode('NumpadAdd', 107);\n    addKeyCode('NumpadSeparator', 108);\n    addKeyCode('NumpadSubtract', 109);\n    addKeyCode('NumpadDecimal', 110);\n    addKeyCode('NumpadDivide', 111);\n    addKeyCode('F1', 112);\n    addKeyCode('F2', 113);\n    addKeyCode('F3', 114);\n    addKeyCode('F4', 115);\n    addKeyCode('F5', 116);\n    addKeyCode('F6', 117);\n    addKeyCode('F7', 118);\n    addKeyCode('F8', 119);\n    addKeyCode('F9', 120);\n    addKeyCode('F10', 121);\n    addKeyCode('F11', 122);\n    addKeyCode('F12', 123);\n    addKeyCode('F13', 124);\n    addKeyCode('F14', 125);\n    addKeyCode('F15', 126);\n    addKeyCode('F16', 127);\n    addKeyCode('F17', 128);\n    addKeyCode('F18', 129);\n    addKeyCode('F19', 130);\n    addKeyCode('F20', 131);\n    addKeyCode('F21', 132);\n    addKeyCode('F22', 133);\n    addKeyCode('F23', 134);\n    addKeyCode('F24', 135);\n    addKeyCode('NumLock', 144);\n    addKeyCode('ScrollLock', 145);\n    addKeyCode('Semicolon', 186);\n    addKeyCode('Equal', 187);\n    addKeyCode('Comma', 188);\n    addKeyCode('Minus', 189);\n    addKeyCode('Period', 190);\n    addKeyCode('Slash', 191);\n    addKeyCode('Backquote', 192);\n    addKeyCode('IntlRo', 193);\n    addKeyCode('BracketLeft', 219);\n    addKeyCode('Backslash', 220);\n    addKeyCode('BracketRight', 221);\n    addKeyCode('Quote', 222);\n    addKeyCode('IntlYen', 255);\n})();\n//# sourceMappingURL=keyboard.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"none\"] = 0] = \"none\";\n    LogLevel[LogLevel[\"error\"] = 1] = \"error\";\n    LogLevel[LogLevel[\"warn\"] = 2] = \"warn\";\n    LogLevel[LogLevel[\"info\"] = 3] = \"info\";\n    LogLevel[LogLevel[\"log\"] = 4] = \"log\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nvar NullLogger = /** @class */ (function () {\n    function NullLogger() {\n        this.logLevel = LogLevel.none;\n    }\n    NullLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger = __decorate([\n        inversify_1.injectable()\n    ], NullLogger);\n    return NullLogger;\n}());\nexports.NullLogger = NullLogger;\nvar ConsoleLogger = /** @class */ (function () {\n    function ConsoleLogger() {\n        this.logLevel = LogLevel.log;\n        this.viewOptions = { baseDiv: '' };\n    }\n    ConsoleLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.error)\n            try {\n                console.error.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.warn)\n            try {\n                console.warn.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.info)\n            try {\n                console.info.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.log)\n            try {\n                console.log.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.consoleArguments = function (thisArg, message, params) {\n        var caller;\n        if (typeof thisArg === 'object')\n            caller = thisArg.constructor.name;\n        else\n            caller = thisArg;\n        var date = new Date();\n        return __spreadArrays([date.toLocaleTimeString() + ' ' + this.viewOptions.baseDiv + ' ' + caller + ': ' + message], params);\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.LogLevel),\n        __metadata(\"design:type\", Number)\n    ], ConsoleLogger.prototype, \"logLevel\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], ConsoleLogger.prototype, \"viewOptions\", void 0);\n    ConsoleLogger = __decorate([\n        inversify_1.injectable()\n    ], ConsoleLogger);\n    return ConsoleLogger;\n}());\nexports.ConsoleLogger = ConsoleLogger;\n//# sourceMappingURL=logging.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isObject(data) {\n    return typeof data === 'object' && data !== null;\n}\nexports.isObject = isObject;\nfunction hasOwnProperty(arg, key, type) {\n    if (!(isObject(arg) && Object.prototype.hasOwnProperty.call(arg, key))) {\n        return false;\n    }\n    if (typeof type === 'string') {\n        return typeof arg[key] === type;\n    }\n    if (typeof type === 'function') {\n        return type(arg[key]);\n    }\n    return true;\n}\nexports.hasOwnProperty = hasOwnProperty;\nfunction safeAssign(target, partial) {\n    return Object.assign(target, partial);\n}\nexports.safeAssign = safeAssign;\n//# sourceMappingURL=object.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar ProviderRegistry = /** @class */ (function () {\n    function ProviderRegistry() {\n        this.elements = new Map;\n    }\n    ProviderRegistry.prototype.register = function (key, cstr) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, cstr);\n    };\n    ProviderRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    ProviderRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    ProviderRegistry.prototype.get = function (key, arg) {\n        var existingCstr = this.elements.get(key);\n        if (existingCstr)\n            return new existingCstr(arg);\n        else\n            return this.missing(key, arg);\n    };\n    ProviderRegistry.prototype.missing = function (key, arg) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    ProviderRegistry = __decorate([\n        inversify_1.injectable()\n    ], ProviderRegistry);\n    return ProviderRegistry;\n}());\nexports.ProviderRegistry = ProviderRegistry;\nvar FactoryRegistry = /** @class */ (function () {\n    function FactoryRegistry() {\n        this.elements = new Map;\n    }\n    FactoryRegistry.prototype.register = function (key, factory) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, factory);\n    };\n    FactoryRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    FactoryRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    FactoryRegistry.prototype.get = function (key, arg) {\n        var existingFactory = this.elements.get(key);\n        if (existingFactory)\n            return existingFactory(arg);\n        else\n            return this.missing(key, arg);\n    };\n    FactoryRegistry.prototype.missing = function (key, arg) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    FactoryRegistry = __decorate([\n        inversify_1.injectable()\n    ], FactoryRegistry);\n    return FactoryRegistry;\n}());\nexports.FactoryRegistry = FactoryRegistry;\nvar InstanceRegistry = /** @class */ (function () {\n    function InstanceRegistry() {\n        this.elements = new Map;\n    }\n    InstanceRegistry.prototype.register = function (key, instance) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, instance);\n    };\n    InstanceRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    InstanceRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    InstanceRegistry.prototype.get = function (key) {\n        var existingInstance = this.elements.get(key);\n        if (existingInstance)\n            return existingInstance;\n        else\n            return this.missing(key);\n    };\n    InstanceRegistry.prototype.missing = function (key) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    InstanceRegistry = __decorate([\n        inversify_1.injectable()\n    ], InstanceRegistry);\n    return InstanceRegistry;\n}());\nexports.InstanceRegistry = InstanceRegistry;\nvar MultiInstanceRegistry = /** @class */ (function () {\n    function MultiInstanceRegistry() {\n        this.elements = new Map;\n    }\n    MultiInstanceRegistry.prototype.register = function (key, instance) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        var instances = this.elements.get(key);\n        if (instances !== undefined)\n            instances.push(instance);\n        else\n            this.elements.set(key, [instance]);\n    };\n    MultiInstanceRegistry.prototype.deregisterAll = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    MultiInstanceRegistry.prototype.get = function (key) {\n        var existingInstances = this.elements.get(key);\n        if (existingInstances !== undefined)\n            return existingInstances;\n        else\n            return [];\n    };\n    MultiInstanceRegistry = __decorate([\n        inversify_1.injectable()\n    ], MultiInstanceRegistry);\n    return MultiInstanceRegistry;\n}());\nexports.MultiInstanceRegistry = MultiInstanceRegistry;\n//# sourceMappingURL=registry.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tagProperty = exports.tagParameter = exports.decorate = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED;\n    _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\nexports.tagParameter = tagParameter;\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED_PROP;\n    _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\nexports.tagProperty = tagProperty;\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n    var paramsOrPropertiesMetadata = {};\n    var isParameterDecorator = (typeof parameterIndex === \"number\");\n    var key = (parameterIndex !== undefined && isParameterDecorator) ? parameterIndex.toString() : propertyName;\n    if (isParameterDecorator && propertyName !== undefined) {\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n    }\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n    }\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n    if (!Array.isArray(paramOrPropertyMetadata)) {\n        paramOrPropertyMetadata = [];\n    }\n    else {\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\n            var m = paramOrPropertyMetadata_1[_i];\n            if (m.key === metadata.key) {\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\n            }\n        }\n    }\n    paramOrPropertyMetadata.push(metadata);\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\nfunction _decorate(decorators, target) {\n    Reflect.decorate(decorators, target);\n}\nfunction _param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction decorate(decorator, target, parameterIndex) {\n    if (typeof parameterIndex === \"number\") {\n        _decorate([_param(parameterIndex, decorator)], target);\n    }\n    else if (typeof parameterIndex === \"string\") {\n        Reflect.decorate([decorator], target, parameterIndex);\n    }\n    else {\n        _decorate([decorator], target);\n    }\n}\nexports.decorate = decorate;\n//# sourceMappingURL=decorator_utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inject = exports.LazyServiceIdentifer = void 0;\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar LazyServiceIdentifer = (function () {\n    function LazyServiceIdentifer(cb) {\n        this._cb = cb;\n    }\n    LazyServiceIdentifer.prototype.unwrap = function () {\n        return this._cb();\n    };\n    return LazyServiceIdentifer;\n}());\nexports.LazyServiceIdentifer = LazyServiceIdentifer;\nfunction inject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        if (serviceIdentifier === undefined) {\n            throw new Error(error_msgs_1.UNDEFINED_INJECT_ANNOTATION(target.name));\n        }\n        var metadata = new metadata_1.Metadata(METADATA_KEY.INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.inject = inject;\n//# sourceMappingURL=inject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.injectable = void 0;\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction injectable() {\n    return function (target) {\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target)) {\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\n        }\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\n        return target;\n    };\n}\nexports.injectable = injectable;\n//# sourceMappingURL=injectable.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiInject = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction multiInject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.multiInject = multiInject;\n//# sourceMappingURL=multi_inject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.named = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction named(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, name);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.named = named;\n//# sourceMappingURL=named.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optional = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction optional() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG, true);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.optional = optional;\n//# sourceMappingURL=optional.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.postConstruct = void 0;\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nfunction postConstruct() {\n    return function (target, propertyKey, descriptor) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT, propertyKey);\n        if (Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT, target.constructor)) {\n            throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\n        }\n        Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT, metadata, target.constructor);\n    };\n}\nexports.postConstruct = postConstruct;\n//# sourceMappingURL=post_construct.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tagged = void 0;\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction tagged(metadataKey, metadataValue) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(metadataKey, metadataValue);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.tagged = tagged;\n//# sourceMappingURL=tagged.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.targetName = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction targetName(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAME_TAG, name);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.targetName = targetName;\n//# sourceMappingURL=target_name.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unmanaged = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction unmanaged() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG, true);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.unmanaged = unmanaged;\n//# sourceMappingURL=unmanaged.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Binding = void 0;\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar id_1 = require(\"../utils/id\");\nvar Binding = (function () {\n    function Binding(serviceIdentifier, scope) {\n        this.id = id_1.id();\n        this.activated = false;\n        this.serviceIdentifier = serviceIdentifier;\n        this.scope = scope;\n        this.type = literal_types_1.BindingTypeEnum.Invalid;\n        this.constraint = function (request) { return true; };\n        this.implementationType = null;\n        this.cache = null;\n        this.factory = null;\n        this.provider = null;\n        this.onActivation = null;\n        this.dynamicValue = null;\n    }\n    Binding.prototype.clone = function () {\n        var clone = new Binding(this.serviceIdentifier, this.scope);\n        clone.activated = (clone.scope === literal_types_1.BindingScopeEnum.Singleton) ? this.activated : false;\n        clone.implementationType = this.implementationType;\n        clone.dynamicValue = this.dynamicValue;\n        clone.scope = this.scope;\n        clone.type = this.type;\n        clone.factory = this.factory;\n        clone.provider = this.provider;\n        clone.constraint = this.constraint;\n        clone.onActivation = this.onActivation;\n        clone.cache = this.cache;\n        return clone;\n    };\n    return Binding;\n}());\nexports.Binding = Binding;\n//# sourceMappingURL=binding.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingCount = void 0;\nvar BindingCount = {\n    MultipleBindingsAvailable: 2,\n    NoBindingsAvailable: 0,\n    OnlyOneBindingAvailable: 1\n};\nexports.BindingCount = BindingCount;\n//# sourceMappingURL=binding_count.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.STACK_OVERFLOW = exports.CIRCULAR_DEPENDENCY_IN_FACTORY = exports.POST_CONSTRUCT_ERROR = exports.MULTIPLE_POST_CONSTRUCT_METHODS = exports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = exports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = exports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = exports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = exports.ARGUMENTS_LENGTH_MISMATCH = exports.INVALID_DECORATOR_OPERATION = exports.INVALID_TO_SELF_VALUE = exports.INVALID_FUNCTION_BINDING = exports.INVALID_MIDDLEWARE_RETURN = exports.NO_MORE_SNAPSHOTS_AVAILABLE = exports.INVALID_BINDING_TYPE = exports.NOT_IMPLEMENTED = exports.CIRCULAR_DEPENDENCY = exports.UNDEFINED_INJECT_ANNOTATION = exports.MISSING_INJECT_ANNOTATION = exports.MISSING_INJECTABLE_ANNOTATION = exports.NOT_REGISTERED = exports.CANNOT_UNBIND = exports.AMBIGUOUS_MATCH = exports.KEY_NOT_FOUND = exports.NULL_ARGUMENT = exports.DUPLICATED_METADATA = exports.DUPLICATED_INJECTABLE_DECORATOR = void 0;\nexports.DUPLICATED_INJECTABLE_DECORATOR = \"Cannot apply @injectable decorator multiple times.\";\nexports.DUPLICATED_METADATA = \"Metadata key was used more than once in a parameter:\";\nexports.NULL_ARGUMENT = \"NULL argument\";\nexports.KEY_NOT_FOUND = \"Key Not Found\";\nexports.AMBIGUOUS_MATCH = \"Ambiguous match found for serviceIdentifier:\";\nexports.CANNOT_UNBIND = \"Could not unbind serviceIdentifier:\";\nexports.NOT_REGISTERED = \"No matching bindings found for serviceIdentifier:\";\nexports.MISSING_INJECTABLE_ANNOTATION = \"Missing required @injectable annotation in:\";\nexports.MISSING_INJECT_ANNOTATION = \"Missing required @inject or @multiInject annotation in:\";\nvar UNDEFINED_INJECT_ANNOTATION = function (name) {\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\n        \"a circular dependency problem. You can use a LazyServiceIdentifer to  \" +\n        \"overcome this limitation.\";\n};\nexports.UNDEFINED_INJECT_ANNOTATION = UNDEFINED_INJECT_ANNOTATION;\nexports.CIRCULAR_DEPENDENCY = \"Circular dependency found:\";\nexports.NOT_IMPLEMENTED = \"Sorry, this feature is not fully implemented yet.\";\nexports.INVALID_BINDING_TYPE = \"Invalid binding type:\";\nexports.NO_MORE_SNAPSHOTS_AVAILABLE = \"No snapshot available to restore.\";\nexports.INVALID_MIDDLEWARE_RETURN = \"Invalid return type in middleware. Middleware must return!\";\nexports.INVALID_FUNCTION_BINDING = \"Value provided to function binding must be a function!\";\nexports.INVALID_TO_SELF_VALUE = \"The toSelf function can only be applied when a constructor is \" +\n    \"used as service identifier\";\nexports.INVALID_DECORATOR_OPERATION = \"The @inject @multiInject @tagged and @named decorators \" +\n    \"must be applied to the parameters of a class constructor or a class property.\";\nvar ARGUMENTS_LENGTH_MISMATCH = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"The number of constructor arguments in the derived class \" +\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\n};\nexports.ARGUMENTS_LENGTH_MISMATCH = ARGUMENTS_LENGTH_MISMATCH;\nexports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = \"Invalid Container constructor argument. Container options \" +\n    \"must be an object.\";\nexports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = \"Invalid Container option. Default scope must \" +\n    \"be a string ('singleton' or 'transient').\";\nexports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = \"Invalid Container option. Auto bind injectable must \" +\n    \"be a boolean\";\nexports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = \"Invalid Container option. Skip base check must \" +\n    \"be a boolean\";\nexports.MULTIPLE_POST_CONSTRUCT_METHODS = \"Cannot apply @postConstruct decorator multiple times in the same class\";\nvar POST_CONSTRUCT_ERROR = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"@postConstruct error in class \" + values[0] + \": \" + values[1];\n};\nexports.POST_CONSTRUCT_ERROR = POST_CONSTRUCT_ERROR;\nvar CIRCULAR_DEPENDENCY_IN_FACTORY = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"It looks like there is a circular dependency \" +\n        (\"in one of the '\" + values[0] + \"' bindings. Please investigate bindings with\") +\n        (\"service identifier '\" + values[1] + \"'.\");\n};\nexports.CIRCULAR_DEPENDENCY_IN_FACTORY = CIRCULAR_DEPENDENCY_IN_FACTORY;\nexports.STACK_OVERFLOW = \"Maximum call stack size exceeded\";\n//# sourceMappingURL=error_msgs.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TargetTypeEnum = exports.BindingTypeEnum = exports.BindingScopeEnum = void 0;\nvar BindingScopeEnum = {\n    Request: \"Request\",\n    Singleton: \"Singleton\",\n    Transient: \"Transient\"\n};\nexports.BindingScopeEnum = BindingScopeEnum;\nvar BindingTypeEnum = {\n    ConstantValue: \"ConstantValue\",\n    Constructor: \"Constructor\",\n    DynamicValue: \"DynamicValue\",\n    Factory: \"Factory\",\n    Function: \"Function\",\n    Instance: \"Instance\",\n    Invalid: \"Invalid\",\n    Provider: \"Provider\"\n};\nexports.BindingTypeEnum = BindingTypeEnum;\nvar TargetTypeEnum = {\n    ClassProperty: \"ClassProperty\",\n    ConstructorArgument: \"ConstructorArgument\",\n    Variable: \"Variable\"\n};\nexports.TargetTypeEnum = TargetTypeEnum;\n//# sourceMappingURL=literal_types.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NON_CUSTOM_TAG_KEYS = exports.POST_CONSTRUCT = exports.DESIGN_PARAM_TYPES = exports.PARAM_TYPES = exports.TAGGED_PROP = exports.TAGGED = exports.MULTI_INJECT_TAG = exports.INJECT_TAG = exports.OPTIONAL_TAG = exports.UNMANAGED_TAG = exports.NAME_TAG = exports.NAMED_TAG = void 0;\nexports.NAMED_TAG = \"named\";\nexports.NAME_TAG = \"name\";\nexports.UNMANAGED_TAG = \"unmanaged\";\nexports.OPTIONAL_TAG = \"optional\";\nexports.INJECT_TAG = \"inject\";\nexports.MULTI_INJECT_TAG = \"multi_inject\";\nexports.TAGGED = \"inversify:tagged\";\nexports.TAGGED_PROP = \"inversify:tagged_props\";\nexports.PARAM_TYPES = \"inversify:paramtypes\";\nexports.DESIGN_PARAM_TYPES = \"design:paramtypes\";\nexports.POST_CONSTRUCT = \"post_construct\";\nfunction getNonCustomTagKeys() {\n    return [\n        exports.INJECT_TAG,\n        exports.MULTI_INJECT_TAG,\n        exports.NAME_TAG,\n        exports.UNMANAGED_TAG,\n        exports.NAMED_TAG,\n        exports.OPTIONAL_TAG,\n    ];\n}\nexports.NON_CUSTOM_TAG_KEYS = getNonCustomTagKeys();\n//# sourceMappingURL=metadata_keys.js.map","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Container = void 0;\nvar binding_1 = require(\"../bindings/binding\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\nvar planner_1 = require(\"../planning/planner\");\nvar resolver_1 = require(\"../resolution/resolver\");\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\nvar id_1 = require(\"../utils/id\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar container_snapshot_1 = require(\"./container_snapshot\");\nvar lookup_1 = require(\"./lookup\");\nvar Container = (function () {\n    function Container(containerOptions) {\n        this._appliedMiddleware = [];\n        var options = containerOptions || {};\n        if (typeof options !== \"object\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n        }\n        if (options.defaultScope === undefined) {\n            options.defaultScope = literal_types_1.BindingScopeEnum.Transient;\n        }\n        else if (options.defaultScope !== literal_types_1.BindingScopeEnum.Singleton &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Transient &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Request) {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n        }\n        if (options.autoBindInjectable === undefined) {\n            options.autoBindInjectable = false;\n        }\n        else if (typeof options.autoBindInjectable !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n        }\n        if (options.skipBaseClassChecks === undefined) {\n            options.skipBaseClassChecks = false;\n        }\n        else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n        }\n        this.options = {\n            autoBindInjectable: options.autoBindInjectable,\n            defaultScope: options.defaultScope,\n            skipBaseClassChecks: options.skipBaseClassChecks\n        };\n        this.id = id_1.id();\n        this._bindingDictionary = new lookup_1.Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new metadata_reader_1.MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container3 = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            container3[_i - 2] = arguments[_i];\n        }\n        var container = new Container();\n        var targetContainers = __spreadArray([container1, container2], container3).map(function (targetContainer) { return planner_1.getBindingDictionary(targetContainer); });\n        var bindingDictionary = planner_1.getBindingDictionary(container);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        targetContainers.forEach(function (targetBindingDictionary) {\n            copyDictionary(targetBindingDictionary, bindingDictionary);\n        });\n        return container;\n    };\n    Container.prototype.load = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var getHelpers = this._getContainerModuleHelpersFactory();\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n            var currentModule = modules_1[_a];\n            var containerModuleHelpers = getHelpers(currentModule.id);\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n        }\n    };\n    Container.prototype.loadAsync = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        getHelpers = this._getContainerModuleHelpersFactory();\n                        _a = 0, modules_2 = modules;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_a < modules_2.length)) return [3, 4];\n                        currentModule = modules_2[_a];\n                        containerModuleHelpers = getHelpers(currentModule.id);\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _a++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.id);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var scope = this.options.defaultScope || literal_types_1.BindingScopeEnum.Transient;\n        var binding = new binding_1.Binding(serviceIdentifier, scope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new binding_to_syntax_1.BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new lookup_1.Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function (containerOptions) {\n        var child = new Container(containerOptions || this.options);\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        this._appliedMiddleware = this._appliedMiddleware.concat(middlewares);\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = this.createChild();\n        tempContainer.bind(constructorFunction).toSelf();\n        this._appliedMiddleware.forEach(function (m) {\n            tempContainer.applyMiddleware(m);\n        });\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._getContainerModuleHelpersFactory = function () {\n        var _this = this;\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _bind = _this.bind.bind(_this);\n                var bindingToSyntax = _bind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _rebind = _this.rebind.bind(_this);\n                var bindingToSyntax = _rebind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        return function (mId) { return ({\n            bindFunction: getBindFunction(mId),\n            isboundFunction: getIsboundFunction(mId),\n            rebindFunction: getRebindFunction(mId),\n            unbindFunction: getUnbindFunction(mId)\n        }); };\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolver_1.resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexports.Container = Container;\n//# sourceMappingURL=container.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AsyncContainerModule = exports.ContainerModule = void 0;\nvar id_1 = require(\"../utils/id\");\nvar ContainerModule = (function () {\n    function ContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return ContainerModule;\n}());\nexports.ContainerModule = ContainerModule;\nvar AsyncContainerModule = (function () {\n    function AsyncContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return AsyncContainerModule;\n}());\nexports.AsyncContainerModule = AsyncContainerModule;\n//# sourceMappingURL=container_module.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContainerSnapshot = void 0;\nvar ContainerSnapshot = (function () {\n    function ContainerSnapshot() {\n    }\n    ContainerSnapshot.of = function (bindings, middleware) {\n        var snapshot = new ContainerSnapshot();\n        snapshot.bindings = bindings;\n        snapshot.middleware = middleware;\n        return snapshot;\n    };\n    return ContainerSnapshot;\n}());\nexports.ContainerSnapshot = ContainerSnapshot;\n//# sourceMappingURL=container_snapshot.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Lookup = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar Lookup = (function () {\n    function Lookup() {\n        this._map = new Map();\n    }\n    Lookup.prototype.getMap = function () {\n        return this._map;\n    };\n    Lookup.prototype.add = function (serviceIdentifier, value) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (value === null || value === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            entry.push(value);\n            this._map.set(serviceIdentifier, entry);\n        }\n        else {\n            this._map.set(serviceIdentifier, [value]);\n        }\n    };\n    Lookup.prototype.get = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            return entry;\n        }\n        else {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.remove = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (!this._map.delete(serviceIdentifier)) {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.removeByCondition = function (condition) {\n        var _this = this;\n        this._map.forEach(function (entries, key) {\n            var updatedEntries = entries.filter(function (entry) { return !condition(entry); });\n            if (updatedEntries.length > 0) {\n                _this._map.set(key, updatedEntries);\n            }\n            else {\n                _this._map.delete(key);\n            }\n        });\n    };\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        return this._map.has(serviceIdentifier);\n    };\n    Lookup.prototype.clone = function () {\n        var copy = new Lookup();\n        this._map.forEach(function (value, key) {\n            value.forEach(function (b) { return copy.add(key, b.clone()); });\n        });\n        return copy;\n    };\n    Lookup.prototype.traverse = function (func) {\n        this._map.forEach(function (value, key) {\n            func(key, value);\n        });\n    };\n    return Lookup;\n}());\nexports.Lookup = Lookup;\n//# sourceMappingURL=lookup.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiBindToService = exports.getServiceIdentifierAsString = exports.typeConstraint = exports.namedConstraint = exports.taggedConstraint = exports.traverseAncerstors = exports.decorate = exports.id = exports.MetadataReader = exports.postConstruct = exports.targetName = exports.multiInject = exports.unmanaged = exports.optional = exports.LazyServiceIdentifer = exports.inject = exports.named = exports.tagged = exports.injectable = exports.ContainerModule = exports.AsyncContainerModule = exports.TargetTypeEnum = exports.BindingTypeEnum = exports.BindingScopeEnum = exports.Container = exports.METADATA_KEY = void 0;\nvar keys = require(\"./constants/metadata_keys\");\nexports.METADATA_KEY = keys;\nvar container_1 = require(\"./container/container\");\nObject.defineProperty(exports, \"Container\", { enumerable: true, get: function () { return container_1.Container; } });\nvar literal_types_1 = require(\"./constants/literal_types\");\nObject.defineProperty(exports, \"BindingScopeEnum\", { enumerable: true, get: function () { return literal_types_1.BindingScopeEnum; } });\nObject.defineProperty(exports, \"BindingTypeEnum\", { enumerable: true, get: function () { return literal_types_1.BindingTypeEnum; } });\nObject.defineProperty(exports, \"TargetTypeEnum\", { enumerable: true, get: function () { return literal_types_1.TargetTypeEnum; } });\nvar container_module_1 = require(\"./container/container_module\");\nObject.defineProperty(exports, \"AsyncContainerModule\", { enumerable: true, get: function () { return container_module_1.AsyncContainerModule; } });\nObject.defineProperty(exports, \"ContainerModule\", { enumerable: true, get: function () { return container_module_1.ContainerModule; } });\nvar injectable_1 = require(\"./annotation/injectable\");\nObject.defineProperty(exports, \"injectable\", { enumerable: true, get: function () { return injectable_1.injectable; } });\nvar tagged_1 = require(\"./annotation/tagged\");\nObject.defineProperty(exports, \"tagged\", { enumerable: true, get: function () { return tagged_1.tagged; } });\nvar named_1 = require(\"./annotation/named\");\nObject.defineProperty(exports, \"named\", { enumerable: true, get: function () { return named_1.named; } });\nvar inject_1 = require(\"./annotation/inject\");\nObject.defineProperty(exports, \"inject\", { enumerable: true, get: function () { return inject_1.inject; } });\nObject.defineProperty(exports, \"LazyServiceIdentifer\", { enumerable: true, get: function () { return inject_1.LazyServiceIdentifer; } });\nvar optional_1 = require(\"./annotation/optional\");\nObject.defineProperty(exports, \"optional\", { enumerable: true, get: function () { return optional_1.optional; } });\nvar unmanaged_1 = require(\"./annotation/unmanaged\");\nObject.defineProperty(exports, \"unmanaged\", { enumerable: true, get: function () { return unmanaged_1.unmanaged; } });\nvar multi_inject_1 = require(\"./annotation/multi_inject\");\nObject.defineProperty(exports, \"multiInject\", { enumerable: true, get: function () { return multi_inject_1.multiInject; } });\nvar target_name_1 = require(\"./annotation/target_name\");\nObject.defineProperty(exports, \"targetName\", { enumerable: true, get: function () { return target_name_1.targetName; } });\nvar post_construct_1 = require(\"./annotation/post_construct\");\nObject.defineProperty(exports, \"postConstruct\", { enumerable: true, get: function () { return post_construct_1.postConstruct; } });\nvar metadata_reader_1 = require(\"./planning/metadata_reader\");\nObject.defineProperty(exports, \"MetadataReader\", { enumerable: true, get: function () { return metadata_reader_1.MetadataReader; } });\nvar id_1 = require(\"./utils/id\");\nObject.defineProperty(exports, \"id\", { enumerable: true, get: function () { return id_1.id; } });\nvar decorator_utils_1 = require(\"./annotation/decorator_utils\");\nObject.defineProperty(exports, \"decorate\", { enumerable: true, get: function () { return decorator_utils_1.decorate; } });\nvar constraint_helpers_1 = require(\"./syntax/constraint_helpers\");\nObject.defineProperty(exports, \"traverseAncerstors\", { enumerable: true, get: function () { return constraint_helpers_1.traverseAncerstors; } });\nObject.defineProperty(exports, \"taggedConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.taggedConstraint; } });\nObject.defineProperty(exports, \"namedConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.namedConstraint; } });\nObject.defineProperty(exports, \"typeConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.typeConstraint; } });\nvar serialization_1 = require(\"./utils/serialization\");\nObject.defineProperty(exports, \"getServiceIdentifierAsString\", { enumerable: true, get: function () { return serialization_1.getServiceIdentifierAsString; } });\nvar binding_utils_1 = require(\"./utils/binding_utils\");\nObject.defineProperty(exports, \"multiBindToService\", { enumerable: true, get: function () { return binding_utils_1.multiBindToService; } });\n//# sourceMappingURL=inversify.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Context = void 0;\nvar id_1 = require(\"../utils/id\");\nvar Context = (function () {\n    function Context(container) {\n        this.id = id_1.id();\n        this.container = container;\n    }\n    Context.prototype.addPlan = function (plan) {\n        this.plan = plan;\n    };\n    Context.prototype.setCurrentRequest = function (currentRequest) {\n        this.currentRequest = currentRequest;\n    };\n    return Context;\n}());\nexports.Context = Context;\n//# sourceMappingURL=context.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Metadata = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Metadata = (function () {\n    function Metadata(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    Metadata.prototype.toString = function () {\n        if (this.key === METADATA_KEY.NAMED_TAG) {\n            return \"named: \" + this.value.toString() + \" \";\n        }\n        else {\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + this.value + \" }\";\n        }\n    };\n    return Metadata;\n}());\nexports.Metadata = Metadata;\n//# sourceMappingURL=metadata.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetadataReader = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar MetadataReader = (function () {\n    function MetadataReader() {\n    }\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\n        return {\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\n            userGeneratedMetadata: userGeneratedMetadata || {}\n        };\n    };\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\n        return userGeneratedMetadata;\n    };\n    return MetadataReader;\n}());\nexports.MetadataReader = MetadataReader;\n//# sourceMappingURL=metadata_reader.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Plan = void 0;\nvar Plan = (function () {\n    function Plan(parentContext, rootRequest) {\n        this.parentContext = parentContext;\n        this.rootRequest = rootRequest;\n    }\n    return Plan;\n}());\nexports.Plan = Plan;\n//# sourceMappingURL=plan.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBindingDictionary = exports.createMockRequest = exports.plan = void 0;\nvar binding_count_1 = require(\"../bindings/binding_count\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar context_1 = require(\"./context\");\nvar metadata_1 = require(\"./metadata\");\nvar plan_1 = require(\"./plan\");\nvar reflection_utils_1 = require(\"./reflection_utils\");\nvar request_1 = require(\"./request\");\nvar target_1 = require(\"./target\");\nfunction getBindingDictionary(cntnr) {\n    return cntnr._bindingDictionary;\n}\nexports.getBindingDictionary = getBindingDictionary;\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\n    var injectMetadata = new metadata_1.Metadata(metadataKey, serviceIdentifier);\n    var target = new target_1.Target(targetType, name, serviceIdentifier, injectMetadata);\n    if (key !== undefined) {\n        var tagMetadata = new metadata_1.Metadata(key, value);\n        target.metadata.push(tagMetadata);\n    }\n    return target;\n}\nfunction _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {\n    var bindings = getBindings(context.container, target.serviceIdentifier);\n    var activeBindings = [];\n    if (bindings.length === binding_count_1.BindingCount.NoBindingsAvailable &&\n        context.container.options.autoBindInjectable &&\n        typeof target.serviceIdentifier === \"function\" &&\n        metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {\n        context.container.bind(target.serviceIdentifier).toSelf();\n        bindings = getBindings(context.container, target.serviceIdentifier);\n    }\n    if (!avoidConstraints) {\n        activeBindings = bindings.filter(function (binding) {\n            var request = new request_1.Request(binding.serviceIdentifier, context, parentRequest, binding, target);\n            return binding.constraint(request);\n        });\n    }\n    else {\n        activeBindings = bindings;\n    }\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\n    return activeBindings;\n}\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\n    switch (bindings.length) {\n        case binding_count_1.BindingCount.NoBindingsAvailable:\n            if (target.isOptional()) {\n                return bindings;\n            }\n            else {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.NOT_REGISTERED;\n                msg += serialization_1.listMetadataForTarget(serviceIdentifierString, target);\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n        case binding_count_1.BindingCount.OnlyOneBindingAvailable:\n            if (!target.isArray()) {\n                return bindings;\n            }\n        case binding_count_1.BindingCount.MultipleBindingsAvailable:\n        default:\n            if (!target.isArray()) {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n            else {\n                return bindings;\n            }\n    }\n}\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\n    var activeBindings;\n    var childRequest;\n    if (parentRequest === null) {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);\n        childRequest = new request_1.Request(serviceIdentifier, context, null, activeBindings, target);\n        var thePlan = new plan_1.Plan(context, childRequest);\n        context.addPlan(thePlan);\n    }\n    else {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);\n        childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\n    }\n    activeBindings.forEach(function (binding) {\n        var subChildRequest = null;\n        if (target.isArray()) {\n            subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);\n        }\n        else {\n            if (binding.cache) {\n                return;\n            }\n            subChildRequest = childRequest;\n        }\n        if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n            var dependencies = reflection_utils_1.getDependencies(metadataReader, binding.implementationType);\n            if (!context.container.options.skipBaseClassChecks) {\n                var baseClassDependencyCount = reflection_utils_1.getBaseClassDependencyCount(metadataReader, binding.implementationType);\n                if (dependencies.length < baseClassDependencyCount) {\n                    var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(reflection_utils_1.getFunctionName(binding.implementationType));\n                    throw new Error(error);\n                }\n            }\n            dependencies.forEach(function (dependency) {\n                _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\n            });\n        }\n    });\n}\nfunction getBindings(container, serviceIdentifier) {\n    var bindings = [];\n    var bindingDictionary = getBindingDictionary(container);\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\n        bindings = bindingDictionary.get(serviceIdentifier);\n    }\n    else if (container.parent !== null) {\n        bindings = getBindings(container.parent, serviceIdentifier);\n    }\n    return bindings;\n}\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\n    var context = new context_1.Context(container);\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, \"\", key, value);\n    try {\n        _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\n        return context;\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            if (context.plan) {\n                serialization_1.circularDependencyToException(context.plan.rootRequest);\n            }\n        }\n        throw error;\n    }\n}\nexports.plan = plan;\nfunction createMockRequest(container, serviceIdentifier, key, value) {\n    var target = new target_1.Target(literal_types_1.TargetTypeEnum.Variable, \"\", serviceIdentifier, new metadata_1.Metadata(key, value));\n    var context = new context_1.Context(container);\n    var request = new request_1.Request(serviceIdentifier, context, null, [], target);\n    return request;\n}\nexports.createMockRequest = createMockRequest;\n//# sourceMappingURL=planner.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QueryableString = void 0;\nvar QueryableString = (function () {\n    function QueryableString(str) {\n        this.str = str;\n    }\n    QueryableString.prototype.startsWith = function (searchString) {\n        return this.str.indexOf(searchString) === 0;\n    };\n    QueryableString.prototype.endsWith = function (searchString) {\n        var reverseString = \"\";\n        var reverseSearchString = searchString.split(\"\").reverse().join(\"\");\n        reverseString = this.str.split(\"\").reverse().join(\"\");\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\n    };\n    QueryableString.prototype.contains = function (searchString) {\n        return (this.str.indexOf(searchString) !== -1);\n    };\n    QueryableString.prototype.equals = function (compareString) {\n        return this.str === compareString;\n    };\n    QueryableString.prototype.value = function () {\n        return this.str;\n    };\n    return QueryableString;\n}());\nexports.QueryableString = QueryableString;\n//# sourceMappingURL=queryable_string.js.map","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFunctionName = exports.getBaseClassDependencyCount = exports.getDependencies = void 0;\nvar inject_1 = require(\"../annotation/inject\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar serialization_1 = require(\"../utils/serialization\");\nObject.defineProperty(exports, \"getFunctionName\", { enumerable: true, get: function () { return serialization_1.getFunctionName; } });\nvar target_1 = require(\"./target\");\nfunction getDependencies(metadataReader, func) {\n    var constructorName = serialization_1.getFunctionName(func);\n    var targets = getTargets(metadataReader, constructorName, func, false);\n    return targets;\n}\nexports.getDependencies = getDependencies;\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\n    var metadata = metadataReader.getConstructorMetadata(func);\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\n    if (serviceIdentifiers === undefined) {\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\n        throw new Error(msg);\n    }\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\n    var keys = Object.keys(constructorArgsMetadata);\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\n    var hasOptionalParameters = keys.length > func.length;\n    var iterations = (hasUserDeclaredUnknownInjections || hasOptionalParameters) ? keys.length : func.length;\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func);\n    var targets = __spreadArray(__spreadArray([], constructorTargets), propertyTargets);\n    return targets;\n}\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\n    var metadata = formatTargetMetadata(targetMetadata);\n    var isManaged = metadata.unmanaged !== true;\n    var serviceIdentifier = serviceIdentifiers[index];\n    var injectIdentifier = (metadata.inject || metadata.multiInject);\n    serviceIdentifier = (injectIdentifier) ? (injectIdentifier) : serviceIdentifier;\n    if (serviceIdentifier instanceof inject_1.LazyServiceIdentifer) {\n        serviceIdentifier = serviceIdentifier.unwrap();\n    }\n    if (isManaged) {\n        var isObject = serviceIdentifier === Object;\n        var isFunction = serviceIdentifier === Function;\n        var isUndefined = serviceIdentifier === undefined;\n        var isUnknownType = (isObject || isFunction || isUndefined);\n        if (!isBaseClass && isUnknownType) {\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\n            throw new Error(msg);\n        }\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        return target;\n    }\n    return null;\n}\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\n    var targets = [];\n    for (var i = 0; i < iterations; i++) {\n        var index = i;\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\n        if (target !== null) {\n            targets.push(target);\n        }\n    }\n    return targets;\n}\nfunction getClassPropsAsTargets(metadataReader, constructorFunc) {\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\n    var targets = [];\n    var keys = Object.keys(classPropsMetadata);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        var targetMetadata = classPropsMetadata[key];\n        var metadata = formatTargetMetadata(classPropsMetadata[key]);\n        var targetName = metadata.targetName || key;\n        var serviceIdentifier = (metadata.inject || metadata.multiInject);\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty, targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        targets.push(target);\n    }\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor);\n        targets = __spreadArray(__spreadArray([], targets), baseTargets);\n    }\n    return targets;\n}\nfunction getBaseClassDependencyCount(metadataReader, func) {\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseConstructorName = serialization_1.getFunctionName(baseConstructor);\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\n        var metadata = targets.map(function (t) {\n            return t.metadata.filter(function (m) {\n                return m.key === METADATA_KEY.UNMANAGED_TAG;\n            });\n        });\n        var unmanagedCount = [].concat.apply([], metadata).length;\n        var dependencyCount = targets.length - unmanagedCount;\n        if (dependencyCount > 0) {\n            return dependencyCount;\n        }\n        else {\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\n        }\n    }\n    else {\n        return 0;\n    }\n}\nexports.getBaseClassDependencyCount = getBaseClassDependencyCount;\nfunction formatTargetMetadata(targetMetadata) {\n    var targetMetadataMap = {};\n    targetMetadata.forEach(function (m) {\n        targetMetadataMap[m.key.toString()] = m.value;\n    });\n    return {\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\n    };\n}\n//# sourceMappingURL=reflection_utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Request = void 0;\nvar id_1 = require(\"../utils/id\");\nvar Request = (function () {\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\n        this.id = id_1.id();\n        this.serviceIdentifier = serviceIdentifier;\n        this.parentContext = parentContext;\n        this.parentRequest = parentRequest;\n        this.target = target;\n        this.childRequests = [];\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\n        this.requestScope = parentRequest === null\n            ? new Map()\n            : null;\n    }\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\n        this.childRequests.push(child);\n        return child;\n    };\n    return Request;\n}());\nexports.Request = Request;\n//# sourceMappingURL=request.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Target = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar id_1 = require(\"../utils/id\");\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.id = id_1.id();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new queryable_string_1.QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof metadata_1.Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n            var m = _a[_i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (metadata) { return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) { return metadata.key !== key; }); });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (metadata) { return METADATA_KEY.NON_CUSTOM_TAG_KEYS.every(function (key) { return metadata.key !== key; }); });\n        }\n        else {\n            return null;\n        }\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n                var m = _a[_i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexports.Target = Target;\n//# sourceMappingURL=target.js.map","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveInstance = void 0;\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction _injectProperties(instance, childRequests, resolveRequest) {\n    var propertyInjectionsRequests = childRequests.filter(function (childRequest) {\n        return (childRequest.target !== null &&\n            childRequest.target.type === literal_types_1.TargetTypeEnum.ClassProperty);\n    });\n    var propertyInjections = propertyInjectionsRequests.map(resolveRequest);\n    propertyInjectionsRequests.forEach(function (r, index) {\n        var propertyName = \"\";\n        propertyName = r.target.name.value();\n        var injection = propertyInjections[index];\n        instance[propertyName] = injection;\n    });\n    return instance;\n}\nfunction _createInstance(Func, injections) {\n    return new (Func.bind.apply(Func, __spreadArray([void 0], injections)))();\n}\nfunction _postConstruct(constr, result) {\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\n        try {\n            result[data.value]();\n        }\n        catch (e) {\n            throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name, e.message));\n        }\n    }\n}\nfunction resolveInstance(constr, childRequests, resolveRequest) {\n    var result = null;\n    if (childRequests.length > 0) {\n        var constructorInjectionsRequests = childRequests.filter(function (childRequest) {\n            return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ConstructorArgument);\n        });\n        var constructorInjections = constructorInjectionsRequests.map(resolveRequest);\n        result = _createInstance(constr, constructorInjections);\n        result = _injectProperties(result, childRequests, resolveRequest);\n    }\n    else {\n        result = new constr();\n    }\n    _postConstruct(constr, result);\n    return result;\n}\nexports.resolveInstance = resolveInstance;\n//# sourceMappingURL=instantiation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolve = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar instantiation_1 = require(\"./instantiation\");\nvar invokeFactory = function (factoryType, serviceIdentifier, fn) {\n    try {\n        return fn();\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType, serviceIdentifier.toString()));\n        }\n        else {\n            throw error;\n        }\n    }\n};\nvar _resolveRequest = function (requestScope) {\n    return function (request) {\n        request.parentContext.setCurrentRequest(request);\n        var bindings = request.bindings;\n        var childRequests = request.childRequests;\n        var targetIsAnArray = request.target && request.target.isArray();\n        var targetParentIsNotAnArray = !request.parentRequest ||\n            !request.parentRequest.target ||\n            !request.target ||\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n        if (targetIsAnArray && targetParentIsNotAnArray) {\n            return childRequests.map(function (childRequest) {\n                var _f = _resolveRequest(requestScope);\n                return _f(childRequest);\n            });\n        }\n        else {\n            var result = null;\n            if (request.target.isOptional() && bindings.length === 0) {\n                return undefined;\n            }\n            var binding_1 = bindings[0];\n            var isSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Singleton;\n            var isRequestSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Request;\n            if (isSingleton && binding_1.activated) {\n                return binding_1.cache;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                requestScope.has(binding_1.id)) {\n                return requestScope.get(binding_1.id);\n            }\n            if (binding_1.type === literal_types_1.BindingTypeEnum.ConstantValue) {\n                result = binding_1.cache;\n                binding_1.activated = true;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Function) {\n                result = binding_1.cache;\n                binding_1.activated = true;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Constructor) {\n                result = binding_1.implementationType;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.DynamicValue && binding_1.dynamicValue !== null) {\n                result = invokeFactory(\"toDynamicValue\", binding_1.serviceIdentifier, function () { return binding_1.dynamicValue(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Factory && binding_1.factory !== null) {\n                result = invokeFactory(\"toFactory\", binding_1.serviceIdentifier, function () { return binding_1.factory(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Provider && binding_1.provider !== null) {\n                result = invokeFactory(\"toProvider\", binding_1.serviceIdentifier, function () { return binding_1.provider(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Instance && binding_1.implementationType !== null) {\n                result = instantiation_1.resolveInstance(binding_1.implementationType, childRequests, _resolveRequest(requestScope));\n            }\n            else {\n                var serviceIdentifier = serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);\n                throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n            }\n            if (typeof binding_1.onActivation === \"function\") {\n                result = binding_1.onActivation(request.parentContext, result);\n            }\n            if (isSingleton) {\n                binding_1.cache = result;\n                binding_1.activated = true;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                !requestScope.has(binding_1.id)) {\n                requestScope.set(binding_1.id, result);\n            }\n            return result;\n        }\n    };\n};\nfunction resolve(context) {\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\n    return _f(context.plan.rootRequest);\n}\nexports.resolve = resolve;\n//# sourceMappingURL=resolver.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingInSyntax = void 0;\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingInSyntax = (function () {\n    function BindingInSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingInSyntax.prototype.inRequestScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Request;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inSingletonScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inTransientScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Transient;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingInSyntax;\n}());\nexports.BindingInSyntax = BindingInSyntax;\n//# sourceMappingURL=binding_in_syntax.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingInWhenOnSyntax = void 0;\nvar binding_in_syntax_1 = require(\"./binding_in_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingInWhenOnSyntax = (function () {\n    function BindingInWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n        this._bindingInSyntax = new binding_in_syntax_1.BindingInSyntax(binding);\n    }\n    BindingInWhenOnSyntax.prototype.inRequestScope = function () {\n        return this._bindingInSyntax.inRequestScope();\n    };\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\n        return this._bindingInSyntax.inSingletonScope();\n    };\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\n        return this._bindingInSyntax.inTransientScope();\n    };\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingInWhenOnSyntax;\n}());\nexports.BindingInWhenOnSyntax = BindingInWhenOnSyntax;\n//# sourceMappingURL=binding_in_when_on_syntax.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingOnSyntax = void 0;\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingOnSyntax = (function () {\n    function BindingOnSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingOnSyntax.prototype.onActivation = function (handler) {\n        this._binding.onActivation = handler;\n        return new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n    };\n    return BindingOnSyntax;\n}());\nexports.BindingOnSyntax = BindingOnSyntax;\n//# sourceMappingURL=binding_on_syntax.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingToSyntax = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = literal_types_1.BindingTypeEnum.Function;\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\n            return autofactory;\n        };\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toService = function (service) {\n        this.toDynamicValue(function (context) { return context.container.get(service); });\n    };\n    return BindingToSyntax;\n}());\nexports.BindingToSyntax = BindingToSyntax;\n//# sourceMappingURL=binding_to_syntax.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingWhenOnSyntax = void 0;\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingWhenOnSyntax = (function () {\n    function BindingWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    }\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingWhenOnSyntax;\n}());\nexports.BindingWhenOnSyntax = BindingWhenOnSyntax;\n//# sourceMappingURL=binding_when_on_syntax.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingWhenSyntax = void 0;\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar constraint_helpers_1 = require(\"./constraint_helpers\");\nvar BindingWhenSyntax = (function () {\n    function BindingWhenSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingWhenSyntax.prototype.when = function (constraint) {\n        this._binding.constraint = constraint;\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n        this._binding.constraint = constraint_helpers_1.namedConstraint(name);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n        this._binding.constraint = function (request) {\n            var targetIsDefault = (request.target !== null) &&\n                (!request.target.isNamed()) &&\n                (!request.target.isTagged());\n            return targetIsDefault;\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n        this._binding.constraint = constraint_helpers_1.taggedConstraint(tag)(value);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.typeConstraint(parent)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.namedConstraint(name)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    return BindingWhenSyntax;\n}());\nexports.BindingWhenSyntax = BindingWhenSyntax;\n//# sourceMappingURL=binding_when_syntax.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.typeConstraint = exports.namedConstraint = exports.taggedConstraint = exports.traverseAncerstors = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n//# sourceMappingURL=constraint_helpers.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiBindToService = void 0;\nvar multiBindToService = function (container) {\n    return function (service) {\n        return function () {\n            var types = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                types[_i] = arguments[_i];\n            }\n            return types.forEach(function (t) { return container.bind(t).toService(service); });\n        };\n    };\n};\nexports.multiBindToService = multiBindToService;\n//# sourceMappingURL=binding_utils.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isStackOverflowExeption = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction isStackOverflowExeption(error) {\n    return (error instanceof RangeError ||\n        error.message === ERROR_MSGS.STACK_OVERFLOW);\n}\nexports.isStackOverflowExeption = isStackOverflowExeption;\n//# sourceMappingURL=exceptions.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.id = void 0;\nvar idCounter = 0;\nfunction id() {\n    return idCounter++;\n}\nexports.id = id;\n//# sourceMappingURL=id.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.circularDependencyToException = exports.listMetadataForTarget = exports.listRegisteredBindingsForServiceIdentifier = exports.getServiceIdentifierAsString = exports.getFunctionName = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n    if (request.parentRequest === null) {\n        return false;\n    }\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n        return true;\n    }\n    else {\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n    }\n}\nfunction dependencyChainToString(request) {\n    function _createStringArr(req, result) {\n        if (result === void 0) { result = []; }\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n        result.push(serviceIdentifier);\n        if (req.parentRequest !== null) {\n            return _createStringArr(req.parentRequest, result);\n        }\n        return result;\n    }\n    var stringArr = _createStringArr(request);\n    return stringArr.reverse().join(\" --> \");\n}\nfunction circularDependencyToException(request) {\n    request.childRequests.forEach(function (childRequest) {\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n            var services = dependencyChainToString(childRequest);\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n        else {\n            circularDependencyToException(childRequest);\n        }\n    });\n}\nexports.circularDependencyToException = circularDependencyToException;\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nexports.listMetadataForTarget = listMetadataForTarget;\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexports.getFunctionName = getFunctionName;\n//# sourceMappingURL=serialization.js.map","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.autocomplete = factory());\n}(this, function () { 'use strict';\n\n  /*\r\n   * https://github.com/kraaden/autocomplete\r\n   * Copyright (c) 2016 Denys Krasnoshchok\r\n   * MIT License\r\n   */\r\n  function autocomplete(settings) {\r\n      // just an alias to minimize JS file size\r\n      var doc = document;\r\n      var container = doc.createElement(\"div\");\r\n      var containerStyle = container.style;\r\n      var userAgent = navigator.userAgent;\r\n      var mobileFirefox = userAgent.indexOf(\"Firefox\") !== -1 && userAgent.indexOf(\"Mobile\") !== -1;\r\n      var debounceWaitMs = settings.debounceWaitMs || 0;\r\n      var preventSubmit = settings.preventSubmit || false;\r\n      // 'keyup' event will not be fired on Mobile Firefox, so we have to use 'input' event instead\r\n      var keyUpEventName = mobileFirefox ? \"input\" : \"keyup\";\r\n      var items = [];\r\n      var inputValue = \"\";\r\n      var minLen = 2;\r\n      var showOnFocus = settings.showOnFocus;\r\n      var selected;\r\n      var keypressCounter = 0;\r\n      var debounceTimer;\r\n      if (settings.minLength !== undefined) {\r\n          minLen = settings.minLength;\r\n      }\r\n      if (!settings.input) {\r\n          throw new Error(\"input undefined\");\r\n      }\r\n      var input = settings.input;\r\n      container.className = \"autocomplete \" + (settings.className || \"\");\r\n      containerStyle.position = \"fixed\";\r\n      /**\r\n       * Detach the container from DOM\r\n       */\r\n      function detach() {\r\n          var parent = container.parentNode;\r\n          if (parent) {\r\n              parent.removeChild(container);\r\n          }\r\n      }\r\n      /**\r\n       * Clear debouncing timer if assigned\r\n       */\r\n      function clearDebounceTimer() {\r\n          if (debounceTimer) {\r\n              window.clearTimeout(debounceTimer);\r\n          }\r\n      }\r\n      /**\r\n       * Attach the container to DOM\r\n       */\r\n      function attach() {\r\n          if (!container.parentNode) {\r\n              doc.body.appendChild(container);\r\n          }\r\n      }\r\n      /**\r\n       * Check if container for autocomplete is displayed\r\n       */\r\n      function containerDisplayed() {\r\n          return !!container.parentNode;\r\n      }\r\n      /**\r\n       * Clear autocomplete state and hide container\r\n       */\r\n      function clear() {\r\n          keypressCounter++;\r\n          items = [];\r\n          inputValue = \"\";\r\n          selected = undefined;\r\n          detach();\r\n      }\r\n      /**\r\n       * Update autocomplete position\r\n       */\r\n      function updatePosition() {\r\n          if (!containerDisplayed()) {\r\n              return;\r\n          }\r\n          containerStyle.height = \"auto\";\r\n          containerStyle.width = input.offsetWidth + \"px\";\r\n          var inputRect = input.getBoundingClientRect();\r\n          var top = inputRect.top + input.offsetHeight;\r\n          var maxHeight = window.innerHeight - top;\r\n          if (maxHeight < 0) {\r\n              maxHeight = 0;\r\n          }\r\n          containerStyle.top = top + \"px\";\r\n          containerStyle.bottom = \"\";\r\n          containerStyle.left = inputRect.left + \"px\";\r\n          containerStyle.maxHeight = maxHeight + \"px\";\r\n          if (settings.customize) {\r\n              settings.customize(input, inputRect, container, maxHeight);\r\n          }\r\n      }\r\n      /**\r\n       * Redraw the autocomplete div element with suggestions\r\n       */\r\n      function update() {\r\n          // delete all children from autocomplete DOM container\r\n          while (container.firstChild) {\r\n              container.removeChild(container.firstChild);\r\n          }\r\n          // function for rendering autocomplete suggestions\r\n          var render = function (item, currentValue) {\r\n              var itemElement = doc.createElement(\"div\");\r\n              itemElement.textContent = item.label || \"\";\r\n              return itemElement;\r\n          };\r\n          if (settings.render) {\r\n              render = settings.render;\r\n          }\r\n          // function to render autocomplete groups\r\n          var renderGroup = function (groupName, currentValue) {\r\n              var groupDiv = doc.createElement(\"div\");\r\n              groupDiv.textContent = groupName;\r\n              return groupDiv;\r\n          };\r\n          if (settings.renderGroup) {\r\n              renderGroup = settings.renderGroup;\r\n          }\r\n          var fragment = doc.createDocumentFragment();\r\n          var prevGroup = \"#9?$\";\r\n          items.forEach(function (item) {\r\n              if (item.group && item.group !== prevGroup) {\r\n                  prevGroup = item.group;\r\n                  var groupDiv = renderGroup(item.group, inputValue);\r\n                  if (groupDiv) {\r\n                      groupDiv.className += \" group\";\r\n                      fragment.appendChild(groupDiv);\r\n                  }\r\n              }\r\n              var div = render(item, inputValue);\r\n              if (div) {\r\n                  div.addEventListener(\"click\", function (ev) {\r\n                      settings.onSelect(item, input);\r\n                      clear();\r\n                      ev.preventDefault();\r\n                      ev.stopPropagation();\r\n                  });\r\n                  if (item === selected) {\r\n                      div.className += \" selected\";\r\n                  }\r\n                  fragment.appendChild(div);\r\n              }\r\n          });\r\n          container.appendChild(fragment);\r\n          if (items.length < 1) {\r\n              if (settings.emptyMsg) {\r\n                  var empty = doc.createElement(\"div\");\r\n                  empty.className = \"empty\";\r\n                  empty.textContent = settings.emptyMsg;\r\n                  container.appendChild(empty);\r\n              }\r\n              else {\r\n                  clear();\r\n                  return;\r\n              }\r\n          }\r\n          attach();\r\n          updatePosition();\r\n          updateScroll();\r\n      }\r\n      function updateIfDisplayed() {\r\n          if (containerDisplayed()) {\r\n              update();\r\n          }\r\n      }\r\n      function resizeEventHandler() {\r\n          updateIfDisplayed();\r\n      }\r\n      function scrollEventHandler(e) {\r\n          if (e.target !== container) {\r\n              updateIfDisplayed();\r\n          }\r\n          else {\r\n              e.preventDefault();\r\n          }\r\n      }\r\n      function keyupEventHandler(ev) {\r\n          var keyCode = ev.which || ev.keyCode || 0;\r\n          var ignore = [38 /* Up */, 13 /* Enter */, 27 /* Esc */, 39 /* Right */, 37 /* Left */, 16 /* Shift */, 17 /* Ctrl */, 18 /* Alt */, 20 /* CapsLock */, 91 /* WindowsKey */, 9 /* Tab */];\r\n          for (var _i = 0, ignore_1 = ignore; _i < ignore_1.length; _i++) {\r\n              var key = ignore_1[_i];\r\n              if (keyCode === key) {\r\n                  return;\r\n              }\r\n          }\r\n          // the down key is used to open autocomplete\r\n          if (keyCode === 40 /* Down */ && containerDisplayed()) {\r\n              return;\r\n          }\r\n          startFetch(0 /* Keyboard */);\r\n      }\r\n      /**\r\n       * Automatically move scroll bar if selected item is not visible\r\n       */\r\n      function updateScroll() {\r\n          var elements = container.getElementsByClassName(\"selected\");\r\n          if (elements.length > 0) {\r\n              var element = elements[0];\r\n              // make group visible\r\n              var previous = element.previousElementSibling;\r\n              if (previous && previous.className.indexOf(\"group\") !== -1 && !previous.previousElementSibling) {\r\n                  element = previous;\r\n              }\r\n              if (element.offsetTop < container.scrollTop) {\r\n                  container.scrollTop = element.offsetTop;\r\n              }\r\n              else {\r\n                  var selectBottom = element.offsetTop + element.offsetHeight;\r\n                  var containerBottom = container.scrollTop + container.offsetHeight;\r\n                  if (selectBottom > containerBottom) {\r\n                      container.scrollTop += selectBottom - containerBottom;\r\n                  }\r\n              }\r\n          }\r\n      }\r\n      /**\r\n       * Select the previous item in suggestions\r\n       */\r\n      function selectPrev() {\r\n          if (items.length < 1) {\r\n              selected = undefined;\r\n          }\r\n          else {\r\n              if (selected === items[0]) {\r\n                  selected = items[items.length - 1];\r\n              }\r\n              else {\r\n                  for (var i = items.length - 1; i > 0; i--) {\r\n                      if (selected === items[i] || i === 1) {\r\n                          selected = items[i - 1];\r\n                          break;\r\n                      }\r\n                  }\r\n              }\r\n          }\r\n      }\r\n      /**\r\n       * Select the next item in suggestions\r\n       */\r\n      function selectNext() {\r\n          if (items.length < 1) {\r\n              selected = undefined;\r\n          }\r\n          if (!selected || selected === items[items.length - 1]) {\r\n              selected = items[0];\r\n              return;\r\n          }\r\n          for (var i = 0; i < (items.length - 1); i++) {\r\n              if (selected === items[i]) {\r\n                  selected = items[i + 1];\r\n                  break;\r\n              }\r\n          }\r\n      }\r\n      function keydownEventHandler(ev) {\r\n          var keyCode = ev.which || ev.keyCode || 0;\r\n          if (keyCode === 38 /* Up */ || keyCode === 40 /* Down */ || keyCode === 27 /* Esc */) {\r\n              var containerIsDisplayed = containerDisplayed();\r\n              if (keyCode === 27 /* Esc */) {\r\n                  clear();\r\n              }\r\n              else {\r\n                  if (!containerDisplayed || items.length < 1) {\r\n                      return;\r\n                  }\r\n                  keyCode === 38 /* Up */\r\n                      ? selectPrev()\r\n                      : selectNext();\r\n                  update();\r\n              }\r\n              ev.preventDefault();\r\n              if (containerIsDisplayed) {\r\n                  ev.stopPropagation();\r\n              }\r\n              return;\r\n          }\r\n          if (keyCode === 13 /* Enter */) {\r\n              if (selected) {\r\n                  settings.onSelect(selected, input);\r\n                  clear();\r\n              }\r\n              if (preventSubmit) {\r\n                  ev.preventDefault();\r\n              }\r\n          }\r\n      }\r\n      function focusEventHandler() {\r\n          if (showOnFocus) {\r\n              startFetch(1 /* Focus */);\r\n          }\r\n      }\r\n      function startFetch(trigger) {\r\n          // if multiple keys were pressed, before we get update from server,\r\n          // this may cause redrawing our autocomplete multiple times after the last key press.\r\n          // to avoid this, the number of times keyboard was pressed will be\r\n          // saved and checked before redraw our autocomplete box.\r\n          var savedKeypressCounter = ++keypressCounter;\r\n          var val = input.value;\r\n          if (val.length >= minLen || trigger === 1 /* Focus */) {\r\n              clearDebounceTimer();\r\n              debounceTimer = window.setTimeout(function () {\r\n                  settings.fetch(val, function (elements) {\r\n                      if (keypressCounter === savedKeypressCounter && elements) {\r\n                          items = elements;\r\n                          inputValue = val;\r\n                          selected = items.length > 0 ? items[0] : undefined;\r\n                          update();\r\n                      }\r\n                  }, 0 /* Keyboard */);\r\n              }, trigger === 0 /* Keyboard */ ? debounceWaitMs : 0);\r\n          }\r\n          else {\r\n              clear();\r\n          }\r\n      }\r\n      function blurEventHandler() {\r\n          // we need to delay clear, because when we click on an item, blur will be called before click and remove items from DOM\r\n          setTimeout(function () {\r\n              if (doc.activeElement !== input) {\r\n                  clear();\r\n              }\r\n          }, 200);\r\n      }\r\n      /**\r\n       * Fixes #26: on long clicks focus will be lost and onSelect method will not be called\r\n       */\r\n      container.addEventListener(\"mousedown\", function (evt) {\r\n          evt.stopPropagation();\r\n          evt.preventDefault();\r\n      });\r\n      /**\r\n       * This function will remove DOM elements and clear event handlers\r\n       */\r\n      function destroy() {\r\n          input.removeEventListener(\"focus\", focusEventHandler);\r\n          input.removeEventListener(\"keydown\", keydownEventHandler);\r\n          input.removeEventListener(keyUpEventName, keyupEventHandler);\r\n          input.removeEventListener(\"blur\", blurEventHandler);\r\n          window.removeEventListener(\"resize\", resizeEventHandler);\r\n          doc.removeEventListener(\"scroll\", scrollEventHandler, true);\r\n          clearDebounceTimer();\r\n          clear();\r\n          // prevent the update call if there are pending AJAX requests\r\n          keypressCounter++;\r\n      }\r\n      // setup event handlers\r\n      input.addEventListener(\"keydown\", keydownEventHandler);\r\n      input.addEventListener(keyUpEventName, keyupEventHandler);\r\n      input.addEventListener(\"blur\", blurEventHandler);\r\n      input.addEventListener(\"focus\", focusEventHandler);\r\n      window.addEventListener(\"resize\", resizeEventHandler);\r\n      doc.addEventListener(\"scroll\", scrollEventHandler, true);\r\n      return {\r\n          destroy: destroy\r\n      };\r\n  }\n\n  return autocomplete;\n\n}));\n//# sourceMappingURL=autocomplete.js.map\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tagProperty = exports.tagParameter = exports.decorate = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED;\n    _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\nexports.tagParameter = tagParameter;\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED_PROP;\n    _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\nexports.tagProperty = tagProperty;\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n    var paramsOrPropertiesMetadata = {};\n    var isParameterDecorator = (typeof parameterIndex === \"number\");\n    var key = (parameterIndex !== undefined && isParameterDecorator) ? parameterIndex.toString() : propertyName;\n    if (isParameterDecorator && propertyName !== undefined) {\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n    }\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n    }\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n    if (!Array.isArray(paramOrPropertyMetadata)) {\n        paramOrPropertyMetadata = [];\n    }\n    else {\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\n            var m = paramOrPropertyMetadata_1[_i];\n            if (m.key === metadata.key) {\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\n            }\n        }\n    }\n    paramOrPropertyMetadata.push(metadata);\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\nfunction _decorate(decorators, target) {\n    Reflect.decorate(decorators, target);\n}\nfunction _param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction decorate(decorator, target, parameterIndex) {\n    if (typeof parameterIndex === \"number\") {\n        _decorate([_param(parameterIndex, decorator)], target);\n    }\n    else if (typeof parameterIndex === \"string\") {\n        Reflect.decorate([decorator], target, parameterIndex);\n    }\n    else {\n        _decorate([decorator], target);\n    }\n}\nexports.decorate = decorate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inject = exports.LazyServiceIdentifer = void 0;\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar LazyServiceIdentifer = (function () {\n    function LazyServiceIdentifer(cb) {\n        this._cb = cb;\n    }\n    LazyServiceIdentifer.prototype.unwrap = function () {\n        return this._cb();\n    };\n    return LazyServiceIdentifer;\n}());\nexports.LazyServiceIdentifer = LazyServiceIdentifer;\nfunction inject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        if (serviceIdentifier === undefined) {\n            throw new Error(error_msgs_1.UNDEFINED_INJECT_ANNOTATION(target.name));\n        }\n        var metadata = new metadata_1.Metadata(METADATA_KEY.INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.inject = inject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.injectable = void 0;\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction injectable() {\n    return function (target) {\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target)) {\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\n        }\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\n        return target;\n    };\n}\nexports.injectable = injectable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiInject = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction multiInject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.multiInject = multiInject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.named = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction named(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, name);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.named = named;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optional = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction optional() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG, true);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.optional = optional;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.postConstruct = void 0;\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nfunction postConstruct() {\n    return function (target, propertyKey, descriptor) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT, propertyKey);\n        if (Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT, target.constructor)) {\n            throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\n        }\n        Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT, metadata, target.constructor);\n    };\n}\nexports.postConstruct = postConstruct;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tagged = void 0;\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction tagged(metadataKey, metadataValue) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(metadataKey, metadataValue);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.tagged = tagged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.targetName = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction targetName(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAME_TAG, name);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.targetName = targetName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unmanaged = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction unmanaged() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG, true);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.unmanaged = unmanaged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Binding = void 0;\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar id_1 = require(\"../utils/id\");\nvar Binding = (function () {\n    function Binding(serviceIdentifier, scope) {\n        this.id = id_1.id();\n        this.activated = false;\n        this.serviceIdentifier = serviceIdentifier;\n        this.scope = scope;\n        this.type = literal_types_1.BindingTypeEnum.Invalid;\n        this.constraint = function (request) { return true; };\n        this.implementationType = null;\n        this.cache = null;\n        this.factory = null;\n        this.provider = null;\n        this.onActivation = null;\n        this.dynamicValue = null;\n    }\n    Binding.prototype.clone = function () {\n        var clone = new Binding(this.serviceIdentifier, this.scope);\n        clone.activated = false;\n        clone.implementationType = this.implementationType;\n        clone.dynamicValue = this.dynamicValue;\n        clone.scope = this.scope;\n        clone.type = this.type;\n        clone.factory = this.factory;\n        clone.provider = this.provider;\n        clone.constraint = this.constraint;\n        clone.onActivation = this.onActivation;\n        clone.cache = this.cache;\n        return clone;\n    };\n    return Binding;\n}());\nexports.Binding = Binding;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingCount = void 0;\nvar BindingCount = {\n    MultipleBindingsAvailable: 2,\n    NoBindingsAvailable: 0,\n    OnlyOneBindingAvailable: 1\n};\nexports.BindingCount = BindingCount;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.STACK_OVERFLOW = exports.CIRCULAR_DEPENDENCY_IN_FACTORY = exports.POST_CONSTRUCT_ERROR = exports.MULTIPLE_POST_CONSTRUCT_METHODS = exports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = exports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = exports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = exports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = exports.ARGUMENTS_LENGTH_MISMATCH = exports.INVALID_DECORATOR_OPERATION = exports.INVALID_TO_SELF_VALUE = exports.INVALID_FUNCTION_BINDING = exports.INVALID_MIDDLEWARE_RETURN = exports.NO_MORE_SNAPSHOTS_AVAILABLE = exports.INVALID_BINDING_TYPE = exports.NOT_IMPLEMENTED = exports.CIRCULAR_DEPENDENCY = exports.UNDEFINED_INJECT_ANNOTATION = exports.MISSING_INJECT_ANNOTATION = exports.MISSING_INJECTABLE_ANNOTATION = exports.NOT_REGISTERED = exports.CANNOT_UNBIND = exports.AMBIGUOUS_MATCH = exports.KEY_NOT_FOUND = exports.NULL_ARGUMENT = exports.DUPLICATED_METADATA = exports.DUPLICATED_INJECTABLE_DECORATOR = void 0;\nexports.DUPLICATED_INJECTABLE_DECORATOR = \"Cannot apply @injectable decorator multiple times.\";\nexports.DUPLICATED_METADATA = \"Metadata key was used more than once in a parameter:\";\nexports.NULL_ARGUMENT = \"NULL argument\";\nexports.KEY_NOT_FOUND = \"Key Not Found\";\nexports.AMBIGUOUS_MATCH = \"Ambiguous match found for serviceIdentifier:\";\nexports.CANNOT_UNBIND = \"Could not unbind serviceIdentifier:\";\nexports.NOT_REGISTERED = \"No matching bindings found for serviceIdentifier:\";\nexports.MISSING_INJECTABLE_ANNOTATION = \"Missing required @injectable annotation in:\";\nexports.MISSING_INJECT_ANNOTATION = \"Missing required @inject or @multiInject annotation in:\";\nexports.UNDEFINED_INJECT_ANNOTATION = function (name) {\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\n        \"a circular dependency problem. You can use a LazyServiceIdentifer to  \" +\n        \"overcome this limitation.\";\n};\nexports.CIRCULAR_DEPENDENCY = \"Circular dependency found:\";\nexports.NOT_IMPLEMENTED = \"Sorry, this feature is not fully implemented yet.\";\nexports.INVALID_BINDING_TYPE = \"Invalid binding type:\";\nexports.NO_MORE_SNAPSHOTS_AVAILABLE = \"No snapshot available to restore.\";\nexports.INVALID_MIDDLEWARE_RETURN = \"Invalid return type in middleware. Middleware must return!\";\nexports.INVALID_FUNCTION_BINDING = \"Value provided to function binding must be a function!\";\nexports.INVALID_TO_SELF_VALUE = \"The toSelf function can only be applied when a constructor is \" +\n    \"used as service identifier\";\nexports.INVALID_DECORATOR_OPERATION = \"The @inject @multiInject @tagged and @named decorators \" +\n    \"must be applied to the parameters of a class constructor or a class property.\";\nexports.ARGUMENTS_LENGTH_MISMATCH = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"The number of constructor arguments in the derived class \" +\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\n};\nexports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = \"Invalid Container constructor argument. Container options \" +\n    \"must be an object.\";\nexports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = \"Invalid Container option. Default scope must \" +\n    \"be a string ('singleton' or 'transient').\";\nexports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = \"Invalid Container option. Auto bind injectable must \" +\n    \"be a boolean\";\nexports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = \"Invalid Container option. Skip base check must \" +\n    \"be a boolean\";\nexports.MULTIPLE_POST_CONSTRUCT_METHODS = \"Cannot apply @postConstruct decorator multiple times in the same class\";\nexports.POST_CONSTRUCT_ERROR = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"@postConstruct error in class \" + values[0] + \": \" + values[1];\n};\nexports.CIRCULAR_DEPENDENCY_IN_FACTORY = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"It looks like there is a circular dependency \" +\n        (\"in one of the '\" + values[0] + \"' bindings. Please investigate bindings with\") +\n        (\"service identifier '\" + values[1] + \"'.\");\n};\nexports.STACK_OVERFLOW = \"Maximum call stack size exceeded\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TargetTypeEnum = exports.BindingTypeEnum = exports.BindingScopeEnum = void 0;\nvar BindingScopeEnum = {\n    Request: \"Request\",\n    Singleton: \"Singleton\",\n    Transient: \"Transient\"\n};\nexports.BindingScopeEnum = BindingScopeEnum;\nvar BindingTypeEnum = {\n    ConstantValue: \"ConstantValue\",\n    Constructor: \"Constructor\",\n    DynamicValue: \"DynamicValue\",\n    Factory: \"Factory\",\n    Function: \"Function\",\n    Instance: \"Instance\",\n    Invalid: \"Invalid\",\n    Provider: \"Provider\"\n};\nexports.BindingTypeEnum = BindingTypeEnum;\nvar TargetTypeEnum = {\n    ClassProperty: \"ClassProperty\",\n    ConstructorArgument: \"ConstructorArgument\",\n    Variable: \"Variable\"\n};\nexports.TargetTypeEnum = TargetTypeEnum;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.POST_CONSTRUCT = exports.DESIGN_PARAM_TYPES = exports.PARAM_TYPES = exports.TAGGED_PROP = exports.TAGGED = exports.MULTI_INJECT_TAG = exports.INJECT_TAG = exports.OPTIONAL_TAG = exports.UNMANAGED_TAG = exports.NAME_TAG = exports.NAMED_TAG = void 0;\nexports.NAMED_TAG = \"named\";\nexports.NAME_TAG = \"name\";\nexports.UNMANAGED_TAG = \"unmanaged\";\nexports.OPTIONAL_TAG = \"optional\";\nexports.INJECT_TAG = \"inject\";\nexports.MULTI_INJECT_TAG = \"multi_inject\";\nexports.TAGGED = \"inversify:tagged\";\nexports.TAGGED_PROP = \"inversify:tagged_props\";\nexports.PARAM_TYPES = \"inversify:paramtypes\";\nexports.DESIGN_PARAM_TYPES = \"design:paramtypes\";\nexports.POST_CONSTRUCT = \"post_construct\";\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Container = void 0;\nvar binding_1 = require(\"../bindings/binding\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\nvar planner_1 = require(\"../planning/planner\");\nvar resolver_1 = require(\"../resolution/resolver\");\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\nvar id_1 = require(\"../utils/id\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar container_snapshot_1 = require(\"./container_snapshot\");\nvar lookup_1 = require(\"./lookup\");\nvar Container = (function () {\n    function Container(containerOptions) {\n        var options = containerOptions || {};\n        if (typeof options !== \"object\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n        }\n        if (options.defaultScope === undefined) {\n            options.defaultScope = literal_types_1.BindingScopeEnum.Transient;\n        }\n        else if (options.defaultScope !== literal_types_1.BindingScopeEnum.Singleton &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Transient &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Request) {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n        }\n        if (options.autoBindInjectable === undefined) {\n            options.autoBindInjectable = false;\n        }\n        else if (typeof options.autoBindInjectable !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n        }\n        if (options.skipBaseClassChecks === undefined) {\n            options.skipBaseClassChecks = false;\n        }\n        else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n        }\n        this.options = {\n            autoBindInjectable: options.autoBindInjectable,\n            defaultScope: options.defaultScope,\n            skipBaseClassChecks: options.skipBaseClassChecks\n        };\n        this.id = id_1.id();\n        this._bindingDictionary = new lookup_1.Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new metadata_reader_1.MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container = new Container();\n        var bindingDictionary = planner_1.getBindingDictionary(container);\n        var bindingDictionary1 = planner_1.getBindingDictionary(container1);\n        var bindingDictionary2 = planner_1.getBindingDictionary(container2);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        copyDictionary(bindingDictionary1, bindingDictionary);\n        copyDictionary(bindingDictionary2, bindingDictionary);\n        return container;\n    };\n    Container.prototype.load = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var getHelpers = this._getContainerModuleHelpersFactory();\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n            var currentModule = modules_1[_a];\n            var containerModuleHelpers = getHelpers(currentModule.id);\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n        }\n    };\n    Container.prototype.loadAsync = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        getHelpers = this._getContainerModuleHelpersFactory();\n                        _a = 0, modules_2 = modules;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_a < modules_2.length)) return [3, 4];\n                        currentModule = modules_2[_a];\n                        containerModuleHelpers = getHelpers(currentModule.id);\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _a++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.id);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var scope = this.options.defaultScope || literal_types_1.BindingScopeEnum.Transient;\n        var binding = new binding_1.Binding(serviceIdentifier, scope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new binding_to_syntax_1.BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new lookup_1.Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function (containerOptions) {\n        var child = new Container(containerOptions || this.options);\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = this.createChild();\n        tempContainer.bind(constructorFunction).toSelf();\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._getContainerModuleHelpersFactory = function () {\n        var _this = this;\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _bind = _this.bind.bind(_this);\n                var bindingToSyntax = _bind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _rebind = _this.rebind.bind(_this);\n                var bindingToSyntax = _rebind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        return function (mId) { return ({\n            bindFunction: getBindFunction(mId),\n            isboundFunction: getIsboundFunction(mId),\n            rebindFunction: getRebindFunction(mId),\n            unbindFunction: getUnbindFunction(mId)\n        }); };\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolver_1.resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexports.Container = Container;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AsyncContainerModule = exports.ContainerModule = void 0;\nvar id_1 = require(\"../utils/id\");\nvar ContainerModule = (function () {\n    function ContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return ContainerModule;\n}());\nexports.ContainerModule = ContainerModule;\nvar AsyncContainerModule = (function () {\n    function AsyncContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return AsyncContainerModule;\n}());\nexports.AsyncContainerModule = AsyncContainerModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContainerSnapshot = void 0;\nvar ContainerSnapshot = (function () {\n    function ContainerSnapshot() {\n    }\n    ContainerSnapshot.of = function (bindings, middleware) {\n        var snapshot = new ContainerSnapshot();\n        snapshot.bindings = bindings;\n        snapshot.middleware = middleware;\n        return snapshot;\n    };\n    return ContainerSnapshot;\n}());\nexports.ContainerSnapshot = ContainerSnapshot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Lookup = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar Lookup = (function () {\n    function Lookup() {\n        this._map = new Map();\n    }\n    Lookup.prototype.getMap = function () {\n        return this._map;\n    };\n    Lookup.prototype.add = function (serviceIdentifier, value) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (value === null || value === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            entry.push(value);\n            this._map.set(serviceIdentifier, entry);\n        }\n        else {\n            this._map.set(serviceIdentifier, [value]);\n        }\n    };\n    Lookup.prototype.get = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            return entry;\n        }\n        else {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.remove = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (!this._map.delete(serviceIdentifier)) {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.removeByCondition = function (condition) {\n        var _this = this;\n        this._map.forEach(function (entries, key) {\n            var updatedEntries = entries.filter(function (entry) { return !condition(entry); });\n            if (updatedEntries.length > 0) {\n                _this._map.set(key, updatedEntries);\n            }\n            else {\n                _this._map.delete(key);\n            }\n        });\n    };\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        return this._map.has(serviceIdentifier);\n    };\n    Lookup.prototype.clone = function () {\n        var copy = new Lookup();\n        this._map.forEach(function (value, key) {\n            value.forEach(function (b) { return copy.add(key, b.clone()); });\n        });\n        return copy;\n    };\n    Lookup.prototype.traverse = function (func) {\n        this._map.forEach(function (value, key) {\n            func(key, value);\n        });\n    };\n    return Lookup;\n}());\nexports.Lookup = Lookup;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.METADATA_KEY = void 0;\nvar keys = require(\"./constants/metadata_keys\");\nexports.METADATA_KEY = keys;\nvar container_1 = require(\"./container/container\");\nObject.defineProperty(exports, \"Container\", { enumerable: true, get: function () { return container_1.Container; } });\nvar literal_types_1 = require(\"./constants/literal_types\");\nObject.defineProperty(exports, \"BindingScopeEnum\", { enumerable: true, get: function () { return literal_types_1.BindingScopeEnum; } });\nObject.defineProperty(exports, \"BindingTypeEnum\", { enumerable: true, get: function () { return literal_types_1.BindingTypeEnum; } });\nObject.defineProperty(exports, \"TargetTypeEnum\", { enumerable: true, get: function () { return literal_types_1.TargetTypeEnum; } });\nvar container_module_1 = require(\"./container/container_module\");\nObject.defineProperty(exports, \"AsyncContainerModule\", { enumerable: true, get: function () { return container_module_1.AsyncContainerModule; } });\nObject.defineProperty(exports, \"ContainerModule\", { enumerable: true, get: function () { return container_module_1.ContainerModule; } });\nvar injectable_1 = require(\"./annotation/injectable\");\nObject.defineProperty(exports, \"injectable\", { enumerable: true, get: function () { return injectable_1.injectable; } });\nvar tagged_1 = require(\"./annotation/tagged\");\nObject.defineProperty(exports, \"tagged\", { enumerable: true, get: function () { return tagged_1.tagged; } });\nvar named_1 = require(\"./annotation/named\");\nObject.defineProperty(exports, \"named\", { enumerable: true, get: function () { return named_1.named; } });\nvar inject_1 = require(\"./annotation/inject\");\nObject.defineProperty(exports, \"inject\", { enumerable: true, get: function () { return inject_1.inject; } });\nObject.defineProperty(exports, \"LazyServiceIdentifer\", { enumerable: true, get: function () { return inject_1.LazyServiceIdentifer; } });\nvar optional_1 = require(\"./annotation/optional\");\nObject.defineProperty(exports, \"optional\", { enumerable: true, get: function () { return optional_1.optional; } });\nvar unmanaged_1 = require(\"./annotation/unmanaged\");\nObject.defineProperty(exports, \"unmanaged\", { enumerable: true, get: function () { return unmanaged_1.unmanaged; } });\nvar multi_inject_1 = require(\"./annotation/multi_inject\");\nObject.defineProperty(exports, \"multiInject\", { enumerable: true, get: function () { return multi_inject_1.multiInject; } });\nvar target_name_1 = require(\"./annotation/target_name\");\nObject.defineProperty(exports, \"targetName\", { enumerable: true, get: function () { return target_name_1.targetName; } });\nvar post_construct_1 = require(\"./annotation/post_construct\");\nObject.defineProperty(exports, \"postConstruct\", { enumerable: true, get: function () { return post_construct_1.postConstruct; } });\nvar metadata_reader_1 = require(\"./planning/metadata_reader\");\nObject.defineProperty(exports, \"MetadataReader\", { enumerable: true, get: function () { return metadata_reader_1.MetadataReader; } });\nvar id_1 = require(\"./utils/id\");\nObject.defineProperty(exports, \"id\", { enumerable: true, get: function () { return id_1.id; } });\nvar decorator_utils_1 = require(\"./annotation/decorator_utils\");\nObject.defineProperty(exports, \"decorate\", { enumerable: true, get: function () { return decorator_utils_1.decorate; } });\nvar constraint_helpers_1 = require(\"./syntax/constraint_helpers\");\nObject.defineProperty(exports, \"traverseAncerstors\", { enumerable: true, get: function () { return constraint_helpers_1.traverseAncerstors; } });\nObject.defineProperty(exports, \"taggedConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.taggedConstraint; } });\nObject.defineProperty(exports, \"namedConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.namedConstraint; } });\nObject.defineProperty(exports, \"typeConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.typeConstraint; } });\nvar serialization_1 = require(\"./utils/serialization\");\nObject.defineProperty(exports, \"getServiceIdentifierAsString\", { enumerable: true, get: function () { return serialization_1.getServiceIdentifierAsString; } });\nvar binding_utils_1 = require(\"./utils/binding_utils\");\nObject.defineProperty(exports, \"multiBindToService\", { enumerable: true, get: function () { return binding_utils_1.multiBindToService; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Context = void 0;\nvar id_1 = require(\"../utils/id\");\nvar Context = (function () {\n    function Context(container) {\n        this.id = id_1.id();\n        this.container = container;\n    }\n    Context.prototype.addPlan = function (plan) {\n        this.plan = plan;\n    };\n    Context.prototype.setCurrentRequest = function (currentRequest) {\n        this.currentRequest = currentRequest;\n    };\n    return Context;\n}());\nexports.Context = Context;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Metadata = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Metadata = (function () {\n    function Metadata(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    Metadata.prototype.toString = function () {\n        if (this.key === METADATA_KEY.NAMED_TAG) {\n            return \"named: \" + this.value.toString() + \" \";\n        }\n        else {\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + this.value + \" }\";\n        }\n    };\n    return Metadata;\n}());\nexports.Metadata = Metadata;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetadataReader = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar MetadataReader = (function () {\n    function MetadataReader() {\n    }\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\n        return {\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\n            userGeneratedMetadata: userGeneratedMetadata || {}\n        };\n    };\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\n        return userGeneratedMetadata;\n    };\n    return MetadataReader;\n}());\nexports.MetadataReader = MetadataReader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Plan = void 0;\nvar Plan = (function () {\n    function Plan(parentContext, rootRequest) {\n        this.parentContext = parentContext;\n        this.rootRequest = rootRequest;\n    }\n    return Plan;\n}());\nexports.Plan = Plan;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBindingDictionary = exports.createMockRequest = exports.plan = void 0;\nvar binding_count_1 = require(\"../bindings/binding_count\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar context_1 = require(\"./context\");\nvar metadata_1 = require(\"./metadata\");\nvar plan_1 = require(\"./plan\");\nvar reflection_utils_1 = require(\"./reflection_utils\");\nvar request_1 = require(\"./request\");\nvar target_1 = require(\"./target\");\nfunction getBindingDictionary(cntnr) {\n    return cntnr._bindingDictionary;\n}\nexports.getBindingDictionary = getBindingDictionary;\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\n    var injectMetadata = new metadata_1.Metadata(metadataKey, serviceIdentifier);\n    var target = new target_1.Target(targetType, name, serviceIdentifier, injectMetadata);\n    if (key !== undefined) {\n        var tagMetadata = new metadata_1.Metadata(key, value);\n        target.metadata.push(tagMetadata);\n    }\n    return target;\n}\nfunction _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {\n    var bindings = getBindings(context.container, target.serviceIdentifier);\n    var activeBindings = [];\n    if (bindings.length === binding_count_1.BindingCount.NoBindingsAvailable &&\n        context.container.options.autoBindInjectable &&\n        typeof target.serviceIdentifier === \"function\" &&\n        metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {\n        context.container.bind(target.serviceIdentifier).toSelf();\n        bindings = getBindings(context.container, target.serviceIdentifier);\n    }\n    if (!avoidConstraints) {\n        activeBindings = bindings.filter(function (binding) {\n            var request = new request_1.Request(binding.serviceIdentifier, context, parentRequest, binding, target);\n            return binding.constraint(request);\n        });\n    }\n    else {\n        activeBindings = bindings;\n    }\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\n    return activeBindings;\n}\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\n    switch (bindings.length) {\n        case binding_count_1.BindingCount.NoBindingsAvailable:\n            if (target.isOptional()) {\n                return bindings;\n            }\n            else {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.NOT_REGISTERED;\n                msg += serialization_1.listMetadataForTarget(serviceIdentifierString, target);\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n        case binding_count_1.BindingCount.OnlyOneBindingAvailable:\n            if (!target.isArray()) {\n                return bindings;\n            }\n        case binding_count_1.BindingCount.MultipleBindingsAvailable:\n        default:\n            if (!target.isArray()) {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n            else {\n                return bindings;\n            }\n    }\n}\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\n    var activeBindings;\n    var childRequest;\n    if (parentRequest === null) {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);\n        childRequest = new request_1.Request(serviceIdentifier, context, null, activeBindings, target);\n        var thePlan = new plan_1.Plan(context, childRequest);\n        context.addPlan(thePlan);\n    }\n    else {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);\n        childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\n    }\n    activeBindings.forEach(function (binding) {\n        var subChildRequest = null;\n        if (target.isArray()) {\n            subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);\n        }\n        else {\n            if (binding.cache) {\n                return;\n            }\n            subChildRequest = childRequest;\n        }\n        if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n            var dependencies = reflection_utils_1.getDependencies(metadataReader, binding.implementationType);\n            if (!context.container.options.skipBaseClassChecks) {\n                var baseClassDependencyCount = reflection_utils_1.getBaseClassDependencyCount(metadataReader, binding.implementationType);\n                if (dependencies.length < baseClassDependencyCount) {\n                    var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(reflection_utils_1.getFunctionName(binding.implementationType));\n                    throw new Error(error);\n                }\n            }\n            dependencies.forEach(function (dependency) {\n                _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\n            });\n        }\n    });\n}\nfunction getBindings(container, serviceIdentifier) {\n    var bindings = [];\n    var bindingDictionary = getBindingDictionary(container);\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\n        bindings = bindingDictionary.get(serviceIdentifier);\n    }\n    else if (container.parent !== null) {\n        bindings = getBindings(container.parent, serviceIdentifier);\n    }\n    return bindings;\n}\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\n    var context = new context_1.Context(container);\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, \"\", key, value);\n    try {\n        _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\n        return context;\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            if (context.plan) {\n                serialization_1.circularDependencyToException(context.plan.rootRequest);\n            }\n        }\n        throw error;\n    }\n}\nexports.plan = plan;\nfunction createMockRequest(container, serviceIdentifier, key, value) {\n    var target = new target_1.Target(literal_types_1.TargetTypeEnum.Variable, \"\", serviceIdentifier, new metadata_1.Metadata(key, value));\n    var context = new context_1.Context(container);\n    var request = new request_1.Request(serviceIdentifier, context, null, [], target);\n    return request;\n}\nexports.createMockRequest = createMockRequest;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QueryableString = void 0;\nvar QueryableString = (function () {\n    function QueryableString(str) {\n        this.str = str;\n    }\n    QueryableString.prototype.startsWith = function (searchString) {\n        return this.str.indexOf(searchString) === 0;\n    };\n    QueryableString.prototype.endsWith = function (searchString) {\n        var reverseString = \"\";\n        var reverseSearchString = searchString.split(\"\").reverse().join(\"\");\n        reverseString = this.str.split(\"\").reverse().join(\"\");\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\n    };\n    QueryableString.prototype.contains = function (searchString) {\n        return (this.str.indexOf(searchString) !== -1);\n    };\n    QueryableString.prototype.equals = function (compareString) {\n        return this.str === compareString;\n    };\n    QueryableString.prototype.value = function () {\n        return this.str;\n    };\n    return QueryableString;\n}());\nexports.QueryableString = QueryableString;\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFunctionName = exports.getBaseClassDependencyCount = exports.getDependencies = void 0;\nvar inject_1 = require(\"../annotation/inject\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar serialization_1 = require(\"../utils/serialization\");\nObject.defineProperty(exports, \"getFunctionName\", { enumerable: true, get: function () { return serialization_1.getFunctionName; } });\nvar target_1 = require(\"./target\");\nfunction getDependencies(metadataReader, func) {\n    var constructorName = serialization_1.getFunctionName(func);\n    var targets = getTargets(metadataReader, constructorName, func, false);\n    return targets;\n}\nexports.getDependencies = getDependencies;\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\n    var metadata = metadataReader.getConstructorMetadata(func);\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\n    if (serviceIdentifiers === undefined) {\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\n        throw new Error(msg);\n    }\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\n    var keys = Object.keys(constructorArgsMetadata);\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\n    var iterations = (hasUserDeclaredUnknownInjections) ? keys.length : func.length;\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func);\n    var targets = __spreadArrays(constructorTargets, propertyTargets);\n    return targets;\n}\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\n    var metadata = formatTargetMetadata(targetMetadata);\n    var isManaged = metadata.unmanaged !== true;\n    var serviceIdentifier = serviceIdentifiers[index];\n    var injectIdentifier = (metadata.inject || metadata.multiInject);\n    serviceIdentifier = (injectIdentifier) ? (injectIdentifier) : serviceIdentifier;\n    if (serviceIdentifier instanceof inject_1.LazyServiceIdentifer) {\n        serviceIdentifier = serviceIdentifier.unwrap();\n    }\n    if (isManaged) {\n        var isObject = serviceIdentifier === Object;\n        var isFunction = serviceIdentifier === Function;\n        var isUndefined = serviceIdentifier === undefined;\n        var isUnknownType = (isObject || isFunction || isUndefined);\n        if (!isBaseClass && isUnknownType) {\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\n            throw new Error(msg);\n        }\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        return target;\n    }\n    return null;\n}\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\n    var targets = [];\n    for (var i = 0; i < iterations; i++) {\n        var index = i;\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\n        if (target !== null) {\n            targets.push(target);\n        }\n    }\n    return targets;\n}\nfunction getClassPropsAsTargets(metadataReader, constructorFunc) {\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\n    var targets = [];\n    var keys = Object.keys(classPropsMetadata);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        var targetMetadata = classPropsMetadata[key];\n        var metadata = formatTargetMetadata(classPropsMetadata[key]);\n        var targetName = metadata.targetName || key;\n        var serviceIdentifier = (metadata.inject || metadata.multiInject);\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty, targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        targets.push(target);\n    }\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor);\n        targets = __spreadArrays(targets, baseTargets);\n    }\n    return targets;\n}\nfunction getBaseClassDependencyCount(metadataReader, func) {\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseConstructorName = serialization_1.getFunctionName(baseConstructor);\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\n        var metadata = targets.map(function (t) {\n            return t.metadata.filter(function (m) {\n                return m.key === METADATA_KEY.UNMANAGED_TAG;\n            });\n        });\n        var unmanagedCount = [].concat.apply([], metadata).length;\n        var dependencyCount = targets.length - unmanagedCount;\n        if (dependencyCount > 0) {\n            return dependencyCount;\n        }\n        else {\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\n        }\n    }\n    else {\n        return 0;\n    }\n}\nexports.getBaseClassDependencyCount = getBaseClassDependencyCount;\nfunction formatTargetMetadata(targetMetadata) {\n    var targetMetadataMap = {};\n    targetMetadata.forEach(function (m) {\n        targetMetadataMap[m.key.toString()] = m.value;\n    });\n    return {\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Request = void 0;\nvar id_1 = require(\"../utils/id\");\nvar Request = (function () {\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\n        this.id = id_1.id();\n        this.serviceIdentifier = serviceIdentifier;\n        this.parentContext = parentContext;\n        this.parentRequest = parentRequest;\n        this.target = target;\n        this.childRequests = [];\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\n        this.requestScope = parentRequest === null\n            ? new Map()\n            : null;\n    }\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\n        this.childRequests.push(child);\n        return child;\n    };\n    return Request;\n}());\nexports.Request = Request;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Target = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar id_1 = require(\"../utils/id\");\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.id = id_1.id();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new queryable_string_1.QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof metadata_1.Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n            var m = _a[_i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (m) {\n            return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                (m.key !== METADATA_KEY.NAME_TAG) &&\n                (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                (m.key !== METADATA_KEY.NAMED_TAG);\n        });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (m) {\n                return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.NAME_TAG) &&\n                    (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                    (m.key !== METADATA_KEY.NAMED_TAG);\n            });\n        }\n        return null;\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n                var m = _a[_i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexports.Target = Target;\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveInstance = void 0;\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction _injectProperties(instance, childRequests, resolveRequest) {\n    var propertyInjectionsRequests = childRequests.filter(function (childRequest) {\n        return (childRequest.target !== null &&\n            childRequest.target.type === literal_types_1.TargetTypeEnum.ClassProperty);\n    });\n    var propertyInjections = propertyInjectionsRequests.map(resolveRequest);\n    propertyInjectionsRequests.forEach(function (r, index) {\n        var propertyName = \"\";\n        propertyName = r.target.name.value();\n        var injection = propertyInjections[index];\n        instance[propertyName] = injection;\n    });\n    return instance;\n}\nfunction _createInstance(Func, injections) {\n    return new (Func.bind.apply(Func, __spreadArrays([void 0], injections)))();\n}\nfunction _postConstruct(constr, result) {\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\n        try {\n            result[data.value]();\n        }\n        catch (e) {\n            throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name, e.message));\n        }\n    }\n}\nfunction resolveInstance(constr, childRequests, resolveRequest) {\n    var result = null;\n    if (childRequests.length > 0) {\n        var constructorInjectionsRequests = childRequests.filter(function (childRequest) {\n            return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ConstructorArgument);\n        });\n        var constructorInjections = constructorInjectionsRequests.map(resolveRequest);\n        result = _createInstance(constr, constructorInjections);\n        result = _injectProperties(result, childRequests, resolveRequest);\n    }\n    else {\n        result = new constr();\n    }\n    _postConstruct(constr, result);\n    return result;\n}\nexports.resolveInstance = resolveInstance;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolve = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar instantiation_1 = require(\"./instantiation\");\nvar invokeFactory = function (factoryType, serviceIdentifier, fn) {\n    try {\n        return fn();\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType, serviceIdentifier.toString()));\n        }\n        else {\n            throw error;\n        }\n    }\n};\nvar _resolveRequest = function (requestScope) {\n    return function (request) {\n        request.parentContext.setCurrentRequest(request);\n        var bindings = request.bindings;\n        var childRequests = request.childRequests;\n        var targetIsAnArray = request.target && request.target.isArray();\n        var targetParentIsNotAnArray = !request.parentRequest ||\n            !request.parentRequest.target ||\n            !request.target ||\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n        if (targetIsAnArray && targetParentIsNotAnArray) {\n            return childRequests.map(function (childRequest) {\n                var _f = _resolveRequest(requestScope);\n                return _f(childRequest);\n            });\n        }\n        else {\n            var result = null;\n            if (request.target.isOptional() && bindings.length === 0) {\n                return undefined;\n            }\n            var binding_1 = bindings[0];\n            var isSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Singleton;\n            var isRequestSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Request;\n            if (isSingleton && binding_1.activated) {\n                return binding_1.cache;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                requestScope.has(binding_1.id)) {\n                return requestScope.get(binding_1.id);\n            }\n            if (binding_1.type === literal_types_1.BindingTypeEnum.ConstantValue) {\n                result = binding_1.cache;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Function) {\n                result = binding_1.cache;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Constructor) {\n                result = binding_1.implementationType;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.DynamicValue && binding_1.dynamicValue !== null) {\n                result = invokeFactory(\"toDynamicValue\", binding_1.serviceIdentifier, function () { return binding_1.dynamicValue(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Factory && binding_1.factory !== null) {\n                result = invokeFactory(\"toFactory\", binding_1.serviceIdentifier, function () { return binding_1.factory(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Provider && binding_1.provider !== null) {\n                result = invokeFactory(\"toProvider\", binding_1.serviceIdentifier, function () { return binding_1.provider(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Instance && binding_1.implementationType !== null) {\n                result = instantiation_1.resolveInstance(binding_1.implementationType, childRequests, _resolveRequest(requestScope));\n            }\n            else {\n                var serviceIdentifier = serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);\n                throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n            }\n            if (typeof binding_1.onActivation === \"function\") {\n                result = binding_1.onActivation(request.parentContext, result);\n            }\n            if (isSingleton) {\n                binding_1.cache = result;\n                binding_1.activated = true;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                !requestScope.has(binding_1.id)) {\n                requestScope.set(binding_1.id, result);\n            }\n            return result;\n        }\n    };\n};\nfunction resolve(context) {\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\n    return _f(context.plan.rootRequest);\n}\nexports.resolve = resolve;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingInSyntax = void 0;\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingInSyntax = (function () {\n    function BindingInSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingInSyntax.prototype.inRequestScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Request;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inSingletonScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inTransientScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Transient;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingInSyntax;\n}());\nexports.BindingInSyntax = BindingInSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingInWhenOnSyntax = void 0;\nvar binding_in_syntax_1 = require(\"./binding_in_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingInWhenOnSyntax = (function () {\n    function BindingInWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n        this._bindingInSyntax = new binding_in_syntax_1.BindingInSyntax(binding);\n    }\n    BindingInWhenOnSyntax.prototype.inRequestScope = function () {\n        return this._bindingInSyntax.inRequestScope();\n    };\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\n        return this._bindingInSyntax.inSingletonScope();\n    };\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\n        return this._bindingInSyntax.inTransientScope();\n    };\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingInWhenOnSyntax;\n}());\nexports.BindingInWhenOnSyntax = BindingInWhenOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingOnSyntax = void 0;\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingOnSyntax = (function () {\n    function BindingOnSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingOnSyntax.prototype.onActivation = function (handler) {\n        this._binding.onActivation = handler;\n        return new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n    };\n    return BindingOnSyntax;\n}());\nexports.BindingOnSyntax = BindingOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingToSyntax = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = literal_types_1.BindingTypeEnum.Function;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\n            return autofactory;\n        };\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toService = function (service) {\n        this.toDynamicValue(function (context) { return context.container.get(service); });\n    };\n    return BindingToSyntax;\n}());\nexports.BindingToSyntax = BindingToSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingWhenOnSyntax = void 0;\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingWhenOnSyntax = (function () {\n    function BindingWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    }\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingWhenOnSyntax;\n}());\nexports.BindingWhenOnSyntax = BindingWhenOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingWhenSyntax = void 0;\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar constraint_helpers_1 = require(\"./constraint_helpers\");\nvar BindingWhenSyntax = (function () {\n    function BindingWhenSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingWhenSyntax.prototype.when = function (constraint) {\n        this._binding.constraint = constraint;\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n        this._binding.constraint = constraint_helpers_1.namedConstraint(name);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n        this._binding.constraint = function (request) {\n            var targetIsDefault = (request.target !== null) &&\n                (!request.target.isNamed()) &&\n                (!request.target.isTagged());\n            return targetIsDefault;\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n        this._binding.constraint = constraint_helpers_1.taggedConstraint(tag)(value);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.typeConstraint(parent)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.namedConstraint(name)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    return BindingWhenSyntax;\n}());\nexports.BindingWhenSyntax = BindingWhenSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.typeConstraint = exports.namedConstraint = exports.taggedConstraint = exports.traverseAncerstors = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiBindToService = void 0;\nexports.multiBindToService = function (container) {\n    return function (service) {\n        return function () {\n            var types = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                types[_i] = arguments[_i];\n            }\n            return types.forEach(function (t) { return container.bind(t).toService(service); });\n        };\n    };\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isStackOverflowExeption = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction isStackOverflowExeption(error) {\n    return (error instanceof RangeError ||\n        error.message === ERROR_MSGS.STACK_OVERFLOW);\n}\nexports.isStackOverflowExeption = isStackOverflowExeption;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.id = void 0;\nvar idCounter = 0;\nfunction id() {\n    return idCounter++;\n}\nexports.id = id;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.circularDependencyToException = exports.listMetadataForTarget = exports.listRegisteredBindingsForServiceIdentifier = exports.getServiceIdentifierAsString = exports.getFunctionName = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n    if (request.parentRequest === null) {\n        return false;\n    }\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n        return true;\n    }\n    else {\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n    }\n}\nfunction dependencyChainToString(request) {\n    function _createStringArr(req, result) {\n        if (result === void 0) { result = []; }\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n        result.push(serviceIdentifier);\n        if (req.parentRequest !== null) {\n            return _createStringArr(req.parentRequest, result);\n        }\n        return result;\n    }\n    var stringArr = _createStringArr(request);\n    return stringArr.reverse().join(\" --> \");\n}\nfunction circularDependencyToException(request) {\n    request.childRequests.forEach(function (childRequest) {\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n            var services = dependencyChainToString(childRequest);\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n        else {\n            circularDependencyToException(childRequest);\n        }\n    });\n}\nexports.circularDependencyToException = circularDependencyToException;\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nexports.listMetadataForTarget = listMetadataForTarget;\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexports.getFunctionName = getFunctionName;\n","function createElement(tagName, options) {\n    return document.createElement(tagName, options);\n}\nfunction createElementNS(namespaceURI, qualifiedName, options) {\n    return document.createElementNS(namespaceURI, qualifiedName, options);\n}\nfunction createTextNode(text) {\n    return document.createTextNode(text);\n}\nfunction createComment(text) {\n    return document.createComment(text);\n}\nfunction insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nfunction removeChild(node, child) {\n    node.removeChild(child);\n}\nfunction appendChild(node, child) {\n    node.appendChild(child);\n}\nfunction parentNode(node) {\n    return node.parentNode;\n}\nfunction nextSibling(node) {\n    return node.nextSibling;\n}\nfunction tagName(elm) {\n    return elm.tagName;\n}\nfunction setTextContent(node, text) {\n    node.textContent = text;\n}\nfunction getTextContent(node) {\n    return node.textContent;\n}\nfunction isElement(node) {\n    return node.nodeType === 1;\n}\nfunction isText(node) {\n    return node.nodeType === 3;\n}\nfunction isComment(node) {\n    return node.nodeType === 8;\n}\nexport const htmlDomApi = {\n    createElement,\n    createElementNS,\n    createTextNode,\n    createComment,\n    insertBefore,\n    removeChild,\n    appendChild,\n    parentNode,\n    nextSibling,\n    tagName,\n    setTextContent,\n    getTextContent,\n    isElement,\n    isText,\n    isComment,\n};\n//# sourceMappingURL=htmldomapi.js.map","export function vnode(sel, data, children, text, elm) {\n    const key = data === undefined ? undefined : data.key;\n    return { sel, data, children, text, elm, key };\n}\n//# sourceMappingURL=vnode.js.map","export const array = Array.isArray;\nexport function primitive(s) {\n    return typeof s === \"string\" || typeof s === \"number\";\n}\n//# sourceMappingURL=is.js.map","import { vnode } from \"./vnode\";\nimport * as is from \"./is\";\nimport { htmlDomApi } from \"./htmldomapi\";\nfunction isUndef(s) {\n    return s === undefined;\n}\nfunction isDef(s) {\n    return s !== undefined;\n}\nconst emptyNode = vnode(\"\", {}, [], undefined, undefined);\nfunction sameVnode(vnode1, vnode2) {\n    var _a, _b;\n    const isSameKey = vnode1.key === vnode2.key;\n    const isSameIs = ((_a = vnode1.data) === null || _a === void 0 ? void 0 : _a.is) === ((_b = vnode2.data) === null || _b === void 0 ? void 0 : _b.is);\n    const isSameSel = vnode1.sel === vnode2.sel;\n    return isSameSel && isSameKey && isSameIs;\n}\nfunction isVnode(vnode) {\n    return vnode.sel !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var _a;\n    const map = {};\n    for (let i = beginIdx; i <= endIdx; ++i) {\n        const key = (_a = children[i]) === null || _a === void 0 ? void 0 : _a.key;\n        if (key !== undefined) {\n            map[key] = i;\n        }\n    }\n    return map;\n}\nconst hooks = [\n    \"create\",\n    \"update\",\n    \"remove\",\n    \"destroy\",\n    \"pre\",\n    \"post\",\n];\nexport function init(modules, domApi) {\n    let i;\n    let j;\n    const cbs = {\n        create: [],\n        update: [],\n        remove: [],\n        destroy: [],\n        pre: [],\n        post: [],\n    };\n    const api = domApi !== undefined ? domApi : htmlDomApi;\n    for (i = 0; i < hooks.length; ++i) {\n        cbs[hooks[i]] = [];\n        for (j = 0; j < modules.length; ++j) {\n            const hook = modules[j][hooks[i]];\n            if (hook !== undefined) {\n                cbs[hooks[i]].push(hook);\n            }\n        }\n    }\n    function emptyNodeAt(elm) {\n        const id = elm.id ? \"#\" + elm.id : \"\";\n        // elm.className doesn't return a string when elm is an SVG element inside a shadowRoot.\n        // https://stackoverflow.com/questions/29454340/detecting-classname-of-svganimatedstring\n        const classes = elm.getAttribute(\"class\");\n        const c = classes ? \".\" + classes.split(\" \").join(\".\") : \"\";\n        return vnode(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);\n    }\n    function createRmCb(childElm, listeners) {\n        return function rmCb() {\n            if (--listeners === 0) {\n                const parent = api.parentNode(childElm);\n                api.removeChild(parent, childElm);\n            }\n        };\n    }\n    function createElm(vnode, insertedVnodeQueue) {\n        var _a, _b;\n        let i;\n        let data = vnode.data;\n        if (data !== undefined) {\n            const init = (_a = data.hook) === null || _a === void 0 ? void 0 : _a.init;\n            if (isDef(init)) {\n                init(vnode);\n                data = vnode.data;\n            }\n        }\n        const children = vnode.children;\n        const sel = vnode.sel;\n        if (sel === \"!\") {\n            if (isUndef(vnode.text)) {\n                vnode.text = \"\";\n            }\n            vnode.elm = api.createComment(vnode.text);\n        }\n        else if (sel !== undefined) {\n            // Parse selector\n            const hashIdx = sel.indexOf(\"#\");\n            const dotIdx = sel.indexOf(\".\", hashIdx);\n            const hash = hashIdx > 0 ? hashIdx : sel.length;\n            const dot = dotIdx > 0 ? dotIdx : sel.length;\n            const tag = hashIdx !== -1 || dotIdx !== -1\n                ? sel.slice(0, Math.min(hash, dot))\n                : sel;\n            const elm = (vnode.elm =\n                isDef(data) && isDef((i = data.ns))\n                    ? api.createElementNS(i, tag, data)\n                    : api.createElement(tag, data));\n            if (hash < dot)\n                elm.setAttribute(\"id\", sel.slice(hash + 1, dot));\n            if (dotIdx > 0)\n                elm.setAttribute(\"class\", sel.slice(dot + 1).replace(/\\./g, \" \"));\n            for (i = 0; i < cbs.create.length; ++i)\n                cbs.create[i](emptyNode, vnode);\n            if (is.array(children)) {\n                for (i = 0; i < children.length; ++i) {\n                    const ch = children[i];\n                    if (ch != null) {\n                        api.appendChild(elm, createElm(ch, insertedVnodeQueue));\n                    }\n                }\n            }\n            else if (is.primitive(vnode.text)) {\n                api.appendChild(elm, api.createTextNode(vnode.text));\n            }\n            const hook = vnode.data.hook;\n            if (isDef(hook)) {\n                (_b = hook.create) === null || _b === void 0 ? void 0 : _b.call(hook, emptyNode, vnode);\n                if (hook.insert) {\n                    insertedVnodeQueue.push(vnode);\n                }\n            }\n        }\n        else {\n            vnode.elm = api.createTextNode(vnode.text);\n        }\n        return vnode.elm;\n    }\n    function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            const ch = vnodes[startIdx];\n            if (ch != null) {\n                api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);\n            }\n        }\n    }\n    function invokeDestroyHook(vnode) {\n        var _a, _b;\n        const data = vnode.data;\n        if (data !== undefined) {\n            (_b = (_a = data === null || data === void 0 ? void 0 : data.hook) === null || _a === void 0 ? void 0 : _a.destroy) === null || _b === void 0 ? void 0 : _b.call(_a, vnode);\n            for (let i = 0; i < cbs.destroy.length; ++i)\n                cbs.destroy[i](vnode);\n            if (vnode.children !== undefined) {\n                for (let j = 0; j < vnode.children.length; ++j) {\n                    const child = vnode.children[j];\n                    if (child != null && typeof child !== \"string\") {\n                        invokeDestroyHook(child);\n                    }\n                }\n            }\n        }\n    }\n    function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n        var _a, _b;\n        for (; startIdx <= endIdx; ++startIdx) {\n            let listeners;\n            let rm;\n            const ch = vnodes[startIdx];\n            if (ch != null) {\n                if (isDef(ch.sel)) {\n                    invokeDestroyHook(ch);\n                    listeners = cbs.remove.length + 1;\n                    rm = createRmCb(ch.elm, listeners);\n                    for (let i = 0; i < cbs.remove.length; ++i)\n                        cbs.remove[i](ch, rm);\n                    const removeHook = (_b = (_a = ch === null || ch === void 0 ? void 0 : ch.data) === null || _a === void 0 ? void 0 : _a.hook) === null || _b === void 0 ? void 0 : _b.remove;\n                    if (isDef(removeHook)) {\n                        removeHook(ch, rm);\n                    }\n                    else {\n                        rm();\n                    }\n                }\n                else {\n                    // Text node\n                    api.removeChild(parentElm, ch.elm);\n                }\n            }\n        }\n    }\n    function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n        let oldStartIdx = 0;\n        let newStartIdx = 0;\n        let oldEndIdx = oldCh.length - 1;\n        let oldStartVnode = oldCh[0];\n        let oldEndVnode = oldCh[oldEndIdx];\n        let newEndIdx = newCh.length - 1;\n        let newStartVnode = newCh[0];\n        let newEndVnode = newCh[newEndIdx];\n        let oldKeyToIdx;\n        let idxInOld;\n        let elmToMove;\n        let before;\n        while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n            if (oldStartVnode == null) {\n                oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\n            }\n            else if (oldEndVnode == null) {\n                oldEndVnode = oldCh[--oldEndIdx];\n            }\n            else if (newStartVnode == null) {\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (newEndVnode == null) {\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newStartVnode)) {\n                patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n                oldStartVnode = oldCh[++oldStartIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (sameVnode(oldEndVnode, newEndVnode)) {\n                patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newEndVnode)) {\n                // Vnode moved right\n                patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n                oldStartVnode = oldCh[++oldStartIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldEndVnode, newStartVnode)) {\n                // Vnode moved left\n                patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else {\n                if (oldKeyToIdx === undefined) {\n                    oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n                }\n                idxInOld = oldKeyToIdx[newStartVnode.key];\n                if (isUndef(idxInOld)) {\n                    // New element\n                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                }\n                else {\n                    elmToMove = oldCh[idxInOld];\n                    if (elmToMove.sel !== newStartVnode.sel) {\n                        api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    }\n                    else {\n                        patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n                        oldCh[idxInOld] = undefined;\n                        api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                    }\n                }\n                newStartVnode = newCh[++newStartIdx];\n            }\n        }\n        if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n            if (oldStartIdx > oldEndIdx) {\n                before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n                addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n            }\n            else {\n                removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n            }\n        }\n    }\n    function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n        var _a, _b, _c, _d, _e;\n        const hook = (_a = vnode.data) === null || _a === void 0 ? void 0 : _a.hook;\n        (_b = hook === null || hook === void 0 ? void 0 : hook.prepatch) === null || _b === void 0 ? void 0 : _b.call(hook, oldVnode, vnode);\n        const elm = (vnode.elm = oldVnode.elm);\n        const oldCh = oldVnode.children;\n        const ch = vnode.children;\n        if (oldVnode === vnode)\n            return;\n        if (vnode.data !== undefined) {\n            for (let i = 0; i < cbs.update.length; ++i)\n                cbs.update[i](oldVnode, vnode);\n            (_d = (_c = vnode.data.hook) === null || _c === void 0 ? void 0 : _c.update) === null || _d === void 0 ? void 0 : _d.call(_c, oldVnode, vnode);\n        }\n        if (isUndef(vnode.text)) {\n            if (isDef(oldCh) && isDef(ch)) {\n                if (oldCh !== ch)\n                    updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n            }\n            else if (isDef(ch)) {\n                if (isDef(oldVnode.text))\n                    api.setTextContent(elm, \"\");\n                addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n            }\n            else if (isDef(oldCh)) {\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n            }\n            else if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, \"\");\n            }\n        }\n        else if (oldVnode.text !== vnode.text) {\n            if (isDef(oldCh)) {\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n            }\n            api.setTextContent(elm, vnode.text);\n        }\n        (_e = hook === null || hook === void 0 ? void 0 : hook.postpatch) === null || _e === void 0 ? void 0 : _e.call(hook, oldVnode, vnode);\n    }\n    return function patch(oldVnode, vnode) {\n        let i, elm, parent;\n        const insertedVnodeQueue = [];\n        for (i = 0; i < cbs.pre.length; ++i)\n            cbs.pre[i]();\n        if (!isVnode(oldVnode)) {\n            oldVnode = emptyNodeAt(oldVnode);\n        }\n        if (sameVnode(oldVnode, vnode)) {\n            patchVnode(oldVnode, vnode, insertedVnodeQueue);\n        }\n        else {\n            elm = oldVnode.elm;\n            parent = api.parentNode(elm);\n            createElm(vnode, insertedVnodeQueue);\n            if (parent !== null) {\n                api.insertBefore(parent, vnode.elm, api.nextSibling(elm));\n                removeVnodes(parent, [oldVnode], 0, 0);\n            }\n        }\n        for (i = 0; i < insertedVnodeQueue.length; ++i) {\n            insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n        }\n        for (i = 0; i < cbs.post.length; ++i)\n            cbs.post[i]();\n        return vnode;\n    };\n}\n//# sourceMappingURL=init.js.map","import { vnode } from \"./vnode\";\nimport * as is from \"./is\";\nfunction addNS(data, children, sel) {\n    data.ns = \"http://www.w3.org/2000/svg\";\n    if (sel !== \"foreignObject\" && children !== undefined) {\n        for (let i = 0; i < children.length; ++i) {\n            const childData = children[i].data;\n            if (childData !== undefined) {\n                addNS(childData, children[i].children, children[i].sel);\n            }\n        }\n    }\n}\nexport function h(sel, b, c) {\n    let data = {};\n    let children;\n    let text;\n    let i;\n    if (c !== undefined) {\n        if (b !== null) {\n            data = b;\n        }\n        if (is.array(c)) {\n            children = c;\n        }\n        else if (is.primitive(c)) {\n            text = c;\n        }\n        else if (c && c.sel) {\n            children = [c];\n        }\n    }\n    else if (b !== undefined && b !== null) {\n        if (is.array(b)) {\n            children = b;\n        }\n        else if (is.primitive(b)) {\n            text = b;\n        }\n        else if (b && b.sel) {\n            children = [b];\n        }\n        else {\n            data = b;\n        }\n    }\n    if (children !== undefined) {\n        for (i = 0; i < children.length; ++i) {\n            if (is.primitive(children[i]))\n                children[i] = vnode(undefined, undefined, undefined, children[i], undefined);\n        }\n    }\n    if (sel[0] === \"s\" &&\n        sel[1] === \"v\" &&\n        sel[2] === \"g\" &&\n        (sel.length === 3 || sel[3] === \".\" || sel[3] === \"#\")) {\n        addNS(data, children, sel);\n    }\n    return vnode(sel, data, children, text, undefined);\n}\n//# sourceMappingURL=h.js.map","import { h } from \"./h\";\nfunction copyToThunk(vnode, thunk) {\n    vnode.data.fn = thunk.data.fn;\n    vnode.data.args = thunk.data.args;\n    thunk.data = vnode.data;\n    thunk.children = vnode.children;\n    thunk.text = vnode.text;\n    thunk.elm = vnode.elm;\n}\nfunction init(thunk) {\n    const cur = thunk.data;\n    const vnode = cur.fn(...cur.args);\n    copyToThunk(vnode, thunk);\n}\nfunction prepatch(oldVnode, thunk) {\n    let i;\n    const old = oldVnode.data;\n    const cur = thunk.data;\n    const oldArgs = old.args;\n    const args = cur.args;\n    if (old.fn !== cur.fn || oldArgs.length !== args.length) {\n        copyToThunk(cur.fn(...args), thunk);\n        return;\n    }\n    for (i = 0; i < args.length; ++i) {\n        if (oldArgs[i] !== args[i]) {\n            copyToThunk(cur.fn(...args), thunk);\n            return;\n        }\n    }\n    copyToThunk(oldVnode, thunk);\n}\nexport const thunk = function thunk(sel, key, fn, args) {\n    if (args === undefined) {\n        args = fn;\n        fn = key;\n        key = undefined;\n    }\n    return h(sel, {\n        key: key,\n        hook: { init, prepatch },\n        fn: fn,\n        args: args,\n    });\n};\n//# sourceMappingURL=thunk.js.map","function pre(vnode, newVnode) {\n    const attachData = vnode.data.attachData;\n    // Copy created placeholder and real element from old vnode\n    newVnode.data.attachData.placeholder = attachData.placeholder;\n    newVnode.data.attachData.real = attachData.real;\n    // Mount real element in vnode so the patch process operates on it\n    vnode.elm = vnode.data.attachData.real;\n}\nfunction post(_, vnode) {\n    // Mount dummy placeholder in vnode so potential reorders use it\n    vnode.elm = vnode.data.attachData.placeholder;\n}\nfunction destroy(vnode) {\n    // Remove placeholder\n    if (vnode.elm !== undefined) {\n        vnode.elm.parentNode.removeChild(vnode.elm);\n    }\n    // Remove real element from where it was inserted\n    vnode.elm = vnode.data.attachData.real;\n}\nfunction create(_, vnode) {\n    const real = vnode.elm;\n    const attachData = vnode.data.attachData;\n    const placeholder = document.createElement(\"span\");\n    // Replace actual element with dummy placeholder\n    // Snabbdom will then insert placeholder instead\n    vnode.elm = placeholder;\n    attachData.target.appendChild(real);\n    attachData.real = real;\n    attachData.placeholder = placeholder;\n}\nexport function attachTo(target, vnode) {\n    if (vnode.data === undefined)\n        vnode.data = {};\n    if (vnode.data.hook === undefined)\n        vnode.data.hook = {};\n    const data = vnode.data;\n    const hook = vnode.data.hook;\n    data.attachData = { target: target, placeholder: undefined, real: undefined };\n    hook.create = create;\n    hook.prepatch = pre;\n    hook.postpatch = post;\n    hook.destroy = destroy;\n    return vnode;\n}\n//# sourceMappingURL=attachto.js.map","import { vnode } from \"./vnode\";\nimport { htmlDomApi } from \"./htmldomapi\";\nexport function toVNode(node, domApi) {\n    const api = domApi !== undefined ? domApi : htmlDomApi;\n    let text;\n    if (api.isElement(node)) {\n        const id = node.id ? \"#\" + node.id : \"\";\n        const cn = node.getAttribute(\"class\");\n        const c = cn ? \".\" + cn.split(\" \").join(\".\") : \"\";\n        const sel = api.tagName(node).toLowerCase() + id + c;\n        const attrs = {};\n        const children = [];\n        let name;\n        let i, n;\n        const elmAttrs = node.attributes;\n        const elmChildren = node.childNodes;\n        for (i = 0, n = elmAttrs.length; i < n; i++) {\n            name = elmAttrs[i].nodeName;\n            if (name !== \"id\" && name !== \"class\") {\n                attrs[name] = elmAttrs[i].nodeValue;\n            }\n        }\n        for (i = 0, n = elmChildren.length; i < n; i++) {\n            children.push(toVNode(elmChildren[i], domApi));\n        }\n        return vnode(sel, { attrs }, children, undefined, node);\n    }\n    else if (api.isText(node)) {\n        text = api.getTextContent(node);\n        return vnode(undefined, undefined, undefined, text, node);\n    }\n    else if (api.isComment(node)) {\n        text = api.getTextContent(node);\n        return vnode(\"!\", {}, [], text, node);\n    }\n    else {\n        return vnode(\"\", {}, [], undefined, node);\n    }\n}\n//# sourceMappingURL=tovnode.js.map","const xlinkNS = \"http://www.w3.org/1999/xlink\";\nconst xmlNS = \"http://www.w3.org/XML/1998/namespace\";\nconst colonChar = 58;\nconst xChar = 120;\nfunction updateAttrs(oldVnode, vnode) {\n    let key;\n    const elm = vnode.elm;\n    let oldAttrs = oldVnode.data.attrs;\n    let attrs = vnode.data.attrs;\n    if (!oldAttrs && !attrs)\n        return;\n    if (oldAttrs === attrs)\n        return;\n    oldAttrs = oldAttrs || {};\n    attrs = attrs || {};\n    // update modified attributes, add new attributes\n    for (key in attrs) {\n        const cur = attrs[key];\n        const old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, \"\");\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    // Assume xml namespace\n                    elm.setAttributeNS(xmlNS, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    // Assume xlink namespace\n                    elm.setAttributeNS(xlinkNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    // remove removed attributes\n    // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n    // the other option is to remove all attributes with value == undefined\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nexport const attributesModule = {\n    create: updateAttrs,\n    update: updateAttrs,\n};\n//# sourceMappingURL=attributes.js.map","function updateClass(oldVnode, vnode) {\n    let cur;\n    let name;\n    const elm = vnode.elm;\n    let oldClass = oldVnode.data.class;\n    let klass = vnode.data.class;\n    if (!oldClass && !klass)\n        return;\n    if (oldClass === klass)\n        return;\n    oldClass = oldClass || {};\n    klass = klass || {};\n    for (name in oldClass) {\n        if (oldClass[name] && !Object.prototype.hasOwnProperty.call(klass, name)) {\n            // was `true` and now not provided\n            elm.classList.remove(name);\n        }\n    }\n    for (name in klass) {\n        cur = klass[name];\n        if (cur !== oldClass[name]) {\n            elm.classList[cur ? \"add\" : \"remove\"](name);\n        }\n    }\n}\nexport const classModule = { create: updateClass, update: updateClass };\n//# sourceMappingURL=class.js.map","const CAPS_REGEX = /[A-Z]/g;\nfunction updateDataset(oldVnode, vnode) {\n    const elm = vnode.elm;\n    let oldDataset = oldVnode.data.dataset;\n    let dataset = vnode.data.dataset;\n    let key;\n    if (!oldDataset && !dataset)\n        return;\n    if (oldDataset === dataset)\n        return;\n    oldDataset = oldDataset || {};\n    dataset = dataset || {};\n    const d = elm.dataset;\n    for (key in oldDataset) {\n        if (!dataset[key]) {\n            if (d) {\n                if (key in d) {\n                    delete d[key];\n                }\n            }\n            else {\n                elm.removeAttribute(\"data-\" + key.replace(CAPS_REGEX, \"-$&\").toLowerCase());\n            }\n        }\n    }\n    for (key in dataset) {\n        if (oldDataset[key] !== dataset[key]) {\n            if (d) {\n                d[key] = dataset[key];\n            }\n            else {\n                elm.setAttribute(\"data-\" + key.replace(CAPS_REGEX, \"-$&\").toLowerCase(), dataset[key]);\n            }\n        }\n    }\n}\nexport const datasetModule = {\n    create: updateDataset,\n    update: updateDataset,\n};\n//# sourceMappingURL=dataset.js.map","function invokeHandler(handler, vnode, event) {\n    if (typeof handler === \"function\") {\n        // call function handler\n        handler.call(vnode, event, vnode);\n    }\n    else if (typeof handler === \"object\") {\n        // call multiple handlers\n        for (let i = 0; i < handler.length; i++) {\n            invokeHandler(handler[i], vnode, event);\n        }\n    }\n}\nfunction handleEvent(event, vnode) {\n    const name = event.type;\n    const on = vnode.data.on;\n    // call event handler(s) if exists\n    if (on && on[name]) {\n        invokeHandler(on[name], vnode, event);\n    }\n}\nfunction createListener() {\n    return function handler(event) {\n        handleEvent(event, handler.vnode);\n    };\n}\nfunction updateEventListeners(oldVnode, vnode) {\n    const oldOn = oldVnode.data.on;\n    const oldListener = oldVnode.listener;\n    const oldElm = oldVnode.elm;\n    const on = vnode && vnode.data.on;\n    const elm = (vnode && vnode.elm);\n    let name;\n    // optimization for reused immutable handlers\n    if (oldOn === on) {\n        return;\n    }\n    // remove existing listeners which no longer used\n    if (oldOn && oldListener) {\n        // if element changed or deleted we remove all existing listeners unconditionally\n        if (!on) {\n            for (name in oldOn) {\n                // remove listener if element was changed or existing listeners removed\n                oldElm.removeEventListener(name, oldListener, false);\n            }\n        }\n        else {\n            for (name in oldOn) {\n                // remove listener if existing listener removed\n                if (!on[name]) {\n                    oldElm.removeEventListener(name, oldListener, false);\n                }\n            }\n        }\n    }\n    // add new listeners which has not already attached\n    if (on) {\n        // reuse existing listener or create new\n        const listener = (vnode.listener =\n            oldVnode.listener || createListener());\n        // update vnode for listener\n        listener.vnode = vnode;\n        // if element changed or added we add all needed listeners unconditionally\n        if (!oldOn) {\n            for (name in on) {\n                // add listener if element was changed or new listeners added\n                elm.addEventListener(name, listener, false);\n            }\n        }\n        else {\n            for (name in on) {\n                // add listener if new listener added\n                if (!oldOn[name]) {\n                    elm.addEventListener(name, listener, false);\n                }\n            }\n        }\n    }\n}\nexport const eventListenersModule = {\n    create: updateEventListeners,\n    update: updateEventListeners,\n    destroy: updateEventListeners,\n};\n//# sourceMappingURL=eventlisteners.js.map","function updateProps(oldVnode, vnode) {\n    let key;\n    let cur;\n    let old;\n    const elm = vnode.elm;\n    let oldProps = oldVnode.data.props;\n    let props = vnode.data.props;\n    if (!oldProps && !props)\n        return;\n    if (oldProps === props)\n        return;\n    oldProps = oldProps || {};\n    props = props || {};\n    for (key in props) {\n        cur = props[key];\n        old = oldProps[key];\n        if (old !== cur && (key !== \"value\" || elm[key] !== cur)) {\n            elm[key] = cur;\n        }\n    }\n}\nexport const propsModule = { create: updateProps, update: updateProps };\n//# sourceMappingURL=props.js.map","// Bindig `requestAnimationFrame` like this fixes a bug in IE/Edge. See #360 and #409.\nconst raf = (typeof window !== \"undefined\" &&\n    window.requestAnimationFrame.bind(window)) ||\n    setTimeout;\nconst nextFrame = function (fn) {\n    raf(function () {\n        raf(fn);\n    });\n};\nlet reflowForced = false;\nfunction setNextFrame(obj, prop, val) {\n    nextFrame(function () {\n        obj[prop] = val;\n    });\n}\nfunction updateStyle(oldVnode, vnode) {\n    let cur;\n    let name;\n    const elm = vnode.elm;\n    let oldStyle = oldVnode.data.style;\n    let style = vnode.data.style;\n    if (!oldStyle && !style)\n        return;\n    if (oldStyle === style)\n        return;\n    oldStyle = oldStyle || {};\n    style = style || {};\n    const oldHasDel = \"delayed\" in oldStyle;\n    for (name in oldStyle) {\n        if (!style[name]) {\n            if (name[0] === \"-\" && name[1] === \"-\") {\n                elm.style.removeProperty(name);\n            }\n            else {\n                elm.style[name] = \"\";\n            }\n        }\n    }\n    for (name in style) {\n        cur = style[name];\n        if (name === \"delayed\" && style.delayed) {\n            for (const name2 in style.delayed) {\n                cur = style.delayed[name2];\n                if (!oldHasDel || cur !== oldStyle.delayed[name2]) {\n                    setNextFrame(elm.style, name2, cur);\n                }\n            }\n        }\n        else if (name !== \"remove\" && cur !== oldStyle[name]) {\n            if (name[0] === \"-\" && name[1] === \"-\") {\n                elm.style.setProperty(name, cur);\n            }\n            else {\n                elm.style[name] = cur;\n            }\n        }\n    }\n}\nfunction applyDestroyStyle(vnode) {\n    let style;\n    let name;\n    const elm = vnode.elm;\n    const s = vnode.data.style;\n    if (!s || !(style = s.destroy))\n        return;\n    for (name in style) {\n        elm.style[name] = style[name];\n    }\n}\nfunction applyRemoveStyle(vnode, rm) {\n    const s = vnode.data.style;\n    if (!s || !s.remove) {\n        rm();\n        return;\n    }\n    if (!reflowForced) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        vnode.elm.offsetLeft;\n        reflowForced = true;\n    }\n    let name;\n    const elm = vnode.elm;\n    let i = 0;\n    const style = s.remove;\n    let amount = 0;\n    const applied = [];\n    for (name in style) {\n        applied.push(name);\n        elm.style[name] = style[name];\n    }\n    const compStyle = getComputedStyle(elm);\n    const props = compStyle[\"transition-property\"].split(\", \");\n    for (; i < props.length; ++i) {\n        if (applied.indexOf(props[i]) !== -1)\n            amount++;\n    }\n    elm.addEventListener(\"transitionend\", function (ev) {\n        if (ev.target === elm)\n            --amount;\n        if (amount === 0)\n            rm();\n    });\n}\nfunction forceReflow() {\n    reflowForced = false;\n}\nexport const styleModule = {\n    pre: forceReflow,\n    create: updateStyle,\n    update: updateStyle,\n    destroy: applyDestroyStyle,\n    remove: applyRemoveStyle,\n};\n//# sourceMappingURL=style.js.map","/* eslint-disable @typescript-eslint/no-namespace, import/export */\nimport { vnode } from \"./vnode\";\nimport { h } from \"./h\";\nfunction flattenAndFilter(children, flattened) {\n    for (const child of children) {\n        // filter out falsey children, except 0 since zero can be a valid value e.g inside a chart\n        if (child !== undefined &&\n            child !== null &&\n            child !== false &&\n            child !== \"\") {\n            if (Array.isArray(child)) {\n                flattenAndFilter(child, flattened);\n            }\n            else if (typeof child === \"string\" ||\n                typeof child === \"number\" ||\n                typeof child === \"boolean\") {\n                flattened.push(vnode(undefined, undefined, undefined, String(child), undefined));\n            }\n            else {\n                flattened.push(child);\n            }\n        }\n    }\n    return flattened;\n}\n/**\n * jsx/tsx compatible factory function\n * see: https://www.typescriptlang.org/docs/handbook/jsx.html#factory-functions\n */\nexport function jsx(tag, data, ...children) {\n    const flatChildren = flattenAndFilter(children, []);\n    if (typeof tag === \"function\") {\n        // tag is a function component\n        return tag(data, flatChildren);\n    }\n    else {\n        if (flatChildren.length === 1 &&\n            !flatChildren[0].sel &&\n            flatChildren[0].text) {\n            // only child is a simple text node, pass as text for a simpler vtree\n            return h(tag, data, flatChildren[0].text);\n        }\n        else {\n            return h(tag, data, flatChildren);\n        }\n    }\n}\n(function (jsx) {\n})(jsx || (jsx = {}));\n//# sourceMappingURL=jsx.js.map","\nexport default class TinyQueue {\n    constructor(data = [], compare = defaultCompare) {\n        this.data = data;\n        this.length = this.data.length;\n        this.compare = compare;\n\n        if (this.length > 0) {\n            for (let i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n        }\n    }\n\n    push(item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    }\n\n    pop() {\n        if (this.length === 0) return undefined;\n\n        const top = this.data[0];\n        const bottom = this.data.pop();\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = bottom;\n            this._down(0);\n        }\n\n        return top;\n    }\n\n    peek() {\n        return this.data[0];\n    }\n\n    _up(pos) {\n        const {data, compare} = this;\n        const item = data[pos];\n\n        while (pos > 0) {\n            const parent = (pos - 1) >> 1;\n            const current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    }\n\n    _down(pos) {\n        const {data, compare} = this;\n        const halfLength = this.length >> 1;\n        const item = data[pos];\n\n        while (pos < halfLength) {\n            let left = (pos << 1) + 1;\n            let best = data[left];\n            const right = left + 1;\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\nvar initAvoidModule = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(initAvoidModule) {\n  initAvoidModule = initAvoidModule || {};\n\n\nvar a;a||(a=typeof initAvoidModule !== 'undefined' ? initAvoidModule : {});var aa,ba;a.ready=new Promise(function(b,c){aa=b;ba=c});var ca={},k;for(k in a)a.hasOwnProperty(k)&&(ca[k]=a[k]);var ea=\"./this.program\",fa=!1,ha=!1,ja=!1,ka=!1;fa=\"object\"===typeof window;ha=\"function\"===typeof importScripts;ja=\"object\"===typeof process&&\"object\"===typeof process.versions&&\"string\"===typeof process.versions.node;ka=!fa&&!ja&&!ha;var l=\"\",la,ma,na,oa,pa;\nif(ja)l=ha?require(\"path\").dirname(l)+\"/\":__dirname+\"/\",la=function(b,c){oa||(oa=require(\"fs\"));pa||(pa=require(\"path\"));b=pa.normalize(b);return oa.readFileSync(b,c?null:\"utf8\")},na=function(b){b=la(b,!0);b.buffer||(b=new Uint8Array(b));assert(b.buffer);return b},1<process.argv.length&&(ea=process.argv[1].replace(/\\\\/g,\"/\")),process.argv.slice(2),process.on(\"uncaughtException\",function(b){throw b;}),process.on(\"unhandledRejection\",m),a.inspect=function(){return\"[Emscripten Module object]\"};else if(ka)\"undefined\"!=\ntypeof read&&(la=function(b){return read(b)}),na=function(b){if(\"function\"===typeof readbuffer)return new Uint8Array(readbuffer(b));b=read(b,\"binary\");assert(\"object\"===typeof b);return b},\"undefined\"!==typeof print&&(\"undefined\"===typeof console&&(console={}),console.log=print,console.warn=console.error=\"undefined\"!==typeof printErr?printErr:print);else if(fa||ha)ha?l=self.location.href:\"undefined\"!==typeof document&&document.currentScript&&(l=document.currentScript.src),_scriptDir&&(l=_scriptDir),\n0!==l.indexOf(\"blob:\")?l=l.substr(0,l.lastIndexOf(\"/\")+1):l=\"\",la=function(b){var c=new XMLHttpRequest;c.open(\"GET\",b,!1);c.send(null);return c.responseText},ha&&(na=function(b){var c=new XMLHttpRequest;c.open(\"GET\",b,!1);c.responseType=\"arraybuffer\";c.send(null);return new Uint8Array(c.response)}),ma=function(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b,!0);e.responseType=\"arraybuffer\";e.onload=function(){200==e.status||0==e.status&&e.response?c(e.response):d()};e.onerror=d;e.send(null)};\nvar qa=a.print||console.log.bind(console),ra=a.printErr||console.warn.bind(console);for(k in ca)ca.hasOwnProperty(k)&&(a[k]=ca[k]);ca=null;a.thisProgram&&(ea=a.thisProgram);var sa=[],ta,ua;a.wasmBinary&&(ua=a.wasmBinary);var noExitRuntime=a.noExitRuntime||!0;\"object\"!==typeof WebAssembly&&m(\"no native wasm support detected\");var va,wa=!1;function assert(b,c){b||m(\"Assertion failed: \"+c)}var xa=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;\nfunction ya(b,c,d){var e=c+d;for(d=c;b[d]&&!(d>=e);)++d;if(16<d-c&&b.subarray&&xa)return xa.decode(b.subarray(c,d));for(e=\"\";c<d;){var g=b[c++];if(g&128){var h=b[c++]&63;if(192==(g&224))e+=String.fromCharCode((g&31)<<6|h);else{var t=b[c++]&63;g=224==(g&240)?(g&15)<<12|h<<6|t:(g&7)<<18|h<<12|t<<6|b[c++]&63;65536>g?e+=String.fromCharCode(g):(g-=65536,e+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else e+=String.fromCharCode(g)}return e}function za(b){return b?ya(Aa,b,void 0):\"\"}\nvar Ba,Aa,n,q,Ca=[],Da=[],Ea=[],Fa=[],Ga=!1;Da.push({Uc:function(){Ha()}});function Ia(){var b=a.preRun.shift();Ca.unshift(b)}var Ja=0,Ka=null,La=null;a.preloadedImages={};a.preloadedAudios={};function m(b){if(a.onAbort)a.onAbort(b);ra(b);wa=!0;b=new WebAssembly.RuntimeError(\"abort(\"+b+\"). Build with -s ASSERTIONS=1 for more info.\");ba(b);throw b;}function Ma(b){var c=r;return String.prototype.startsWith?c.startsWith(b):0===c.indexOf(b)}\nfunction Na(){return Ma(\"data:application/octet-stream;base64,\")}var r=\"libavoid.wasm\";if(!Na()){var Oa=r;r=a.locateFile?a.locateFile(Oa,l):l+Oa}function Pa(){var b=r;try{if(b==r&&ua)return new Uint8Array(ua);if(na)return na(b);throw\"both async and sync fetching of the wasm failed\";}catch(c){m(c)}}\nfunction Qa(){if(!ua&&(fa||ha)){if(\"function\"===typeof fetch&&!Ma(\"file://\"))return fetch(r,{credentials:\"same-origin\"}).then(function(b){if(!b.ok)throw\"failed to load wasm binary file at '\"+r+\"'\";return b.arrayBuffer()}).catch(function(){return Pa()});if(ma)return new Promise(function(b,c){ma(r,function(d){b(new Uint8Array(d))},c)})}return Promise.resolve().then(function(){return Pa()})}\nfunction Ra(b){for(;0<b.length;){var c=b.shift();if(\"function\"==typeof c)c(a);else{var d=c.Uc;\"number\"===typeof d?void 0===c.Pc?q.get(d)():q.get(d)(c.Pc):d(void 0===c.Pc?null:c.Pc)}}}\nfunction Sa(b){this.Gc=b-16;this.Rc=function(c){n[this.Gc+8>>2]=c};this.Tc=function(){return n[this.Gc+8>>2]};this.ud=function(c){n[this.Gc+0>>2]=c};this.Gd=function(){n[this.Gc+4>>2]=0};this.td=function(){Ba[this.Gc+12>>0]=0};this.Hd=function(){Ba[this.Gc+13>>0]=0};this.rd=function(c,d){this.Rc(c);this.ud(d);this.Gd();this.td();this.Hd()}}var Ta=0;function Ua(){void 0===Ua.start&&(Ua.start=Date.now());return 1E3*(Date.now()-Ua.start)|0}var Va={};\nfunction Wa(){if(!Xa){var b={USER:\"web_user\",LOGNAME:\"web_user\",PATH:\"/\",PWD:\"/\",HOME:\"/home/web_user\",LANG:(\"object\"===typeof navigator&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\",_:ea||\"./this.program\"},c;for(c in Va)b[c]=Va[c];var d=[];for(c in b)d.push(c+\"=\"+b[c]);Xa=d}return Xa}var Xa,Ya=[null,[],[]];function Za(b){return 0===b%4&&(0!==b%100||0===b%400)}function $a(b,c){for(var d=0,e=0;e<=c;d+=b[e++]);return d}\nvar ab=[31,29,31,30,31,30,31,31,30,31,30,31],bb=[31,28,31,30,31,30,31,31,30,31,30,31];function cb(b,c){for(b=new Date(b.getTime());0<c;){var d=b.getMonth(),e=(Za(b.getFullYear())?ab:bb)[d];if(c>e-b.getDate())c-=e-b.getDate()+1,b.setDate(1),11>d?b.setMonth(d+1):(b.setMonth(0),b.setFullYear(b.getFullYear()+1));else{b.setDate(b.getDate()+c);break}}return b}\nfunction db(b,c,d,e){function g(f,p,y){for(f=\"number\"===typeof f?f.toString():f||\"\";f.length<p;)f=y[0]+f;return f}function h(f,p){return g(f,p,\"0\")}function t(f,p){function y(eb){return 0>eb?-1:0<eb?1:0}var da;0===(da=y(f.getFullYear()-p.getFullYear()))&&0===(da=y(f.getMonth()-p.getMonth()))&&(da=y(f.getDate()-p.getDate()));return da}function F(f){switch(f.getDay()){case 0:return new Date(f.getFullYear()-1,11,29);case 1:return f;case 2:return new Date(f.getFullYear(),0,3);case 3:return new Date(f.getFullYear(),\n0,2);case 4:return new Date(f.getFullYear(),0,1);case 5:return new Date(f.getFullYear()-1,11,31);case 6:return new Date(f.getFullYear()-1,11,30)}}function ia(f){f=cb(new Date(f.Jc+1900,0,1),f.Oc);var p=new Date(f.getFullYear()+1,0,4),y=F(new Date(f.getFullYear(),0,4));p=F(p);return 0>=t(y,f)?0>=t(p,f)?f.getFullYear()+1:f.getFullYear():f.getFullYear()-1}var I=n[e+40>>2];e={Md:n[e>>2],Ld:n[e+4>>2],Mc:n[e+8>>2],Lc:n[e+12>>2],Kc:n[e+16>>2],Jc:n[e+20>>2],Nc:n[e+24>>2],Oc:n[e+28>>2],Od:n[e+32>>2],Kd:n[e+\n36>>2],Nd:I?za(I):\"\"};d=za(d);I={\"%c\":\"%a %b %d %H:%M:%S %Y\",\"%D\":\"%m/%d/%y\",\"%F\":\"%Y-%m-%d\",\"%h\":\"%b\",\"%r\":\"%I:%M:%S %p\",\"%R\":\"%H:%M\",\"%T\":\"%H:%M:%S\",\"%x\":\"%m/%d/%y\",\"%X\":\"%H:%M:%S\",\"%Ec\":\"%c\",\"%EC\":\"%C\",\"%Ex\":\"%m/%d/%y\",\"%EX\":\"%H:%M:%S\",\"%Ey\":\"%y\",\"%EY\":\"%Y\",\"%Od\":\"%d\",\"%Oe\":\"%e\",\"%OH\":\"%H\",\"%OI\":\"%I\",\"%Om\":\"%m\",\"%OM\":\"%M\",\"%OS\":\"%S\",\"%Ou\":\"%u\",\"%OU\":\"%U\",\"%OV\":\"%V\",\"%Ow\":\"%w\",\"%OW\":\"%W\",\"%Oy\":\"%y\"};for(var D in I)d=d.replace(new RegExp(D,\"g\"),I[D]);var fb=\"Sunday Monday Tuesday Wednesday Thursday Friday Saturday\".split(\" \"),\ngb=\"January February March April May June July August September October November December\".split(\" \");I={\"%a\":function(f){return fb[f.Nc].substring(0,3)},\"%A\":function(f){return fb[f.Nc]},\"%b\":function(f){return gb[f.Kc].substring(0,3)},\"%B\":function(f){return gb[f.Kc]},\"%C\":function(f){return h((f.Jc+1900)/100|0,2)},\"%d\":function(f){return h(f.Lc,2)},\"%e\":function(f){return g(f.Lc,2,\" \")},\"%g\":function(f){return ia(f).toString().substring(2)},\"%G\":function(f){return ia(f)},\"%H\":function(f){return h(f.Mc,\n2)},\"%I\":function(f){f=f.Mc;0==f?f=12:12<f&&(f-=12);return h(f,2)},\"%j\":function(f){return h(f.Lc+$a(Za(f.Jc+1900)?ab:bb,f.Kc-1),3)},\"%m\":function(f){return h(f.Kc+1,2)},\"%M\":function(f){return h(f.Ld,2)},\"%n\":function(){return\"\\n\"},\"%p\":function(f){return 0<=f.Mc&&12>f.Mc?\"AM\":\"PM\"},\"%S\":function(f){return h(f.Md,2)},\"%t\":function(){return\"\\t\"},\"%u\":function(f){return f.Nc||7},\"%U\":function(f){var p=new Date(f.Jc+1900,0,1),y=0===p.getDay()?p:cb(p,7-p.getDay());f=new Date(f.Jc+1900,f.Kc,f.Lc);return 0>\nt(y,f)?h(Math.ceil((31-y.getDate()+($a(Za(f.getFullYear())?ab:bb,f.getMonth()-1)-31)+f.getDate())/7),2):0===t(y,p)?\"01\":\"00\"},\"%V\":function(f){var p=new Date(f.Jc+1901,0,4),y=F(new Date(f.Jc+1900,0,4));p=F(p);var da=cb(new Date(f.Jc+1900,0,1),f.Oc);return 0>t(da,y)?\"53\":0>=t(p,da)?\"01\":h(Math.ceil((y.getFullYear()<f.Jc+1900?f.Oc+32-y.getDate():f.Oc+1-y.getDate())/7),2)},\"%w\":function(f){return f.Nc},\"%W\":function(f){var p=new Date(f.Jc,0,1),y=1===p.getDay()?p:cb(p,0===p.getDay()?1:7-p.getDay()+1);\nf=new Date(f.Jc+1900,f.Kc,f.Lc);return 0>t(y,f)?h(Math.ceil((31-y.getDate()+($a(Za(f.getFullYear())?ab:bb,f.getMonth()-1)-31)+f.getDate())/7),2):0===t(y,p)?\"01\":\"00\"},\"%y\":function(f){return(f.Jc+1900).toString().substring(2)},\"%Y\":function(f){return f.Jc+1900},\"%z\":function(f){f=f.Kd;var p=0<=f;f=Math.abs(f)/60;return(p?\"+\":\"-\")+String(\"0000\"+(f/60*100+f%60)).slice(-4)},\"%Z\":function(f){return f.Nd},\"%%\":function(){return\"%\"}};for(D in I)0<=d.indexOf(D)&&(d=d.replace(new RegExp(D,\"g\"),I[D](e)));\nD=hb(d);if(D.length>c)return 0;Ba.set(D,b);return D.length-1}\nfunction hb(b){for(var c=0,d=0;d<b.length;++d){var e=b.charCodeAt(d);55296<=e&&57343>=e&&(e=65536+((e&1023)<<10)|b.charCodeAt(++d)&1023);127>=e?++c:c=2047>=e?c+2:65535>=e?c+3:c+4}c=Array(c+1);e=c.length;d=0;if(0<e){e=d+e-1;for(var g=0;g<b.length;++g){var h=b.charCodeAt(g);if(55296<=h&&57343>=h){var t=b.charCodeAt(++g);h=65536+((h&1023)<<10)|t&1023}if(127>=h){if(d>=e)break;c[d++]=h}else{if(2047>=h){if(d+1>=e)break;c[d++]=192|h>>6}else{if(65535>=h){if(d+2>=e)break;c[d++]=224|h>>12}else{if(d+3>=e)break;\nc[d++]=240|h>>18;c[d++]=128|h>>12&63}c[d++]=128|h>>6&63}c[d++]=128|h&63}}c[d]=0}return c}\nvar jb={a:function(b,c,d,e){m(\"Assertion failed: \"+za(b)+\", at: \"+[c?za(c):\"unknown filename\",d,e?za(e):\"unknown function\"])},e:function(b){return ib(b+16)+16},d:function(b,c,d){(new Sa(b)).rd(c,d);Ta++;throw b;},b:function(){m()},c:Ua,l:function(b,c,d){Aa.copyWithin(b,c,c+d)},m:function(){m(\"OOM\")},h:function(b,c){var d=0;Wa().forEach(function(e,g){var h=c+d;g=n[b+4*g>>2]=h;for(h=0;h<e.length;++h)Ba[g++>>0]=e.charCodeAt(h);Ba[g>>0]=0;d+=e.length+1});return 0},i:function(b,c){var d=Wa();n[b>>2]=d.length;\nvar e=0;d.forEach(function(g){e+=g.length+1});n[c>>2]=e;return 0},j:function(){return 0},k:function(){},f:function(b,c,d,e){for(var g=0,h=0;h<d;h++){for(var t=n[c+8*h>>2],F=n[c+(8*h+4)>>2],ia=0;ia<F;ia++){var I=Aa[t+ia],D=Ya[b];0===I||10===I?((1===b?qa:ra)(ya(D,0)),D.length=0):D.push(I)}g+=F}n[e>>2]=g;return 0},g:function(b,c,d,e){return db(b,c,d,e)}};\n(function(){function b(g){a.asm=g.exports;va=a.asm.n;g=va.buffer;a.HEAP8=Ba=new Int8Array(g);a.HEAP16=new Int16Array(g);a.HEAP32=n=new Int32Array(g);a.HEAPU8=Aa=new Uint8Array(g);a.HEAPU16=new Uint16Array(g);a.HEAPU32=new Uint32Array(g);a.HEAPF32=new Float32Array(g);a.HEAPF64=new Float64Array(g);q=a.asm.p;Ja--;a.monitorRunDependencies&&a.monitorRunDependencies(Ja);0==Ja&&(null!==Ka&&(clearInterval(Ka),Ka=null),La&&(g=La,La=null,g()))}function c(g){b(g.instance)}function d(g){return Qa().then(function(h){return WebAssembly.instantiate(h,\ne)}).then(g,function(h){ra(\"failed to asynchronously prepare wasm: \"+h);m(h)})}var e={a:jb};Ja++;a.monitorRunDependencies&&a.monitorRunDependencies(Ja);if(a.instantiateWasm)try{return a.instantiateWasm(e,b)}catch(g){return ra(\"Module.instantiateWasm callback failed with error: \"+g),!1}(function(){return ua||\"function\"!==typeof WebAssembly.instantiateStreaming||Na()||Ma(\"file://\")||\"function\"!==typeof fetch?d(c):fetch(r,{credentials:\"same-origin\"}).then(function(g){return WebAssembly.instantiateStreaming(g,\ne).then(c,function(h){ra(\"wasm streaming compile failed: \"+h);ra(\"falling back to ArrayBuffer instantiation\");return d(c)})})})().catch(ba);return{}})();var Ha=a.___wasm_call_ctors=function(){return(Ha=a.___wasm_call_ctors=a.asm.o).apply(null,arguments)},ib=a._malloc=function(){return(ib=a._malloc=a.asm.q).apply(null,arguments)};a._free=function(){return(a._free=a.asm.r).apply(null,arguments)};\nvar kb=a._emscripten_bind_VoidPtr___destroy___0=function(){return(kb=a._emscripten_bind_VoidPtr___destroy___0=a.asm.s).apply(null,arguments)},lb=a._emscripten_bind_HyperedgeImprover_HyperedgeImprover_0=function(){return(lb=a._emscripten_bind_HyperedgeImprover_HyperedgeImprover_0=a.asm.t).apply(null,arguments)},mb=a._emscripten_bind_HyperedgeImprover_clear_0=function(){return(mb=a._emscripten_bind_HyperedgeImprover_clear_0=a.asm.u).apply(null,arguments)},nb=a._emscripten_bind_HyperedgeImprover_setRouter_1=\nfunction(){return(nb=a._emscripten_bind_HyperedgeImprover_setRouter_1=a.asm.v).apply(null,arguments)},ob=a._emscripten_bind_HyperedgeImprover___destroy___0=function(){return(ob=a._emscripten_bind_HyperedgeImprover___destroy___0=a.asm.w).apply(null,arguments)},pb=a._emscripten_bind_Box_Box_0=function(){return(pb=a._emscripten_bind_Box_Box_0=a.asm.x).apply(null,arguments)},qb=a._emscripten_bind_Box_length_1=function(){return(qb=a._emscripten_bind_Box_length_1=a.asm.y).apply(null,arguments)},rb=a._emscripten_bind_Box_width_0=\nfunction(){return(rb=a._emscripten_bind_Box_width_0=a.asm.z).apply(null,arguments)},sb=a._emscripten_bind_Box_height_0=function(){return(sb=a._emscripten_bind_Box_height_0=a.asm.A).apply(null,arguments)},tb=a._emscripten_bind_Box_get_min_0=function(){return(tb=a._emscripten_bind_Box_get_min_0=a.asm.B).apply(null,arguments)},ub=a._emscripten_bind_Box_set_min_1=function(){return(ub=a._emscripten_bind_Box_set_min_1=a.asm.C).apply(null,arguments)},vb=a._emscripten_bind_Box_get_max_0=function(){return(vb=\na._emscripten_bind_Box_get_max_0=a.asm.D).apply(null,arguments)},wb=a._emscripten_bind_Box_set_max_1=function(){return(wb=a._emscripten_bind_Box_set_max_1=a.asm.E).apply(null,arguments)},xb=a._emscripten_bind_Box___destroy___0=function(){return(xb=a._emscripten_bind_Box___destroy___0=a.asm.F).apply(null,arguments)},yb=a._emscripten_bind_PolygonInterface_clear_0=function(){return(yb=a._emscripten_bind_PolygonInterface_clear_0=a.asm.G).apply(null,arguments)},zb=a._emscripten_bind_PolygonInterface_empty_0=\nfunction(){return(zb=a._emscripten_bind_PolygonInterface_empty_0=a.asm.H).apply(null,arguments)},Ab=a._emscripten_bind_PolygonInterface_size_0=function(){return(Ab=a._emscripten_bind_PolygonInterface_size_0=a.asm.I).apply(null,arguments)},Bb=a._emscripten_bind_PolygonInterface_id_0=function(){return(Bb=a._emscripten_bind_PolygonInterface_id_0=a.asm.J).apply(null,arguments)},Cb=a._emscripten_bind_PolygonInterface_at_1=function(){return(Cb=a._emscripten_bind_PolygonInterface_at_1=a.asm.K).apply(null,\narguments)},Db=a._emscripten_bind_PolygonInterface_boundingRectPolygon_0=function(){return(Db=a._emscripten_bind_PolygonInterface_boundingRectPolygon_0=a.asm.L).apply(null,arguments)},Eb=a._emscripten_bind_PolygonInterface_offsetBoundingBox_1=function(){return(Eb=a._emscripten_bind_PolygonInterface_offsetBoundingBox_1=a.asm.M).apply(null,arguments)},Fb=a._emscripten_bind_PolygonInterface_offsetPolygon_1=function(){return(Fb=a._emscripten_bind_PolygonInterface_offsetPolygon_1=a.asm.N).apply(null,arguments)},\nGb=a._emscripten_bind_PolygonInterface___destroy___0=function(){return(Gb=a._emscripten_bind_PolygonInterface___destroy___0=a.asm.O).apply(null,arguments)},Hb=a._emscripten_bind_Polygon_Polygon_0=function(){return(Hb=a._emscripten_bind_Polygon_Polygon_0=a.asm.P).apply(null,arguments)},Ib=a._emscripten_bind_Polygon_Polygon_1=function(){return(Ib=a._emscripten_bind_Polygon_Polygon_1=a.asm.Q).apply(null,arguments)},Jb=a._emscripten_bind_Polygon_setPoint_2=function(){return(Jb=a._emscripten_bind_Polygon_setPoint_2=\na.asm.R).apply(null,arguments)},Kb=a._emscripten_bind_Polygon_size_0=function(){return(Kb=a._emscripten_bind_Polygon_size_0=a.asm.S).apply(null,arguments)},Lb=a._emscripten_bind_Polygon_get_ps_1=function(){return(Lb=a._emscripten_bind_Polygon_get_ps_1=a.asm.T).apply(null,arguments)},Mb=a._emscripten_bind_Polygon_set_ps_2=function(){return(Mb=a._emscripten_bind_Polygon_set_ps_2=a.asm.U).apply(null,arguments)},Nb=a._emscripten_bind_Polygon___destroy___0=function(){return(Nb=a._emscripten_bind_Polygon___destroy___0=\na.asm.V).apply(null,arguments)},Ob=a._emscripten_bind_Point_Point_0=function(){return(Ob=a._emscripten_bind_Point_Point_0=a.asm.W).apply(null,arguments)},Pb=a._emscripten_bind_Point_Point_2=function(){return(Pb=a._emscripten_bind_Point_Point_2=a.asm.X).apply(null,arguments)},Qb=a._emscripten_bind_Point_equal_1=function(){return(Qb=a._emscripten_bind_Point_equal_1=a.asm.Y).apply(null,arguments)},Rb=a._emscripten_bind_Point_get_x_0=function(){return(Rb=a._emscripten_bind_Point_get_x_0=a.asm.Z).apply(null,\narguments)},Sb=a._emscripten_bind_Point_set_x_1=function(){return(Sb=a._emscripten_bind_Point_set_x_1=a.asm._).apply(null,arguments)},Tb=a._emscripten_bind_Point_get_y_0=function(){return(Tb=a._emscripten_bind_Point_get_y_0=a.asm.$).apply(null,arguments)},Ub=a._emscripten_bind_Point_set_y_1=function(){return(Ub=a._emscripten_bind_Point_set_y_1=a.asm.aa).apply(null,arguments)},Vb=a._emscripten_bind_Point_get_id_0=function(){return(Vb=a._emscripten_bind_Point_get_id_0=a.asm.ba).apply(null,arguments)},\nWb=a._emscripten_bind_Point_set_id_1=function(){return(Wb=a._emscripten_bind_Point_set_id_1=a.asm.ca).apply(null,arguments)},Xb=a._emscripten_bind_Point_get_vn_0=function(){return(Xb=a._emscripten_bind_Point_get_vn_0=a.asm.da).apply(null,arguments)},Yb=a._emscripten_bind_Point_set_vn_1=function(){return(Yb=a._emscripten_bind_Point_set_vn_1=a.asm.ea).apply(null,arguments)},Zb=a._emscripten_bind_Point___destroy___0=function(){return(Zb=a._emscripten_bind_Point___destroy___0=a.asm.fa).apply(null,arguments)},\n$b=a._emscripten_bind_Rectangle_Rectangle_3=function(){return($b=a._emscripten_bind_Rectangle_Rectangle_3=a.asm.ga).apply(null,arguments)},ac=a._emscripten_bind_Rectangle___destroy___0=function(){return(ac=a._emscripten_bind_Rectangle___destroy___0=a.asm.ha).apply(null,arguments)},bc=a._emscripten_bind_HyperedgeTreeNode_HyperedgeTreeNode_0=function(){return(bc=a._emscripten_bind_HyperedgeTreeNode_HyperedgeTreeNode_0=a.asm.ia).apply(null,arguments)},cc=a._emscripten_bind_HyperedgeTreeNode_writeEdgesToConns_2=\nfunction(){return(cc=a._emscripten_bind_HyperedgeTreeNode_writeEdgesToConns_2=a.asm.ja).apply(null,arguments)},dc=a._emscripten_bind_HyperedgeTreeNode___destroy___0=function(){return(dc=a._emscripten_bind_HyperedgeTreeNode___destroy___0=a.asm.ka).apply(null,arguments)},ec=a._emscripten_bind_HyperedgeTreeEdge_HyperedgeTreeEdge_3=function(){return(ec=a._emscripten_bind_HyperedgeTreeEdge_HyperedgeTreeEdge_3=a.asm.la).apply(null,arguments)},fc=a._emscripten_bind_HyperedgeTreeEdge___destroy___0=function(){return(fc=\na._emscripten_bind_HyperedgeTreeEdge___destroy___0=a.asm.ma).apply(null,arguments)},hc=a._emscripten_bind_AStarPath_AStarPath_0=function(){return(hc=a._emscripten_bind_AStarPath_AStarPath_0=a.asm.na).apply(null,arguments)},ic=a._emscripten_bind_AStarPath_search_4=function(){return(ic=a._emscripten_bind_AStarPath_search_4=a.asm.oa).apply(null,arguments)},jc=a._emscripten_bind_AStarPath___destroy___0=function(){return(jc=a._emscripten_bind_AStarPath___destroy___0=a.asm.pa).apply(null,arguments)},kc=\na._emscripten_bind_ConnEnd_ConnEnd_1=function(){return(kc=a._emscripten_bind_ConnEnd_ConnEnd_1=a.asm.qa).apply(null,arguments)},lc=a._emscripten_bind_ConnEnd_ConnEnd_2=function(){return(lc=a._emscripten_bind_ConnEnd_ConnEnd_2=a.asm.ra).apply(null,arguments)},mc=a._emscripten_bind_ConnEnd___destroy___0=function(){return(mc=a._emscripten_bind_ConnEnd___destroy___0=a.asm.sa).apply(null,arguments)},nc=a._emscripten_bind_ActionInfo_ActionInfo_2=function(){return(nc=a._emscripten_bind_ActionInfo_ActionInfo_2=\na.asm.ta).apply(null,arguments)},oc=a._emscripten_bind_ActionInfo_ActionInfo_3=function(){return(oc=a._emscripten_bind_ActionInfo_ActionInfo_3=a.asm.ua).apply(null,arguments)},pc=a._emscripten_bind_ActionInfo_ActionInfo_4=function(){return(pc=a._emscripten_bind_ActionInfo_ActionInfo_4=a.asm.va).apply(null,arguments)},qc=a._emscripten_bind_ActionInfo_obstacle_0=function(){return(qc=a._emscripten_bind_ActionInfo_obstacle_0=a.asm.wa).apply(null,arguments)},rc=a._emscripten_bind_ActionInfo_shape_0=function(){return(rc=\na._emscripten_bind_ActionInfo_shape_0=a.asm.xa).apply(null,arguments)},sc=a._emscripten_bind_ActionInfo_conn_0=function(){return(sc=a._emscripten_bind_ActionInfo_conn_0=a.asm.ya).apply(null,arguments)},tc=a._emscripten_bind_ActionInfo_junction_0=function(){return(tc=a._emscripten_bind_ActionInfo_junction_0=a.asm.za).apply(null,arguments)},uc=a._emscripten_bind_ActionInfo_addConnEndUpdate_3=function(){return(uc=a._emscripten_bind_ActionInfo_addConnEndUpdate_3=a.asm.Aa).apply(null,arguments)},vc=a._emscripten_bind_ActionInfo_get_type_0=\nfunction(){return(vc=a._emscripten_bind_ActionInfo_get_type_0=a.asm.Ba).apply(null,arguments)},wc=a._emscripten_bind_ActionInfo_set_type_1=function(){return(wc=a._emscripten_bind_ActionInfo_set_type_1=a.asm.Ca).apply(null,arguments)},xc=a._emscripten_bind_ActionInfo_get_objPtr_0=function(){return(xc=a._emscripten_bind_ActionInfo_get_objPtr_0=a.asm.Da).apply(null,arguments)},yc=a._emscripten_bind_ActionInfo_set_objPtr_1=function(){return(yc=a._emscripten_bind_ActionInfo_set_objPtr_1=a.asm.Ea).apply(null,\narguments)},zc=a._emscripten_bind_ActionInfo_get_newPoly_0=function(){return(zc=a._emscripten_bind_ActionInfo_get_newPoly_0=a.asm.Fa).apply(null,arguments)},Ac=a._emscripten_bind_ActionInfo_set_newPoly_1=function(){return(Ac=a._emscripten_bind_ActionInfo_set_newPoly_1=a.asm.Ga).apply(null,arguments)},Bc=a._emscripten_bind_ActionInfo_get_newPosition_0=function(){return(Bc=a._emscripten_bind_ActionInfo_get_newPosition_0=a.asm.Ha).apply(null,arguments)},Cc=a._emscripten_bind_ActionInfo_set_newPosition_1=\nfunction(){return(Cc=a._emscripten_bind_ActionInfo_set_newPosition_1=a.asm.Ia).apply(null,arguments)},Dc=a._emscripten_bind_ActionInfo_get_firstMove_0=function(){return(Dc=a._emscripten_bind_ActionInfo_get_firstMove_0=a.asm.Ja).apply(null,arguments)},Ec=a._emscripten_bind_ActionInfo_set_firstMove_1=function(){return(Ec=a._emscripten_bind_ActionInfo_set_firstMove_1=a.asm.Ka).apply(null,arguments)},Fc=a._emscripten_bind_ActionInfo___destroy___0=function(){return(Fc=a._emscripten_bind_ActionInfo___destroy___0=\na.asm.La).apply(null,arguments)},Gc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_2=function(){return(Gc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_2=a.asm.Ma).apply(null,arguments)},Hc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_3=function(){return(Hc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_3=a.asm.Na).apply(null,arguments)},Ic=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_6=function(){return(Ic=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_6=\na.asm.Oa).apply(null,arguments)},Jc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_7=function(){return(Jc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_7=a.asm.Pa).apply(null,arguments)},Kc=a._emscripten_bind_ShapeConnectionPin_setConnectionCost_1=function(){return(Kc=a._emscripten_bind_ShapeConnectionPin_setConnectionCost_1=a.asm.Qa).apply(null,arguments)},Lc=a._emscripten_bind_ShapeConnectionPin_position_0=function(){return(Lc=a._emscripten_bind_ShapeConnectionPin_position_0=\na.asm.Ra).apply(null,arguments)},Mc=a._emscripten_bind_ShapeConnectionPin_position_1=function(){return(Mc=a._emscripten_bind_ShapeConnectionPin_position_1=a.asm.Sa).apply(null,arguments)},Nc=a._emscripten_bind_ShapeConnectionPin_directions_0=function(){return(Nc=a._emscripten_bind_ShapeConnectionPin_directions_0=a.asm.Ta).apply(null,arguments)},Oc=a._emscripten_bind_ShapeConnectionPin_setExclusive_1=function(){return(Oc=a._emscripten_bind_ShapeConnectionPin_setExclusive_1=a.asm.Ua).apply(null,arguments)},\nPc=a._emscripten_bind_ShapeConnectionPin_isExclusive_0=function(){return(Pc=a._emscripten_bind_ShapeConnectionPin_isExclusive_0=a.asm.Va).apply(null,arguments)},Qc=a._emscripten_bind_ShapeConnectionPin___destroy___0=function(){return(Qc=a._emscripten_bind_ShapeConnectionPin___destroy___0=a.asm.Wa).apply(null,arguments)},Rc=a._emscripten_bind_Obstacle_id_0=function(){return(Rc=a._emscripten_bind_Obstacle_id_0=a.asm.Xa).apply(null,arguments)},Sc=a._emscripten_bind_Obstacle_polygon_0=function(){return(Sc=\na._emscripten_bind_Obstacle_polygon_0=a.asm.Ya).apply(null,arguments)},Tc=a._emscripten_bind_Obstacle_router_0=function(){return(Tc=a._emscripten_bind_Obstacle_router_0=a.asm.Za).apply(null,arguments)},Uc=a._emscripten_bind_Obstacle_position_0=function(){return(Uc=a._emscripten_bind_Obstacle_position_0=a.asm._a).apply(null,arguments)},Vc=a._emscripten_bind_Obstacle___destroy___0=function(){return(Vc=a._emscripten_bind_Obstacle___destroy___0=a.asm.$a).apply(null,arguments)},Wc=a._emscripten_bind_JunctionRef_JunctionRef_2=\nfunction(){return(Wc=a._emscripten_bind_JunctionRef_JunctionRef_2=a.asm.ab).apply(null,arguments)},Xc=a._emscripten_bind_JunctionRef_JunctionRef_3=function(){return(Xc=a._emscripten_bind_JunctionRef_JunctionRef_3=a.asm.bb).apply(null,arguments)},Yc=a._emscripten_bind_JunctionRef_position_0=function(){return(Yc=a._emscripten_bind_JunctionRef_position_0=a.asm.cb).apply(null,arguments)},Zc=a._emscripten_bind_JunctionRef___destroy___0=function(){return(Zc=a._emscripten_bind_JunctionRef___destroy___0=\na.asm.db).apply(null,arguments)},$c=a._emscripten_bind_ShapeRef_ShapeRef_2=function(){return($c=a._emscripten_bind_ShapeRef_ShapeRef_2=a.asm.eb).apply(null,arguments)},ad=a._emscripten_bind_ShapeRef_ShapeRef_3=function(){return(ad=a._emscripten_bind_ShapeRef_ShapeRef_3=a.asm.fb).apply(null,arguments)},bd=a._emscripten_bind_ShapeRef_polygon_0=function(){return(bd=a._emscripten_bind_ShapeRef_polygon_0=a.asm.gb).apply(null,arguments)},cd=a._emscripten_bind_ShapeRef_position_0=function(){return(cd=a._emscripten_bind_ShapeRef_position_0=\na.asm.hb).apply(null,arguments)},dd=a._emscripten_bind_ShapeRef___destroy___0=function(){return(dd=a._emscripten_bind_ShapeRef___destroy___0=a.asm.ib).apply(null,arguments)},ed=a._emscripten_bind_HyperedgeNewAndDeletedObjectLists___destroy___0=function(){return(ed=a._emscripten_bind_HyperedgeNewAndDeletedObjectLists___destroy___0=a.asm.jb).apply(null,arguments)},fd=a._emscripten_bind_HyperedgeRerouter_HyperedgeRerouter_0=function(){return(fd=a._emscripten_bind_HyperedgeRerouter_HyperedgeRerouter_0=\na.asm.kb).apply(null,arguments)},gd=a._emscripten_bind_HyperedgeRerouter_registerHyperedgeForRerouting_1=function(){return(gd=a._emscripten_bind_HyperedgeRerouter_registerHyperedgeForRerouting_1=a.asm.lb).apply(null,arguments)},hd=a._emscripten_bind_HyperedgeRerouter___destroy___0=function(){return(hd=a._emscripten_bind_HyperedgeRerouter___destroy___0=a.asm.mb).apply(null,arguments)},id=a._emscripten_bind_VertInf___destroy___0=function(){return(id=a._emscripten_bind_VertInf___destroy___0=a.asm.nb).apply(null,\narguments)},jd=a._emscripten_bind_VertID_VertID_0=function(){return(jd=a._emscripten_bind_VertID_VertID_0=a.asm.ob).apply(null,arguments)},kd=a._emscripten_bind_VertID_VertID_2=function(){return(kd=a._emscripten_bind_VertID_VertID_2=a.asm.pb).apply(null,arguments)},ld=a._emscripten_bind_VertID_VertID_3=function(){return(ld=a._emscripten_bind_VertID_VertID_3=a.asm.qb).apply(null,arguments)},md=a._emscripten_bind_VertID_get_objID_0=function(){return(md=a._emscripten_bind_VertID_get_objID_0=a.asm.rb).apply(null,\narguments)},nd=a._emscripten_bind_VertID_set_objID_1=function(){return(nd=a._emscripten_bind_VertID_set_objID_1=a.asm.sb).apply(null,arguments)},od=a._emscripten_bind_VertID_get_vn_0=function(){return(od=a._emscripten_bind_VertID_get_vn_0=a.asm.tb).apply(null,arguments)},pd=a._emscripten_bind_VertID_set_vn_1=function(){return(pd=a._emscripten_bind_VertID_set_vn_1=a.asm.ub).apply(null,arguments)},qd=a._emscripten_bind_VertID_get_props_0=function(){return(qd=a._emscripten_bind_VertID_get_props_0=a.asm.vb).apply(null,\narguments)},rd=a._emscripten_bind_VertID_set_props_1=function(){return(rd=a._emscripten_bind_VertID_set_props_1=a.asm.wb).apply(null,arguments)},sd=a._emscripten_bind_VertID_get_src_0=function(){return(sd=a._emscripten_bind_VertID_get_src_0=a.asm.xb).apply(null,arguments)},td=a._emscripten_bind_VertID_get_tar_0=function(){return(td=a._emscripten_bind_VertID_get_tar_0=a.asm.yb).apply(null,arguments)},ud=a._emscripten_bind_VertID_get_PROP_ConnPoint_0=function(){return(ud=a._emscripten_bind_VertID_get_PROP_ConnPoint_0=\na.asm.zb).apply(null,arguments)},vd=a._emscripten_bind_VertID_get_PROP_OrthShapeEdge_0=function(){return(vd=a._emscripten_bind_VertID_get_PROP_OrthShapeEdge_0=a.asm.Ab).apply(null,arguments)},wd=a._emscripten_bind_VertID_get_PROP_ConnectionPin_0=function(){return(wd=a._emscripten_bind_VertID_get_PROP_ConnectionPin_0=a.asm.Bb).apply(null,arguments)},xd=a._emscripten_bind_VertID_get_PROP_ConnCheckpoint_0=function(){return(xd=a._emscripten_bind_VertID_get_PROP_ConnCheckpoint_0=a.asm.Cb).apply(null,arguments)},\nyd=a._emscripten_bind_VertID_get_PROP_DummyPinHelper_0=function(){return(yd=a._emscripten_bind_VertID_get_PROP_DummyPinHelper_0=a.asm.Db).apply(null,arguments)},zd=a._emscripten_bind_VertID___destroy___0=function(){return(zd=a._emscripten_bind_VertID___destroy___0=a.asm.Eb).apply(null,arguments)},Ad=a._emscripten_bind_MinimumTerminalSpanningTree___destroy___0=function(){return(Ad=a._emscripten_bind_MinimumTerminalSpanningTree___destroy___0=a.asm.Fb).apply(null,arguments)},Bd=a._emscripten_bind_Checkpoint_Checkpoint_1=\nfunction(){return(Bd=a._emscripten_bind_Checkpoint_Checkpoint_1=a.asm.Gb).apply(null,arguments)},Cd=a._emscripten_bind_Checkpoint___destroy___0=function(){return(Cd=a._emscripten_bind_Checkpoint___destroy___0=a.asm.Hb).apply(null,arguments)},Dd=a._emscripten_bind_ConnRef_ConnRef_3=function(){return(Dd=a._emscripten_bind_ConnRef_ConnRef_3=a.asm.Ib).apply(null,arguments)},Ed=a._emscripten_bind_ConnRef_ConnRef_4=function(){return(Ed=a._emscripten_bind_ConnRef_ConnRef_4=a.asm.Jb).apply(null,arguments)},\nFd=a._emscripten_bind_ConnRef_id_0=function(){return(Fd=a._emscripten_bind_ConnRef_id_0=a.asm.Kb).apply(null,arguments)},Gd=a._emscripten_bind_ConnRef_setCallback_2=function(){return(Gd=a._emscripten_bind_ConnRef_setCallback_2=a.asm.Lb).apply(null,arguments)},Hd=a._emscripten_bind_ConnRef_setSourceEndpoint_1=function(){return(Hd=a._emscripten_bind_ConnRef_setSourceEndpoint_1=a.asm.Mb).apply(null,arguments)},Id=a._emscripten_bind_ConnRef_setDestEndpoint_1=function(){return(Id=a._emscripten_bind_ConnRef_setDestEndpoint_1=\na.asm.Nb).apply(null,arguments)},Jd=a._emscripten_bind_ConnRef_routingType_0=function(){return(Jd=a._emscripten_bind_ConnRef_routingType_0=a.asm.Ob).apply(null,arguments)},Kd=a._emscripten_bind_ConnRef_setRoutingType_1=function(){return(Kd=a._emscripten_bind_ConnRef_setRoutingType_1=a.asm.Pb).apply(null,arguments)},Ld=a._emscripten_bind_ConnRef_displayRoute_0=function(){return(Ld=a._emscripten_bind_ConnRef_displayRoute_0=a.asm.Qb).apply(null,arguments)},Md=a._emscripten_bind_ConnRef___destroy___0=\nfunction(){return(Md=a._emscripten_bind_ConnRef___destroy___0=a.asm.Rb).apply(null,arguments)},Nd=a._emscripten_bind_EdgeInf_EdgeInf_2=function(){return(Nd=a._emscripten_bind_EdgeInf_EdgeInf_2=a.asm.Sb).apply(null,arguments)},Od=a._emscripten_bind_EdgeInf_EdgeInf_3=function(){return(Od=a._emscripten_bind_EdgeInf_EdgeInf_3=a.asm.Tb).apply(null,arguments)},Pd=a._emscripten_bind_EdgeInf___destroy___0=function(){return(Pd=a._emscripten_bind_EdgeInf___destroy___0=a.asm.Ub).apply(null,arguments)},Qd=a._emscripten_bind_LineRep_get_begin_0=\nfunction(){return(Qd=a._emscripten_bind_LineRep_get_begin_0=a.asm.Vb).apply(null,arguments)},Rd=a._emscripten_bind_LineRep_set_begin_1=function(){return(Rd=a._emscripten_bind_LineRep_set_begin_1=a.asm.Wb).apply(null,arguments)},Sd=a._emscripten_bind_LineRep_get_end_0=function(){return(Sd=a._emscripten_bind_LineRep_get_end_0=a.asm.Xb).apply(null,arguments)},Td=a._emscripten_bind_LineRep_set_end_1=function(){return(Td=a._emscripten_bind_LineRep_set_end_1=a.asm.Yb).apply(null,arguments)},Ud=a._emscripten_bind_LineRep___destroy___0=\nfunction(){return(Ud=a._emscripten_bind_LineRep___destroy___0=a.asm.Zb).apply(null,arguments)},Vd=a._emscripten_bind_Router_Router_1=function(){return(Vd=a._emscripten_bind_Router_Router_1=a.asm._b).apply(null,arguments)},Wd=a._emscripten_bind_Router_processTransaction_0=function(){return(Wd=a._emscripten_bind_Router_processTransaction_0=a.asm.$b).apply(null,arguments)},Xd=a._emscripten_bind_Router_printInfo_0=function(){return(Xd=a._emscripten_bind_Router_printInfo_0=a.asm.ac).apply(null,arguments)},\nYd=a._emscripten_bind_Router_deleteConnector_1=function(){return(Yd=a._emscripten_bind_Router_deleteConnector_1=a.asm.bc).apply(null,arguments)},Zd=a._emscripten_bind_Router_moveShape_3=function(){return(Zd=a._emscripten_bind_Router_moveShape_3=a.asm.cc).apply(null,arguments)},$d=a._emscripten_bind_Router___destroy___0=function(){return($d=a._emscripten_bind_Router___destroy___0=a.asm.dc).apply(null,arguments)},ae=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirNone=function(){return(ae=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirNone=\na.asm.ec).apply(null,arguments)},be=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirUp=function(){return(be=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirUp=a.asm.fc).apply(null,arguments)},ce=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirDown=function(){return(ce=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirDown=a.asm.gc).apply(null,arguments)},de=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirLeft=function(){return(de=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirLeft=a.asm.hc).apply(null,arguments)},ee=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirRight=\nfunction(){return(ee=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirRight=a.asm.ic).apply(null,arguments)},fe=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirAll=function(){return(fe=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirAll=a.asm.jc).apply(null,arguments)},ge=a._emscripten_enum_Avoid_ConnEndType_ConnEndPoint=function(){return(ge=a._emscripten_enum_Avoid_ConnEndType_ConnEndPoint=a.asm.kc).apply(null,arguments)},he=a._emscripten_enum_Avoid_ConnEndType_ConnEndShapePin=function(){return(he=a._emscripten_enum_Avoid_ConnEndType_ConnEndShapePin=\na.asm.lc).apply(null,arguments)},ie=a._emscripten_enum_Avoid_ConnEndType_ConnEndJunction=function(){return(ie=a._emscripten_enum_Avoid_ConnEndType_ConnEndJunction=a.asm.mc).apply(null,arguments)},je=a._emscripten_enum_Avoid_ConnEndType_ConnEndEmpty=function(){return(je=a._emscripten_enum_Avoid_ConnEndType_ConnEndEmpty=a.asm.nc).apply(null,arguments)},ke=a._emscripten_enum_Avoid_ActionType_ShapeMove=function(){return(ke=a._emscripten_enum_Avoid_ActionType_ShapeMove=a.asm.oc).apply(null,arguments)},\nle=a._emscripten_enum_Avoid_ActionType_ShapeAdd=function(){return(le=a._emscripten_enum_Avoid_ActionType_ShapeAdd=a.asm.pc).apply(null,arguments)},me=a._emscripten_enum_Avoid_ActionType_ShapeRemove=function(){return(me=a._emscripten_enum_Avoid_ActionType_ShapeRemove=a.asm.qc).apply(null,arguments)},ne=a._emscripten_enum_Avoid_ActionType_JunctionMove=function(){return(ne=a._emscripten_enum_Avoid_ActionType_JunctionMove=a.asm.rc).apply(null,arguments)},oe=a._emscripten_enum_Avoid_ActionType_JunctionAdd=\nfunction(){return(oe=a._emscripten_enum_Avoid_ActionType_JunctionAdd=a.asm.sc).apply(null,arguments)},pe=a._emscripten_enum_Avoid_ActionType_JunctionRemove=function(){return(pe=a._emscripten_enum_Avoid_ActionType_JunctionRemove=a.asm.tc).apply(null,arguments)},qe=a._emscripten_enum_Avoid_ActionType_ConnChange=function(){return(qe=a._emscripten_enum_Avoid_ActionType_ConnChange=a.asm.uc).apply(null,arguments)},re=a._emscripten_enum_Avoid_ActionType_ConnectionPinChange=function(){return(re=a._emscripten_enum_Avoid_ActionType_ConnectionPinChange=\na.asm.vc).apply(null,arguments)},se=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW90=function(){return(se=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW90=a.asm.wc).apply(null,arguments)},te=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW180=function(){return(te=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW180=a.asm.xc).apply(null,arguments)},ue=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW270=\nfunction(){return(ue=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW270=a.asm.yc).apply(null,arguments)},ve=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipX=function(){return(ve=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipX=a.asm.zc).apply(null,arguments)},we=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipY=function(){return(we=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipY=\na.asm.Ac).apply(null,arguments)},xe=a._emscripten_enum_Avoid_ConnType_ConnType_None=function(){return(xe=a._emscripten_enum_Avoid_ConnType_ConnType_None=a.asm.Bc).apply(null,arguments)},ye=a._emscripten_enum_Avoid_ConnType_ConnType_PolyLine=function(){return(ye=a._emscripten_enum_Avoid_ConnType_ConnType_PolyLine=a.asm.Cc).apply(null,arguments)},ze=a._emscripten_enum_Avoid_ConnType_ConnType_Orthogonal=function(){return(ze=a._emscripten_enum_Avoid_ConnType_ConnType_Orthogonal=a.asm.Dc).apply(null,arguments)},\nAe=a._emscripten_enum_Avoid_RouterFlag_PolyLineRouting=function(){return(Ae=a._emscripten_enum_Avoid_RouterFlag_PolyLineRouting=a.asm.Ec).apply(null,arguments)},Be=a._emscripten_enum_Avoid_RouterFlag_OrthogonalRouting=function(){return(Be=a._emscripten_enum_Avoid_RouterFlag_OrthogonalRouting=a.asm.Fc).apply(null,arguments)},Ce;La=function De(){Ce||Ee();Ce||(La=De)};\nfunction Ee(){function b(){if(!Ce&&(Ce=!0,a.calledRun=!0,!wa)){Ga=!0;Ra(Da);Ra(Ea);aa(a);if(a.onRuntimeInitialized)a.onRuntimeInitialized();if(a.postRun)for(\"function\"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var c=a.postRun.shift();Fa.unshift(c)}Ra(Fa)}}if(!(0<Ja)){if(a.preRun)for(\"function\"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)Ia();Ra(Ca);0<Ja||(a.setStatus?(a.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){a.setStatus(\"\")},1);b()},1)):\nb())}}a.run=Ee;if(a.preInit)for(\"function\"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();Ee();function u(){}u.prototype=Object.create(u.prototype);u.prototype.constructor=u;u.prototype.Hc=u;u.Ic={};a.WrapperObject=u;function v(b){return(b||u).Ic}a.getCache=v;function w(b,c){var d=v(c),e=d[b];if(e)return e;e=Object.create((c||u).prototype);e.Gc=b;return d[b]=e}a.wrapPointer=w;a.castObject=function(b,c){return w(b.Gc,c)};a.NULL=w(0);\na.destroy=function(b){if(!b.__destroy__)throw\"Error: Cannot destroy object. (Did you create it yourself?)\";b.__destroy__();delete v(b.Hc)[b.Gc]};a.compare=function(b,c){return b.Gc===c.Gc};a.getPointer=function(b){return b.Gc};a.getClass=function(b){return b.Hc};var Fe=0,Ge=0,He=[],Ie=0;function x(){throw\"cannot construct a VoidPtr, no constructor in IDL\";}x.prototype=Object.create(u.prototype);x.prototype.constructor=x;x.prototype.Hc=x;x.Ic={};a.VoidPtr=x;x.prototype.__destroy__=function(){kb(this.Gc)};\nfunction z(){this.Gc=lb();v(z)[this.Gc]=this}z.prototype=Object.create(u.prototype);z.prototype.constructor=z;z.prototype.Hc=z;z.Ic={};a.HyperedgeImprover=z;z.prototype.clear=z.prototype.clear=function(){mb(this.Gc)};z.prototype.setRouter=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);nb(c,b)};z.prototype.__destroy__=function(){ob(this.Gc)};function A(){this.Gc=pb();v(A)[this.Gc]=this}A.prototype=Object.create(u.prototype);A.prototype.constructor=A;A.prototype.Hc=A;A.Ic={};a.Box=A;\nA.prototype.length=A.prototype.length=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return qb(c,b)};A.prototype.width=A.prototype.width=function(){return rb(this.Gc)};A.prototype.height=A.prototype.height=function(){return sb(this.Gc)};A.prototype.get_min=A.prototype.ed=function(){return w(tb(this.Gc),B)};A.prototype.set_min=A.prototype.zd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);ub(c,b)};Object.defineProperty(A.prototype,\"min\",{get:A.prototype.ed,set:A.prototype.zd});\nA.prototype.get_max=A.prototype.dd=function(){return w(vb(this.Gc),B)};A.prototype.set_max=A.prototype.yd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);wb(c,b)};Object.defineProperty(A.prototype,\"max\",{get:A.prototype.dd,set:A.prototype.yd});A.prototype.__destroy__=function(){xb(this.Gc)};function C(){throw\"cannot construct a PolygonInterface, no constructor in IDL\";}C.prototype=Object.create(u.prototype);C.prototype.constructor=C;C.prototype.Hc=C;C.Ic={};a.PolygonInterface=C;\nC.prototype.clear=C.prototype.clear=function(){yb(this.Gc)};C.prototype.empty=C.prototype.empty=function(){return!!zb(this.Gc)};C.prototype.size=C.prototype.size=function(){return Ab(this.Gc)};C.prototype.id=C.prototype.id=function(){return Bb(this.Gc)};C.prototype.at=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return w(Cb(c,b),B)};C.prototype.boundingRectPolygon=function(){return w(Db(this.Gc),E)};\nC.prototype.offsetBoundingBox=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return w(Eb(c,b),A)};C.prototype.offsetPolygon=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return w(Fb(c,b),E)};C.prototype.__destroy__=function(){Gb(this.Gc)};function E(b){b&&\"object\"===typeof b&&(b=b.Gc);this.Gc=void 0===b?Hb():Ib(b);v(E)[this.Gc]=this}E.prototype=Object.create(u.prototype);E.prototype.constructor=E;E.prototype.Hc=E;E.Ic={};a.Polygon=E;\nE.prototype.setPoint=function(b,c){var d=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);Jb(d,b,c)};E.prototype.size=E.prototype.size=function(){return Kb(this.Gc)};E.prototype.get_ps=E.prototype.md=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return w(Lb(c,b),B)};\nE.prototype.set_ps=E.prototype.Fd=function(b,c){var d=this.Gc;if(Ie){for(var e=0;e<He.length;e++)a._free(He[e]);He.length=0;a._free(Fe);Fe=0;Ge+=Ie;Ie=0}Fe||(Ge+=128,Fe=a._malloc(Ge),assert(Fe));b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);Mb(d,b,c)};Object.defineProperty(E.prototype,\"ps\",{get:E.prototype.md,set:E.prototype.Fd});E.prototype.__destroy__=function(){Nb(this.Gc)};\nfunction B(b,c){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);this.Gc=void 0===b?Ob():void 0===c?_emscripten_bind_Point_Point_1(b):Pb(b,c);v(B)[this.Gc]=this}B.prototype=Object.create(u.prototype);B.prototype.constructor=B;B.prototype.Hc=B;B.Ic={};a.Point=B;B.prototype.equal=B.prototype.equal=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return!!Qb(c,b)};B.prototype.get_x=B.prototype.pd=function(){return Rb(this.Gc)};\nB.prototype.set_x=B.prototype.Id=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Sb(c,b)};Object.defineProperty(B.prototype,\"x\",{get:B.prototype.pd,set:B.prototype.Id});B.prototype.get_y=B.prototype.qd=function(){return Tb(this.Gc)};B.prototype.set_y=B.prototype.Jd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Ub(c,b)};Object.defineProperty(B.prototype,\"y\",{get:B.prototype.qd,set:B.prototype.Jd});B.prototype.get_id=B.prototype.cd=function(){return Vb(this.Gc)};\nB.prototype.set_id=B.prototype.xd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Wb(c,b)};Object.defineProperty(B.prototype,\"id\",{get:B.prototype.cd,set:B.prototype.xd});B.prototype.get_vn=B.prototype.Qc=function(){return Xb(this.Gc)};B.prototype.set_vn=B.prototype.Sc=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Yb(c,b)};Object.defineProperty(B.prototype,\"vn\",{get:B.prototype.Qc,set:B.prototype.Sc});B.prototype.__destroy__=function(){Zb(this.Gc)};\nfunction G(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=$b(b,c,d);v(G)[this.Gc]=this}G.prototype=Object.create(u.prototype);G.prototype.constructor=G;G.prototype.Hc=G;G.Ic={};a.Rectangle=G;G.prototype.__destroy__=function(){ac(this.Gc)};function H(){this.Gc=bc();v(H)[this.Gc]=this}H.prototype=Object.create(u.prototype);H.prototype.constructor=H;H.prototype.Hc=H;H.Ic={};a.HyperedgeTreeNode=H;\nH.prototype.writeEdgesToConns=function(b,c){var d=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);cc(d,b,c)};H.prototype.__destroy__=function(){dc(this.Gc)};function J(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=ec(b,c,d);v(J)[this.Gc]=this}J.prototype=Object.create(u.prototype);J.prototype.constructor=J;J.prototype.Hc=J;J.Ic={};a.HyperedgeTreeEdge=J;J.prototype.__destroy__=function(){fc(this.Gc)};\nfunction K(){this.Gc=hc();v(K)[this.Gc]=this}K.prototype=Object.create(u.prototype);K.prototype.constructor=K;K.prototype.Hc=K;K.Ic={};a.AStarPath=K;K.prototype.search=K.prototype.search=function(b,c,d,e){var g=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);e&&\"object\"===typeof e&&(e=e.Gc);ic(g,b,c,d,e)};K.prototype.__destroy__=function(){jc(this.Gc)};\nfunction L(b,c){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);this.Gc=void 0===c?kc(b):lc(b,c);v(L)[this.Gc]=this}L.prototype=Object.create(u.prototype);L.prototype.constructor=L;L.prototype.Hc=L;L.Ic={};a.ConnEnd=L;L.prototype.__destroy__=function(){mc(this.Gc)};\nfunction M(b,c,d,e){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);e&&\"object\"===typeof e&&(e=e.Gc);this.Gc=void 0===d?nc(b,c):void 0===e?oc(b,c,d):pc(b,c,d,e);v(M)[this.Gc]=this}M.prototype=Object.create(u.prototype);M.prototype.constructor=M;M.prototype.Hc=M;M.Ic={};a.ActionInfo=M;M.prototype.obstacle=function(){return w(qc(this.Gc),N)};M.prototype.shape=M.prototype.shape=function(){return w(rc(this.Gc),O)};\nM.prototype.conn=function(){return w(sc(this.Gc),P)};M.prototype.junction=function(){return w(tc(this.Gc),Q)};M.prototype.addConnEndUpdate=function(b,c,d){var e=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);uc(e,b,c,d)};M.prototype.get_type=M.prototype.Tc=function(){return vc(this.Gc)};M.prototype.set_type=M.prototype.Rc=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);wc(c,b)};\nObject.defineProperty(M.prototype,\"type\",{get:M.prototype.Tc,set:M.prototype.Rc});M.prototype.get_objPtr=M.prototype.kd=function(){return w(xc(this.Gc),x)};M.prototype.set_objPtr=M.prototype.Dd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);yc(c,b)};Object.defineProperty(M.prototype,\"objPtr\",{get:M.prototype.kd,set:M.prototype.Dd});M.prototype.get_newPoly=M.prototype.gd=function(){return w(zc(this.Gc),E)};\nM.prototype.set_newPoly=M.prototype.Ad=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Ac(c,b)};Object.defineProperty(M.prototype,\"newPoly\",{get:M.prototype.gd,set:M.prototype.Ad});M.prototype.get_newPosition=M.prototype.hd=function(){return w(Bc(this.Gc),B)};M.prototype.set_newPosition=M.prototype.Bd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Cc(c,b)};Object.defineProperty(M.prototype,\"newPosition\",{get:M.prototype.hd,set:M.prototype.Bd});\nM.prototype.get_firstMove=M.prototype.bd=function(){return!!Dc(this.Gc)};M.prototype.set_firstMove=M.prototype.wd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Ec(c,b)};Object.defineProperty(M.prototype,\"firstMove\",{get:M.prototype.bd,set:M.prototype.wd});M.prototype.__destroy__=function(){Fc(this.Gc)};\nfunction R(b,c,d,e,g,h,t){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);e&&\"object\"===typeof e&&(e=e.Gc);g&&\"object\"===typeof g&&(g=g.Gc);h&&\"object\"===typeof h&&(h=h.Gc);t&&\"object\"===typeof t&&(t=t.Gc);this.Gc=void 0===d?Gc(b,c):void 0===e?Hc(b,c,d):void 0===g?_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_4(b,c,d,e):void 0===h?_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_5(b,c,d,e,g):void 0===t?Ic(b,c,d,e,g,h):Jc(b,c,d,e,g,\nh,t);v(R)[this.Gc]=this}R.prototype=Object.create(u.prototype);R.prototype.constructor=R;R.prototype.Hc=R;R.Ic={};a.ShapeConnectionPin=R;R.prototype.setConnectionCost=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Kc(c,b)};R.prototype.position=R.prototype.position=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return void 0===b?w(Lc(c),B):w(Mc(c,b),B)};R.prototype.directions=function(){return Nc(this.Gc)};\nR.prototype.setExclusive=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Oc(c,b)};R.prototype.isExclusive=function(){return!!Pc(this.Gc)};R.prototype.__destroy__=function(){Qc(this.Gc)};function N(){throw\"cannot construct a Obstacle, no constructor in IDL\";}N.prototype=Object.create(u.prototype);N.prototype.constructor=N;N.prototype.Hc=N;N.Ic={};a.Obstacle=N;N.prototype.id=N.prototype.id=function(){return Rc(this.Gc)};N.prototype.polygon=function(){return w(Sc(this.Gc),E)};\nN.prototype.router=function(){return w(Tc(this.Gc),S)};N.prototype.position=N.prototype.position=function(){return w(Uc(this.Gc),B)};N.prototype.__destroy__=function(){Vc(this.Gc)};function Q(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=void 0===d?Wc(b,c):Xc(b,c,d);v(Q)[this.Gc]=this}Q.prototype=Object.create(u.prototype);Q.prototype.constructor=Q;Q.prototype.Hc=Q;Q.Ic={};a.JunctionRef=Q;\nQ.prototype.position=Q.prototype.position=function(){return w(Yc(this.Gc),B)};Q.prototype.__destroy__=function(){Zc(this.Gc)};function O(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=void 0===d?$c(b,c):ad(b,c,d);v(O)[this.Gc]=this}O.prototype=Object.create(u.prototype);O.prototype.constructor=O;O.prototype.Hc=O;O.Ic={};a.ShapeRef=O;O.prototype.polygon=function(){return w(bd(this.Gc),E)};\nO.prototype.position=O.prototype.position=function(){return w(cd(this.Gc),B)};O.prototype.__destroy__=function(){dd(this.Gc)};function T(){throw\"cannot construct a HyperedgeNewAndDeletedObjectLists, no constructor in IDL\";}T.prototype=Object.create(u.prototype);T.prototype.constructor=T;T.prototype.Hc=T;T.Ic={};a.HyperedgeNewAndDeletedObjectLists=T;T.prototype.__destroy__=function(){ed(this.Gc)};function U(){this.Gc=fd();v(U)[this.Gc]=this}U.prototype=Object.create(u.prototype);\nU.prototype.constructor=U;U.prototype.Hc=U;U.Ic={};a.HyperedgeRerouter=U;U.prototype.registerHyperedgeForRerouting=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return gd(c,b)};U.prototype.__destroy__=function(){hd(this.Gc)};function V(){throw\"cannot construct a VertInf, no constructor in IDL\";}V.prototype=Object.create(u.prototype);V.prototype.constructor=V;V.prototype.Hc=V;V.Ic={};a.VertInf=V;V.prototype.__destroy__=function(){id(this.Gc)};\nfunction W(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=void 0===b?jd():void 0===c?_emscripten_bind_VertID_VertID_1(b):void 0===d?kd(b,c):ld(b,c,d);v(W)[this.Gc]=this}W.prototype=Object.create(u.prototype);W.prototype.constructor=W;W.prototype.Hc=W;W.Ic={};a.VertID=W;W.prototype.get_objID=W.prototype.jd=function(){return md(this.Gc)};\nW.prototype.set_objID=W.prototype.Cd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);nd(c,b)};Object.defineProperty(W.prototype,\"objID\",{get:W.prototype.jd,set:W.prototype.Cd});W.prototype.get_vn=W.prototype.Qc=function(){return od(this.Gc)};W.prototype.set_vn=W.prototype.Sc=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);pd(c,b)};Object.defineProperty(W.prototype,\"vn\",{get:W.prototype.Qc,set:W.prototype.Sc});W.prototype.get_props=W.prototype.ld=function(){return qd(this.Gc)};\nW.prototype.set_props=W.prototype.Ed=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);rd(c,b)};Object.defineProperty(W.prototype,\"props\",{get:W.prototype.ld,set:W.prototype.Ed});W.prototype.get_src=W.prototype.nd=function(){return sd(this.Gc)};Object.defineProperty(W.prototype,\"src\",{get:W.prototype.nd});W.prototype.get_tar=W.prototype.od=function(){return td(this.Gc)};Object.defineProperty(W.prototype,\"tar\",{get:W.prototype.od});W.prototype.get_PROP_ConnPoint=W.prototype.Wc=function(){return ud(this.Gc)};\nObject.defineProperty(W.prototype,\"PROP_ConnPoint\",{get:W.prototype.Wc});W.prototype.get_PROP_OrthShapeEdge=W.prototype.Zc=function(){return vd(this.Gc)};Object.defineProperty(W.prototype,\"PROP_OrthShapeEdge\",{get:W.prototype.Zc});W.prototype.get_PROP_ConnectionPin=W.prototype.Xc=function(){return wd(this.Gc)};Object.defineProperty(W.prototype,\"PROP_ConnectionPin\",{get:W.prototype.Xc});W.prototype.get_PROP_ConnCheckpoint=W.prototype.Vc=function(){return xd(this.Gc)};\nObject.defineProperty(W.prototype,\"PROP_ConnCheckpoint\",{get:W.prototype.Vc});W.prototype.get_PROP_DummyPinHelper=W.prototype.Yc=function(){return yd(this.Gc)};Object.defineProperty(W.prototype,\"PROP_DummyPinHelper\",{get:W.prototype.Yc});W.prototype.__destroy__=function(){zd(this.Gc)};function Je(){throw\"cannot construct a MinimumTerminalSpanningTree, no constructor in IDL\";}Je.prototype=Object.create(u.prototype);Je.prototype.constructor=Je;Je.prototype.Hc=Je;Je.Ic={};\na.MinimumTerminalSpanningTree=Je;Je.prototype.__destroy__=function(){Ad(this.Gc)};function X(b){b&&\"object\"===typeof b&&(b=b.Gc);this.Gc=Bd(b);v(X)[this.Gc]=this}X.prototype=Object.create(u.prototype);X.prototype.constructor=X;X.prototype.Hc=X;X.Ic={};a.Checkpoint=X;X.prototype.__destroy__=function(){Cd(this.Gc)};\nfunction P(b,c,d,e){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);e&&\"object\"===typeof e&&(e=e.Gc);this.Gc=void 0===e?Dd(b,c,d):Ed(b,c,d,e);v(P)[this.Gc]=this}P.prototype=Object.create(u.prototype);P.prototype.constructor=P;P.prototype.Hc=P;P.Ic={};a.ConnRef=P;P.prototype.id=P.prototype.id=function(){return Fd(this.Gc)};\nP.prototype.setCallback=function(b,c){var d=this.Gc;assert(b instanceof Function,\"Expecting function\");if(!ta){ta=new WeakMap;for(var e=0;e<q.length;e++){var g=q.get(e);g&&ta.set(g,e)}}if(ta.has(b))b=ta.get(b);else{if(sa.length)e=sa.pop();else{try{q.grow(1)}catch(F){if(!(F instanceof RangeError))throw F;throw\"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.\";}e=q.length-1}try{q.set(e,b)}catch(F){if(!(F instanceof TypeError))throw F;if(\"function\"===typeof WebAssembly.Function){var h={i:\"i32\",j:\"i64\",\nf:\"f32\",d:\"f64\"},t={parameters:[],results:[]};for(g=1;2>g;++g)t.parameters.push(h[\"vi\"[g]]);g=new WebAssembly.Function(t,b)}else{h=[1,0,1,96];t={i:127,j:126,f:125,d:124};h.push(1);for(g=0;1>g;++g)h.push(t[\"i\"[g]]);h.push(0);h[1]=h.length-2;g=new Uint8Array([0,97,115,109,1,0,0,0].concat(h,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0]));g=new WebAssembly.Module(g);g=(new WebAssembly.Instance(g,{e:{f:b}})).exports.f}q.set(e,g)}ta.set(b,e);b=e}c&&\"object\"===typeof c&&(c=c.Gc);Gd(d,b,c)};\nP.prototype.setSourceEndpoint=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Hd(c,b)};P.prototype.setDestEndpoint=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Id(c,b)};P.prototype.routingType=function(){return Jd(this.Gc)};P.prototype.setRoutingType=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Kd(c,b)};P.prototype.displayRoute=function(){return w(Ld(this.Gc),E)};P.prototype.__destroy__=function(){Md(this.Gc)};\nfunction Y(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=void 0===d?Nd(b,c):Od(b,c,d);v(Y)[this.Gc]=this}Y.prototype=Object.create(u.prototype);Y.prototype.constructor=Y;Y.prototype.Hc=Y;Y.Ic={};a.EdgeInf=Y;Y.prototype.__destroy__=function(){Pd(this.Gc)};function Z(){throw\"cannot construct a LineRep, no constructor in IDL\";}Z.prototype=Object.create(u.prototype);Z.prototype.constructor=Z;Z.prototype.Hc=Z;Z.Ic={};a.LineRep=Z;\nZ.prototype.get_begin=Z.prototype.$c=function(){return w(Qd(this.Gc),B)};Z.prototype.set_begin=Z.prototype.sd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Rd(c,b)};Object.defineProperty(Z.prototype,\"begin\",{get:Z.prototype.$c,set:Z.prototype.sd});Z.prototype.get_end=Z.prototype.ad=function(){return w(Sd(this.Gc),B)};Z.prototype.set_end=Z.prototype.vd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Td(c,b)};Object.defineProperty(Z.prototype,\"end\",{get:Z.prototype.ad,set:Z.prototype.vd});\nZ.prototype.__destroy__=function(){Ud(this.Gc)};function S(b){b&&\"object\"===typeof b&&(b=b.Gc);this.Gc=Vd(b);v(S)[this.Gc]=this}S.prototype=Object.create(u.prototype);S.prototype.constructor=S;S.prototype.Hc=S;S.Ic={};a.Router=S;S.prototype.processTransaction=function(){return!!Wd(this.Gc)};S.prototype.printInfo=function(){Xd(this.Gc)};S.prototype.deleteConnector=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Yd(c,b)};\nS.prototype.moveShape=function(b,c,d){var e=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);Zd(e,b,c,d)};S.prototype.__destroy__=function(){$d(this.Gc)};\n(function(){function b(){a.ConnDirNone=ae();a.ConnDirUp=be();a.ConnDirDown=ce();a.ConnDirLeft=de();a.ConnDirRight=ee();a.ConnDirAll=fe();a.ConnEndPoint=ge();a.ConnEndShapePin=he();a.ConnEndJunction=ie();a.ConnEndEmpty=je();a.ShapeMove=ke();a.ShapeAdd=le();a.ShapeRemove=me();a.JunctionMove=ne();a.JunctionAdd=oe();a.JunctionRemove=pe();a.ConnChange=qe();a.ConnectionPinChange=re();a.TransformationType_CW90=se();a.TransformationType_CW180=te();a.TransformationType_CW270=ue();a.TransformationType_FlipX=\nve();a.TransformationType_FlipY=we();a.ConnType_None=xe();a.ConnType_PolyLine=ye();a.ConnType_Orthogonal=ze();a.PolyLineRouting=Ae();a.OrthogonalRouting=Be()}Ga?b():Ea.unshift(b)})();\n\n\n  return initAvoidModule.ready\n}\n);\n})();\nexport default initAvoidModule;","import initAvoid from \"./generated/libavoid.js\";\n\nexport const AvoidLib = {\n  avoidLib: undefined,\n  async load() {\n    if (!this.avoidLib) {\n      this.avoidLib = await initAvoid();\n    } else {\n      console.log(\"Avoid library is already initialized\");\n    }\n  },\n\n  getInstance() {\n    if (!this.avoidLib) {\n      throw new Error(\"Avoid library should be initialized before using\");\n    }\n    return this.avoidLib;\n  },\n};\n","import { injectable } from \"inversify\";\nimport { Avoid as AvoidInterface, AvoidLib } from \"libavoid-js\";\nimport {\n  SRoutableElement,\n  SRoutingHandle,\n  RoutedPoint,\n  ResolvedHandleMove,\n  Point,\n  EdgeRouting,\n  LinearEdgeRouter,\n  LinearRouteOptions,\n  centerOfLine,\n  euclideanDistance,\n  IMultipleEdgesRouter,\n  isBoundsAware,\n  SChildElement,\n  SConnectableElement,\n  SParentElement,\n} from \"sprotty\";\n\nexport type AvoidRouteEdge = {\n  child: SRoutableElement;\n  connRef: AvoidInterface[\"ConnRef\"];\n  routes: RoutedPoint[];\n};\nexport type AvoidRoutes = { [key: string]: AvoidRouteEdge };\nexport interface EdgeRoutesContainer {\n  edgeRoutes: EdgeRouting;\n}\n\nexport function containsEdgeRoutes(\n  args?: Record<string, unknown>\n): args is Record<string, unknown> & EdgeRoutesContainer {\n  return args !== undefined && \"edgeRoutes\" in args;\n}\n\nexport interface LibavoidRouteOptions extends LinearRouteOptions {\n  /** The angle in radians below which a routing handle is removed. */\n  // TODO\n  removeAngleThreshold: number;\n}\n\n@injectable()\nexport class LibavoidRouter\n  extends LinearEdgeRouter\n  implements IMultipleEdgesRouter\n{\n  avoidRouter: AvoidInterface[\"Router\"];\n  avoidRoutes: AvoidRoutes;\n  renderedTimes = 0;\n  static readonly KIND = \"libavoid\";\n\n  constructor() {\n    super();\n    const Avoid: AvoidInterface =\n      AvoidLib.getInstance() as unknown as AvoidInterface;\n    this.avoidRouter = new Avoid.Router(\n      Avoid.OrthogonalRouting | Avoid.PolyLineRouting\n    );\n    this.avoidRoutes = {};\n    console.log(\"router\", this.avoidRouter);\n  }\n\n  get kind() {\n    return LibavoidRouter.KIND;\n  }\n\n  getAllBoundsAwareChildren(parent: Readonly<SParentElement>): SChildElement[] {\n    const result = [];\n\n    for (const child of parent.children) {\n      if (isBoundsAware(child)) {\n        result.push(child);\n      }\n\n      if (child instanceof SParentElement) {\n        result.push(...this.getAllBoundsAwareChildren(child));\n      }\n    }\n\n    return result;\n  }\n\n  getCenterPoint(element: SConnectableElement): { x: number; y: number } {\n    let x = element.bounds.width / 2,\n      y = element.bounds.height / 2;\n    let currentElement = element;\n    while (currentElement) {\n      if (currentElement.position) {\n        x += currentElement.position.x;\n        y += currentElement.position.y;\n      }\n\n      if (!(currentElement.parent && currentElement.parent.id === \"graph\")) {\n        currentElement = currentElement.parent as SConnectableElement;\n      } else {\n        break;\n      }\n    }\n    return { x, y };\n  }\n\n  avoidRoutesToEdgeRoutes(avoidRoutes: AvoidRouteEdge[]): EdgeRouting {\n    const routes = new EdgeRouting();\n    for (const connection of avoidRoutes) {\n      const sprottyRoute = [];\n      const route = connection.connRef.displayRoute();\n      for (let i = 0; i < route.size(); i++) {\n        let kind: \"source\" | \"linear\" | \"target\" = \"linear\";\n        if (i === 0) {\n          kind = \"source\";\n        } else if (i === route.size() - 1) {\n          kind = \"target\";\n        }\n        sprottyRoute.push({\n          x: route.get_ps(i).x,\n          y: route.get_ps(i).y,\n          kind,\n          pointIndex: 1,\n        });\n      }\n      routes.set(connection.child.id, sprottyRoute);\n      this.avoidRoutes[connection.child.id] = {\n        ...this.avoidRoutes[connection.child.id],\n        routes: sprottyRoute,\n      };\n    }\n\n    return routes;\n  }\n\n  routeAll(edges: SRoutableElement[], parent: SParentElement): EdgeRouting {\n    // TODO: avoid recalculating of the same elements\n    const connections = [];\n    const Avoid: AvoidInterface =\n      AvoidLib.getInstance() as unknown as AvoidInterface;\n\n    this.avoidRouter = new Avoid.Router(\n      Avoid.OrthogonalRouting | Avoid.PolyLineRouting\n    );\n\n    for (const child of edges) {\n      const sourceConnectionEnd = this.getCenterPoint(\n        child.source as SConnectableElement\n      );\n      const targetConnectionEnd = this.getCenterPoint(\n        child.target as SConnectableElement\n      );\n      const connRef = new Avoid.ConnRef(\n        this.avoidRouter,\n        new Avoid.ConnEnd(\n          new Avoid.Point(sourceConnectionEnd.x, sourceConnectionEnd.y)\n        ),\n        new Avoid.ConnEnd(\n          new Avoid.Point(targetConnectionEnd.x, targetConnectionEnd.y)\n        )\n      );\n\n      let routingType = Avoid.PolyLineRouting;\n      if (child.routerKind === \"manhattan\") {\n        routingType = Avoid.OrthogonalRouting;\n      }\n      connRef.setRoutingType(routingType);\n      connections.push({ child, connRef, routes: [] });\n      this.avoidRoutes[child.id] = { connRef, child, routes: [] };\n    }\n\n    const connectables = this.getAllBoundsAwareChildren(parent);\n    console.log(\"connectables count: \", connectables.length);\n    for (const child of connectables as SConnectableElement[]) {\n      const centerPoint = this.getCenterPoint(child);\n      const rectangle = new Avoid.Rectangle(\n        new Avoid.Point(centerPoint.x, centerPoint.y),\n        child.bounds.width,\n        child.bounds.height\n      );\n      new Avoid.ShapeRef(this.avoidRouter, rectangle);\n    }\n\n    this.avoidRouter.processTransaction();\n    const edgeRoutes = this.avoidRoutesToEdgeRoutes(connections);\n\n    for (const connection of connections) {\n      this.avoidRouter.deleteConnector(connection.connRef);\n    }\n    Avoid.destroy(this.avoidRouter);\n    this.renderedTimes += 1;\n    console.log(connections);\n    return edgeRoutes;\n  }\n\n  route(\n    edge: Readonly<SRoutableElement>,\n    args?: Record<string, unknown>\n  ): RoutedPoint[] {\n    console.log(\"get\", edge, args, this.avoidRoutes);\n    return this.routeAll([edge], edge).get(edge.id) || [];\n  }\n\n  // pointAt(edge: SRoutableElement, t: number): Point | undefined {\n  //   console.log(\"pointAt\", edge, t);\n\n  //   const segments = this.calculateSegment(edge, t);\n  //   console.log(\"segments\", segments);\n  //   if (!segments) return undefined;\n  //   const { segmentStart, segmentEnd, lambda } = segments;\n  //   return linear(segmentStart, segmentEnd, lambda);\n  // }\n\n  protected calculateSegment(\n    edge: SRoutableElement,\n    t: number\n  ): { segmentStart: Point; segmentEnd: Point; lambda: number } | undefined {\n    if (t < 0 || t > 1) return undefined;\n    const routedPoints = this.avoidRoutes[edge.id].routes;\n    console.log(\"points\", routedPoints.length);\n    if (routedPoints.length < 2) return undefined;\n    const segmentLengths: number[] = [];\n    let totalLength = 0;\n    for (let i = 0; i < routedPoints.length - 1; ++i) {\n      segmentLengths[i] = euclideanDistance(\n        routedPoints[i],\n        routedPoints[i + 1]\n      );\n      totalLength += segmentLengths[i];\n    }\n    let currentLenght = 0;\n    const tAsLenght = t * totalLength;\n    for (let i = 0; i < routedPoints.length - 1; ++i) {\n      const newLength = currentLenght + segmentLengths[i];\n      // avoid division by (almost) zero\n      if (segmentLengths[i] > 1e-8) {\n        if (newLength >= tAsLenght) {\n          const lambda =\n            Math.max(0, tAsLenght - currentLenght) / segmentLengths[i];\n          return {\n            segmentStart: routedPoints[i],\n            segmentEnd: routedPoints[i + 1],\n            lambda,\n          };\n        }\n      }\n      currentLenght = newLength;\n    }\n    return {\n      segmentEnd: routedPoints.pop() as Point,\n      segmentStart: routedPoints.pop() as Point,\n      lambda: 1,\n    };\n  }\n\n  createRoutingHandles(edge: SRoutableElement): void {\n    const rpCount = edge.routingPoints.length;\n    this.addHandle(edge, \"source\", \"routing-point\", -2);\n    this.addHandle(edge, \"line\", \"volatile-routing-point\", -1);\n    for (let i = 0; i < rpCount; i++) {\n      this.addHandle(edge, \"junction\", \"routing-point\", i);\n      this.addHandle(edge, \"line\", \"volatile-routing-point\", i);\n    }\n    this.addHandle(edge, \"target\", \"routing-point\", rpCount);\n  }\n\n  applyInnerHandleMoves(edge: SRoutableElement, moves: ResolvedHandleMove[]) {\n    moves.forEach((move) => {\n      const handle = move.handle;\n      const points = edge.routingPoints;\n      let index = handle.pointIndex;\n      if (handle.kind === \"line\") {\n        // Upgrade to a proper routing point\n        handle.kind = \"junction\";\n        handle.type = \"routing-point\";\n        points.splice(\n          index + 1,\n          0,\n          move.fromPosition || points[Math.max(index, 0)]\n        );\n        edge.children.forEach((child) => {\n          if (\n            child instanceof SRoutingHandle &&\n            (child === handle || child.pointIndex > index)\n          )\n            child.pointIndex++;\n        });\n        this.addHandle(edge, \"line\", \"volatile-routing-point\", index);\n        this.addHandle(edge, \"line\", \"volatile-routing-point\", index + 1);\n        index++;\n      }\n      if (index >= 0 && index < points.length) {\n        points[index] = move.toPosition;\n      }\n    });\n  }\n\n  getInnerHandlePosition(\n    edge: SRoutableElement,\n    route: RoutedPoint[],\n    handle: SRoutingHandle\n  ) {\n    if (handle.kind === \"line\") {\n      const { start, end } = this.findRouteSegment(\n        edge,\n        route,\n        handle.pointIndex\n      );\n      if (start !== undefined && end !== undefined)\n        return centerOfLine(start, end);\n    }\n    return undefined;\n  }\n\n  protected getOptions(edge: SRoutableElement): LibavoidRouteOptions {\n    return {\n      minimalPointDistance: 2,\n      removeAngleThreshold: 0.1,\n      standardDistance: 20,\n      selfEdgeOffset: 0.25,\n    };\n  }\n\n  // derivativeAt(edge: SRoutableElement, t: number): Point | undefined {\n  //   console.log(\"derivativeAt\", edge, t);\n  //   const segments = this.calculateSegment(edge, t);\n  //   if (!segments) return undefined;\n  //   const { segmentStart, segmentEnd } = segments;\n  //   return {\n  //     x: segmentEnd.x - segmentStart.x,\n  //     y: segmentEnd.y - segmentStart.y,\n  //   };\n  // }\n\n  // getHandlePosition(\n  //   edge: SRoutableElement,\n  //   route: RoutedPoint[],\n  //   handle: SRoutingHandle\n  // ): Point | undefined {\n  //   return undefined; // TODO\n  // }\n\n  // createRoutingHandles(edge: SRoutableElement) {}\n\n  // applyHandleMoves(edge: SRoutableElement, moves: ResolvedHandleMove[]): void {}\n\n  // applyReconnect(\n  //   edge: SRoutableElement,\n  //   newSourceId?: string,\n  //   newTargetId?: string\n  // ) {}\n\n  // cleanupRoutingPoints(\n  //   edge: SRoutableElement,\n  //   routingPoints: Point[],\n  //   updateHandles: boolean,\n  //   addRoutingPoints: boolean\n  // ) {}\n\n  // takeSnapshot(edge: SRoutableElement): EdgeSnapshot {\n  //   return {\n  //     routingPoints: edge.routingPoints.slice(),\n  //     routingHandles: edge.children\n  //       .filter((child) => child instanceof SRoutingHandle)\n  //       .map((child) => child as SRoutingHandle),\n  //     routedPoints: this.route(edge),\n  //     router: this,\n  //     source: edge.source,\n  //     target: edge.target,\n  //   };\n  // }\n\n  // applySnapshot(edge: SRoutableElement, snapshot: EdgeSnapshot): void {}\n}\n","import { AvoidLib } from \"libavoid-js\";\nimport { LibavoidRouter } from \"./libavoid-router\";\n\nexport async function load() {\n  await AvoidLib.load();\n}\n\nexport { LibavoidRouter };\n"],"names":["root","factory","exports","module","define","amd","global","__decorate","this","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","value","inversify_1","types_1","async_1","smodel_factory_1","animation_frame_syncer_1","set_model_1","undo_redo_1","action_1","ActionDispatcher","postponedActions","requests","Map","prototype","initialize","_this","initialized","actionHandlerRegistryProvider","then","registry","actionHandlerRegistry","handleAction","SetModelAction","EMPTY_ROOT","dispatch","action","undefined","blockUntil","handleBlocked","diagramLocker","isAllowed","dispatchAll","actions","Promise","all","map","request","requestId","reject","Error","deferred","Deferred","set","promise","kind","UndoAction","KIND","commandStack","undo","RedoAction","redo","isResponseAction","get","responseId","RejectAction","rejectAction","message","logger","warn","detail","resolve","log","handlers","error","isRequestAction","promises","_i","handlers_1","result","handle","isAction","push","execute","predicate","actions_1","a","inject","TYPES","ActionHandlerRegistryProvider","Function","ICommandStack","ILogger","AnimationFrameSyncer","IDiagramLocker","injectable","__extends","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__param","paramIndex","decorator","registry_1","inversify_2","ActionHandlerRegistry","_super","registrations","initializers","call","forEach","registration","register","actionKind","initializer","initializeActionHandler","multiInject","ActionHandlerRegistration","optional","IActionHandlerInitializer","MultiInstanceRegistry","configureActionHandler","context","constr","isInjectable","name","isBound","bind","toSelf","toDynamicValue","ctx","container","onAction","toConstantValue","object_1","object","nextRequestId","generateRequestId","toString","LabeledAction","label","icon","isLabeledAction","element","DefaultDiagramLocker","tasks","endTasks","triggered","isAvailable","requestAnimationFrame","onNextFrame","task","trigger","onEndOfNextFrame","time","run","setTimeout","easing_1","Animation","ease","easeInOut","start","frames","syncer","lambda","dtime","t","Math","min","duration","current","tween","modelChanged","update","finalModel","CompoundAnimation","model","components","include","animation","_a","x","CommandActionHandler","commandRegistration","CommandActionHandlerInitializer","CommandRegistration","configureCommand","childContainer","Container","parent","Action","overrideCommandStackOptions","options","defaultOptions","CommandStackOptions","safeAssign","__assign","assign","s","n","apply","smodel_1","command_1","CommandStack","undoStack","redoStack","offStack","currentPromise","main","modelFactory","createRoot","hidden","popup","state","enumerable","configurable","executeAll","commands","command","handleCommand","mergeOrPush","thenUpdate","undoOffStackSystemCommands","undoPreceedingSystemCommands","isBlockUndo","pop","pushToUndoStack","redoFollowingSystemCommands","operation","beforeResolve","HiddenCommand","PopupCommand","commandResult","createContext","newState","copyState","newModel","SModelRoot","cause","undoHistoryLimit","splice","updateHidden","updatePopup","currentModel","modelViewer","viewerProvider","hiddenModelViewer","popupModelViewer","isPushToOffStack","lastCommand","MergeableCommand","merge","isPushToUndoStack","defaultDuration","SystemCommand","ResetCommand","IModelFactory","IViewerProvider","postConstruct","Command","ModelRequestCommand","retrieveResult","actionDispatcher","IActionDispatcher","initialize_canvas_1","logging_1","action_dispatcher_1","action_handler_1","command_stack_1","viewer_1","viewer_options_1","mouse_tool_1","key_tool_1","vnode_postprocessor_1","view_1","viewer_cache_1","dom_helper_1","id_postprocessor_1","command_registration_1","css_class_postprocessor_1","tool_manager_1","tool_1","ui_extension_registry_1","diagram_locker_1","defaultContainerModule","ContainerModule","_unbind","to","NullLogger","inSingletonScope","LogLevel","SModelRegistry","toProvider","ViewRegistry","SModelFactory","IActionDispatcherProvider","ICommandStackProvider","ModelViewer","HiddenModelViewer","PopupModelViewer","createChild","IViewer","toService","ViewerCache","ViewerOptions","defaultViewerOptions","PatcherProvider","DOMHelper","ModelRendererFactory","toFactory","targetKind","processors","args","viewRegistry","ModelRenderer","IdPostprocessor","IVNodePostprocessor","HiddenVNodePostprocessor","CssClassPostprocessor","MouseTool","KeyTool","FocusFixPostprocessor","PopupVNodePostprocessor","PopupMouseTool","InitializeCanvasBoundsCommand","CanvasBoundsInitializer","SetModelCommand","IToolManager","ToolManager","KeyListener","DefaultToolsEnablingKeyListener","ToolManagerActionHandler","EnableDefaultToolsAction","EnableToolsAction","UIExtensionRegistry","SetUIExtensionVisibilityCommand","MousePositionTracker","MouseListener","geometry_1","browser_1","vnode","isValidDimension","canvasBounds","rootAndVnode","postUpdate","domElement","elm","oldBounds","newBounds","getBoundsInPage","almostEquals","y","width","height","InitializeCanvasBoundsAction","bounds","getBoundingClientRect","scroll","getWindowScroll","left","top","newCanvasBounds","RequestModelAction","newRoot","oldRoot","createElement","schema","child","hasKey","type","regElement","SChildElement","initializeChild","initializeRoot","createSchema","isReserved","SParentElement","children","initializeElement","propertyName","indexOf","obj","descriptor","getPrototypeOf","initializeParent","isParent","childSchema","index","add","freeze","id","defaultFeatures","getDefaultFeatures","features","enable","featureSet_1","createFeatureSet","DEFAULT_FEATURES","SModelElementRegistration","FactoryRegistry","defaults","custom","featureSet","Set","f","disable","_b","_c","translatePoint","point","source","localToParent","targetTrace","parentToLocal","registerModelElement","getBasicType","colonIndex","substring","getSubType","findElement","elementId","findParent","findParentByFeature","translateBounds","upperLeft","lowerRight","containsSome","find","elements","some","el","getById","test","iterable_1","SModelElement","hasFeature","feature","has","remove","removeAll","filter","move","newIndex","isBounds","SModelIndex","EMPTY_BOUNDS","writable","ID_CHARS","createRandomId","charAt","floor","random","id2element","contains","id2parent","getParent","getRoot","parent_1","getAttachedElements","mapIterable","keyboard_1","tools","defaultTools","actives","concat","disableActiveTools","tool","enableDefaultTools","toolIds","toolId","managedTools","registerDefaultTools","tools_1","registerTools","tools_2","toolManager","keyDown","event","matchesKeystroke","Symbol","IAnchorComputer","IButtonHandler","ICommandPaletteActionProvider","ICommandPaletteActionProviderRegistry","IContextMenuItemProvider","IContextMenuProviderRegistry","IContextMenuService","IContextMenuServiceProvider","IEdgeRouter","IEdgeRoutePostprocessor","IEditLabelValidationDecorator","IEditLabelValidator","HoverState","LayoutRegistration","LayoutRegistry","Layouter","IModelLayoutEngine","ModelSource","ModelSourceProvider","IPopupModelProvider","PopupMouseListener","ISnapper","SvgExporter","IUIExtension","ViewRegistration","__spreadArrays","il","j","jl","extensions","extension","InstanceRegistry","SetUIExtensionVisibilityAction","extensionId","visible","contextElementsId","show","hide","AbstractUIExtension","contextElementIds","activeElement","document","containerElement","onBeforeShow","setContainerVisible","restoreFocus","focusedElement","focus","baseDiv","getElementById","getOrCreateContainer","initializeContents","insertBefore","firstChild","baseDivId","classList","containerClass","style","visibility","opacity","vnode_utils_1","smodel_utils_1","cssClasses","cssClass","setClass","subType","getPrefix","viewerOptions","createUniqueDOMElementId","findSModelIdByDOMElement","replace","attrs","getAttrs","domHelper","keyListeners","keyListener","deregister","handleEvent","methodName","listener","reduce","preventDefault","keyUp","on","mouseListeners","mouseListener","getTargetElement","parentNode","focusOnMouseEvent","actionOrPromise","mouseOver","mouseOut","mouseEnter","mouseLeave","mouseDown","mouseMove","mouseUp","wheel","doubleClick","lastPosition","offsetX","offsetY","snabbdom_1","ThunkView","render","h","selector","hook","init","prepatch","fn","renderAndDecorate","watchedArgs","thunk","doRender","copyToThunk","data","text","cur","oldVnode","old","equals","oldArg","newArg","isArray","keys","isThunk","jsx_1","findArgValue","arg","parentArgs","registerDefaults","EmptyView","missing","MissingView","configureView","configureModelElement","modelConstr","viewConstr","svg","position","ORIGIN_POINT","delegate","cachedModel","isCacheEmpty","scheduleUpdate","baseClass","hiddenDiv","hiddenClass","popupDiv","popupClass","popupClosedClass","needsClientLayout","needsServerLayout","popupOpenDelay","popupCloseDelay","configureViewerOptions","opt","rebind","overrideViewerOptions","thunk_view_1","postprocessors","processor","renderElement","renderChildren","patcher","createModules","propsModule","attributesModule","classModule","styleModule","eventListenersModule","modelRendererFactory","patcherProvider","renderer","newVDOM","html","lastVDOM","hadFocus","hasFocus","copyClassesFromVNode","placeholder","window","addEventListener","onWindowResize","copyClassesFromElement","lastRootVNode","lastElement","vdom","actiondispatcher","hiddenPostprocessors","hiddenRenderer","hiddenModel","hiddenVNode","setAttr","lastHiddenVDOM","body","appendChild","popupPostprocessors","popupRenderer","popupClosed","inlineStyle","lastPopupVDOM","sel","startsWith","getClass","getData","setNamespace","node","ns","item","mergeStyle","val","getOn","model_1","AbstractLayout","layout","layouter","boundsData","getBoundsData","getLayoutOptions","childrenSize","getChildrenSize","maxWidth","paddingFactor","resizeContainer","max","getFixedContainerBounds","paddingLeft","paddingRight","maxHeight","paddingTop","paddingBottom","offset","layoutChildren","getFinalContainerBounds","boundsChanged","lastOffset","minWidth","minHeight","layoutOptions","currentContainer","isBoundsAware","isLayoutContainer","containerOptions","currentOffset","isLayoutableChild","childOptions","getChildLayoutOptions","layoutChild","getDx","hAlign","getDy","vAlign","spread","allOptions","reverse","getDefaultLayoutOptions","SetBoundsAction","RequestBoundsAction","ComputedBoundsAction","revision","alignments","LayoutAction","SetBoundsCommand","newPosition","newSize","RequestBoundsCommand","bounds_manipulation_1","hidden_bounds_updater_1","layout_1","hbox_layout_1","vbox_layout_1","stack_layout_1","boundsModule","HiddenBoundsUpdater","configureLayout","VBoxLayouter","HBoxLayouter","StackLayouter","abstract_layout_1","isFirst","hGap","dy","BoundsData","element2boundsData","isSizeable","alignmentChanged","getBoundsFromDOM","resizes","realignments","resize","alignment","newAlignment","clear","boundingBox","getBounds","isAlignable","getBBox","layouts","layoutKind","StatefulLayouter","layoutRegistry","toBeLayouted","doLayout","doFindChildrenAtPosition","matches","includes","newPoint","boundsFeature","layoutContainerFeature","layoutableChildFeature","alignFeature","getAbsoluteBounds","boundsAware","getAbsoluteClientBounds","svgElementId","svgElement","rect","scroll_1","offsetParent","HTMLElement","offsetLeft","offsetTop","findChildrenAtPosition","SShapeElement","size","EMPTY_DIMENSION","ResizeAnimation","elementResizes","elementResize","newDimension","toDimension","fromDimension","dx","vGap","ShapeView","isVisible","ab","ButtonHandlerRegistry","buttonHandlerFactories","TYPE","button_handler_1","buttonModule","model_2","SButton","enabled","fadeFeature","select_1","center_fit_1","CommandPaletteActionProviderRegistry","actionProviders","getActions","lastMousePosition","actionLists","provider","acc","RevealNamedElementActionProvider","createSelectActions","SelectAllAction","modelRoot","toArray","isNameable","nameable","SelectAction","CenterAction","ui_extension_1","action_providers_1","configureAutocomplete","CommandPalette","loadingIndicatorClasses","xOffset","yOffset","defaultWidth","debounceWaitMs","noCommandsMsg","paletteIndex","CommandPalette_1","ID","contextActions","inputElement","autoCompleteResult","autocompleteSettings","hideIfEscapeEvent","cylceIfInvokePaletteKey","onblur","isInvokePaletteKey","cycle","selectedElementIds","selectedElements","e","isSelectable","selected","input","emptyMsg","className","showOnFocus","minLength","fetch","updateAutoCompleteActions","onSelect","currentValue","renderLabeledActionSuggestion","customize","inputRect","customizeSuggestionContainer","executeAction","onLoading","filterActions","onLoaded","actionProviderRegistry","mousePositionTracker","lastPositionOnDiagram","reason","loadingIndicator","success","removeChild","itemElement","wordMatcher","espaceForRegExp","split","join","regex","RegExp","renderIcon","innerHTML","match","filterText","toLowerCase","every","word","destroy","actionDispatcherProvider","toActionArray","CommandPaletteKeyListener","command_palette_1","commandPaletteModule","toAnchor","anchor","menu_providers_1","mouse_listener_1","contextMenuModule","ContextMenuMouseListener","ContextMenuProviderRegistry","delete_1","menuProviders","getItems","menues","flattenAndRestructure","menuItems","menuItemsWithParentId","menuItem","parentId","_loop_1","fragments","matchingParent","nextParents","_loop_2","fragment","fragments_1","menuItemsWithParentId_1","DeleteContextMenuItemProvider","from","isSelected","isDeletable","sortString","group","DeleteElementAction","isEnabled","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","__generator","g","_","sent","trys","ops","verb","iterator","op","TypeError","contextMenuService","menuProvider","button","showContextMenu","menuService","mousePosition","isTargetSelected","selectableTarget","restoreSelection","model_3","routing_1","DecorationPlacer","isDecoration","getPosition","translate","SRoutableElement","route","edgeRouterRegistry","EdgeRouterRegistry","views_1","decoration_placer_1","decorationModule","SIssueMarker","IssueMarkerView","decorationFeature","SDecoration","hoverFeedbackFeature","popupFeature","SIssue","marker","maxSeverity","getMaxSeverity","transform","getPath","currentSeverity","issues","severity","intersection_finder_1","edgeIntersectionModule","IntersectionFinder","__importDefault","mod","__esModule","tinyqueue_1","sweepline_1","isIntersectingRoutedPoint","routedPoint","BY_X_THEN_Y","intersectionPoint","routing","intersections","addToRouting","eventQueue","checkWhichEventIsLeft","routes","routeId","addRoute","runSweep","intersections_1","intersection","routable1","routable2","addIntersectionToRoutedPoint","segmentIndex1","segmentIndex2","segmentIndex","segment","intersectingRoutedPoint","e1","e2","queue","currentPoint","nextPoint","SweepEvent","otherEvent","isLeftEndpoint","edgeId","Segment","leftSweepEvent","rightSweepEvent","checkWhichSegmentHasRightEndpointFirst","seg1","seg2","getSegmentIndex","intersectionOfSegments","seg1Line","PointToPointLine","seg2Line","intersectionPoints","outQueue","event_1","otherSegment","edge_layout_1","edgeLayoutModule","EdgeLayoutPostprocessor","sgraph_1","isEdgeLayoutable","SEdge","placement","getEdgePlacement","edge","router","routerKind","pointOnEdge","pointAt","derivativeOnEdge","derivativeAt","angle","toDegrees","atan2","rotate","flippedAngle","abs","getRotatedAlignment","getAlignment","flip","side","allPlacements","edgePlacement","DEFAULT_EDGE_PLACEMENT","quadrant","getQuadrant","midLeft","topLeft","topRight","midRight","bottomRight","bottomLeft","orientation","linear","linearFlip","p0","p1","p2","p3","edgeLayoutFeature","checkEdgeLayoutable","EdgePlacement","creatingOnDragFeature","isCreatingOnDrag","createAction","CreateElementAction","containerId","elementSchema","CreateElementCommand","newElement","deletableFeature","elementIds","ResolvedDelete","DeleteElementCommand","resolvedDeletes","resolvedDelete","svg_views_1","edit_label_1","edit_label_ui_1","edit_routing_1","reconnect_1","edgeEditModule","SwitchEditModeCommand","ReconnectCommand","SDanglingAnchor","EmptyGroupView","labelEditModule","EditLabelMouseListener","EditLabelKeyListener","ApplyLabelEditCommand","labelEditUiModule","EditLabelAction","EditLabelActionHandler","EditLabelUI","commit_model_1","zoom_1","isEditLabelAction","labelId","validationTimeout","isActive","blockApplyEditOnInvalidInput","isCurrentLabelValid","EditLabelUI_1","textAreaElement","onkeydown","applyLabelEditOnEvent","configureAndAdd","validateLabelIfContentChange","applyLabelEdit","isMultiLine","code","modifiers","previousLabelContent","performLabelValidation","editControl","validateLabel","ApplyLabelEditAction","CommitModelAction","clearTimeout","reason_1","labelValidator","validate","showValidationResult","clearValidationResult","validationDecorator","dispose","hasEditableLabel","labelElement","getEditableLabels","setPosition","applyTextContents","applyFontStyling","zoom","getZoom","editControlPositionCorrection","editControlDimension","HTMLTextAreaElement","selectionStart","selectionEnd","scrollTop","scrollLeft","setSelectionRange","getComputedStyle","font","fontStyle","fontFamily","fontSize","String","Number","parseInt","fontWeight","lineHeight","isEditableLabel","ResolvedLabelEdit","resolvedLabelEdit","oldLabel","newLabel","editableLabel","getEditableLabel","editableLabels","isWithEditableLabel","SwitchEditModeAction","elementsToActivate","elementsToDeactivate","handlesToRemove","SRoutingHandle","shouldRemoveHandle","doExecute","entry","routingPoints","pointIndex","editMode","danglingAnchor","original","sourceId","targetId","canEditRouting","createRoutingHandles","rp","editFeature","editLabelFeature","withEditLabelFeature","ReconnectAction","routableId","newSourceId","newTargetId","before","takeSnapshot","applyReconnect","after","memento","applySnapshot","expand_1","expandModule","toConstructor","ExpandButtonHandler","CollapseExpandAction","expandIds","collapseIds","CollapseExpandAllAction","expand","buttonPressed","expandable","isExpandable","expanded","expandFeature","ExpandButtonView","path","export_1","svg_exporter_1","exportSvgModule","ExportSvgKeyListener","ExportSvgPostprocessor","ExportSvgCommand","model_4","RequestExportSvgAction","isExportable","isViewport","isHoverable","hoverFeedback","svgExporter","exportFeature","ExportSvgAction","div","firstElementChild","tagName","createSvg","svgElementOrig","serializer","XMLSerializer","svgCopy","serializeToString","iframe","contentWindow","docCopy","open","write","close","svgElementNew","removeAttribute","copyStyles","setAttribute","svgCode","skipedProperties","sourceStyle","targetStyle","diffStyle","getPropertyValue","childNodes","sourceChild","targetChild","Element","allBounds","one","two","combine","fade_1","fadeModule","ElementFader","animation_1","FadeAnimation","elementFades","removeAfterFadeOut","elementFade","isFadeable","hover_1","popup_position_updater_1","viewport_1","move_1","hoverModule","PopupPositionUpdater","HoverMouseListener","PopupHoverMouseListener","HoverKeyListener","mouseOverTimer","mouseOutTimer","popupOpen","previousPopupElement","ClosePopupActionHandler","HoverFeedbackCommand","SetPopupModelCommand","FitToScreenCommand","CenterCommand","SetViewportCommand","MoveCommand","HoverFeedbackAction","mouseoverElement","mouseIsOver","modelElement","RequestPopupModelAction","SetPopupModelAction","AbstractHoverMouseListener","mouseIsDown","stopMouseOutTimer","startMouseOutTimer","stopMouseOverTimer","computePopupBounds","targetBounds","boundsInWindow","distRight","distBottom","allowSidePosition","round","leftPopupPosition","canvasRightBorderPosition","topPopupPosition","canvasBottomBorderPosition","distance","startMouseOverTimer","popupBounds","pageX","pageY","popupTarget","hasPopupFeature","lastHoverFeedbackElementId","hoverTarget","elementUnderMouse","elementFromPoint","isSprottyPopup","parentElement","closeOnMouseMove","boundingClientRect","innerHeight","pageYOffset","innerWidth","pageXOffset","moveModule","MoveMouseListener","LocationPostprocessor","isLocateable","moveFeature","isMoveable","create_on_drag_1","model_5","model_6","MoveAction","moves","animate","finished","resolvedMoves","edgeMementi","MoveCommand_1","edge2handleMoves","attachedEdgeShifts","resolvedMove","resolveHandleMove","movesByEdge","resolvedMove_1","resolveElementMove","existingDelta","newDelta","subtract","toPosition","fromPosition","delta","doMove","undoMove","MoveAnimation","MorphEdgesAnimation","getHandlePosition","edge2move","res","applyHandleMoves","updateHandles","cleanupRoutingPoints","other","otherMove","otherElementId","existingMove","otherMemento","existingMemento","edgeMemento","otherMemento_1","elementMoves","elementMove","originalMementi","end","startRoute","routedPoints","endRoute","maxRoutingPoints","startExpandedRoute","growToSize","endExpandedRoute","midPoint","center","morph","newRoutingPoints","closestSnapshot","newSnapshot","routingHandles","targetSize","diff","deltaDiff","deltaSmaller","nextInsertion","pos","insertions","hasDragged","elementId2startPos","moveable","isRoutingHandle","startDragPosition","edgeInProgressID","edgeInProgressTargetHandleID","buttons","collectStartPositions","moveAction","getElementMoves","isChildOfSelected","isFinished","viewport","startPosition","snap","shiftKey","isSnap","snapper","hasReconnected","parent_2","handlePos","handlePosAbs","newEnd","isConnectable","canConnect","edgeInProgress","deleteIds_1","ali","CenterGridSnapper","gridX","gridY","nameFeature","open_1","openModule","OpenMouseListener","openFeature","isOpenable","OpenAction","openableTarget","isProjectable","getProjectedBounds","getProjections","projectionCssClasses","projection","projectedBounds","childProj","MAX_COORD","getModelBounds","minX","minY","maxX","maxY","ProjectedViewportView","renderSvg","renderProjections","modelBounds","projections","renderProjectionBar","params","factor","zoomedFactor","renderViewport","renderProjection","canvasSize","viewportPos","viewportSize","projPos","projSize","cl","DIAMOND_ANCHOR_KIND","ELLIPTIC_ANCHOR_KIND","RECTANGULAR_ANCHOR_KIND","AnchorComputerRegistry","anchors","anchorKind","defaultAnchorKind","manhattan_edge_router_1","polyline_edge_router_1","manhattan_anchors_1","polyline_anchors_1","anchor_1","routingModule","ManhattanEdgeRouter","ManhattanEllipticAnchor","ManhattanRectangularAnchor","ManhattanDiamondAnchor","PolylineEdgeRouter","EllipseAnchor","RectangleAnchor","DiamondAnchor","Side","DefaultAnchors","edgeParent","right","bottom","getNearestSide","leftDistance","euclideanDistance","rightDistance","topDistance","bottomDistance","currentNearestSide","LEFT","currentMinDist","RIGHT","TOP","BOTTOM","LinearEdgeRouter","segments","calculateSegment","segmentStart","segmentEnd","segmentLengths","totalLength","currentLenght","tAsLenght","newLength","addHandle","routingPointIndex","getInnerHandlePosition","findRouteSegment","handleIndex","getIndex","route_1","getTranslatedAnchor","connectable","refPoint","refContainer","anchorCorrection","translatedRefPoint","anchorComputer","getAnchorComputer","strokeCorrection","strokeWidth","getAnchor","anchorRegistry","remainingMoves","slice","applyInnerHandleMoves","addRoutingPoints","sourceAnchors","targetAnchors","resetRoutingPointsOnReconnect","getOptions","corners","calculateDefaultCorners","maxPointIndex_1","hasChanged","newSource","SConnectableElement","newTarget","getSelfEdgeIndex","snapshot","selfEdgeIndex","standardDist","standardDistance","selfEdgeOffset","outgoingEdges","otherEdge","ManhattanRectangularAnchor_1","ManhattanDiamondAnchor_1","outline","refLine","ManhattanEllipticAnchor_1","refRelative","sqrt","linear_edge_router_1","minimalPointDistance","routedCorners","createRoutedCorners","sourceRefPoint","sourceAnchor","sourceAnchorCorrection","targetRefPoint","targetAnchor","targetAnchorCorrection","corner","routingPointsCopy","routingPoint","commitRoute","fraction","getFraction","correctedX","correctX","correctedY","correctY","alignX","alignY","removeHandle","manhattanDistance","addAdditionalCorner","manhattanify","toBeRemoved","currentAnchors","otherAnchors","isHorizontal","shiftIndex","nearestSide","isVertical","selfEdge","bestAnchors","getBestConnectionAnchors","sourceSide","targetSide","startPoint","endPoint","sourcePoint","targetPoint","getRouteBounds","NaN","isNaN","connectableFeature","getAbsoluteRouteBounds","getIncomingEdges","getOutgoingEdges","routable","role","selectFeature","normX","normY","finder","NearestPointFinder","xTop","getXIntersection","addCandidate","xBottom","yLeft","getYIntersection","yRight","best","yIntersection","centerPoint","xIntersection","currentDist","dist","currentBest","referenceLine","closestDiamondSide","Diamond","closestSideLine","anchorPoint","shiftTowards","PolylineEdgeRouter_1","removeAngleThreshold","rpCount","startRef","endRef","pn","maxDistance","filterEditModeHandles","curr","prev","prevDiff","nextDiff","angleBetweenPoints","PI","centerOfLine","points","edgeRouters","defaultKind","routeAllChildren","doRouteAllChildren","postProcessors","EdgeRouting","routersEdges","elementsToProcess","shift","childRouter","routeAll","setAll","_d","_e","edgeRouting","routesMap","otherRoutes","RoutableView","selectModule","SelectCommand","SelectAllCommand","GetSelectionCommand","SelectKeyboardListener","SelectMouseListener","request_command_1","zorder_1","selectedElementsIDs","deselectedElementsIDs","select","GetSelectionAction","SelectionResult","deselected","previousSelection","selectAll","wasSelected","buttonHandlerRegistry","buttonHandler","selectableTarget_1","deselect","isCtrlOrCmd","BringToFrontAction","routableDeselect","selection","undoRedoModule","UndoRedoKeyListener","isMac","update_model_1","updateModule","UpdateModelCommand","forEachMatch","matchResult","callback","ModelMatcher","matchLeft","matchRight","leftParentId","rightParentId","applyMatches","matches_1","newElementInserted","viewport_root_1","model_matching_1","resize_1","UpdateModelAction","performUpdate","convertToMatchResult","animationOrRoot","computeAnimation","matches_2","leftRoot","rightRoot","matches_3","converted","animationData","fades","updateElement","leftCopy","animations","createAnimations","leftPos","rightPos","ViewportRootElement","movesMap","resizesMap","retainZoom","FitToScreenAction","padding","maxZoom","BoundsAwareViewportCommand","oldViewport","allBounds_1","getElementIds","boundsInViewport","b0","b1","newViewport","getNewViewport","equal","ViewportAnimation","vp1","vp2","Boolean","Infinity","CenterKeyboardListener","viewportModule","GetViewportCommand","ScrollMouseListener","ZoomMouseListener","viewportFeature","isScrollable","scrollbarMouseDownDelay","lastScrollPosition","scrollbar","getScrollbar","scrollbarMouseDownTimeout","moveScrollBar","dragCanvas","targetElement","findClickTarget","SetViewportAction","newScroll","scrollbarRect","getScrollbarOrientation","clientX","clientY","matching","hitsMouseEvent","GetViewportAction","ViewportResult","SetViewportCommand_1","elem","zoomFactor","exp","isZoomable","newZoom","getZoomFactor","viewportOffset","getViewportOffset","offsetFactor","windowScroll","deltaMode","DOM_DELTA_PAGE","deltaY","DOM_DELTA_LINE","zorderModule","BringToFrontCommand","elementIDs","addToSelection","includeConnectedEdges","incomingEdges","bringToFront","childrenLength","sgraph_factory_1","graphModule","unbind","SGraphFactory","defaultGraphFeatures","SGraph","defaultNodeFeatures","SNode","defaultPortFeatures","SPort","defaultEdgeFeatures","defaultLabelFeatures","SLabel","defaultCompartmentFeatures","SCompartment","defaultButtonFeatures","isNodeSchema","isPortSchema","isEdgeSchema","isLabelSchema","isCompartmentSchema","isButtonSchema","isGraphSchema","model_7","model_8","SGraphIndex","outgoing","incoming","sourceArr","targetArr","FluentIterableImpl","nextOutgoingIndex","nextIncomingIndex","views_2","SGraphView","PolylineEdgeView","renderDanglingEdge","renderLine","renderAdditionals","firstPoint","title","JumpingPolylineEdgeView","jumpOffsetBefore","jumpOffsetAfter","skipOffsetBefore","skipOffsetAfter","intersectionPath","intersectingPoint","sort","otherLineSegment","getOtherLineSegment","lineSegment","getLineSegment","slopeOrMax","createJumpPath","createSkipPath","currentEdge","otherEdgeId","anchorBefore","anchorAfter","rotation","offsetBefore","offsetAfter","PolylineEdgeViewWithGapsOnIntersections","SRoutingHandleView","theRoute","cx","cy","getRadius","SLabelView","SCompartmentView","compartment","__export","m","di_config_1","defaultModule","di_config_2","di_config_3","di_config_4","di_config_5","di_config_6","di_config_7","di_config_8","di_config_9","di_config_10","di_config_11","exportModule","di_config_12","di_config_13","di_config_14","di_config_15","di_config_16","di_config_17","di_config_18","di_config_19","di_config_20","di_config_21","di_config_22","modelSourceModule","virtualize_1","PreRenderedView","ShapedPreRenderedElement","correctNamespace","ForeignObjectView","foreignObjectContents","requiredFeatures","namespace","HtmlRootView","classes","modulesNS","normalizeAttrs","defNS","idx","addAttr","modname","JSX","tag","jsx","CircularNode","RectangularNode","DiamondNode","CircularPort","RectangularPort","HtmlRoot","PreRenderedElement","ForeignObjectElement","loadDefaultModules","modules","exclude","load","SvgViewportView","CircularNodeView","radius","RectangularNodeView","DiamondNodeView","diamond","svgStr","topPoint","rightPoint","bottomPoint","leftPoint","buildVNodeData","_attrs","memo","entityRegex","entity","textContent","unescapeEntities","addStyle","styleProp","$1","$2","toUpperCase","transformName","trim","parseStyle","addClass","parseClass","vnodeMap","delimited","toVNode","nodeType","attributes","attr","vn","nodeName","lastData","parser","DOMParser","vnodes","doc","parseFromString","func","stack","setChild","_node","sibling","nextSibling","recurse","model_source_1","CommitModelCommand","doCommit","doSetOriginal","commitResult","modelSource","commitModel","originalModel","ComputedBoundsApplicator","file_saver_1","isActionMessage","ServerStatusAction","DiagramServer","currentRoot","clientId","handleLocally","forwardToServer","sendMessage","messageReceived","JSON","parse","storeNewModel","handleComputedBounds","handleRequestModel","handleExportSvgAction","handleServerStateAction","lastSubmittedModelType","newOptions","newAction","computedBoundsApplicator","blob","Blob","saveAs","previousRoot","LocalModelSource","setModel","submitModel","updateModel","getSelection","getViewport","computedBounds","doSubmitModel","layoutResult","error_1","layoutEngine","addElements","elements_1","anye","removeElements","elements_2","handleRequestPopupModel","popupModelProvider","popupRoot","getPopupModel","LoggingAction","caller","ForwardingLogger","logLevel","forward","info","console","date","Date","toLocaleTimeString","stringify","modelSourceProvider","applyBounds","applyAlignment","WebSocketDiagramServer","listen","webSocket","disconnect","send","navigator","userAgent","metaKey","ctrlKey","isCrossSite","url","location","baseURL","protocol","host","clientRect","rgb","red","green","blue","toSVG","ColorMap","stops","getColor","pointEquals","point1","point2","normalize","mag","magnitude","pow","Direction","angleOfPoint","lengthProduct","dotProduct","acos","normalized","toRadians","bottomRightSideLine","topRightSideLine","bottomLeftSideLine","topLeftSideLine","slope","MAX_SAFE_INTEGER","otherLine","hasIndistinctPoints","x1","y1","x2","y2","x3","y3","x4","y4","denominator","numeratorA","numeratorB","determinantA","determinantB","l1","l2","getMetadata","startFn","nextFn","filterIterable","createIterator","DONE_RESULT","collection","method","ArrayIterator","array","getActualCode","keyCode","STRING_CODE","findIndex","altKey","addKeyCode","stringCode","numericCode","none","ConsoleLogger","viewOptions","consoleArguments","isObject","partial","ProviderRegistry","cstr","existingCstr","existingFactory","instance","existingInstance","instances","deregisterAll","existingInstances","tagProperty","tagParameter","ERROR_MSGS","METADATA_KEY","_tagParameterOrProperty","metadataKey","annotationTarget","parameterIndex","paramsOrPropertiesMetadata","isParameterDecorator","INVALID_DECORATOR_OPERATION","hasOwnMetadata","paramOrPropertyMetadata","paramOrPropertyMetadata_1","DUPLICATED_METADATA","defineMetadata","_decorate","_param","TAGGED","TAGGED_PROP","LazyServiceIdentifer","error_msgs_1","metadata_1","decorator_utils_1","cb","_cb","unwrap","serviceIdentifier","targetKey","UNDEFINED_INJECT_ANNOTATION","Metadata","INJECT_TAG","ERRORS_MSGS","PARAM_TYPES","DUPLICATED_INJECTABLE_DECORATOR","types","DESIGN_PARAM_TYPES","MULTI_INJECT_TAG","named","NAMED_TAG","OPTIONAL_TAG","propertyKey","POST_CONSTRUCT","MULTIPLE_POST_CONSTRUCT_METHODS","tagged","metadataValue","targetName","NAME_TAG","unmanaged","UNMANAGED_TAG","Binding","literal_types_1","id_1","scope","activated","BindingTypeEnum","Invalid","constraint","implementationType","cache","onActivation","dynamicValue","clone","BindingScopeEnum","Singleton","BindingCount","MultipleBindingsAvailable","NoBindingsAvailable","OnlyOneBindingAvailable","STACK_OVERFLOW","CIRCULAR_DEPENDENCY_IN_FACTORY","POST_CONSTRUCT_ERROR","CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK","CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE","CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE","CONTAINER_OPTIONS_MUST_BE_AN_OBJECT","ARGUMENTS_LENGTH_MISMATCH","INVALID_TO_SELF_VALUE","INVALID_FUNCTION_BINDING","INVALID_MIDDLEWARE_RETURN","NO_MORE_SNAPSHOTS_AVAILABLE","INVALID_BINDING_TYPE","NOT_IMPLEMENTED","CIRCULAR_DEPENDENCY","MISSING_INJECT_ANNOTATION","MISSING_INJECTABLE_ANNOTATION","NOT_REGISTERED","CANNOT_UNBIND","AMBIGUOUS_MATCH","KEY_NOT_FOUND","NULL_ARGUMENT","values","TargetTypeEnum","Request","Transient","ConstantValue","Constructor","DynamicValue","Factory","Instance","Provider","ClassProperty","ConstructorArgument","Variable","NON_CUSTOM_TAG_KEYS","__spreadArray","binding_1","metadata_reader_1","planner_1","resolver_1","binding_to_syntax_1","serialization_1","container_snapshot_1","lookup_1","_appliedMiddleware","defaultScope","autoBindInjectable","skipBaseClassChecks","_bindingDictionary","Lookup","_snapshots","_middleware","_metadataReader","MetadataReader","container1","container2","container3","targetContainers","targetContainer","getBindingDictionary","bindingDictionary","copyDictionary","origin","destination","traverse","binding","targetBindingDictionary","getHelpers","_getContainerModuleHelpersFactory","modules_1","currentModule","containerModuleHelpers","bindFunction","unbindFunction","isboundFunction","rebindFunction","loadAsync","modules_2","unload","conditionFactory","expected","moduleId","condition","removeByCondition","BindingToSyntax","getServiceIdentifierAsString","unbindAll","bound","isBoundNamed","isBoundTagged","bindings","request_1","createMockRequest","ContainerSnapshot","of","restore","middleware","applyMiddleware","middlewares","initial","_planAndResolve","applyCustomMetadataReader","metadataReader","_get","getTagged","getNamed","getAll","getAllTagged","getAllNamed","constructorFunction","tempContainer","setModuleId","bindingToSyntax","_binding","getRebindFunction","_rebind","mId","_bind","_isBound","avoidConstraints","isMultiInject","targetType","defaultArgs","contextInterceptor","plan","AsyncContainerModule","_map","getMap","delete","entries","updatedEntries","copy","container_1","container_module_1","injectable_1","tagged_1","named_1","inject_1","optional_1","unmanaged_1","multi_inject_1","target_name_1","post_construct_1","constraint_helpers_1","binding_utils_1","Context","addPlan","setCurrentRequest","currentRequest","getConstructorMetadata","constructorFunc","compilerGeneratedMetadata","userGeneratedMetadata","getPropertiesMetadata","Plan","parentContext","rootRequest","binding_count_1","exceptions_1","context_1","plan_1","reflection_utils_1","target_1","cntnr","_getActiveBindings","parentRequest","getBindings","activeBindings","isOptional","serviceIdentifierString","msg","listMetadataForTarget","listRegisteredBindingsForServiceIdentifier","_validateActiveBindingCount","_createSubRequests","childRequest","thePlan","addChildRequest","subChildRequest","dependencies","getDependencies","baseClassDependencyCount","getBaseClassDependencyCount","getFunctionName","dependency","injectMetadata","Target","tagMetadata","_createTarget","isStackOverflowExeption","circularDependencyToException","QueryableString","str","searchString","endsWith","reverseString","reverseSearchString","compareString","getTargets","constructorName","isBaseClass","serviceIdentifiers","constructorArgsMetadata","hasUserDeclaredUnknownInjections","hasOptionalParameters","constructorTargets","iterations","targets","getConstructorArgsAsTarget","getConstructorArgsAsTargets","propertyTargets","getClassPropsAsTargets","targetMetadata","formatTargetMetadata","isManaged","injectIdentifier","classPropsMetadata","keys_1","baseConstructor","baseTargets","targetMetadataMap","unmanagedCount","dependencyCount","childRequests","requestScope","queryable_string_1","namedOrTagged","metadataItem","hasTag","matchesArray","matchesTag","isNamed","isTagged","getNamedTag","getCustomTags","matchesNamedTag","resolveInstance","resolveRequest","Func","injections","constructorInjections","propertyInjectionsRequests","propertyInjections","injection","_injectProperties","hasMetadata","_postConstruct","instantiation_1","invokeFactory","factoryType","_resolveRequest","targetIsAnArray","targetParentIsNotAnArray","_f","isSingleton","isRequestSingleton","BindingInSyntax","binding_when_on_syntax_1","inRequestScope","BindingWhenOnSyntax","inTransientScope","BindingInWhenOnSyntax","binding_in_syntax_1","binding_on_syntax_1","binding_when_syntax_1","_bindingWhenSyntax","BindingWhenSyntax","_bindingOnSyntax","BindingOnSyntax","_bindingInSyntax","when","whenTargetNamed","whenTargetIsDefault","whenTargetTagged","whenInjectedInto","whenParentNamed","whenParentTagged","whenAnyAncestorIs","ancestor","whenNoAncestorIs","whenAnyAncestorNamed","whenAnyAncestorTagged","whenNoAncestorNamed","whenNoAncestorTagged","whenAnyAncestorMatches","whenNoAncestorMatches","handler","binding_in_when_on_syntax_1","self","toFunction","bindingWhenOnSyntax","toAutoFactory","service","namedConstraint","taggedConstraint","typeConstraint","traverseAncerstors","metaData","multiBindToService","RangeError","idCounter","alreadyDependencyChain","name_1","registeredBindingsList","registeredBindings","services","_createStringArr","req","dependencyChainToString","m_1","namedTag","otherTags","autocomplete","settings","debounceTimer","containerStyle","mobileFirefox","preventSubmit","keyUpEventName","items","inputValue","minLen","keypressCounter","detach","clearDebounceTimer","attach","containerDisplayed","updatePosition","offsetWidth","offsetHeight","renderGroup","groupName","groupDiv","createDocumentFragment","prevGroup","ev","stopPropagation","empty","updateScroll","updateIfDisplayed","resizeEventHandler","scrollEventHandler","keyupEventHandler","which","ignore_1","startFetch","getElementsByClassName","previous","previousElementSibling","selectBottom","containerBottom","selectPrev","selectNext","keydownEventHandler","containerIsDisplayed","focusEventHandler","savedKeypressCounter","blurEventHandler","removeEventListener","evt","autoBom","XMLHttpRequest","responseType","onload","response","onerror","status","dispatchEvent","MouseEvent","createEvent","initMouseEvent","HTMLAnchorElement","URL","webkitURL","download","rel","href","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","innerText","safari","FileReader","onloadend","readAsDataURL","l","bindingDictionary1","bindingDictionary2","htmlDomApi","createElementNS","namespaceURI","qualifiedName","createTextNode","createComment","newNode","referenceNode","setTextContent","getTextContent","isElement","isText","isComment","primitive","isUndef","isDef","emptyNode","sameVnode","vnode1","vnode2","isSameKey","isSameIs","is","createKeyToOldIdx","beginIdx","endIdx","hooks","domApi","cbs","pre","post","api","emptyNodeAt","getAttribute","createRmCb","childElm","listeners","createElm","insertedVnodeQueue","hashIdx","dotIdx","hash","dot","ch","insert","addVnodes","parentElm","startIdx","invokeDestroyHook","removeVnodes","rm","removeHook","patchVnode","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","updateChildren","postpatch","isVnode","addNS","childData","oldArgs","newVnode","attachData","real","attachTo","cn","elmAttrs","elmChildren","nodeValue","updateAttrs","oldAttrs","charCodeAt","setAttributeNS","updateClass","oldClass","class","klass","CAPS_REGEX","updateDataset","oldDataset","dataset","datasetModule","invokeHandler","updateEventListeners","oldOn","oldListener","oldElm","updateProps","oldProps","props","raf","reflowForced","setNextFrame","prop","updateStyle","oldStyle","oldHasDel","removeProperty","delayed","name2","setProperty","amount","applied","flattenAndFilter","flattened","flatChildren","TinyQueue","compare","defaultCompare","_down","_up","peek","halfLength","require","__webpack_module_cache__","__webpack_require__","cachedModule","__webpack_modules__","definition","o","toStringTag","_scriptDir","initAvoidModule","currentScript","src","__filename","aa","ba","ready","ca","fa","ha","ja","ka","ea","importScripts","process","versions","la","ma","na","oa","pa","__dirname","readFileSync","buffer","Uint8Array","assert","argv","inspect","read","readbuffer","print","printErr","substr","lastIndexOf","responseText","qa","ra","thisProgram","ta","ua","sa","wasmBinary","noExitRuntime","WebAssembly","wa","xa","TextDecoder","ya","subarray","decode","fromCharCode","za","Aa","Ba","q","Ca","Da","Ea","Fa","Ga","Ia","preRun","unshift","Uc","Ha","Ja","Ka","La","onAbort","RuntimeError","Ma","Na","preloadedImages","preloadedAudios","Oa","locateFile","Pa","Ra","Pc","Sa","Gc","Rc","Tc","ud","Gd","td","Hd","rd","Va","Wa","Xa","USER","LOGNAME","PATH","PWD","HOME","LANG","languages","Ya","Za","$a","bb","getTime","getMonth","getFullYear","getDate","setDate","setMonth","setFullYear","db","eb","da","F","getDay","ia","Jc","Oc","I","D","Md","Ld","Mc","Lc","Kc","Nc","Od","Kd","Nd","fb","gb","ceil","hb","jb","ib","Ua","now","copyWithin","asm","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","monitorRunDependencies","clearInterval","credentials","ok","arrayBuffer","catch","Qa","instantiate","instantiateWasm","instantiateStreaming","___wasm_call_ctors","_malloc","_free","Ce","kb","_emscripten_bind_VoidPtr___destroy___0","lb","_emscripten_bind_HyperedgeImprover_HyperedgeImprover_0","mb","_emscripten_bind_HyperedgeImprover_clear_0","u","nb","_emscripten_bind_HyperedgeImprover_setRouter_1","ob","_emscripten_bind_HyperedgeImprover___destroy___0","w","pb","_emscripten_bind_Box_Box_0","qb","_emscripten_bind_Box_length_1","rb","_emscripten_bind_Box_width_0","z","sb","_emscripten_bind_Box_height_0","A","tb","_emscripten_bind_Box_get_min_0","B","ub","_emscripten_bind_Box_set_min_1","C","vb","_emscripten_bind_Box_get_max_0","wb","_emscripten_bind_Box_set_max_1","E","xb","_emscripten_bind_Box___destroy___0","yb","_emscripten_bind_PolygonInterface_clear_0","G","zb","_emscripten_bind_PolygonInterface_empty_0","H","Ab","_emscripten_bind_PolygonInterface_size_0","Bb","_emscripten_bind_PolygonInterface_id_0","J","Cb","_emscripten_bind_PolygonInterface_at_1","K","Db","_emscripten_bind_PolygonInterface_boundingRectPolygon_0","L","Eb","_emscripten_bind_PolygonInterface_offsetBoundingBox_1","M","Fb","_emscripten_bind_PolygonInterface_offsetPolygon_1","N","Gb","_emscripten_bind_PolygonInterface___destroy___0","O","Hb","_emscripten_bind_Polygon_Polygon_0","Ib","_emscripten_bind_Polygon_Polygon_1","Q","Jb","_emscripten_bind_Polygon_setPoint_2","R","Kb","_emscripten_bind_Polygon_size_0","S","Lb","_emscripten_bind_Polygon_get_ps_1","T","Mb","_emscripten_bind_Polygon_set_ps_2","U","Nb","_emscripten_bind_Polygon___destroy___0","V","Ob","_emscripten_bind_Point_Point_0","W","Pb","_emscripten_bind_Point_Point_2","X","Qb","_emscripten_bind_Point_equal_1","Y","Rb","_emscripten_bind_Point_get_x_0","Z","Sb","_emscripten_bind_Point_set_x_1","Tb","_emscripten_bind_Point_get_y_0","$","Ub","_emscripten_bind_Point_set_y_1","Vb","_emscripten_bind_Point_get_id_0","Wb","_emscripten_bind_Point_set_id_1","Xb","_emscripten_bind_Point_get_vn_0","Yb","_emscripten_bind_Point_set_vn_1","Zb","_emscripten_bind_Point___destroy___0","$b","_emscripten_bind_Rectangle_Rectangle_3","ga","ac","_emscripten_bind_Rectangle___destroy___0","bc","_emscripten_bind_HyperedgeTreeNode_HyperedgeTreeNode_0","cc","_emscripten_bind_HyperedgeTreeNode_writeEdgesToConns_2","dc","_emscripten_bind_HyperedgeTreeNode___destroy___0","ec","_emscripten_bind_HyperedgeTreeEdge_HyperedgeTreeEdge_3","fc","_emscripten_bind_HyperedgeTreeEdge___destroy___0","hc","_emscripten_bind_AStarPath_AStarPath_0","ic","_emscripten_bind_AStarPath_search_4","jc","_emscripten_bind_AStarPath___destroy___0","kc","_emscripten_bind_ConnEnd_ConnEnd_1","lc","_emscripten_bind_ConnEnd_ConnEnd_2","mc","_emscripten_bind_ConnEnd___destroy___0","nc","_emscripten_bind_ActionInfo_ActionInfo_2","oc","_emscripten_bind_ActionInfo_ActionInfo_3","pc","_emscripten_bind_ActionInfo_ActionInfo_4","va","qc","_emscripten_bind_ActionInfo_obstacle_0","rc","_emscripten_bind_ActionInfo_shape_0","sc","_emscripten_bind_ActionInfo_conn_0","tc","_emscripten_bind_ActionInfo_junction_0","uc","_emscripten_bind_ActionInfo_addConnEndUpdate_3","vc","_emscripten_bind_ActionInfo_get_type_0","wc","_emscripten_bind_ActionInfo_set_type_1","xc","_emscripten_bind_ActionInfo_get_objPtr_0","yc","_emscripten_bind_ActionInfo_set_objPtr_1","zc","_emscripten_bind_ActionInfo_get_newPoly_0","Ac","_emscripten_bind_ActionInfo_set_newPoly_1","Bc","_emscripten_bind_ActionInfo_get_newPosition_0","Cc","_emscripten_bind_ActionInfo_set_newPosition_1","Dc","_emscripten_bind_ActionInfo_get_firstMove_0","Ec","_emscripten_bind_ActionInfo_set_firstMove_1","Fc","_emscripten_bind_ActionInfo___destroy___0","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_2","Hc","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_3","Ic","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_6","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_7","_emscripten_bind_ShapeConnectionPin_setConnectionCost_1","_emscripten_bind_ShapeConnectionPin_position_0","_emscripten_bind_ShapeConnectionPin_position_1","_emscripten_bind_ShapeConnectionPin_directions_0","Ta","_emscripten_bind_ShapeConnectionPin_setExclusive_1","_emscripten_bind_ShapeConnectionPin_isExclusive_0","Qc","_emscripten_bind_ShapeConnectionPin___destroy___0","_emscripten_bind_Obstacle_id_0","Sc","_emscripten_bind_Obstacle_polygon_0","_emscripten_bind_Obstacle_router_0","_emscripten_bind_Obstacle_position_0","Vc","_emscripten_bind_Obstacle___destroy___0","Wc","_emscripten_bind_JunctionRef_JunctionRef_2","Xc","_emscripten_bind_JunctionRef_JunctionRef_3","Yc","_emscripten_bind_JunctionRef_position_0","Zc","_emscripten_bind_JunctionRef___destroy___0","$c","_emscripten_bind_ShapeRef_ShapeRef_2","ad","_emscripten_bind_ShapeRef_ShapeRef_3","bd","_emscripten_bind_ShapeRef_polygon_0","cd","_emscripten_bind_ShapeRef_position_0","dd","_emscripten_bind_ShapeRef___destroy___0","ed","_emscripten_bind_HyperedgeNewAndDeletedObjectLists___destroy___0","fd","_emscripten_bind_HyperedgeRerouter_HyperedgeRerouter_0","gd","_emscripten_bind_HyperedgeRerouter_registerHyperedgeForRerouting_1","hd","_emscripten_bind_HyperedgeRerouter___destroy___0","_emscripten_bind_VertInf___destroy___0","jd","_emscripten_bind_VertID_VertID_0","kd","_emscripten_bind_VertID_VertID_2","ld","_emscripten_bind_VertID_VertID_3","md","_emscripten_bind_VertID_get_objID_0","nd","_emscripten_bind_VertID_set_objID_1","od","_emscripten_bind_VertID_get_vn_0","pd","_emscripten_bind_VertID_set_vn_1","qd","_emscripten_bind_VertID_get_props_0","_emscripten_bind_VertID_set_props_1","sd","_emscripten_bind_VertID_get_src_0","_emscripten_bind_VertID_get_tar_0","_emscripten_bind_VertID_get_PROP_ConnPoint_0","vd","_emscripten_bind_VertID_get_PROP_OrthShapeEdge_0","wd","_emscripten_bind_VertID_get_PROP_ConnectionPin_0","xd","_emscripten_bind_VertID_get_PROP_ConnCheckpoint_0","yd","_emscripten_bind_VertID_get_PROP_DummyPinHelper_0","zd","_emscripten_bind_VertID___destroy___0","Ad","_emscripten_bind_MinimumTerminalSpanningTree___destroy___0","Bd","_emscripten_bind_Checkpoint_Checkpoint_1","Cd","_emscripten_bind_Checkpoint___destroy___0","Dd","_emscripten_bind_ConnRef_ConnRef_3","Ed","_emscripten_bind_ConnRef_ConnRef_4","Fd","_emscripten_bind_ConnRef_id_0","_emscripten_bind_ConnRef_setCallback_2","_emscripten_bind_ConnRef_setSourceEndpoint_1","Id","_emscripten_bind_ConnRef_setDestEndpoint_1","Jd","_emscripten_bind_ConnRef_routingType_0","_emscripten_bind_ConnRef_setRoutingType_1","_emscripten_bind_ConnRef_displayRoute_0","_emscripten_bind_ConnRef___destroy___0","_emscripten_bind_EdgeInf_EdgeInf_2","_emscripten_bind_EdgeInf_EdgeInf_3","Pd","_emscripten_bind_EdgeInf___destroy___0","Qd","_emscripten_bind_LineRep_get_begin_0","Rd","_emscripten_bind_LineRep_set_begin_1","Sd","_emscripten_bind_LineRep_get_end_0","Td","_emscripten_bind_LineRep_set_end_1","Ud","_emscripten_bind_LineRep___destroy___0","Vd","_emscripten_bind_Router_Router_1","Wd","_emscripten_bind_Router_processTransaction_0","Xd","_emscripten_bind_Router_printInfo_0","Yd","_emscripten_bind_Router_deleteConnector_1","Zd","_emscripten_bind_Router_moveShape_3","$d","_emscripten_bind_Router___destroy___0","ae","_emscripten_enum_Avoid_ConnDirFlag_ConnDirNone","be","_emscripten_enum_Avoid_ConnDirFlag_ConnDirUp","ce","_emscripten_enum_Avoid_ConnDirFlag_ConnDirDown","gc","de","_emscripten_enum_Avoid_ConnDirFlag_ConnDirLeft","ee","_emscripten_enum_Avoid_ConnDirFlag_ConnDirRight","fe","_emscripten_enum_Avoid_ConnDirFlag_ConnDirAll","ge","_emscripten_enum_Avoid_ConnEndType_ConnEndPoint","he","_emscripten_enum_Avoid_ConnEndType_ConnEndShapePin","ie","_emscripten_enum_Avoid_ConnEndType_ConnEndJunction","je","_emscripten_enum_Avoid_ConnEndType_ConnEndEmpty","ke","_emscripten_enum_Avoid_ActionType_ShapeMove","le","_emscripten_enum_Avoid_ActionType_ShapeAdd","me","_emscripten_enum_Avoid_ActionType_ShapeRemove","ne","_emscripten_enum_Avoid_ActionType_JunctionMove","oe","_emscripten_enum_Avoid_ActionType_JunctionAdd","pe","_emscripten_enum_Avoid_ActionType_JunctionRemove","qe","_emscripten_enum_Avoid_ActionType_ConnChange","re","_emscripten_enum_Avoid_ActionType_ConnectionPinChange","se","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW90","te","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW180","ue","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW270","ve","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipX","we","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipY","xe","_emscripten_enum_Avoid_ConnType_ConnType_None","ye","_emscripten_enum_Avoid_ConnType_ConnType_PolyLine","ze","_emscripten_enum_Avoid_ConnType_ConnType_Orthogonal","Ae","_emscripten_enum_Avoid_RouterFlag_PolyLineRouting","Be","_emscripten_enum_Avoid_RouterFlag_OrthogonalRouting","Ee","calledRun","onRuntimeInitialized","postRun","setStatus","De","preInit","WrapperObject","getCache","wrapPointer","castObject","NULL","__destroy__","getPointer","Fe","Ge","He","Ie","_emscripten_bind_Point_Point_1","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_4","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_5","_emscripten_bind_VertID_VertID_1","Je","VoidPtr","HyperedgeImprover","setRouter","Box","get_min","set_min","get_max","set_max","PolygonInterface","at","boundingRectPolygon","offsetBoundingBox","offsetPolygon","Polygon","setPoint","get_ps","set_ps","Point","get_x","set_x","get_y","set_y","get_id","set_id","get_vn","set_vn","Rectangle","HyperedgeTreeNode","writeEdgesToConns","HyperedgeTreeEdge","AStarPath","search","ConnEnd","ActionInfo","obstacle","shape","conn","junction","addConnEndUpdate","get_type","set_type","get_objPtr","set_objPtr","get_newPoly","set_newPoly","get_newPosition","set_newPosition","get_firstMove","set_firstMove","ShapeConnectionPin","setConnectionCost","directions","setExclusive","isExclusive","Obstacle","polygon","JunctionRef","ShapeRef","HyperedgeNewAndDeletedObjectLists","HyperedgeRerouter","registerHyperedgeForRerouting","VertInf","VertID","get_objID","set_objID","get_props","set_props","get_src","get_tar","get_PROP_ConnPoint","get_PROP_OrthShapeEdge","get_PROP_ConnectionPin","get_PROP_ConnCheckpoint","get_PROP_DummyPinHelper","MinimumTerminalSpanningTree","Checkpoint","ConnRef","setCallback","WeakMap","grow","parameters","results","Module","setSourceEndpoint","setDestEndpoint","routingType","setRoutingType","displayRoute","EdgeInf","LineRep","get_begin","set_begin","get_end","set_end","Router","processTransaction","printInfo","deleteConnector","moveShape","ConnDirNone","ConnDirUp","ConnDirDown","ConnDirLeft","ConnDirRight","ConnDirAll","ConnEndPoint","ConnEndShapePin","ConnEndJunction","ConnEndEmpty","ShapeMove","ShapeAdd","ShapeRemove","JunctionMove","JunctionAdd","JunctionRemove","ConnChange","ConnectionPinChange","TransformationType_CW90","TransformationType_CW180","TransformationType_CW270","TransformationType_FlipX","TransformationType_FlipY","ConnType_None","ConnType_PolyLine","ConnType_Orthogonal","PolyLineRouting","OrthogonalRouting","AvoidLib","avoidLib","async","getInstance","renderedTimes","Avoid","avoidRouter","avoidRoutes","LibavoidRouter","getAllBoundsAwareChildren","getCenterPoint","currentElement","avoidRoutesToEdgeRoutes","connection","sprottyRoute","connRef","edges","connections","sourceConnectionEnd","targetConnectionEnd","connectables","rectangle","edgeRoutes"],"sourceRoot":""}