{"version":3,"file":"index.js","mappings":"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","sources":["webpack://MyLibrary/webpack/universalModuleDefinition","webpack://MyLibrary/../sprotty/lib/base/actions/action-dispatcher.js","webpack://MyLibrary/../sprotty/lib/base/actions/action-handler.js","webpack://MyLibrary/../sprotty/lib/base/actions/action.js","webpack://MyLibrary/../sprotty/lib/base/actions/diagram-locker.js","webpack://MyLibrary/../sprotty/lib/base/animations/animation-frame-syncer.js","webpack://MyLibrary/../sprotty/lib/base/animations/animation.js","webpack://MyLibrary/../sprotty/lib/base/animations/easing.js","webpack://MyLibrary/../sprotty/lib/base/commands/command-registration.js","webpack://MyLibrary/../sprotty/lib/base/commands/command-stack-options.js","webpack://MyLibrary/../sprotty/lib/base/commands/command-stack.js","webpack://MyLibrary/../sprotty/lib/base/commands/command.js","webpack://MyLibrary/../sprotty/lib/base/commands/request-command.js","webpack://MyLibrary/../sprotty/lib/base/di.config.js","webpack://MyLibrary/../sprotty/lib/base/features/initialize-canvas.js","webpack://MyLibrary/../sprotty/lib/base/features/set-model.js","webpack://MyLibrary/../sprotty/lib/base/model/smodel-factory.js","webpack://MyLibrary/../sprotty/lib/base/model/smodel-utils.js","webpack://MyLibrary/../sprotty/lib/base/model/smodel.js","webpack://MyLibrary/../sprotty/lib/base/tool-manager/tool-manager.js","webpack://MyLibrary/../sprotty/lib/base/tool-manager/tool.js","webpack://MyLibrary/../sprotty/lib/base/types.js","webpack://MyLibrary/../sprotty/lib/base/ui-extensions/ui-extension-registry.js","webpack://MyLibrary/../sprotty/lib/base/ui-extensions/ui-extension.js","webpack://MyLibrary/../sprotty/lib/base/views/css-class-postprocessor.js","webpack://MyLibrary/../sprotty/lib/base/views/dom-helper.js","webpack://MyLibrary/../sprotty/lib/base/views/id-postprocessor.js","webpack://MyLibrary/../sprotty/lib/base/views/key-tool.js","webpack://MyLibrary/../sprotty/lib/base/views/mouse-tool.js","webpack://MyLibrary/../sprotty/lib/base/views/thunk-view.js","webpack://MyLibrary/../sprotty/lib/base/views/view.js","webpack://MyLibrary/../sprotty/lib/base/views/viewer-cache.js","webpack://MyLibrary/../sprotty/lib/base/views/viewer-options.js","webpack://MyLibrary/../sprotty/lib/base/views/viewer.js","webpack://MyLibrary/../sprotty/lib/base/views/vnode-postprocessor.js","webpack://MyLibrary/../sprotty/lib/base/views/vnode-utils.js","webpack://MyLibrary/../sprotty/lib/features/bounds/abstract-layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/bounds-manipulation.js","webpack://MyLibrary/../sprotty/lib/features/bounds/di.config.js","webpack://MyLibrary/../sprotty/lib/features/bounds/hbox-layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/hidden-bounds-updater.js","webpack://MyLibrary/../sprotty/lib/features/bounds/layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/model.js","webpack://MyLibrary/../sprotty/lib/features/bounds/resize.js","webpack://MyLibrary/../sprotty/lib/features/bounds/stack-layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/vbox-layout.js","webpack://MyLibrary/../sprotty/lib/features/bounds/views.js","webpack://MyLibrary/../sprotty/lib/features/button/button-handler.js","webpack://MyLibrary/../sprotty/lib/features/button/di.config.js","webpack://MyLibrary/../sprotty/lib/features/button/model.js","webpack://MyLibrary/../sprotty/lib/features/command-palette/action-providers.js","webpack://MyLibrary/../sprotty/lib/features/command-palette/command-palette.js","webpack://MyLibrary/../sprotty/lib/features/command-palette/di.config.js","webpack://MyLibrary/../sprotty/lib/features/context-menu/context-menu-service.js","webpack://MyLibrary/../sprotty/lib/features/context-menu/di.config.js","webpack://MyLibrary/../sprotty/lib/features/context-menu/menu-providers.js","webpack://MyLibrary/../sprotty/lib/features/context-menu/mouse-listener.js","webpack://MyLibrary/../sprotty/lib/features/decoration/decoration-placer.js","webpack://MyLibrary/../sprotty/lib/features/decoration/di.config.js","webpack://MyLibrary/../sprotty/lib/features/decoration/model.js","webpack://MyLibrary/../sprotty/lib/features/decoration/views.js","webpack://MyLibrary/../sprotty/lib/features/edge-intersection/di.config.js","webpack://MyLibrary/../sprotty/lib/features/edge-intersection/intersection-finder.js","webpack://MyLibrary/../sprotty/lib/features/edge-intersection/sweepline.js","webpack://MyLibrary/../sprotty/lib/features/edge-layout/di.config.js","webpack://MyLibrary/../sprotty/lib/features/edge-layout/edge-layout.js","webpack://MyLibrary/../sprotty/lib/features/edge-layout/model.js","webpack://MyLibrary/../sprotty/lib/features/edit/create-on-drag.js","webpack://MyLibrary/../sprotty/lib/features/edit/create.js","webpack://MyLibrary/../sprotty/lib/features/edit/delete.js","webpack://MyLibrary/../sprotty/lib/features/edit/di.config.js","webpack://MyLibrary/../sprotty/lib/features/edit/edit-label-ui.js","webpack://MyLibrary/../sprotty/lib/features/edit/edit-label.js","webpack://MyLibrary/../sprotty/lib/features/edit/edit-routing.js","webpack://MyLibrary/../sprotty/lib/features/edit/model.js","webpack://MyLibrary/../sprotty/lib/features/edit/reconnect.js","webpack://MyLibrary/../sprotty/lib/features/expand/di.config.js","webpack://MyLibrary/../sprotty/lib/features/expand/expand.js","webpack://MyLibrary/../sprotty/lib/features/expand/model.js","webpack://MyLibrary/../sprotty/lib/features/expand/views.js","webpack://MyLibrary/../sprotty/lib/features/export/di.config.js","webpack://MyLibrary/../sprotty/lib/features/export/export.js","webpack://MyLibrary/../sprotty/lib/features/export/model.js","webpack://MyLibrary/../sprotty/lib/features/export/svg-exporter.js","webpack://MyLibrary/../sprotty/lib/features/fade/di.config.js","webpack://MyLibrary/../sprotty/lib/features/fade/fade.js","webpack://MyLibrary/../sprotty/lib/features/fade/model.js","webpack://MyLibrary/../sprotty/lib/features/hover/di.config.js","webpack://MyLibrary/../sprotty/lib/features/hover/hover.js","webpack://MyLibrary/../sprotty/lib/features/hover/model.js","webpack://MyLibrary/../sprotty/lib/features/hover/popup-position-updater.js","webpack://MyLibrary/../sprotty/lib/features/move/di.config.js","webpack://MyLibrary/../sprotty/lib/features/move/model.js","webpack://MyLibrary/../sprotty/lib/features/move/move.js","webpack://MyLibrary/../sprotty/lib/features/move/snap.js","webpack://MyLibrary/../sprotty/lib/features/nameable/model.js","webpack://MyLibrary/../sprotty/lib/features/open/di.config.js","webpack://MyLibrary/../sprotty/lib/features/open/model.js","webpack://MyLibrary/../sprotty/lib/features/open/open.js","webpack://MyLibrary/../sprotty/lib/features/routing/anchor.js","webpack://MyLibrary/../sprotty/lib/features/routing/di.config.js","webpack://MyLibrary/../sprotty/lib/features/routing/linear-edge-router.js","webpack://MyLibrary/../sprotty/lib/features/routing/manhattan-anchors.js","webpack://MyLibrary/../sprotty/lib/features/routing/manhattan-edge-router.js","webpack://MyLibrary/../sprotty/lib/features/routing/model.js","webpack://MyLibrary/../sprotty/lib/features/routing/polyline-anchors.js","webpack://MyLibrary/../sprotty/lib/features/routing/polyline-edge-router.js","webpack://MyLibrary/../sprotty/lib/features/routing/routing.js","webpack://MyLibrary/../sprotty/lib/features/routing/views.js","webpack://MyLibrary/../sprotty/lib/features/select/di.config.js","webpack://MyLibrary/../sprotty/lib/features/select/model.js","webpack://MyLibrary/../sprotty/lib/features/select/select.js","webpack://MyLibrary/../sprotty/lib/features/undo-redo/di.config.js","webpack://MyLibrary/../sprotty/lib/features/undo-redo/undo-redo.js","webpack://MyLibrary/../sprotty/lib/features/update/di.config.js","webpack://MyLibrary/../sprotty/lib/features/update/model-matching.js","webpack://MyLibrary/../sprotty/lib/features/update/update-model.js","webpack://MyLibrary/../sprotty/lib/features/viewport/center-fit.js","webpack://MyLibrary/../sprotty/lib/features/viewport/di.config.js","webpack://MyLibrary/../sprotty/lib/features/viewport/model.js","webpack://MyLibrary/../sprotty/lib/features/viewport/scroll.js","webpack://MyLibrary/../sprotty/lib/features/viewport/viewport-root.js","webpack://MyLibrary/../sprotty/lib/features/viewport/viewport.js","webpack://MyLibrary/../sprotty/lib/features/viewport/zoom.js","webpack://MyLibrary/../sprotty/lib/features/zorder/di.config.js","webpack://MyLibrary/../sprotty/lib/features/zorder/zorder.js","webpack://MyLibrary/../sprotty/lib/graph/di.config.js","webpack://MyLibrary/../sprotty/lib/graph/sgraph-factory.js","webpack://MyLibrary/../sprotty/lib/graph/sgraph.js","webpack://MyLibrary/../sprotty/lib/graph/views.js","webpack://MyLibrary/../sprotty/lib/index.js","webpack://MyLibrary/../sprotty/lib/lib/generic-views.js","webpack://MyLibrary/../sprotty/lib/lib/html-views.js","webpack://MyLibrary/../sprotty/lib/lib/jsx.js","webpack://MyLibrary/../sprotty/lib/lib/model.js","webpack://MyLibrary/../sprotty/lib/lib/modules.js","webpack://MyLibrary/../sprotty/lib/lib/svg-views.js","webpack://MyLibrary/../sprotty/lib/lib/virtualize.js","webpack://MyLibrary/../sprotty/lib/model-source/commit-model.js","webpack://MyLibrary/../sprotty/lib/model-source/di.config.js","webpack://MyLibrary/../sprotty/lib/model-source/diagram-server.js","webpack://MyLibrary/../sprotty/lib/model-source/local-model-source.js","webpack://MyLibrary/../sprotty/lib/model-source/logging.js","webpack://MyLibrary/../sprotty/lib/model-source/model-source.js","webpack://MyLibrary/../sprotty/lib/model-source/websocket.js","webpack://MyLibrary/../sprotty/lib/utils/async.js","webpack://MyLibrary/../sprotty/lib/utils/browser.js","webpack://MyLibrary/../sprotty/lib/utils/color.js","webpack://MyLibrary/../sprotty/lib/utils/geometry.js","webpack://MyLibrary/../sprotty/lib/utils/inversify.js","webpack://MyLibrary/../sprotty/lib/utils/iterable.js","webpack://MyLibrary/../sprotty/lib/utils/keyboard.js","webpack://MyLibrary/../sprotty/lib/utils/logging.js","webpack://MyLibrary/../sprotty/lib/utils/object.js","webpack://MyLibrary/../sprotty/lib/utils/registry.js","webpack://MyLibrary/../sprotty/node_modules/autocompleter/autocomplete.js","webpack://MyLibrary/../sprotty/node_modules/file-saver/dist/FileSaver.min.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/decorator_utils.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/inject.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/injectable.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/multi_inject.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/named.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/optional.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/post_construct.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/tagged.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/target_name.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/annotation/unmanaged.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/bindings/binding.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/bindings/binding_count.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/constants/error_msgs.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/constants/literal_types.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/constants/metadata_keys.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/container/container.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/container/container_module.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/container/container_snapshot.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/container/lookup.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/inversify.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/context.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/metadata.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/metadata_reader.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/plan.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/planner.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/queryable_string.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/reflection_utils.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/request.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/planning/target.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/resolution/instantiation.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/resolution/resolver.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_in_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_in_when_on_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_on_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_to_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_when_on_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/binding_when_syntax.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/syntax/constraint_helpers.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/utils/binding_utils.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/utils/exceptions.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/utils/id.js","webpack://MyLibrary/../sprotty/node_modules/inversify/lib/utils/serialization.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/htmldomapi.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/vnode.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/is.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/init.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/h.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/thunk.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/helpers/attachto.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/tovnode.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/attributes.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/class.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/dataset.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/eventlisteners.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/props.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/modules/style.js","webpack://MyLibrary/../sprotty/node_modules/snabbdom/build/jsx.js","webpack://MyLibrary/../sprotty/node_modules/tinyqueue/index.js","webpack://MyLibrary/external node-commonjs \"fs\"","webpack://MyLibrary/external node-commonjs \"path\"","webpack://MyLibrary/webpack/bootstrap","webpack://MyLibrary/webpack/runtime/define property getters","webpack://MyLibrary/webpack/runtime/hasOwnProperty shorthand","webpack://MyLibrary/webpack/runtime/make namespace object","webpack://MyLibrary/../Hnatiuj.Adaptagrams/src/generated/libavoid.js","webpack://MyLibrary/../Hnatiuj.Adaptagrams/src/index.js","webpack://MyLibrary/./src/libavoid-router.ts","webpack://MyLibrary/./src/index.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MyLibrary\"] = factory();\n\telse\n\t\troot[\"MyLibrary\"] = factory();\n})(global, function() {\nreturn ","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar async_1 = require(\"../../utils/async\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\nvar set_model_1 = require(\"../features/set-model\");\nvar undo_redo_1 = require(\"../../features/undo-redo/undo-redo\");\nvar action_1 = require(\"./action\");\n/**\n * Collects actions, converts them to commands and dispatches them.\n * Also acts as the proxy to model sources such as diagram servers.\n */\nvar ActionDispatcher = /** @class */ (function () {\n    function ActionDispatcher() {\n        this.postponedActions = [];\n        this.requests = new Map();\n    }\n    ActionDispatcher.prototype.initialize = function () {\n        var _this = this;\n        if (!this.initialized) {\n            this.initialized = this.actionHandlerRegistryProvider().then(function (registry) {\n                _this.actionHandlerRegistry = registry;\n                _this.handleAction(new set_model_1.SetModelAction(smodel_factory_1.EMPTY_ROOT));\n            });\n        }\n        return this.initialized;\n    };\n    /**\n     * Dispatch an action by querying all handlers that are registered for its kind.\n     * The returned promise is resolved when all handler results (commands or actions)\n     * have been processed.\n     */\n    ActionDispatcher.prototype.dispatch = function (action) {\n        var _this = this;\n        return this.initialize().then(function () {\n            if (_this.blockUntil !== undefined) {\n                return _this.handleBlocked(action, _this.blockUntil);\n            }\n            else if (_this.diagramLocker.isAllowed(action)) {\n                return _this.handleAction(action);\n            }\n            return undefined;\n        });\n    };\n    /**\n     * Calls `dispatch` on every action in the given array. The returned promise\n     * is resolved when the promises of all `dispatch` calls have been resolved.\n     */\n    ActionDispatcher.prototype.dispatchAll = function (actions) {\n        var _this = this;\n        return Promise.all(actions.map(function (action) { return _this.dispatch(action); }));\n    };\n    /**\n     * Dispatch a request. The returned promise is resolved when a response with matching\n     * identifier is dispatched. That response is _not_ passed to the registered action\n     * handlers. Instead, it is the responsibility of the caller of this method to handle\n     * the response properly. For example, it can be sent to the registered handlers by\n     * passing it again to the `dispatch` method.\n     */\n    ActionDispatcher.prototype.request = function (action) {\n        if (!action.requestId) {\n            return Promise.reject(new Error('Request without requestId'));\n        }\n        var deferred = new async_1.Deferred();\n        this.requests.set(action.requestId, deferred);\n        this.dispatch(action);\n        return deferred.promise;\n    };\n    ActionDispatcher.prototype.handleAction = function (action) {\n        if (action.kind === undo_redo_1.UndoAction.KIND) {\n            return this.commandStack.undo().then(function () { });\n        }\n        if (action.kind === undo_redo_1.RedoAction.KIND) {\n            return this.commandStack.redo().then(function () { });\n        }\n        if (action_1.isResponseAction(action)) {\n            var deferred = this.requests.get(action.responseId);\n            if (deferred !== undefined) {\n                this.requests.delete(action.responseId);\n                if (action.kind === action_1.RejectAction.KIND) {\n                    var rejectAction = action;\n                    deferred.reject(new Error(rejectAction.message));\n                    this.logger.warn(this, \"Request with id \" + action.responseId + \" failed.\", rejectAction.message, rejectAction.detail);\n                }\n                else {\n                    deferred.resolve(action);\n                }\n                return Promise.resolve();\n            }\n            this.logger.log(this, 'No matching request for response', action);\n        }\n        var handlers = this.actionHandlerRegistry.get(action.kind);\n        if (handlers.length === 0) {\n            this.logger.warn(this, 'Missing handler for action', action);\n            var error = new Error(\"Missing handler for action '\" + action.kind + \"'\");\n            if (action_1.isRequestAction(action)) {\n                var deferred = this.requests.get(action.requestId);\n                if (deferred !== undefined) {\n                    this.requests.delete(action.requestId);\n                    deferred.reject(error);\n                }\n            }\n            return Promise.reject(error);\n        }\n        this.logger.log(this, 'Handle', action);\n        var promises = [];\n        for (var _i = 0, handlers_1 = handlers; _i < handlers_1.length; _i++) {\n            var handler = handlers_1[_i];\n            var result = handler.handle(action);\n            if (action_1.isAction(result)) {\n                promises.push(this.dispatch(result));\n            }\n            else if (result !== undefined) {\n                promises.push(this.commandStack.execute(result));\n                this.blockUntil = result.blockUntil;\n            }\n        }\n        return Promise.all(promises);\n    };\n    ActionDispatcher.prototype.handleBlocked = function (action, predicate) {\n        var _this = this;\n        if (predicate(action)) {\n            this.blockUntil = undefined;\n            var result = this.handleAction(action);\n            var actions = this.postponedActions;\n            this.postponedActions = [];\n            for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n                var a = actions_1[_i];\n                this.dispatch(a.action).then(a.resolve, a.reject);\n            }\n            return result;\n        }\n        else {\n            this.logger.log(this, 'Action is postponed due to block condition', action);\n            return new Promise(function (resolve, reject) {\n                _this.postponedActions.push({ action: action, resolve: resolve, reject: reject });\n            });\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ActionHandlerRegistryProvider),\n        __metadata(\"design:type\", Function)\n    ], ActionDispatcher.prototype, \"actionHandlerRegistryProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ICommandStack),\n        __metadata(\"design:type\", Object)\n    ], ActionDispatcher.prototype, \"commandStack\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], ActionDispatcher.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.AnimationFrameSyncer),\n        __metadata(\"design:type\", animation_frame_syncer_1.AnimationFrameSyncer)\n    ], ActionDispatcher.prototype, \"syncer\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IDiagramLocker),\n        __metadata(\"design:type\", Object)\n    ], ActionDispatcher.prototype, \"diagramLocker\", void 0);\n    ActionDispatcher = __decorate([\n        inversify_1.injectable()\n    ], ActionDispatcher);\n    return ActionDispatcher;\n}());\nexports.ActionDispatcher = ActionDispatcher;\n//# sourceMappingURL=action-dispatcher.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar inversify_2 = require(\"../../utils/inversify\");\n/**\n * The action handler registry maps actions to their handlers using the Action.kind property.\n */\nvar ActionHandlerRegistry = /** @class */ (function (_super) {\n    __extends(ActionHandlerRegistry, _super);\n    function ActionHandlerRegistry(registrations, initializers) {\n        var _this = _super.call(this) || this;\n        registrations.forEach(function (registration) {\n            return _this.register(registration.actionKind, registration.factory());\n        });\n        initializers.forEach(function (initializer) {\n            return _this.initializeActionHandler(initializer);\n        });\n        return _this;\n    }\n    ActionHandlerRegistry.prototype.initializeActionHandler = function (initializer) {\n        initializer.initialize(this);\n    };\n    ActionHandlerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ActionHandlerRegistration)), __param(0, inversify_1.optional()),\n        __param(1, inversify_1.multiInject(types_1.TYPES.IActionHandlerInitializer)), __param(1, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array, Array])\n    ], ActionHandlerRegistry);\n    return ActionHandlerRegistry;\n}(registry_1.MultiInstanceRegistry));\nexports.ActionHandlerRegistry = ActionHandlerRegistry;\n/**\n * Utility function to register an action handler for an action kind.\n */\nfunction configureActionHandler(context, kind, constr) {\n    if (typeof constr === 'function') {\n        if (!inversify_2.isInjectable(constr)) {\n            throw new Error(\"Action handlers should be @injectable: \" + constr.name);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(types_1.TYPES.ActionHandlerRegistration).toDynamicValue(function (ctx) { return ({\n        actionKind: kind,\n        factory: function () { return ctx.container.get(constr); }\n    }); });\n}\nexports.configureActionHandler = configureActionHandler;\n//# sourceMappingURL=action-handler.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar object_1 = require(\"../../utils/object\");\nfunction isAction(object) {\n    return object_1.hasOwnProperty(object, 'kind', 'string');\n}\nexports.isAction = isAction;\nfunction isRequestAction(object) {\n    return isAction(object) && object_1.hasOwnProperty(object, 'requestId', 'string');\n}\nexports.isRequestAction = isRequestAction;\nvar nextRequestId = 1;\n/**\n * Generate a unique `requestId` for a request action.\n */\nfunction generateRequestId() {\n    return (nextRequestId++).toString();\n}\nexports.generateRequestId = generateRequestId;\nfunction isResponseAction(object) {\n    return isAction(object) && object_1.hasOwnProperty(object, 'responseId', 'string')\n        && object.responseId !== '';\n}\nexports.isResponseAction = isResponseAction;\n/**\n * A reject action is fired to indicate that a request must be rejected.\n */\nvar RejectAction = /** @class */ (function () {\n    function RejectAction(message, responseId, detail) {\n        this.message = message;\n        this.responseId = responseId;\n        this.detail = detail;\n        this.kind = RejectAction.KIND;\n    }\n    RejectAction.KIND = 'rejectRequest';\n    return RejectAction;\n}());\nexports.RejectAction = RejectAction;\n/**\n * A list of actions with a label.\n * Labeled actions are used to denote a group of actions in a user-interface context, e.g.,\n * to define an entry in the command palette or in the context menu.\n */\nvar LabeledAction = /** @class */ (function () {\n    function LabeledAction(label, actions, icon) {\n        this.label = label;\n        this.actions = actions;\n        this.icon = icon;\n    }\n    return LabeledAction;\n}());\nexports.LabeledAction = LabeledAction;\nfunction isLabeledAction(element) {\n    return element !== undefined\n        && element.label !== undefined\n        && element.actions !== undefined;\n}\nexports.isLabeledAction = isLabeledAction;\n//# sourceMappingURL=action.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar DefaultDiagramLocker = /** @class */ (function () {\n    function DefaultDiagramLocker() {\n    }\n    DefaultDiagramLocker.prototype.isAllowed = function (action) {\n        return true;\n    };\n    DefaultDiagramLocker = __decorate([\n        inversify_1.injectable()\n    ], DefaultDiagramLocker);\n    return DefaultDiagramLocker;\n}());\nexports.DefaultDiagramLocker = DefaultDiagramLocker;\n//# sourceMappingURL=diagram-locker.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar AnimationFrameSyncer = /** @class */ (function () {\n    function AnimationFrameSyncer() {\n        this.tasks = [];\n        this.endTasks = [];\n        this.triggered = false;\n    }\n    AnimationFrameSyncer.prototype.isAvailable = function () {\n        return typeof requestAnimationFrame === \"function\";\n    };\n    AnimationFrameSyncer.prototype.onNextFrame = function (task) {\n        this.tasks.push(task);\n        this.trigger();\n    };\n    AnimationFrameSyncer.prototype.onEndOfNextFrame = function (task) {\n        this.endTasks.push(task);\n        this.trigger();\n    };\n    AnimationFrameSyncer.prototype.trigger = function () {\n        var _this = this;\n        if (!this.triggered) {\n            this.triggered = true;\n            if (this.isAvailable())\n                requestAnimationFrame(function (time) { return _this.run(time); });\n            else\n                setTimeout(function (time) { return _this.run(time); });\n        }\n    };\n    AnimationFrameSyncer.prototype.run = function (time) {\n        var tasks = this.tasks;\n        var endTasks = this.endTasks;\n        this.triggered = false;\n        this.tasks = [];\n        this.endTasks = [];\n        tasks.forEach(function (task) { return task.call(undefined, time); });\n        endTasks.forEach(function (task) { return task.call(undefined, time); });\n    };\n    AnimationFrameSyncer = __decorate([\n        inversify_1.injectable()\n    ], AnimationFrameSyncer);\n    return AnimationFrameSyncer;\n}());\nexports.AnimationFrameSyncer = AnimationFrameSyncer;\n//# sourceMappingURL=animation-frame-syncer.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar easing_1 = require(\"./easing\");\n/**\n * An animation uses the rendering loop of the browser to smoothly\n * calculate a transition between two states of a model element.\n */\nvar Animation = /** @class */ (function () {\n    function Animation(context, ease) {\n        if (ease === void 0) { ease = easing_1.easeInOut; }\n        this.context = context;\n        this.ease = ease;\n    }\n    Animation.prototype.start = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            var start = undefined;\n            var frames = 0;\n            var lambda = function (time) {\n                frames++;\n                var dtime;\n                if (start === undefined) {\n                    start = time;\n                    dtime = 0;\n                }\n                else {\n                    dtime = time - start;\n                }\n                var t = Math.min(1, dtime / _this.context.duration);\n                var current = _this.tween(_this.ease(t), _this.context);\n                _this.context.modelChanged.update(current);\n                if (t === 1) {\n                    _this.context.logger.log(_this, (frames * 1000 / _this.context.duration) + ' fps');\n                    resolve(current);\n                }\n                else {\n                    _this.context.syncer.onNextFrame(lambda);\n                }\n            };\n            if (_this.context.syncer.isAvailable()) {\n                _this.context.syncer.onNextFrame(lambda);\n            }\n            else {\n                var finalModel = _this.tween(1, _this.context);\n                resolve(finalModel);\n            }\n        });\n    };\n    return Animation;\n}());\nexports.Animation = Animation;\nvar CompoundAnimation = /** @class */ (function (_super) {\n    __extends(CompoundAnimation, _super);\n    function CompoundAnimation(model, context, components, ease) {\n        if (components === void 0) { components = []; }\n        if (ease === void 0) { ease = easing_1.easeInOut; }\n        var _this = _super.call(this, context, ease) || this;\n        _this.model = model;\n        _this.context = context;\n        _this.components = components;\n        _this.ease = ease;\n        return _this;\n    }\n    CompoundAnimation.prototype.include = function (animation) {\n        this.components.push(animation);\n        return this;\n    };\n    CompoundAnimation.prototype.tween = function (t, context) {\n        for (var _i = 0, _a = this.components; _i < _a.length; _i++) {\n            var a = _a[_i];\n            a.tween(t, context);\n        }\n        return this.model;\n    };\n    return CompoundAnimation;\n}(Animation));\nexports.CompoundAnimation = CompoundAnimation;\n//# sourceMappingURL=animation.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Slows down animations towards the begin and the end.\n *\n * @param x the value between 0 (start of animation) and 1 (end of\n *     animation) linearly interpolated in time.\n * @returns {number} the eased value between 0 and 1\n */\nfunction easeInOut(x) {\n    if (x < 0.5)\n        return x * x * 2;\n    else\n        return 1 - (1 - x) * (1 - x) * 2;\n}\nexports.easeInOut = easeInOut;\n//# sourceMappingURL=easing.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar inversify_2 = require(\"../../utils/inversify\");\nvar types_1 = require(\"../types\");\nvar CommandActionHandler = /** @class */ (function () {\n    function CommandActionHandler(commandRegistration) {\n        this.commandRegistration = commandRegistration;\n    }\n    CommandActionHandler.prototype.handle = function (action) {\n        return this.commandRegistration.factory(action);\n    };\n    return CommandActionHandler;\n}());\nexports.CommandActionHandler = CommandActionHandler;\nvar CommandActionHandlerInitializer = /** @class */ (function () {\n    function CommandActionHandlerInitializer(registrations) {\n        this.registrations = registrations;\n    }\n    CommandActionHandlerInitializer.prototype.initialize = function (registry) {\n        this.registrations.forEach(function (registration) {\n            return registry.register(registration.kind, new CommandActionHandler(registration));\n        });\n    };\n    CommandActionHandlerInitializer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.CommandRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], CommandActionHandlerInitializer);\n    return CommandActionHandlerInitializer;\n}());\nexports.CommandActionHandlerInitializer = CommandActionHandlerInitializer;\n/**\n * Use this method in your DI configuration to register a new command to the diagram.\n */\nfunction configureCommand(context, constr) {\n    if (!inversify_2.isInjectable(constr)) {\n        throw new Error(\"Commands should be @injectable: \" + constr.name);\n    }\n    if (!context.isBound(constr)) {\n        context.bind(constr).toSelf();\n    }\n    context.bind(types_1.TYPES.CommandRegistration).toDynamicValue(function (ctx) { return ({\n        kind: constr.KIND,\n        factory: function (action) {\n            var childContainer = new inversify_1.Container();\n            childContainer.parent = ctx.container;\n            childContainer.bind(types_1.TYPES.Action).toConstantValue(action);\n            return childContainer.get(constr);\n        }\n    }); });\n}\nexports.configureCommand = configureCommand;\n//# sourceMappingURL=command-registration.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar object_1 = require(\"../../utils/object\");\nvar types_1 = require(\"../types\");\nfunction overrideCommandStackOptions(container, options) {\n    var defaultOptions = container.get(types_1.TYPES.CommandStackOptions);\n    object_1.safeAssign(defaultOptions, options);\n    return defaultOptions;\n}\nexports.overrideCommandStackOptions = overrideCommandStackOptions;\n//# sourceMappingURL=command-stack-options.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar smodel_1 = require(\"../model/smodel\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\nvar command_1 = require(\"./command\");\n/**\n * The implementation of the ICommandStack. Clients should not use this\n * class directly.\n *\n * The command stack holds the current model as the result of the current\n * promise. When a new command is executed/undone/redone, its execution is\n * chained using <code>Promise#then()</code> to the current Promise. This\n * way we can handle long running commands without blocking the current\n * thread.\n *\n * The command stack also does the special handling for special commands:\n *\n * System commands should be transparent to the user and as such be\n * automatically undone/redone with the next plain command. Additional care\n * must be taken that system commands that are executed after undo don't\n * break the correspondence between the topmost commands on the undo and\n * redo stacks.\n *\n * Hidden commands only tell the viewer to render a hidden model such that\n * its bounds can be extracted from the DOM and forwarded as separate actions.\n * Hidden commands should not leave any trace on the undo/redo/off stacks.\n *\n * Mergeable commands should be merged with their predecessor if possible,\n * such that e.g. multiple subsequent moves of the smae element can be undone\n * in one single step.\n */\nvar CommandStack = /** @class */ (function () {\n    function CommandStack() {\n        this.undoStack = [];\n        this.redoStack = [];\n        /**\n         * System commands should be transparent to the user in undo/redo\n         * operations. When a system command is executed when the redo\n         * stack is not empty, it is pushed to offStack instead.\n         *\n         * On redo, all commands form this stack are undone such that the\n         * redo operation gets the exact same model as when it was executed\n         * first.\n         *\n         * On undo, all commands form this stack are undone as well as\n         * system ommands should be transparent to the user.\n         */\n        this.offStack = [];\n    }\n    CommandStack.prototype.initialize = function () {\n        this.currentPromise = Promise.resolve({\n            main: {\n                model: this.modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT),\n                modelChanged: false,\n            },\n            hidden: {\n                model: this.modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT),\n                modelChanged: false,\n            },\n            popup: {\n                model: this.modelFactory.createRoot(smodel_factory_1.EMPTY_ROOT),\n                modelChanged: false,\n            }\n        });\n    };\n    Object.defineProperty(CommandStack.prototype, \"currentModel\", {\n        get: function () {\n            return this.currentPromise.then(function (state) { return state.main.model; });\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CommandStack.prototype.executeAll = function (commands) {\n        var _this = this;\n        commands.forEach(function (command) {\n            _this.logger.log(_this, 'Executing', command);\n            _this.handleCommand(command, command.execute, _this.mergeOrPush);\n        });\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.execute = function (command) {\n        this.logger.log(this, 'Executing', command);\n        this.handleCommand(command, command.execute, this.mergeOrPush);\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.undo = function () {\n        var _this = this;\n        this.undoOffStackSystemCommands();\n        this.undoPreceedingSystemCommands();\n        var command = this.undoStack[this.undoStack.length - 1];\n        if (command !== undefined && !this.isBlockUndo(command)) {\n            this.undoStack.pop();\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, function (c, context) {\n                _this.redoStack.push(c);\n            });\n        }\n        return this.thenUpdate();\n    };\n    CommandStack.prototype.redo = function () {\n        var _this = this;\n        this.undoOffStackSystemCommands();\n        var command = this.redoStack.pop();\n        if (command !== undefined) {\n            this.logger.log(this, 'Redoing', command);\n            this.handleCommand(command, command.redo, function (c, context) {\n                _this.pushToUndoStack(c);\n            });\n        }\n        this.redoFollowingSystemCommands();\n        return this.thenUpdate();\n    };\n    /**\n     * Chains the current promise with another Promise that performs the\n     * given operation on the given command.\n     *\n     * @param beforeResolve a function that is called directly before\n     *      resolving the Promise to return the new model. Usually puts the\n     *      command on the appropriate stack.\n     */\n    CommandStack.prototype.handleCommand = function (command, operation, beforeResolve) {\n        var _this = this;\n        this.currentPromise = this.currentPromise.then(function (state) {\n            return new Promise(function (resolve) {\n                var target;\n                if (command instanceof command_1.HiddenCommand)\n                    target = 'hidden';\n                else if (command instanceof command_1.PopupCommand)\n                    target = 'popup';\n                else\n                    target = 'main';\n                var context = _this.createContext(state.main.model);\n                var commandResult;\n                try {\n                    commandResult = operation.call(command, context);\n                }\n                catch (error) {\n                    _this.logger.error(_this, \"Failed to execute command:\", error);\n                    commandResult = state[target].model;\n                }\n                var newState = copyState(state);\n                if (commandResult instanceof Promise) {\n                    commandResult.then(function (newModel) {\n                        if (target === 'main')\n                            beforeResolve.call(_this, command, context);\n                        newState[target] = { model: newModel, modelChanged: true };\n                        resolve(newState);\n                    });\n                }\n                else if (commandResult instanceof smodel_1.SModelRoot) {\n                    if (target === 'main')\n                        beforeResolve.call(_this, command, context);\n                    newState[target] = { model: commandResult, modelChanged: true };\n                    resolve(newState);\n                }\n                else {\n                    if (target === 'main')\n                        beforeResolve.call(_this, command, context);\n                    newState[target] = {\n                        model: commandResult.model,\n                        modelChanged: state[target].modelChanged || commandResult.modelChanged,\n                        cause: commandResult.cause\n                    };\n                    resolve(newState);\n                }\n            });\n        });\n    };\n    CommandStack.prototype.pushToUndoStack = function (command) {\n        this.undoStack.push(command);\n        if (this.options.undoHistoryLimit >= 0 && this.undoStack.length > this.options.undoHistoryLimit)\n            this.undoStack.splice(0, this.undoStack.length - this.options.undoHistoryLimit);\n    };\n    /**\n     * Notifies the Viewer to render the new model and/or the new hidden model\n     * and returns a Promise for the new model.\n     */\n    CommandStack.prototype.thenUpdate = function () {\n        var _this = this;\n        this.currentPromise = this.currentPromise.then(function (state) {\n            var newState = copyState(state);\n            if (state.hidden.modelChanged) {\n                _this.updateHidden(state.hidden.model, state.hidden.cause);\n                newState.hidden.modelChanged = false;\n                newState.hidden.cause = undefined;\n            }\n            if (state.main.modelChanged) {\n                _this.update(state.main.model, state.main.cause);\n                newState.main.modelChanged = false;\n                newState.main.cause = undefined;\n            }\n            if (state.popup.modelChanged) {\n                _this.updatePopup(state.popup.model, state.popup.cause);\n                newState.popup.modelChanged = false;\n                newState.popup.cause = undefined;\n            }\n            return newState;\n        });\n        return this.currentModel;\n    };\n    /**\n     * Notify the `ModelViewer` that the model has changed.\n     */\n    CommandStack.prototype.update = function (model, cause) {\n        if (this.modelViewer === undefined) {\n            this.modelViewer = this.viewerProvider.modelViewer;\n        }\n        this.modelViewer.update(model, cause);\n    };\n    /**\n     * Notify the `HiddenModelViewer` that the hidden model has changed.\n     */\n    CommandStack.prototype.updateHidden = function (model, cause) {\n        if (this.hiddenModelViewer === undefined) {\n            this.hiddenModelViewer = this.viewerProvider.hiddenModelViewer;\n        }\n        this.hiddenModelViewer.update(model, cause);\n    };\n    /**\n     * Notify the `PopupModelViewer` that the popup model has changed.\n     */\n    CommandStack.prototype.updatePopup = function (model, cause) {\n        if (this.popupModelViewer === undefined) {\n            this.popupModelViewer = this.viewerProvider.popupModelViewer;\n        }\n        this.popupModelViewer.update(model, cause);\n    };\n    /**\n     * Handling of commands after their execution.\n     *\n     * Hidden commands are not pushed to any stack.\n     *\n     * System commands are pushed to the <code>offStack</code> when the redo\n     * stack is not empty, allowing to undo the before a redo to keep the chain\n     * of commands consistent.\n     *\n     * Mergable commands are merged if possible.\n     */\n    CommandStack.prototype.mergeOrPush = function (command, context) {\n        var _this = this;\n        if (this.isBlockUndo(command)) {\n            this.undoStack = [];\n            this.redoStack = [];\n            this.offStack = [];\n            this.pushToUndoStack(command);\n            return;\n        }\n        if (this.isPushToOffStack(command) && this.redoStack.length > 0) {\n            if (this.offStack.length > 0) {\n                var lastCommand = this.offStack[this.offStack.length - 1];\n                if (lastCommand instanceof command_1.MergeableCommand && lastCommand.merge(command, context))\n                    return;\n            }\n            this.offStack.push(command);\n            return;\n        }\n        if (this.isPushToUndoStack(command)) {\n            this.offStack.forEach(function (c) { return _this.undoStack.push(c); });\n            this.offStack = [];\n            this.redoStack = [];\n            if (this.undoStack.length > 0) {\n                var lastCommand = this.undoStack[this.undoStack.length - 1];\n                if (lastCommand instanceof command_1.MergeableCommand && lastCommand.merge(command, context))\n                    return;\n            }\n            this.pushToUndoStack(command);\n        }\n    };\n    /**\n     * Reverts all system commands on the offStack.\n     */\n    CommandStack.prototype.undoOffStackSystemCommands = function () {\n        var command = this.offStack.pop();\n        while (command !== undefined) {\n            this.logger.log(this, 'Undoing off-stack', command);\n            this.handleCommand(command, command.undo, function () { });\n            command = this.offStack.pop();\n        }\n    };\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>undo()</code> to revert all system commands\n     * at the top of the undoStack.\n     */\n    CommandStack.prototype.undoPreceedingSystemCommands = function () {\n        var _this = this;\n        var command = this.undoStack[this.undoStack.length - 1];\n        while (command !== undefined && this.isPushToOffStack(command)) {\n            this.undoStack.pop();\n            this.logger.log(this, 'Undoing', command);\n            this.handleCommand(command, command.undo, function (c, context) {\n                _this.redoStack.push(c);\n            });\n            command = this.undoStack[this.undoStack.length - 1];\n        }\n    };\n    /**\n     * System commands should be transparent to the user, so this method\n     * is called from <code>redo()</code> to re-execute all system commands\n     * at the top of the redoStack.\n     */\n    CommandStack.prototype.redoFollowingSystemCommands = function () {\n        var _this = this;\n        var command = this.redoStack[this.redoStack.length - 1];\n        while (command !== undefined && this.isPushToOffStack(command)) {\n            this.redoStack.pop();\n            this.logger.log(this, 'Redoing ', command);\n            this.handleCommand(command, command.redo, function (c, context) {\n                _this.pushToUndoStack(c);\n            });\n            command = this.redoStack[this.redoStack.length - 1];\n        }\n    };\n    /**\n     * Assembles the context object that is passed to the commands execution method.\n     */\n    CommandStack.prototype.createContext = function (currentModel) {\n        return {\n            root: currentModel,\n            modelChanged: this,\n            modelFactory: this.modelFactory,\n            duration: this.options.defaultDuration,\n            logger: this.logger,\n            syncer: this.syncer\n        };\n    };\n    CommandStack.prototype.isPushToOffStack = function (command) {\n        return command instanceof command_1.SystemCommand;\n    };\n    CommandStack.prototype.isPushToUndoStack = function (command) {\n        return !(command instanceof command_1.HiddenCommand);\n    };\n    CommandStack.prototype.isBlockUndo = function (command) {\n        return command instanceof command_1.ResetCommand;\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IModelFactory),\n        __metadata(\"design:type\", Object)\n    ], CommandStack.prototype, \"modelFactory\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IViewerProvider),\n        __metadata(\"design:type\", Object)\n    ], CommandStack.prototype, \"viewerProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], CommandStack.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.AnimationFrameSyncer),\n        __metadata(\"design:type\", animation_frame_syncer_1.AnimationFrameSyncer)\n    ], CommandStack.prototype, \"syncer\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.CommandStackOptions),\n        __metadata(\"design:type\", Object)\n    ], CommandStack.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.postConstruct(),\n        __metadata(\"design:type\", Function),\n        __metadata(\"design:paramtypes\", []),\n        __metadata(\"design:returntype\", void 0)\n    ], CommandStack.prototype, \"initialize\", null);\n    CommandStack = __decorate([\n        inversify_1.injectable()\n    ], CommandStack);\n    return CommandStack;\n}());\nexports.CommandStack = CommandStack;\nfunction copyState(state) {\n    return {\n        main: __assign({}, state.main),\n        hidden: __assign({}, state.hidden),\n        popup: __assign({}, state.popup)\n    };\n}\n//# sourceMappingURL=command-stack.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\n/**\n * Base class for all commands.\n *\n * Command instances are created via dependency injection and should take\n * the respective action as an injected constructor parameter. They must\n * also define a static <code>KIND</code> which is used to map an\n * <code>Action#kind</code>.\n *\n * <pre>\n * export class MyCommand extends Command {\n *   static KIND = 'MyCommand'\n *   constructor(@inject(TYPES.Action) action: MyAction) {\n *   ...\n * }\n * @inject(TYPES.Action)\n * </pre>\n */\nvar Command = /** @class */ (function () {\n    function Command() {\n    }\n    Command = __decorate([\n        inversify_1.injectable()\n    ], Command);\n    return Command;\n}());\nexports.Command = Command;\n/**\n * A mergeable command can accumulate subsequent commands of the same kind.\n *\n * For example, multiple subsequent move commands can be merged to yield a\n * single command, such that undo will roll them back altogether. Otherwise\n * the user would have to push CTRL-Z for each mouse move element that\n * resuted in a command.\n */\nvar MergeableCommand = /** @class */ (function (_super) {\n    __extends(MergeableCommand, _super);\n    function MergeableCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * Tries to merge the given command with this.\n     *\n     * @param command\n     * @param context\n     */\n    MergeableCommand.prototype.merge = function (command, context) {\n        return false;\n    };\n    MergeableCommand = __decorate([\n        inversify_1.injectable()\n    ], MergeableCommand);\n    return MergeableCommand;\n}(Command));\nexports.MergeableCommand = MergeableCommand;\n/**\n * A hidden command is used to trigger the rendering of a model on a\n * hidden canvas.\n *\n * Some graphical elements are styled using CSS, others have bounds that\n * require to layout their children before being computed. In such cases\n * we cannot tell about the size of elements without acutally rendering\n * the DOM. We render them to an invisible canvas. This can be achieved\n * using hidden commands.\n *\n * Hidden commands do not change the model directly, and are as such\n * neither undoable nor redoable. The command stack does not push them on\n * any stack and forwards the resulting model to the invisible viewer.\n */\nvar HiddenCommand = /** @class */ (function (_super) {\n    __extends(HiddenCommand, _super);\n    function HiddenCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HiddenCommand.prototype.undo = function (context) {\n        context.logger.error(this, 'Cannot undo a hidden command');\n        return context.root;\n    };\n    HiddenCommand.prototype.redo = function (context) {\n        context.logger.error(this, 'Cannot redo a hidden command');\n        return context.root;\n    };\n    HiddenCommand = __decorate([\n        inversify_1.injectable()\n    ], HiddenCommand);\n    return HiddenCommand;\n}(Command));\nexports.HiddenCommand = HiddenCommand;\nvar PopupCommand = /** @class */ (function (_super) {\n    __extends(PopupCommand, _super);\n    function PopupCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PopupCommand = __decorate([\n        inversify_1.injectable()\n    ], PopupCommand);\n    return PopupCommand;\n}(Command));\nexports.PopupCommand = PopupCommand;\n/**\n * A system command is triggered by the system, e.g. in order to update bounds\n * in the model with data fetched from the DOM.\n *\n * As it is automatically triggered it should not count as a single command in\n * undo/redo operations. Into the bargain, such an automatic command could occur\n * after an undo and as such make the next redo command invalid because it is\n * based on a model state that has changed. The command stack handles system\n * commands in a special way to overcome these issues.\n */\nvar SystemCommand = /** @class */ (function (_super) {\n    __extends(SystemCommand, _super);\n    function SystemCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SystemCommand = __decorate([\n        inversify_1.injectable()\n    ], SystemCommand);\n    return SystemCommand;\n}(Command));\nexports.SystemCommand = SystemCommand;\n/**\n * A reset command deletes all undo/redo stacks and cannot be undone.\n *\n * It marks a point of no return.\n */\nvar ResetCommand = /** @class */ (function (_super) {\n    __extends(ResetCommand, _super);\n    function ResetCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ResetCommand = __decorate([\n        inversify_1.injectable()\n    ], ResetCommand);\n    return ResetCommand;\n}(Command));\nexports.ResetCommand = ResetCommand;\n//# sourceMappingURL=command.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar command_1 = require(\"./command\");\n/**\n * A command that does not modify the internal model, but retrieves information\n * from it by dispatching a response action.\n */\nvar ModelRequestCommand = /** @class */ (function (_super) {\n    __extends(ModelRequestCommand, _super);\n    function ModelRequestCommand() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ModelRequestCommand.prototype.execute = function (context) {\n        var result = this.retrieveResult(context);\n        this.actionDispatcher.dispatch(result);\n        return { model: context.root, modelChanged: false };\n    };\n    ModelRequestCommand.prototype.undo = function (context) {\n        return { model: context.root, modelChanged: false };\n    };\n    ModelRequestCommand.prototype.redo = function (context) {\n        return { model: context.root, modelChanged: false };\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], ModelRequestCommand.prototype, \"actionDispatcher\", void 0);\n    ModelRequestCommand = __decorate([\n        inversify_1.injectable()\n    ], ModelRequestCommand);\n    return ModelRequestCommand;\n}(command_1.SystemCommand));\nexports.ModelRequestCommand = ModelRequestCommand;\n//# sourceMappingURL=request-command.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"./types\");\nvar initialize_canvas_1 = require(\"./features/initialize-canvas\");\nvar logging_1 = require(\"../utils/logging\");\nvar action_dispatcher_1 = require(\"./actions/action-dispatcher\");\nvar action_handler_1 = require(\"./actions/action-handler\");\nvar command_stack_1 = require(\"./commands/command-stack\");\nvar smodel_factory_1 = require(\"./model/smodel-factory\");\nvar animation_frame_syncer_1 = require(\"./animations/animation-frame-syncer\");\nvar viewer_1 = require(\"./views/viewer\");\nvar viewer_options_1 = require(\"./views/viewer-options\");\nvar mouse_tool_1 = require(\"./views/mouse-tool\");\nvar key_tool_1 = require(\"./views/key-tool\");\nvar vnode_postprocessor_1 = require(\"./views/vnode-postprocessor\");\nvar view_1 = require(\"./views/view\");\nvar viewer_cache_1 = require(\"./views/viewer-cache\");\nvar dom_helper_1 = require(\"./views/dom-helper\");\nvar id_postprocessor_1 = require(\"./views/id-postprocessor\");\nvar command_registration_1 = require(\"./commands/command-registration\");\nvar css_class_postprocessor_1 = require(\"./views/css-class-postprocessor\");\nvar tool_manager_1 = require(\"./tool-manager/tool-manager\");\nvar tool_1 = require(\"./tool-manager/tool\");\nvar set_model_1 = require(\"./features/set-model\");\nvar ui_extension_registry_1 = require(\"./ui-extensions/ui-extension-registry\");\nvar diagram_locker_1 = require(\"./actions/diagram-locker\");\nvar defaultContainerModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    // Logging ---------------------------------------------\n    bind(types_1.TYPES.ILogger).to(logging_1.NullLogger).inSingletonScope();\n    bind(types_1.TYPES.LogLevel).toConstantValue(logging_1.LogLevel.warn);\n    // Registries ---------------------------------------------\n    bind(types_1.TYPES.SModelRegistry).to(smodel_factory_1.SModelRegistry).inSingletonScope();\n    bind(action_handler_1.ActionHandlerRegistry).toSelf().inSingletonScope();\n    bind(types_1.TYPES.ActionHandlerRegistryProvider).toProvider(function (ctx) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(ctx.container.get(action_handler_1.ActionHandlerRegistry));\n            });\n        };\n    });\n    bind(types_1.TYPES.ViewRegistry).to(view_1.ViewRegistry).inSingletonScope();\n    // Model Creation ---------------------------------------------\n    bind(types_1.TYPES.IModelFactory).to(smodel_factory_1.SModelFactory).inSingletonScope();\n    // Action Dispatcher ---------------------------------------------\n    bind(types_1.TYPES.IActionDispatcher).to(action_dispatcher_1.ActionDispatcher).inSingletonScope();\n    bind(types_1.TYPES.IActionDispatcherProvider).toProvider(function (ctx) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(ctx.container.get(types_1.TYPES.IActionDispatcher));\n            });\n        };\n    });\n    bind(types_1.TYPES.IDiagramLocker).to(diagram_locker_1.DefaultDiagramLocker).inSingletonScope();\n    // Action handler\n    bind(types_1.TYPES.IActionHandlerInitializer).to(command_registration_1.CommandActionHandlerInitializer);\n    // Command Stack ---------------------------------------------\n    bind(types_1.TYPES.ICommandStack).to(command_stack_1.CommandStack).inSingletonScope();\n    bind(types_1.TYPES.ICommandStackProvider).toProvider(function (ctx) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(ctx.container.get(types_1.TYPES.ICommandStack));\n            });\n        };\n    });\n    bind(types_1.TYPES.CommandStackOptions).toConstantValue({\n        defaultDuration: 250,\n        undoHistoryLimit: 50\n    });\n    // Viewer ---------------------------------------------\n    bind(viewer_1.ModelViewer).toSelf().inSingletonScope();\n    bind(viewer_1.HiddenModelViewer).toSelf().inSingletonScope();\n    bind(viewer_1.PopupModelViewer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.ModelViewer).toDynamicValue(function (ctx) {\n        var container = ctx.container.createChild();\n        container.bind(types_1.TYPES.IViewer).toService(viewer_1.ModelViewer);\n        container.bind(viewer_cache_1.ViewerCache).toSelf();\n        return container.get(viewer_cache_1.ViewerCache);\n    }).inSingletonScope();\n    bind(types_1.TYPES.PopupModelViewer).toDynamicValue(function (ctx) {\n        var container = ctx.container.createChild();\n        container.bind(types_1.TYPES.IViewer).toService(viewer_1.PopupModelViewer);\n        container.bind(viewer_cache_1.ViewerCache).toSelf();\n        return container.get(viewer_cache_1.ViewerCache);\n    }).inSingletonScope();\n    bind(types_1.TYPES.HiddenModelViewer).toService(viewer_1.HiddenModelViewer);\n    bind(types_1.TYPES.IViewerProvider).toDynamicValue(function (ctx) {\n        return {\n            get modelViewer() {\n                return ctx.container.get(types_1.TYPES.ModelViewer);\n            },\n            get hiddenModelViewer() {\n                return ctx.container.get(types_1.TYPES.HiddenModelViewer);\n            },\n            get popupModelViewer() {\n                return ctx.container.get(types_1.TYPES.PopupModelViewer);\n            }\n        };\n    });\n    bind(types_1.TYPES.ViewerOptions).toConstantValue(viewer_options_1.defaultViewerOptions());\n    bind(types_1.TYPES.PatcherProvider).to(viewer_1.PatcherProvider).inSingletonScope();\n    bind(types_1.TYPES.DOMHelper).to(dom_helper_1.DOMHelper).inSingletonScope();\n    bind(types_1.TYPES.ModelRendererFactory).toFactory(function (ctx) {\n        return function (targetKind, processors, args) {\n            if (args === void 0) { args = {}; }\n            var viewRegistry = ctx.container.get(types_1.TYPES.ViewRegistry);\n            return new viewer_1.ModelRenderer(viewRegistry, targetKind, processors, args);\n        };\n    });\n    // Tools & Postprocessors --------------------------------------\n    bind(id_postprocessor_1.IdPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(id_postprocessor_1.IdPostprocessor);\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(id_postprocessor_1.IdPostprocessor);\n    bind(css_class_postprocessor_1.CssClassPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(css_class_postprocessor_1.CssClassPostprocessor);\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(css_class_postprocessor_1.CssClassPostprocessor);\n    bind(mouse_tool_1.MouseTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(mouse_tool_1.MouseTool);\n    bind(key_tool_1.KeyTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(key_tool_1.KeyTool);\n    bind(vnode_postprocessor_1.FocusFixPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(vnode_postprocessor_1.FocusFixPostprocessor);\n    bind(types_1.TYPES.PopupVNodePostprocessor).toService(id_postprocessor_1.IdPostprocessor);\n    bind(mouse_tool_1.PopupMouseTool).toSelf().inSingletonScope();\n    bind(types_1.TYPES.PopupVNodePostprocessor).toService(mouse_tool_1.PopupMouseTool);\n    // Animation Frame Sync ------------------------------------------\n    bind(types_1.TYPES.AnimationFrameSyncer).to(animation_frame_syncer_1.AnimationFrameSyncer).inSingletonScope();\n    // Canvas Initialization ---------------------------------------------\n    var context = { bind: bind, isBound: isBound };\n    command_registration_1.configureCommand(context, initialize_canvas_1.InitializeCanvasBoundsCommand);\n    bind(initialize_canvas_1.CanvasBoundsInitializer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(initialize_canvas_1.CanvasBoundsInitializer);\n    // Model commands ---------------------------------------------\n    command_registration_1.configureCommand(context, set_model_1.SetModelCommand);\n    // Tool manager initialization ------------------------------------\n    bind(types_1.TYPES.IToolManager).to(tool_manager_1.ToolManager).inSingletonScope();\n    bind(types_1.TYPES.KeyListener).to(tool_manager_1.DefaultToolsEnablingKeyListener);\n    bind(tool_manager_1.ToolManagerActionHandler).toSelf().inSingletonScope();\n    action_handler_1.configureActionHandler(context, tool_1.EnableDefaultToolsAction.KIND, tool_manager_1.ToolManagerActionHandler);\n    action_handler_1.configureActionHandler(context, tool_1.EnableToolsAction.KIND, tool_manager_1.ToolManagerActionHandler);\n    // UIExtension registry initialization ------------------------------------\n    bind(types_1.TYPES.UIExtensionRegistry).to(ui_extension_registry_1.UIExtensionRegistry).inSingletonScope();\n    command_registration_1.configureCommand(context, ui_extension_registry_1.SetUIExtensionVisibilityCommand);\n    // Tracker for last known mouse position on diagram ------------------------\n    bind(mouse_tool_1.MousePositionTracker).toSelf().inSingletonScope();\n    bind(types_1.TYPES.MouseListener).toService(mouse_tool_1.MousePositionTracker);\n});\nexports.default = defaultContainerModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../model/smodel\");\nvar command_1 = require(\"../commands/command\");\nvar browser_1 = require(\"../../utils/browser\");\n/**\n * Grabs the bounds from the root element in page coordinates and fires a\n * InitializeCanvasBoundsAction. This size is needed for other actions such\n * as FitToScreenAction.\n */\nvar CanvasBoundsInitializer = /** @class */ (function () {\n    function CanvasBoundsInitializer() {\n    }\n    CanvasBoundsInitializer.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot && !geometry_1.isValidDimension(element.canvasBounds)) {\n            this.rootAndVnode = [element, vnode];\n        }\n        return vnode;\n    };\n    CanvasBoundsInitializer.prototype.postUpdate = function () {\n        if (this.rootAndVnode !== undefined) {\n            var domElement = this.rootAndVnode[1].elm;\n            var oldBounds = this.rootAndVnode[0].canvasBounds;\n            if (domElement !== undefined) {\n                var newBounds = this.getBoundsInPage(domElement);\n                if (!(geometry_1.almostEquals(newBounds.x, oldBounds.x)\n                    && geometry_1.almostEquals(newBounds.y, oldBounds.y)\n                    && geometry_1.almostEquals(newBounds.width, oldBounds.width)\n                    && geometry_1.almostEquals(newBounds.height, oldBounds.width)))\n                    this.actionDispatcher.dispatch(new InitializeCanvasBoundsAction(newBounds));\n            }\n            this.rootAndVnode = undefined;\n        }\n    };\n    CanvasBoundsInitializer.prototype.getBoundsInPage = function (element) {\n        var bounds = element.getBoundingClientRect();\n        var scroll = browser_1.getWindowScroll();\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], CanvasBoundsInitializer.prototype, \"actionDispatcher\", void 0);\n    CanvasBoundsInitializer = __decorate([\n        inversify_1.injectable()\n    ], CanvasBoundsInitializer);\n    return CanvasBoundsInitializer;\n}());\nexports.CanvasBoundsInitializer = CanvasBoundsInitializer;\nvar InitializeCanvasBoundsAction = /** @class */ (function () {\n    function InitializeCanvasBoundsAction(newCanvasBounds) {\n        this.newCanvasBounds = newCanvasBounds;\n        this.kind = InitializeCanvasBoundsAction.KIND;\n    }\n    InitializeCanvasBoundsAction.KIND = 'initializeCanvasBounds';\n    return InitializeCanvasBoundsAction;\n}());\nexports.InitializeCanvasBoundsAction = InitializeCanvasBoundsAction;\nvar InitializeCanvasBoundsCommand = /** @class */ (function (_super) {\n    __extends(InitializeCanvasBoundsCommand, _super);\n    function InitializeCanvasBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    InitializeCanvasBoundsCommand.prototype.execute = function (context) {\n        this.newCanvasBounds = this.action.newCanvasBounds;\n        context.root.canvasBounds = this.newCanvasBounds;\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.prototype.undo = function (context) {\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.prototype.redo = function (context) {\n        return context.root;\n    };\n    InitializeCanvasBoundsCommand.KIND = InitializeCanvasBoundsAction.KIND;\n    InitializeCanvasBoundsCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [InitializeCanvasBoundsAction])\n    ], InitializeCanvasBoundsCommand);\n    return InitializeCanvasBoundsCommand;\n}(command_1.SystemCommand));\nexports.InitializeCanvasBoundsCommand = InitializeCanvasBoundsCommand;\n//# sourceMappingURL=initialize-canvas.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../actions/action\");\nvar command_1 = require(\"../commands/command\");\nvar types_1 = require(\"../types\");\nvar initialize_canvas_1 = require(\"./initialize-canvas\");\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) in order to request a model. Usually this\n * is the first message that is sent to the source, so it is also used to initiate the communication.\n * The response is a SetModelAction or an UpdateModelAction.\n */\nvar RequestModelAction = /** @class */ (function () {\n    function RequestModelAction(options, requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.options = options;\n        this.requestId = requestId;\n        this.kind = RequestModelAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    RequestModelAction.create = function (options) {\n        return new RequestModelAction(options, action_1.generateRequestId());\n    };\n    RequestModelAction.KIND = 'requestModel';\n    return RequestModelAction;\n}());\nexports.RequestModelAction = RequestModelAction;\n/**\n * Sent from the model source to the client in order to set the model. If a model is already present, it is replaced.\n */\nvar SetModelAction = /** @class */ (function () {\n    function SetModelAction(newRoot, responseId) {\n        if (responseId === void 0) { responseId = ''; }\n        this.newRoot = newRoot;\n        this.responseId = responseId;\n        this.kind = SetModelAction.KIND;\n    }\n    SetModelAction.KIND = 'setModel';\n    return SetModelAction;\n}());\nexports.SetModelAction = SetModelAction;\nvar SetModelCommand = /** @class */ (function (_super) {\n    __extends(SetModelCommand, _super);\n    function SetModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetModelCommand.prototype.execute = function (context) {\n        this.oldRoot = context.modelFactory.createRoot(context.root);\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    };\n    SetModelCommand.prototype.undo = function (context) {\n        return this.oldRoot;\n    };\n    SetModelCommand.prototype.redo = function (context) {\n        return this.newRoot;\n    };\n    Object.defineProperty(SetModelCommand.prototype, \"blockUntil\", {\n        get: function () {\n            return function (action) { return action.kind === initialize_canvas_1.InitializeCanvasBoundsCommand.KIND; };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SetModelCommand.KIND = SetModelAction.KIND;\n    SetModelCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetModelAction])\n    ], SetModelCommand);\n    return SetModelCommand;\n}(command_1.ResetCommand));\nexports.SetModelCommand = SetModelCommand;\n//# sourceMappingURL=set-model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar smodel_1 = require(\"./smodel\");\n/**\n * The default model factory creates SModelRoot for the root element and SChildElement for all other\n * model elements.\n */\nvar SModelFactory = /** @class */ (function () {\n    function SModelFactory() {\n    }\n    SModelFactory.prototype.createElement = function (schema, parent) {\n        var child;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SChildElement))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SChildElement.\");\n            child = regElement;\n        }\n        else {\n            child = new smodel_1.SChildElement();\n        }\n        return this.initializeChild(child, schema, parent);\n    };\n    SModelFactory.prototype.createRoot = function (schema) {\n        var root;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SModelRoot))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SModelRoot.\");\n            root = regElement;\n        }\n        else {\n            root = new smodel_1.SModelRoot();\n        }\n        return this.initializeRoot(root, schema);\n    };\n    SModelFactory.prototype.createSchema = function (element) {\n        var _this = this;\n        var schema = {};\n        for (var key in element) {\n            if (!this.isReserved(element, key)) {\n                var value = element[key];\n                if (typeof value !== 'function')\n                    schema[key] = value;\n            }\n        }\n        if (element instanceof smodel_1.SParentElement)\n            schema['children'] = element.children.map(function (child) { return _this.createSchema(child); });\n        return schema;\n    };\n    SModelFactory.prototype.initializeElement = function (element, schema) {\n        for (var key in schema) {\n            if (!this.isReserved(element, key)) {\n                var value = schema[key];\n                if (typeof value !== 'function')\n                    element[key] = value;\n            }\n        }\n        return element;\n    };\n    SModelFactory.prototype.isReserved = function (element, propertyName) {\n        if (['children', 'parent', 'index'].indexOf(propertyName) >= 0)\n            return true;\n        var obj = element;\n        do {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, propertyName);\n            if (descriptor !== undefined)\n                return descriptor.get !== undefined;\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return false;\n    };\n    SModelFactory.prototype.initializeParent = function (parent, schema) {\n        var _this = this;\n        this.initializeElement(parent, schema);\n        if (smodel_1.isParent(schema)) {\n            parent.children = schema.children.map(function (childSchema) { return _this.createElement(childSchema, parent); });\n        }\n        return parent;\n    };\n    SModelFactory.prototype.initializeChild = function (child, schema, parent) {\n        this.initializeParent(child, schema);\n        if (parent !== undefined) {\n            child.parent = parent;\n        }\n        return child;\n    };\n    SModelFactory.prototype.initializeRoot = function (root, schema) {\n        this.initializeParent(root, schema);\n        root.index.add(root);\n        return root;\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.SModelRegistry),\n        __metadata(\"design:type\", SModelRegistry)\n    ], SModelFactory.prototype, \"registry\", void 0);\n    SModelFactory = __decorate([\n        inversify_1.injectable()\n    ], SModelFactory);\n    return SModelFactory;\n}());\nexports.SModelFactory = SModelFactory;\nexports.EMPTY_ROOT = Object.freeze({\n    type: 'NONE',\n    id: 'EMPTY'\n});\n/**\n * Model element classes registered here are considered automatically when constructring a model from its schema.\n */\nvar SModelRegistry = /** @class */ (function (_super) {\n    __extends(SModelRegistry, _super);\n    function SModelRegistry(registrations) {\n        var _this = _super.call(this) || this;\n        registrations.forEach(function (registration) {\n            var defaultFeatures = _this.getDefaultFeatures(registration.constr);\n            if (!defaultFeatures && registration.features && registration.features.enable)\n                defaultFeatures = [];\n            if (defaultFeatures) {\n                var featureSet_1 = createFeatureSet(defaultFeatures, registration.features);\n                _this.register(registration.type, function () {\n                    var element = new registration.constr();\n                    element.features = featureSet_1;\n                    return element;\n                });\n            }\n            else {\n                _this.register(registration.type, function () { return new registration.constr(); });\n            }\n        });\n        return _this;\n    }\n    SModelRegistry.prototype.getDefaultFeatures = function (constr) {\n        var obj = constr;\n        do {\n            var defaultFeatures = obj.DEFAULT_FEATURES;\n            if (defaultFeatures)\n                return defaultFeatures;\n            obj = Object.getPrototypeOf(obj);\n        } while (obj);\n        return undefined;\n    };\n    SModelRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.SModelElementRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], SModelRegistry);\n    return SModelRegistry;\n}(registry_1.FactoryRegistry));\nexports.SModelRegistry = SModelRegistry;\nfunction createFeatureSet(defaults, custom) {\n    var featureSet = new Set(defaults);\n    if (custom && custom.enable) {\n        for (var _i = 0, _a = custom.enable; _i < _a.length; _i++) {\n            var f = _a[_i];\n            featureSet.add(f);\n        }\n    }\n    if (custom && custom.disable) {\n        for (var _b = 0, _c = custom.disable; _b < _c.length; _b++) {\n            var f = _c[_b];\n            featureSet.delete(f);\n        }\n    }\n    return featureSet;\n}\nexports.createFeatureSet = createFeatureSet;\n//# sourceMappingURL=smodel-factory.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar types_1 = require(\"../types\");\nvar smodel_1 = require(\"./smodel\");\n/**\n * Register a model element constructor for an element type.\n */\nfunction registerModelElement(context, type, constr, features) {\n    context.bind(types_1.TYPES.SModelElementRegistration).toConstantValue({\n        type: type, constr: constr, features: features\n    });\n}\nexports.registerModelElement = registerModelElement;\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the basic type of a model element.\n */\nfunction getBasicType(schema) {\n    if (!schema.type)\n        return '';\n    var colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(0, colonIndex);\n    else\n        return schema.type;\n}\nexports.getBasicType = getBasicType;\n/**\n * Model element types can include a colon to separate the basic type and a sub-type. This function\n * extracts the sub-type of a model element.\n */\nfunction getSubType(schema) {\n    if (!schema.type)\n        return '';\n    var colonIndex = schema.type.indexOf(':');\n    if (colonIndex >= 0)\n        return schema.type.substring(colonIndex + 1);\n    else\n        return schema.type;\n}\nexports.getSubType = getSubType;\n/**\n * Find the element with the given identifier. If you need to find multiple elements, using an\n * SModelIndex might be more effective.\n */\nfunction findElement(parent, elementId) {\n    if (parent.id === elementId)\n        return parent;\n    if (parent.children !== undefined) {\n        for (var _i = 0, _a = parent.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            var result = findElement(child, elementId);\n            if (result !== undefined)\n                return result;\n        }\n    }\n    return undefined;\n}\nexports.findElement = findElement;\n/**\n * Find a parent element that satisfies the given predicate.\n */\nfunction findParent(element, predicate) {\n    var current = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof smodel_1.SChildElement)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\nexports.findParent = findParent;\n/**\n * Find a parent element that implements the feature identified with the given predicate.\n */\nfunction findParentByFeature(element, predicate) {\n    var current = element;\n    while (current !== undefined) {\n        if (predicate(current))\n            return current;\n        else if (current instanceof smodel_1.SChildElement)\n            current = current.parent;\n        else\n            current = undefined;\n    }\n    return current;\n}\nexports.findParentByFeature = findParentByFeature;\n/**\n * Translate a point from the coordinate system of the source element to the coordinate system\n * of the target element.\n */\nfunction translatePoint(point, source, target) {\n    if (source !== target) {\n        // Translate from the source to the root element\n        while (source instanceof smodel_1.SChildElement) {\n            point = source.localToParent(point);\n            source = source.parent;\n            if (source === target)\n                return point;\n        }\n        // Translate from the root to the target element\n        var targetTrace = [];\n        while (target instanceof smodel_1.SChildElement) {\n            targetTrace.push(target);\n            target = target.parent;\n        }\n        if (source !== target)\n            throw new Error(\"Incompatible source and target: \" + source.id + \", \" + target.id);\n        for (var i = targetTrace.length - 1; i >= 0; i--) {\n            point = targetTrace[i].parentToLocal(point);\n        }\n    }\n    return point;\n}\nexports.translatePoint = translatePoint;\n/**\n * Translate some bounds from the coordinate system of the source element to the coordinate system\n * of the target element.\n */\nfunction translateBounds(bounds, source, target) {\n    var upperLeft = translatePoint(bounds, source, target);\n    var lowerRight = translatePoint({ x: bounds.x + bounds.width, y: bounds.y + bounds.height }, source, target);\n    return {\n        x: upperLeft.x,\n        y: upperLeft.y,\n        width: lowerRight.x - upperLeft.x,\n        height: lowerRight.y - upperLeft.y\n    };\n}\nexports.translateBounds = translateBounds;\n/**\n * Tests if the given model contains an id of then given element or one of its descendants.\n */\nfunction containsSome(root, element) {\n    var test = function (el) { return root.index.getById(el.id) !== undefined; };\n    var find = function (elements) { return elements.some(function (el) { return test(el) || find(el.children); }); };\n    return find([element]);\n}\nexports.containsSome = containsSome;\n//# sourceMappingURL=smodel-utils.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar iterable_1 = require(\"../../utils/iterable\");\n/**\n * Base class for all elements of the diagram model.\n * Each model element must have a unique ID and a type that is used to look up its view.\n */\nvar SModelElement = /** @class */ (function () {\n    function SModelElement() {\n    }\n    Object.defineProperty(SModelElement.prototype, \"root\", {\n        get: function () {\n            var current = this;\n            while (current) {\n                if (current instanceof SModelRoot)\n                    return current;\n                else if (current instanceof SChildElement)\n                    current = current.parent;\n                else\n                    current = undefined;\n            }\n            throw new Error(\"Element has no root\");\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SModelElement.prototype, \"index\", {\n        get: function () {\n            return this.root.index;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * A feature is a symbol identifying some functionality that can be enabled or disabled for\n     * a model element. The set of supported features is determined by the `features` property.\n     */\n    SModelElement.prototype.hasFeature = function (feature) {\n        return this.features !== undefined && this.features.has(feature);\n    };\n    return SModelElement;\n}());\nexports.SModelElement = SModelElement;\nfunction isParent(element) {\n    var children = element.children;\n    return children !== undefined && children.constructor === Array;\n}\nexports.isParent = isParent;\n/**\n * A parent element may contain child elements, thus the diagram model forms a tree.\n */\nvar SParentElement = /** @class */ (function (_super) {\n    __extends(SParentElement, _super);\n    function SParentElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.children = [];\n        return _this;\n    }\n    SParentElement.prototype.add = function (child, index) {\n        var children = this.children;\n        if (index === undefined) {\n            children.push(child);\n        }\n        else {\n            if (index < 0 || index > this.children.length) {\n                throw new Error(\"Child index \" + index + \" out of bounds (0..\" + children.length + \")\");\n            }\n            children.splice(index, 0, child);\n        }\n        child.parent = this;\n        this.index.add(child);\n    };\n    SParentElement.prototype.remove = function (child) {\n        var children = this.children;\n        var i = children.indexOf(child);\n        if (i < 0) {\n            throw new Error(\"No such child \" + child.id);\n        }\n        children.splice(i, 1);\n        this.index.remove(child);\n    };\n    SParentElement.prototype.removeAll = function (filter) {\n        var _this = this;\n        var children = this.children;\n        if (filter !== undefined) {\n            for (var i = children.length - 1; i >= 0; i--) {\n                if (filter(children[i])) {\n                    var child = children.splice(i, 1)[0];\n                    this.index.remove(child);\n                }\n            }\n        }\n        else {\n            children.forEach(function (child) {\n                _this.index.remove(child);\n            });\n            children.splice(0, children.length);\n        }\n    };\n    SParentElement.prototype.move = function (child, newIndex) {\n        var children = this.children;\n        var i = children.indexOf(child);\n        if (i === -1) {\n            throw new Error(\"No such child \" + child.id);\n        }\n        else {\n            if (newIndex < 0 || newIndex > children.length - 1) {\n                throw new Error(\"Child index \" + newIndex + \" out of bounds (0..\" + children.length + \")\");\n            }\n            children.splice(i, 1);\n            children.splice(newIndex, 0, child);\n        }\n    };\n    /**\n     * Transform the given bounds from the local coordinate system of this element to the coordinate\n     * system of its parent. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    SParentElement.prototype.localToParent = function (point) {\n        return geometry_1.isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    };\n    /**\n     * Transform the given bounds from the coordinate system of this element's parent to its local\n     * coordinate system. This function should consider any transformation that is applied to the\n     * view of this element and its contents.\n     * The base implementation assumes that this element does not define a local coordinate system,\n     * so it leaves the bounds unchanged.\n     */\n    SParentElement.prototype.parentToLocal = function (point) {\n        return geometry_1.isBounds(point) ? point : { x: point.x, y: point.y, width: -1, height: -1 };\n    };\n    return SParentElement;\n}(SModelElement));\nexports.SParentElement = SParentElement;\n/**\n * A child element is contained in a parent element. All elements except the model root are child\n * elements. In order to keep the model class hierarchy simple, every child element is also a\n * parent element, although for many elements the array of children is empty (i.e. they are\n * leafs in the model element tree).\n */\nvar SChildElement = /** @class */ (function (_super) {\n    __extends(SChildElement, _super);\n    function SChildElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SChildElement;\n}(SParentElement));\nexports.SChildElement = SChildElement;\n/**\n * Base class for the root element of the diagram model tree.\n */\nvar SModelRoot = /** @class */ (function (_super) {\n    __extends(SModelRoot, _super);\n    function SModelRoot(index) {\n        if (index === void 0) { index = new SModelIndex(); }\n        var _this = _super.call(this) || this;\n        _this.canvasBounds = geometry_1.EMPTY_BOUNDS;\n        // Override the index property from SModelElement, which has a getter, with a data property\n        Object.defineProperty(_this, 'index', {\n            value: index,\n            writable: false\n        });\n        return _this;\n    }\n    return SModelRoot;\n}(SParentElement));\nexports.SModelRoot = SModelRoot;\nvar ID_CHARS = \"0123456789abcdefghijklmnopqrstuvwxyz\";\nfunction createRandomId(length) {\n    if (length === void 0) { length = 8; }\n    var id = \"\";\n    for (var i = 0; i < length; i++) {\n        id += ID_CHARS.charAt(Math.floor(Math.random() * ID_CHARS.length));\n    }\n    return id;\n}\nexports.createRandomId = createRandomId;\n/**\n * Used to speed up model element lookup by id.\n */\nvar SModelIndex = /** @class */ (function () {\n    function SModelIndex() {\n        this.id2element = new Map();\n    }\n    SModelIndex.prototype.add = function (element) {\n        if (!element.id) {\n            do {\n                element.id = createRandomId();\n            } while (this.contains(element));\n        }\n        else if (this.contains(element)) {\n            throw new Error(\"Duplicate ID in model: \" + element.id);\n        }\n        this.id2element.set(element.id, element);\n        if (element.children !== undefined && element.children.constructor === Array) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.add(child);\n                if (!(child instanceof SChildElement)) {\n                    if (this.id2parent === undefined) {\n                        this.id2parent = new Map();\n                    }\n                    this.id2parent.set(child.id, element);\n                }\n            }\n        }\n    };\n    SModelIndex.prototype.remove = function (element) {\n        this.id2element.delete(element.id);\n        if (element.children !== undefined && element.children.constructor === Array) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                if (!(child instanceof SChildElement)) {\n                    if (this.id2parent === undefined) {\n                        this.id2parent = new Map();\n                    }\n                    this.id2parent.delete(child.id);\n                }\n                this.remove(child);\n            }\n        }\n    };\n    SModelIndex.prototype.contains = function (element) {\n        return this.id2element.has(element.id);\n    };\n    SModelIndex.prototype.getById = function (id) {\n        return this.id2element.get(id);\n    };\n    /**\n     * This utility method is for SModelElementSchema. For SChildElements, simply\n     * use the `parent` property.\n     */\n    SModelIndex.prototype.getParent = function (id) {\n        if (this.id2parent !== undefined) {\n            return this.id2parent.get(id);\n        }\n        var element = this.getById(id);\n        if (element instanceof SChildElement) {\n            return element.parent;\n        }\n        return undefined;\n    };\n    /**\n     * This utility method is for SModelElementSchema. For SModelElements, simply\n     * use the `root` property.\n     */\n    SModelIndex.prototype.getRoot = function (element) {\n        if (this.id2parent !== undefined) {\n            var current = element;\n            while (current) {\n                var parent_1 = this.id2parent.get(current.id);\n                if (parent_1 === undefined) {\n                    return current;\n                }\n                current = parent_1;\n            }\n        }\n        if (element instanceof SChildElement) {\n            return element.root;\n        }\n        throw new Error(\"Element has no root\");\n    };\n    SModelIndex.prototype.getAttachedElements = function (element) {\n        return [];\n    };\n    SModelIndex.prototype.all = function () {\n        return iterable_1.mapIterable(this.id2element, function (_a) {\n            var key = _a[0], value = _a[1];\n            return value;\n        });\n    };\n    return SModelIndex;\n}());\nexports.SModelIndex = SModelIndex;\n//# sourceMappingURL=smodel.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar tool_1 = require(\"./tool\");\nvar key_tool_1 = require(\"../views/key-tool\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar ToolManager = /** @class */ (function () {\n    function ToolManager() {\n        this.tools = [];\n        this.defaultTools = [];\n        this.actives = [];\n    }\n    Object.defineProperty(ToolManager.prototype, \"managedTools\", {\n        get: function () {\n            return this.defaultTools.concat(this.tools);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(ToolManager.prototype, \"activeTools\", {\n        get: function () {\n            return this.actives;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ToolManager.prototype.disableActiveTools = function () {\n        this.actives.forEach(function (tool) { return tool.disable(); });\n        this.actives.splice(0, this.actives.length);\n    };\n    ToolManager.prototype.enableDefaultTools = function () {\n        this.enable(this.defaultTools.map(function (tool) { return tool.id; }));\n    };\n    ToolManager.prototype.enable = function (toolIds) {\n        var _this = this;\n        this.disableActiveTools();\n        var tools = toolIds.map(function (id) { return _this.tool(id); });\n        tools.forEach(function (tool) {\n            if (tool !== undefined) {\n                tool.enable();\n                _this.actives.push(tool);\n            }\n        });\n    };\n    ToolManager.prototype.tool = function (toolId) {\n        return this.managedTools.find(function (tool) { return tool.id === toolId; });\n    };\n    ToolManager.prototype.registerDefaultTools = function () {\n        var tools = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tools[_i] = arguments[_i];\n        }\n        for (var _a = 0, tools_1 = tools; _a < tools_1.length; _a++) {\n            var tool = tools_1[_a];\n            this.defaultTools.push(tool);\n        }\n    };\n    ToolManager.prototype.registerTools = function () {\n        var tools = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            tools[_i] = arguments[_i];\n        }\n        for (var _a = 0, tools_2 = tools; _a < tools_2.length; _a++) {\n            var tool = tools_2[_a];\n            this.tools.push(tool);\n        }\n    };\n    ToolManager = __decorate([\n        inversify_1.injectable()\n    ], ToolManager);\n    return ToolManager;\n}());\nexports.ToolManager = ToolManager;\nvar ToolManagerActionHandler = /** @class */ (function () {\n    function ToolManagerActionHandler() {\n    }\n    ToolManagerActionHandler.prototype.handle = function (action) {\n        switch (action.kind) {\n            case tool_1.EnableDefaultToolsAction.KIND:\n                this.toolManager.enableDefaultTools();\n                break;\n            case tool_1.EnableToolsAction.KIND:\n                this.toolManager.enable(action.toolIds);\n                break;\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IToolManager),\n        __metadata(\"design:type\", Object)\n    ], ToolManagerActionHandler.prototype, \"toolManager\", void 0);\n    ToolManagerActionHandler = __decorate([\n        inversify_1.injectable()\n    ], ToolManagerActionHandler);\n    return ToolManagerActionHandler;\n}());\nexports.ToolManagerActionHandler = ToolManagerActionHandler;\nvar DefaultToolsEnablingKeyListener = /** @class */ (function (_super) {\n    __extends(DefaultToolsEnablingKeyListener, _super);\n    function DefaultToolsEnablingKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DefaultToolsEnablingKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            return [new tool_1.EnableDefaultToolsAction()];\n        }\n        return [];\n    };\n    DefaultToolsEnablingKeyListener = __decorate([\n        inversify_1.injectable()\n    ], DefaultToolsEnablingKeyListener);\n    return DefaultToolsEnablingKeyListener;\n}(key_tool_1.KeyListener));\nexports.DefaultToolsEnablingKeyListener = DefaultToolsEnablingKeyListener;\n//# sourceMappingURL=tool-manager.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Action to enable the tools of the specified `toolIds`.\n */\nvar EnableToolsAction = /** @class */ (function () {\n    function EnableToolsAction(toolIds) {\n        this.toolIds = toolIds;\n        this.kind = EnableToolsAction.KIND;\n    }\n    EnableToolsAction.KIND = \"enable-tools\";\n    return EnableToolsAction;\n}());\nexports.EnableToolsAction = EnableToolsAction;\n/**\n * Action to disable the currently active tools and enable the default tools instead.\n */\nvar EnableDefaultToolsAction = /** @class */ (function () {\n    function EnableDefaultToolsAction() {\n        this.kind = EnableDefaultToolsAction.KIND;\n    }\n    EnableDefaultToolsAction.KIND = \"enable-default-tools\";\n    return EnableDefaultToolsAction;\n}());\nexports.EnableDefaultToolsAction = EnableDefaultToolsAction;\n//# sourceMappingURL=tool.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/* eslint-disable @typescript-eslint/naming-convention */\nexports.TYPES = {\n    Action: Symbol('Action'),\n    IActionDispatcher: Symbol('IActionDispatcher'),\n    IActionDispatcherProvider: Symbol('IActionDispatcherProvider'),\n    IActionHandlerInitializer: Symbol('IActionHandlerInitializer'),\n    ActionHandlerRegistration: Symbol('ActionHandlerRegistration'),\n    ActionHandlerRegistryProvider: Symbol('ActionHandlerRegistryProvider'),\n    IAnchorComputer: Symbol('IAnchor'),\n    AnimationFrameSyncer: Symbol('AnimationFrameSyncer'),\n    IButtonHandler: Symbol('IButtonHandler'),\n    ICommandPaletteActionProvider: Symbol('ICommandPaletteActionProvider'),\n    ICommandPaletteActionProviderRegistry: Symbol('ICommandPaletteActionProviderRegistry'),\n    CommandRegistration: Symbol('CommandRegistration'),\n    ICommandStack: Symbol('ICommandStack'),\n    CommandStackOptions: Symbol('CommandStackOptions'),\n    ICommandStackProvider: Symbol('ICommandStackProvider'),\n    IContextMenuItemProvider: Symbol.for(\"IContextMenuProvider\"),\n    IContextMenuProviderRegistry: Symbol.for(\"IContextMenuProviderRegistry\"),\n    IContextMenuService: Symbol.for(\"IContextMenuService\"),\n    IContextMenuServiceProvider: Symbol.for(\"IContextMenuServiceProvider\"),\n    DOMHelper: Symbol('DOMHelper'),\n    IDiagramLocker: Symbol('IDiagramLocker'),\n    IEdgeRouter: Symbol('IEdgeRouter'),\n    IEdgeRoutePostprocessor: Symbol('IEdgeRoutePostprocessor'),\n    IEditLabelValidationDecorator: Symbol('IEditLabelValidationDecorator'),\n    IEditLabelValidator: Symbol('IEditLabelValidator'),\n    HiddenModelViewer: Symbol('HiddenModelViewer'),\n    HiddenVNodePostprocessor: Symbol('HiddenVNodeDecorator'),\n    HoverState: Symbol('HoverState'),\n    KeyListener: Symbol('KeyListener'),\n    LayoutRegistration: Symbol('LayoutRegistration'),\n    LayoutRegistry: Symbol('LayoutRegistry'),\n    Layouter: Symbol('Layouter'),\n    LogLevel: Symbol('LogLevel'),\n    ILogger: Symbol('ILogger'),\n    IModelFactory: Symbol('IModelFactory'),\n    IModelLayoutEngine: Symbol('IModelLayoutEngine'),\n    ModelRendererFactory: Symbol('ModelRendererFactory'),\n    ModelSource: Symbol('ModelSource'),\n    ModelSourceProvider: Symbol('ModelSourceProvider'),\n    ModelViewer: Symbol('ModelViewer'),\n    MouseListener: Symbol('MouseListener'),\n    PatcherProvider: Symbol('PatcherProvider'),\n    IPopupModelProvider: Symbol('IPopupModelProvider'),\n    PopupModelViewer: Symbol('PopupModelViewer'),\n    PopupMouseListener: Symbol('PopupMouseListener'),\n    PopupVNodePostprocessor: Symbol('PopupVNodeDecorator'),\n    SModelElementRegistration: Symbol('SModelElementRegistration'),\n    SModelRegistry: Symbol('SModelRegistry'),\n    ISnapper: Symbol('ISnapper'),\n    SvgExporter: Symbol('SvgExporter'),\n    IToolManager: Symbol('IToolManager'),\n    IUIExtension: Symbol('IUIExtension'),\n    UIExtensionRegistry: Symbol('UIExtensionRegistry'),\n    IVNodePostprocessor: Symbol('IVNodePostprocessor'),\n    ViewRegistration: Symbol('ViewRegistration'),\n    ViewRegistry: Symbol('ViewRegistry'),\n    IViewer: Symbol('IViewer'),\n    ViewerOptions: Symbol('ViewerOptions'),\n    IViewerProvider: Symbol('IViewerProvider'),\n};\n/* eslint-enable */\n//# sourceMappingURL=types.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar registry_1 = require(\"../../utils/registry\");\nvar command_1 = require(\"../commands/command\");\nvar types_1 = require(\"../types\");\n/**\n * The registry maintaining UI extensions registered via `TYPES.IUIExtension`.\n */\nvar UIExtensionRegistry = /** @class */ (function (_super) {\n    __extends(UIExtensionRegistry, _super);\n    function UIExtensionRegistry(extensions) {\n        if (extensions === void 0) { extensions = []; }\n        var _this = _super.call(this) || this;\n        extensions.forEach(function (extension) { return _this.register(extension.id(), extension); });\n        return _this;\n    }\n    UIExtensionRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IUIExtension)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], UIExtensionRegistry);\n    return UIExtensionRegistry;\n}(registry_1.InstanceRegistry));\nexports.UIExtensionRegistry = UIExtensionRegistry;\n/**\n * Action to set the visibility state of the UI extension with the specified `id`.\n */\nvar SetUIExtensionVisibilityAction = /** @class */ (function () {\n    function SetUIExtensionVisibilityAction(extensionId, visible, contextElementsId) {\n        if (contextElementsId === void 0) { contextElementsId = []; }\n        this.extensionId = extensionId;\n        this.visible = visible;\n        this.contextElementsId = contextElementsId;\n        this.kind = SetUIExtensionVisibilityAction.KIND;\n    }\n    SetUIExtensionVisibilityAction.KIND = \"setUIExtensionVisibility\";\n    return SetUIExtensionVisibilityAction;\n}());\nexports.SetUIExtensionVisibilityAction = SetUIExtensionVisibilityAction;\nvar SetUIExtensionVisibilityCommand = /** @class */ (function (_super) {\n    __extends(SetUIExtensionVisibilityCommand, _super);\n    function SetUIExtensionVisibilityCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetUIExtensionVisibilityCommand.prototype.execute = function (context) {\n        var extension = this.registry.get(this.action.extensionId);\n        if (extension) {\n            this.action.visible ? extension.show.apply(extension, __spreadArrays([context.root], this.action.contextElementsId)) : extension.hide();\n        }\n        return { model: context.root, modelChanged: false };\n    };\n    SetUIExtensionVisibilityCommand.prototype.undo = function (context) {\n        return { model: context.root, modelChanged: false };\n    };\n    SetUIExtensionVisibilityCommand.prototype.redo = function (context) {\n        return { model: context.root, modelChanged: false };\n    };\n    SetUIExtensionVisibilityCommand.KIND = SetUIExtensionVisibilityAction.KIND;\n    __decorate([\n        inversify_1.inject(types_1.TYPES.UIExtensionRegistry),\n        __metadata(\"design:type\", UIExtensionRegistry)\n    ], SetUIExtensionVisibilityCommand.prototype, \"registry\", void 0);\n    SetUIExtensionVisibilityCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetUIExtensionVisibilityAction])\n    ], SetUIExtensionVisibilityCommand);\n    return SetUIExtensionVisibilityCommand;\n}(command_1.SystemCommand));\nexports.SetUIExtensionVisibilityCommand = SetUIExtensionVisibilityCommand;\n//# sourceMappingURL=ui-extension-registry.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\n/**\n * Abstract base class for UI extensions.\n */\nvar AbstractUIExtension = /** @class */ (function () {\n    function AbstractUIExtension() {\n    }\n    AbstractUIExtension.prototype.show = function (root) {\n        var contextElementIds = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            contextElementIds[_i - 1] = arguments[_i];\n        }\n        this.activeElement = document.activeElement;\n        if (!this.containerElement) {\n            if (!this.initialize())\n                return;\n        }\n        this.onBeforeShow.apply(this, __spreadArrays([this.containerElement, root], contextElementIds));\n        this.setContainerVisible(true);\n    };\n    AbstractUIExtension.prototype.hide = function () {\n        this.setContainerVisible(false);\n        this.restoreFocus();\n        this.activeElement = null;\n    };\n    AbstractUIExtension.prototype.restoreFocus = function () {\n        var focusedElement = this.activeElement;\n        if (focusedElement) {\n            focusedElement.focus();\n        }\n    };\n    AbstractUIExtension.prototype.initialize = function () {\n        var baseDiv = document.getElementById(this.options.baseDiv);\n        if (!baseDiv) {\n            this.logger.warn(this, \"Could not obtain sprotty base container for initializing UI extension \" + this.id, this);\n            return false;\n        }\n        this.containerElement = this.getOrCreateContainer(baseDiv.id);\n        this.initializeContents(this.containerElement);\n        if (baseDiv) {\n            baseDiv.insertBefore(this.containerElement, baseDiv.firstChild);\n        }\n        return true;\n    };\n    AbstractUIExtension.prototype.getOrCreateContainer = function (baseDivId) {\n        var container = document.getElementById(this.id());\n        if (container === null) {\n            container = document.createElement('div');\n            container.id = baseDivId + \"_\" + this.id();\n            container.classList.add(this.containerClass());\n        }\n        return container;\n    };\n    AbstractUIExtension.prototype.setContainerVisible = function (visible) {\n        if (this.containerElement) {\n            if (visible) {\n                this.containerElement.style.visibility = 'visible';\n                this.containerElement.style.opacity = '1';\n            }\n            else {\n                this.containerElement.style.visibility = 'hidden';\n                this.containerElement.style.opacity = '0';\n            }\n        }\n    };\n    /**\n     * Updates the `containerElement` under the given `context` before it becomes visible.\n     *\n     * Subclasses may override this method to, for instance, modifying the position of the\n     * `containerElement`, add or remove elements, etc. depending on the specified `root`\n     * or `contextElementIds`.\n     */\n    AbstractUIExtension.prototype.onBeforeShow = function (containerElement, root) {\n        var contextElementIds = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            contextElementIds[_i - 2] = arguments[_i];\n        }\n        // default: do nothing\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], AbstractUIExtension.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], AbstractUIExtension.prototype, \"logger\", void 0);\n    AbstractUIExtension = __decorate([\n        inversify_1.injectable()\n    ], AbstractUIExtension);\n    return AbstractUIExtension;\n}());\nexports.AbstractUIExtension = AbstractUIExtension;\n//# sourceMappingURL=ui-extension.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar inversify_1 = require(\"inversify\");\nvar smodel_utils_1 = require(\"../model/smodel-utils\");\nvar CssClassPostprocessor = /** @class */ (function () {\n    function CssClassPostprocessor() {\n    }\n    CssClassPostprocessor.prototype.decorate = function (vnode, element) {\n        if (element.cssClasses) {\n            for (var _i = 0, _a = element.cssClasses; _i < _a.length; _i++) {\n                var cssClass = _a[_i];\n                vnode_utils_1.setClass(vnode, cssClass, true);\n            }\n        }\n        // append model subtype as class\n        var subType = smodel_utils_1.getSubType(element);\n        if (subType && subType !== element.type) {\n            vnode_utils_1.setClass(vnode, subType, true);\n        }\n        return vnode;\n    };\n    CssClassPostprocessor.prototype.postUpdate = function () {\n        // empty\n    };\n    CssClassPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], CssClassPostprocessor);\n    return CssClassPostprocessor;\n}());\nexports.CssClassPostprocessor = CssClassPostprocessor;\n//# sourceMappingURL=css-class-postprocessor.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar DOMHelper = /** @class */ (function () {\n    function DOMHelper() {\n    }\n    DOMHelper.prototype.getPrefix = function () {\n        var prefix = this.viewerOptions !== undefined && this.viewerOptions.baseDiv !== undefined ?\n            this.viewerOptions.baseDiv + \"_\" : \"\";\n        return prefix;\n    };\n    DOMHelper.prototype.createUniqueDOMElementId = function (element) {\n        return this.getPrefix() + element.id;\n    };\n    DOMHelper.prototype.findSModelIdByDOMElement = function (element) {\n        return element.id.replace(this.getPrefix(), '');\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], DOMHelper.prototype, \"viewerOptions\", void 0);\n    DOMHelper = __decorate([\n        inversify_1.injectable()\n    ], DOMHelper);\n    return DOMHelper;\n}());\nexports.DOMHelper = DOMHelper;\n//# sourceMappingURL=dom-helper.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar dom_helper_1 = require(\"./dom-helper\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar IdPostprocessor = /** @class */ (function () {\n    function IdPostprocessor() {\n    }\n    IdPostprocessor.prototype.decorate = function (vnode, element) {\n        var attrs = vnode_utils_1.getAttrs(vnode);\n        if (attrs.id !== undefined)\n            this.logger.warn(vnode, 'Overriding id of vnode (' + attrs.id + '). Make sure not to set it manually in view.');\n        attrs.id = this.domHelper.createUniqueDOMElementId(element);\n        if (!vnode.key)\n            vnode.key = element.id;\n        return vnode;\n    };\n    IdPostprocessor.prototype.postUpdate = function () {\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], IdPostprocessor.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.DOMHelper),\n        __metadata(\"design:type\", dom_helper_1.DOMHelper)\n    ], IdPostprocessor.prototype, \"domHelper\", void 0);\n    IdPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], IdPostprocessor);\n    return IdPostprocessor;\n}());\nexports.IdPostprocessor = IdPostprocessor;\n//# sourceMappingURL=id-postprocessor.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar smodel_1 = require(\"../model/smodel\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar KeyTool = /** @class */ (function () {\n    function KeyTool(keyListeners) {\n        if (keyListeners === void 0) { keyListeners = []; }\n        this.keyListeners = keyListeners;\n    }\n    KeyTool.prototype.register = function (keyListener) {\n        this.keyListeners.push(keyListener);\n    };\n    KeyTool.prototype.deregister = function (keyListener) {\n        var index = this.keyListeners.indexOf(keyListener);\n        if (index >= 0)\n            this.keyListeners.splice(index, 1);\n    };\n    KeyTool.prototype.handleEvent = function (methodName, model, event) {\n        var actions = this.keyListeners\n            .map(function (listener) { return listener[methodName].apply(listener, [model, event]); })\n            .reduce(function (a, b) { return a.concat(b); });\n        if (actions.length > 0) {\n            event.preventDefault();\n            this.actionDispatcher.dispatchAll(actions);\n        }\n    };\n    KeyTool.prototype.keyDown = function (element, event) {\n        this.handleEvent('keyDown', element, event);\n    };\n    KeyTool.prototype.keyUp = function (element, event) {\n        this.handleEvent('keyUp', element, event);\n    };\n    KeyTool.prototype.focus = function () { };\n    KeyTool.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot) {\n            vnode_utils_1.on(vnode, 'focus', this.focus.bind(this, element));\n            vnode_utils_1.on(vnode, 'keydown', this.keyDown.bind(this, element));\n            vnode_utils_1.on(vnode, 'keyup', this.keyUp.bind(this, element));\n        }\n        return vnode;\n    };\n    KeyTool.prototype.postUpdate = function () {\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], KeyTool.prototype, \"actionDispatcher\", void 0);\n    KeyTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.KeyListener)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], KeyTool);\n    return KeyTool;\n}());\nexports.KeyTool = KeyTool;\nvar KeyListener = /** @class */ (function () {\n    function KeyListener() {\n    }\n    KeyListener.prototype.keyDown = function (element, event) {\n        return [];\n    };\n    KeyListener.prototype.keyUp = function (element, event) {\n        return [];\n    };\n    KeyListener = __decorate([\n        inversify_1.injectable()\n    ], KeyListener);\n    return KeyListener;\n}());\nexports.KeyListener = KeyListener;\n//# sourceMappingURL=key-tool.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../actions/action\");\nvar smodel_1 = require(\"../model/smodel\");\nvar types_1 = require(\"../types\");\nvar dom_helper_1 = require(\"./dom-helper\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar MouseTool = /** @class */ (function () {\n    function MouseTool(mouseListeners) {\n        if (mouseListeners === void 0) { mouseListeners = []; }\n        this.mouseListeners = mouseListeners;\n    }\n    MouseTool.prototype.register = function (mouseListener) {\n        this.mouseListeners.push(mouseListener);\n    };\n    MouseTool.prototype.deregister = function (mouseListener) {\n        var index = this.mouseListeners.indexOf(mouseListener);\n        if (index >= 0)\n            this.mouseListeners.splice(index, 1);\n    };\n    MouseTool.prototype.getTargetElement = function (model, event) {\n        var target = event.target;\n        var index = model.index;\n        while (target) {\n            if (target.id) {\n                var element = index.getById(this.domHelper.findSModelIdByDOMElement(target));\n                if (element !== undefined)\n                    return element;\n            }\n            target = target.parentNode;\n        }\n        return undefined;\n    };\n    MouseTool.prototype.handleEvent = function (methodName, model, event) {\n        var _this = this;\n        this.focusOnMouseEvent(methodName, model);\n        var element = this.getTargetElement(model, event);\n        if (!element)\n            return;\n        var actions = this.mouseListeners\n            .map(function (listener) { return listener[methodName].apply(listener, [element, event]); })\n            .reduce(function (a, b) { return a.concat(b); });\n        if (actions.length > 0) {\n            event.preventDefault();\n            for (var _i = 0, actions_1 = actions; _i < actions_1.length; _i++) {\n                var actionOrPromise = actions_1[_i];\n                if (action_1.isAction(actionOrPromise)) {\n                    this.actionDispatcher.dispatch(actionOrPromise);\n                }\n                else {\n                    actionOrPromise.then(function (action) {\n                        _this.actionDispatcher.dispatch(action);\n                    });\n                }\n            }\n        }\n    };\n    MouseTool.prototype.focusOnMouseEvent = function (methodName, model) {\n        if (document) {\n            var domElement = document.getElementById(this.domHelper.createUniqueDOMElementId(model));\n            if (methodName === 'mouseDown' && domElement !== null && typeof domElement.focus === 'function')\n                domElement.focus();\n        }\n    };\n    MouseTool.prototype.mouseOver = function (model, event) {\n        this.handleEvent('mouseOver', model, event);\n    };\n    MouseTool.prototype.mouseOut = function (model, event) {\n        this.handleEvent('mouseOut', model, event);\n    };\n    MouseTool.prototype.mouseEnter = function (model, event) {\n        this.handleEvent('mouseEnter', model, event);\n    };\n    MouseTool.prototype.mouseLeave = function (model, event) {\n        this.handleEvent('mouseLeave', model, event);\n    };\n    MouseTool.prototype.mouseDown = function (model, event) {\n        this.handleEvent('mouseDown', model, event);\n    };\n    MouseTool.prototype.mouseMove = function (model, event) {\n        this.handleEvent('mouseMove', model, event);\n    };\n    MouseTool.prototype.mouseUp = function (model, event) {\n        this.handleEvent('mouseUp', model, event);\n    };\n    MouseTool.prototype.wheel = function (model, event) {\n        this.handleEvent('wheel', model, event);\n    };\n    MouseTool.prototype.doubleClick = function (model, event) {\n        this.handleEvent('doubleClick', model, event);\n    };\n    MouseTool.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot) {\n            vnode_utils_1.on(vnode, 'mouseover', this.mouseOver.bind(this, element));\n            vnode_utils_1.on(vnode, 'mouseout', this.mouseOut.bind(this, element));\n            vnode_utils_1.on(vnode, 'mouseenter', this.mouseEnter.bind(this, element));\n            vnode_utils_1.on(vnode, 'mouseleave', this.mouseLeave.bind(this, element));\n            vnode_utils_1.on(vnode, 'mousedown', this.mouseDown.bind(this, element));\n            vnode_utils_1.on(vnode, 'mouseup', this.mouseUp.bind(this, element));\n            vnode_utils_1.on(vnode, 'mousemove', this.mouseMove.bind(this, element));\n            vnode_utils_1.on(vnode, 'wheel', this.wheel.bind(this, element));\n            vnode_utils_1.on(vnode, 'contextmenu', function (event) {\n                event.preventDefault();\n            });\n            vnode_utils_1.on(vnode, 'dblclick', this.doubleClick.bind(this, element));\n        }\n        vnode = this.mouseListeners.reduce(function (n, listener) { return listener.decorate(n, element); }, vnode);\n        return vnode;\n    };\n    MouseTool.prototype.postUpdate = function () {\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], MouseTool.prototype, \"actionDispatcher\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.DOMHelper),\n        __metadata(\"design:type\", dom_helper_1.DOMHelper)\n    ], MouseTool.prototype, \"domHelper\", void 0);\n    MouseTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.MouseListener)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], MouseTool);\n    return MouseTool;\n}());\nexports.MouseTool = MouseTool;\nvar PopupMouseTool = /** @class */ (function (_super) {\n    __extends(PopupMouseTool, _super);\n    function PopupMouseTool(mouseListeners) {\n        if (mouseListeners === void 0) { mouseListeners = []; }\n        var _this = _super.call(this, mouseListeners) || this;\n        _this.mouseListeners = mouseListeners;\n        return _this;\n    }\n    PopupMouseTool = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.PopupMouseListener)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], PopupMouseTool);\n    return PopupMouseTool;\n}(MouseTool));\nexports.PopupMouseTool = PopupMouseTool;\nvar MouseListener = /** @class */ (function () {\n    function MouseListener() {\n    }\n    MouseListener.prototype.mouseOver = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseOut = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseEnter = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseLeave = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseDown = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseMove = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.mouseUp = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.wheel = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.doubleClick = function (target, event) {\n        return [];\n    };\n    MouseListener.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    MouseListener = __decorate([\n        inversify_1.injectable()\n    ], MouseListener);\n    return MouseListener;\n}());\nexports.MouseListener = MouseListener;\nvar MousePositionTracker = /** @class */ (function (_super) {\n    __extends(MousePositionTracker, _super);\n    function MousePositionTracker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    MousePositionTracker.prototype.mouseMove = function (target, event) {\n        this.lastPosition = target.root.parentToLocal({ x: event.offsetX, y: event.offsetY });\n        return [];\n    };\n    Object.defineProperty(MousePositionTracker.prototype, \"lastPositionOnDiagram\", {\n        /**\n         * Returns the last tracked mouse cursor position relative to the diagram root or `undefined`\n         * if no mouse cursor position was ever tracked yet.\n         */\n        get: function () {\n            return this.lastPosition;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    MousePositionTracker = __decorate([\n        inversify_1.injectable()\n    ], MousePositionTracker);\n    return MousePositionTracker;\n}(MouseListener));\nexports.MousePositionTracker = MousePositionTracker;\n//# sourceMappingURL=mouse-tool.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom_1 = require(\"snabbdom\");\nvar inversify_1 = require(\"inversify\");\n/**\n * An view that avoids calculation and patching of VNodes unless some model properties have changed.\n * Based on snabbdom's thunks.\n */\nvar ThunkView = /** @class */ (function () {\n    function ThunkView() {\n    }\n    ThunkView.prototype.render = function (model, context) {\n        var _this = this;\n        return snabbdom_1.h(this.selector(model), {\n            key: model.id,\n            hook: {\n                init: this.init.bind(this),\n                prepatch: this.prepatch.bind(this)\n            },\n            fn: function () { return _this.renderAndDecorate(model, context); },\n            args: this.watchedArgs(model),\n            thunk: true\n        });\n    };\n    ThunkView.prototype.renderAndDecorate = function (model, context) {\n        var vnode = this.doRender(model, context);\n        context.decorate(vnode, model);\n        return vnode;\n    };\n    ThunkView.prototype.copyToThunk = function (vnode, thunk) {\n        thunk.elm = vnode.elm;\n        vnode.data.fn = thunk.data.fn;\n        vnode.data.args = thunk.data.args;\n        thunk.data = vnode.data;\n        thunk.children = vnode.children;\n        thunk.text = vnode.text;\n        thunk.elm = vnode.elm;\n    };\n    ThunkView.prototype.init = function (thunk) {\n        var cur = thunk.data;\n        var vnode = cur.fn.apply(undefined, cur.args);\n        this.copyToThunk(vnode, thunk);\n    };\n    ThunkView.prototype.prepatch = function (oldVnode, thunk) {\n        var old = oldVnode.data, cur = thunk.data;\n        if (!this.equals(old.args, cur.args))\n            this.copyToThunk(cur.fn.apply(undefined, cur.args), thunk);\n        else\n            this.copyToThunk(oldVnode, thunk);\n    };\n    ThunkView.prototype.equals = function (oldArg, newArg) {\n        if (Array.isArray(oldArg) && Array.isArray(newArg)) {\n            if (oldArg.length !== newArg.length)\n                return false;\n            for (var i = 0; i < newArg.length; ++i) {\n                if (!this.equals(oldArg[i], newArg[i]))\n                    return false;\n            }\n        }\n        else if (typeof oldArg === 'object' && typeof newArg === 'object') {\n            if (Object.keys(oldArg).length !== Object.keys(newArg).length)\n                return false;\n            for (var key in oldArg) {\n                if (key !== 'parent' && key !== 'root' && (!(key in newArg) || !this.equals(oldArg[key], newArg[key])))\n                    return false;\n            }\n        }\n        else if (oldArg !== newArg) {\n            return false;\n        }\n        return true;\n    };\n    ThunkView = __decorate([\n        inversify_1.injectable()\n    ], ThunkView);\n    return ThunkView;\n}());\nexports.ThunkView = ThunkView;\nfunction isThunk(vnode) {\n    return 'thunk' in vnode;\n}\nexports.isThunk = isThunk;\n//# sourceMappingURL=thunk-view.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"../../lib/jsx\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar inversify_2 = require(\"../../utils/inversify\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar smodel_utils_1 = require(\"../model/smodel-utils\");\n/**\n * Searches for the property specified in `key` in the specified `args`,\n * including its direct or indirect `IRenderingArgs#parentArgs`.\n *\n * @param arg the rendering arguments.\n * @param key the key to search for.\n * @returns the found value or `undefined.\n */\nfunction findArgValue(arg, key) {\n    while (arg !== undefined && !(key in arg) && arg.parentArgs) {\n        arg = arg.parentArgs;\n    }\n    return arg ? arg[key] : undefined;\n}\nexports.findArgValue = findArgValue;\n/**\n * Allows to look up the IView for a given SModelElement based on its type.\n */\nvar ViewRegistry = /** @class */ (function (_super) {\n    __extends(ViewRegistry, _super);\n    function ViewRegistry(registrations) {\n        var _this = _super.call(this) || this;\n        _this.registerDefaults();\n        registrations.forEach(function (registration) {\n            return _this.register(registration.type, registration.factory());\n        });\n        return _this;\n    }\n    ViewRegistry.prototype.registerDefaults = function () {\n        this.register(smodel_factory_1.EMPTY_ROOT.type, new EmptyView());\n    };\n    ViewRegistry.prototype.missing = function (key) {\n        return new MissingView();\n    };\n    ViewRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ViewRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ViewRegistry);\n    return ViewRegistry;\n}(registry_1.InstanceRegistry));\nexports.ViewRegistry = ViewRegistry;\n/**\n * Combines `registerModelElement` and `configureView`.\n */\nfunction configureModelElement(context, type, modelConstr, viewConstr, features) {\n    smodel_utils_1.registerModelElement(context, type, modelConstr, features);\n    configureView(context, type, viewConstr);\n}\nexports.configureModelElement = configureModelElement;\n/**\n * Utility function to register a view for a model element type.\n */\nfunction configureView(context, type, constr) {\n    if (typeof constr === 'function') {\n        if (!inversify_2.isInjectable(constr)) {\n            throw new Error(\"Views should be @injectable: \" + constr.name);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(types_1.TYPES.ViewRegistration).toDynamicValue(function (ctx) { return ({\n        type: type,\n        factory: function () { return ctx.container.get(constr); }\n    }); });\n}\nexports.configureView = configureView;\n/**\n * This view is used when the model is the EMPTY_ROOT.\n */\nvar EmptyView = /** @class */ (function () {\n    function EmptyView() {\n    }\n    EmptyView.prototype.render = function (model, context) {\n        return jsx_1.svg(\"svg\", { \"class-sprotty-empty\": true });\n    };\n    EmptyView = __decorate([\n        inversify_1.injectable()\n    ], EmptyView);\n    return EmptyView;\n}());\nexports.EmptyView = EmptyView;\n/**\n * This view is used when no view has been registered for a model element type.\n */\nvar MissingView = /** @class */ (function () {\n    function MissingView() {\n    }\n    MissingView.prototype.render = function (model, context) {\n        var position = model.position || geometry_1.ORIGIN_POINT;\n        return jsx_1.svg(\"text\", { \"class-sprotty-missing\": true, x: position.x, y: position.y },\n            \"?\",\n            model.id,\n            \"?\");\n    };\n    MissingView = __decorate([\n        inversify_1.injectable()\n    ], MissingView);\n    return MissingView;\n}());\nexports.MissingView = MissingView;\n//# sourceMappingURL=view.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../types\");\nvar animation_frame_syncer_1 = require(\"../animations/animation-frame-syncer\");\n/**\n * Updating the view is rather expensive, and it doesn't make sense to calculate\n * more then one update per animation (rendering) frame. So this class batches\n * all incoming model changes and only renders the last one when the next animation\n * frame comes.\n */\nvar ViewerCache = /** @class */ (function () {\n    function ViewerCache() {\n    }\n    ViewerCache.prototype.update = function (model, cause) {\n        if (cause !== undefined) {\n            // Forward the update immediately in order to pass the cause action\n            this.delegate.update(model, cause);\n            this.cachedModel = undefined;\n        }\n        else {\n            var isCacheEmpty = this.cachedModel === undefined;\n            this.cachedModel = model;\n            if (isCacheEmpty) {\n                this.scheduleUpdate();\n            }\n        }\n    };\n    ViewerCache.prototype.scheduleUpdate = function () {\n        var _this = this;\n        this.syncer.onEndOfNextFrame(function () {\n            if (_this.cachedModel) {\n                _this.delegate.update(_this.cachedModel);\n                _this.cachedModel = undefined;\n            }\n        });\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IViewer),\n        __metadata(\"design:type\", Object)\n    ], ViewerCache.prototype, \"delegate\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.AnimationFrameSyncer),\n        __metadata(\"design:type\", animation_frame_syncer_1.AnimationFrameSyncer)\n    ], ViewerCache.prototype, \"syncer\", void 0);\n    ViewerCache = __decorate([\n        inversify_1.injectable()\n    ], ViewerCache);\n    return ViewerCache;\n}());\nexports.ViewerCache = ViewerCache;\n//# sourceMappingURL=viewer-cache.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar object_1 = require(\"../../utils/object\");\nvar types_1 = require(\"../types\");\nexports.defaultViewerOptions = function () { return ({\n    baseDiv: 'sprotty',\n    baseClass: 'sprotty',\n    hiddenDiv: 'sprotty-hidden',\n    hiddenClass: 'sprotty-hidden',\n    popupDiv: 'sprotty-popup',\n    popupClass: 'sprotty-popup',\n    popupClosedClass: 'sprotty-popup-closed',\n    needsClientLayout: true,\n    needsServerLayout: false,\n    popupOpenDelay: 1000,\n    popupCloseDelay: 300\n}); };\n/**\n * Utility function to partially set viewer options. Default values (from `defaultViewerOptions`) are used for\n * options that are not specified.\n */\nfunction configureViewerOptions(context, options) {\n    var opt = __assign(__assign({}, exports.defaultViewerOptions()), options);\n    if (context.isBound(types_1.TYPES.ViewerOptions))\n        context.rebind(types_1.TYPES.ViewerOptions).toConstantValue(opt);\n    else\n        context.bind(types_1.TYPES.ViewerOptions).toConstantValue(opt);\n}\nexports.configureViewerOptions = configureViewerOptions;\n/**\n * Utility function to partially override the currently configured viewer options in a DI container.\n */\nfunction overrideViewerOptions(container, options) {\n    var opt = container.get(types_1.TYPES.ViewerOptions);\n    object_1.safeAssign(opt, options);\n    return opt;\n}\nexports.overrideViewerOptions = overrideViewerOptions;\n//# sourceMappingURL=viewer-options.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx html */\nvar inversify_1 = require(\"inversify\");\nvar snabbdom_1 = require(\"snabbdom\");\nvar jsx_1 = require(\"../../lib/jsx\"); // must be html here, as we're creating a div\nvar browser_1 = require(\"../../utils/browser\");\nvar initialize_canvas_1 = require(\"../features/initialize-canvas\");\nvar smodel_factory_1 = require(\"../model/smodel-factory\");\nvar types_1 = require(\"../types\");\nvar thunk_view_1 = require(\"./thunk-view\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar ModelRenderer = /** @class */ (function () {\n    function ModelRenderer(viewRegistry, targetKind, postprocessors, args) {\n        if (args === void 0) { args = {}; }\n        this.viewRegistry = viewRegistry;\n        this.targetKind = targetKind;\n        this.postprocessors = postprocessors;\n        this.args = args;\n    }\n    ModelRenderer.prototype.decorate = function (vnode, element) {\n        if (thunk_view_1.isThunk(vnode)) {\n            return vnode;\n        }\n        return this.postprocessors.reduce(function (n, processor) { return processor.decorate(n, element); }, vnode);\n    };\n    ModelRenderer.prototype.renderElement = function (element) {\n        var view = this.viewRegistry.get(element.type);\n        var vnode = view.render(element, this, __assign({}, this.args));\n        if (vnode) {\n            return this.decorate(vnode, element);\n        }\n        else {\n            return undefined;\n        }\n    };\n    ModelRenderer.prototype.renderChildren = function (element, args) {\n        var context = args ?\n            new ModelRenderer(this.viewRegistry, this.targetKind, this.postprocessors, __assign(__assign({}, args), { parentArgs: this.args })) : this;\n        return element.children\n            .map(function (child) { return context.renderElement(child); })\n            .filter(function (vnode) { return vnode !== undefined; });\n    };\n    ModelRenderer.prototype.postUpdate = function (cause) {\n        this.postprocessors.forEach(function (processor) { return processor.postUpdate(cause); });\n    };\n    return ModelRenderer;\n}());\nexports.ModelRenderer = ModelRenderer;\nvar PatcherProvider = /** @class */ (function () {\n    function PatcherProvider() {\n        this.patcher = snabbdom_1.init(this.createModules());\n    }\n    PatcherProvider.prototype.createModules = function () {\n        return [\n            snabbdom_1.propsModule,\n            snabbdom_1.attributesModule,\n            snabbdom_1.classModule,\n            snabbdom_1.styleModule,\n            snabbdom_1.eventListenersModule\n        ];\n    };\n    PatcherProvider = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [])\n    ], PatcherProvider);\n    return PatcherProvider;\n}());\nexports.PatcherProvider = PatcherProvider;\n/**\n * The component that turns the model into an SVG DOM.\n * Uses a VDOM based on snabbdom.js for performance.\n */\nvar ModelViewer = /** @class */ (function () {\n    function ModelViewer(modelRendererFactory, patcherProvider, postprocessors) {\n        this.renderer = modelRendererFactory('main', postprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n    ModelViewer.prototype.update = function (model, cause) {\n        var _this = this;\n        this.logger.log(this, 'rendering', model);\n        var newVDOM = jsx_1.html(\"div\", { id: this.options.baseDiv }, this.renderer.renderElement(model));\n        if (this.lastVDOM !== undefined) {\n            var hadFocus = this.hasFocus();\n            vnode_utils_1.copyClassesFromVNode(this.lastVDOM, newVDOM);\n            this.lastVDOM = this.patcher.call(this, this.lastVDOM, newVDOM);\n            this.restoreFocus(hadFocus);\n        }\n        else if (typeof document !== 'undefined') {\n            var placeholder = document.getElementById(this.options.baseDiv);\n            if (placeholder !== null) {\n                if (typeof window !== 'undefined') {\n                    window.addEventListener('resize', function () {\n                        _this.onWindowResize(newVDOM);\n                    });\n                }\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n                vnode_utils_1.setClass(newVDOM, this.options.baseClass, true);\n                this.lastVDOM = this.patcher.call(this, placeholder, newVDOM);\n            }\n            else {\n                this.logger.error(this, 'element not in DOM:', this.options.baseDiv);\n            }\n        }\n        this.renderer.postUpdate(cause);\n    };\n    ModelViewer.prototype.hasFocus = function () {\n        if (typeof document !== 'undefined' && document.activeElement && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            var lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                var lastElement = lastRootVNode.elm;\n                return document.activeElement === lastElement;\n            }\n        }\n        return false;\n    };\n    ModelViewer.prototype.restoreFocus = function (focus) {\n        if (focus && this.lastVDOM.children && this.lastVDOM.children.length > 0) {\n            var lastRootVNode = this.lastVDOM.children[0];\n            if (typeof lastRootVNode === 'object') {\n                var lastElement = lastRootVNode.elm;\n                if (lastElement && typeof lastElement.focus === 'function')\n                    lastElement.focus();\n            }\n        }\n    };\n    ModelViewer.prototype.onWindowResize = function (vdom) {\n        var baseDiv = document.getElementById(this.options.baseDiv);\n        if (baseDiv !== null) {\n            var newBounds = this.getBoundsInPage(baseDiv);\n            this.actiondispatcher.dispatch(new initialize_canvas_1.InitializeCanvasBoundsAction(newBounds));\n        }\n    };\n    ModelViewer.prototype.getBoundsInPage = function (element) {\n        var bounds = element.getBoundingClientRect();\n        var scroll = browser_1.getWindowScroll();\n        return {\n            x: bounds.left + scroll.x,\n            y: bounds.top + scroll.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], ModelViewer.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], ModelViewer.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], ModelViewer.prototype, \"actiondispatcher\", void 0);\n    ModelViewer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelRendererFactory)),\n        __param(1, inversify_1.inject(types_1.TYPES.PatcherProvider)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.IVNodePostprocessor)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Function, PatcherProvider, Array])\n    ], ModelViewer);\n    return ModelViewer;\n}());\nexports.ModelViewer = ModelViewer;\n/**\n * Viewer for the _hidden_ model. This serves as an intermediate step to compute bounds\n * of elements. The model is rendered in a section that is not visible to the user,\n * and then the bounds are extracted from the DOM.\n */\nvar HiddenModelViewer = /** @class */ (function () {\n    function HiddenModelViewer(modelRendererFactory, patcherProvider, hiddenPostprocessors) {\n        this.hiddenRenderer = modelRendererFactory('hidden', hiddenPostprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n    HiddenModelViewer.prototype.update = function (hiddenModel, cause) {\n        this.logger.log(this, 'rendering hidden');\n        var newVDOM;\n        if (hiddenModel.type === smodel_factory_1.EMPTY_ROOT.type) {\n            newVDOM = jsx_1.html(\"div\", { id: this.options.hiddenDiv });\n        }\n        else {\n            var hiddenVNode = this.hiddenRenderer.renderElement(hiddenModel);\n            if (hiddenVNode) {\n                vnode_utils_1.setAttr(hiddenVNode, 'opacity', 0);\n            }\n            newVDOM = jsx_1.html(\"div\", { id: this.options.hiddenDiv }, hiddenVNode);\n        }\n        if (this.lastHiddenVDOM !== undefined) {\n            vnode_utils_1.copyClassesFromVNode(this.lastHiddenVDOM, newVDOM);\n            this.lastHiddenVDOM = this.patcher.call(this, this.lastHiddenVDOM, newVDOM);\n        }\n        else {\n            var placeholder = document.getElementById(this.options.hiddenDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement(\"div\");\n                document.body.appendChild(placeholder);\n            }\n            else {\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n            }\n            vnode_utils_1.setClass(newVDOM, this.options.baseClass, true);\n            vnode_utils_1.setClass(newVDOM, this.options.hiddenClass, true);\n            this.lastHiddenVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.hiddenRenderer.postUpdate(cause);\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], HiddenModelViewer.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], HiddenModelViewer.prototype, \"logger\", void 0);\n    HiddenModelViewer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelRendererFactory)),\n        __param(1, inversify_1.inject(types_1.TYPES.PatcherProvider)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.HiddenVNodePostprocessor)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Function, PatcherProvider, Array])\n    ], HiddenModelViewer);\n    return HiddenModelViewer;\n}());\nexports.HiddenModelViewer = HiddenModelViewer;\nvar PopupModelViewer = /** @class */ (function () {\n    function PopupModelViewer(modelRendererFactory, patcherProvider, popupPostprocessors) {\n        this.modelRendererFactory = modelRendererFactory;\n        this.popupRenderer = this.modelRendererFactory('popup', popupPostprocessors);\n        this.patcher = patcherProvider.patcher;\n    }\n    PopupModelViewer.prototype.update = function (model, cause) {\n        this.logger.log(this, 'rendering popup', model);\n        var popupClosed = model.type === smodel_factory_1.EMPTY_ROOT.type;\n        var newVDOM;\n        if (popupClosed) {\n            newVDOM = jsx_1.html(\"div\", { id: this.options.popupDiv });\n        }\n        else {\n            var position = model.canvasBounds;\n            var inlineStyle = {\n                top: position.y + 'px',\n                left: position.x + 'px'\n            };\n            newVDOM = jsx_1.html(\"div\", { id: this.options.popupDiv, style: inlineStyle }, this.popupRenderer.renderElement(model));\n        }\n        if (this.lastPopupVDOM !== undefined) {\n            vnode_utils_1.copyClassesFromVNode(this.lastPopupVDOM, newVDOM);\n            vnode_utils_1.setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, this.lastPopupVDOM, newVDOM);\n        }\n        else if (typeof document !== 'undefined') {\n            var placeholder = document.getElementById(this.options.popupDiv);\n            if (placeholder === null) {\n                placeholder = document.createElement(\"div\");\n                document.body.appendChild(placeholder);\n            }\n            else {\n                vnode_utils_1.copyClassesFromElement(placeholder, newVDOM);\n            }\n            vnode_utils_1.setClass(newVDOM, this.options.popupClass, true);\n            vnode_utils_1.setClass(newVDOM, this.options.popupClosedClass, popupClosed);\n            this.lastPopupVDOM = this.patcher.call(this, placeholder, newVDOM);\n        }\n        this.popupRenderer.postUpdate(cause);\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], PopupModelViewer.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], PopupModelViewer.prototype, \"logger\", void 0);\n    PopupModelViewer = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ModelRendererFactory)),\n        __param(1, inversify_1.inject(types_1.TYPES.PatcherProvider)),\n        __param(2, inversify_1.multiInject(types_1.TYPES.PopupVNodePostprocessor)), __param(2, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Function, PatcherProvider, Array])\n    ], PopupModelViewer);\n    return PopupModelViewer;\n}());\nexports.PopupModelViewer = PopupModelViewer;\n//# sourceMappingURL=viewer.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar vnode_utils_1 = require(\"./vnode-utils\");\nvar FocusFixPostprocessor = /** @class */ (function () {\n    function FocusFixPostprocessor() {\n    }\n    FocusFixPostprocessor.prototype.decorate = function (vnode, element) {\n        if (vnode.sel && vnode.sel.startsWith('svg'))\n            // allows to set focus in Firefox\n            vnode_utils_1.setAttr(vnode, 'tabindex', 0);\n        return vnode;\n    };\n    FocusFixPostprocessor.prototype.postUpdate = function () {\n    };\n    FocusFixPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], FocusFixPostprocessor);\n    return FocusFixPostprocessor;\n}());\nexports.FocusFixPostprocessor = FocusFixPostprocessor;\n//# sourceMappingURL=vnode-postprocessor.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction setAttr(vnode, name, value) {\n    getAttrs(vnode)[name] = value;\n}\nexports.setAttr = setAttr;\nfunction setClass(vnode, name, value) {\n    getClass(vnode)[name] = value;\n}\nexports.setClass = setClass;\nfunction setNamespace(node, ns) {\n    if (node.data === undefined)\n        node.data = {};\n    node.data.ns = ns;\n    var children = node.children;\n    if (children !== undefined) {\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (typeof child !== 'string')\n                setNamespace(child, ns);\n        }\n    }\n}\nexports.setNamespace = setNamespace;\nfunction copyClassesFromVNode(source, target) {\n    var classList = getClass(source);\n    Object.keys(classList).forEach(function (c) { return setClass(target, c, true); });\n}\nexports.copyClassesFromVNode = copyClassesFromVNode;\nfunction copyClassesFromElement(element, target) {\n    var classList = element.classList;\n    for (var i = 0; i < classList.length; i++) {\n        var item = classList.item(i);\n        if (item)\n            setClass(target, item, true);\n    }\n}\nexports.copyClassesFromElement = copyClassesFromElement;\nfunction mergeStyle(vnode, style) {\n    getData(vnode).style = __assign(__assign({}, (getData(vnode).style || {})), style);\n}\nexports.mergeStyle = mergeStyle;\nfunction on(vnode, event, listener) {\n    var val = getOn(vnode);\n    if (val[event]) {\n        throw new Error('EventListener for ' + event + ' already registered on VNode');\n    }\n    val[event] = listener;\n}\nexports.on = on;\nfunction getAttrs(vnode) {\n    var data = getData(vnode);\n    if (!data.attrs)\n        data.attrs = {};\n    return data.attrs;\n}\nexports.getAttrs = getAttrs;\nfunction getData(vnode) {\n    if (!vnode.data)\n        vnode.data = {};\n    return vnode.data;\n}\nfunction getClass(vnode) {\n    var data = getData(vnode);\n    if (!data.class)\n        data.class = {};\n    return data.class;\n}\nfunction getOn(vnode) {\n    var data = getData(vnode);\n    if (!data.on)\n        data.on = {};\n    return data.on;\n}\n//# sourceMappingURL=vnode-utils.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\nvar AbstractLayout = /** @class */ (function () {\n    function AbstractLayout() {\n    }\n    AbstractLayout.prototype.layout = function (container, layouter) {\n        var boundsData = layouter.getBoundsData(container);\n        var options = this.getLayoutOptions(container);\n        var childrenSize = this.getChildrenSize(container, options, layouter);\n        var maxWidth = options.paddingFactor * (options.resizeContainer\n            ? childrenSize.width\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).width) - options.paddingLeft - options.paddingRight);\n        var maxHeight = options.paddingFactor * (options.resizeContainer\n            ? childrenSize.height\n            : Math.max(0, this.getFixedContainerBounds(container, options, layouter).height) - options.paddingTop - options.paddingBottom);\n        if (maxWidth > 0 && maxHeight > 0) {\n            var offset = this.layoutChildren(container, layouter, options, maxWidth, maxHeight);\n            boundsData.bounds = this.getFinalContainerBounds(container, offset, options, maxWidth, maxHeight);\n            boundsData.boundsChanged = true;\n        }\n    };\n    AbstractLayout.prototype.getFinalContainerBounds = function (container, lastOffset, options, maxWidth, maxHeight) {\n        return {\n            x: container.bounds.x,\n            y: container.bounds.y,\n            width: Math.max(options.minWidth, maxWidth + options.paddingLeft + options.paddingRight),\n            height: Math.max(options.minHeight, maxHeight + options.paddingTop + options.paddingBottom)\n        };\n    };\n    AbstractLayout.prototype.getFixedContainerBounds = function (container, layoutOptions, layouter) {\n        var currentContainer = container;\n        while (true) {\n            if (model_1.isBoundsAware(currentContainer)) {\n                var bounds = currentContainer.bounds;\n                if (model_1.isLayoutContainer(currentContainer) && layoutOptions.resizeContainer)\n                    layouter.log.error(currentContainer, 'Resizable container found while detecting fixed bounds');\n                if (geometry_1.isValidDimension(bounds))\n                    return bounds;\n            }\n            if (currentContainer instanceof smodel_1.SChildElement) {\n                currentContainer = currentContainer.parent;\n            }\n            else {\n                layouter.log.error(currentContainer, 'Cannot detect fixed bounds');\n                return geometry_1.EMPTY_BOUNDS;\n            }\n        }\n    };\n    AbstractLayout.prototype.layoutChildren = function (container, layouter, containerOptions, maxWidth, maxHeight) {\n        var _this = this;\n        var currentOffset = {\n            x: containerOptions.paddingLeft + 0.5 * (maxWidth - (maxWidth / containerOptions.paddingFactor)),\n            y: containerOptions.paddingTop + 0.5 * (maxHeight - (maxHeight / containerOptions.paddingFactor))\n        };\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var boundsData = layouter.getBoundsData(child);\n                var bounds = boundsData.bounds;\n                var childOptions = _this.getChildLayoutOptions(child, containerOptions);\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    currentOffset = _this.layoutChild(child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight);\n                }\n            }\n        });\n        return currentOffset;\n    };\n    AbstractLayout.prototype.getDx = function (hAlign, bounds, maxWidth) {\n        switch (hAlign) {\n            case 'left':\n                return 0;\n            case 'center':\n                return 0.5 * (maxWidth - bounds.width);\n            case 'right':\n                return maxWidth - bounds.width;\n        }\n    };\n    AbstractLayout.prototype.getDy = function (vAlign, bounds, maxHeight) {\n        switch (vAlign) {\n            case 'top':\n                return 0;\n            case 'center':\n                return 0.5 * (maxHeight - bounds.height);\n            case 'bottom':\n                return maxHeight - bounds.height;\n        }\n    };\n    AbstractLayout.prototype.getChildLayoutOptions = function (child, containerOptions) {\n        var layoutOptions = child.layoutOptions;\n        if (layoutOptions === undefined)\n            return containerOptions;\n        else\n            return this.spread(containerOptions, layoutOptions);\n    };\n    AbstractLayout.prototype.getLayoutOptions = function (element) {\n        var _this = this;\n        var current = element;\n        var allOptions = [];\n        while (current !== undefined) {\n            var layoutOptions = current.layoutOptions;\n            if (layoutOptions !== undefined)\n                allOptions.push(layoutOptions);\n            if (current instanceof smodel_1.SChildElement)\n                current = current.parent;\n            else\n                break;\n        }\n        return allOptions.reverse().reduce(function (a, b) { return _this.spread(a, b); }, this.getDefaultLayoutOptions());\n    };\n    AbstractLayout = __decorate([\n        inversify_1.injectable()\n    ], AbstractLayout);\n    return AbstractLayout;\n}());\nexports.AbstractLayout = AbstractLayout;\n//# sourceMappingURL=abstract-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar types_1 = require(\"../../base/types\");\nvar model_1 = require(\"./model\");\n/**\n * Sent from the model source (e.g. a DiagramServer) to the client to update the bounds of some\n * (or all) model elements.\n */\nvar SetBoundsAction = /** @class */ (function () {\n    function SetBoundsAction(bounds) {\n        this.bounds = bounds;\n        this.kind = SetBoundsAction.KIND;\n    }\n    SetBoundsAction.KIND = 'setBounds';\n    return SetBoundsAction;\n}());\nexports.SetBoundsAction = SetBoundsAction;\n/**\n * Sent from the model source to the client to request bounds for the given model. The model is\n * rendered invisibly so the bounds can derived from the DOM. The response is a ComputedBoundsAction.\n * This hidden rendering round-trip is necessary if the client is responsible for parts of the layout\n * (see `needsClientLayout` viewer option).\n */\nvar RequestBoundsAction = /** @class */ (function () {\n    function RequestBoundsAction(newRoot, requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.newRoot = newRoot;\n        this.requestId = requestId;\n        this.kind = RequestBoundsAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    RequestBoundsAction.create = function (newRoot) {\n        return new RequestBoundsAction(newRoot, action_1.generateRequestId());\n    };\n    RequestBoundsAction.KIND = 'requestBounds';\n    return RequestBoundsAction;\n}());\nexports.RequestBoundsAction = RequestBoundsAction;\n/**\n * Sent from the client to the model source (e.g. a DiagramServer) to transmit the result of bounds\n * computation as a response to a RequestBoundsAction. If the server is responsible for parts of\n * the layout (see `needsServerLayout` viewer option), it can do so after applying the computed bounds\n * received with this action. Otherwise there is no need to send the computed bounds to the server,\n * so they can be processed locally by the client.\n */\nvar ComputedBoundsAction = /** @class */ (function () {\n    function ComputedBoundsAction(bounds, revision, alignments, responseId) {\n        if (responseId === void 0) { responseId = ''; }\n        this.bounds = bounds;\n        this.revision = revision;\n        this.alignments = alignments;\n        this.responseId = responseId;\n        this.kind = ComputedBoundsAction.KIND;\n    }\n    ComputedBoundsAction.KIND = 'computedBounds';\n    return ComputedBoundsAction;\n}());\nexports.ComputedBoundsAction = ComputedBoundsAction;\n/**\n * Request a layout of the diagram or the selected elements only.\n */\nvar LayoutAction = /** @class */ (function () {\n    function LayoutAction() {\n        this.kind = LayoutAction.KIND;\n    }\n    LayoutAction.KIND = 'layout';\n    return LayoutAction;\n}());\nexports.LayoutAction = LayoutAction;\nvar SetBoundsCommand = /** @class */ (function (_super) {\n    __extends(SetBoundsCommand, _super);\n    function SetBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.bounds = [];\n        return _this;\n    }\n    SetBoundsCommand.prototype.execute = function (context) {\n        var _this = this;\n        this.action.bounds.forEach(function (b) {\n            var element = context.root.index.getById(b.elementId);\n            if (element && model_1.isBoundsAware(element)) {\n                _this.bounds.push({\n                    element: element,\n                    oldBounds: element.bounds,\n                    newPosition: b.newPosition,\n                    newSize: b.newSize\n                });\n            }\n        });\n        return this.redo(context);\n    };\n    SetBoundsCommand.prototype.undo = function (context) {\n        this.bounds.forEach(function (b) { return b.element.bounds = b.oldBounds; });\n        return context.root;\n    };\n    SetBoundsCommand.prototype.redo = function (context) {\n        this.bounds.forEach(function (b) {\n            if (b.newPosition)\n                b.element.bounds = __assign(__assign({}, b.newPosition), b.newSize);\n            else\n                // keep the position\n                b.element.bounds = __assign({ x: b.element.bounds.x, y: b.element.bounds.y }, b.newSize);\n        });\n        return context.root;\n    };\n    SetBoundsCommand.KIND = SetBoundsAction.KIND;\n    SetBoundsCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetBoundsAction])\n    ], SetBoundsCommand);\n    return SetBoundsCommand;\n}(command_1.SystemCommand));\nexports.SetBoundsCommand = SetBoundsCommand;\nvar RequestBoundsCommand = /** @class */ (function (_super) {\n    __extends(RequestBoundsCommand, _super);\n    function RequestBoundsCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    RequestBoundsCommand.prototype.execute = function (context) {\n        return {\n            model: context.modelFactory.createRoot(this.action.newRoot),\n            modelChanged: true,\n            cause: this.action\n        };\n    };\n    Object.defineProperty(RequestBoundsCommand.prototype, \"blockUntil\", {\n        get: function () {\n            return function (action) { return action.kind === ComputedBoundsAction.KIND; };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RequestBoundsCommand.KIND = RequestBoundsAction.KIND;\n    RequestBoundsCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [RequestBoundsAction])\n    ], RequestBoundsCommand);\n    return RequestBoundsCommand;\n}(command_1.HiddenCommand));\nexports.RequestBoundsCommand = RequestBoundsCommand;\n//# sourceMappingURL=bounds-manipulation.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar bounds_manipulation_1 = require(\"./bounds-manipulation\");\nvar hidden_bounds_updater_1 = require(\"./hidden-bounds-updater\");\nvar layout_1 = require(\"./layout\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar hbox_layout_1 = require(\"./hbox-layout\");\nvar vbox_layout_1 = require(\"./vbox-layout\");\nvar stack_layout_1 = require(\"./stack-layout\");\nvar boundsModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, bounds_manipulation_1.SetBoundsCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, bounds_manipulation_1.RequestBoundsCommand);\n    bind(hidden_bounds_updater_1.HiddenBoundsUpdater).toSelf().inSingletonScope();\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(hidden_bounds_updater_1.HiddenBoundsUpdater);\n    bind(types_1.TYPES.Layouter).to(layout_1.Layouter).inSingletonScope();\n    bind(types_1.TYPES.LayoutRegistry).to(layout_1.LayoutRegistry).inSingletonScope();\n    layout_1.configureLayout({ bind: bind, isBound: isBound }, vbox_layout_1.VBoxLayouter.KIND, vbox_layout_1.VBoxLayouter);\n    layout_1.configureLayout({ bind: bind, isBound: isBound }, hbox_layout_1.HBoxLayouter.KIND, hbox_layout_1.HBoxLayouter);\n    layout_1.configureLayout({ bind: bind, isBound: isBound }, stack_layout_1.StackLayouter.KIND, stack_layout_1.StackLayouter);\n});\nexports.default = boundsModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\nvar model_1 = require(\"./model\");\n/**\n * Layouts children of a container in horizontal (left->right) direction.\n */\nvar HBoxLayouter = /** @class */ (function (_super) {\n    __extends(HBoxLayouter, _super);\n    function HBoxLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HBoxLayouter.prototype.getChildrenSize = function (container, containerOptions, layouter) {\n        var maxWidth = 0;\n        var maxHeight = -1;\n        var isFirst = true;\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var bounds = layouter.getBoundsData(child).bounds;\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    if (isFirst)\n                        isFirst = false;\n                    else\n                        maxWidth += containerOptions.hGap;\n                    maxWidth += bounds.width;\n                    maxHeight = Math.max(maxHeight, bounds.height);\n                }\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    HBoxLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: currentOffset.x + child.bounds.x - bounds.x,\n            y: containerOptions.paddingTop + child.bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x + bounds.width + containerOptions.hGap,\n            y: currentOffset.y\n        };\n    };\n    HBoxLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hGap: 1,\n            vAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    };\n    HBoxLayouter.prototype.spread = function (a, b) {\n        return __assign(__assign({}, a), b);\n    };\n    HBoxLayouter.KIND = 'hbox';\n    HBoxLayouter = __decorate([\n        inversify_1.injectable()\n    ], HBoxLayouter);\n    return HBoxLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.HBoxLayouter = HBoxLayouter;\n//# sourceMappingURL=hbox-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar types_1 = require(\"../../base/types\");\nvar bounds_manipulation_1 = require(\"./bounds-manipulation\");\nvar layout_1 = require(\"./layout\");\nvar model_1 = require(\"./model\");\nvar BoundsData = /** @class */ (function () {\n    function BoundsData() {\n    }\n    return BoundsData;\n}());\nexports.BoundsData = BoundsData;\n/**\n * Grabs the bounds from hidden SVG DOM elements, applies layouts and fires\n * ComputedBoundsActions.\n *\n * The actual bounds of an element can usually not be determined from the SModel\n * as they depend on the view implementation and CSS stylings. So the best way is\n * to grab them from a live (but hidden) SVG using getBBox().\n *\n * If an element is Alignable, and the top-left corner of its bounding box is not\n * the origin, we also issue a realign with the ComputedBoundsAction.\n */\nvar HiddenBoundsUpdater = /** @class */ (function () {\n    function HiddenBoundsUpdater() {\n        this.element2boundsData = new Map;\n    }\n    HiddenBoundsUpdater.prototype.decorate = function (vnode, element) {\n        if (model_1.isSizeable(element) || model_1.isLayoutContainer(element)) {\n            this.element2boundsData.set(element, {\n                vnode: vnode,\n                bounds: element.bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            });\n        }\n        if (element instanceof smodel_1.SModelRoot)\n            this.root = element;\n        return vnode;\n    };\n    HiddenBoundsUpdater.prototype.postUpdate = function (cause) {\n        if (cause === undefined || cause.kind !== bounds_manipulation_1.RequestBoundsAction.KIND) {\n            return;\n        }\n        var request = cause;\n        this.getBoundsFromDOM();\n        this.layouter.layout(this.element2boundsData);\n        var resizes = [];\n        var realignments = [];\n        this.element2boundsData.forEach(function (boundsData, element) {\n            if (boundsData.boundsChanged && boundsData.bounds !== undefined) {\n                var resize = {\n                    elementId: element.id,\n                    newSize: {\n                        width: boundsData.bounds.width,\n                        height: boundsData.bounds.height\n                    }\n                };\n                // don't copy position if the element is layouted by the server\n                if (element instanceof smodel_1.SChildElement && model_1.isLayoutContainer(element.parent))\n                    resize.newPosition = {\n                        x: boundsData.bounds.x,\n                        y: boundsData.bounds.y,\n                    };\n                resizes.push(resize);\n            }\n            if (boundsData.alignmentChanged && boundsData.alignment !== undefined)\n                realignments.push({\n                    elementId: element.id,\n                    newAlignment: boundsData.alignment\n                });\n        });\n        var revision = (this.root !== undefined) ? this.root.revision : undefined;\n        this.actionDispatcher.dispatch(new bounds_manipulation_1.ComputedBoundsAction(resizes, revision, realignments, request.requestId));\n        this.element2boundsData.clear();\n    };\n    HiddenBoundsUpdater.prototype.getBoundsFromDOM = function () {\n        var _this = this;\n        this.element2boundsData.forEach(function (boundsData, element) {\n            if (boundsData.bounds && model_1.isSizeable(element)) {\n                var vnode = boundsData.vnode;\n                if (vnode && vnode.elm) {\n                    var boundingBox = _this.getBounds(vnode.elm, element);\n                    if (model_1.isAlignable(element) && !(geometry_1.almostEquals(boundingBox.x, 0) && geometry_1.almostEquals(boundingBox.y, 0))) {\n                        boundsData.alignment = {\n                            x: -boundingBox.x,\n                            y: -boundingBox.y\n                        };\n                        boundsData.alignmentChanged = true;\n                    }\n                    var newBounds = {\n                        x: element.bounds.x,\n                        y: element.bounds.y,\n                        width: boundingBox.width,\n                        height: boundingBox.height\n                    };\n                    if (!(geometry_1.almostEquals(newBounds.x, element.bounds.x)\n                        && geometry_1.almostEquals(newBounds.y, element.bounds.y)\n                        && geometry_1.almostEquals(newBounds.width, element.bounds.width)\n                        && geometry_1.almostEquals(newBounds.height, element.bounds.height))) {\n                        boundsData.bounds = newBounds;\n                        boundsData.boundsChanged = true;\n                    }\n                }\n            }\n        });\n    };\n    HiddenBoundsUpdater.prototype.getBounds = function (elm, element) {\n        if (typeof elm.getBBox !== 'function') {\n            this.logger.error(this, 'Not an SVG element:', elm);\n            return geometry_1.EMPTY_BOUNDS;\n        }\n        var bounds = elm.getBBox();\n        return {\n            x: bounds.x,\n            y: bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], HiddenBoundsUpdater.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], HiddenBoundsUpdater.prototype, \"actionDispatcher\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.Layouter),\n        __metadata(\"design:type\", layout_1.Layouter)\n    ], HiddenBoundsUpdater.prototype, \"layouter\", void 0);\n    HiddenBoundsUpdater = __decorate([\n        inversify_1.injectable()\n    ], HiddenBoundsUpdater);\n    return HiddenBoundsUpdater;\n}());\nexports.HiddenBoundsUpdater = HiddenBoundsUpdater;\n//# sourceMappingURL=hidden-bounds-updater.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar registry_1 = require(\"../../utils/registry\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"./model\");\nvar inversify_2 = require(\"../../utils/inversify\");\nvar LayoutRegistry = /** @class */ (function (_super) {\n    __extends(LayoutRegistry, _super);\n    function LayoutRegistry(layouts) {\n        if (layouts === void 0) { layouts = []; }\n        var _this = _super.call(this) || this;\n        layouts.forEach(function (layout) {\n            if (_this.hasKey(layout.layoutKind)) {\n                _this.logger.warn('Layout kind is already defined: ', layout.layoutKind);\n            }\n            else {\n                _this.register(layout.layoutKind, layout.factory());\n            }\n        });\n        return _this;\n    }\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], LayoutRegistry.prototype, \"logger\", void 0);\n    LayoutRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.LayoutRegistration)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], LayoutRegistry);\n    return LayoutRegistry;\n}(registry_1.InstanceRegistry));\nexports.LayoutRegistry = LayoutRegistry;\nvar Layouter = /** @class */ (function () {\n    function Layouter() {\n    }\n    Layouter.prototype.layout = function (element2boundsData) {\n        new StatefulLayouter(element2boundsData, this.layoutRegistry, this.logger).layout();\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.LayoutRegistry),\n        __metadata(\"design:type\", LayoutRegistry)\n    ], Layouter.prototype, \"layoutRegistry\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], Layouter.prototype, \"logger\", void 0);\n    Layouter = __decorate([\n        inversify_1.injectable()\n    ], Layouter);\n    return Layouter;\n}());\nexports.Layouter = Layouter;\nvar StatefulLayouter = /** @class */ (function () {\n    function StatefulLayouter(element2boundsData, layoutRegistry, log) {\n        var _this = this;\n        this.element2boundsData = element2boundsData;\n        this.layoutRegistry = layoutRegistry;\n        this.log = log;\n        this.toBeLayouted = [];\n        element2boundsData.forEach(function (data, element) {\n            if (model_1.isLayoutContainer(element))\n                _this.toBeLayouted.push(element);\n        });\n    }\n    StatefulLayouter.prototype.getBoundsData = function (element) {\n        var boundsData = this.element2boundsData.get(element);\n        var bounds = element.bounds;\n        if (model_1.isLayoutContainer(element) && this.toBeLayouted.indexOf(element) >= 0) {\n            bounds = this.doLayout(element);\n        }\n        if (!boundsData) {\n            boundsData = {\n                bounds: bounds,\n                boundsChanged: false,\n                alignmentChanged: false\n            };\n            this.element2boundsData.set(element, boundsData);\n        }\n        return boundsData;\n    };\n    StatefulLayouter.prototype.layout = function () {\n        while (this.toBeLayouted.length > 0) {\n            var element = this.toBeLayouted[0];\n            this.doLayout(element);\n        }\n    };\n    StatefulLayouter.prototype.doLayout = function (element) {\n        var index = this.toBeLayouted.indexOf(element);\n        if (index >= 0)\n            this.toBeLayouted.splice(index, 1);\n        var layout = this.layoutRegistry.get(element.layout);\n        if (layout)\n            layout.layout(element, this);\n        var boundsData = this.element2boundsData.get(element);\n        if (boundsData !== undefined && boundsData.bounds !== undefined) {\n            return boundsData.bounds;\n        }\n        else {\n            this.log.error(element, 'Layout failed');\n            return geometry_1.EMPTY_BOUNDS;\n        }\n    };\n    return StatefulLayouter;\n}());\nexports.StatefulLayouter = StatefulLayouter;\nfunction configureLayout(context, kind, constr) {\n    if (typeof constr === 'function') {\n        if (!inversify_2.isInjectable(constr)) {\n            throw new Error(\"Layouts be @injectable: \" + constr.name);\n        }\n        if (!context.isBound(constr)) {\n            context.bind(constr).toSelf();\n        }\n    }\n    context.bind(types_1.TYPES.LayoutRegistration).toDynamicValue(function (ctx) { return ({\n        layoutKind: kind,\n        factory: function () { return ctx.container.get(constr); }\n    }); });\n}\nexports.configureLayout = configureLayout;\n//# sourceMappingURL=layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar browser_1 = require(\"../../utils/browser\");\nexports.boundsFeature = Symbol('boundsFeature');\nexports.layoutContainerFeature = Symbol('layoutContainerFeature');\nexports.layoutableChildFeature = Symbol('layoutableChildFeature');\nexports.alignFeature = Symbol('alignFeature');\nfunction isBoundsAware(element) {\n    return 'bounds' in element;\n}\nexports.isBoundsAware = isBoundsAware;\nfunction isLayoutContainer(element) {\n    return isBoundsAware(element)\n        && element.hasFeature(exports.layoutContainerFeature)\n        && 'layout' in element;\n}\nexports.isLayoutContainer = isLayoutContainer;\nfunction isLayoutableChild(element) {\n    return isBoundsAware(element)\n        && element.hasFeature(exports.layoutableChildFeature);\n}\nexports.isLayoutableChild = isLayoutableChild;\nfunction isSizeable(element) {\n    return element.hasFeature(exports.boundsFeature) && isBoundsAware(element);\n}\nexports.isSizeable = isSizeable;\nfunction isAlignable(element) {\n    return element.hasFeature(exports.alignFeature)\n        && 'alignment' in element;\n}\nexports.isAlignable = isAlignable;\nfunction getAbsoluteBounds(element) {\n    var boundsAware = smodel_utils_1.findParentByFeature(element, isBoundsAware);\n    if (boundsAware !== undefined) {\n        var bounds = boundsAware.bounds;\n        var current = boundsAware;\n        while (current instanceof smodel_1.SChildElement) {\n            var parent_1 = current.parent;\n            bounds = parent_1.localToParent(bounds);\n            current = parent_1;\n        }\n        return bounds;\n    }\n    else if (element instanceof smodel_1.SModelRoot) {\n        var canvasBounds = element.canvasBounds;\n        return { x: 0, y: 0, width: canvasBounds.width, height: canvasBounds.height };\n    }\n    else {\n        return geometry_1.EMPTY_BOUNDS;\n    }\n}\nexports.getAbsoluteBounds = getAbsoluteBounds;\n/**\n * Returns the \"client-absolute\" bounds of the specified `element`.\n *\n * The client-absolute bounds are relative to the entire browser page.\n *\n * @param element The element to get the bounds for.\n * @param domHelper The dom helper to obtain the SVG element's id.\n * @param viewerOptions The viewer options to obtain sprotty's container div id.\n */\nfunction getAbsoluteClientBounds(element, domHelper, viewerOptions) {\n    var x = 0;\n    var y = 0;\n    var width = 0;\n    var height = 0;\n    var svgElementId = domHelper.createUniqueDOMElementId(element);\n    var svgElement = document.getElementById(svgElementId);\n    if (svgElement) {\n        var rect = svgElement.getBoundingClientRect();\n        var scroll_1 = browser_1.getWindowScroll();\n        x = rect.left + scroll_1.x;\n        y = rect.top + scroll_1.y;\n        width = rect.width;\n        height = rect.height;\n    }\n    var container = document.getElementById(viewerOptions.baseDiv);\n    if (container) {\n        while (container.offsetParent instanceof HTMLElement\n            && (container = container.offsetParent)) {\n            x -= container.offsetLeft;\n            y -= container.offsetTop;\n        }\n    }\n    return { x: x, y: y, width: width, height: height };\n}\nexports.getAbsoluteClientBounds = getAbsoluteClientBounds;\nfunction findChildrenAtPosition(parent, point) {\n    var matches = [];\n    doFindChildrenAtPosition(parent, point, matches);\n    return matches;\n}\nexports.findChildrenAtPosition = findChildrenAtPosition;\nfunction doFindChildrenAtPosition(parent, point, matches) {\n    parent.children.forEach(function (child) {\n        if (isBoundsAware(child) && geometry_1.includes(child.bounds, point))\n            matches.push(child);\n        if (child instanceof smodel_1.SParentElement) {\n            var newPoint = child.parentToLocal(point);\n            doFindChildrenAtPosition(child, newPoint, matches);\n        }\n    });\n}\n/**\n * Abstract class for elements with a position and a size.\n */\nvar SShapeElement = /** @class */ (function (_super) {\n    __extends(SShapeElement, _super);\n    function SShapeElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        return _this;\n    }\n    Object.defineProperty(SShapeElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SShapeElement.prototype.localToParent = function (point) {\n        var result = {\n            x: point.x + this.position.x,\n            y: point.y + this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    };\n    SShapeElement.prototype.parentToLocal = function (point) {\n        var result = {\n            x: point.x - this.position.x,\n            y: point.y - this.position.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width;\n            result.height = point.height;\n        }\n        return result;\n    };\n    return SShapeElement;\n}(smodel_1.SChildElement));\nexports.SShapeElement = SShapeElement;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar animation_1 = require(\"../../base/animations/animation\");\nvar ResizeAnimation = /** @class */ (function (_super) {\n    __extends(ResizeAnimation, _super);\n    function ResizeAnimation(model, elementResizes, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementResizes = elementResizes;\n        _this.reverse = reverse;\n        return _this;\n    }\n    ResizeAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.elementResizes.forEach(function (elementResize) {\n            var element = elementResize.element;\n            var newDimension = (_this.reverse) ? {\n                width: (1 - t) * elementResize.toDimension.width + t * elementResize.fromDimension.width,\n                height: (1 - t) * elementResize.toDimension.height + t * elementResize.fromDimension.height\n            } : {\n                width: (1 - t) * elementResize.fromDimension.width + t * elementResize.toDimension.width,\n                height: (1 - t) * elementResize.fromDimension.height + t * elementResize.toDimension.height\n            };\n            element.bounds = {\n                x: element.bounds.x,\n                y: element.bounds.y,\n                width: newDimension.width,\n                height: newDimension.height\n            };\n        });\n        return this.model;\n    };\n    return ResizeAnimation;\n}(animation_1.Animation));\nexports.ResizeAnimation = ResizeAnimation;\n//# sourceMappingURL=resize.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\nvar model_1 = require(\"./model\");\nvar StackLayouter = /** @class */ (function (_super) {\n    __extends(StackLayouter, _super);\n    function StackLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StackLayouter.prototype.getChildrenSize = function (container, options, layouter) {\n        var maxWidth = -1;\n        var maxHeight = -1;\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var bounds = layouter.getBoundsData(child).bounds;\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    maxWidth = Math.max(maxWidth, bounds.width);\n                    maxHeight = Math.max(maxHeight, bounds.height);\n                }\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    StackLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        var dy = this.getDy(childOptions.vAlign, bounds, maxHeight);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + child.bounds.x - bounds.x + dx,\n            y: containerOptions.paddingTop + child.bounds.y - bounds.y + dy,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return currentOffset;\n    };\n    StackLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            hAlign: 'center',\n            vAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    };\n    StackLayouter.prototype.spread = function (a, b) {\n        return __assign(__assign({}, a), b);\n    };\n    StackLayouter.KIND = 'stack';\n    StackLayouter = __decorate([\n        inversify_1.injectable()\n    ], StackLayouter);\n    return StackLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.StackLayouter = StackLayouter;\n//# sourceMappingURL=stack-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar abstract_layout_1 = require(\"./abstract-layout\");\nvar model_1 = require(\"./model\");\n/**\n * Layouts children of a container in vertical (top->bottom) direction.\n */\nvar VBoxLayouter = /** @class */ (function (_super) {\n    __extends(VBoxLayouter, _super);\n    function VBoxLayouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    VBoxLayouter.prototype.getChildrenSize = function (container, containerOptions, layouter) {\n        var maxWidth = -1;\n        var maxHeight = 0;\n        var isFirst = true;\n        container.children.forEach(function (child) {\n            if (model_1.isLayoutableChild(child)) {\n                var bounds = layouter.getBoundsData(child).bounds;\n                if (bounds !== undefined && geometry_1.isValidDimension(bounds)) {\n                    maxHeight += bounds.height;\n                    if (isFirst)\n                        isFirst = false;\n                    else\n                        maxHeight += containerOptions.vGap;\n                    maxWidth = Math.max(maxWidth, bounds.width);\n                }\n            }\n        });\n        return {\n            width: maxWidth,\n            height: maxHeight\n        };\n    };\n    VBoxLayouter.prototype.layoutChild = function (child, boundsData, bounds, childOptions, containerOptions, currentOffset, maxWidth, maxHeight) {\n        var dx = this.getDx(childOptions.hAlign, bounds, maxWidth);\n        boundsData.bounds = {\n            x: containerOptions.paddingLeft + child.bounds.x - bounds.x + dx,\n            y: currentOffset.y + child.bounds.y - bounds.y,\n            width: bounds.width,\n            height: bounds.height\n        };\n        boundsData.boundsChanged = true;\n        return {\n            x: currentOffset.x,\n            y: currentOffset.y + bounds.height + containerOptions.vGap\n        };\n    };\n    VBoxLayouter.prototype.getDefaultLayoutOptions = function () {\n        return {\n            resizeContainer: true,\n            paddingTop: 5,\n            paddingBottom: 5,\n            paddingLeft: 5,\n            paddingRight: 5,\n            paddingFactor: 1,\n            vGap: 1,\n            hAlign: 'center',\n            minWidth: 0,\n            minHeight: 0\n        };\n    };\n    VBoxLayouter.prototype.spread = function (a, b) {\n        return __assign(__assign({}, a), b);\n    };\n    VBoxLayouter.KIND = 'vbox';\n    VBoxLayouter = __decorate([\n        inversify_1.injectable()\n    ], VBoxLayouter);\n    return VBoxLayouter;\n}(abstract_layout_1.AbstractLayout));\nexports.VBoxLayouter = VBoxLayouter;\n//# sourceMappingURL=vbox-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"./model\");\nvar ShapeView = /** @class */ (function () {\n    function ShapeView() {\n    }\n    /**\n     * Check whether the given model element is in the current viewport. Use this method\n     * in your `render` implementation to skip rendering in case the element is not visible.\n     * This can greatly enhance performance for large models.\n     */\n    ShapeView.prototype.isVisible = function (model, context) {\n        if (context.targetKind === 'hidden') {\n            // Don't hide any element for hidden rendering\n            return true;\n        }\n        if (!geometry_1.isValidDimension(model.bounds)) {\n            // We should hide only if we know the element's bounds\n            return true;\n        }\n        var ab = model_1.getAbsoluteBounds(model);\n        var canvasBounds = model.root.canvasBounds;\n        return ab.x <= canvasBounds.width\n            && ab.x + ab.width >= 0\n            && ab.y <= canvasBounds.height\n            && ab.y + ab.height >= 0;\n    };\n    ShapeView = __decorate([\n        inversify_1.injectable()\n    ], ShapeView);\n    return ShapeView;\n}());\nexports.ShapeView = ShapeView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar registry_1 = require(\"../../utils/registry\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar ButtonHandlerRegistry = /** @class */ (function (_super) {\n    __extends(ButtonHandlerRegistry, _super);\n    function ButtonHandlerRegistry(buttonHandlerFactories) {\n        var _this = _super.call(this) || this;\n        buttonHandlerFactories.forEach(function (factory) { return _this.register(factory.TYPE, new factory()); });\n        return _this;\n    }\n    ButtonHandlerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IButtonHandler)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ButtonHandlerRegistry);\n    return ButtonHandlerRegistry;\n}(registry_1.InstanceRegistry));\nexports.ButtonHandlerRegistry = ButtonHandlerRegistry;\n//# sourceMappingURL=button-handler.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar button_handler_1 = require(\"./button-handler\");\nvar buttonModule = new inversify_1.ContainerModule(function (bind) {\n    bind(button_handler_1.ButtonHandlerRegistry).toSelf().inSingletonScope();\n});\nexports.default = buttonModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../fade/model\");\nvar SButton = /** @class */ (function (_super) {\n    __extends(SButton, _super);\n    function SButton() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.enabled = true;\n        return _this;\n    }\n    SButton.DEFAULT_FEATURES = [model_1.boundsFeature, model_1.layoutableChildFeature, model_2.fadeFeature];\n    return SButton;\n}(model_1.SShapeElement));\nexports.SButton = SButton;\n//# sourceMappingURL=model.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar types_1 = require(\"../../base/types\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar model_1 = require(\"../nameable/model\");\nvar select_1 = require(\"../select/select\");\nvar center_fit_1 = require(\"../viewport/center-fit\");\nvar CommandPaletteActionProviderRegistry = /** @class */ (function () {\n    function CommandPaletteActionProviderRegistry(actionProviders) {\n        if (actionProviders === void 0) { actionProviders = []; }\n        this.actionProviders = actionProviders;\n    }\n    CommandPaletteActionProviderRegistry.prototype.getActions = function (root, text, lastMousePosition, index) {\n        var actionLists = this.actionProviders.map(function (provider) { return provider.getActions(root, text, lastMousePosition, index); });\n        return Promise.all(actionLists).then(function (p) { return p.reduce(function (acc, promise) { return promise !== undefined ? acc.concat(promise) : acc; }); });\n    };\n    CommandPaletteActionProviderRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.ICommandPaletteActionProvider)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], CommandPaletteActionProviderRegistry);\n    return CommandPaletteActionProviderRegistry;\n}());\nexports.CommandPaletteActionProviderRegistry = CommandPaletteActionProviderRegistry;\nvar RevealNamedElementActionProvider = /** @class */ (function () {\n    function RevealNamedElementActionProvider(logger) {\n        this.logger = logger;\n    }\n    RevealNamedElementActionProvider.prototype.getActions = function (root, text, lastMousePosition, index) {\n        if (index !== undefined && index % 2 === 0)\n            return Promise.resolve(this.createSelectActions(root));\n        else\n            return Promise.resolve([new action_1.LabeledAction(\"Select all\", [new select_1.SelectAllAction()])]);\n    };\n    RevealNamedElementActionProvider.prototype.createSelectActions = function (modelRoot) {\n        var nameables = iterable_1.toArray(modelRoot.index.all().filter(function (element) { return model_1.isNameable(element); }));\n        return nameables.map(function (nameable) { return new action_1.LabeledAction(\"Reveal \" + model_1.name(nameable), [new select_1.SelectAction([nameable.id]), new center_fit_1.CenterAction([nameable.id])], 'fa-eye'); });\n    };\n    RevealNamedElementActionProvider = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.ILogger)),\n        __metadata(\"design:paramtypes\", [Object])\n    ], RevealNamedElementActionProvider);\n    return RevealNamedElementActionProvider;\n}());\nexports.RevealNamedElementActionProvider = RevealNamedElementActionProvider;\n//# sourceMappingURL=action-providers.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar types_1 = require(\"../../base/types\");\nvar ui_extension_1 = require(\"../../base/ui-extensions/ui-extension\");\nvar ui_extension_registry_1 = require(\"../../base/ui-extensions/ui-extension-registry\");\nvar dom_helper_1 = require(\"../../base/views/dom-helper\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../select/model\");\nvar action_providers_1 = require(\"./action-providers\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\n// import of function autocomplete(...) doesn't work\n// see also https://github.com/kraaden/autocomplete/issues/13\n// this is a workaround to still get the function including type support\nvar configureAutocomplete = require(\"autocompleter\");\nvar CommandPalette = /** @class */ (function (_super) {\n    __extends(CommandPalette, _super);\n    function CommandPalette() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.loadingIndicatorClasses = ['loading'];\n        _this.xOffset = 20;\n        _this.yOffset = 20;\n        _this.defaultWidth = 400;\n        _this.debounceWaitMs = 100;\n        _this.noCommandsMsg = \"No commands available\";\n        _this.paletteIndex = 0;\n        return _this;\n    }\n    CommandPalette_1 = CommandPalette;\n    CommandPalette.prototype.id = function () { return CommandPalette_1.ID; };\n    CommandPalette.prototype.containerClass = function () { return \"command-palette\"; };\n    CommandPalette.prototype.show = function (root) {\n        var contextElementIds = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            contextElementIds[_i - 1] = arguments[_i];\n        }\n        _super.prototype.show.apply(this, __spreadArrays([root], contextElementIds));\n        this.paletteIndex = 0;\n        this.contextActions = undefined;\n        this.inputElement.value = \"\";\n        this.autoCompleteResult = configureAutocomplete(this.autocompleteSettings(root));\n        this.inputElement.focus();\n    };\n    CommandPalette.prototype.initializeContents = function (containerElement) {\n        var _this = this;\n        containerElement.style.position = \"absolute\";\n        this.inputElement = document.createElement('input');\n        this.inputElement.style.width = '100%';\n        this.inputElement.addEventListener('keydown', function (event) { return _this.hideIfEscapeEvent(event); });\n        this.inputElement.addEventListener('keydown', function (event) { return _this.cylceIfInvokePaletteKey(event); });\n        this.inputElement.onblur = function () { return window.setTimeout(function () { return _this.hide(); }, 200); };\n        containerElement.appendChild(this.inputElement);\n    };\n    CommandPalette.prototype.hideIfEscapeEvent = function (event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            this.hide();\n        }\n    };\n    CommandPalette.prototype.cylceIfInvokePaletteKey = function (event) {\n        if (CommandPalette_1.isInvokePaletteKey(event)) {\n            this.cycle();\n        }\n    };\n    CommandPalette.prototype.cycle = function () {\n        this.contextActions = undefined;\n        this.paletteIndex++;\n    };\n    CommandPalette.prototype.onBeforeShow = function (containerElement, root) {\n        var selectedElementIds = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            selectedElementIds[_i - 2] = arguments[_i];\n        }\n        var x = this.xOffset;\n        var y = this.yOffset;\n        var selectedElements = iterable_1.toArray(root.index.all().filter(function (e) { return model_2.isSelectable(e) && e.selected; }));\n        if (selectedElements.length === 1) {\n            var bounds = model_1.getAbsoluteClientBounds(selectedElements[0], this.domHelper, this.viewerOptions);\n            x += bounds.x + bounds.width;\n            y += bounds.y;\n        }\n        else {\n            var bounds = model_1.getAbsoluteClientBounds(root, this.domHelper, this.viewerOptions);\n            x += bounds.x;\n            y += bounds.y;\n        }\n        containerElement.style.left = x + \"px\";\n        containerElement.style.top = y + \"px\";\n        containerElement.style.width = this.defaultWidth + \"px\";\n    };\n    CommandPalette.prototype.autocompleteSettings = function (root) {\n        var _this = this;\n        return {\n            input: this.inputElement,\n            emptyMsg: this.noCommandsMsg,\n            className: \"command-palette-suggestions\",\n            debounceWaitMs: this.debounceWaitMs,\n            showOnFocus: true,\n            minLength: -1,\n            fetch: function (text, update) {\n                return _this.updateAutoCompleteActions(update, text, root);\n            },\n            onSelect: function (item) { return _this.onSelect(item); },\n            render: function (item, currentValue) {\n                return _this.renderLabeledActionSuggestion(item, currentValue);\n            },\n            customize: function (input, inputRect, container, maxHeight) {\n                _this.customizeSuggestionContainer(container, inputRect, maxHeight);\n            }\n        };\n    };\n    CommandPalette.prototype.onSelect = function (item) {\n        this.executeAction(item);\n        this.hide();\n    };\n    CommandPalette.prototype.updateAutoCompleteActions = function (update, text, root) {\n        var _this = this;\n        this.onLoading();\n        if (this.contextActions) {\n            update(this.filterActions(text, this.contextActions));\n            this.onLoaded('success');\n        }\n        else {\n            this.actionProviderRegistry\n                .getActions(root, text, this.mousePositionTracker.lastPositionOnDiagram, this.paletteIndex)\n                .then(function (actions) {\n                _this.contextActions = actions;\n                update(_this.filterActions(text, actions));\n                _this.onLoaded('success');\n            })\n                .catch(function (reason) {\n                _this.logger.error(_this, \"Failed to obtain actions from command palette action providers\", reason);\n                _this.onLoaded('error');\n            });\n        }\n    };\n    CommandPalette.prototype.onLoading = function () {\n        var _a;\n        if (this.loadingIndicator && this.containerElement.contains(this.loadingIndicator)) {\n            return;\n        }\n        this.loadingIndicator = document.createElement('span');\n        (_a = this.loadingIndicator.classList).add.apply(_a, this.loadingIndicatorClasses);\n        this.containerElement.appendChild(this.loadingIndicator);\n    };\n    CommandPalette.prototype.onLoaded = function (success) {\n        if (this.containerElement.contains(this.loadingIndicator)) {\n            this.containerElement.removeChild(this.loadingIndicator);\n        }\n    };\n    CommandPalette.prototype.renderLabeledActionSuggestion = function (item, value) {\n        var itemElement = document.createElement(\"div\");\n        var wordMatcher = espaceForRegExp(value).split(\" \").join(\"|\");\n        var regex = new RegExp(wordMatcher, \"gi\");\n        if (item.icon) {\n            this.renderIcon(itemElement, item.icon);\n        }\n        itemElement.innerHTML += item.label.replace(regex, function (match) { return \"<em>\" + match + \"</em>\"; });\n        return itemElement;\n    };\n    CommandPalette.prototype.renderIcon = function (itemElement, icon) {\n        itemElement.innerHTML += \"<span class=\\\"icon fa \" + icon + \"\\\"></span>\";\n    };\n    CommandPalette.prototype.filterActions = function (filterText, actions) {\n        return iterable_1.toArray(actions.filter(function (action) {\n            var label = action.label.toLowerCase();\n            var searchWords = filterText.split(' ');\n            return searchWords.every(function (word) { return label.indexOf(word.toLowerCase()) !== -1; });\n        }));\n    };\n    CommandPalette.prototype.customizeSuggestionContainer = function (container, inputRect, maxHeight) {\n        // move container into our command palette container as this is already positioned correctly\n        if (this.containerElement) {\n            this.containerElement.appendChild(container);\n        }\n    };\n    CommandPalette.prototype.hide = function () {\n        _super.prototype.hide.call(this);\n        if (this.autoCompleteResult) {\n            this.autoCompleteResult.destroy();\n        }\n    };\n    CommandPalette.prototype.executeAction = function (input) {\n        var _this = this;\n        this.actionDispatcherProvider()\n            .then(function (actionDispatcher) { return actionDispatcher.dispatchAll(toActionArray(input)); })\n            .catch(function (reason) { return _this.logger.error(_this, 'No action dispatcher available to execute command palette action', reason); });\n    };\n    var CommandPalette_1;\n    CommandPalette.ID = \"command-palette\";\n    CommandPalette.isInvokePaletteKey = function (event) { return keyboard_1.matchesKeystroke(event, 'Space', 'ctrl'); };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcherProvider),\n        __metadata(\"design:type\", Function)\n    ], CommandPalette.prototype, \"actionDispatcherProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ICommandPaletteActionProviderRegistry),\n        __metadata(\"design:type\", action_providers_1.CommandPaletteActionProviderRegistry)\n    ], CommandPalette.prototype, \"actionProviderRegistry\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], CommandPalette.prototype, \"viewerOptions\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.DOMHelper),\n        __metadata(\"design:type\", dom_helper_1.DOMHelper)\n    ], CommandPalette.prototype, \"domHelper\", void 0);\n    __decorate([\n        inversify_1.inject(mouse_tool_1.MousePositionTracker),\n        __metadata(\"design:type\", mouse_tool_1.MousePositionTracker)\n    ], CommandPalette.prototype, \"mousePositionTracker\", void 0);\n    CommandPalette = CommandPalette_1 = __decorate([\n        inversify_1.injectable()\n    ], CommandPalette);\n    return CommandPalette;\n}(ui_extension_1.AbstractUIExtension));\nexports.CommandPalette = CommandPalette;\nfunction toActionArray(input) {\n    if (action_1.isLabeledAction(input)) {\n        return input.actions;\n    }\n    else if (action_1.isAction(input)) {\n        return [input];\n    }\n    return [];\n}\nfunction espaceForRegExp(value) {\n    return value.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n}\nvar CommandPaletteKeyListener = /** @class */ (function (_super) {\n    __extends(CommandPaletteKeyListener, _super);\n    function CommandPaletteKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CommandPaletteKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            return [new ui_extension_registry_1.SetUIExtensionVisibilityAction(CommandPalette.ID, false, [])];\n        }\n        else if (CommandPalette.isInvokePaletteKey(event)) {\n            var selectedElements = iterable_1.toArray(element.index.all().filter(function (e) { return model_2.isSelectable(e) && e.selected; }).map(function (e) { return e.id; }));\n            return [new ui_extension_registry_1.SetUIExtensionVisibilityAction(CommandPalette.ID, true, selectedElements)];\n        }\n        return [];\n    };\n    return CommandPaletteKeyListener;\n}(key_tool_1.KeyListener));\nexports.CommandPaletteKeyListener = CommandPaletteKeyListener;\n//# sourceMappingURL=command-palette.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar action_providers_1 = require(\"./action-providers\");\nvar command_palette_1 = require(\"./command-palette\");\nvar commandPaletteModule = new inversify_1.ContainerModule(function (bind) {\n    bind(command_palette_1.CommandPalette).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IUIExtension).toService(command_palette_1.CommandPalette);\n    bind(types_1.TYPES.KeyListener).to(command_palette_1.CommandPaletteKeyListener);\n    bind(action_providers_1.CommandPaletteActionProviderRegistry).toSelf().inSingletonScope();\n    bind(types_1.TYPES.ICommandPaletteActionProviderRegistry).toService(action_providers_1.CommandPaletteActionProviderRegistry);\n});\nexports.default = commandPaletteModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction toAnchor(anchor) {\n    return anchor instanceof HTMLElement ? { x: anchor.offsetLeft, y: anchor.offsetTop } : anchor;\n}\nexports.toAnchor = toAnchor;\n//# sourceMappingURL=context-menu-service.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar menu_providers_1 = require(\"./menu-providers\");\nvar mouse_listener_1 = require(\"./mouse-listener\");\nvar types_1 = require(\"../../base/types\");\nvar contextMenuModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IContextMenuServiceProvider).toProvider(function (ctx) {\n        return function () {\n            return new Promise(function (resolve, reject) {\n                if (ctx.container.isBound(types_1.TYPES.IContextMenuService)) {\n                    resolve(ctx.container.get(types_1.TYPES.IContextMenuService));\n                }\n                else {\n                    reject();\n                }\n            });\n        };\n    });\n    bind(types_1.TYPES.MouseListener).to(mouse_listener_1.ContextMenuMouseListener);\n    bind(types_1.TYPES.IContextMenuProviderRegistry).to(menu_providers_1.ContextMenuProviderRegistry);\n});\nexports.default = contextMenuModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar delete_1 = require(\"../edit/delete\");\nvar model_1 = require(\"../select/model\");\nvar ContextMenuProviderRegistry = /** @class */ (function () {\n    function ContextMenuProviderRegistry(menuProviders) {\n        if (menuProviders === void 0) { menuProviders = []; }\n        this.menuProviders = menuProviders;\n    }\n    ContextMenuProviderRegistry.prototype.getItems = function (root, lastMousePosition) {\n        var menues = this.menuProviders.map(function (provider) { return provider.getItems(root, lastMousePosition); });\n        return Promise.all(menues).then(this.flattenAndRestructure);\n    };\n    ContextMenuProviderRegistry.prototype.flattenAndRestructure = function (p) {\n        var menuItems = p.reduce(function (acc, promise) { return promise !== undefined ? acc.concat(promise) : acc; }, []);\n        var menuItemsWithParentId = menuItems.filter(function (menuItem) { return menuItem.parentId; });\n        var _loop_1 = function (menuItem) {\n            if (menuItem.parentId) {\n                var fragments = menuItem.parentId.split(\".\");\n                var matchingParent = undefined;\n                var nextParents = menuItems;\n                var _loop_2 = function (fragment) {\n                    matchingParent = nextParents.find(function (item) { return fragment === item.id; });\n                    if (matchingParent && matchingParent.children)\n                        nextParents = matchingParent.children;\n                };\n                for (var _i = 0, fragments_1 = fragments; _i < fragments_1.length; _i++) {\n                    var fragment = fragments_1[_i];\n                    _loop_2(fragment);\n                }\n                if (matchingParent) {\n                    if (matchingParent.children) {\n                        matchingParent.children.push(menuItem);\n                    }\n                    else {\n                        matchingParent.children = [menuItem];\n                    }\n                    menuItems = menuItems.filter(function (item) { return item !== menuItem; });\n                }\n            }\n        };\n        for (var _i = 0, menuItemsWithParentId_1 = menuItemsWithParentId; _i < menuItemsWithParentId_1.length; _i++) {\n            var menuItem = menuItemsWithParentId_1[_i];\n            _loop_1(menuItem);\n        }\n        return menuItems;\n    };\n    ContextMenuProviderRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IContextMenuItemProvider)), __param(0, inversify_1.optional()),\n        __metadata(\"design:paramtypes\", [Array])\n    ], ContextMenuProviderRegistry);\n    return ContextMenuProviderRegistry;\n}());\nexports.ContextMenuProviderRegistry = ContextMenuProviderRegistry;\nvar DeleteContextMenuItemProvider = /** @class */ (function () {\n    function DeleteContextMenuItemProvider() {\n    }\n    DeleteContextMenuItemProvider.prototype.getItems = function (root, lastMousePosition) {\n        var selectedElements = Array.from(root.index.all().filter(model_1.isSelected).filter(delete_1.isDeletable));\n        return Promise.resolve([\n            {\n                id: \"delete\",\n                label: \"Delete\",\n                sortString: \"d\",\n                group: \"edit\",\n                actions: [new delete_1.DeleteElementAction(selectedElements.map(function (e) { return e.id; }))],\n                isEnabled: function () { return selectedElements.length > 0; }\n            }\n        ]);\n    };\n    DeleteContextMenuItemProvider = __decorate([\n        inversify_1.injectable()\n    ], DeleteContextMenuItemProvider);\n    return DeleteContextMenuItemProvider;\n}());\nexports.DeleteContextMenuItemProvider = DeleteContextMenuItemProvider;\n//# sourceMappingURL=menu-providers.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar menu_providers_1 = require(\"./menu-providers\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar types_1 = require(\"../../base/types\");\nvar model_1 = require(\"../select/model\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar ContextMenuMouseListener = /** @class */ (function (_super) {\n    __extends(ContextMenuMouseListener, _super);\n    function ContextMenuMouseListener(contextMenuService, menuProvider) {\n        var _this = _super.call(this) || this;\n        _this.contextMenuService = contextMenuService;\n        _this.menuProvider = menuProvider;\n        return _this;\n    }\n    ContextMenuMouseListener.prototype.mouseDown = function (target, event) {\n        if (event.button === 2) {\n            this.showContextMenu(target, event);\n        }\n        return [];\n    };\n    ContextMenuMouseListener.prototype.showContextMenu = function (target, event) {\n        return __awaiter(this, void 0, void 0, function () {\n            var menuService, rejected_1, mousePosition, isTargetSelected, selectableTarget, restoreSelection, menuItems;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        _a.trys.push([0, 2, , 3]);\n                        return [4 /*yield*/, this.contextMenuService()];\n                    case 1:\n                        menuService = _a.sent();\n                        return [3 /*break*/, 3];\n                    case 2:\n                        rejected_1 = _a.sent();\n                        // IContextMenuService is not bound => do nothing\n                        return [2 /*return*/];\n                    case 3:\n                        mousePosition = { x: event.x, y: event.y };\n                        isTargetSelected = false;\n                        selectableTarget = smodel_utils_1.findParentByFeature(target, model_1.isSelectable);\n                        if (selectableTarget) {\n                            isTargetSelected = selectableTarget.selected;\n                            selectableTarget.selected = true;\n                        }\n                        restoreSelection = function () { if (selectableTarget)\n                            selectableTarget.selected = isTargetSelected; };\n                        return [4 /*yield*/, this.menuProvider.getItems(target.root, mousePosition)];\n                    case 4:\n                        menuItems = _a.sent();\n                        menuService.show(menuItems, mousePosition, restoreSelection);\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    ContextMenuMouseListener = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.IContextMenuServiceProvider)),\n        __param(1, inversify_1.inject(types_1.TYPES.IContextMenuProviderRegistry)),\n        __metadata(\"design:paramtypes\", [Function, menu_providers_1.ContextMenuProviderRegistry])\n    ], ContextMenuMouseListener);\n    return ContextMenuMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ContextMenuMouseListener = ContextMenuMouseListener;\n//# sourceMappingURL=mouse-listener.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_2 = require(\"../bounds/model\");\nvar model_3 = require(\"../routing/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar DecorationPlacer = /** @class */ (function () {\n    function DecorationPlacer() {\n    }\n    DecorationPlacer.prototype.decorate = function (vnode, element) {\n        if (model_1.isDecoration(element)) {\n            var position = this.getPosition(element);\n            var translate = 'translate(' + position.x + ', ' + position.y + ')';\n            vnode_utils_1.setAttr(vnode, 'transform', translate);\n        }\n        return vnode;\n    };\n    DecorationPlacer.prototype.getPosition = function (element) {\n        if (element instanceof smodel_1.SChildElement && element.parent instanceof model_3.SRoutableElement) {\n            var route = this.edgeRouterRegistry.route(element.parent);\n            if (route.length > 1) {\n                var index = Math.floor(0.5 * (route.length - 1));\n                var offset = model_2.isSizeable(element)\n                    ? {\n                        x: -0.5 * element.bounds.width,\n                        y: -0.5 * element.bounds.width\n                    }\n                    : geometry_1.ORIGIN_POINT;\n                return {\n                    x: 0.5 * (route[index].x + route[index + 1].x) + offset.x,\n                    y: 0.5 * (route[index].y + route[index + 1].y) + offset.y\n                };\n            }\n        }\n        if (model_2.isSizeable(element))\n            return {\n                x: -0.666 * element.bounds.width,\n                y: -0.666 * element.bounds.height\n            };\n        return geometry_1.ORIGIN_POINT;\n    };\n    DecorationPlacer.prototype.postUpdate = function () {\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], DecorationPlacer.prototype, \"edgeRouterRegistry\", void 0);\n    DecorationPlacer = __decorate([\n        inversify_1.injectable()\n    ], DecorationPlacer);\n    return DecorationPlacer;\n}());\nexports.DecorationPlacer = DecorationPlacer;\n//# sourceMappingURL=decoration-placer.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar view_1 = require(\"../../base/views/view\");\nvar inversify_1 = require(\"inversify\");\nvar model_1 = require(\"./model\");\nvar views_1 = require(\"./views\");\nvar types_1 = require(\"../../base/types\");\nvar decoration_placer_1 = require(\"./decoration-placer\");\nvar decorationModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    view_1.configureModelElement({ bind: bind, isBound: isBound }, 'marker', model_1.SIssueMarker, views_1.IssueMarkerView);\n    bind(decoration_placer_1.DecorationPlacer).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(decoration_placer_1.DecorationPlacer);\n});\nexports.default = decorationModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../hover/model\");\nvar model_2 = require(\"../bounds/model\");\nexports.decorationFeature = Symbol('decorationFeature');\nfunction isDecoration(e) {\n    return e.hasFeature(exports.decorationFeature);\n}\nexports.isDecoration = isDecoration;\nvar SDecoration = /** @class */ (function (_super) {\n    __extends(SDecoration, _super);\n    function SDecoration() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SDecoration.DEFAULT_FEATURES = [exports.decorationFeature, model_2.boundsFeature, model_1.hoverFeedbackFeature, model_1.popupFeature];\n    return SDecoration;\n}(model_2.SShapeElement));\nexports.SDecoration = SDecoration;\nvar SIssueMarker = /** @class */ (function (_super) {\n    __extends(SIssueMarker, _super);\n    function SIssueMarker() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return SIssueMarker;\n}(SDecoration));\nexports.SIssueMarker = SIssueMarker;\nvar SIssue = /** @class */ (function () {\n    function SIssue() {\n    }\n    return SIssue;\n}());\nexports.SIssue = SIssue;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"../../lib/jsx\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar inversify_1 = require(\"inversify\");\nvar IssueMarkerView = /** @class */ (function () {\n    function IssueMarkerView() {\n    }\n    IssueMarkerView.prototype.render = function (marker, context) {\n        var scale = 16 / 1792;\n        var trafo = \"scale(\" + scale + \", \" + scale + \")\";\n        var maxSeverity = this.getMaxSeverity(marker);\n        var group = jsx_1.svg(\"g\", { \"class-sprotty-issue\": true },\n            jsx_1.svg(\"g\", { transform: trafo },\n                jsx_1.svg(\"path\", { d: this.getPath(maxSeverity) })));\n        vnode_utils_1.setClass(group, 'sprotty-' + maxSeverity, true);\n        return group;\n    };\n    IssueMarkerView.prototype.getMaxSeverity = function (marker) {\n        var currentSeverity = 'info';\n        for (var _i = 0, _a = marker.issues.map(function (s) { return s.severity; }); _i < _a.length; _i++) {\n            var severity = _a[_i];\n            if (severity === 'error' || (severity === 'warning' && currentSeverity === 'info'))\n                currentSeverity = severity;\n        }\n        return currentSeverity;\n    };\n    IssueMarkerView.prototype.getPath = function (severity) {\n        switch (severity) {\n            case 'error':\n            case 'warning':\n                // eslint-disable-next-line max-len\n                return \"M768 128q209 0 385.5 103t279.5 279.5 103 385.5-103 385.5-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103zm128 1247v-190q0-14-9-23.5t-22-9.5h-192q-13 0-23 10t-10 23v190q0 13 10 23t23 10h192q13 0 22-9.5t9-23.5zm-2-344l18-621q0-12-10-18-10-8-24-8h-220q-14 0-24 8-10 6-10 18l17 621q0 10 10 17.5t24 7.5h185q14 0 23.5-7.5t10.5-17.5z\";\n            case 'info':\n                // eslint-disable-next-line max-len\n                return \"M1024 1376v-160q0-14-9-23t-23-9h-96v-512q0-14-9-23t-23-9h-320q-14 0-23 9t-9 23v160q0 14 9 23t23 9h96v320h-96q-14 0-23 9t-9 23v160q0 14 9 23t23 9h448q14 0 23-9t9-23zm-128-896v-160q0-14-9-23t-23-9h-192q-14 0-23 9t-9 23v160q0 14 9 23t23 9h192q14 0 23-9t9-23zm640 416q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z\";\n        }\n    };\n    IssueMarkerView = __decorate([\n        inversify_1.injectable()\n    ], IssueMarkerView);\n    return IssueMarkerView;\n}());\nexports.IssueMarkerView = IssueMarkerView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar intersection_finder_1 = require(\"../edge-intersection/intersection-finder\");\nvar edgeIntersectionModule = new inversify_1.ContainerModule(function (bind) {\n    bind(intersection_finder_1.IntersectionFinder).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IEdgeRoutePostprocessor).toService(intersection_finder_1.IntersectionFinder);\n});\nexports.default = edgeIntersectionModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2021 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar tinyqueue_1 = __importDefault(require(\"tinyqueue\"));\nvar sweepline_1 = require(\"./sweepline\");\nfunction isIntersectingRoutedPoint(routedPoint) {\n    return routedPoint !== undefined && 'intersections' in routedPoint && 'kind' in routedPoint;\n}\nexports.isIntersectingRoutedPoint = isIntersectingRoutedPoint;\nexports.BY_X_THEN_Y = function (a, b) {\n    if (a.intersectionPoint.x === b.intersectionPoint.x) {\n        return a.intersectionPoint.y - b.intersectionPoint.y;\n    }\n    return a.intersectionPoint.x - b.intersectionPoint.x;\n};\n/**\n * Finds intersections among edges and updates routed points to reflect those intersections.\n */\nvar IntersectionFinder = /** @class */ (function () {\n    function IntersectionFinder() {\n    }\n    /**\n     * Finds all intersections in the specified `routing` and replaces the `RoutedPoints` that are\n     * intersecting by adding intersection information to routing points (@see `IntersectingRoutedPoints`).\n     * @param routing the edge routing to find intersections for and update.\n     */\n    IntersectionFinder.prototype.apply = function (routing) {\n        var intersections = this.find(routing);\n        this.addToRouting(intersections, routing);\n    };\n    /**\n     * Finds the intersections in the specified `routing` and returns them.\n     * @param routing the edge routing to find intersections for and update.\n     * @returns the identified intersections.\n     */\n    IntersectionFinder.prototype.find = function (routing) {\n        var eventQueue = new tinyqueue_1.default(undefined, sweepline_1.checkWhichEventIsLeft);\n        routing.routes.forEach(function (route, routeId) { return sweepline_1.addRoute(routeId, route, eventQueue); });\n        return sweepline_1.runSweep(eventQueue);\n    };\n    IntersectionFinder.prototype.addToRouting = function (intersections, routing) {\n        for (var _i = 0, intersections_1 = intersections; _i < intersections_1.length; _i++) {\n            var intersection = intersections_1[_i];\n            var routable1 = routing.get(intersection.routable1);\n            var routable2 = routing.get(intersection.routable2);\n            this.addIntersectionToRoutedPoint(intersection, routable1, intersection.segmentIndex1);\n            this.addIntersectionToRoutedPoint(intersection, routable2, intersection.segmentIndex2);\n        }\n    };\n    IntersectionFinder.prototype.addIntersectionToRoutedPoint = function (intersection, routedPoint, segmentIndex) {\n        if (routedPoint && routedPoint.length > segmentIndex) {\n            var segment = routedPoint[segmentIndex + 1];\n            if (isIntersectingRoutedPoint(segment)) {\n                segment.intersections.push(intersection);\n            }\n            else {\n                var intersectingRoutedPoint = __assign(__assign({}, segment), { intersections: [intersection] });\n                routedPoint[segmentIndex + 1] = intersectingRoutedPoint;\n            }\n        }\n    };\n    IntersectionFinder = __decorate([\n        inversify_1.injectable()\n    ], IntersectionFinder);\n    return IntersectionFinder;\n}());\nexports.IntersectionFinder = IntersectionFinder;\n//# sourceMappingURL=intersection-finder.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019 Rowan Winsemius and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n// Based on the sweepline implementation at https://github.com/rowanwins/sweepline-intersections\n// which is published under the terms of MIT, but has been adapted to the use case of sprotty.\nvar tinyqueue_1 = __importDefault(require(\"tinyqueue\"));\nvar geometry_1 = require(\"../../utils/geometry\");\n/*\n * The algorithm implemented in this module is loosely based on the Bentley-Ottmann algorithm for\n * finding intersection among line segments in `O((n+k) log n)`, whereas `n` is the number of line\n * segments and `k` is the number of intersections.\n * The underlying idea is to use a imaginary sweep line that moves over the x/y plane and testing\n * only the line segments for intersection that the sweepline currently crosses, instead of\n * testing all segment with each other, which would be `O(n^2)`.\n * It does so by generating a prioritized event queue for start and end events of the line segments\n * and working its way through the queue (i.e., sweeping).\n * More information can be found at https://en.wikipedia.org/wiki/Bentley%E2%80%93Ottmann_algorithm\n * In contrast to the original Bently-Ottmann algorithm, the implementation below does not use a tree\n * data structure to store the segments in order to simplify the implementation.\n * See also https://github.com/rowanwins/sweepline-intersections#algorithm-notes\n */\n/**\n * Add the specified `route` to the event `queue` from left to right.\n * @param routeId id of the route.\n * @param route the route as array of points.\n * @param queue the queue to add the route to.\n */\nfunction addRoute(routeId, route, queue) {\n    if (route.length < 1)\n        return;\n    var currentPoint = route[0];\n    var nextPoint = undefined;\n    for (var i = 0; i < route.length - 1; i++) {\n        nextPoint = route[i + 1];\n        var e1 = new SweepEvent(routeId, currentPoint, i);\n        var e2 = new SweepEvent(routeId, nextPoint, i + 1);\n        e1.otherEvent = e2;\n        e2.otherEvent = e1;\n        if (checkWhichEventIsLeft(e1, e2) > 0) {\n            e2.isLeftEndpoint = true;\n            e1.isLeftEndpoint = false;\n        }\n        else {\n            e1.isLeftEndpoint = true;\n            e2.isLeftEndpoint = false;\n        }\n        queue.push(e1);\n        queue.push(e2);\n        currentPoint = nextPoint;\n    }\n}\nexports.addRoute = addRoute;\n/**\n * Returns which of the two events is left.\n * This is used to classify the endpoints of a segment when generating the\n * event queue.\n */\nfunction checkWhichEventIsLeft(e1, e2) {\n    if (e1.point.x > e2.point.x)\n        return 1;\n    if (e1.point.x < e2.point.x)\n        return -1;\n    if (e1.point.y !== e2.point.y)\n        return e1.point.y > e2.point.y ? 1 : -1;\n    return 1;\n}\nexports.checkWhichEventIsLeft = checkWhichEventIsLeft;\n/**\n * An event -- or with other words a start or end point of a segment -- in the context\n * of the event queue for the sweep.\n *\n * Stores the original Sprotty `edgeId` and the segment index of this segment in the edge\n * to keep track of which edge and segment this event originated from.\n */\nvar SweepEvent = /** @class */ (function () {\n    function SweepEvent(edgeId, point, segmentIndex) {\n        this.edgeId = edgeId;\n        this.point = point;\n        this.segmentIndex = segmentIndex;\n    }\n    return SweepEvent;\n}());\nexports.SweepEvent = SweepEvent;\n/**\n * A line segment consists of a start and a stop event.\n */\nvar Segment = /** @class */ (function () {\n    function Segment(event) {\n        this.leftSweepEvent = event;\n        this.rightSweepEvent = event.otherEvent;\n    }\n    return Segment;\n}());\nexports.Segment = Segment;\n/**\n * Performs the main sweep algorithm on the specified event queue.\n *\n * An empty priority queue is created to store segments encountered.\n * An item is removed from the priority queue if the vertex is the left endpoint\n * of a segment, we test it against every other segment in the segment queue for\n * intersections with any intersection recorded. We then add the vertex (and it's\n * associated right endpoint) to the segment queue.\n * If we encounter a right endpoint we remove the first item from the segment queue.\n *\n * Each pair of segments are only tested once. And only segments that overlap on the\n * x plane are tested against each other.\n *\n * @param eventQueue the event queue.\n * @returns the identified intersections.\n */\nfunction runSweep(eventQueue) {\n    var intersectionPoints = [];\n    var outQueue = new tinyqueue_1.default([], checkWhichSegmentHasRightEndpointFirst);\n    while (eventQueue.length) {\n        var event_1 = eventQueue.pop();\n        if (event_1 === null || event_1 === void 0 ? void 0 : event_1.isLeftEndpoint) {\n            var segment = new Segment(event_1);\n            for (var i = 0; i < outQueue.data.length; i++) {\n                var otherSegment = outQueue.data[i];\n                var intersection = intersectionOfSegments(segment, otherSegment);\n                if (intersection) {\n                    intersectionPoints.push({\n                        routable1: event_1.edgeId,\n                        routable2: otherSegment.leftSweepEvent.edgeId,\n                        segmentIndex1: getSegmentIndex(segment),\n                        segmentIndex2: getSegmentIndex(otherSegment),\n                        intersectionPoint: intersection\n                    });\n                }\n            }\n            outQueue.push(segment);\n        }\n        else if ((event_1 === null || event_1 === void 0 ? void 0 : event_1.isLeftEndpoint) === false) {\n            outQueue.pop();\n        }\n    }\n    return intersectionPoints;\n}\nexports.runSweep = runSweep;\n/**\n * Specifies which of the two specified segments has a right endpoint first.\n * Used as a comparator to sort the event queue.\n */\nfunction checkWhichSegmentHasRightEndpointFirst(seg1, seg2) {\n    if (seg1.rightSweepEvent.point.x > seg2.rightSweepEvent.point.x)\n        return 1;\n    if (seg1.rightSweepEvent.point.x < seg2.rightSweepEvent.point.x)\n        return -1;\n    if (seg1.rightSweepEvent.point.y !== seg2.rightSweepEvent.point.y)\n        return seg1.rightSweepEvent.point.y < seg2.rightSweepEvent.point.y ? 1 : -1;\n    return 1;\n}\nexports.checkWhichSegmentHasRightEndpointFirst = checkWhichSegmentHasRightEndpointFirst;\nfunction getSegmentIndex(segment) {\n    return Math.min(segment.leftSweepEvent.segmentIndex, segment.rightSweepEvent.segmentIndex);\n}\nexports.getSegmentIndex = getSegmentIndex;\n/**\n * Tests whether two segments intersect and returns the intersection point if existing.\n */\nfunction intersectionOfSegments(seg1, seg2) {\n    if (seg1.leftSweepEvent.edgeId === seg2.leftSweepEvent.edgeId) {\n        return undefined;\n    }\n    var seg1Line = new geometry_1.PointToPointLine(seg1.leftSweepEvent.point, seg1.rightSweepEvent.point);\n    var seg2Line = new geometry_1.PointToPointLine(seg2.leftSweepEvent.point, seg2.rightSweepEvent.point);\n    return seg1Line.intersection(seg2Line);\n}\nexports.intersectionOfSegments = intersectionOfSegments;\n//# sourceMappingURL=sweepline.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar edge_layout_1 = require(\"./edge-layout\");\nvar edgeLayoutModule = new inversify_1.ContainerModule(function (bind) {\n    bind(edge_layout_1.EdgeLayoutPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(edge_layout_1.EdgeLayoutPostprocessor);\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(edge_layout_1.EdgeLayoutPostprocessor);\n});\nexports.default = edgeLayoutModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar sgraph_1 = require(\"../../graph/sgraph\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"./model\");\nvar routing_1 = require(\"../routing/routing\");\nvar EdgeLayoutPostprocessor = /** @class */ (function () {\n    function EdgeLayoutPostprocessor() {\n    }\n    EdgeLayoutPostprocessor.prototype.decorate = function (vnode, element) {\n        if (model_2.isEdgeLayoutable(element) && element.parent instanceof sgraph_1.SEdge) {\n            if (element.bounds !== geometry_1.EMPTY_BOUNDS) {\n                var placement = this.getEdgePlacement(element);\n                var edge = element.parent;\n                var position = Math.min(1, Math.max(0, placement.position));\n                var router = this.edgeRouterRegistry.get(edge.routerKind);\n                var pointOnEdge = router.pointAt(edge, position);\n                var derivativeOnEdge = router.derivativeAt(edge, position);\n                var transform = '';\n                if (pointOnEdge && derivativeOnEdge) {\n                    transform += \"translate(\" + pointOnEdge.x + \", \" + pointOnEdge.y + \")\";\n                    var angle = geometry_1.toDegrees(Math.atan2(derivativeOnEdge.y, derivativeOnEdge.x));\n                    if (placement.rotate) {\n                        var flippedAngle = angle;\n                        if (Math.abs(angle) > 90) {\n                            if (angle < 0)\n                                flippedAngle += 180;\n                            else if (angle > 0)\n                                flippedAngle -= 180;\n                        }\n                        transform += \" rotate(\" + flippedAngle + \")\";\n                        var alignment = this.getRotatedAlignment(element, placement, flippedAngle !== angle);\n                        transform += \" translate(\" + alignment.x + \", \" + alignment.y + \")\";\n                    }\n                    else {\n                        var alignment = this.getAlignment(element, placement, angle);\n                        transform += \" translate(\" + alignment.x + \", \" + alignment.y + \")\";\n                    }\n                    vnode_utils_1.setAttr(vnode, 'transform', transform);\n                }\n            }\n        }\n        return vnode;\n    };\n    EdgeLayoutPostprocessor.prototype.getRotatedAlignment = function (element, placement, flip) {\n        var x = model_1.isAlignable(element) ? element.alignment.x : 0;\n        var y = model_1.isAlignable(element) ? element.alignment.y : 0;\n        var bounds = element.bounds;\n        if (placement.side === 'on')\n            return { x: x - 0.5 * bounds.height, y: y - 0.5 * bounds.height };\n        if (flip) {\n            if (placement.position < 0.3333333)\n                x -= bounds.width + placement.offset;\n            else if (placement.position < 0.6666666)\n                x -= 0.5 * bounds.width;\n            else\n                x += placement.offset;\n            switch (placement.side) {\n                case 'left':\n                case 'bottom':\n                    y -= placement.offset + bounds.height;\n                    break;\n                case 'right':\n                case 'top':\n                    y += placement.offset;\n            }\n        }\n        else {\n            if (placement.position < 0.3333333)\n                x += placement.offset;\n            else if (placement.position < 0.6666666)\n                x -= 0.5 * bounds.width;\n            else\n                x -= bounds.width + placement.offset;\n            switch (placement.side) {\n                case 'right':\n                case 'bottom':\n                    y += -placement.offset - bounds.height;\n                    break;\n                case 'left':\n                case 'top':\n                    y += placement.offset;\n            }\n        }\n        return { x: x, y: y };\n    };\n    EdgeLayoutPostprocessor.prototype.getEdgePlacement = function (element) {\n        var current = element;\n        var allPlacements = [];\n        while (current !== undefined) {\n            var placement = current.edgePlacement;\n            if (placement !== undefined)\n                allPlacements.push(placement);\n            if (current instanceof smodel_1.SChildElement)\n                current = current.parent;\n            else\n                break;\n        }\n        return allPlacements.reverse().reduce(function (a, b) { return __assign(__assign({}, a), b); }, model_2.DEFAULT_EDGE_PLACEMENT);\n    };\n    EdgeLayoutPostprocessor.prototype.getAlignment = function (label, placement, angle) {\n        var bounds = label.bounds;\n        var x = model_1.isAlignable(label) ? label.alignment.x - bounds.width : 0;\n        var y = model_1.isAlignable(label) ? label.alignment.y - bounds.height : 0;\n        if (placement.side === 'on')\n            return { x: x + 0.5 * bounds.height, y: y + 0.5 * bounds.height };\n        var quadrant = this.getQuadrant(angle);\n        var midLeft = { x: placement.offset, y: y + 0.5 * bounds.height };\n        var topLeft = { x: placement.offset, y: y + bounds.height + placement.offset };\n        var topRight = { x: -bounds.width - placement.offset, y: y + bounds.height + placement.offset };\n        var midRight = { x: -bounds.width - placement.offset, y: y + 0.5 * bounds.height };\n        var bottomRight = { x: -bounds.width - placement.offset, y: y - placement.offset };\n        var bottomLeft = { x: placement.offset, y: y - placement.offset };\n        switch (placement.side) {\n            case 'left':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return geometry_1.linear(topLeft, topRight, quadrant.position);\n                    case 'north':\n                        return geometry_1.linear(topRight, bottomRight, quadrant.position);\n                    case 'east':\n                        return geometry_1.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'south':\n                        return geometry_1.linear(bottomLeft, topLeft, quadrant.position);\n                }\n                break;\n            case 'right':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return geometry_1.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'north':\n                        return geometry_1.linear(bottomLeft, topLeft, quadrant.position);\n                    case 'east':\n                        return geometry_1.linear(topLeft, topRight, quadrant.position);\n                    case 'south':\n                        return geometry_1.linear(topRight, bottomRight, quadrant.position);\n                }\n                break;\n            case 'top':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return geometry_1.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'north':\n                        return this.linearFlip(bottomLeft, midLeft, midRight, bottomRight, quadrant.position);\n                    case 'east':\n                        return geometry_1.linear(bottomRight, bottomLeft, quadrant.position);\n                    case 'south':\n                        return this.linearFlip(bottomLeft, midLeft, midRight, bottomRight, quadrant.position);\n                }\n                break;\n            case 'bottom':\n                switch (quadrant.orientation) {\n                    case 'west':\n                        return geometry_1.linear(topLeft, topRight, quadrant.position);\n                    case 'north':\n                        return this.linearFlip(topRight, midRight, midLeft, topLeft, quadrant.position);\n                    case 'east':\n                        return geometry_1.linear(topLeft, topRight, quadrant.position);\n                    case 'south':\n                        return this.linearFlip(topRight, midRight, midLeft, topLeft, quadrant.position);\n                }\n                break;\n        }\n        return { x: 0, y: 0 };\n    };\n    EdgeLayoutPostprocessor.prototype.getQuadrant = function (angle) {\n        if (Math.abs(angle) > 135)\n            return { orientation: 'west', position: (angle > 0 ? angle - 135 : angle + 225) / 90 };\n        else if (angle < -45)\n            return { orientation: 'north', position: (angle + 135) / 90 };\n        else if (angle < 45)\n            return { orientation: 'east', position: (angle + 45) / 90 };\n        else\n            return { orientation: 'south', position: (angle - 45) / 90 };\n    };\n    EdgeLayoutPostprocessor.prototype.linearFlip = function (p0, p1, p2, p3, position) {\n        return position < 0.5 ? geometry_1.linear(p0, p1, 2 * position) : geometry_1.linear(p2, p3, 2 * position - 1);\n    };\n    EdgeLayoutPostprocessor.prototype.postUpdate = function () { };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], EdgeLayoutPostprocessor.prototype, \"edgeRouterRegistry\", void 0);\n    EdgeLayoutPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], EdgeLayoutPostprocessor);\n    return EdgeLayoutPostprocessor;\n}());\nexports.EdgeLayoutPostprocessor = EdgeLayoutPostprocessor;\n//# sourceMappingURL=edge-layout.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../routing/model\");\nexports.edgeLayoutFeature = Symbol('edgeLayout');\nfunction isEdgeLayoutable(element) {\n    return element instanceof smodel_1.SChildElement\n        && element.parent instanceof model_2.SRoutableElement\n        && checkEdgeLayoutable(element)\n        && model_1.isBoundsAware(element)\n        && element.hasFeature(exports.edgeLayoutFeature);\n}\nexports.isEdgeLayoutable = isEdgeLayoutable;\nfunction checkEdgeLayoutable(element) {\n    return 'edgePlacement' in element;\n}\nvar EdgePlacement = /** @class */ (function (_super) {\n    __extends(EdgePlacement, _super);\n    function EdgePlacement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return EdgePlacement;\n}(Object));\nexports.EdgePlacement = EdgePlacement;\nexports.DEFAULT_EDGE_PLACEMENT = {\n    rotate: true,\n    side: 'top',\n    position: 0.5,\n    offset: 7\n};\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.creatingOnDragFeature = Symbol('creatingOnDragFeature');\nfunction isCreatingOnDrag(element) {\n    return element.hasFeature(exports.creatingOnDragFeature) && element.createAction !== undefined;\n}\nexports.isCreatingOnDrag = isCreatingOnDrag;\n//# sourceMappingURL=create-on-drag.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar CreateElementAction = /** @class */ (function () {\n    function CreateElementAction(containerId, elementSchema) {\n        this.containerId = containerId;\n        this.elementSchema = elementSchema;\n        this.kind = CreateElementAction.KIND;\n    }\n    CreateElementAction.KIND = \"createElement\";\n    return CreateElementAction;\n}());\nexports.CreateElementAction = CreateElementAction;\nvar CreateElementCommand = /** @class */ (function (_super) {\n    __extends(CreateElementCommand, _super);\n    function CreateElementCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    CreateElementCommand.prototype.execute = function (context) {\n        var container = context.root.index.getById(this.action.containerId);\n        if (container instanceof smodel_1.SParentElement) {\n            this.container = container;\n            this.newElement = context.modelFactory.createElement(this.action.elementSchema);\n            this.container.add(this.newElement);\n        }\n        return context.root;\n    };\n    CreateElementCommand.prototype.undo = function (context) {\n        this.container.remove(this.newElement);\n        return context.root;\n    };\n    CreateElementCommand.prototype.redo = function (context) {\n        this.container.add(this.newElement);\n        return context.root;\n    };\n    CreateElementCommand.KIND = CreateElementAction.KIND;\n    CreateElementCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [CreateElementAction])\n    ], CreateElementCommand);\n    return CreateElementCommand;\n}(command_1.Command));\nexports.CreateElementCommand = CreateElementCommand;\n//# sourceMappingURL=create.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar types_1 = require(\"../../base/types\");\nvar inversify_1 = require(\"inversify\");\nexports.deletableFeature = Symbol('deletableFeature');\nfunction isDeletable(element) {\n    return element instanceof smodel_1.SChildElement && element.hasFeature(exports.deletableFeature);\n}\nexports.isDeletable = isDeletable;\nvar DeleteElementAction = /** @class */ (function () {\n    function DeleteElementAction(elementIds) {\n        this.elementIds = elementIds;\n        this.kind = DeleteElementAction.KIND;\n    }\n    DeleteElementAction.KIND = 'delete';\n    return DeleteElementAction;\n}());\nexports.DeleteElementAction = DeleteElementAction;\nvar ResolvedDelete = /** @class */ (function () {\n    function ResolvedDelete() {\n    }\n    return ResolvedDelete;\n}());\nexports.ResolvedDelete = ResolvedDelete;\nvar DeleteElementCommand = /** @class */ (function (_super) {\n    __extends(DeleteElementCommand, _super);\n    function DeleteElementCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.resolvedDeletes = [];\n        return _this;\n    }\n    DeleteElementCommand.prototype.execute = function (context) {\n        var index = context.root.index;\n        for (var _i = 0, _a = this.action.elementIds; _i < _a.length; _i++) {\n            var id = _a[_i];\n            var element = index.getById(id);\n            if (element && isDeletable(element)) {\n                this.resolvedDeletes.push({ child: element, parent: element.parent });\n                element.parent.remove(element);\n            }\n        }\n        return context.root;\n    };\n    DeleteElementCommand.prototype.undo = function (context) {\n        for (var _i = 0, _a = this.resolvedDeletes; _i < _a.length; _i++) {\n            var resolvedDelete = _a[_i];\n            resolvedDelete.parent.add(resolvedDelete.child);\n        }\n        return context.root;\n    };\n    DeleteElementCommand.prototype.redo = function (context) {\n        for (var _i = 0, _a = this.resolvedDeletes; _i < _a.length; _i++) {\n            var resolvedDelete = _a[_i];\n            resolvedDelete.parent.remove(resolvedDelete.child);\n        }\n        return context.root;\n    };\n    DeleteElementCommand.KIND = DeleteElementAction.KIND;\n    DeleteElementCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [DeleteElementAction])\n    ], DeleteElementCommand);\n    return DeleteElementCommand;\n}(command_1.Command));\nexports.DeleteElementCommand = DeleteElementCommand;\n//# sourceMappingURL=delete.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar action_handler_1 = require(\"../../base/actions/action-handler\");\nvar view_1 = require(\"../../base/views/view\");\nvar model_1 = require(\"../../features/routing/model\");\nvar svg_views_1 = require(\"../../lib/svg-views\");\nvar delete_1 = require(\"./delete\");\nvar edit_label_1 = require(\"./edit-label\");\nvar edit_label_ui_1 = require(\"./edit-label-ui\");\nvar edit_routing_1 = require(\"./edit-routing\");\nvar reconnect_1 = require(\"./reconnect\");\nexports.edgeEditModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    var context = { bind: bind, isBound: isBound };\n    command_registration_1.configureCommand(context, edit_routing_1.SwitchEditModeCommand);\n    command_registration_1.configureCommand(context, reconnect_1.ReconnectCommand);\n    command_registration_1.configureCommand(context, delete_1.DeleteElementCommand);\n    view_1.configureModelElement(context, 'dangling-anchor', model_1.SDanglingAnchor, svg_views_1.EmptyGroupView);\n});\nexports.labelEditModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.MouseListener).to(edit_label_1.EditLabelMouseListener);\n    bind(types_1.TYPES.KeyListener).to(edit_label_1.EditLabelKeyListener);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, edit_label_1.ApplyLabelEditCommand);\n});\nexports.labelEditUiModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    var context = { bind: bind, isBound: isBound };\n    action_handler_1.configureActionHandler(context, edit_label_1.EditLabelAction.KIND, edit_label_ui_1.EditLabelActionHandler);\n    bind(edit_label_ui_1.EditLabelUI).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IUIExtension).toService(edit_label_ui_1.EditLabelUI);\n});\n//# sourceMappingURL=di.config.js.map","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/********************************************************************************\n * Copyright (c) 2019-2020 EclipseSource and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar ui_extension_1 = require(\"../../base/ui-extensions/ui-extension\");\nvar ui_extension_registry_1 = require(\"../../base/ui-extensions/ui-extension-registry\");\nvar dom_helper_1 = require(\"../../base/views/dom-helper\");\nvar commit_model_1 = require(\"../../model-source/commit-model\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_1 = require(\"../bounds/model\");\nvar zoom_1 = require(\"../viewport/zoom\");\nvar edit_label_1 = require(\"./edit-label\");\nvar model_2 = require(\"./model\");\n/** Shows a UI extension for editing a label on emitted `EditLabelAction`s. */\nvar EditLabelActionHandler = /** @class */ (function () {\n    function EditLabelActionHandler() {\n    }\n    EditLabelActionHandler.prototype.handle = function (action) {\n        if (edit_label_1.isEditLabelAction(action)) {\n            return new ui_extension_registry_1.SetUIExtensionVisibilityAction(EditLabelUI.ID, true, [action.labelId]);\n        }\n    };\n    EditLabelActionHandler = __decorate([\n        inversify_1.injectable()\n    ], EditLabelActionHandler);\n    return EditLabelActionHandler;\n}());\nexports.EditLabelActionHandler = EditLabelActionHandler;\nvar EditLabelUI = /** @class */ (function (_super) {\n    __extends(EditLabelUI, _super);\n    function EditLabelUI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.validationTimeout = undefined;\n        _this.isActive = false;\n        _this.blockApplyEditOnInvalidInput = true;\n        _this.isCurrentLabelValid = true;\n        return _this;\n    }\n    EditLabelUI_1 = EditLabelUI;\n    EditLabelUI.prototype.id = function () { return EditLabelUI_1.ID; };\n    EditLabelUI.prototype.containerClass = function () { return \"label-edit\"; };\n    Object.defineProperty(EditLabelUI.prototype, \"labelId\", {\n        get: function () { return this.label ? this.label.id : 'unknown'; },\n        enumerable: true,\n        configurable: true\n    });\n    EditLabelUI.prototype.initializeContents = function (containerElement) {\n        var _this = this;\n        containerElement.style.position = 'absolute';\n        this.inputElement = document.createElement('input');\n        this.textAreaElement = document.createElement('textarea');\n        [this.inputElement, this.textAreaElement].forEach(function (element) {\n            element.onkeydown = function (event) { return _this.applyLabelEditOnEvent(event, 'Enter'); };\n            _this.configureAndAdd(element, containerElement);\n        });\n    };\n    EditLabelUI.prototype.configureAndAdd = function (element, containerElement) {\n        var _this = this;\n        element.style.visibility = 'hidden';\n        element.style.position = 'absolute';\n        element.style.top = '0px';\n        element.style.left = '0px';\n        element.addEventListener('keydown', function (event) { return _this.hideIfEscapeEvent(event); });\n        element.addEventListener('keyup', function (event) { return _this.validateLabelIfContentChange(event, element.value); });\n        element.addEventListener('blur', function () { return window.setTimeout(function () { return _this.applyLabelEdit(); }, 200); });\n        containerElement.appendChild(element);\n    };\n    Object.defineProperty(EditLabelUI.prototype, \"editControl\", {\n        get: function () {\n            if (this.label && this.label.isMultiLine) {\n                return this.textAreaElement;\n            }\n            return this.inputElement;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EditLabelUI.prototype.hideIfEscapeEvent = function (event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            this.hide();\n        }\n    };\n    EditLabelUI.prototype.applyLabelEditOnEvent = function (event, code) {\n        var modifiers = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            modifiers[_i - 2] = arguments[_i];\n        }\n        if (keyboard_1.matchesKeystroke.apply(void 0, __spreadArrays([event, code ? code : 'Enter'], modifiers))) {\n            event.preventDefault();\n            this.applyLabelEdit();\n        }\n    };\n    EditLabelUI.prototype.validateLabelIfContentChange = function (event, value) {\n        if (this.previousLabelContent === undefined || this.previousLabelContent !== value) {\n            this.previousLabelContent = value;\n            this.performLabelValidation(event, this.editControl.value);\n        }\n    };\n    EditLabelUI.prototype.applyLabelEdit = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var result;\n            var _this = this;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.isActive) {\n                            return [2 /*return*/];\n                        }\n                        if (!this.blockApplyEditOnInvalidInput) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.validateLabel(this.editControl.value)];\n                    case 1:\n                        result = _a.sent();\n                        if ('error' === result.severity) {\n                            this.editControl.focus();\n                            return [2 /*return*/];\n                        }\n                        _a.label = 2;\n                    case 2:\n                        this.actionDispatcherProvider()\n                            .then(function (actionDispatcher) { return actionDispatcher.dispatchAll([new edit_label_1.ApplyLabelEditAction(_this.labelId, _this.editControl.value), new commit_model_1.CommitModelAction()]); })\n                            .catch(function (reason) { return _this.logger.error(_this, 'No action dispatcher available to execute apply label edit action', reason); });\n                        this.hide();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    EditLabelUI.prototype.performLabelValidation = function (event, value) {\n        var _this = this;\n        if (this.validationTimeout) {\n            window.clearTimeout(this.validationTimeout);\n        }\n        this.validationTimeout = window.setTimeout(function () { return _this.validateLabel(value); }, 200);\n    };\n    EditLabelUI.prototype.validateLabel = function (value) {\n        return __awaiter(this, void 0, void 0, function () {\n            var result, reason_1;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.labelValidator && this.label)) return [3 /*break*/, 4];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 3, , 4]);\n                        return [4 /*yield*/, this.labelValidator.validate(value, this.label)];\n                    case 2:\n                        result = _a.sent();\n                        this.isCurrentLabelValid = 'error' !== result.severity;\n                        this.showValidationResult(result);\n                        return [2 /*return*/, result];\n                    case 3:\n                        reason_1 = _a.sent();\n                        this.logger.error(this, 'Error validating edited label', reason_1);\n                        return [3 /*break*/, 4];\n                    case 4:\n                        this.isCurrentLabelValid = true;\n                        return [2 /*return*/, { severity: 'ok', message: undefined }];\n                }\n            });\n        });\n    };\n    EditLabelUI.prototype.showValidationResult = function (result) {\n        this.clearValidationResult();\n        if (this.validationDecorator) {\n            this.validationDecorator.decorate(this.editControl, result);\n        }\n    };\n    EditLabelUI.prototype.clearValidationResult = function () {\n        if (this.validationDecorator) {\n            this.validationDecorator.dispose(this.editControl);\n        }\n    };\n    EditLabelUI.prototype.show = function (root) {\n        var contextElementIds = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            contextElementIds[_i - 1] = arguments[_i];\n        }\n        if (!hasEditableLabel(contextElementIds, root) || this.isActive) {\n            return;\n        }\n        _super.prototype.show.apply(this, __spreadArrays([root], contextElementIds));\n        this.isActive = true;\n    };\n    EditLabelUI.prototype.hide = function () {\n        this.editControl.style.visibility = 'hidden';\n        _super.prototype.hide.call(this);\n        this.clearValidationResult();\n        this.isActive = false;\n        this.isCurrentLabelValid = true;\n        this.previousLabelContent = undefined;\n        if (this.labelElement) {\n            this.labelElement.style.visibility = 'visible';\n        }\n    };\n    EditLabelUI.prototype.onBeforeShow = function (containerElement, root) {\n        var contextElementIds = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            contextElementIds[_i - 2] = arguments[_i];\n        }\n        this.label = getEditableLabels(contextElementIds, root)[0];\n        this.previousLabelContent = this.label.text;\n        this.setPosition(containerElement);\n        this.applyTextContents();\n        this.applyFontStyling();\n        this.editControl.style.visibility = 'visible';\n        this.editControl.focus();\n    };\n    EditLabelUI.prototype.setPosition = function (containerElement) {\n        var x = 0;\n        var y = 0;\n        var width = 100;\n        var height = 20;\n        if (this.label) {\n            var zoom = zoom_1.getZoom(this.label);\n            var bounds = model_1.getAbsoluteClientBounds(this.label, this.domHelper, this.viewerOptions);\n            x = bounds.x + (this.label.editControlPositionCorrection ? this.label.editControlPositionCorrection.x : 0) * zoom;\n            y = bounds.y + (this.label.editControlPositionCorrection ? this.label.editControlPositionCorrection.y : 0) * zoom;\n            height = (this.label.editControlDimension ? this.label.editControlDimension.height : height) * zoom;\n            width = (this.label.editControlDimension ? this.label.editControlDimension.width : width) * zoom;\n        }\n        containerElement.style.left = x + \"px\";\n        containerElement.style.top = y + \"px\";\n        containerElement.style.width = width + \"px\";\n        this.editControl.style.width = width + \"px\";\n        containerElement.style.height = height + \"px\";\n        this.editControl.style.height = height + \"px\";\n    };\n    EditLabelUI.prototype.applyTextContents = function () {\n        if (this.label) {\n            this.editControl.value = this.label.text;\n            if (this.editControl instanceof HTMLTextAreaElement) {\n                this.editControl.selectionStart = 0;\n                this.editControl.selectionEnd = 0;\n                this.editControl.scrollTop = 0;\n                this.editControl.scrollLeft = 0;\n            }\n            else {\n                this.editControl.setSelectionRange(0, this.editControl.value.length);\n            }\n        }\n    };\n    EditLabelUI.prototype.applyFontStyling = function () {\n        if (this.label) {\n            this.labelElement = document.getElementById(this.domHelper.createUniqueDOMElementId(this.label));\n            if (this.labelElement) {\n                this.labelElement.style.visibility = 'hidden';\n                var style = window.getComputedStyle(this.labelElement);\n                this.editControl.style.font = style.font;\n                this.editControl.style.fontStyle = style.fontStyle;\n                this.editControl.style.fontFamily = style.fontFamily;\n                this.editControl.style.fontSize = scaledFont(style.fontSize, zoom_1.getZoom(this.label));\n                this.editControl.style.fontWeight = style.fontWeight;\n                this.editControl.style.lineHeight = style.lineHeight;\n            }\n        }\n    };\n    var EditLabelUI_1;\n    EditLabelUI.ID = \"editLabelUi\";\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcherProvider),\n        __metadata(\"design:type\", Function)\n    ], EditLabelUI.prototype, \"actionDispatcherProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], EditLabelUI.prototype, \"viewerOptions\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.DOMHelper),\n        __metadata(\"design:type\", dom_helper_1.DOMHelper)\n    ], EditLabelUI.prototype, \"domHelper\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IEditLabelValidator), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], EditLabelUI.prototype, \"labelValidator\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IEditLabelValidationDecorator), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], EditLabelUI.prototype, \"validationDecorator\", void 0);\n    EditLabelUI = EditLabelUI_1 = __decorate([\n        inversify_1.injectable()\n    ], EditLabelUI);\n    return EditLabelUI;\n}(ui_extension_1.AbstractUIExtension));\nexports.EditLabelUI = EditLabelUI;\nfunction hasEditableLabel(contextElementIds, root) {\n    return getEditableLabels(contextElementIds, root).length === 1;\n}\nfunction getEditableLabels(contextElementIds, root) {\n    return contextElementIds.map(function (id) { return root.index.getById(id); }).filter(model_2.isEditableLabel);\n}\nfunction scaledFont(font, zoom) {\n    return font.replace(/([0-9]+)/, function (match) {\n        return String(Number.parseInt(match, 10) * zoom);\n    });\n}\n//# sourceMappingURL=edit-label-ui.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar types_1 = require(\"../../base/types\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_1 = require(\"../select/model\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar model_2 = require(\"./model\");\nvar EditLabelAction = /** @class */ (function () {\n    function EditLabelAction(labelId) {\n        this.labelId = labelId;\n        this.kind = EditLabelAction.KIND;\n    }\n    EditLabelAction.KIND = 'EditLabel';\n    return EditLabelAction;\n}());\nexports.EditLabelAction = EditLabelAction;\nfunction isEditLabelAction(element) {\n    return action_1.isAction(element) && element.kind === EditLabelAction.KIND && 'labelId' in element;\n}\nexports.isEditLabelAction = isEditLabelAction;\nvar ApplyLabelEditAction = /** @class */ (function () {\n    function ApplyLabelEditAction(labelId, text) {\n        this.labelId = labelId;\n        this.text = text;\n        this.kind = ApplyLabelEditAction.KIND;\n    }\n    ApplyLabelEditAction.KIND = 'applyLabelEdit';\n    return ApplyLabelEditAction;\n}());\nexports.ApplyLabelEditAction = ApplyLabelEditAction;\nvar ResolvedLabelEdit = /** @class */ (function () {\n    function ResolvedLabelEdit() {\n    }\n    return ResolvedLabelEdit;\n}());\nexports.ResolvedLabelEdit = ResolvedLabelEdit;\nvar ApplyLabelEditCommand = /** @class */ (function (_super) {\n    __extends(ApplyLabelEditCommand, _super);\n    function ApplyLabelEditCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    ApplyLabelEditCommand.prototype.execute = function (context) {\n        var index = context.root.index;\n        var label = index.getById(this.action.labelId);\n        if (label && model_2.isEditableLabel(label)) {\n            this.resolvedLabelEdit = { label: label, oldLabel: label.text, newLabel: this.action.text };\n            label.text = this.action.text;\n        }\n        return context.root;\n    };\n    ApplyLabelEditCommand.prototype.undo = function (context) {\n        if (this.resolvedLabelEdit) {\n            this.resolvedLabelEdit.label.text = this.resolvedLabelEdit.oldLabel;\n        }\n        return context.root;\n    };\n    ApplyLabelEditCommand.prototype.redo = function (context) {\n        if (this.resolvedLabelEdit) {\n            this.resolvedLabelEdit.label.text = this.resolvedLabelEdit.newLabel;\n        }\n        return context.root;\n    };\n    ApplyLabelEditCommand.KIND = ApplyLabelEditAction.KIND;\n    ApplyLabelEditCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [ApplyLabelEditAction])\n    ], ApplyLabelEditCommand);\n    return ApplyLabelEditCommand;\n}(command_1.Command));\nexports.ApplyLabelEditCommand = ApplyLabelEditCommand;\nvar EditLabelMouseListener = /** @class */ (function (_super) {\n    __extends(EditLabelMouseListener, _super);\n    function EditLabelMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EditLabelMouseListener.prototype.doubleClick = function (target, event) {\n        var editableLabel = getEditableLabel(target);\n        if (editableLabel) {\n            return [new EditLabelAction(editableLabel.id)];\n        }\n        return [];\n    };\n    return EditLabelMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.EditLabelMouseListener = EditLabelMouseListener;\nvar EditLabelKeyListener = /** @class */ (function (_super) {\n    __extends(EditLabelKeyListener, _super);\n    function EditLabelKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    EditLabelKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'F2')) {\n            var editableLabels = iterable_1.toArray(element.index.all()\n                .filter(function (e) { return model_1.isSelectable(e) && e.selected; })).map(getEditableLabel)\n                .filter(function (e) { return e !== undefined; });\n            if (editableLabels.length === 1) {\n                return [new EditLabelAction(editableLabels[0].id)];\n            }\n        }\n        return [];\n    };\n    return EditLabelKeyListener;\n}(key_tool_1.KeyListener));\nexports.EditLabelKeyListener = EditLabelKeyListener;\nfunction getEditableLabel(element) {\n    if (model_2.isEditableLabel(element)) {\n        return element;\n    }\n    else if (model_2.isWithEditableLabel(element) && element.editableLabel) {\n        return element.editableLabel;\n    }\n    return undefined;\n}\nexports.getEditableLabel = getEditableLabel;\n//# sourceMappingURL=edit-label.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar types_1 = require(\"../../base/types\");\nvar model_1 = require(\"../routing/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar model_2 = require(\"./model\");\nvar SwitchEditModeAction = /** @class */ (function () {\n    function SwitchEditModeAction(elementsToActivate, elementsToDeactivate) {\n        if (elementsToActivate === void 0) { elementsToActivate = []; }\n        if (elementsToDeactivate === void 0) { elementsToDeactivate = []; }\n        this.elementsToActivate = elementsToActivate;\n        this.elementsToDeactivate = elementsToDeactivate;\n        this.kind = SwitchEditModeAction.KIND;\n    }\n    SwitchEditModeAction.KIND = \"switchEditMode\";\n    return SwitchEditModeAction;\n}());\nexports.SwitchEditModeAction = SwitchEditModeAction;\nvar SwitchEditModeCommand = /** @class */ (function (_super) {\n    __extends(SwitchEditModeCommand, _super);\n    function SwitchEditModeCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.elementsToActivate = [];\n        _this.elementsToDeactivate = [];\n        _this.handlesToRemove = [];\n        return _this;\n    }\n    SwitchEditModeCommand.prototype.execute = function (context) {\n        var _this = this;\n        var index = context.root.index;\n        this.action.elementsToActivate.forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined)\n                _this.elementsToActivate.push(element);\n        });\n        this.action.elementsToDeactivate.forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined)\n                _this.elementsToDeactivate.push(element);\n            if (element instanceof model_1.SRoutingHandle && element.parent instanceof model_1.SRoutableElement) {\n                var parent_1 = element.parent;\n                if (_this.shouldRemoveHandle(element, parent_1)) {\n                    _this.handlesToRemove.push({ handle: element, parent: parent_1 });\n                    _this.elementsToDeactivate.push(parent_1);\n                    _this.elementsToActivate.push(parent_1);\n                }\n            }\n        });\n        return this.doExecute(context);\n    };\n    SwitchEditModeCommand.prototype.doExecute = function (context) {\n        var _this = this;\n        this.handlesToRemove.forEach(function (entry) {\n            entry.point = entry.parent.routingPoints.splice(entry.handle.pointIndex, 1)[0];\n        });\n        this.elementsToDeactivate.forEach(function (element) {\n            if (element instanceof model_1.SRoutableElement)\n                element.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n            else if (element instanceof model_1.SRoutingHandle) {\n                element.editMode = false;\n                if (element.danglingAnchor) {\n                    if (element.parent instanceof model_1.SRoutableElement && element.danglingAnchor.original) {\n                        if (element.parent.source === element.danglingAnchor)\n                            element.parent.sourceId = element.danglingAnchor.original.id;\n                        else if (element.parent.target === element.danglingAnchor)\n                            element.parent.targetId = element.danglingAnchor.original.id;\n                        element.danglingAnchor.parent.remove(element.danglingAnchor);\n                        element.danglingAnchor = undefined;\n                    }\n                }\n            }\n        });\n        this.elementsToActivate.forEach(function (element) {\n            if (model_2.canEditRouting(element) && element instanceof smodel_1.SParentElement) {\n                var router = _this.edgeRouterRegistry.get(element.routerKind);\n                router.createRoutingHandles(element);\n            }\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = true;\n        });\n        return context.root;\n    };\n    SwitchEditModeCommand.prototype.shouldRemoveHandle = function (handle, parent) {\n        if (handle.kind === 'junction') {\n            var route = this.edgeRouterRegistry.route(parent);\n            return route.find(function (rp) { return rp.pointIndex === handle.pointIndex; }) === undefined;\n        }\n        return false;\n    };\n    SwitchEditModeCommand.prototype.undo = function (context) {\n        var _this = this;\n        this.handlesToRemove.forEach(function (entry) {\n            if (entry.point !== undefined)\n                entry.parent.routingPoints.splice(entry.handle.pointIndex, 0, entry.point);\n        });\n        this.elementsToActivate.forEach(function (element) {\n            if (element instanceof model_1.SRoutableElement)\n                element.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = false;\n        });\n        this.elementsToDeactivate.forEach(function (element) {\n            if (model_2.canEditRouting(element)) {\n                var router = _this.edgeRouterRegistry.get(element.routerKind);\n                router.createRoutingHandles(element);\n            }\n            else if (element instanceof model_1.SRoutingHandle)\n                element.editMode = true;\n        });\n        return context.root;\n    };\n    SwitchEditModeCommand.prototype.redo = function (context) {\n        return this.doExecute(context);\n    };\n    SwitchEditModeCommand.KIND = SwitchEditModeAction.KIND;\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], SwitchEditModeCommand.prototype, \"edgeRouterRegistry\", void 0);\n    SwitchEditModeCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SwitchEditModeAction])\n    ], SwitchEditModeCommand);\n    return SwitchEditModeCommand;\n}(command_1.Command));\nexports.SwitchEditModeCommand = SwitchEditModeCommand;\n//# sourceMappingURL=edit-routing.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../routing/model\");\nexports.editFeature = Symbol('editFeature');\nfunction canEditRouting(element) {\n    return element instanceof model_1.SRoutableElement && element.hasFeature(exports.editFeature);\n}\nexports.canEditRouting = canEditRouting;\nexports.editLabelFeature = Symbol('editLabelFeature');\nfunction isEditableLabel(element) {\n    return 'text' in element && element.hasFeature(exports.editLabelFeature);\n}\nexports.isEditableLabel = isEditableLabel;\nexports.withEditLabelFeature = Symbol('withEditLabelFeature');\nfunction isWithEditableLabel(element) {\n    return 'editableLabel' in element && element.hasFeature(exports.withEditLabelFeature);\n}\nexports.isWithEditableLabel = isWithEditableLabel;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../../base/commands/command\");\nvar types_1 = require(\"../../base/types\");\nvar model_1 = require(\"../routing/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar ReconnectAction = /** @class */ (function () {\n    function ReconnectAction(routableId, newSourceId, newTargetId) {\n        this.routableId = routableId;\n        this.newSourceId = newSourceId;\n        this.newTargetId = newTargetId;\n        this.kind = ReconnectAction.KIND;\n    }\n    ReconnectAction.KIND = 'reconnect';\n    return ReconnectAction;\n}());\nexports.ReconnectAction = ReconnectAction;\nvar ReconnectCommand = /** @class */ (function (_super) {\n    __extends(ReconnectCommand, _super);\n    function ReconnectCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    ReconnectCommand.prototype.execute = function (context) {\n        this.doExecute(context);\n        return context.root;\n    };\n    ReconnectCommand.prototype.doExecute = function (context) {\n        var index = context.root.index;\n        var edge = index.getById(this.action.routableId);\n        if (edge instanceof model_1.SRoutableElement) {\n            var router = this.edgeRouterRegistry.get(edge.routerKind);\n            var before = router.takeSnapshot(edge);\n            router.applyReconnect(edge, this.action.newSourceId, this.action.newTargetId);\n            var after = router.takeSnapshot(edge);\n            this.memento = {\n                edge: edge,\n                before: before,\n                after: after\n            };\n        }\n    };\n    ReconnectCommand.prototype.undo = function (context) {\n        if (this.memento) {\n            var router = this.edgeRouterRegistry.get(this.memento.edge.routerKind);\n            router.applySnapshot(this.memento.edge, this.memento.before);\n        }\n        return context.root;\n    };\n    ReconnectCommand.prototype.redo = function (context) {\n        if (this.memento) {\n            var router = this.edgeRouterRegistry.get(this.memento.edge.routerKind);\n            router.applySnapshot(this.memento.edge, this.memento.after);\n        }\n        return context.root;\n    };\n    ReconnectCommand.KIND = ReconnectAction.KIND;\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], ReconnectCommand.prototype, \"edgeRouterRegistry\", void 0);\n    ReconnectCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [ReconnectAction])\n    ], ReconnectCommand);\n    return ReconnectCommand;\n}(command_1.Command));\nexports.ReconnectCommand = ReconnectCommand;\n//# sourceMappingURL=reconnect.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar expand_1 = require(\"./expand\");\nvar expandModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IButtonHandler).toConstructor(expand_1.ExpandButtonHandler);\n});\nexports.default = expandModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\n/**\n * Sent from the client to the model source to recalculate a diagram when elements\n * are collapsed/expanded by the client.\n */\nvar CollapseExpandAction = /** @class */ (function () {\n    function CollapseExpandAction(expandIds, collapseIds) {\n        this.expandIds = expandIds;\n        this.collapseIds = collapseIds;\n        this.kind = CollapseExpandAction.KIND;\n    }\n    CollapseExpandAction.KIND = 'collapseExpand';\n    return CollapseExpandAction;\n}());\nexports.CollapseExpandAction = CollapseExpandAction;\n/**\n * Programmatic action for expanding or collapsing all elements.\n */\nvar CollapseExpandAllAction = /** @class */ (function () {\n    /**\n     * If `expand` is true, all elements are expanded, othewise they are collapsed.\n     */\n    function CollapseExpandAllAction(expand) {\n        if (expand === void 0) { expand = true; }\n        this.expand = expand;\n        this.kind = CollapseExpandAllAction.KIND;\n    }\n    CollapseExpandAllAction.KIND = 'collapseExpandAll';\n    return CollapseExpandAllAction;\n}());\nexports.CollapseExpandAllAction = CollapseExpandAllAction;\nvar ExpandButtonHandler = /** @class */ (function () {\n    function ExpandButtonHandler() {\n    }\n    ExpandButtonHandler.prototype.buttonPressed = function (button) {\n        var expandable = smodel_utils_1.findParentByFeature(button, model_1.isExpandable);\n        if (expandable !== undefined) {\n            return [new CollapseExpandAction(expandable.expanded ? [] : [expandable.id], expandable.expanded ? [expandable.id] : [])];\n        }\n        else {\n            return [];\n        }\n    };\n    ExpandButtonHandler.TYPE = 'button:expand';\n    ExpandButtonHandler = __decorate([\n        inversify_1.injectable()\n    ], ExpandButtonHandler);\n    return ExpandButtonHandler;\n}());\nexports.ExpandButtonHandler = ExpandButtonHandler;\n//# sourceMappingURL=expand.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.expandFeature = Symbol('expandFeature');\nfunction isExpandable(element) {\n    return element.hasFeature(exports.expandFeature) && 'expanded' in element;\n}\nexports.isExpandable = isExpandable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"../../lib/jsx\");\nvar model_1 = require(\"./model\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar inversify_1 = require(\"inversify\");\nvar ExpandButtonView = /** @class */ (function () {\n    function ExpandButtonView() {\n    }\n    ExpandButtonView.prototype.render = function (button, context) {\n        var expandable = smodel_utils_1.findParentByFeature(button, model_1.isExpandable);\n        var path = (expandable !== undefined && expandable.expanded)\n            ? 'M 1,5 L 8,12 L 15,5 Z'\n            : 'M 1,8 L 8,15 L 8,1 Z';\n        return jsx_1.svg(\"g\", { \"class-sprotty-button\": \"{true}\", \"class-enabled\": \"{button.enabled}\" },\n            jsx_1.svg(\"rect\", { x: 0, y: 0, width: 16, height: 16, opacity: 0 }),\n            jsx_1.svg(\"path\", { d: path }));\n    };\n    ExpandButtonView = __decorate([\n        inversify_1.injectable()\n    ], ExpandButtonView);\n    return ExpandButtonView;\n}());\nexports.ExpandButtonView = ExpandButtonView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar export_1 = require(\"./export\");\nvar svg_exporter_1 = require(\"./svg-exporter\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar exportSvgModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.KeyListener).to(export_1.ExportSvgKeyListener).inSingletonScope();\n    bind(types_1.TYPES.HiddenVNodePostprocessor).to(export_1.ExportSvgPostprocessor).inSingletonScope();\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, export_1.ExportSvgCommand);\n    bind(types_1.TYPES.SvgExporter).to(svg_exporter_1.SvgExporter).inSingletonScope();\n});\nexports.default = exportSvgModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../../base/commands/command\");\nvar model_1 = require(\"../select/model\");\nvar action_1 = require(\"../../base/actions/action\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar model_2 = require(\"./model\");\nvar svg_exporter_1 = require(\"./svg-exporter\");\nvar model_3 = require(\"../viewport/model\");\nvar model_4 = require(\"../hover/model\");\nvar types_1 = require(\"../../base/types\");\nvar ExportSvgKeyListener = /** @class */ (function (_super) {\n    __extends(ExportSvgKeyListener, _super);\n    function ExportSvgKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ExportSvgKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyE', 'ctrlCmd', 'shift'))\n            return [new RequestExportSvgAction()];\n        else\n            return [];\n    };\n    ExportSvgKeyListener = __decorate([\n        inversify_1.injectable()\n    ], ExportSvgKeyListener);\n    return ExportSvgKeyListener;\n}(key_tool_1.KeyListener));\nexports.ExportSvgKeyListener = ExportSvgKeyListener;\nvar RequestExportSvgAction = /** @class */ (function () {\n    function RequestExportSvgAction(requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.requestId = requestId;\n        this.kind = RequestExportSvgAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    RequestExportSvgAction.create = function () {\n        return new RequestExportSvgAction(action_1.generateRequestId());\n    };\n    RequestExportSvgAction.KIND = 'requestExportSvg';\n    return RequestExportSvgAction;\n}());\nexports.RequestExportSvgAction = RequestExportSvgAction;\nvar ExportSvgCommand = /** @class */ (function (_super) {\n    __extends(ExportSvgCommand, _super);\n    function ExportSvgCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    ExportSvgCommand.prototype.execute = function (context) {\n        if (model_2.isExportable(context.root)) {\n            var root = context.modelFactory.createRoot(context.root);\n            if (model_2.isExportable(root)) {\n                if (model_3.isViewport(root)) {\n                    root.zoom = 1;\n                    root.scroll = { x: 0, y: 0 };\n                }\n                root.index.all().forEach(function (element) {\n                    if (model_1.isSelectable(element) && element.selected)\n                        element.selected = false;\n                    if (model_4.isHoverable(element) && element.hoverFeedback)\n                        element.hoverFeedback = false;\n                });\n                return {\n                    model: root,\n                    modelChanged: true,\n                    cause: this.action\n                };\n            }\n        }\n        return {\n            model: context.root,\n            modelChanged: false\n        };\n    };\n    ExportSvgCommand.KIND = RequestExportSvgAction.KIND;\n    ExportSvgCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [RequestExportSvgAction])\n    ], ExportSvgCommand);\n    return ExportSvgCommand;\n}(command_1.HiddenCommand));\nexports.ExportSvgCommand = ExportSvgCommand;\nvar ExportSvgPostprocessor = /** @class */ (function () {\n    function ExportSvgPostprocessor() {\n    }\n    ExportSvgPostprocessor.prototype.decorate = function (vnode, element) {\n        if (element instanceof smodel_1.SModelRoot)\n            this.root = element;\n        return vnode;\n    };\n    ExportSvgPostprocessor.prototype.postUpdate = function (cause) {\n        if (this.root && cause !== undefined && cause.kind === RequestExportSvgAction.KIND) {\n            this.svgExporter.export(this.root, cause);\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.SvgExporter),\n        __metadata(\"design:type\", svg_exporter_1.SvgExporter)\n    ], ExportSvgPostprocessor.prototype, \"svgExporter\", void 0);\n    ExportSvgPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], ExportSvgPostprocessor);\n    return ExportSvgPostprocessor;\n}());\nexports.ExportSvgPostprocessor = ExportSvgPostprocessor;\n//# sourceMappingURL=export.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.exportFeature = Symbol('exportFeature');\nfunction isExportable(element) {\n    return element.hasFeature(exports.exportFeature);\n}\nexports.isExportable = isExportable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar model_1 = require(\"../bounds/model\");\nvar action_dispatcher_1 = require(\"../../base/actions/action-dispatcher\");\nvar types_1 = require(\"../../base/types\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar inversify_1 = require(\"inversify\");\nvar ExportSvgAction = /** @class */ (function () {\n    function ExportSvgAction(svg, responseId) {\n        if (responseId === void 0) { responseId = ''; }\n        this.svg = svg;\n        this.responseId = responseId;\n        this.kind = ExportSvgAction.KIND;\n    }\n    ExportSvgAction.KIND = 'exportSvg';\n    return ExportSvgAction;\n}());\nexports.ExportSvgAction = ExportSvgAction;\nvar SvgExporter = /** @class */ (function () {\n    function SvgExporter() {\n    }\n    SvgExporter.prototype.export = function (root, request) {\n        if (typeof document !== 'undefined') {\n            var div = document.getElementById(this.options.hiddenDiv);\n            if (div !== null && div.firstElementChild && div.firstElementChild.tagName === 'svg') {\n                var svgElement = div.firstElementChild;\n                var svg = this.createSvg(svgElement, root);\n                this.actionDispatcher.dispatch(new ExportSvgAction(svg, request ? request.requestId : ''));\n            }\n        }\n    };\n    SvgExporter.prototype.createSvg = function (svgElementOrig, root) {\n        var serializer = new XMLSerializer();\n        var svgCopy = serializer.serializeToString(svgElementOrig);\n        var iframe = document.createElement('iframe');\n        document.body.appendChild(iframe);\n        if (!iframe.contentWindow)\n            throw new Error('IFrame has no contentWindow');\n        var docCopy = iframe.contentWindow.document;\n        docCopy.open();\n        docCopy.write(svgCopy);\n        docCopy.close();\n        var svgElementNew = docCopy.getElementById(svgElementOrig.id);\n        svgElementNew.removeAttribute('opacity');\n        this.copyStyles(svgElementOrig, svgElementNew, ['width', 'height', 'opacity']);\n        svgElementNew.setAttribute('version', '1.1');\n        var bounds = this.getBounds(root);\n        svgElementNew.setAttribute('viewBox', bounds.x + \" \" + bounds.y + \" \" + bounds.width + \" \" + bounds.height);\n        var svgCode = serializer.serializeToString(svgElementNew);\n        document.body.removeChild(iframe);\n        return svgCode;\n    };\n    SvgExporter.prototype.copyStyles = function (source, target, skipedProperties) {\n        var sourceStyle = getComputedStyle(source);\n        var targetStyle = getComputedStyle(target);\n        var diffStyle = '';\n        for (var i = 0; i < sourceStyle.length; i++) {\n            var key = sourceStyle[i];\n            if (skipedProperties.indexOf(key) === -1) {\n                var value = sourceStyle.getPropertyValue(key);\n                if (targetStyle.getPropertyValue(key) !== value) {\n                    diffStyle += key + \":\" + value + \";\";\n                }\n            }\n        }\n        if (diffStyle !== '')\n            target.setAttribute('style', diffStyle);\n        // IE doesn't retrun anything on source.children\n        for (var i = 0; i < source.childNodes.length; ++i) {\n            var sourceChild = source.childNodes[i];\n            var targetChild = target.childNodes[i];\n            if (sourceChild instanceof Element)\n                this.copyStyles(sourceChild, targetChild, []);\n        }\n    };\n    SvgExporter.prototype.getBounds = function (root) {\n        var allBounds = [geometry_1.EMPTY_BOUNDS];\n        root.children.forEach(function (element) {\n            if (model_1.isBoundsAware(element)) {\n                allBounds.push(element.bounds);\n            }\n        });\n        return allBounds.reduce(function (one, two) { return geometry_1.combine(one, two); });\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], SvgExporter.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", action_dispatcher_1.ActionDispatcher)\n    ], SvgExporter.prototype, \"actionDispatcher\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], SvgExporter.prototype, \"log\", void 0);\n    SvgExporter = __decorate([\n        inversify_1.injectable()\n    ], SvgExporter);\n    return SvgExporter;\n}());\nexports.SvgExporter = SvgExporter;\n//# sourceMappingURL=svg-exporter.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar fade_1 = require(\"./fade\");\nvar fadeModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.IVNodePostprocessor).to(fade_1.ElementFader).inSingletonScope();\n});\nexports.default = fadeModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar model_1 = require(\"./model\");\nvar FadeAnimation = /** @class */ (function (_super) {\n    __extends(FadeAnimation, _super);\n    function FadeAnimation(model, elementFades, context, removeAfterFadeOut) {\n        if (removeAfterFadeOut === void 0) { removeAfterFadeOut = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementFades = elementFades;\n        _this.removeAfterFadeOut = removeAfterFadeOut;\n        return _this;\n    }\n    FadeAnimation.prototype.tween = function (t, context) {\n        for (var _i = 0, _a = this.elementFades; _i < _a.length; _i++) {\n            var elementFade = _a[_i];\n            var element = elementFade.element;\n            if (elementFade.type === 'in') {\n                element.opacity = t;\n            }\n            else if (elementFade.type === 'out') {\n                element.opacity = 1 - t;\n                if (t === 1 && this.removeAfterFadeOut && element instanceof smodel_1.SChildElement) {\n                    element.parent.remove(element);\n                }\n            }\n        }\n        return this.model;\n    };\n    return FadeAnimation;\n}(animation_1.Animation));\nexports.FadeAnimation = FadeAnimation;\nvar ElementFader = /** @class */ (function () {\n    function ElementFader() {\n    }\n    ElementFader.prototype.decorate = function (vnode, element) {\n        if (model_1.isFadeable(element) && element.opacity !== 1) {\n            vnode_utils_1.setAttr(vnode, 'opacity', element.opacity);\n        }\n        return vnode;\n    };\n    ElementFader.prototype.postUpdate = function () {\n    };\n    ElementFader = __decorate([\n        inversify_1.injectable()\n    ], ElementFader);\n    return ElementFader;\n}());\nexports.ElementFader = ElementFader;\n//# sourceMappingURL=fade.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fadeFeature = Symbol('fadeFeature');\nfunction isFadeable(element) {\n    return element.hasFeature(exports.fadeFeature) && element['opacity'] !== undefined;\n}\nexports.isFadeable = isFadeable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar hover_1 = require(\"./hover\");\nvar popup_position_updater_1 = require(\"./popup-position-updater\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar action_handler_1 = require(\"../../base/actions/action-handler\");\nvar center_fit_1 = require(\"../viewport/center-fit\");\nvar viewport_1 = require(\"../viewport/viewport\");\nvar move_1 = require(\"../move/move\");\nvar hoverModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.PopupVNodePostprocessor).to(popup_position_updater_1.PopupPositionUpdater).inSingletonScope();\n    bind(types_1.TYPES.MouseListener).to(hover_1.HoverMouseListener);\n    bind(types_1.TYPES.PopupMouseListener).to(hover_1.PopupHoverMouseListener);\n    bind(types_1.TYPES.KeyListener).to(hover_1.HoverKeyListener);\n    bind(types_1.TYPES.HoverState).toConstantValue({\n        mouseOverTimer: undefined,\n        mouseOutTimer: undefined,\n        popupOpen: false,\n        previousPopupElement: undefined\n    });\n    bind(hover_1.ClosePopupActionHandler).toSelf().inSingletonScope();\n    var context = { bind: bind, isBound: isBound };\n    command_registration_1.configureCommand(context, hover_1.HoverFeedbackCommand);\n    command_registration_1.configureCommand(context, hover_1.SetPopupModelCommand);\n    action_handler_1.configureActionHandler(context, hover_1.SetPopupModelCommand.KIND, hover_1.ClosePopupActionHandler);\n    action_handler_1.configureActionHandler(context, center_fit_1.FitToScreenCommand.KIND, hover_1.ClosePopupActionHandler);\n    action_handler_1.configureActionHandler(context, center_fit_1.CenterCommand.KIND, hover_1.ClosePopupActionHandler);\n    action_handler_1.configureActionHandler(context, viewport_1.SetViewportCommand.KIND, hover_1.ClosePopupActionHandler);\n    action_handler_1.configureActionHandler(context, move_1.MoveCommand.KIND, hover_1.ClosePopupActionHandler);\n});\nexports.default = hoverModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar types_1 = require(\"../../base/types\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_factory_1 = require(\"../../base/model/smodel-factory\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"./model\");\n/**\n * Triggered when the user puts the mouse pointer over an element.\n */\nvar HoverFeedbackAction = /** @class */ (function () {\n    function HoverFeedbackAction(mouseoverElement, mouseIsOver) {\n        this.mouseoverElement = mouseoverElement;\n        this.mouseIsOver = mouseIsOver;\n        this.kind = HoverFeedbackAction.KIND;\n    }\n    HoverFeedbackAction.KIND = 'hoverFeedback';\n    return HoverFeedbackAction;\n}());\nexports.HoverFeedbackAction = HoverFeedbackAction;\nvar HoverFeedbackCommand = /** @class */ (function (_super) {\n    __extends(HoverFeedbackCommand, _super);\n    function HoverFeedbackCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    HoverFeedbackCommand.prototype.execute = function (context) {\n        var model = context.root;\n        var modelElement = model.index.getById(this.action.mouseoverElement);\n        if (modelElement) {\n            if (model_2.isHoverable(modelElement)) {\n                modelElement.hoverFeedback = this.action.mouseIsOver;\n            }\n        }\n        return this.redo(context);\n    };\n    HoverFeedbackCommand.prototype.undo = function (context) {\n        return context.root;\n    };\n    HoverFeedbackCommand.prototype.redo = function (context) {\n        return context.root;\n    };\n    HoverFeedbackCommand.KIND = HoverFeedbackAction.KIND;\n    HoverFeedbackCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [HoverFeedbackAction])\n    ], HoverFeedbackCommand);\n    return HoverFeedbackCommand;\n}(command_1.SystemCommand));\nexports.HoverFeedbackCommand = HoverFeedbackCommand;\n/**\n * Triggered when the user hovers the mouse pointer over an element to get a popup with details on\n * that element. This action is sent from the client to the model source, e.g. a DiagramServer.\n * The response is a SetPopupModelAction.\n */\nvar RequestPopupModelAction = /** @class */ (function () {\n    function RequestPopupModelAction(elementId, bounds, requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.elementId = elementId;\n        this.bounds = bounds;\n        this.requestId = requestId;\n        this.kind = RequestPopupModelAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    RequestPopupModelAction.create = function (elementId, bounds) {\n        return new RequestPopupModelAction(elementId, bounds, action_1.generateRequestId());\n    };\n    RequestPopupModelAction.KIND = 'requestPopupModel';\n    return RequestPopupModelAction;\n}());\nexports.RequestPopupModelAction = RequestPopupModelAction;\n/**\n * Sent from the model source to the client to display a popup in response to a RequestPopupModelAction.\n * This action can also be used to remove any existing popup by choosing EMPTY_ROOT as root element.\n */\nvar SetPopupModelAction = /** @class */ (function () {\n    function SetPopupModelAction(newRoot, responseId) {\n        if (responseId === void 0) { responseId = ''; }\n        this.newRoot = newRoot;\n        this.responseId = responseId;\n        this.kind = SetPopupModelAction.KIND;\n    }\n    SetPopupModelAction.KIND = 'setPopupModel';\n    return SetPopupModelAction;\n}());\nexports.SetPopupModelAction = SetPopupModelAction;\nvar SetPopupModelCommand = /** @class */ (function (_super) {\n    __extends(SetPopupModelCommand, _super);\n    function SetPopupModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    SetPopupModelCommand.prototype.execute = function (context) {\n        this.oldRoot = context.root;\n        this.newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        return this.newRoot;\n    };\n    SetPopupModelCommand.prototype.undo = function (context) {\n        return this.oldRoot;\n    };\n    SetPopupModelCommand.prototype.redo = function (context) {\n        return this.newRoot;\n    };\n    SetPopupModelCommand.KIND = SetPopupModelAction.KIND;\n    SetPopupModelCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetPopupModelAction])\n    ], SetPopupModelCommand);\n    return SetPopupModelCommand;\n}(command_1.PopupCommand));\nexports.SetPopupModelCommand = SetPopupModelCommand;\nvar AbstractHoverMouseListener = /** @class */ (function (_super) {\n    __extends(AbstractHoverMouseListener, _super);\n    function AbstractHoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AbstractHoverMouseListener.prototype.mouseDown = function (target, event) {\n        this.mouseIsDown = true;\n        return [];\n    };\n    AbstractHoverMouseListener.prototype.mouseUp = function (target, event) {\n        this.mouseIsDown = false;\n        return [];\n    };\n    AbstractHoverMouseListener.prototype.stopMouseOutTimer = function () {\n        if (this.state.mouseOutTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOutTimer);\n            this.state.mouseOutTimer = undefined;\n        }\n    };\n    AbstractHoverMouseListener.prototype.startMouseOutTimer = function () {\n        var _this = this;\n        this.stopMouseOutTimer();\n        return new Promise(function (resolve) {\n            _this.state.mouseOutTimer = window.setTimeout(function () {\n                _this.state.popupOpen = false;\n                _this.state.previousPopupElement = undefined;\n                resolve(new SetPopupModelAction({ type: smodel_factory_1.EMPTY_ROOT.type, id: smodel_factory_1.EMPTY_ROOT.id }));\n            }, _this.options.popupCloseDelay);\n        });\n    };\n    AbstractHoverMouseListener.prototype.stopMouseOverTimer = function () {\n        if (this.state.mouseOverTimer !== undefined) {\n            window.clearTimeout(this.state.mouseOverTimer);\n            this.state.mouseOverTimer = undefined;\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], AbstractHoverMouseListener.prototype, \"options\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.HoverState),\n        __metadata(\"design:type\", Object)\n    ], AbstractHoverMouseListener.prototype, \"state\", void 0);\n    return AbstractHoverMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.AbstractHoverMouseListener = AbstractHoverMouseListener;\nvar HoverMouseListener = /** @class */ (function (_super) {\n    __extends(HoverMouseListener, _super);\n    function HoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HoverMouseListener.prototype.computePopupBounds = function (target, mousePosition) {\n        // Default position: below the mouse cursor\n        var offset = { x: -5, y: 20 };\n        var targetBounds = model_1.getAbsoluteBounds(target);\n        var canvasBounds = target.root.canvasBounds;\n        var boundsInWindow = geometry_1.translate(targetBounds, canvasBounds);\n        var distRight = boundsInWindow.x + boundsInWindow.width - mousePosition.x;\n        var distBottom = boundsInWindow.y + boundsInWindow.height - mousePosition.y;\n        if (distBottom <= distRight && this.allowSidePosition(target, 'below', distBottom)) {\n            // Put the popup below the target element\n            offset = { x: -5, y: Math.round(distBottom + 5) };\n        }\n        else if (distRight <= distBottom && this.allowSidePosition(target, 'right', distRight)) {\n            // Put the popup right of the target element\n            offset = { x: Math.round(distRight + 5), y: -5 };\n        }\n        var leftPopupPosition = mousePosition.x + offset.x;\n        var canvasRightBorderPosition = canvasBounds.x + canvasBounds.width;\n        if (leftPopupPosition > canvasRightBorderPosition) {\n            leftPopupPosition = canvasRightBorderPosition;\n        }\n        var topPopupPosition = mousePosition.y + offset.y;\n        var canvasBottomBorderPosition = canvasBounds.y + canvasBounds.height;\n        if (topPopupPosition > canvasBottomBorderPosition) {\n            topPopupPosition = canvasBottomBorderPosition;\n        }\n        return { x: leftPopupPosition, y: topPopupPosition, width: -1, height: -1 };\n    };\n    HoverMouseListener.prototype.allowSidePosition = function (target, side, distance) {\n        return !(target instanceof smodel_1.SModelRoot) && distance <= 150;\n    };\n    HoverMouseListener.prototype.startMouseOverTimer = function (target, event) {\n        var _this = this;\n        this.stopMouseOverTimer();\n        return new Promise(function (resolve) {\n            _this.state.mouseOverTimer = window.setTimeout(function () {\n                var popupBounds = _this.computePopupBounds(target, { x: event.pageX, y: event.pageY });\n                resolve(new RequestPopupModelAction(target.id, popupBounds));\n                _this.state.popupOpen = true;\n                _this.state.previousPopupElement = target;\n            }, _this.options.popupOpenDelay);\n        });\n    };\n    HoverMouseListener.prototype.mouseOver = function (target, event) {\n        var result = [];\n        if (!this.mouseIsDown) {\n            var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n            if (this.state.popupOpen && (popupTarget === undefined ||\n                this.state.previousPopupElement !== undefined && this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOutTimer());\n            }\n            else {\n                this.stopMouseOverTimer();\n                this.stopMouseOutTimer();\n            }\n            if (popupTarget !== undefined &&\n                (this.state.previousPopupElement === undefined || this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOverTimer(popupTarget, event));\n            }\n            if (this.lastHoverFeedbackElementId) {\n                result.push(new HoverFeedbackAction(this.lastHoverFeedbackElementId, false));\n                this.lastHoverFeedbackElementId = undefined;\n            }\n            var hoverTarget = smodel_utils_1.findParentByFeature(target, model_2.isHoverable);\n            if (hoverTarget !== undefined) {\n                result.push(new HoverFeedbackAction(hoverTarget.id, true));\n                this.lastHoverFeedbackElementId = hoverTarget.id;\n            }\n        }\n        return result;\n    };\n    HoverMouseListener.prototype.mouseOut = function (target, event) {\n        var result = [];\n        if (!this.mouseIsDown) {\n            var elementUnderMouse = document.elementFromPoint(event.x, event.y);\n            if (!this.isSprottyPopup(elementUnderMouse)) {\n                if (this.state.popupOpen) {\n                    var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n                    if (this.state.previousPopupElement !== undefined && popupTarget !== undefined\n                        && this.state.previousPopupElement.id === popupTarget.id)\n                        result.push(this.startMouseOutTimer());\n                }\n                this.stopMouseOverTimer();\n                var hoverTarget = smodel_utils_1.findParentByFeature(target, model_2.isHoverable);\n                if (hoverTarget !== undefined) {\n                    result.push(new HoverFeedbackAction(hoverTarget.id, false));\n                    this.lastHoverFeedbackElementId = undefined;\n                }\n            }\n        }\n        return result;\n    };\n    HoverMouseListener.prototype.isSprottyPopup = function (element) {\n        return element\n            ? (element.id === this.options.popupDiv\n                || (!!element.parentElement && this.isSprottyPopup(element.parentElement)))\n            : false;\n    };\n    HoverMouseListener.prototype.mouseMove = function (target, event) {\n        var result = [];\n        if (!this.mouseIsDown) {\n            if (this.state.previousPopupElement !== undefined && this.closeOnMouseMove(this.state.previousPopupElement, event)) {\n                result.push(this.startMouseOutTimer());\n            }\n            var popupTarget = smodel_utils_1.findParent(target, model_2.hasPopupFeature);\n            if (popupTarget !== undefined && (this.state.previousPopupElement === undefined\n                || this.state.previousPopupElement.id !== popupTarget.id)) {\n                result.push(this.startMouseOverTimer(popupTarget, event));\n            }\n        }\n        return result;\n    };\n    HoverMouseListener.prototype.closeOnMouseMove = function (target, event) {\n        return target instanceof smodel_1.SModelRoot;\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], HoverMouseListener.prototype, \"options\", void 0);\n    HoverMouseListener = __decorate([\n        inversify_1.injectable()\n    ], HoverMouseListener);\n    return HoverMouseListener;\n}(AbstractHoverMouseListener));\nexports.HoverMouseListener = HoverMouseListener;\nvar PopupHoverMouseListener = /** @class */ (function (_super) {\n    __extends(PopupHoverMouseListener, _super);\n    function PopupHoverMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PopupHoverMouseListener.prototype.mouseOut = function (target, event) {\n        return [this.startMouseOutTimer()];\n    };\n    PopupHoverMouseListener.prototype.mouseOver = function (target, event) {\n        this.stopMouseOutTimer();\n        this.stopMouseOverTimer();\n        return [];\n    };\n    PopupHoverMouseListener = __decorate([\n        inversify_1.injectable()\n    ], PopupHoverMouseListener);\n    return PopupHoverMouseListener;\n}(AbstractHoverMouseListener));\nexports.PopupHoverMouseListener = PopupHoverMouseListener;\nvar HoverKeyListener = /** @class */ (function (_super) {\n    __extends(HoverKeyListener, _super);\n    function HoverKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    HoverKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'Escape')) {\n            return [new SetPopupModelAction({ type: smodel_factory_1.EMPTY_ROOT.type, id: smodel_factory_1.EMPTY_ROOT.id })];\n        }\n        return [];\n    };\n    return HoverKeyListener;\n}(key_tool_1.KeyListener));\nexports.HoverKeyListener = HoverKeyListener;\nvar ClosePopupActionHandler = /** @class */ (function () {\n    function ClosePopupActionHandler() {\n        this.popupOpen = false;\n    }\n    ClosePopupActionHandler.prototype.handle = function (action) {\n        if (action.kind === SetPopupModelCommand.KIND) {\n            this.popupOpen = action.newRoot.type !== smodel_factory_1.EMPTY_ROOT.type;\n        }\n        else if (this.popupOpen) {\n            return new SetPopupModelAction({ id: smodel_factory_1.EMPTY_ROOT.id, type: smodel_factory_1.EMPTY_ROOT.type });\n        }\n    };\n    ClosePopupActionHandler = __decorate([\n        inversify_1.injectable()\n    ], ClosePopupActionHandler);\n    return ClosePopupActionHandler;\n}());\nexports.ClosePopupActionHandler = ClosePopupActionHandler;\n//# sourceMappingURL=hover.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hoverFeedbackFeature = Symbol('hoverFeedbackFeature');\nfunction isHoverable(element) {\n    return element.hasFeature(exports.hoverFeedbackFeature);\n}\nexports.isHoverable = isHoverable;\nexports.popupFeature = Symbol('popupFeature');\nfunction hasPopupFeature(element) {\n    return element.hasFeature(exports.popupFeature);\n}\nexports.hasPopupFeature = hasPopupFeature;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar PopupPositionUpdater = /** @class */ (function () {\n    function PopupPositionUpdater() {\n    }\n    PopupPositionUpdater.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    PopupPositionUpdater.prototype.postUpdate = function () {\n        var popupDiv = document.getElementById(this.options.popupDiv);\n        if (popupDiv !== null && typeof window !== 'undefined') {\n            var boundingClientRect = popupDiv.getBoundingClientRect();\n            if (window.innerHeight < boundingClientRect.height + boundingClientRect.top) {\n                popupDiv.style.top = (window.pageYOffset + window.innerHeight - boundingClientRect.height - 5) + 'px';\n            }\n            if (window.innerWidth < boundingClientRect.left + boundingClientRect.width) {\n                popupDiv.style.left = (window.pageXOffset + window.innerWidth - boundingClientRect.width - 5) + 'px';\n            }\n            if (boundingClientRect.left < 0) {\n                popupDiv.style.left = '0px';\n            }\n            if (boundingClientRect.top < 0) {\n                popupDiv.style.top = '0px';\n            }\n        }\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], PopupPositionUpdater.prototype, \"options\", void 0);\n    PopupPositionUpdater = __decorate([\n        inversify_1.injectable()\n    ], PopupPositionUpdater);\n    return PopupPositionUpdater;\n}());\nexports.PopupPositionUpdater = PopupPositionUpdater;\n//# sourceMappingURL=popup-position-updater.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar move_1 = require(\"./move\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar moveModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.MouseListener).to(move_1.MoveMouseListener);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, move_1.MoveCommand);\n    bind(move_1.LocationPostprocessor).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IVNodePostprocessor).toService(move_1.LocationPostprocessor);\n    bind(types_1.TYPES.HiddenVNodePostprocessor).toService(move_1.LocationPostprocessor);\n});\nexports.default = moveModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.moveFeature = Symbol('moveFeature');\nfunction isLocateable(element) {\n    return element['position'] !== undefined;\n}\nexports.isLocateable = isLocateable;\nfunction isMoveable(element) {\n    return element.hasFeature(exports.moveFeature) && isLocateable(element);\n}\nexports.isMoveable = isMoveable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar command_1 = require(\"../../base/commands/command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar types_1 = require(\"../../base/types\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar sgraph_1 = require(\"../../graph/sgraph\");\nvar commit_model_1 = require(\"../../model-source/commit-model\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"../bounds/model\");\nvar create_on_drag_1 = require(\"../edit/create-on-drag\");\nvar delete_1 = require(\"../edit/delete\");\nvar edit_routing_1 = require(\"../edit/edit-routing\");\nvar reconnect_1 = require(\"../edit/reconnect\");\nvar model_2 = require(\"../routing/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar model_3 = require(\"../edge-layout/model\");\nvar model_4 = require(\"../select/model\");\nvar select_1 = require(\"../select/select\");\nvar model_5 = require(\"../viewport/model\");\nvar model_6 = require(\"./model\");\nvar MoveAction = /** @class */ (function () {\n    function MoveAction(moves, animate, finished) {\n        if (animate === void 0) { animate = true; }\n        if (finished === void 0) { finished = false; }\n        this.moves = moves;\n        this.animate = animate;\n        this.finished = finished;\n        this.kind = MoveCommand.KIND;\n    }\n    return MoveAction;\n}());\nexports.MoveAction = MoveAction;\nvar MoveCommand = /** @class */ (function (_super) {\n    __extends(MoveCommand, _super);\n    function MoveCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.resolvedMoves = new Map;\n        _this.edgeMementi = [];\n        return _this;\n    }\n    MoveCommand_1 = MoveCommand;\n    MoveCommand.prototype.execute = function (context) {\n        var _this = this;\n        var index = context.root.index;\n        var edge2handleMoves = new Map();\n        var attachedEdgeShifts = new Map();\n        this.action.moves.forEach(function (move) {\n            var element = index.getById(move.elementId);\n            if (element instanceof model_2.SRoutingHandle && _this.edgeRouterRegistry) {\n                var edge = element.parent;\n                if (edge instanceof model_2.SRoutableElement) {\n                    var resolvedMove = _this.resolveHandleMove(element, edge, move);\n                    if (resolvedMove) {\n                        var movesByEdge = edge2handleMoves.get(edge);\n                        if (!movesByEdge) {\n                            movesByEdge = [];\n                            edge2handleMoves.set(edge, movesByEdge);\n                        }\n                        movesByEdge.push(resolvedMove);\n                    }\n                }\n            }\n            else if (element && model_6.isLocateable(element)) {\n                var resolvedMove_1 = _this.resolveElementMove(element, move);\n                if (resolvedMove_1) {\n                    _this.resolvedMoves.set(resolvedMove_1.element.id, resolvedMove_1);\n                    if (_this.edgeRouterRegistry) {\n                        index.getAttachedElements(element).forEach(function (edge) {\n                            if (edge instanceof model_2.SRoutableElement) {\n                                var existingDelta = attachedEdgeShifts.get(edge);\n                                var newDelta = geometry_1.subtract(resolvedMove_1.toPosition, resolvedMove_1.fromPosition);\n                                var delta = (existingDelta)\n                                    ? geometry_1.linear(existingDelta, newDelta, 0.5)\n                                    : newDelta;\n                                attachedEdgeShifts.set(edge, delta);\n                            }\n                        });\n                    }\n                }\n            }\n        });\n        this.doMove(edge2handleMoves, attachedEdgeShifts);\n        if (this.action.animate) {\n            this.undoMove();\n            return new animation_1.CompoundAnimation(context.root, context, [\n                new MoveAnimation(context.root, this.resolvedMoves, context, false),\n                new MorphEdgesAnimation(context.root, this.edgeMementi, context, false)\n            ]).start();\n        }\n        return context.root;\n    };\n    MoveCommand.prototype.resolveHandleMove = function (handle, edge, move) {\n        var fromPosition = move.fromPosition;\n        if (!fromPosition) {\n            var router = this.edgeRouterRegistry.get(edge.routerKind);\n            fromPosition = router.getHandlePosition(edge, router.route(edge), handle);\n        }\n        if (fromPosition)\n            return {\n                handle: handle,\n                fromPosition: fromPosition,\n                toPosition: move.toPosition\n            };\n        return undefined;\n    };\n    MoveCommand.prototype.resolveElementMove = function (element, move) {\n        var fromPosition = move.fromPosition\n            || { x: element.position.x, y: element.position.y };\n        return {\n            element: element,\n            fromPosition: fromPosition,\n            toPosition: move.toPosition\n        };\n    };\n    MoveCommand.prototype.doMove = function (edge2move, attachedEdgeShifts) {\n        var _this = this;\n        this.resolvedMoves.forEach(function (res) {\n            res.element.position = res.toPosition;\n        });\n        // reset edges to state before\n        edge2move.forEach(function (moves, edge) {\n            var router = _this.edgeRouterRegistry.get(edge.routerKind);\n            var before = router.takeSnapshot(edge);\n            router.applyHandleMoves(edge, moves);\n            var after = router.takeSnapshot(edge);\n            _this.edgeMementi.push({ edge: edge, before: before, after: after });\n        });\n        attachedEdgeShifts.forEach(function (delta, edge) {\n            if (!edge2move.get(edge)) {\n                var router = _this.edgeRouterRegistry.get(edge.routerKind);\n                var before = router.takeSnapshot(edge);\n                if (edge.source\n                    && edge.target\n                    && _this.resolvedMoves.get(edge.source.id)\n                    && _this.resolvedMoves.get(edge.target.id)) {\n                    // move the entire edge when both source and target are moved\n                    edge.routingPoints = edge.routingPoints.map(function (rp) { return geometry_1.add(rp, delta); });\n                }\n                else {\n                    // add/remove RPs according to the new source/target positions\n                    var updateHandles = model_4.isSelectable(edge) && edge.selected;\n                    router.cleanupRoutingPoints(edge, edge.routingPoints, updateHandles, _this.action.finished);\n                }\n                var after = router.takeSnapshot(edge);\n                _this.edgeMementi.push({ edge: edge, before: before, after: after });\n            }\n        });\n    };\n    MoveCommand.prototype.undoMove = function () {\n        var _this = this;\n        this.resolvedMoves.forEach(function (res) {\n            res.element.position = res.fromPosition;\n        });\n        this.edgeMementi.forEach(function (memento) {\n            var router = _this.edgeRouterRegistry.get(memento.edge.routerKind);\n            router.applySnapshot(memento.edge, memento.before);\n        });\n    };\n    MoveCommand.prototype.undo = function (context) {\n        return new animation_1.CompoundAnimation(context.root, context, [\n            new MoveAnimation(context.root, this.resolvedMoves, context, true),\n            new MorphEdgesAnimation(context.root, this.edgeMementi, context, true)\n        ]).start();\n    };\n    MoveCommand.prototype.redo = function (context) {\n        return new animation_1.CompoundAnimation(context.root, context, [\n            new MoveAnimation(context.root, this.resolvedMoves, context, false),\n            new MorphEdgesAnimation(context.root, this.edgeMementi, context, false)\n        ]).start();\n    };\n    MoveCommand.prototype.merge = function (other, context) {\n        var _this = this;\n        if (!this.action.animate && other instanceof MoveCommand_1) {\n            other.resolvedMoves.forEach(function (otherMove, otherElementId) {\n                var existingMove = _this.resolvedMoves.get(otherElementId);\n                if (existingMove) {\n                    existingMove.toPosition = otherMove.toPosition;\n                }\n                else {\n                    _this.resolvedMoves.set(otherElementId, otherMove);\n                }\n            });\n            other.edgeMementi.forEach(function (otherMemento) {\n                var existingMemento = _this.edgeMementi.find(function (edgeMemento) { return edgeMemento.edge.id === otherMemento.edge.id; });\n                if (existingMemento) {\n                    existingMemento.after = otherMemento.after;\n                }\n                else {\n                    _this.edgeMementi.push(otherMemento);\n                }\n            });\n            return true;\n        }\n        else if (other instanceof reconnect_1.ReconnectCommand) {\n            var otherMemento_1 = other.memento;\n            if (otherMemento_1) {\n                var existingMemento = this.edgeMementi.find(function (edgeMemento) { return edgeMemento.edge.id === otherMemento_1.edge.id; });\n                if (existingMemento) {\n                    existingMemento.after = otherMemento_1.after;\n                }\n                else {\n                    this.edgeMementi.push(otherMemento_1);\n                }\n            }\n            return true;\n        }\n        return false;\n    };\n    var MoveCommand_1;\n    MoveCommand.KIND = 'move';\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry), inversify_1.optional(),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], MoveCommand.prototype, \"edgeRouterRegistry\", void 0);\n    MoveCommand = MoveCommand_1 = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [MoveAction])\n    ], MoveCommand);\n    return MoveCommand;\n}(command_1.MergeableCommand));\nexports.MoveCommand = MoveCommand;\nvar MoveAnimation = /** @class */ (function (_super) {\n    __extends(MoveAnimation, _super);\n    function MoveAnimation(model, elementMoves, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.elementMoves = elementMoves;\n        _this.reverse = reverse;\n        return _this;\n    }\n    MoveAnimation.prototype.tween = function (t) {\n        var _this = this;\n        this.elementMoves.forEach(function (elementMove) {\n            if (_this.reverse) {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.toPosition.x + t * elementMove.fromPosition.x,\n                    y: (1 - t) * elementMove.toPosition.y + t * elementMove.fromPosition.y\n                };\n            }\n            else {\n                elementMove.element.position = {\n                    x: (1 - t) * elementMove.fromPosition.x + t * elementMove.toPosition.x,\n                    y: (1 - t) * elementMove.fromPosition.y + t * elementMove.toPosition.y\n                };\n            }\n        });\n        return this.model;\n    };\n    return MoveAnimation;\n}(animation_1.Animation));\nexports.MoveAnimation = MoveAnimation;\nvar MorphEdgesAnimation = /** @class */ (function (_super) {\n    __extends(MorphEdgesAnimation, _super);\n    function MorphEdgesAnimation(model, originalMementi, context, reverse) {\n        if (reverse === void 0) { reverse = false; }\n        var _this = _super.call(this, context) || this;\n        _this.model = model;\n        _this.reverse = reverse;\n        _this.expanded = [];\n        originalMementi.forEach(function (edgeMemento) {\n            var start = _this.reverse ? edgeMemento.after : edgeMemento.before;\n            var end = _this.reverse ? edgeMemento.before : edgeMemento.after;\n            var startRoute = start.routedPoints;\n            var endRoute = end.routedPoints;\n            var maxRoutingPoints = Math.max(startRoute.length, endRoute.length);\n            _this.expanded.push({\n                startExpandedRoute: _this.growToSize(startRoute, maxRoutingPoints),\n                endExpandedRoute: _this.growToSize(endRoute, maxRoutingPoints),\n                memento: edgeMemento\n            });\n        });\n        return _this;\n    }\n    MorphEdgesAnimation.prototype.midPoint = function (edgeMemento) {\n        var edge = edgeMemento.edge;\n        var source = edgeMemento.edge.source;\n        var target = edgeMemento.edge.target;\n        return geometry_1.linear(smodel_utils_1.translatePoint(geometry_1.center(source.bounds), source.parent, edge.parent), smodel_utils_1.translatePoint(geometry_1.center(target.bounds), target.parent, edge.parent), 0.5);\n    };\n    MorphEdgesAnimation.prototype.start = function () {\n        this.expanded.forEach(function (morph) {\n            morph.memento.edge.removeAll(function (e) { return e instanceof model_2.SRoutingHandle; });\n        });\n        return _super.prototype.start.call(this);\n    };\n    MorphEdgesAnimation.prototype.tween = function (t) {\n        var _this = this;\n        if (t === 1) {\n            this.expanded.forEach(function (morph) {\n                var memento = morph.memento;\n                if (_this.reverse)\n                    memento.before.router.applySnapshot(memento.edge, memento.before);\n                else\n                    memento.after.router.applySnapshot(memento.edge, memento.after);\n            });\n        }\n        else {\n            this.expanded.forEach(function (morph) {\n                var newRoutingPoints = [];\n                // ignore source and target anchor\n                for (var i = 1; i < morph.startExpandedRoute.length - 1; ++i)\n                    newRoutingPoints.push(geometry_1.linear(morph.startExpandedRoute[i], morph.endExpandedRoute[i], t));\n                var closestSnapshot = t < 0.5 ? morph.memento.before : morph.memento.after;\n                var newSnapshot = __assign(__assign({}, closestSnapshot), { routingPoints: newRoutingPoints, routingHandles: [] });\n                closestSnapshot.router.applySnapshot(morph.memento.edge, newSnapshot);\n            });\n        }\n        return this.model;\n    };\n    MorphEdgesAnimation.prototype.growToSize = function (route, targetSize) {\n        var diff = targetSize - route.length;\n        if (diff <= 0)\n            return route;\n        var result = [];\n        result.push(route[0]);\n        var deltaDiff = 1 / (diff + 1);\n        var deltaSmaller = 1 / (route.length - 1);\n        var nextInsertion = 1;\n        for (var i = 1; i < route.length; ++i) {\n            var pos = deltaSmaller * i;\n            var insertions = 0;\n            while (pos > (nextInsertion + insertions) * deltaDiff)\n                ++insertions;\n            nextInsertion += insertions;\n            for (var j = 0; j < insertions; ++j) {\n                var p = geometry_1.linear(route[i - 1], route[i], (j + 1) / (insertions + 1));\n                result.push(p);\n            }\n            result.push(route[i]);\n        }\n        return result;\n    };\n    return MorphEdgesAnimation;\n}(animation_1.Animation));\nexports.MorphEdgesAnimation = MorphEdgesAnimation;\nvar MoveMouseListener = /** @class */ (function (_super) {\n    __extends(MoveMouseListener, _super);\n    function MoveMouseListener() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.hasDragged = false;\n        _this.elementId2startPos = new Map();\n        return _this;\n    }\n    MoveMouseListener.prototype.mouseDown = function (target, event) {\n        var result = [];\n        if (event.button === 0) {\n            var moveable = smodel_utils_1.findParentByFeature(target, model_6.isMoveable);\n            var isRoutingHandle = target instanceof model_2.SRoutingHandle;\n            if (moveable !== undefined || isRoutingHandle || create_on_drag_1.isCreatingOnDrag(target)) {\n                this.startDragPosition = { x: event.pageX, y: event.pageY };\n            }\n            else {\n                this.startDragPosition = undefined;\n            }\n            this.hasDragged = false;\n            if (create_on_drag_1.isCreatingOnDrag(target)) {\n                result.push(new select_1.SelectAllAction(false));\n                result.push(target.createAction(model_2.edgeInProgressID));\n                result.push(new select_1.SelectAction([model_2.edgeInProgressID], []));\n                result.push(new edit_routing_1.SwitchEditModeAction([model_2.edgeInProgressID], []));\n                result.push(new select_1.SelectAction([model_2.edgeInProgressTargetHandleID], []));\n                result.push(new edit_routing_1.SwitchEditModeAction([model_2.edgeInProgressTargetHandleID], []));\n            }\n            else if (isRoutingHandle) {\n                result.push(new edit_routing_1.SwitchEditModeAction([target.id], []));\n            }\n        }\n        return result;\n    };\n    MoveMouseListener.prototype.mouseMove = function (target, event) {\n        var result = [];\n        if (event.buttons === 0)\n            this.mouseUp(target, event);\n        else if (this.startDragPosition) {\n            if (this.elementId2startPos.size === 0) {\n                this.collectStartPositions(target.root);\n            }\n            this.hasDragged = true;\n            var moveAction = this.getElementMoves(target, event, false);\n            if (moveAction)\n                result.push(moveAction);\n        }\n        return result;\n    };\n    MoveMouseListener.prototype.collectStartPositions = function (root) {\n        var _this = this;\n        var selectedElements = new Set(root.index.all()\n            .filter(function (element) { return model_4.isSelectable(element) && element.selected; }));\n        selectedElements.forEach(function (element) {\n            if (!_this.isChildOfSelected(selectedElements, element)) {\n                if (model_6.isMoveable(element))\n                    _this.elementId2startPos.set(element.id, element.position);\n                else if (element instanceof model_2.SRoutingHandle) {\n                    var position = _this.getHandlePosition(element);\n                    if (position)\n                        _this.elementId2startPos.set(element.id, position);\n                }\n            }\n        });\n    };\n    MoveMouseListener.prototype.isChildOfSelected = function (selectedElements, element) {\n        while (element instanceof smodel_1.SChildElement) {\n            element = element.parent;\n            if (model_6.isMoveable(element) && selectedElements.has(element)) {\n                return true;\n            }\n        }\n        return false;\n    };\n    MoveMouseListener.prototype.getElementMoves = function (target, event, isFinished) {\n        var _this = this;\n        if (!this.startDragPosition)\n            return undefined;\n        var elementMoves = [];\n        var viewport = smodel_utils_1.findParentByFeature(target, model_5.isViewport);\n        var zoom = viewport ? viewport.zoom : 1;\n        var delta = {\n            x: (event.pageX - this.startDragPosition.x) / zoom,\n            y: (event.pageY - this.startDragPosition.y) / zoom\n        };\n        this.elementId2startPos.forEach(function (startPosition, elementId) {\n            var element = target.root.index.getById(elementId);\n            if (element) {\n                var toPosition = _this.snap({\n                    x: startPosition.x + delta.x,\n                    y: startPosition.y + delta.y\n                }, element, !event.shiftKey);\n                if (model_6.isMoveable(element)) {\n                    elementMoves.push({\n                        elementId: element.id,\n                        fromPosition: {\n                            x: element.position.x,\n                            y: element.position.y\n                        },\n                        toPosition: toPosition\n                    });\n                }\n                else if (element instanceof model_2.SRoutingHandle) {\n                    var point = _this.getHandlePosition(element);\n                    if (point !== undefined) {\n                        elementMoves.push({\n                            elementId: element.id,\n                            fromPosition: point,\n                            toPosition: toPosition\n                        });\n                    }\n                }\n            }\n        });\n        if (elementMoves.length > 0)\n            return new MoveAction(elementMoves, false, isFinished);\n        else\n            return undefined;\n    };\n    MoveMouseListener.prototype.snap = function (position, element, isSnap) {\n        if (isSnap && this.snapper)\n            return this.snapper.snap(position, element);\n        else\n            return position;\n    };\n    MoveMouseListener.prototype.getHandlePosition = function (handle) {\n        if (this.edgeRouterRegistry) {\n            var parent_1 = handle.parent;\n            if (!(parent_1 instanceof model_2.SRoutableElement))\n                return undefined;\n            var router = this.edgeRouterRegistry.get(parent_1.routerKind);\n            var route = router.route(parent_1);\n            return router.getHandlePosition(parent_1, route, handle);\n        }\n        return undefined;\n    };\n    MoveMouseListener.prototype.mouseEnter = function (target, event) {\n        if (target instanceof smodel_1.SModelRoot && event.buttons === 0 && !this.startDragPosition)\n            this.mouseUp(target, event);\n        return [];\n    };\n    MoveMouseListener.prototype.mouseUp = function (target, event) {\n        var _this = this;\n        var result = [];\n        var hasReconnected = false;\n        if (this.startDragPosition) {\n            var moveAction = this.getElementMoves(target, event, true);\n            if (moveAction)\n                result.push(moveAction);\n            target.root.index.all()\n                .forEach(function (element) {\n                if (element instanceof model_2.SRoutingHandle) {\n                    var parent_2 = element.parent;\n                    if (parent_2 instanceof model_2.SRoutableElement && element.danglingAnchor) {\n                        var handlePos = _this.getHandlePosition(element);\n                        if (handlePos) {\n                            var handlePosAbs = smodel_utils_1.translatePoint(handlePos, element.parent, element.root);\n                            var newEnd = model_1.findChildrenAtPosition(target.root, handlePosAbs)\n                                .find(function (e) { return model_2.isConnectable(e) && e.canConnect(parent_2, element.kind); });\n                            if (newEnd && _this.hasDragged) {\n                                result.push(new reconnect_1.ReconnectAction(element.parent.id, element.kind === 'source' ? newEnd.id : parent_2.sourceId, element.kind === 'target' ? newEnd.id : parent_2.targetId));\n                                hasReconnected = true;\n                            }\n                        }\n                    }\n                    if (element.editMode)\n                        result.push(new edit_routing_1.SwitchEditModeAction([], [element.id]));\n                }\n            });\n        }\n        if (!hasReconnected) {\n            var edgeInProgress = target.root.index.getById(model_2.edgeInProgressID);\n            if (edgeInProgress instanceof smodel_1.SChildElement) {\n                var deleteIds_1 = [];\n                deleteIds_1.push(model_2.edgeInProgressID);\n                edgeInProgress.children.forEach(function (c) {\n                    if (c instanceof model_2.SRoutingHandle && c.danglingAnchor)\n                        deleteIds_1.push(c.danglingAnchor.id);\n                });\n                result.push(new delete_1.DeleteElementAction(deleteIds_1));\n            }\n        }\n        if (this.hasDragged)\n            result.push(new commit_model_1.CommitModelAction());\n        this.hasDragged = false;\n        this.startDragPosition = undefined;\n        this.elementId2startPos.clear();\n        return result;\n    };\n    MoveMouseListener.prototype.decorate = function (vnode, element) {\n        return vnode;\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry), inversify_1.optional(),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], MoveMouseListener.prototype, \"edgeRouterRegistry\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ISnapper), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], MoveMouseListener.prototype, \"snapper\", void 0);\n    return MoveMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.MoveMouseListener = MoveMouseListener;\nvar LocationPostprocessor = /** @class */ (function () {\n    function LocationPostprocessor() {\n    }\n    LocationPostprocessor.prototype.decorate = function (vnode, element) {\n        if (model_3.isEdgeLayoutable(element) && element.parent instanceof sgraph_1.SEdge) {\n            // The element is handled by EdgeLayoutDecorator\n            return vnode;\n        }\n        var translate = '';\n        if (model_6.isLocateable(element) && element instanceof smodel_1.SChildElement && element.parent !== undefined) {\n            var pos = element.position;\n            if (pos.x !== 0 || pos.y !== 0) {\n                translate = 'translate(' + pos.x + ', ' + pos.y + ')';\n            }\n        }\n        if (model_1.isAlignable(element)) {\n            var ali = element.alignment;\n            if (ali.x !== 0 || ali.y !== 0) {\n                if (translate.length > 0) {\n                    translate += ' ';\n                }\n                translate += 'translate(' + ali.x + ', ' + ali.y + ')';\n            }\n        }\n        if (translate.length > 0) {\n            vnode_utils_1.setAttr(vnode, 'transform', translate);\n        }\n        return vnode;\n    };\n    LocationPostprocessor.prototype.postUpdate = function () {\n    };\n    LocationPostprocessor = __decorate([\n        inversify_1.injectable()\n    ], LocationPostprocessor);\n    return LocationPostprocessor;\n}());\nexports.LocationPostprocessor = LocationPostprocessor;\n//# sourceMappingURL=move.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar model_1 = require(\"../bounds/model\");\n/**\n * A simple snapper that snaps the center of nodes and routing points to a grid.\n */\nvar CenterGridSnapper = /** @class */ (function () {\n    function CenterGridSnapper() {\n    }\n    Object.defineProperty(CenterGridSnapper.prototype, \"gridX\", {\n        get: function () {\n            return 10;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(CenterGridSnapper.prototype, \"gridY\", {\n        get: function () {\n            return 10;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    CenterGridSnapper.prototype.snap = function (position, element) {\n        if (element && model_1.isBoundsAware(element))\n            return {\n                x: Math.round((position.x + 0.5 * element.bounds.width) / this.gridX) * this.gridX - 0.5 * element.bounds.width,\n                y: Math.round((position.y + 0.5 * element.bounds.height) / this.gridY) * this.gridY - 0.5 * element.bounds.height\n            };\n        else\n            return {\n                x: Math.round(position.x / this.gridX) * this.gridX,\n                y: Math.round(position.y / this.gridY) * this.gridY\n            };\n    };\n    CenterGridSnapper = __decorate([\n        inversify_1.injectable()\n    ], CenterGridSnapper);\n    return CenterGridSnapper;\n}());\nexports.CenterGridSnapper = CenterGridSnapper;\n//# sourceMappingURL=snap.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nameFeature = Symbol('nameableFeature');\nfunction isNameable(element) {\n    return element.hasFeature(exports.nameFeature);\n}\nexports.isNameable = isNameable;\nfunction name(element) {\n    if (isNameable(element)) {\n        return element.name;\n    }\n    else {\n        return undefined;\n    }\n}\nexports.name = name;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar open_1 = require(\"./open\");\nvar openModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.MouseListener).to(open_1.OpenMouseListener);\n});\nexports.default = openModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.openFeature = Symbol('openFeature');\nfunction isOpenable(element) {\n    return element.hasFeature(exports.openFeature);\n}\nexports.isOpenable = isOpenable;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar model_1 = require(\"./model\");\nvar OpenAction = /** @class */ (function () {\n    function OpenAction(elementId) {\n        this.elementId = elementId;\n        this.kind = OpenAction.KIND;\n    }\n    OpenAction.KIND = 'open';\n    return OpenAction;\n}());\nexports.OpenAction = OpenAction;\nvar OpenMouseListener = /** @class */ (function (_super) {\n    __extends(OpenMouseListener, _super);\n    function OpenMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OpenMouseListener.prototype.doubleClick = function (target, event) {\n        var openableTarget = smodel_utils_1.findParentByFeature(target, model_1.isOpenable);\n        if (openableTarget !== undefined) {\n            return [new OpenAction(openableTarget.id)];\n        }\n        return [];\n    };\n    return OpenMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.OpenMouseListener = OpenMouseListener;\n//# sourceMappingURL=open.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar registry_1 = require(\"../../utils/registry\");\nexports.DIAMOND_ANCHOR_KIND = 'diamond';\nexports.ELLIPTIC_ANCHOR_KIND = 'elliptic';\nexports.RECTANGULAR_ANCHOR_KIND = 'rectangular';\nvar AnchorComputerRegistry = /** @class */ (function (_super) {\n    __extends(AnchorComputerRegistry, _super);\n    function AnchorComputerRegistry(anchors) {\n        var _this = _super.call(this) || this;\n        anchors.forEach(function (anchor) { return _this.register(anchor.kind, anchor); });\n        return _this;\n    }\n    Object.defineProperty(AnchorComputerRegistry.prototype, \"defaultAnchorKind\", {\n        get: function () {\n            return exports.RECTANGULAR_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    AnchorComputerRegistry.prototype.get = function (routerKind, anchorKind) {\n        return _super.prototype.get.call(this, routerKind + \":\" + (anchorKind || this.defaultAnchorKind));\n    };\n    AnchorComputerRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IAnchorComputer)),\n        __metadata(\"design:paramtypes\", [Array])\n    ], AnchorComputerRegistry);\n    return AnchorComputerRegistry;\n}(registry_1.InstanceRegistry));\nexports.AnchorComputerRegistry = AnchorComputerRegistry;\n//# sourceMappingURL=anchor.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar manhattan_edge_router_1 = require(\"./manhattan-edge-router\");\nvar polyline_edge_router_1 = require(\"./polyline-edge-router\");\nvar manhattan_anchors_1 = require(\"./manhattan-anchors\");\nvar polyline_anchors_1 = require(\"./polyline-anchors\");\nvar anchor_1 = require(\"./anchor\");\nvar routing_1 = require(\"./routing\");\nvar routingModule = new inversify_1.ContainerModule(function (bind) {\n    bind(routing_1.EdgeRouterRegistry).toSelf().inSingletonScope();\n    bind(anchor_1.AnchorComputerRegistry).toSelf().inSingletonScope();\n    bind(manhattan_edge_router_1.ManhattanEdgeRouter).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IEdgeRouter).toService(manhattan_edge_router_1.ManhattanEdgeRouter);\n    bind(types_1.TYPES.IAnchorComputer).to(manhattan_anchors_1.ManhattanEllipticAnchor).inSingletonScope();\n    bind(types_1.TYPES.IAnchorComputer).to(manhattan_anchors_1.ManhattanRectangularAnchor).inSingletonScope();\n    bind(types_1.TYPES.IAnchorComputer).to(manhattan_anchors_1.ManhattanDiamondAnchor).inSingletonScope();\n    bind(polyline_edge_router_1.PolylineEdgeRouter).toSelf().inSingletonScope();\n    bind(types_1.TYPES.IEdgeRouter).toService(polyline_edge_router_1.PolylineEdgeRouter);\n    bind(types_1.TYPES.IAnchorComputer).to(polyline_anchors_1.EllipseAnchor);\n    bind(types_1.TYPES.IAnchorComputer).to(polyline_anchors_1.RectangleAnchor);\n    bind(types_1.TYPES.IAnchorComputer).to(polyline_anchors_1.DiamondAnchor);\n});\nexports.default = routingModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"../routing/model\");\nvar anchor_1 = require(\"./anchor\");\nvar model_2 = require(\"./model\");\nvar Side;\n(function (Side) {\n    Side[Side[\"RIGHT\"] = 0] = \"RIGHT\";\n    Side[Side[\"LEFT\"] = 1] = \"LEFT\";\n    Side[Side[\"TOP\"] = 2] = \"TOP\";\n    Side[Side[\"BOTTOM\"] = 3] = \"BOTTOM\";\n})(Side = exports.Side || (exports.Side = {}));\nvar DefaultAnchors = /** @class */ (function () {\n    function DefaultAnchors(element, edgeParent, kind) {\n        this.element = element;\n        this.kind = kind;\n        var bounds = element.bounds;\n        this.bounds = smodel_utils_1.translateBounds(bounds, element.parent, edgeParent);\n        this.left = { x: this.bounds.x, y: this.bounds.y + 0.5 * this.bounds.height, kind: kind };\n        this.right = { x: this.bounds.x + this.bounds.width, y: this.bounds.y + 0.5 * this.bounds.height, kind: kind };\n        this.top = { x: this.bounds.x + 0.5 * this.bounds.width, y: this.bounds.y, kind: kind };\n        this.bottom = { x: this.bounds.x + 0.5 * this.bounds.width, y: this.bounds.y + this.bounds.height, kind: kind };\n    }\n    DefaultAnchors.prototype.get = function (side) {\n        return this[Side[side].toLowerCase()];\n    };\n    DefaultAnchors.prototype.getNearestSide = function (point) {\n        var leftDistance = geometry_1.euclideanDistance(point, this.left);\n        var rightDistance = geometry_1.euclideanDistance(point, this.right);\n        var topDistance = geometry_1.euclideanDistance(point, this.top);\n        var bottomDistance = geometry_1.euclideanDistance(point, this.bottom);\n        var currentNearestSide = Side.LEFT;\n        var currentMinDist = leftDistance;\n        if (rightDistance < currentMinDist) {\n            currentMinDist = rightDistance;\n            currentNearestSide = Side.RIGHT;\n        }\n        if (topDistance < currentMinDist) {\n            currentMinDist = topDistance;\n            currentNearestSide = Side.TOP;\n        }\n        if (bottomDistance < currentMinDist) {\n            currentMinDist = bottomDistance;\n            currentNearestSide = Side.BOTTOM;\n        }\n        return currentNearestSide;\n    };\n    return DefaultAnchors;\n}());\nexports.DefaultAnchors = DefaultAnchors;\nvar LinearEdgeRouter = /** @class */ (function () {\n    function LinearEdgeRouter() {\n    }\n    LinearEdgeRouter.prototype.pointAt = function (edge, t) {\n        var segments = this.calculateSegment(edge, t);\n        if (!segments)\n            return undefined;\n        var segmentStart = segments.segmentStart, segmentEnd = segments.segmentEnd, lambda = segments.lambda;\n        return geometry_1.linear(segmentStart, segmentEnd, lambda);\n    };\n    LinearEdgeRouter.prototype.derivativeAt = function (edge, t) {\n        var segments = this.calculateSegment(edge, t);\n        if (!segments)\n            return undefined;\n        var segmentStart = segments.segmentStart, segmentEnd = segments.segmentEnd;\n        return {\n            x: segmentEnd.x - segmentStart.x,\n            y: segmentEnd.y - segmentStart.y\n        };\n    };\n    LinearEdgeRouter.prototype.calculateSegment = function (edge, t) {\n        if (t < 0 || t > 1)\n            return undefined;\n        var routedPoints = this.route(edge);\n        if (routedPoints.length < 2)\n            return undefined;\n        var segmentLengths = [];\n        var totalLength = 0;\n        for (var i = 0; i < routedPoints.length - 1; ++i) {\n            segmentLengths[i] = geometry_1.euclideanDistance(routedPoints[i], routedPoints[i + 1]);\n            totalLength += segmentLengths[i];\n        }\n        var currentLenght = 0;\n        var tAsLenght = t * totalLength;\n        for (var i = 0; i < routedPoints.length - 1; ++i) {\n            var newLength = currentLenght + segmentLengths[i];\n            // avoid division by (almost) zero\n            if (segmentLengths[i] > 1E-8) {\n                if (newLength >= tAsLenght) {\n                    var lambda = Math.max(0, (tAsLenght - currentLenght)) / segmentLengths[i];\n                    return {\n                        segmentStart: routedPoints[i],\n                        segmentEnd: routedPoints[i + 1],\n                        lambda: lambda\n                    };\n                }\n            }\n            currentLenght = newLength;\n        }\n        return {\n            segmentEnd: routedPoints.pop(),\n            segmentStart: routedPoints.pop(),\n            lambda: 1\n        };\n    };\n    LinearEdgeRouter.prototype.addHandle = function (edge, kind, type, routingPointIndex) {\n        var handle = new model_1.SRoutingHandle();\n        handle.kind = kind;\n        handle.pointIndex = routingPointIndex;\n        handle.type = type;\n        if (kind === 'target' && edge.id === model_1.edgeInProgressID)\n            handle.id = model_1.edgeInProgressTargetHandleID;\n        edge.add(handle);\n        return handle;\n    };\n    LinearEdgeRouter.prototype.getHandlePosition = function (edge, route, handle) {\n        switch (handle.kind) {\n            case 'source':\n                if (edge.source instanceof model_1.SDanglingAnchor)\n                    return edge.source.position;\n                else\n                    return route[0];\n            case 'target':\n                if (edge.target instanceof model_1.SDanglingAnchor)\n                    return edge.target.position;\n                else {\n                    return route[route.length - 1];\n                }\n            default:\n                var position = this.getInnerHandlePosition(edge, route, handle);\n                if (position !== undefined)\n                    return position;\n                if (handle.pointIndex >= 0 && handle.pointIndex < edge.routingPoints.length)\n                    return edge.routingPoints[handle.pointIndex];\n        }\n        return undefined;\n    };\n    LinearEdgeRouter.prototype.findRouteSegment = function (edge, route, handleIndex) {\n        var getIndex = function (rp) {\n            if (rp.pointIndex !== undefined)\n                return rp.pointIndex;\n            else if (rp.kind === 'target')\n                return edge.routingPoints.length;\n            else\n                return -2;\n        };\n        var start, end;\n        for (var _i = 0, route_1 = route; _i < route_1.length; _i++) {\n            var rp = route_1[_i];\n            var i = getIndex(rp);\n            if (i <= handleIndex && (start === undefined || i > getIndex(start)))\n                start = rp;\n            if (i > handleIndex && (end === undefined || i < getIndex(end)))\n                end = rp;\n        }\n        return { start: start, end: end };\n    };\n    LinearEdgeRouter.prototype.getTranslatedAnchor = function (connectable, refPoint, refContainer, edge, anchorCorrection) {\n        if (anchorCorrection === void 0) { anchorCorrection = 0; }\n        var translatedRefPoint = smodel_utils_1.translatePoint(refPoint, refContainer, connectable.parent);\n        var anchorComputer = this.getAnchorComputer(connectable);\n        var strokeCorrection = 0.5 * connectable.strokeWidth;\n        var anchor = anchorComputer.getAnchor(connectable, translatedRefPoint, anchorCorrection + strokeCorrection);\n        return smodel_utils_1.translatePoint(anchor, connectable.parent, edge.parent);\n    };\n    LinearEdgeRouter.prototype.getAnchorComputer = function (connectable) {\n        return this.anchorRegistry.get(this.kind, connectable.anchorKind);\n    };\n    LinearEdgeRouter.prototype.applyHandleMoves = function (edge, moves) {\n        var remainingMoves = moves.slice();\n        moves.forEach(function (move) {\n            var handle = move.handle;\n            if (handle.kind === 'source' && !(edge.source instanceof model_1.SDanglingAnchor)) {\n                // detach source\n                var anchor = new model_1.SDanglingAnchor();\n                anchor.id = edge.id + '_dangling-source';\n                anchor.original = edge.source;\n                anchor.position = move.toPosition;\n                handle.root.add(anchor);\n                handle.danglingAnchor = anchor;\n                edge.sourceId = anchor.id;\n            }\n            else if (handle.kind === 'target' && !(edge.target instanceof model_1.SDanglingAnchor)) {\n                // detach target\n                var anchor = new model_1.SDanglingAnchor();\n                anchor.id = edge.id + '_dangling-target';\n                anchor.original = edge.target;\n                anchor.position = move.toPosition;\n                handle.root.add(anchor);\n                handle.danglingAnchor = anchor;\n                edge.targetId = anchor.id;\n            }\n            if (handle.danglingAnchor) {\n                handle.danglingAnchor.position = move.toPosition;\n                remainingMoves.splice(remainingMoves.indexOf(move), 1);\n            }\n        });\n        if (remainingMoves.length > 0)\n            this.applyInnerHandleMoves(edge, remainingMoves);\n        this.cleanupRoutingPoints(edge, edge.routingPoints, true, true);\n    };\n    LinearEdgeRouter.prototype.cleanupRoutingPoints = function (edge, routingPoints, updateHandles, addRoutingPoints) {\n        var sourceAnchors = new DefaultAnchors(edge.source, edge.parent, \"source\");\n        var targetAnchors = new DefaultAnchors(edge.target, edge.parent, \"target\");\n        this.resetRoutingPointsOnReconnect(edge, routingPoints, updateHandles, sourceAnchors, targetAnchors);\n    };\n    LinearEdgeRouter.prototype.resetRoutingPointsOnReconnect = function (edge, routingPoints, updateHandles, sourceAnchors, targetAnchors) {\n        if (routingPoints.length === 0 || edge.source instanceof model_1.SDanglingAnchor || edge.target instanceof model_1.SDanglingAnchor) {\n            var options = this.getOptions(edge);\n            var corners = this.calculateDefaultCorners(edge, sourceAnchors, targetAnchors, options);\n            routingPoints.splice.apply(routingPoints, __spreadArrays([0, routingPoints.length], corners));\n            if (updateHandles) {\n                var maxPointIndex_1 = -2;\n                edge.children.forEach(function (child) {\n                    if (child instanceof model_1.SRoutingHandle) {\n                        if (child.kind === 'target')\n                            child.pointIndex = routingPoints.length;\n                        else if (child.kind === 'line' && child.pointIndex >= routingPoints.length)\n                            edge.remove(child);\n                        else\n                            maxPointIndex_1 = Math.max(child.pointIndex, maxPointIndex_1);\n                    }\n                });\n                for (var i = maxPointIndex_1; i < routingPoints.length - 1; ++i)\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', i);\n            }\n            return true;\n        }\n        return false;\n    };\n    LinearEdgeRouter.prototype.applyReconnect = function (edge, newSourceId, newTargetId) {\n        var hasChanged = false;\n        if (newSourceId) {\n            var newSource = edge.root.index.getById(newSourceId);\n            if (newSource instanceof model_2.SConnectableElement) {\n                edge.sourceId = newSource.id;\n                hasChanged = true;\n            }\n        }\n        if (newTargetId) {\n            var newTarget = edge.root.index.getById(newTargetId);\n            if (newTarget instanceof model_2.SConnectableElement) {\n                edge.targetId = newTarget.id;\n                hasChanged = true;\n            }\n        }\n        if (hasChanged) {\n            // reset attached elements in index\n            edge.index.remove(edge);\n            edge.index.add(edge);\n            if (this.getSelfEdgeIndex(edge) > -1) {\n                edge.routingPoints = [];\n                this.cleanupRoutingPoints(edge, edge.routingPoints, true, true);\n            }\n        }\n    };\n    LinearEdgeRouter.prototype.takeSnapshot = function (edge) {\n        return {\n            routingPoints: edge.routingPoints.slice(),\n            routingHandles: edge.children\n                .filter(function (child) { return child instanceof model_1.SRoutingHandle; })\n                .map(function (child) { return child; }),\n            routedPoints: this.route(edge),\n            router: this,\n            source: edge.source,\n            target: edge.target\n        };\n    };\n    LinearEdgeRouter.prototype.applySnapshot = function (edge, snapshot) {\n        edge.routingPoints = snapshot.routingPoints;\n        edge.removeAll(function (child) { return child instanceof model_1.SRoutingHandle; });\n        edge.routerKind = snapshot.router.kind;\n        snapshot.routingHandles.forEach(function (handle) { return edge.add(handle); });\n        if (snapshot.source)\n            edge.sourceId = snapshot.source.id;\n        if (snapshot.target)\n            edge.targetId = snapshot.target.id;\n        // update index\n        edge.root.index.remove(edge);\n        edge.root.index.add(edge);\n    };\n    LinearEdgeRouter.prototype.calculateDefaultCorners = function (edge, sourceAnchors, targetAnchors, options) {\n        var selfEdgeIndex = this.getSelfEdgeIndex(edge);\n        if (selfEdgeIndex >= 0) {\n            var standardDist = options.standardDistance;\n            var delta = options.selfEdgeOffset * Math.min(sourceAnchors.bounds.width, sourceAnchors.bounds.height);\n            switch (selfEdgeIndex % 4) {\n                case 0:\n                    return [\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.RIGHT).y + delta },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.BOTTOM).x + delta, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                    ];\n                case 1:\n                    return [\n                        { x: sourceAnchors.get(Side.BOTTOM).x - delta, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.BOTTOM).y + standardDist },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.LEFT).y + delta },\n                    ];\n                case 2:\n                    return [\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.LEFT).y - delta },\n                        { x: sourceAnchors.get(Side.LEFT).x - standardDist, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.TOP).x - delta, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                    ];\n                case 3:\n                    return [\n                        { x: sourceAnchors.get(Side.TOP).x + delta, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.TOP).y - standardDist },\n                        { x: sourceAnchors.get(Side.RIGHT).x + standardDist, y: sourceAnchors.get(Side.RIGHT).y - delta },\n                    ];\n            }\n        }\n        return [];\n    };\n    LinearEdgeRouter.prototype.getSelfEdgeIndex = function (edge) {\n        if (!edge.source || edge.source !== edge.target)\n            return -1;\n        return edge.source.outgoingEdges\n            .filter(function (otherEdge) { return otherEdge.target === edge.source; })\n            .indexOf(edge);\n    };\n    __decorate([\n        inversify_1.inject(anchor_1.AnchorComputerRegistry),\n        __metadata(\"design:type\", anchor_1.AnchorComputerRegistry)\n    ], LinearEdgeRouter.prototype, \"anchorRegistry\", void 0);\n    LinearEdgeRouter = __decorate([\n        inversify_1.injectable()\n    ], LinearEdgeRouter);\n    return LinearEdgeRouter;\n}());\nexports.LinearEdgeRouter = LinearEdgeRouter;\n//# sourceMappingURL=linear-edge-router.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar anchor_1 = require(\"./anchor\");\nvar manhattan_edge_router_1 = require(\"./manhattan-edge-router\");\nvar inversify_1 = require(\"inversify\");\nvar ManhattanRectangularAnchor = /** @class */ (function () {\n    function ManhattanRectangularAnchor() {\n    }\n    ManhattanRectangularAnchor_1 = ManhattanRectangularAnchor;\n    Object.defineProperty(ManhattanRectangularAnchor.prototype, \"kind\", {\n        get: function () {\n            return ManhattanRectangularAnchor_1.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ManhattanRectangularAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        var b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        var bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        if (refPoint.x >= bounds.x && bounds.x + bounds.width >= refPoint.x) {\n            if (refPoint.y < bounds.y + 0.5 * bounds.height)\n                return { x: refPoint.x, y: bounds.y };\n            else\n                return { x: refPoint.x, y: bounds.y + bounds.height };\n        }\n        if (refPoint.y >= bounds.y && bounds.y + bounds.height >= refPoint.y) {\n            if (refPoint.x < bounds.x + 0.5 * bounds.width)\n                return { x: bounds.x, y: refPoint.y };\n            else\n                return { x: bounds.x + bounds.width, y: refPoint.y };\n        }\n        return geometry_1.center(bounds);\n    };\n    var ManhattanRectangularAnchor_1;\n    ManhattanRectangularAnchor.KIND = manhattan_edge_router_1.ManhattanEdgeRouter.KIND + ':' + anchor_1.RECTANGULAR_ANCHOR_KIND;\n    ManhattanRectangularAnchor = ManhattanRectangularAnchor_1 = __decorate([\n        inversify_1.injectable()\n    ], ManhattanRectangularAnchor);\n    return ManhattanRectangularAnchor;\n}());\nexports.ManhattanRectangularAnchor = ManhattanRectangularAnchor;\nvar ManhattanDiamondAnchor = /** @class */ (function () {\n    function ManhattanDiamondAnchor() {\n    }\n    ManhattanDiamondAnchor_1 = ManhattanDiamondAnchor;\n    Object.defineProperty(ManhattanDiamondAnchor.prototype, \"kind\", {\n        get: function () {\n            return ManhattanDiamondAnchor_1.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ManhattanDiamondAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        var bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        var c = geometry_1.center(bounds);\n        var outline = undefined;\n        var refLine = undefined;\n        if (refPoint.x >= bounds.x && refPoint.x <= bounds.x + bounds.width) {\n            if (bounds.x + 0.5 * bounds.width >= refPoint.x) {\n                refLine = new geometry_1.PointToPointLine(refPoint, { x: refPoint.x, y: c.y });\n                if (refPoint.y < c.y)\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            }\n            else {\n                refLine = new geometry_1.PointToPointLine(refPoint, { x: refPoint.x, y: c.y });\n                if (refPoint.y < c.y)\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            }\n        }\n        else if (refPoint.y >= bounds.y && refPoint.y <= bounds.y + bounds.height) {\n            if (bounds.y + 0.5 * bounds.height >= refPoint.y) {\n                refLine = new geometry_1.PointToPointLine(refPoint, { x: c.x, y: refPoint.y });\n                if (refPoint.x < c.x)\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y });\n                else\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y });\n            }\n            else {\n                refLine = new geometry_1.PointToPointLine(refPoint, { x: c.x, y: refPoint.y });\n                if (refPoint.x < c.x)\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n                else\n                    outline = new geometry_1.PointToPointLine({ x: bounds.x + bounds.width, y: c.y }, { x: c.x, y: bounds.y + bounds.height });\n            }\n        }\n        if (!!refLine && !!outline)\n            return geometry_1.intersection(outline, refLine);\n        else\n            return c;\n    };\n    var ManhattanDiamondAnchor_1;\n    ManhattanDiamondAnchor.KIND = manhattan_edge_router_1.ManhattanEdgeRouter.KIND + ':' + anchor_1.DIAMOND_ANCHOR_KIND;\n    ManhattanDiamondAnchor = ManhattanDiamondAnchor_1 = __decorate([\n        inversify_1.injectable()\n    ], ManhattanDiamondAnchor);\n    return ManhattanDiamondAnchor;\n}());\nexports.ManhattanDiamondAnchor = ManhattanDiamondAnchor;\nvar ManhattanEllipticAnchor = /** @class */ (function () {\n    function ManhattanEllipticAnchor() {\n    }\n    ManhattanEllipticAnchor_1 = ManhattanEllipticAnchor;\n    Object.defineProperty(ManhattanEllipticAnchor.prototype, \"kind\", {\n        get: function () {\n            return ManhattanEllipticAnchor_1.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ManhattanEllipticAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var b = connectable.bounds;\n        if (b.width <= 0 || b.height <= 0) {\n            return b;\n        }\n        var bounds = {\n            x: b.x - offset,\n            y: b.y - offset,\n            width: b.width + 2 * offset,\n            height: b.height + 2 * offset\n        };\n        var c = geometry_1.center(bounds);\n        var refRelative = geometry_1.subtract(refPoint, c);\n        var x = c.x;\n        var y = c.y;\n        if (refPoint.x >= bounds.x && bounds.x + bounds.width >= refPoint.x) {\n            x += refRelative.x;\n            var dy = 0.5 * bounds.height * Math.sqrt(1 - (refRelative.x * refRelative.x) / (0.25 * bounds.width * bounds.width));\n            if (refRelative.y < 0)\n                y -= dy;\n            else\n                y += dy;\n        }\n        else if (refPoint.y >= bounds.y && bounds.y + bounds.height >= refPoint.y) {\n            y += refRelative.y;\n            var dx = 0.5 * bounds.width * Math.sqrt(1 - (refRelative.y * refRelative.y) / (0.25 * bounds.height * bounds.height));\n            if (refRelative.x < 0)\n                x -= dx;\n            else\n                x += dx;\n        }\n        return { x: x, y: y };\n    };\n    var ManhattanEllipticAnchor_1;\n    ManhattanEllipticAnchor.KIND = manhattan_edge_router_1.ManhattanEdgeRouter.KIND + ':' + anchor_1.ELLIPTIC_ANCHOR_KIND;\n    ManhattanEllipticAnchor = ManhattanEllipticAnchor_1 = __decorate([\n        inversify_1.injectable()\n    ], ManhattanEllipticAnchor);\n    return ManhattanEllipticAnchor;\n}());\nexports.ManhattanEllipticAnchor = ManhattanEllipticAnchor;\n//# sourceMappingURL=manhattan-anchors.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar linear_edge_router_1 = require(\"./linear-edge-router\");\nvar model_1 = require(\"./model\");\nvar ManhattanEdgeRouter = /** @class */ (function (_super) {\n    __extends(ManhattanEdgeRouter, _super);\n    function ManhattanEdgeRouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(ManhattanEdgeRouter.prototype, \"kind\", {\n        get: function () {\n            return ManhattanEdgeRouter.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ManhattanEdgeRouter.prototype.getOptions = function (edge) {\n        return {\n            standardDistance: 20,\n            minimalPointDistance: 3,\n            selfEdgeOffset: 0.25\n        };\n    };\n    ManhattanEdgeRouter.prototype.route = function (edge) {\n        if (!edge.source || !edge.target)\n            return [];\n        var routedCorners = this.createRoutedCorners(edge);\n        var sourceRefPoint = routedCorners[0]\n            || smodel_utils_1.translatePoint(geometry_1.center(edge.target.bounds), edge.target.parent, edge.parent);\n        var sourceAnchor = this.getTranslatedAnchor(edge.source, sourceRefPoint, edge.parent, edge, edge.sourceAnchorCorrection);\n        var targetRefPoint = routedCorners[routedCorners.length - 1]\n            || smodel_utils_1.translatePoint(geometry_1.center(edge.source.bounds), edge.source.parent, edge.parent);\n        var targetAnchor = this.getTranslatedAnchor(edge.target, targetRefPoint, edge.parent, edge, edge.targetAnchorCorrection);\n        if (!sourceAnchor || !targetAnchor)\n            return [];\n        var routedPoints = [];\n        routedPoints.push(__assign({ kind: 'source' }, sourceAnchor));\n        routedCorners.forEach(function (corner) { return routedPoints.push(corner); });\n        routedPoints.push(__assign({ kind: 'target' }, targetAnchor));\n        return routedPoints;\n    };\n    ManhattanEdgeRouter.prototype.createRoutedCorners = function (edge) {\n        var sourceAnchors = new linear_edge_router_1.DefaultAnchors(edge.source, edge.parent, 'source');\n        var targetAnchors = new linear_edge_router_1.DefaultAnchors(edge.target, edge.parent, 'target');\n        if (edge.routingPoints.length > 0) {\n            var routingPointsCopy = edge.routingPoints.slice();\n            this.cleanupRoutingPoints(edge, routingPointsCopy, false, true);\n            if (routingPointsCopy.length > 0)\n                return routingPointsCopy.map(function (routingPoint, index) {\n                    return __assign({ kind: 'linear', pointIndex: index }, routingPoint);\n                });\n        }\n        var options = this.getOptions(edge);\n        var corners = this.calculateDefaultCorners(edge, sourceAnchors, targetAnchors, options);\n        return corners.map(function (corner) {\n            return __assign({ kind: 'linear' }, corner);\n        });\n    };\n    ManhattanEdgeRouter.prototype.createRoutingHandles = function (edge) {\n        var routedPoints = this.route(edge);\n        this.commitRoute(edge, routedPoints);\n        if (routedPoints.length > 0) {\n            this.addHandle(edge, 'source', 'routing-point', -2);\n            for (var i = 0; i < routedPoints.length - 1; ++i)\n                this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', i - 1);\n            this.addHandle(edge, 'target', 'routing-point', routedPoints.length - 2);\n        }\n    };\n    ManhattanEdgeRouter.prototype.getInnerHandlePosition = function (edge, route, handle) {\n        var fraction = this.getFraction(handle.kind);\n        if (fraction !== undefined) {\n            var _a = this.findRouteSegment(edge, route, handle.pointIndex), start = _a.start, end = _a.end;\n            if (start !== undefined && end !== undefined)\n                return geometry_1.linear(start, end, fraction);\n        }\n        return undefined;\n    };\n    ManhattanEdgeRouter.prototype.getFraction = function (kind) {\n        switch (kind) {\n            case 'manhattan-50%': return 0.5;\n            default: return undefined;\n        }\n    };\n    ManhattanEdgeRouter.prototype.commitRoute = function (edge, routedPoints) {\n        var newRoutingPoints = [];\n        for (var i = 1; i < routedPoints.length - 1; ++i)\n            newRoutingPoints.push({ x: routedPoints[i].x, y: routedPoints[i].y });\n        edge.routingPoints = newRoutingPoints;\n    };\n    ManhattanEdgeRouter.prototype.applyInnerHandleMoves = function (edge, moves) {\n        var _this = this;\n        var route = this.route(edge);\n        var routingPoints = edge.routingPoints;\n        var minimalPointDistance = this.getOptions(edge).minimalPointDistance;\n        moves.forEach(function (move) {\n            var handle = move.handle;\n            var index = handle.pointIndex;\n            var correctedX = _this.correctX(routingPoints, index, move.toPosition.x, minimalPointDistance);\n            var correctedY = _this.correctY(routingPoints, index, move.toPosition.y, minimalPointDistance);\n            switch (handle.kind) {\n                case 'manhattan-50%':\n                    if (index < 0) {\n                        if (geometry_1.almostEquals(route[0].x, route[1].x))\n                            _this.alignX(routingPoints, 0, correctedX);\n                        else\n                            _this.alignY(routingPoints, 0, correctedY);\n                    }\n                    else if (index < routingPoints.length - 1) {\n                        if (geometry_1.almostEquals(routingPoints[index].x, routingPoints[index + 1].x)) {\n                            _this.alignX(routingPoints, index, correctedX);\n                            _this.alignX(routingPoints, index + 1, correctedX);\n                        }\n                        else {\n                            _this.alignY(routingPoints, index, correctedY);\n                            _this.alignY(routingPoints, index + 1, correctedY);\n                        }\n                    }\n                    else {\n                        if (geometry_1.almostEquals(route[route.length - 2].x, route[route.length - 1].x))\n                            _this.alignX(routingPoints, routingPoints.length - 1, correctedX);\n                        else\n                            _this.alignY(routingPoints, routingPoints.length - 1, correctedY);\n                    }\n                    break;\n            }\n        });\n    };\n    ManhattanEdgeRouter.prototype.correctX = function (routingPoints, index, x, minimalPointDistance) {\n        if (index > 0 && Math.abs(x - routingPoints[index - 1].x) < minimalPointDistance)\n            return routingPoints[index - 1].x;\n        else if (index < routingPoints.length - 2 && Math.abs(x - routingPoints[index + 2].x) < minimalPointDistance)\n            return routingPoints[index + 2].x;\n        else\n            return x;\n    };\n    ManhattanEdgeRouter.prototype.alignX = function (routingPoints, index, x) {\n        if (index >= 0 && index < routingPoints.length)\n            routingPoints[index] = {\n                x: x,\n                y: routingPoints[index].y\n            };\n    };\n    ManhattanEdgeRouter.prototype.correctY = function (routingPoints, index, y, minimalPointDistance) {\n        if (index > 0 && Math.abs(y - routingPoints[index - 1].y) < minimalPointDistance)\n            return routingPoints[index - 1].y;\n        else if (index < routingPoints.length - 2 && Math.abs(y - routingPoints[index + 2].y) < minimalPointDistance)\n            return routingPoints[index + 2].y;\n        else\n            return y;\n    };\n    ManhattanEdgeRouter.prototype.alignY = function (routingPoints, index, y) {\n        if (index >= 0 && index < routingPoints.length)\n            routingPoints[index] = {\n                x: routingPoints[index].x,\n                y: y\n            };\n    };\n    ManhattanEdgeRouter.prototype.cleanupRoutingPoints = function (edge, routingPoints, updateHandles, addRoutingPoints) {\n        var sourceAnchors = new linear_edge_router_1.DefaultAnchors(edge.source, edge.parent, \"source\");\n        var targetAnchors = new linear_edge_router_1.DefaultAnchors(edge.target, edge.parent, \"target\");\n        if (this.resetRoutingPointsOnReconnect(edge, routingPoints, updateHandles, sourceAnchors, targetAnchors))\n            return;\n        // delete leading RPs inside the bounds of the source\n        for (var i = 0; i < routingPoints.length; ++i)\n            if (geometry_1.includes(sourceAnchors.bounds, routingPoints[i])) {\n                routingPoints.splice(0, 1);\n                if (updateHandles) {\n                    this.removeHandle(edge, -1);\n                }\n            }\n            else {\n                break;\n            }\n        // delete trailing RPs inside the bounds of the target\n        for (var i = routingPoints.length - 1; i >= 0; --i)\n            if (geometry_1.includes(targetAnchors.bounds, routingPoints[i])) {\n                routingPoints.splice(i, 1);\n                if (updateHandles) {\n                    this.removeHandle(edge, i);\n                }\n            }\n            else {\n                break;\n            }\n        if (routingPoints.length >= 2) {\n            var options = this.getOptions(edge);\n            for (var i = routingPoints.length - 2; i >= 0; --i) {\n                if (geometry_1.manhattanDistance(routingPoints[i], routingPoints[i + 1]) < options.minimalPointDistance) {\n                    routingPoints.splice(i, 2);\n                    --i;\n                    if (updateHandles) {\n                        this.removeHandle(edge, i - 1);\n                        this.removeHandle(edge, i);\n                    }\n                }\n            }\n        }\n        if (addRoutingPoints) {\n            this.addAdditionalCorner(edge, routingPoints, sourceAnchors, targetAnchors, updateHandles);\n            this.addAdditionalCorner(edge, routingPoints, targetAnchors, sourceAnchors, updateHandles);\n            this.manhattanify(edge, routingPoints);\n        }\n    };\n    ManhattanEdgeRouter.prototype.removeHandle = function (edge, pointIndex) {\n        var toBeRemoved = [];\n        edge.children.forEach(function (child) {\n            if (child instanceof model_1.SRoutingHandle) {\n                if (child.pointIndex > pointIndex)\n                    --child.pointIndex;\n                else if (child.pointIndex === pointIndex)\n                    toBeRemoved.push(child);\n            }\n        });\n        toBeRemoved.forEach(function (child) { return edge.remove(child); });\n    };\n    ManhattanEdgeRouter.prototype.addAdditionalCorner = function (edge, routingPoints, currentAnchors, otherAnchors, updateHandles) {\n        if (routingPoints.length === 0)\n            return;\n        var refPoint = currentAnchors.kind === 'source' ? routingPoints[0] : routingPoints[routingPoints.length - 1];\n        var index = currentAnchors.kind === 'source' ? 0 : routingPoints.length;\n        var shiftIndex = index - (currentAnchors.kind === 'source' ? 1 : 0);\n        var isHorizontal;\n        if (routingPoints.length > 1) {\n            isHorizontal = index === 0\n                ? geometry_1.almostEquals(routingPoints[0].x, routingPoints[1].x)\n                : geometry_1.almostEquals(routingPoints[routingPoints.length - 1].x, routingPoints[routingPoints.length - 2].x);\n        }\n        else {\n            var nearestSide = otherAnchors.getNearestSide(refPoint);\n            isHorizontal = nearestSide === linear_edge_router_1.Side.TOP || nearestSide === linear_edge_router_1.Side.BOTTOM;\n        }\n        if (isHorizontal) {\n            if (refPoint.y < currentAnchors.get(linear_edge_router_1.Side.TOP).y || refPoint.y > currentAnchors.get(linear_edge_router_1.Side.BOTTOM).y) {\n                var newPoint = { x: currentAnchors.get(linear_edge_router_1.Side.TOP).x, y: refPoint.y };\n                routingPoints.splice(index, 0, newPoint);\n                if (updateHandles) {\n                    edge.children.forEach(function (child) {\n                        if (child instanceof model_1.SRoutingHandle && child.pointIndex >= shiftIndex)\n                            ++child.pointIndex;\n                    });\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', shiftIndex);\n                }\n            }\n        }\n        else {\n            if (refPoint.x < currentAnchors.get(linear_edge_router_1.Side.LEFT).x || refPoint.x > currentAnchors.get(linear_edge_router_1.Side.RIGHT).x) {\n                var newPoint = { x: refPoint.x, y: currentAnchors.get(linear_edge_router_1.Side.LEFT).y };\n                routingPoints.splice(index, 0, newPoint);\n                if (updateHandles) {\n                    edge.children.forEach(function (child) {\n                        if (child instanceof model_1.SRoutingHandle && child.pointIndex >= shiftIndex)\n                            ++child.pointIndex;\n                    });\n                    this.addHandle(edge, 'manhattan-50%', 'volatile-routing-point', shiftIndex);\n                }\n            }\n        }\n    };\n    /**\n     * Add artificial routing points to keep all angles rectilinear.\n     *\n     * This makes edge morphing look a lot smoother, where RP positions are interpolated\n     * linearly probably resulting in non-rectilinear angles. We don't add handles for\n     * these additional RPs.\n     */\n    ManhattanEdgeRouter.prototype.manhattanify = function (edge, routingPoints) {\n        for (var i = 1; i < routingPoints.length; ++i) {\n            var isVertical = Math.abs(routingPoints[i - 1].x - routingPoints[i].x) < 1;\n            var isHorizontal = Math.abs(routingPoints[i - 1].y - routingPoints[i].y) < 1;\n            if (!isVertical && !isHorizontal) {\n                routingPoints.splice(i, 0, {\n                    x: routingPoints[i - 1].x,\n                    y: routingPoints[i].y\n                });\n                ++i;\n            }\n        }\n    };\n    ManhattanEdgeRouter.prototype.calculateDefaultCorners = function (edge, sourceAnchors, targetAnchors, options) {\n        var selfEdge = _super.prototype.calculateDefaultCorners.call(this, edge, sourceAnchors, targetAnchors, options);\n        if (selfEdge.length > 0)\n            return selfEdge;\n        var bestAnchors = this.getBestConnectionAnchors(edge, sourceAnchors, targetAnchors, options);\n        var sourceSide = bestAnchors.source;\n        var targetSide = bestAnchors.target;\n        var corners = [];\n        var startPoint = sourceAnchors.get(sourceSide);\n        var endPoint = targetAnchors.get(targetSide);\n        switch (sourceSide) {\n            case linear_edge_router_1.Side.RIGHT:\n                switch (targetSide) {\n                    case linear_edge_router_1.Side.BOTTOM:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case linear_edge_router_1.Side.TOP:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case linear_edge_router_1.Side.RIGHT:\n                        corners.push({ x: Math.max(startPoint.x, endPoint.x) + 1.5 * options.standardDistance, y: startPoint.y });\n                        corners.push({ x: Math.max(startPoint.x, endPoint.x) + 1.5 * options.standardDistance, y: endPoint.y });\n                        break;\n                    case linear_edge_router_1.Side.LEFT:\n                        if (endPoint.y !== startPoint.y) {\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: startPoint.y });\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: endPoint.y });\n                        }\n                        break;\n                }\n                break;\n            case linear_edge_router_1.Side.LEFT:\n                switch (targetSide) {\n                    case linear_edge_router_1.Side.BOTTOM:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    case linear_edge_router_1.Side.TOP:\n                        corners.push({ x: endPoint.x, y: startPoint.y });\n                        break;\n                    default:\n                        endPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n                        if (endPoint.y !== startPoint.y) {\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: startPoint.y });\n                            corners.push({ x: (startPoint.x + endPoint.x) / 2, y: endPoint.y });\n                        }\n                        break;\n                }\n                break;\n            case linear_edge_router_1.Side.TOP:\n                switch (targetSide) {\n                    case linear_edge_router_1.Side.RIGHT:\n                        if ((endPoint.x - startPoint.x) > 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: endPoint.y });\n                        }\n                        else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case linear_edge_router_1.Side.LEFT:\n                        if ((endPoint.x - startPoint.x) < 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: startPoint.y - options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: endPoint.y });\n                        }\n                        else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case linear_edge_router_1.Side.TOP:\n                        corners.push({ x: startPoint.x, y: Math.min(startPoint.y, endPoint.y) - 1.5 * options.standardDistance });\n                        corners.push({ x: endPoint.x, y: Math.min(startPoint.y, endPoint.y) - 1.5 * options.standardDistance });\n                        break;\n                    case linear_edge_router_1.Side.BOTTOM:\n                        if (endPoint.x !== startPoint.x) {\n                            corners.push({ x: startPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                            corners.push({ x: endPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                        }\n                        break;\n                }\n                break;\n            case linear_edge_router_1.Side.BOTTOM:\n                switch (targetSide) {\n                    case linear_edge_router_1.Side.RIGHT:\n                        if ((endPoint.x - startPoint.x) > 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x + 1.5 * options.standardDistance, y: endPoint.y });\n                        }\n                        else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    case linear_edge_router_1.Side.LEFT:\n                        if ((endPoint.x - startPoint.x) < 0) {\n                            corners.push({ x: startPoint.x, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: startPoint.y + options.standardDistance });\n                            corners.push({ x: endPoint.x - 1.5 * options.standardDistance, y: endPoint.y });\n                        }\n                        else {\n                            corners.push({ x: startPoint.x, y: endPoint.y });\n                        }\n                        break;\n                    default:\n                        endPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n                        if (endPoint.x !== startPoint.x) {\n                            corners.push({ x: startPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                            corners.push({ x: endPoint.x, y: (startPoint.y + endPoint.y) / 2 });\n                        }\n                        break;\n                }\n                break;\n        }\n        return corners;\n    };\n    ManhattanEdgeRouter.prototype.getBestConnectionAnchors = function (edge, sourceAnchors, targetAnchors, options) {\n        // distance is enough\n        var sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.RIGHT);\n        var targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if ((targetPoint.x - sourcePoint.x) > options.standardDistance)\n            return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.LEFT };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.LEFT);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if ((sourcePoint.x - targetPoint.x) > options.standardDistance)\n            return { source: linear_edge_router_1.Side.LEFT, target: linear_edge_router_1.Side.RIGHT };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.TOP);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        if ((sourcePoint.y - targetPoint.y) > options.standardDistance)\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.BOTTOM };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n        if ((targetPoint.y - sourcePoint.y) > options.standardDistance)\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.TOP };\n        // One additional point\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.RIGHT);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n        if (((targetPoint.x - sourcePoint.x) > 0.5 * options.standardDistance) && ((targetPoint.y - sourcePoint.y) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.TOP };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        if (((targetPoint.x - sourcePoint.x) > 0.5 * options.standardDistance) && ((sourcePoint.y - targetPoint.y) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.BOTTOM };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.LEFT);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        if (((sourcePoint.x - targetPoint.x) > 0.5 * options.standardDistance) && ((sourcePoint.y - targetPoint.y) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.LEFT, target: linear_edge_router_1.Side.BOTTOM };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n        if (((sourcePoint.x - targetPoint.x) > 0.5 * options.standardDistance) && ((targetPoint.y - sourcePoint.y) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.LEFT, target: linear_edge_router_1.Side.TOP };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.TOP);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (((sourcePoint.y - targetPoint.y) > 0.5 * options.standardDistance) && ((sourcePoint.x - targetPoint.x) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.RIGHT };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if (((sourcePoint.y - targetPoint.y) > 0.5 * options.standardDistance) && ((targetPoint.x - sourcePoint.x) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.LEFT };\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (((targetPoint.y - sourcePoint.y) > 0.5 * options.standardDistance) && ((sourcePoint.x - targetPoint.x) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.RIGHT };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if (((targetPoint.y - sourcePoint.y) > 0.5 * options.standardDistance) && ((targetPoint.x - sourcePoint.x) > options.standardDistance))\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.LEFT };\n        // Two points\n        // priority NN >> EE >> NE >> NW >> SE >> SW\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.TOP);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.TOP);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint)) {\n            if ((sourcePoint.y - targetPoint.y) < 0) {\n                if (Math.abs(sourcePoint.x - targetPoint.x) > ((sourceAnchors.bounds.width + options.standardDistance) / 2))\n                    return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.TOP };\n            }\n            else {\n                if (Math.abs(sourcePoint.x - targetPoint.x) > (targetAnchors.bounds.width / 2))\n                    return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.TOP };\n            }\n        }\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.RIGHT);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint)) {\n            if ((sourcePoint.x - targetPoint.x) > 0) {\n                if (Math.abs(sourcePoint.y - targetPoint.y) > ((sourceAnchors.bounds.height + options.standardDistance) / 2))\n                    return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.RIGHT };\n            }\n            else if (Math.abs(sourcePoint.y - targetPoint.y) > (targetAnchors.bounds.height / 2))\n                return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.RIGHT };\n        }\n        // Secondly, judge NE NW is available\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.TOP);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint))\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.RIGHT };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint))\n            return { source: linear_edge_router_1.Side.TOP, target: linear_edge_router_1.Side.LEFT };\n        // Finally, judge SE SW is available\n        sourcePoint = sourceAnchors.get(linear_edge_router_1.Side.BOTTOM);\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.RIGHT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint))\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.RIGHT };\n        targetPoint = targetAnchors.get(linear_edge_router_1.Side.LEFT);\n        if (!geometry_1.includes(targetAnchors.bounds, sourcePoint) && !geometry_1.includes(sourceAnchors.bounds, targetPoint))\n            return { source: linear_edge_router_1.Side.BOTTOM, target: linear_edge_router_1.Side.LEFT };\n        // Only to return to the\n        return { source: linear_edge_router_1.Side.RIGHT, target: linear_edge_router_1.Side.BOTTOM };\n    };\n    ManhattanEdgeRouter.KIND = 'manhattan';\n    return ManhattanEdgeRouter;\n}(linear_edge_router_1.LinearEdgeRouter));\nexports.ManhattanEdgeRouter = ManhattanEdgeRouter;\n//# sourceMappingURL=manhattan-edge-router.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"../bounds/model\");\nvar delete_1 = require(\"../edit/delete\");\nvar model_2 = require(\"../select/model\");\nvar model_3 = require(\"../hover/model\");\nvar model_4 = require(\"../move/model\");\nvar SRoutableElement = /** @class */ (function (_super) {\n    __extends(SRoutableElement, _super);\n    function SRoutableElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.routingPoints = [];\n        return _this;\n    }\n    Object.defineProperty(SRoutableElement.prototype, \"source\", {\n        get: function () {\n            return this.index.getById(this.sourceId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SRoutableElement.prototype, \"target\", {\n        get: function () {\n            return this.index.getById(this.targetId);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SRoutableElement.prototype, \"bounds\", {\n        get: function () {\n            // this should also work for splines, which have the convex hull property\n            return this.routingPoints.reduce(function (bounds, routingPoint) { return geometry_1.combine(bounds, {\n                x: routingPoint.x,\n                y: routingPoint.y,\n                width: 0,\n                height: 0\n            }); }, geometry_1.EMPTY_BOUNDS);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return SRoutableElement;\n}(smodel_1.SChildElement));\nexports.SRoutableElement = SRoutableElement;\nexports.connectableFeature = Symbol('connectableFeature');\nfunction isConnectable(element) {\n    return element.hasFeature(exports.connectableFeature) && element.canConnect;\n}\nexports.isConnectable = isConnectable;\nfunction getAbsoluteRouteBounds(model, route) {\n    if (route === void 0) { route = model.routingPoints; }\n    var bounds = getRouteBounds(route);\n    var current = model;\n    while (current instanceof smodel_1.SChildElement) {\n        var parent_1 = current.parent;\n        bounds = parent_1.localToParent(bounds);\n        current = parent_1;\n    }\n    return bounds;\n}\nexports.getAbsoluteRouteBounds = getAbsoluteRouteBounds;\nfunction getRouteBounds(route) {\n    var bounds = { x: NaN, y: NaN, width: 0, height: 0 };\n    for (var _i = 0, route_1 = route; _i < route_1.length; _i++) {\n        var point = route_1[_i];\n        if (isNaN(bounds.x)) {\n            bounds.x = point.x;\n            bounds.y = point.y;\n        }\n        else {\n            if (point.x < bounds.x) {\n                bounds.width += bounds.x - point.x;\n                bounds.x = point.x;\n            }\n            else if (point.x > bounds.x + bounds.width) {\n                bounds.width = point.x - bounds.x;\n            }\n            if (point.y < bounds.y) {\n                bounds.height += bounds.y - point.y;\n                bounds.y = point.y;\n            }\n            else if (point.y > bounds.y + bounds.height) {\n                bounds.height = point.y - bounds.y;\n            }\n        }\n    }\n    return bounds;\n}\nexports.getRouteBounds = getRouteBounds;\n/**\n * A connectable element is one that can have outgoing and incoming edges, i.e. it can be the source\n * or target element of an edge. There are two kinds of connectable elements: nodes (`SNode`) and\n * ports (`SPort`). A node represents a main entity, while a port is a connection point inside a node.\n */\nvar SConnectableElement = /** @class */ (function (_super) {\n    __extends(SConnectableElement, _super);\n    function SConnectableElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.strokeWidth = 0;\n        return _this;\n    }\n    Object.defineProperty(SConnectableElement.prototype, \"anchorKind\", {\n        get: function () {\n            return undefined;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SConnectableElement.prototype, \"incomingEdges\", {\n        /**\n         * The incoming edges of this connectable element. They are resolved by the index, which must\n         * be an `SGraphIndex`.\n         */\n        get: function () {\n            return this.index.getIncomingEdges(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(SConnectableElement.prototype, \"outgoingEdges\", {\n        /**\n         * The outgoing edges of this connectable element. They are resolved by the index, which must\n         * be an `SGraphIndex`.\n         */\n        get: function () {\n            return this.index.getOutgoingEdges(this);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    SConnectableElement.prototype.canConnect = function (routable, role) {\n        return true;\n    };\n    return SConnectableElement;\n}(model_1.SShapeElement));\nexports.SConnectableElement = SConnectableElement;\nvar SRoutingHandle = /** @class */ (function (_super) {\n    __extends(SRoutingHandle, _super);\n    function SRoutingHandle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /** Whether the routing point is being dragged. */\n        _this.editMode = false;\n        _this.hoverFeedback = false;\n        _this.selected = false;\n        return _this;\n    }\n    /**\n     * SRoutingHandles are created using the constructor, so we hard-wire the\n     * default features\n     */\n    SRoutingHandle.prototype.hasFeature = function (feature) {\n        return SRoutingHandle.DEFAULT_FEATURES.indexOf(feature) !== -1;\n    };\n    SRoutingHandle.DEFAULT_FEATURES = [model_2.selectFeature, model_4.moveFeature, model_3.hoverFeedbackFeature];\n    return SRoutingHandle;\n}(smodel_1.SChildElement));\nexports.SRoutingHandle = SRoutingHandle;\nvar SDanglingAnchor = /** @class */ (function (_super) {\n    __extends(SDanglingAnchor, _super);\n    function SDanglingAnchor() {\n        var _this = _super.call(this) || this;\n        _this.type = 'dangling-anchor';\n        _this.size = { width: 0, height: 0 };\n        return _this;\n    }\n    SDanglingAnchor.DEFAULT_FEATURES = [delete_1.deletableFeature];\n    return SDanglingAnchor;\n}(SConnectableElement));\nexports.SDanglingAnchor = SDanglingAnchor;\nexports.edgeInProgressID = 'edge-in-progress';\nexports.edgeInProgressTargetHandleID = exports.edgeInProgressID + '-target-anchor';\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar anchor_1 = require(\"./anchor\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar inversify_1 = require(\"inversify\");\nvar polyline_edge_router_1 = require(\"./polyline-edge-router\");\nvar EllipseAnchor = /** @class */ (function () {\n    function EllipseAnchor() {\n    }\n    Object.defineProperty(EllipseAnchor.prototype, \"kind\", {\n        get: function () {\n            return polyline_edge_router_1.PolylineEdgeRouter.KIND + ':' + anchor_1.ELLIPTIC_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EllipseAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var bounds = connectable.bounds;\n        var c = geometry_1.center(bounds);\n        var dx = c.x - refPoint.x;\n        var dy = c.y - refPoint.y;\n        var distance = Math.sqrt(dx * dx + dy * dy);\n        var normX = (dx / distance) || 0;\n        var normY = (dy / distance) || 0;\n        return {\n            x: c.x - normX * (0.5 * bounds.width + offset),\n            y: c.y - normY * (0.5 * bounds.height + offset)\n        };\n    };\n    EllipseAnchor = __decorate([\n        inversify_1.injectable()\n    ], EllipseAnchor);\n    return EllipseAnchor;\n}());\nexports.EllipseAnchor = EllipseAnchor;\nvar RectangleAnchor = /** @class */ (function () {\n    function RectangleAnchor() {\n    }\n    Object.defineProperty(RectangleAnchor.prototype, \"kind\", {\n        get: function () {\n            return polyline_edge_router_1.PolylineEdgeRouter.KIND + ':' + anchor_1.RECTANGULAR_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    RectangleAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        if (offset === void 0) { offset = 0; }\n        var bounds = connectable.bounds;\n        var c = geometry_1.center(bounds);\n        var finder = new NearestPointFinder(c, refPoint);\n        if (!geometry_1.almostEquals(c.y, refPoint.y)) {\n            var xTop = this.getXIntersection(bounds.y, c, refPoint);\n            if (xTop >= bounds.x && xTop <= bounds.x + bounds.width)\n                finder.addCandidate(xTop, bounds.y - offset);\n            var xBottom = this.getXIntersection(bounds.y + bounds.height, c, refPoint);\n            if (xBottom >= bounds.x && xBottom <= bounds.x + bounds.width)\n                finder.addCandidate(xBottom, bounds.y + bounds.height + offset);\n        }\n        if (!geometry_1.almostEquals(c.x, refPoint.x)) {\n            var yLeft = this.getYIntersection(bounds.x, c, refPoint);\n            if (yLeft >= bounds.y && yLeft <= bounds.y + bounds.height)\n                finder.addCandidate(bounds.x - offset, yLeft);\n            var yRight = this.getYIntersection(bounds.x + bounds.width, c, refPoint);\n            if (yRight >= bounds.y && yRight <= bounds.y + bounds.height)\n                finder.addCandidate(bounds.x + bounds.width + offset, yRight);\n        }\n        return finder.best;\n    };\n    RectangleAnchor.prototype.getXIntersection = function (yIntersection, centerPoint, point) {\n        var t = (yIntersection - centerPoint.y) / (point.y - centerPoint.y);\n        return (point.x - centerPoint.x) * t + centerPoint.x;\n    };\n    RectangleAnchor.prototype.getYIntersection = function (xIntersection, centerPoint, point) {\n        var t = (xIntersection - centerPoint.x) / (point.x - centerPoint.x);\n        return (point.y - centerPoint.y) * t + centerPoint.y;\n    };\n    RectangleAnchor = __decorate([\n        inversify_1.injectable()\n    ], RectangleAnchor);\n    return RectangleAnchor;\n}());\nexports.RectangleAnchor = RectangleAnchor;\nvar NearestPointFinder = /** @class */ (function () {\n    function NearestPointFinder(centerPoint, refPoint) {\n        this.centerPoint = centerPoint;\n        this.refPoint = refPoint;\n        this.currentDist = -1;\n    }\n    NearestPointFinder.prototype.addCandidate = function (x, y) {\n        var dx = this.refPoint.x - x;\n        var dy = this.refPoint.y - y;\n        var dist = dx * dx + dy * dy;\n        if (this.currentDist < 0 || dist < this.currentDist) {\n            this.currentBest = {\n                x: x,\n                y: y\n            };\n            this.currentDist = dist;\n        }\n    };\n    Object.defineProperty(NearestPointFinder.prototype, \"best\", {\n        get: function () {\n            if (this.currentBest === undefined)\n                return this.centerPoint;\n            else\n                return this.currentBest;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return NearestPointFinder;\n}());\nvar DiamondAnchor = /** @class */ (function () {\n    function DiamondAnchor() {\n    }\n    Object.defineProperty(DiamondAnchor.prototype, \"kind\", {\n        get: function () {\n            return polyline_edge_router_1.PolylineEdgeRouter.KIND + ':' + anchor_1.DIAMOND_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    DiamondAnchor.prototype.getAnchor = function (connectable, refPoint, offset) {\n        var bounds = connectable.bounds;\n        var referenceLine = new geometry_1.PointToPointLine(geometry_1.center(bounds), refPoint);\n        var closestDiamondSide = new geometry_1.Diamond(bounds).closestSideLine(refPoint);\n        var anchorPoint = geometry_1.intersection(closestDiamondSide, referenceLine);\n        return geometry_1.shiftTowards(anchorPoint, refPoint, offset);\n    };\n    DiamondAnchor = __decorate([\n        inversify_1.injectable()\n    ], DiamondAnchor);\n    return DiamondAnchor;\n}());\nexports.DiamondAnchor = DiamondAnchor;\n//# sourceMappingURL=polyline-anchors.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar model_1 = require(\"./model\");\nvar anchor_1 = require(\"./anchor\");\nvar linear_edge_router_1 = require(\"./linear-edge-router\");\nvar PolylineEdgeRouter = /** @class */ (function (_super) {\n    __extends(PolylineEdgeRouter, _super);\n    function PolylineEdgeRouter() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PolylineEdgeRouter_1 = PolylineEdgeRouter;\n    Object.defineProperty(PolylineEdgeRouter.prototype, \"kind\", {\n        get: function () {\n            return PolylineEdgeRouter_1.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PolylineEdgeRouter.prototype.getOptions = function (edge) {\n        return {\n            minimalPointDistance: 2,\n            removeAngleThreshold: 0.1,\n            standardDistance: 20,\n            selfEdgeOffset: 0.25\n        };\n    };\n    PolylineEdgeRouter.prototype.route = function (edge) {\n        var source = edge.source;\n        var target = edge.target;\n        if (source === undefined || target === undefined) {\n            return [];\n        }\n        var sourceAnchor;\n        var targetAnchor;\n        var options = this.getOptions(edge);\n        var routingPoints = edge.routingPoints.length > 0\n            ? edge.routingPoints\n            : [];\n        this.cleanupRoutingPoints(edge, routingPoints, false, false);\n        var rpCount = routingPoints !== undefined ? routingPoints.length : 0;\n        if (rpCount === 0) {\n            // Use the target center as start anchor reference\n            var startRef = geometry_1.center(target.bounds);\n            sourceAnchor = this.getTranslatedAnchor(source, startRef, target.parent, edge, edge.sourceAnchorCorrection);\n            // Use the source center as end anchor reference\n            var endRef = geometry_1.center(source.bounds);\n            targetAnchor = this.getTranslatedAnchor(target, endRef, source.parent, edge, edge.targetAnchorCorrection);\n        }\n        else {\n            // Use the first routing point as start anchor reference\n            var p0 = routingPoints[0];\n            sourceAnchor = this.getTranslatedAnchor(source, p0, edge.parent, edge, edge.sourceAnchorCorrection);\n            // Use the last routing point as end anchor reference\n            var pn = routingPoints[rpCount - 1];\n            targetAnchor = this.getTranslatedAnchor(target, pn, edge.parent, edge, edge.targetAnchorCorrection);\n        }\n        var result = [];\n        result.push({ kind: 'source', x: sourceAnchor.x, y: sourceAnchor.y });\n        for (var i = 0; i < rpCount; i++) {\n            var p = routingPoints[i];\n            if (i > 0 && i < rpCount - 1\n                || i === 0 && geometry_1.maxDistance(sourceAnchor, p) >= options.minimalPointDistance + (edge.sourceAnchorCorrection || 0)\n                || i === rpCount - 1 && geometry_1.maxDistance(p, targetAnchor) >= options.minimalPointDistance + (edge.targetAnchorCorrection || 0)) {\n                result.push({ kind: 'linear', x: p.x, y: p.y, pointIndex: i });\n            }\n        }\n        result.push({ kind: 'target', x: targetAnchor.x, y: targetAnchor.y });\n        return this.filterEditModeHandles(result, edge, options);\n    };\n    /**\n     * Remove routed points that are in edit mode and for which the angle between the preceding and\n     * following points falls below a threshold.\n     */\n    PolylineEdgeRouter.prototype.filterEditModeHandles = function (route, edge, options) {\n        if (edge.children.length === 0)\n            return route;\n        var i = 0;\n        var _loop_1 = function () {\n            var curr = route[i];\n            if (curr.pointIndex !== undefined) {\n                var handle = edge.children.find(function (child) {\n                    return child instanceof model_1.SRoutingHandle && child.kind === 'junction' && child.pointIndex === curr.pointIndex;\n                });\n                if (handle !== undefined && handle.editMode && i > 0 && i < route.length - 1) {\n                    var prev = route[i - 1], next = route[i + 1];\n                    var prevDiff = { x: prev.x - curr.x, y: prev.y - curr.y };\n                    var nextDiff = { x: next.x - curr.x, y: next.y - curr.y };\n                    var angle = geometry_1.angleBetweenPoints(prevDiff, nextDiff);\n                    if (Math.abs(Math.PI - angle) < options.removeAngleThreshold) {\n                        route.splice(i, 1);\n                        return \"continue\";\n                    }\n                }\n            }\n            i++;\n        };\n        while (i < route.length) {\n            _loop_1();\n        }\n        return route;\n    };\n    PolylineEdgeRouter.prototype.createRoutingHandles = function (edge) {\n        var rpCount = edge.routingPoints.length;\n        this.addHandle(edge, 'source', 'routing-point', -2);\n        this.addHandle(edge, 'line', 'volatile-routing-point', -1);\n        for (var i = 0; i < rpCount; i++) {\n            this.addHandle(edge, 'junction', 'routing-point', i);\n            this.addHandle(edge, 'line', 'volatile-routing-point', i);\n        }\n        this.addHandle(edge, 'target', 'routing-point', rpCount);\n    };\n    PolylineEdgeRouter.prototype.getInnerHandlePosition = function (edge, route, handle) {\n        if (handle.kind === 'line') {\n            var _a = this.findRouteSegment(edge, route, handle.pointIndex), start = _a.start, end = _a.end;\n            if (start !== undefined && end !== undefined)\n                return geometry_1.centerOfLine(start, end);\n        }\n        return undefined;\n    };\n    PolylineEdgeRouter.prototype.applyInnerHandleMoves = function (edge, moves) {\n        var _this = this;\n        moves.forEach(function (move) {\n            var handle = move.handle;\n            var points = edge.routingPoints;\n            var index = handle.pointIndex;\n            if (handle.kind === 'line') {\n                // Upgrade to a proper routing point\n                handle.kind = 'junction';\n                handle.type = 'routing-point';\n                points.splice(index + 1, 0, move.fromPosition || points[Math.max(index, 0)]);\n                edge.children.forEach(function (child) {\n                    if (child instanceof model_1.SRoutingHandle && (child === handle || child.pointIndex > index))\n                        child.pointIndex++;\n                });\n                _this.addHandle(edge, 'line', 'volatile-routing-point', index);\n                _this.addHandle(edge, 'line', 'volatile-routing-point', index + 1);\n                index++;\n            }\n            if (index >= 0 && index < points.length) {\n                points[index] = move.toPosition;\n            }\n        });\n    };\n    var PolylineEdgeRouter_1;\n    PolylineEdgeRouter.KIND = 'polyline';\n    __decorate([\n        inversify_1.inject(anchor_1.AnchorComputerRegistry),\n        __metadata(\"design:type\", anchor_1.AnchorComputerRegistry)\n    ], PolylineEdgeRouter.prototype, \"anchorRegistry\", void 0);\n    PolylineEdgeRouter = PolylineEdgeRouter_1 = __decorate([\n        inversify_1.injectable()\n    ], PolylineEdgeRouter);\n    return PolylineEdgeRouter;\n}(linear_edge_router_1.LinearEdgeRouter));\nexports.PolylineEdgeRouter = PolylineEdgeRouter;\n//# sourceMappingURL=polyline-edge-router.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar types_1 = require(\"../../base/types\");\nvar view_1 = require(\"../../base/views/view\");\nvar registry_1 = require(\"../../utils/registry\");\nvar model_1 = require(\"./model\");\nvar polyline_edge_router_1 = require(\"./polyline-edge-router\");\nfunction isMultipleEdgesRouter(router) {\n    return router.routeAll !== undefined;\n}\n/* Merges two objects with elements in first one(in-place) */\nfunction mergeElementsOfRoutersAll(elements1, elements2) {\n    for (var routerKey in elements2) {\n        if (routerKey in elements1) {\n            elements1[routerKey] = elements1[routerKey].concat(elements2[routerKey]);\n        }\n        else {\n            elements1[routerKey] = elements2[routerKey];\n        }\n    }\n}\nvar EdgeRouterRegistry = /** @class */ (function (_super) {\n    __extends(EdgeRouterRegistry, _super);\n    function EdgeRouterRegistry(edgeRouters) {\n        var _this = _super.call(this) || this;\n        edgeRouters.forEach(function (router) { return _this.register(router.kind, router); });\n        return _this;\n    }\n    Object.defineProperty(EdgeRouterRegistry.prototype, \"defaultKind\", {\n        get: function () {\n            return polyline_edge_router_1.PolylineEdgeRouter.KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EdgeRouterRegistry.prototype.get = function (kind) {\n        return _super.prototype.get.call(this, kind || this.defaultKind);\n    };\n    /**\n     * Computes the routes of all edges contained by the specified `parent`.\n     * After all routes are available, it'll apply the registered `EdgeRoutePostProcessors`.\n     * @param parent the parent to traverse for edges\n     * @returns the routes of all edges that are children of `parent`\n     */\n    EdgeRouterRegistry.prototype.routeAllChildren = function (parent) {\n        var _a = this.doRouteAllChildren(parent), routing = _a.routing, multipleRoutersEdges = _a.multipleRoutersEdges;\n        for (var _i = 0, _b = Object.keys(multipleRoutersEdges); _i < _b.length; _i++) {\n            var routerKind = _b[_i];\n            var router = this.get(routerKind);\n            var elementsRouting = router.routeAll(multipleRoutersEdges[routerKind], parent);\n            routing.setAll(elementsRouting);\n        }\n        for (var _c = 0, _d = this.postProcessors; _c < _d.length; _c++) {\n            var postProcessor = _d[_c];\n            postProcessor.apply(routing);\n        }\n        return routing;\n    };\n    /**\n     * Recursively traverses the children of `parent`, computes routes for child of route IEdgeRoute\n     * and collects children of IMultipleEdgesRouter-based routers.\n     * @param parent the parent to traverse for edges\n     * @returns the routes of all edges that are children of `parent`\n     */\n    EdgeRouterRegistry.prototype.doRouteAllChildren = function (parent) {\n        var routing = new EdgeRouting();\n        var newChildrenOfRoutesAll = {};\n        for (var _i = 0, _a = parent.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            if (child instanceof model_1.SRoutableElement) {\n                var childRouter = this.get(child.routerKind);\n                if (isMultipleEdgesRouter(childRouter)) {\n                    if (childRouter.kind in newChildrenOfRoutesAll) {\n                        newChildrenOfRoutesAll[childRouter.kind].push(child);\n                    }\n                    else {\n                        newChildrenOfRoutesAll[childRouter.kind] = [child];\n                    }\n                }\n                else {\n                    routing.set(child.id, this.route(child));\n                }\n            }\n            if (child instanceof smodel_1.SParentElement) {\n                var _b = this.doRouteAllChildren(child), childRouting = _b.routing, multipleRoutersEdges = _b.multipleRoutersEdges;\n                mergeElementsOfRoutersAll(newChildrenOfRoutesAll, multipleRoutersEdges);\n                routing.setAll(childRouting);\n            }\n        }\n        return {\n            routing: routing,\n            multipleRoutersEdges: newChildrenOfRoutesAll,\n        };\n    };\n    /**\n     * Computes or obtains the route of a single edge.\n     * @param edge the edge to be routed\n     * @param args arguments that may contain an `EdgeRouting` already\n     * @returns the route of the specified `edge`\n     */\n    EdgeRouterRegistry.prototype.route = function (edge, args) {\n        var edgeRouting = view_1.findArgValue(args, 'edgeRouting');\n        if (edgeRouting) {\n            var route = edgeRouting.get(edge.id);\n            if (route) {\n                return route;\n            }\n        }\n        var router = this.get(edge.routerKind);\n        return router.route(edge);\n    };\n    __decorate([\n        inversify_1.multiInject(types_1.TYPES.IEdgeRoutePostprocessor), inversify_1.optional(),\n        __metadata(\"design:type\", Array)\n    ], EdgeRouterRegistry.prototype, \"postProcessors\", void 0);\n    EdgeRouterRegistry = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.multiInject(types_1.TYPES.IEdgeRouter)),\n        __metadata(\"design:paramtypes\", [Array])\n    ], EdgeRouterRegistry);\n    return EdgeRouterRegistry;\n}(registry_1.InstanceRegistry));\nexports.EdgeRouterRegistry = EdgeRouterRegistry;\n/**\n * Map of edges and their computed routes.\n */\nvar EdgeRouting = /** @class */ (function () {\n    function EdgeRouting() {\n        this.routesMap = new Map();\n    }\n    EdgeRouting.prototype.set = function (routableId, route) {\n        this.routesMap.set(routableId, route);\n    };\n    EdgeRouting.prototype.setAll = function (otherRoutes) {\n        var _this = this;\n        otherRoutes.routes.forEach(function (route, routableId) { return _this.set(routableId, route); });\n    };\n    EdgeRouting.prototype.get = function (routableId) {\n        return this.routesMap.get(routableId);\n    };\n    Object.defineProperty(EdgeRouting.prototype, \"routes\", {\n        get: function () {\n            return this.routesMap;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return EdgeRouting;\n}());\nexports.EdgeRouting = EdgeRouting;\n//# sourceMappingURL=routing.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar model_1 = require(\"./model\");\nvar RoutableView = /** @class */ (function () {\n    function RoutableView() {\n    }\n    /**\n     * Check whether the given model element is in the current viewport. Use this method\n     * in your `render` implementation to skip rendering in case the element is not visible.\n     * This can greatly enhance performance for large models.\n     */\n    RoutableView.prototype.isVisible = function (model, route, context) {\n        if (context.targetKind === 'hidden') {\n            // Don't hide any element for hidden rendering\n            return true;\n        }\n        if (route.length === 0) {\n            // We should hide only if we know the element's route\n            return true;\n        }\n        var ab = model_1.getAbsoluteRouteBounds(model, route);\n        var canvasBounds = model.root.canvasBounds;\n        return ab.x <= canvasBounds.width\n            && ab.x + ab.width >= 0\n            && ab.y <= canvasBounds.height\n            && ab.y + ab.height >= 0;\n    };\n    RoutableView = __decorate([\n        inversify_1.injectable()\n    ], RoutableView);\n    return RoutableView;\n}());\nexports.RoutableView = RoutableView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar select_1 = require(\"./select\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar selectModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, select_1.SelectCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, select_1.SelectAllCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, select_1.GetSelectionCommand);\n    bind(types_1.TYPES.KeyListener).to(select_1.SelectKeyboardListener);\n    bind(types_1.TYPES.MouseListener).to(select_1.SelectMouseListener);\n});\nexports.default = selectModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.selectFeature = Symbol('selectFeature');\nfunction isSelectable(element) {\n    return element.hasFeature(exports.selectFeature);\n}\nexports.isSelectable = isSelectable;\nfunction isSelected(element) {\n    return element !== undefined && isSelectable(element) && element.selected;\n}\nexports.isSelected = isSelected;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar request_command_1 = require(\"../../base/commands/request-command\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar types_1 = require(\"../../base/types\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar vnode_utils_1 = require(\"../../base/views/vnode-utils\");\nvar browser_1 = require(\"../../utils/browser\");\nvar iterable_1 = require(\"../../utils/iterable\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar button_handler_1 = require(\"../button/button-handler\");\nvar model_1 = require(\"../button/model\");\nvar edit_routing_1 = require(\"../edit/edit-routing\");\nvar model_2 = require(\"../routing/model\");\nvar model_3 = require(\"../routing/model\");\nvar zorder_1 = require(\"../zorder/zorder\");\nvar model_4 = require(\"./model\");\n/**\n * Triggered when the user changes the selection, e.g. by clicking on a selectable element. The resulting\n * SelectCommand changes the `selected` state accordingly, so the elements can be rendered differently.\n * This action is also forwarded to the diagram server, if present, so it may react on the selection change.\n * Furthermore, the server can send such an action to the client in order to change the selection programmatically.\n */\nvar SelectAction = /** @class */ (function () {\n    function SelectAction(selectedElementsIDs, deselectedElementsIDs) {\n        if (selectedElementsIDs === void 0) { selectedElementsIDs = []; }\n        if (deselectedElementsIDs === void 0) { deselectedElementsIDs = []; }\n        this.selectedElementsIDs = selectedElementsIDs;\n        this.deselectedElementsIDs = deselectedElementsIDs;\n        this.kind = SelectAction.KIND;\n    }\n    SelectAction.KIND = 'elementSelected';\n    return SelectAction;\n}());\nexports.SelectAction = SelectAction;\n/**\n * Programmatic action for selecting or deselecting all elements.\n */\nvar SelectAllAction = /** @class */ (function () {\n    /**\n     * If `select` is true, all elements are selected, othewise they are deselected.\n     */\n    function SelectAllAction(select) {\n        if (select === void 0) { select = true; }\n        this.select = select;\n        this.kind = SelectAllAction.KIND;\n    }\n    SelectAllAction.KIND = 'allSelected';\n    return SelectAllAction;\n}());\nexports.SelectAllAction = SelectAllAction;\n/**\n * Request action for retrieving the current selection.\n */\nvar GetSelectionAction = /** @class */ (function () {\n    function GetSelectionAction(requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.requestId = requestId;\n        this.kind = GetSelectionAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    GetSelectionAction.create = function () {\n        return new GetSelectionAction(action_1.generateRequestId());\n    };\n    GetSelectionAction.KIND = 'getSelection';\n    return GetSelectionAction;\n}());\nexports.GetSelectionAction = GetSelectionAction;\nvar SelectionResult = /** @class */ (function () {\n    function SelectionResult(selectedElementsIDs, responseId) {\n        if (selectedElementsIDs === void 0) { selectedElementsIDs = []; }\n        this.selectedElementsIDs = selectedElementsIDs;\n        this.responseId = responseId;\n        this.kind = SelectionResult.KIND;\n    }\n    SelectionResult.KIND = 'selectionResult';\n    return SelectionResult;\n}());\nexports.SelectionResult = SelectionResult;\nvar SelectCommand = /** @class */ (function (_super) {\n    __extends(SelectCommand, _super);\n    function SelectCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.selected = [];\n        _this.deselected = [];\n        return _this;\n    }\n    SelectCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        this.action.selectedElementsIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof smodel_1.SChildElement && model_4.isSelectable(element)) {\n                _this.selected.push(element);\n            }\n        });\n        this.action.deselectedElementsIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof smodel_1.SChildElement && model_4.isSelectable(element)) {\n                _this.deselected.push(element);\n            }\n        });\n        return this.redo(context);\n    };\n    SelectCommand.prototype.undo = function (context) {\n        for (var _i = 0, _a = this.selected; _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.selected = false;\n        }\n        for (var _b = 0, _c = this.deselected; _b < _c.length; _b++) {\n            var element = _c[_b];\n            element.selected = true;\n        }\n        return context.root;\n    };\n    SelectCommand.prototype.redo = function (context) {\n        for (var _i = 0, _a = this.deselected; _i < _a.length; _i++) {\n            var element = _a[_i];\n            element.selected = false;\n        }\n        for (var _b = 0, _c = this.selected; _b < _c.length; _b++) {\n            var element = _c[_b];\n            element.selected = true;\n        }\n        return context.root;\n    };\n    SelectCommand.KIND = SelectAction.KIND;\n    SelectCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SelectAction])\n    ], SelectCommand);\n    return SelectCommand;\n}(command_1.Command));\nexports.SelectCommand = SelectCommand;\nvar SelectAllCommand = /** @class */ (function (_super) {\n    __extends(SelectAllCommand, _super);\n    function SelectAllCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.previousSelection = {};\n        return _this;\n    }\n    SelectAllCommand.prototype.execute = function (context) {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    };\n    SelectAllCommand.prototype.selectAll = function (element, newState) {\n        if (model_4.isSelectable(element)) {\n            this.previousSelection[element.id] = element.selected;\n            element.selected = newState;\n        }\n        for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            this.selectAll(child, newState);\n        }\n    };\n    SelectAllCommand.prototype.undo = function (context) {\n        var _this = this;\n        var index = context.root.index;\n        Object.keys(this.previousSelection).forEach(function (id) {\n            var element = index.getById(id);\n            if (element !== undefined && model_4.isSelectable(element))\n                element.selected = _this.previousSelection[id];\n        });\n        return context.root;\n    };\n    SelectAllCommand.prototype.redo = function (context) {\n        this.selectAll(context.root, this.action.select);\n        return context.root;\n    };\n    SelectAllCommand.KIND = SelectAllAction.KIND;\n    SelectAllCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SelectAllAction])\n    ], SelectAllCommand);\n    return SelectAllCommand;\n}(command_1.Command));\nexports.SelectAllCommand = SelectAllCommand;\nvar SelectMouseListener = /** @class */ (function (_super) {\n    __extends(SelectMouseListener, _super);\n    function SelectMouseListener() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.wasSelected = false;\n        _this.hasDragged = false;\n        return _this;\n    }\n    SelectMouseListener.prototype.mouseDown = function (target, event) {\n        var result = [];\n        if (event.button === 0) {\n            if (this.buttonHandlerRegistry !== undefined && target instanceof model_1.SButton && target.enabled) {\n                var buttonHandler = this.buttonHandlerRegistry.get(target.type);\n                if (buttonHandler !== undefined)\n                    return buttonHandler.buttonPressed(target);\n            }\n            var selectableTarget_1 = smodel_utils_1.findParentByFeature(target, model_4.isSelectable);\n            if (selectableTarget_1 !== undefined || target instanceof smodel_1.SModelRoot) {\n                this.hasDragged = false;\n                var deselect = [];\n                // multi-selection?\n                if (!browser_1.isCtrlOrCmd(event)) {\n                    deselect = iterable_1.toArray(target.root.index.all()\n                        .filter(function (element) { return model_4.isSelectable(element) && element.selected\n                        && !(selectableTarget_1 instanceof model_2.SRoutingHandle && element === selectableTarget_1.parent); }));\n                }\n                if (selectableTarget_1 !== undefined) {\n                    if (!selectableTarget_1.selected) {\n                        this.wasSelected = false;\n                        result.push(new SelectAction([selectableTarget_1.id], deselect.map(function (e) { return e.id; })));\n                        result.push(new zorder_1.BringToFrontAction([selectableTarget_1.id]));\n                        var routableDeselect = deselect.filter(function (e) { return e instanceof model_3.SRoutableElement; }).map(function (e) { return e.id; });\n                        if (selectableTarget_1 instanceof model_3.SRoutableElement)\n                            result.push(new edit_routing_1.SwitchEditModeAction([selectableTarget_1.id], routableDeselect));\n                        else if (routableDeselect.length > 0)\n                            result.push(new edit_routing_1.SwitchEditModeAction([], routableDeselect));\n                    }\n                    else if (browser_1.isCtrlOrCmd(event)) {\n                        this.wasSelected = false;\n                        result.push(new SelectAction([], [selectableTarget_1.id]));\n                        if (selectableTarget_1 instanceof model_3.SRoutableElement)\n                            result.push(new edit_routing_1.SwitchEditModeAction([], [selectableTarget_1.id]));\n                    }\n                    else {\n                        this.wasSelected = true;\n                    }\n                }\n                else {\n                    result.push(new SelectAction([], deselect.map(function (e) { return e.id; })));\n                    var routableDeselect = deselect.filter(function (e) { return e instanceof model_3.SRoutableElement; }).map(function (e) { return e.id; });\n                    if (routableDeselect.length > 0)\n                        result.push(new edit_routing_1.SwitchEditModeAction([], routableDeselect));\n                }\n            }\n        }\n        return result;\n    };\n    SelectMouseListener.prototype.mouseMove = function (target, event) {\n        this.hasDragged = true;\n        return [];\n    };\n    SelectMouseListener.prototype.mouseUp = function (target, event) {\n        if (event.button === 0) {\n            if (!this.hasDragged) {\n                var selectableTarget = smodel_utils_1.findParentByFeature(target, model_4.isSelectable);\n                if (selectableTarget !== undefined && this.wasSelected) {\n                    return [new SelectAction([selectableTarget.id], [])];\n                }\n            }\n        }\n        this.hasDragged = false;\n        return [];\n    };\n    SelectMouseListener.prototype.decorate = function (vnode, element) {\n        var selectableTarget = smodel_utils_1.findParentByFeature(element, model_4.isSelectable);\n        if (selectableTarget !== undefined)\n            vnode_utils_1.setClass(vnode, 'selected', selectableTarget.selected);\n        return vnode;\n    };\n    __decorate([\n        inversify_1.inject(button_handler_1.ButtonHandlerRegistry), inversify_1.optional(),\n        __metadata(\"design:type\", button_handler_1.ButtonHandlerRegistry)\n    ], SelectMouseListener.prototype, \"buttonHandlerRegistry\", void 0);\n    return SelectMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.SelectMouseListener = SelectMouseListener;\nvar GetSelectionCommand = /** @class */ (function (_super) {\n    __extends(GetSelectionCommand, _super);\n    function GetSelectionCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.previousSelection = {};\n        return _this;\n    }\n    GetSelectionCommand.prototype.retrieveResult = function (context) {\n        var selection = context.root.index.all()\n            .filter(function (e) { return model_4.isSelectable(e) && e.selected; })\n            .map(function (e) { return e.id; });\n        return new SelectionResult(iterable_1.toArray(selection), this.action.requestId);\n    };\n    GetSelectionCommand.KIND = GetSelectionAction.KIND;\n    GetSelectionCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [GetSelectionAction])\n    ], GetSelectionCommand);\n    return GetSelectionCommand;\n}(request_command_1.ModelRequestCommand));\nexports.GetSelectionCommand = GetSelectionCommand;\nvar SelectKeyboardListener = /** @class */ (function (_super) {\n    __extends(SelectKeyboardListener, _super);\n    function SelectKeyboardListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SelectKeyboardListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyA', 'ctrlCmd')) {\n            return [new SelectAllAction()];\n        }\n        return [];\n    };\n    return SelectKeyboardListener;\n}(key_tool_1.KeyListener));\nexports.SelectKeyboardListener = SelectKeyboardListener;\n//# sourceMappingURL=select.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar undo_redo_1 = require(\"./undo-redo\");\nvar undoRedoModule = new inversify_1.ContainerModule(function (bind) {\n    bind(types_1.TYPES.KeyListener).to(undo_redo_1.UndoRedoKeyListener);\n});\nexports.default = undoRedoModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar browser_1 = require(\"../../utils/browser\");\nvar UndoAction = /** @class */ (function () {\n    function UndoAction() {\n        this.kind = UndoAction.KIND;\n    }\n    UndoAction.KIND = 'undo';\n    return UndoAction;\n}());\nexports.UndoAction = UndoAction;\nvar RedoAction = /** @class */ (function () {\n    function RedoAction() {\n        this.kind = RedoAction.KIND;\n    }\n    RedoAction.KIND = 'redo';\n    return RedoAction;\n}());\nexports.RedoAction = RedoAction;\nvar UndoRedoKeyListener = /** @class */ (function (_super) {\n    __extends(UndoRedoKeyListener, _super);\n    function UndoRedoKeyListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    UndoRedoKeyListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyZ', 'ctrlCmd'))\n            return [new UndoAction];\n        if (keyboard_1.matchesKeystroke(event, 'KeyZ', 'ctrlCmd', 'shift') || (!browser_1.isMac() && keyboard_1.matchesKeystroke(event, 'KeyY', 'ctrlCmd')))\n            return [new RedoAction];\n        return [];\n    };\n    return UndoRedoKeyListener;\n}(key_tool_1.KeyListener));\nexports.UndoRedoKeyListener = UndoRedoKeyListener;\n//# sourceMappingURL=undo-redo.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar update_model_1 = require(\"./update-model\");\nvar updateModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, update_model_1.UpdateModelCommand);\n});\nexports.default = updateModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nfunction forEachMatch(matchResult, callback) {\n    Object.keys(matchResult).forEach(function (id) { return callback(id, matchResult[id]); });\n}\nexports.forEachMatch = forEachMatch;\nvar ModelMatcher = /** @class */ (function () {\n    function ModelMatcher() {\n    }\n    ModelMatcher.prototype.match = function (left, right) {\n        var result = {};\n        this.matchLeft(left, result);\n        this.matchRight(right, result);\n        return result;\n    };\n    ModelMatcher.prototype.matchLeft = function (element, result, parentId) {\n        var match = result[element.id];\n        if (match !== undefined) {\n            match.left = element;\n            match.leftParentId = parentId;\n        }\n        else {\n            match = {\n                left: element,\n                leftParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (smodel_1.isParent(element)) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.matchLeft(child, result, element.id);\n            }\n        }\n    };\n    ModelMatcher.prototype.matchRight = function (element, result, parentId) {\n        var match = result[element.id];\n        if (match !== undefined) {\n            match.right = element;\n            match.rightParentId = parentId;\n        }\n        else {\n            match = {\n                right: element,\n                rightParentId: parentId\n            };\n            result[element.id] = match;\n        }\n        if (smodel_1.isParent(element)) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.matchRight(child, result, element.id);\n            }\n        }\n    };\n    return ModelMatcher;\n}());\nexports.ModelMatcher = ModelMatcher;\nfunction applyMatches(root, matches) {\n    var index;\n    if (root instanceof smodel_1.SModelRoot) {\n        index = root.index;\n    }\n    else {\n        index = new smodel_1.SModelIndex();\n        index.add(root);\n    }\n    for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n        var match = matches_1[_i];\n        var newElementInserted = false;\n        if (match.left !== undefined && match.leftParentId !== undefined) {\n            var parent_1 = index.getById(match.leftParentId);\n            if (parent_1 !== undefined && parent_1.children !== undefined) {\n                var i = parent_1.children.indexOf(match.left);\n                if (i >= 0) {\n                    if (match.right !== undefined && match.leftParentId === match.rightParentId) {\n                        parent_1.children.splice(i, 1, match.right);\n                        newElementInserted = true;\n                    }\n                    else {\n                        parent_1.children.splice(i, 1);\n                    }\n                }\n                index.remove(match.left);\n            }\n        }\n        if (!newElementInserted && match.right !== undefined && match.rightParentId !== undefined) {\n            var parent_2 = index.getById(match.rightParentId);\n            if (parent_2 !== undefined) {\n                if (parent_2.children === undefined)\n                    parent_2.children = [];\n                parent_2.children.push(match.right);\n            }\n        }\n    }\n}\nexports.applyMatches = applyMatches;\n//# sourceMappingURL=model-matching.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar geometry_1 = require(\"../../utils/geometry\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar command_1 = require(\"../../base/commands/command\");\nvar fade_1 = require(\"../fade/fade\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar move_1 = require(\"../move/move\");\nvar model_1 = require(\"../fade/model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../bounds/model\");\nvar viewport_root_1 = require(\"../viewport/viewport-root\");\nvar model_4 = require(\"../select/model\");\nvar model_matching_1 = require(\"./model-matching\");\nvar resize_1 = require(\"../bounds/resize\");\nvar types_1 = require(\"../../base/types\");\nvar model_5 = require(\"../viewport/model\");\nvar routing_1 = require(\"../routing/routing\");\nvar model_6 = require(\"../routing/model\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\n/**\n * Sent from the model source to the client in order to update the model. If no model is present yet,\n * this behaves the same as a SetModelAction. The transition from the old model to the new one can be animated.\n */\nvar UpdateModelAction = /** @class */ (function () {\n    function UpdateModelAction(input, animate, cause) {\n        if (animate === void 0) { animate = true; }\n        this.animate = animate;\n        this.cause = cause;\n        this.kind = UpdateModelAction.KIND;\n        if (input.id !== undefined)\n            this.newRoot = input;\n        else\n            this.matches = input;\n    }\n    UpdateModelAction.KIND = 'updateModel';\n    return UpdateModelAction;\n}());\nexports.UpdateModelAction = UpdateModelAction;\nvar UpdateModelCommand = /** @class */ (function (_super) {\n    __extends(UpdateModelCommand, _super);\n    function UpdateModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    UpdateModelCommand.prototype.execute = function (context) {\n        var newRoot;\n        if (this.action.newRoot !== undefined) {\n            newRoot = context.modelFactory.createRoot(this.action.newRoot);\n        }\n        else {\n            newRoot = context.modelFactory.createRoot(context.root);\n            if (this.action.matches !== undefined)\n                this.applyMatches(newRoot, this.action.matches, context);\n        }\n        this.oldRoot = context.root;\n        this.newRoot = newRoot;\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    };\n    UpdateModelCommand.prototype.performUpdate = function (oldRoot, newRoot, context) {\n        if ((this.action.animate === undefined || this.action.animate) && oldRoot.id === newRoot.id) {\n            var matchResult = void 0;\n            if (this.action.matches === undefined) {\n                var matcher = new model_matching_1.ModelMatcher();\n                matchResult = matcher.match(oldRoot, newRoot);\n            }\n            else {\n                matchResult = this.convertToMatchResult(this.action.matches, oldRoot, newRoot);\n            }\n            var animationOrRoot = this.computeAnimation(newRoot, matchResult, context);\n            if (animationOrRoot instanceof animation_1.Animation)\n                return animationOrRoot.start();\n            else\n                return animationOrRoot;\n        }\n        else {\n            if (oldRoot.type === newRoot.type && geometry_1.isValidDimension(oldRoot.canvasBounds))\n                newRoot.canvasBounds = oldRoot.canvasBounds;\n            if (model_5.isViewport(oldRoot) && model_5.isViewport(newRoot)) {\n                newRoot.zoom = oldRoot.zoom;\n                newRoot.scroll = oldRoot.scroll;\n            }\n            return newRoot;\n        }\n    };\n    UpdateModelCommand.prototype.applyMatches = function (root, matches, context) {\n        var index = root.index;\n        for (var _i = 0, matches_1 = matches; _i < matches_1.length; _i++) {\n            var match = matches_1[_i];\n            if (match.left !== undefined) {\n                var element = index.getById(match.left.id);\n                if (element instanceof smodel_1.SChildElement)\n                    element.parent.remove(element);\n            }\n        }\n        for (var _a = 0, matches_2 = matches; _a < matches_2.length; _a++) {\n            var match = matches_2[_a];\n            if (match.right !== undefined) {\n                var element = context.modelFactory.createElement(match.right);\n                var parent_1 = void 0;\n                if (match.rightParentId !== undefined)\n                    parent_1 = index.getById(match.rightParentId);\n                if (parent_1 instanceof smodel_1.SParentElement)\n                    parent_1.add(element);\n                else\n                    root.add(element);\n            }\n        }\n    };\n    UpdateModelCommand.prototype.convertToMatchResult = function (matches, leftRoot, rightRoot) {\n        var result = {};\n        for (var _i = 0, matches_3 = matches; _i < matches_3.length; _i++) {\n            var match = matches_3[_i];\n            var converted = {};\n            var id = undefined;\n            if (match.left !== undefined) {\n                id = match.left.id;\n                converted.left = leftRoot.index.getById(id);\n                converted.leftParentId = match.leftParentId;\n            }\n            if (match.right !== undefined) {\n                id = match.right.id;\n                converted.right = rightRoot.index.getById(id);\n                converted.rightParentId = match.rightParentId;\n            }\n            if (id !== undefined)\n                result[id] = converted;\n        }\n        return result;\n    };\n    UpdateModelCommand.prototype.computeAnimation = function (newRoot, matchResult, context) {\n        var _this = this;\n        var animationData = {\n            fades: []\n        };\n        model_matching_1.forEachMatch(matchResult, function (id, match) {\n            if (match.left !== undefined && match.right !== undefined) {\n                // The element is still there, but may have been moved\n                _this.updateElement(match.left, match.right, animationData);\n            }\n            else if (match.right !== undefined) {\n                // An element has been added\n                var right = match.right;\n                if (model_1.isFadeable(right)) {\n                    right.opacity = 0;\n                    animationData.fades.push({\n                        element: right,\n                        type: 'in'\n                    });\n                }\n            }\n            else if (match.left instanceof smodel_1.SChildElement) {\n                // An element has been removed\n                var left = match.left;\n                if (model_1.isFadeable(left) && match.leftParentId !== undefined) {\n                    if (!smodel_utils_1.containsSome(newRoot, left)) {\n                        var parent_2 = newRoot.index.getById(match.leftParentId);\n                        if (parent_2 instanceof smodel_1.SParentElement) {\n                            var leftCopy = context.modelFactory.createElement(left);\n                            parent_2.add(leftCopy);\n                            animationData.fades.push({\n                                element: leftCopy,\n                                type: 'out'\n                            });\n                        }\n                    }\n                }\n            }\n        });\n        var animations = this.createAnimations(animationData, newRoot, context);\n        if (animations.length >= 2) {\n            return new animation_1.CompoundAnimation(newRoot, context, animations);\n        }\n        else if (animations.length === 1) {\n            return animations[0];\n        }\n        else {\n            return newRoot;\n        }\n    };\n    UpdateModelCommand.prototype.updateElement = function (left, right, animationData) {\n        if (model_2.isLocateable(left) && model_2.isLocateable(right)) {\n            var leftPos = left.position;\n            var rightPos = right.position;\n            if (!geometry_1.almostEquals(leftPos.x, rightPos.x) || !geometry_1.almostEquals(leftPos.y, rightPos.y)) {\n                if (animationData.moves === undefined)\n                    animationData.moves = [];\n                animationData.moves.push({\n                    element: right,\n                    fromPosition: leftPos,\n                    toPosition: rightPos\n                });\n                right.position = leftPos;\n            }\n        }\n        if (model_3.isSizeable(left) && model_3.isSizeable(right)) {\n            if (!geometry_1.isValidDimension(right.bounds)) {\n                right.bounds = {\n                    x: right.bounds.x,\n                    y: right.bounds.y,\n                    width: left.bounds.width,\n                    height: left.bounds.height\n                };\n            }\n            else if (!geometry_1.almostEquals(left.bounds.width, right.bounds.width)\n                || !geometry_1.almostEquals(left.bounds.height, right.bounds.height)) {\n                if (animationData.resizes === undefined)\n                    animationData.resizes = [];\n                animationData.resizes.push({\n                    element: right,\n                    fromDimension: {\n                        width: left.bounds.width,\n                        height: left.bounds.height,\n                    },\n                    toDimension: {\n                        width: right.bounds.width,\n                        height: right.bounds.height,\n                    }\n                });\n            }\n        }\n        if (left instanceof model_6.SRoutableElement && right instanceof model_6.SRoutableElement && this.edgeRouterRegistry) {\n            if (animationData.edgeMementi === undefined)\n                animationData.edgeMementi = [];\n            animationData.edgeMementi.push({\n                edge: right,\n                before: this.takeSnapshot(left),\n                after: this.takeSnapshot(right),\n            });\n        }\n        if (model_4.isSelectable(left) && model_4.isSelectable(right)) {\n            right.selected = left.selected;\n        }\n        if (left instanceof smodel_1.SModelRoot && right instanceof smodel_1.SModelRoot) {\n            right.canvasBounds = left.canvasBounds;\n        }\n        if (left instanceof viewport_root_1.ViewportRootElement && right instanceof viewport_root_1.ViewportRootElement) {\n            right.scroll = left.scroll;\n            right.zoom = left.zoom;\n        }\n    };\n    UpdateModelCommand.prototype.takeSnapshot = function (edge) {\n        var router = this.edgeRouterRegistry.get(edge.routerKind);\n        return router.takeSnapshot(edge);\n    };\n    UpdateModelCommand.prototype.createAnimations = function (data, root, context) {\n        var animations = [];\n        if (data.fades.length > 0) {\n            animations.push(new fade_1.FadeAnimation(root, data.fades, context, true));\n        }\n        if (data.moves !== undefined && data.moves.length > 0) {\n            var movesMap = new Map;\n            for (var _i = 0, _a = data.moves; _i < _a.length; _i++) {\n                var move = _a[_i];\n                movesMap.set(move.element.id, move);\n            }\n            animations.push(new move_1.MoveAnimation(root, movesMap, context, false));\n        }\n        if (data.resizes !== undefined && data.resizes.length > 0) {\n            var resizesMap = new Map;\n            for (var _b = 0, _c = data.resizes; _b < _c.length; _b++) {\n                var resize = _c[_b];\n                resizesMap.set(resize.element.id, resize);\n            }\n            animations.push(new resize_1.ResizeAnimation(root, resizesMap, context, false));\n        }\n        if (data.edgeMementi !== undefined && data.edgeMementi.length > 0) {\n            animations.push(new move_1.MorphEdgesAnimation(root, data.edgeMementi, context, false));\n        }\n        return animations;\n    };\n    UpdateModelCommand.prototype.undo = function (context) {\n        return this.performUpdate(this.newRoot, this.oldRoot, context);\n    };\n    UpdateModelCommand.prototype.redo = function (context) {\n        return this.performUpdate(this.oldRoot, this.newRoot, context);\n    };\n    UpdateModelCommand.KIND = UpdateModelAction.KIND;\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry), inversify_1.optional(),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], UpdateModelCommand.prototype, \"edgeRouterRegistry\", void 0);\n    UpdateModelCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [UpdateModelAction])\n    ], UpdateModelCommand);\n    return UpdateModelCommand;\n}(command_1.Command));\nexports.UpdateModelCommand = UpdateModelCommand;\n//# sourceMappingURL=update-model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar keyboard_1 = require(\"../../utils/keyboard\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar command_1 = require(\"../../base/commands/command\");\nvar key_tool_1 = require(\"../../base/views/key-tool\");\nvar model_1 = require(\"../bounds/model\");\nvar model_2 = require(\"../select/model\");\nvar viewport_1 = require(\"./viewport\");\nvar model_3 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\n/**\n * Triggered when the user requests the viewer to center on the current model. The resulting\n * CenterCommand changes the scroll setting of the viewport accordingly.\n * It also resets the zoom to its default if retainZoom is false.\n * This action can also be sent from the model source to the client in order to perform such a\n * viewport change programmatically.\n */\nvar CenterAction = /** @class */ (function () {\n    function CenterAction(elementIds, animate, retainZoom) {\n        if (animate === void 0) { animate = true; }\n        if (retainZoom === void 0) { retainZoom = false; }\n        this.elementIds = elementIds;\n        this.animate = animate;\n        this.retainZoom = retainZoom;\n        this.kind = CenterAction.KIND;\n    }\n    CenterAction.KIND = 'center';\n    return CenterAction;\n}());\nexports.CenterAction = CenterAction;\n/**\n * Triggered when the user requests the viewer to fit its content to the available drawing area.\n * The resulting FitToScreenCommand changes the zoom and scroll settings of the viewport so the model\n * can be shown completely. This action can also be sent from the model source to the client in order\n * to perform such a viewport change programmatically.\n */\nvar FitToScreenAction = /** @class */ (function () {\n    function FitToScreenAction(elementIds, padding, maxZoom, animate) {\n        if (animate === void 0) { animate = true; }\n        this.elementIds = elementIds;\n        this.padding = padding;\n        this.maxZoom = maxZoom;\n        this.animate = animate;\n        this.kind = FitToScreenAction.KIND;\n    }\n    FitToScreenAction.KIND = 'fit';\n    return FitToScreenAction;\n}());\nexports.FitToScreenAction = FitToScreenAction;\nvar BoundsAwareViewportCommand = /** @class */ (function (_super) {\n    __extends(BoundsAwareViewportCommand, _super);\n    function BoundsAwareViewportCommand(animate) {\n        var _this = _super.call(this) || this;\n        _this.animate = animate;\n        return _this;\n    }\n    BoundsAwareViewportCommand.prototype.initialize = function (model) {\n        var _this = this;\n        if (model_3.isViewport(model)) {\n            this.oldViewport = {\n                scroll: model.scroll,\n                zoom: model.zoom\n            };\n            var allBounds_1 = [];\n            this.getElementIds().forEach(function (id) {\n                var element = model.index.getById(id);\n                if (element && model_1.isBoundsAware(element))\n                    allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n            });\n            if (allBounds_1.length === 0) {\n                model.index.all().forEach(function (element) {\n                    if (model_2.isSelectable(element) && element.selected && model_1.isBoundsAware(element))\n                        allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n                });\n            }\n            if (allBounds_1.length === 0) {\n                model.index.all().forEach(function (element) {\n                    if (model_1.isBoundsAware(element))\n                        allBounds_1.push(_this.boundsInViewport(element, element.bounds, model));\n                });\n            }\n            if (allBounds_1.length !== 0) {\n                var bounds = allBounds_1.reduce(function (b0, b1) { return geometry_1.combine(b0, b1); });\n                if (geometry_1.isValidDimension(bounds))\n                    this.newViewport = this.getNewViewport(bounds, model);\n            }\n        }\n    };\n    BoundsAwareViewportCommand.prototype.boundsInViewport = function (element, bounds, viewport) {\n        if (element instanceof smodel_1.SChildElement && element.parent !== viewport)\n            return this.boundsInViewport(element.parent, element.parent.localToParent(bounds), viewport);\n        else\n            return bounds;\n    };\n    BoundsAwareViewportCommand.prototype.execute = function (context) {\n        this.initialize(context.root);\n        return this.redo(context);\n    };\n    BoundsAwareViewportCommand.prototype.undo = function (context) {\n        var model = context.root;\n        if (model_3.isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate)\n                return new viewport_1.ViewportAnimation(model, this.newViewport, this.oldViewport, context).start();\n            else {\n                model.scroll = this.oldViewport.scroll;\n                model.zoom = this.oldViewport.zoom;\n            }\n        }\n        return model;\n    };\n    BoundsAwareViewportCommand.prototype.redo = function (context) {\n        var model = context.root;\n        if (model_3.isViewport(model) && this.newViewport !== undefined && !this.equal(this.newViewport, this.oldViewport)) {\n            if (this.animate) {\n                return new viewport_1.ViewportAnimation(model, this.oldViewport, this.newViewport, context).start();\n            }\n            else {\n                model.scroll = this.newViewport.scroll;\n                model.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    };\n    BoundsAwareViewportCommand.prototype.equal = function (vp1, vp2) {\n        return vp1.zoom === vp2.zoom && vp1.scroll.x === vp2.scroll.x && vp1.scroll.y === vp2.scroll.y;\n    };\n    BoundsAwareViewportCommand = __decorate([\n        inversify_1.injectable(),\n        __metadata(\"design:paramtypes\", [Boolean])\n    ], BoundsAwareViewportCommand);\n    return BoundsAwareViewportCommand;\n}(command_1.Command));\nexports.BoundsAwareViewportCommand = BoundsAwareViewportCommand;\nvar CenterCommand = /** @class */ (function (_super) {\n    __extends(CenterCommand, _super);\n    function CenterCommand(action) {\n        var _this = _super.call(this, action.animate) || this;\n        _this.action = action;\n        return _this;\n    }\n    CenterCommand.prototype.getElementIds = function () {\n        return this.action.elementIds;\n    };\n    CenterCommand.prototype.getNewViewport = function (bounds, model) {\n        if (!geometry_1.isValidDimension(model.canvasBounds)) {\n            return undefined;\n        }\n        var zoom = (this.action.retainZoom && model_3.isViewport(model)) ? model.zoom : 1;\n        var c = geometry_1.center(bounds);\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width / zoom,\n                y: c.y - 0.5 * model.canvasBounds.height / zoom\n            },\n            zoom: zoom\n        };\n    };\n    CenterCommand.KIND = CenterAction.KIND;\n    CenterCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [CenterAction])\n    ], CenterCommand);\n    return CenterCommand;\n}(BoundsAwareViewportCommand));\nexports.CenterCommand = CenterCommand;\nvar FitToScreenCommand = /** @class */ (function (_super) {\n    __extends(FitToScreenCommand, _super);\n    function FitToScreenCommand(action) {\n        var _this = _super.call(this, action.animate) || this;\n        _this.action = action;\n        return _this;\n    }\n    FitToScreenCommand.prototype.getElementIds = function () {\n        return this.action.elementIds;\n    };\n    FitToScreenCommand.prototype.getNewViewport = function (bounds, model) {\n        if (!geometry_1.isValidDimension(model.canvasBounds)) {\n            return undefined;\n        }\n        var c = geometry_1.center(bounds);\n        var delta = this.action.padding === undefined\n            ? 0\n            : 2 * this.action.padding;\n        var zoom = Math.min(model.canvasBounds.width / (bounds.width + delta), model.canvasBounds.height / (bounds.height + delta));\n        if (this.action.maxZoom !== undefined)\n            zoom = Math.min(zoom, this.action.maxZoom);\n        if (zoom === Infinity) {\n            zoom = 1;\n        }\n        return {\n            scroll: {\n                x: c.x - 0.5 * model.canvasBounds.width / zoom,\n                y: c.y - 0.5 * model.canvasBounds.height / zoom\n            },\n            zoom: zoom\n        };\n    };\n    FitToScreenCommand.KIND = FitToScreenAction.KIND;\n    FitToScreenCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [FitToScreenAction])\n    ], FitToScreenCommand);\n    return FitToScreenCommand;\n}(BoundsAwareViewportCommand));\nexports.FitToScreenCommand = FitToScreenCommand;\nvar CenterKeyboardListener = /** @class */ (function (_super) {\n    __extends(CenterKeyboardListener, _super);\n    function CenterKeyboardListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CenterKeyboardListener.prototype.keyDown = function (element, event) {\n        if (keyboard_1.matchesKeystroke(event, 'KeyC', 'ctrlCmd', 'shift'))\n            return [new CenterAction([])];\n        if (keyboard_1.matchesKeystroke(event, 'KeyF', 'ctrlCmd', 'shift'))\n            return [new FitToScreenAction([])];\n        return [];\n    };\n    return CenterKeyboardListener;\n}(key_tool_1.KeyListener));\nexports.CenterKeyboardListener = CenterKeyboardListener;\n//# sourceMappingURL=center-fit.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar center_fit_1 = require(\"./center-fit\");\nvar viewport_1 = require(\"./viewport\");\nvar scroll_1 = require(\"./scroll\");\nvar zoom_1 = require(\"./zoom\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar viewportModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, center_fit_1.CenterCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, center_fit_1.FitToScreenCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, viewport_1.SetViewportCommand);\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, viewport_1.GetViewportCommand);\n    bind(types_1.TYPES.KeyListener).to(center_fit_1.CenterKeyboardListener);\n    bind(types_1.TYPES.MouseListener).to(scroll_1.ScrollMouseListener);\n    bind(types_1.TYPES.MouseListener).to(zoom_1.ZoomMouseListener);\n});\nexports.default = viewportModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nexports.viewportFeature = Symbol('viewportFeature');\nfunction isViewport(element) {\n    return element instanceof smodel_1.SModelRoot\n        && element.hasFeature(exports.viewportFeature)\n        && 'zoom' in element\n        && 'scroll' in element;\n}\nexports.isViewport = isViewport;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar viewport_1 = require(\"./viewport\");\nvar model_1 = require(\"./model\");\nvar model_2 = require(\"../move/model\");\nvar model_3 = require(\"../routing/model\");\nfunction isScrollable(element) {\n    return 'scroll' in element;\n}\nexports.isScrollable = isScrollable;\nvar ScrollMouseListener = /** @class */ (function (_super) {\n    __extends(ScrollMouseListener, _super);\n    function ScrollMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ScrollMouseListener.prototype.mouseDown = function (target, event) {\n        var moveable = smodel_utils_1.findParentByFeature(target, model_2.isMoveable);\n        if (moveable === undefined && !(target instanceof model_3.SRoutingHandle)) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport)\n                this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n            else\n                this.lastScrollPosition = undefined;\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseMove = function (target, event) {\n        if (event.buttons === 0)\n            this.mouseUp(target, event);\n        else if (this.lastScrollPosition) {\n            var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n            if (viewport) {\n                var dx = (event.pageX - this.lastScrollPosition.x) / viewport.zoom;\n                var dy = (event.pageY - this.lastScrollPosition.y) / viewport.zoom;\n                var newViewport = {\n                    scroll: {\n                        x: viewport.scroll.x - dx,\n                        y: viewport.scroll.y - dy,\n                    },\n                    zoom: viewport.zoom\n                };\n                this.lastScrollPosition = { x: event.pageX, y: event.pageY };\n                return [new viewport_1.SetViewportAction(viewport.id, newViewport, false)];\n            }\n        }\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseEnter = function (target, event) {\n        if (target instanceof smodel_1.SModelRoot && event.buttons === 0)\n            this.mouseUp(target, event);\n        return [];\n    };\n    ScrollMouseListener.prototype.mouseUp = function (target, event) {\n        this.lastScrollPosition = undefined;\n        return [];\n    };\n    return ScrollMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ScrollMouseListener = ScrollMouseListener;\n//# sourceMappingURL=scroll.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar model_1 = require(\"./model\");\nvar model_2 = require(\"../export/model\");\n/**\n * Model root element that defines a viewport, so it transforms the coordinate system with\n * a `scroll` translation and a `zoom` scaling.\n */\nvar ViewportRootElement = /** @class */ (function (_super) {\n    __extends(ViewportRootElement, _super);\n    function ViewportRootElement(index) {\n        var _this = _super.call(this, index) || this;\n        _this.scroll = { x: 0, y: 0 };\n        _this.zoom = 1;\n        return _this;\n    }\n    ViewportRootElement.prototype.localToParent = function (point) {\n        var result = {\n            x: (point.x - this.scroll.x) * this.zoom,\n            y: (point.y - this.scroll.y) * this.zoom,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point)) {\n            result.width = point.width * this.zoom;\n            result.height = point.height * this.zoom;\n        }\n        return result;\n    };\n    ViewportRootElement.prototype.parentToLocal = function (point) {\n        var result = {\n            x: (point.x / this.zoom) + this.scroll.x,\n            y: (point.y / this.zoom) + this.scroll.y,\n            width: -1,\n            height: -1\n        };\n        if (geometry_1.isBounds(point) && geometry_1.isValidDimension(point)) {\n            result.width = point.width / this.zoom;\n            result.height = point.height / this.zoom;\n        }\n        return result;\n    };\n    ViewportRootElement.DEFAULT_FEATURES = [model_1.viewportFeature, model_2.exportFeature];\n    return ViewportRootElement;\n}(smodel_1.SModelRoot));\nexports.ViewportRootElement = ViewportRootElement;\n//# sourceMappingURL=viewport-root.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"../../utils/geometry\");\nvar action_1 = require(\"../../base/actions/action\");\nvar command_1 = require(\"../../base/commands/command\");\nvar animation_1 = require(\"../../base/animations/animation\");\nvar model_1 = require(\"./model\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar request_command_1 = require(\"../../base/commands/request-command\");\nvar SetViewportAction = /** @class */ (function () {\n    function SetViewportAction(elementId, newViewport, animate) {\n        this.elementId = elementId;\n        this.newViewport = newViewport;\n        this.animate = animate;\n        this.kind = SetViewportAction.KIND;\n    }\n    SetViewportAction.KIND = 'viewport';\n    return SetViewportAction;\n}());\nexports.SetViewportAction = SetViewportAction;\n/**\n * Request action for retrieving the current viewport and canvas bounds.\n */\nvar GetViewportAction = /** @class */ (function () {\n    function GetViewportAction(requestId) {\n        if (requestId === void 0) { requestId = ''; }\n        this.requestId = requestId;\n        this.kind = GetViewportAction.KIND;\n    }\n    /** Factory function to dispatch a request with the `IActionDispatcher` */\n    GetViewportAction.create = function () {\n        return new GetViewportAction(action_1.generateRequestId());\n    };\n    GetViewportAction.KIND = 'getViewport';\n    return GetViewportAction;\n}());\nexports.GetViewportAction = GetViewportAction;\nvar ViewportResult = /** @class */ (function () {\n    function ViewportResult(viewport, canvasBounds, responseId) {\n        this.viewport = viewport;\n        this.canvasBounds = canvasBounds;\n        this.responseId = responseId;\n        this.kind = ViewportResult.KIND;\n    }\n    ViewportResult.KIND = 'viewportResult';\n    return ViewportResult;\n}());\nexports.ViewportResult = ViewportResult;\nvar SetViewportCommand = /** @class */ (function (_super) {\n    __extends(SetViewportCommand, _super);\n    function SetViewportCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.newViewport = action.newViewport;\n        return _this;\n    }\n    SetViewportCommand_1 = SetViewportCommand;\n    SetViewportCommand.prototype.execute = function (context) {\n        var model = context.root;\n        var element = model.index.getById(this.action.elementId);\n        if (element && model_1.isViewport(element)) {\n            this.element = element;\n            this.oldViewport = {\n                scroll: this.element.scroll,\n                zoom: this.element.zoom,\n            };\n            if (this.action.animate)\n                return new ViewportAnimation(this.element, this.oldViewport, this.newViewport, context).start();\n            else {\n                this.element.scroll = this.newViewport.scroll;\n                this.element.zoom = this.newViewport.zoom;\n            }\n        }\n        return model;\n    };\n    SetViewportCommand.prototype.undo = function (context) {\n        return new ViewportAnimation(this.element, this.newViewport, this.oldViewport, context).start();\n    };\n    SetViewportCommand.prototype.redo = function (context) {\n        return new ViewportAnimation(this.element, this.oldViewport, this.newViewport, context).start();\n    };\n    SetViewportCommand.prototype.merge = function (command, context) {\n        if (!this.action.animate && command instanceof SetViewportCommand_1 && this.element === command.element) {\n            this.newViewport = command.newViewport;\n            return true;\n        }\n        return false;\n    };\n    var SetViewportCommand_1;\n    SetViewportCommand.KIND = SetViewportAction.KIND;\n    SetViewportCommand = SetViewportCommand_1 = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [SetViewportAction])\n    ], SetViewportCommand);\n    return SetViewportCommand;\n}(command_1.MergeableCommand));\nexports.SetViewportCommand = SetViewportCommand;\nvar GetViewportCommand = /** @class */ (function (_super) {\n    __extends(GetViewportCommand, _super);\n    function GetViewportCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    GetViewportCommand.prototype.retrieveResult = function (context) {\n        var elem = context.root;\n        var viewport;\n        if (model_1.isViewport(elem)) {\n            viewport = { scroll: elem.scroll, zoom: elem.zoom };\n        }\n        else {\n            viewport = { scroll: geometry_1.ORIGIN_POINT, zoom: 1 };\n        }\n        return new ViewportResult(viewport, elem.canvasBounds, this.action.requestId);\n    };\n    GetViewportCommand.KIND = GetViewportAction.KIND;\n    GetViewportCommand = __decorate([\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [GetViewportAction])\n    ], GetViewportCommand);\n    return GetViewportCommand;\n}(request_command_1.ModelRequestCommand));\nexports.GetViewportCommand = GetViewportCommand;\nvar ViewportAnimation = /** @class */ (function (_super) {\n    __extends(ViewportAnimation, _super);\n    function ViewportAnimation(element, oldViewport, newViewport, context) {\n        var _this = _super.call(this, context) || this;\n        _this.element = element;\n        _this.oldViewport = oldViewport;\n        _this.newViewport = newViewport;\n        _this.context = context;\n        _this.zoomFactor = Math.log(newViewport.zoom / oldViewport.zoom);\n        return _this;\n    }\n    ViewportAnimation.prototype.tween = function (t, context) {\n        this.element.scroll = {\n            x: (1 - t) * this.oldViewport.scroll.x + t * this.newViewport.scroll.x,\n            y: (1 - t) * this.oldViewport.scroll.y + t * this.newViewport.scroll.y\n        };\n        this.element.zoom = this.oldViewport.zoom * Math.exp(t * this.zoomFactor);\n        return context.root;\n    };\n    return ViewportAnimation;\n}(animation_1.Animation));\nexports.ViewportAnimation = ViewportAnimation;\n//# sourceMappingURL=viewport.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browser_1 = require(\"../../utils/browser\");\nvar mouse_tool_1 = require(\"../../base/views/mouse-tool\");\nvar smodel_utils_1 = require(\"../../base/model/smodel-utils\");\nvar viewport_1 = require(\"./viewport\");\nvar model_1 = require(\"./model\");\nfunction isZoomable(element) {\n    return 'zoom' in element;\n}\nexports.isZoomable = isZoomable;\nfunction getZoom(label) {\n    var zoom = 1;\n    var viewport = smodel_utils_1.findParentByFeature(label, model_1.isViewport);\n    if (viewport) {\n        zoom = viewport.zoom;\n    }\n    return zoom;\n}\nexports.getZoom = getZoom;\nvar ZoomMouseListener = /** @class */ (function (_super) {\n    __extends(ZoomMouseListener, _super);\n    function ZoomMouseListener() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    ZoomMouseListener.prototype.wheel = function (target, event) {\n        var viewport = smodel_utils_1.findParentByFeature(target, model_1.isViewport);\n        if (viewport) {\n            var newZoom = this.getZoomFactor(event);\n            var viewportOffset = this.getViewportOffset(target.root, event);\n            var offsetFactor = 1.0 / (newZoom * viewport.zoom) - 1.0 / viewport.zoom;\n            var newViewport = {\n                scroll: {\n                    x: viewport.scroll.x - offsetFactor * viewportOffset.x,\n                    y: viewport.scroll.y - offsetFactor * viewportOffset.y\n                },\n                zoom: viewport.zoom * newZoom\n            };\n            return [new viewport_1.SetViewportAction(viewport.id, newViewport, false)];\n        }\n        return [];\n    };\n    ZoomMouseListener.prototype.getViewportOffset = function (root, event) {\n        var canvasBounds = root.canvasBounds;\n        var windowScroll = browser_1.getWindowScroll();\n        return {\n            x: event.clientX + windowScroll.x - canvasBounds.x,\n            y: event.clientY + windowScroll.y - canvasBounds.y\n        };\n    };\n    ZoomMouseListener.prototype.getZoomFactor = function (event) {\n        if (event.deltaMode === event.DOM_DELTA_PAGE)\n            return Math.exp(-event.deltaY * 0.5);\n        else if (event.deltaMode === event.DOM_DELTA_LINE)\n            return Math.exp(-event.deltaY * 0.05);\n        else // deltaMode === DOM_DELTA_PIXEL\n            return Math.exp(-event.deltaY * 0.005);\n    };\n    return ZoomMouseListener;\n}(mouse_tool_1.MouseListener));\nexports.ZoomMouseListener = ZoomMouseListener;\n//# sourceMappingURL=zoom.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_registration_1 = require(\"../../base/commands/command-registration\");\nvar zorder_1 = require(\"./zorder\");\nvar zorderModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, zorder_1.BringToFrontCommand);\n});\nexports.default = zorderModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../../base/types\");\nvar smodel_1 = require(\"../../base/model/smodel\");\nvar command_1 = require(\"../../base/commands/command\");\nvar model_1 = require(\"../routing/model\");\n/**\n * Action to render the selected elements in front of others by manipulating the z-order.\n */\nvar BringToFrontAction = /** @class */ (function () {\n    function BringToFrontAction(elementIDs) {\n        this.elementIDs = elementIDs;\n        this.kind = BringToFrontAction.KIND;\n    }\n    BringToFrontAction.KIND = 'bringToFront';\n    return BringToFrontAction;\n}());\nexports.BringToFrontAction = BringToFrontAction;\nvar BringToFrontCommand = /** @class */ (function (_super) {\n    __extends(BringToFrontCommand, _super);\n    function BringToFrontCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        _this.selected = [];\n        return _this;\n    }\n    BringToFrontCommand.prototype.execute = function (context) {\n        var _this = this;\n        var model = context.root;\n        this.action.elementIDs.forEach(function (id) {\n            var element = model.index.getById(id);\n            if (element instanceof model_1.SRoutableElement) {\n                if (element.source)\n                    _this.addToSelection(element.source);\n                if (element.target)\n                    _this.addToSelection(element.target);\n            }\n            if (element instanceof smodel_1.SChildElement) {\n                _this.addToSelection(element);\n            }\n            _this.includeConnectedEdges(element);\n        });\n        return this.redo(context);\n    };\n    BringToFrontCommand.prototype.includeConnectedEdges = function (element) {\n        var _this = this;\n        if (element instanceof model_1.SConnectableElement) {\n            element.incomingEdges.forEach(function (edge) { return _this.addToSelection(edge); });\n            element.outgoingEdges.forEach(function (edge) { return _this.addToSelection(edge); });\n        }\n        if (element instanceof smodel_1.SParentElement) {\n            for (var _i = 0, _a = element.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                this.includeConnectedEdges(child);\n            }\n        }\n    };\n    BringToFrontCommand.prototype.addToSelection = function (element) {\n        this.selected.push({\n            element: element,\n            index: element.parent.children.indexOf(element)\n        });\n    };\n    BringToFrontCommand.prototype.undo = function (context) {\n        for (var i = this.selected.length - 1; i >= 0; i--) {\n            var selection = this.selected[i];\n            var element = selection.element;\n            element.parent.move(element, selection.index);\n        }\n        return context.root;\n    };\n    BringToFrontCommand.prototype.redo = function (context) {\n        for (var i = 0; i < this.selected.length; i++) {\n            this.bringToFront(this.selected[i]);\n        }\n        return context.root;\n    };\n    BringToFrontCommand.prototype.bringToFront = function (selection) {\n        var element = selection.element;\n        var childrenLength = element.parent.children.length;\n        element.parent.move(element, childrenLength - 1);\n    };\n    BringToFrontCommand.KIND = BringToFrontAction.KIND;\n    BringToFrontCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [BringToFrontAction])\n    ], BringToFrontCommand);\n    return BringToFrontCommand;\n}(command_1.Command));\nexports.BringToFrontCommand = BringToFrontCommand;\n//# sourceMappingURL=zorder.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar sgraph_factory_1 = require(\"./sgraph-factory\");\nvar graphModule = new inversify_1.ContainerModule(function (bind, unbind, isBound, rebind) {\n    rebind(types_1.TYPES.IModelFactory).to(sgraph_factory_1.SGraphFactory).inSingletonScope();\n});\nexports.default = graphModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar smodel_factory_1 = require(\"../base/model/smodel-factory\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar sgraph_1 = require(\"./sgraph\");\nvar model_1 = require(\"../features/button/model\");\n/**\n * @deprecated\n * Subclassing SModelFactory is discouraged. Use `registerModelElement`\n * or `configureModelElement` instead.\n */\nvar SGraphFactory = /** @class */ (function (_super) {\n    __extends(SGraphFactory, _super);\n    function SGraphFactory() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.defaultGraphFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SGraph.DEFAULT_FEATURES);\n        _this.defaultNodeFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SNode.DEFAULT_FEATURES);\n        _this.defaultPortFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SPort.DEFAULT_FEATURES);\n        _this.defaultEdgeFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SEdge.DEFAULT_FEATURES);\n        _this.defaultLabelFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SLabel.DEFAULT_FEATURES);\n        _this.defaultCompartmentFeatures = smodel_factory_1.createFeatureSet(sgraph_1.SCompartment.DEFAULT_FEATURES);\n        _this.defaultButtonFeatures = smodel_factory_1.createFeatureSet(model_1.SButton.DEFAULT_FEATURES);\n        return _this;\n    }\n    SGraphFactory.prototype.createElement = function (schema, parent) {\n        var child;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SChildElement))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SChildElement.\");\n            child = regElement;\n        }\n        else if (this.isNodeSchema(schema)) {\n            child = new sgraph_1.SNode();\n            child.features = this.defaultNodeFeatures;\n        }\n        else if (this.isPortSchema(schema)) {\n            child = new sgraph_1.SPort();\n            child.features = this.defaultPortFeatures;\n        }\n        else if (this.isEdgeSchema(schema)) {\n            child = new sgraph_1.SEdge();\n            child.features = this.defaultEdgeFeatures;\n        }\n        else if (this.isLabelSchema(schema)) {\n            child = new sgraph_1.SLabel();\n            child.features = this.defaultLabelFeatures;\n        }\n        else if (this.isCompartmentSchema(schema)) {\n            child = new sgraph_1.SCompartment();\n            child.features = this.defaultCompartmentFeatures;\n        }\n        else if (this.isButtonSchema(schema)) {\n            child = new model_1.SButton();\n            child.features = this.defaultButtonFeatures;\n        }\n        else {\n            child = new smodel_1.SChildElement();\n        }\n        return this.initializeChild(child, schema, parent);\n    };\n    SGraphFactory.prototype.createRoot = function (schema) {\n        var root;\n        if (this.registry.hasKey(schema.type)) {\n            var regElement = this.registry.get(schema.type, undefined);\n            if (!(regElement instanceof smodel_1.SModelRoot))\n                throw new Error(\"Element with type \" + schema.type + \" was expected to be an SModelRoot.\");\n            root = regElement;\n        }\n        else if (this.isGraphSchema(schema)) {\n            root = new sgraph_1.SGraph();\n            root.features = this.defaultGraphFeatures;\n        }\n        else {\n            root = new smodel_1.SModelRoot();\n        }\n        return this.initializeRoot(root, schema);\n    };\n    SGraphFactory.prototype.isGraphSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'graph';\n    };\n    SGraphFactory.prototype.isNodeSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'node';\n    };\n    SGraphFactory.prototype.isPortSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'port';\n    };\n    SGraphFactory.prototype.isEdgeSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'edge';\n    };\n    SGraphFactory.prototype.isLabelSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'label';\n    };\n    SGraphFactory.prototype.isCompartmentSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'comp';\n    };\n    SGraphFactory.prototype.isButtonSchema = function (schema) {\n        return smodel_utils_1.getBasicType(schema) === 'button';\n    };\n    SGraphFactory = __decorate([\n        inversify_1.injectable()\n    ], SGraphFactory);\n    return SGraphFactory;\n}(smodel_factory_1.SModelFactory));\nexports.SGraphFactory = SGraphFactory;\n//# sourceMappingURL=sgraph-factory.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../base/model/smodel\");\nvar model_1 = require(\"../features/bounds/model\");\nvar model_2 = require(\"../features/edge-layout/model\");\nvar delete_1 = require(\"../features/edit/delete\");\nvar model_3 = require(\"../features/edit/model\");\nvar model_4 = require(\"../features/fade/model\");\nvar model_5 = require(\"../features/hover/model\");\nvar model_6 = require(\"../features/move/model\");\nvar model_7 = require(\"../features/routing/model\");\nvar model_8 = require(\"../features/select/model\");\nvar viewport_root_1 = require(\"../features/viewport/viewport-root\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar iterable_1 = require(\"../utils/iterable\");\n/**\n * Root element for graph-like models.\n */\nvar SGraph = /** @class */ (function (_super) {\n    __extends(SGraph, _super);\n    function SGraph(index) {\n        if (index === void 0) { index = new SGraphIndex(); }\n        return _super.call(this, index) || this;\n    }\n    return SGraph;\n}(viewport_root_1.ViewportRootElement));\nexports.SGraph = SGraph;\n/**\n * Model element class for nodes, which are the main entities in a graph. A node can be connected to\n * another node via an SEdge. Such a connection can be direct, i.e. the node is the source or target of\n * the edge, or indirect through a port, i.e. it contains an SPort which is the source or target of the edge.\n */\nvar SNode = /** @class */ (function (_super) {\n    __extends(SNode, _super);\n    function SNode() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SNode.prototype.canConnect = function (routable, role) {\n        return this.children.find(function (c) { return c instanceof SPort; }) === undefined;\n    };\n    SNode.DEFAULT_FEATURES = [model_7.connectableFeature, delete_1.deletableFeature, model_8.selectFeature, model_1.boundsFeature,\n        model_6.moveFeature, model_1.layoutContainerFeature, model_4.fadeFeature, model_5.hoverFeedbackFeature, model_5.popupFeature];\n    return SNode;\n}(model_7.SConnectableElement));\nexports.SNode = SNode;\n/**\n * A port is a connection point for edges. It should always be contained in an SNode.\n */\nvar SPort = /** @class */ (function (_super) {\n    __extends(SPort, _super);\n    function SPort() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SPort.DEFAULT_FEATURES = [model_7.connectableFeature, model_8.selectFeature, model_1.boundsFeature, model_4.fadeFeature,\n        model_5.hoverFeedbackFeature];\n    return SPort;\n}(model_7.SConnectableElement));\nexports.SPort = SPort;\n/**\n * Model element class for edges, which are the connectors in a graph. An edge has a source and a target,\n * each of which can be either a node or a port. The source and target elements are referenced via their\n * ids and can be resolved with the index stored in the root element.\n */\nvar SEdge = /** @class */ (function (_super) {\n    __extends(SEdge, _super);\n    function SEdge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.hoverFeedback = false;\n        _this.opacity = 1;\n        return _this;\n    }\n    SEdge.DEFAULT_FEATURES = [model_3.editFeature, delete_1.deletableFeature, model_8.selectFeature, model_4.fadeFeature,\n        model_5.hoverFeedbackFeature];\n    return SEdge;\n}(model_7.SRoutableElement));\nexports.SEdge = SEdge;\n/**\n * A label can be attached to a node, edge, or port, and contains some text to be rendered in its view.\n */\nvar SLabel = /** @class */ (function (_super) {\n    __extends(SLabel, _super);\n    function SLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.selected = false;\n        _this.alignment = geometry_1.ORIGIN_POINT;\n        _this.opacity = 1;\n        return _this;\n    }\n    SLabel.DEFAULT_FEATURES = [model_1.boundsFeature, model_1.alignFeature, model_1.layoutableChildFeature,\n        model_2.edgeLayoutFeature, model_4.fadeFeature];\n    return SLabel;\n}(model_1.SShapeElement));\nexports.SLabel = SLabel;\n/**\n * A compartment is used to group multiple child elements such as labels of a node. Usually a `vbox`\n * or `hbox` layout is used to arrange these children.\n */\nvar SCompartment = /** @class */ (function (_super) {\n    __extends(SCompartment, _super);\n    function SCompartment() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.opacity = 1;\n        return _this;\n    }\n    SCompartment.DEFAULT_FEATURES = [model_1.boundsFeature, model_1.layoutContainerFeature, model_1.layoutableChildFeature,\n        model_4.fadeFeature];\n    return SCompartment;\n}(model_1.SShapeElement));\nexports.SCompartment = SCompartment;\n/**\n * A specialized model index that tracks outgoing and incoming edges.\n */\nvar SGraphIndex = /** @class */ (function (_super) {\n    __extends(SGraphIndex, _super);\n    function SGraphIndex() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.outgoing = new Map;\n        _this.incoming = new Map;\n        return _this;\n    }\n    SGraphIndex.prototype.add = function (element) {\n        _super.prototype.add.call(this, element);\n        if (element instanceof SEdge) {\n            // Register the edge in the outgoing map\n            if (element.sourceId) {\n                var sourceArr = this.outgoing.get(element.sourceId);\n                if (sourceArr === undefined)\n                    this.outgoing.set(element.sourceId, [element]);\n                else\n                    sourceArr.push(element);\n            }\n            // Register the edge in the incoming map\n            if (element.targetId) {\n                var targetArr = this.incoming.get(element.targetId);\n                if (targetArr === undefined)\n                    this.incoming.set(element.targetId, [element]);\n                else\n                    targetArr.push(element);\n            }\n        }\n    };\n    SGraphIndex.prototype.remove = function (element) {\n        _super.prototype.remove.call(this, element);\n        if (element instanceof SEdge) {\n            // Remove the edge from the outgoing map\n            var sourceArr = this.outgoing.get(element.sourceId);\n            if (sourceArr !== undefined) {\n                var index = sourceArr.indexOf(element);\n                if (index >= 0) {\n                    if (sourceArr.length === 1)\n                        this.outgoing.delete(element.sourceId);\n                    else\n                        sourceArr.splice(index, 1);\n                }\n            }\n            // Remove the edge from the incoming map\n            var targetArr = this.incoming.get(element.targetId);\n            if (targetArr !== undefined) {\n                var index = targetArr.indexOf(element);\n                if (index >= 0) {\n                    if (targetArr.length === 1)\n                        this.incoming.delete(element.targetId);\n                    else\n                        targetArr.splice(index, 1);\n                }\n            }\n        }\n    };\n    SGraphIndex.prototype.getAttachedElements = function (element) {\n        var _this = this;\n        return new iterable_1.FluentIterableImpl(function () { return ({\n            outgoing: _this.outgoing.get(element.id),\n            incoming: _this.incoming.get(element.id),\n            nextOutgoingIndex: 0,\n            nextIncomingIndex: 0\n        }); }, function (state) {\n            var index = state.nextOutgoingIndex;\n            if (state.outgoing !== undefined && index < state.outgoing.length) {\n                state.nextOutgoingIndex = index + 1;\n                return { done: false, value: state.outgoing[index] };\n            }\n            index = state.nextIncomingIndex;\n            if (state.incoming !== undefined) {\n                // Filter out self-loops: edges that are both outgoing and incoming\n                while (index < state.incoming.length) {\n                    var edge = state.incoming[index];\n                    if (edge.sourceId !== edge.targetId) {\n                        state.nextIncomingIndex = index + 1;\n                        return { done: false, value: edge };\n                    }\n                    index++;\n                }\n            }\n            return { done: true, value: undefined };\n        });\n    };\n    SGraphIndex.prototype.getIncomingEdges = function (element) {\n        return this.incoming.get(element.id) || [];\n    };\n    SGraphIndex.prototype.getOutgoingEdges = function (element) {\n        return this.outgoing.get(element.id) || [];\n    };\n    return SGraphIndex;\n}(smodel_1.SModelIndex));\nexports.SGraphIndex = SGraphIndex;\n//# sourceMappingURL=sgraph.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar inversify_1 = require(\"inversify\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar views_1 = require(\"../features/bounds/views\");\nvar intersection_finder_1 = require(\"../features/edge-intersection/intersection-finder\");\nvar model_1 = require(\"../features/edge-layout/model\");\nvar model_2 = require(\"../features/routing/model\");\nvar routing_1 = require(\"../features/routing/routing\");\nvar views_2 = require(\"../features/routing/views\");\nvar jsx_1 = require(\"../lib/jsx\");\nvar geometry_1 = require(\"../utils/geometry\");\n/**\n * IView component that turns an SGraph element and its children into a tree of virtual DOM elements.\n */\nvar SGraphView = /** @class */ (function () {\n    function SGraphView() {\n    }\n    SGraphView.prototype.render = function (model, context, args) {\n        var edgeRouting = this.edgeRouterRegistry.routeAllChildren(model);\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        return jsx_1.svg(\"svg\", { \"class-sprotty-graph\": true },\n            jsx_1.svg(\"g\", { transform: transform }, context.renderChildren(model, { edgeRouting: edgeRouting })));\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], SGraphView.prototype, \"edgeRouterRegistry\", void 0);\n    SGraphView = __decorate([\n        inversify_1.injectable()\n    ], SGraphView);\n    return SGraphView;\n}());\nexports.SGraphView = SGraphView;\nvar PolylineEdgeView = /** @class */ (function (_super) {\n    __extends(PolylineEdgeView, _super);\n    function PolylineEdgeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PolylineEdgeView.prototype.render = function (edge, context, args) {\n        var route = this.edgeRouterRegistry.route(edge, args);\n        if (route.length === 0) {\n            return this.renderDanglingEdge(\"Cannot compute route\", edge, context);\n        }\n        if (!this.isVisible(edge, route, context)) {\n            if (edge.children.length === 0) {\n                return undefined;\n            }\n            // The children of an edge are not necessarily inside the bounding box of the route,\n            // so we need to render a group to ensure the children have a chance to be rendered.\n            return jsx_1.svg(\"g\", null, context.renderChildren(edge, { route: route }));\n        }\n        return jsx_1.svg(\"g\", { \"class-sprotty-edge\": true, \"class-mouseover\": edge.hoverFeedback },\n            this.renderLine(edge, route, context, args),\n            this.renderAdditionals(edge, route, context),\n            context.renderChildren(edge, { route: route }));\n    };\n    PolylineEdgeView.prototype.renderLine = function (edge, segments, context, args) {\n        var firstPoint = segments[0];\n        var path = \"M \" + firstPoint.x + \",\" + firstPoint.y;\n        for (var i = 1; i < segments.length; i++) {\n            var p = segments[i];\n            path += \" L \" + p.x + \",\" + p.y;\n        }\n        return jsx_1.svg(\"path\", { d: path });\n    };\n    PolylineEdgeView.prototype.renderAdditionals = function (edge, segments, context) {\n        return [];\n    };\n    PolylineEdgeView.prototype.renderDanglingEdge = function (message, edge, context) {\n        return jsx_1.svg(\"text\", { \"class-sprotty-edge-dangling\": true, title: message }, \"?\");\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], PolylineEdgeView.prototype, \"edgeRouterRegistry\", void 0);\n    PolylineEdgeView = __decorate([\n        inversify_1.injectable()\n    ], PolylineEdgeView);\n    return PolylineEdgeView;\n}(views_2.RoutableView));\nexports.PolylineEdgeView = PolylineEdgeView;\n/**\n * A `PolylineEdgeView` that renders jumps over intersections.\n *\n * In order to find intersections, `IntersectionFinder` needs to be configured as a `TYPES.IEdgeRoutePostprocessor`\n * so that that intersections are declared as `IntersectingRoutedPoint` in the computed routes.\n *\n * @see IntersectionFinder\n * @see IntersectingRoutedPoint\n * @see EdgeRouterRegistry\n */\nvar JumpingPolylineEdgeView = /** @class */ (function (_super) {\n    __extends(JumpingPolylineEdgeView, _super);\n    function JumpingPolylineEdgeView() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.jumpOffsetBefore = 5;\n        _this.jumpOffsetAfter = 5;\n        _this.skipOffsetBefore = 3;\n        _this.skipOffsetAfter = 2;\n        return _this;\n    }\n    JumpingPolylineEdgeView.prototype.renderLine = function (edge, segments, context, args) {\n        var path = '';\n        for (var i = 0; i < segments.length; i++) {\n            var p = segments[i];\n            if (i === 0) {\n                path = \"M \" + p.x + \",\" + p.y;\n            }\n            if (intersection_finder_1.isIntersectingRoutedPoint(p)) {\n                path += this.intersectionPath(edge, segments, p, args);\n            }\n            if (i !== 0) {\n                path += \" L \" + p.x + \",\" + p.y;\n            }\n        }\n        return jsx_1.svg(\"path\", { d: path });\n    };\n    JumpingPolylineEdgeView.prototype.intersectionPath = function (edge, segments, intersectingPoint, args) {\n        var path = '';\n        for (var _i = 0, _a = intersectingPoint.intersections.sort(intersection_finder_1.BY_X_THEN_Y); _i < _a.length; _i++) {\n            var intersection = _a[_i];\n            var otherLineSegment = this.getOtherLineSegment(edge, intersection, args);\n            if (otherLineSegment === undefined) {\n                continue;\n            }\n            var lineSegment = this.getLineSegment(edge, intersection, args, segments);\n            var intersectionPoint = intersection.intersectionPoint;\n            if (Math.abs(lineSegment.slopeOrMax) < Math.abs(otherLineSegment.slopeOrMax)) {\n                path += this.createJumpPath(intersectionPoint, lineSegment);\n            }\n            else {\n                path += this.createSkipPath(intersectionPoint, lineSegment);\n            }\n        }\n        return path;\n    };\n    JumpingPolylineEdgeView.prototype.getOtherLineSegment = function (currentEdge, intersection, args) {\n        var otherEdgeId = intersection.routable1 === currentEdge.id ? intersection.routable2 : intersection.routable1;\n        var otherEdge = currentEdge.index.getById(otherEdgeId);\n        if (!(otherEdge instanceof model_2.SRoutableElement)) {\n            return undefined;\n        }\n        return this.getLineSegment(otherEdge, intersection, args);\n    };\n    JumpingPolylineEdgeView.prototype.getLineSegment = function (edge, intersection, args, segments) {\n        var route = segments ? segments : this.edgeRouterRegistry.route(edge, args);\n        var index = intersection.routable1 === edge.id ? intersection.segmentIndex1 : intersection.segmentIndex2;\n        return new geometry_1.PointToPointLine(route[index], route[index + 1]);\n    };\n    JumpingPolylineEdgeView.prototype.createJumpPath = function (intersectionPoint, lineSegment) {\n        var anchorBefore = geometry_1.shiftTowards(intersectionPoint, lineSegment.p1, this.jumpOffsetBefore);\n        var anchorAfter = geometry_1.shiftTowards(intersectionPoint, lineSegment.p2, this.jumpOffsetAfter);\n        var rotation = lineSegment.p1.x < lineSegment.p2.x ? 1 : 0;\n        return \" L \" + anchorBefore.x + \",\" + anchorBefore.y + \" A 1,1 0,0 \" + rotation + \" \" + anchorAfter.x + \",\" + anchorAfter.y;\n    };\n    JumpingPolylineEdgeView.prototype.createSkipPath = function (intersectionPoint, lineSegment) {\n        var offsetBefore;\n        var offsetAfter;\n        if (intersectionPoint.y < lineSegment.p1.y) {\n            offsetBefore = -this.skipOffsetBefore;\n            offsetAfter = this.jumpOffsetAfter + this.skipOffsetAfter;\n        }\n        else {\n            offsetBefore = this.jumpOffsetBefore + this.skipOffsetAfter;\n            offsetAfter = -this.skipOffsetBefore;\n        }\n        var anchorBefore = geometry_1.shiftTowards(intersectionPoint, lineSegment.p1, offsetBefore);\n        var anchorAfter = geometry_1.shiftTowards(intersectionPoint, lineSegment.p2, offsetAfter);\n        return \" L \" + anchorBefore.x + \",\" + anchorBefore.y + \" M \" + anchorAfter.x + \",\" + anchorAfter.y;\n    };\n    JumpingPolylineEdgeView = __decorate([\n        inversify_1.injectable()\n    ], JumpingPolylineEdgeView);\n    return JumpingPolylineEdgeView;\n}(PolylineEdgeView));\nexports.JumpingPolylineEdgeView = JumpingPolylineEdgeView;\n/**\n * A `PolylineEdgeView` that renders gaps on intersections.\n *\n * In order to find intersections, `IntersectionFinder` needs to be configured as a `TYPES.IEdgeRoutePostprocessor`\n * so that that intersections are declared as `IntersectingRoutedPoint` in the computed routes.\n *\n * @see IntersectionFinder\n * @see IntersectingRoutedPoint\n * @see EdgeRouterRegistry\n */\nvar PolylineEdgeViewWithGapsOnIntersections = /** @class */ (function (_super) {\n    __extends(PolylineEdgeViewWithGapsOnIntersections, _super);\n    function PolylineEdgeViewWithGapsOnIntersections() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.skipOffsetBefore = 3;\n        _this.skipOffsetAfter = 3;\n        return _this;\n    }\n    PolylineEdgeViewWithGapsOnIntersections.prototype.createJumpPath = function (intersectionPoint, lineSegment) {\n        return \"\";\n    };\n    PolylineEdgeViewWithGapsOnIntersections.prototype.createSkipPath = function (intersectionPoint, lineSegment) {\n        var anchorBefore = geometry_1.shiftTowards(intersectionPoint, lineSegment.p1, this.skipOffsetBefore);\n        var anchorAfter = geometry_1.shiftTowards(intersectionPoint, lineSegment.p2, this.skipOffsetAfter);\n        return \" L \" + anchorBefore.x + \",\" + anchorBefore.y + \" M \" + anchorAfter.x + \",\" + anchorAfter.y;\n    };\n    PolylineEdgeViewWithGapsOnIntersections = __decorate([\n        inversify_1.injectable()\n    ], PolylineEdgeViewWithGapsOnIntersections);\n    return PolylineEdgeViewWithGapsOnIntersections;\n}(JumpingPolylineEdgeView));\nexports.PolylineEdgeViewWithGapsOnIntersections = PolylineEdgeViewWithGapsOnIntersections;\nvar SRoutingHandleView = /** @class */ (function () {\n    function SRoutingHandleView() {\n        this.minimalPointDistance = 10;\n    }\n    SRoutingHandleView.prototype.render = function (handle, context, args) {\n        if (args && args.route) {\n            if (handle.parent instanceof model_2.SRoutableElement) {\n                var router = this.edgeRouterRegistry.get(handle.parent.routerKind);\n                var theRoute = args.route === undefined ? this.edgeRouterRegistry.route(handle.parent, args) : args.route;\n                var position = router.getHandlePosition(handle.parent, theRoute, handle);\n                if (position !== undefined) {\n                    var node = jsx_1.svg(\"circle\", { \"class-sprotty-routing-handle\": true, \"class-selected\": handle.selected, \"class-mouseover\": handle.hoverFeedback, cx: position.x, cy: position.y, r: this.getRadius() });\n                    vnode_utils_1.setAttr(node, 'data-kind', handle.kind);\n                    return node;\n                }\n            }\n        }\n        // Fallback: Create an empty group\n        return jsx_1.svg(\"g\", null);\n    };\n    SRoutingHandleView.prototype.getRadius = function () {\n        return 7;\n    };\n    __decorate([\n        inversify_1.inject(routing_1.EdgeRouterRegistry),\n        __metadata(\"design:type\", routing_1.EdgeRouterRegistry)\n    ], SRoutingHandleView.prototype, \"edgeRouterRegistry\", void 0);\n    SRoutingHandleView = __decorate([\n        inversify_1.injectable()\n    ], SRoutingHandleView);\n    return SRoutingHandleView;\n}());\nexports.SRoutingHandleView = SRoutingHandleView;\nvar SLabelView = /** @class */ (function (_super) {\n    __extends(SLabelView, _super);\n    function SLabelView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SLabelView.prototype.render = function (label, context) {\n        if (!model_1.isEdgeLayoutable(label) && !this.isVisible(label, context)) {\n            return undefined;\n        }\n        var vnode = jsx_1.svg(\"text\", { \"class-sprotty-label\": true }, label.text);\n        var subType = smodel_utils_1.getSubType(label);\n        if (subType) {\n            vnode_utils_1.setAttr(vnode, 'class', subType);\n        }\n        return vnode;\n    };\n    SLabelView = __decorate([\n        inversify_1.injectable()\n    ], SLabelView);\n    return SLabelView;\n}(views_1.ShapeView));\nexports.SLabelView = SLabelView;\nvar SCompartmentView = /** @class */ (function () {\n    function SCompartmentView() {\n    }\n    SCompartmentView.prototype.render = function (compartment, context, args) {\n        var translate = \"translate(\" + compartment.bounds.x + \", \" + compartment.bounds.y + \")\";\n        var vnode = jsx_1.svg(\"g\", { transform: translate, \"class-sprotty-comp\": \"{true}\" }, context.renderChildren(compartment));\n        var subType = smodel_utils_1.getSubType(compartment);\n        if (subType)\n            vnode_utils_1.setAttr(vnode, 'class', subType);\n        return vnode;\n    };\n    SCompartmentView = __decorate([\n        inversify_1.injectable()\n    ], SCompartmentView);\n    return SCompartmentView;\n}());\nexports.SCompartmentView = SCompartmentView;\n//# sourceMappingURL=views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// ------------------ Base ------------------\n__export(require(\"./base/actions/action\"));\n__export(require(\"./base/actions/action-dispatcher\"));\n__export(require(\"./base/actions/action-handler\"));\n__export(require(\"./base/actions/diagram-locker\"));\n__export(require(\"./base/animations/animation-frame-syncer\"));\n__export(require(\"./base/animations/animation\"));\n__export(require(\"./base/animations/easing\"));\n__export(require(\"./base/commands/command\"));\n__export(require(\"./base/commands/command-registration\"));\n__export(require(\"./base/commands/command-stack-options\"));\n__export(require(\"./base/commands/command-stack\"));\n__export(require(\"./base/features/initialize-canvas\"));\n__export(require(\"./base/features/set-model\"));\n__export(require(\"./base/model/smodel-factory\"));\n__export(require(\"./base/model/smodel-utils\"));\n__export(require(\"./base/model/smodel\"));\n__export(require(\"./base/tool-manager/tool-manager\"));\n__export(require(\"./base/tool-manager/tool\"));\n__export(require(\"./base/ui-extensions/ui-extension-registry\"));\n__export(require(\"./base/ui-extensions/ui-extension\"));\n__export(require(\"./base/views/key-tool\"));\n__export(require(\"./base/views/mouse-tool\"));\n__export(require(\"./base/views/thunk-view\"));\n__export(require(\"./base/views/view\"));\n__export(require(\"./base/views/viewer-cache\"));\n__export(require(\"./base/views/viewer-options\"));\n__export(require(\"./base/views/viewer\"));\n__export(require(\"./base/views/vnode-postprocessor\"));\n__export(require(\"./base/views/vnode-utils\"));\n__export(require(\"./base/types\"));\nvar di_config_1 = __importDefault(require(\"./base/di.config\"));\nexports.defaultModule = di_config_1.default;\n// ------------------ Features ------------------\n__export(require(\"./features/bounds/bounds-manipulation\"));\n__export(require(\"./features/bounds/hidden-bounds-updater\"));\n__export(require(\"./features/bounds/layout\"));\n__export(require(\"./features/bounds/model\"));\n__export(require(\"./features/bounds/vbox-layout\"));\n__export(require(\"./features/bounds/hbox-layout\"));\n__export(require(\"./features/bounds/stack-layout\"));\n__export(require(\"./features/bounds/views\"));\n__export(require(\"./features/button/button-handler\"));\n__export(require(\"./features/button/model\"));\n__export(require(\"./features/command-palette/action-providers\"));\n__export(require(\"./features/command-palette/command-palette\"));\n__export(require(\"./features/context-menu/context-menu-service\"));\n__export(require(\"./features/context-menu/menu-providers\"));\n__export(require(\"./features/context-menu/mouse-listener\"));\n__export(require(\"./features/edge-layout/di.config\"));\n__export(require(\"./features/edge-layout/edge-layout\"));\n__export(require(\"./features/edge-layout/model\"));\n__export(require(\"./features/edit/create\"));\n__export(require(\"./features/edit/create-on-drag\"));\n__export(require(\"./features/edit/di.config\"));\n__export(require(\"./features/edit/delete\"));\n__export(require(\"./features/edit/edit-label\"));\n__export(require(\"./features/edit/edit-label-ui\"));\n__export(require(\"./features/edit/edit-routing\"));\n__export(require(\"./features/edit/model\"));\n__export(require(\"./features/edit/reconnect\"));\n__export(require(\"./features/expand/expand\"));\n__export(require(\"./features/expand/model\"));\n__export(require(\"./features/expand/views\"));\n__export(require(\"./features/export/export\"));\n__export(require(\"./features/export/model\"));\n__export(require(\"./features/export/svg-exporter\"));\n__export(require(\"./features/fade/fade\"));\n__export(require(\"./features/fade/model\"));\n__export(require(\"./features/hover/hover\"));\n__export(require(\"./features/hover/model\"));\n__export(require(\"./features/decoration/model\"));\n__export(require(\"./features/decoration/views\"));\n__export(require(\"./features/decoration/decoration-placer\"));\n__export(require(\"./features/edge-intersection/di.config\"));\n__export(require(\"./features/edge-intersection/intersection-finder\"));\n__export(require(\"./features/edge-intersection/sweepline\"));\n__export(require(\"./features/move/model\"));\n__export(require(\"./features/move/move\"));\n__export(require(\"./features/move/snap\"));\n__export(require(\"./features/nameable/model\"));\n__export(require(\"./features/open/open\"));\n__export(require(\"./features/open/model\"));\n__export(require(\"./features/routing/anchor\"));\n__export(require(\"./features/routing/linear-edge-router\"));\n__export(require(\"./features/routing/manhattan-anchors\"));\n__export(require(\"./features/routing/manhattan-edge-router\"));\n__export(require(\"./features/routing/model\"));\n__export(require(\"./features/routing/polyline-anchors\"));\n__export(require(\"./features/routing/polyline-edge-router\"));\n__export(require(\"./features/routing/routing\"));\n__export(require(\"./features/routing/views\"));\n__export(require(\"./features/select/model\"));\n__export(require(\"./features/select/select\"));\n__export(require(\"./features/undo-redo/undo-redo\"));\n__export(require(\"./features/update/model-matching\"));\n__export(require(\"./features/update/update-model\"));\n__export(require(\"./features/viewport/center-fit\"));\n__export(require(\"./features/viewport/model\"));\n__export(require(\"./features/viewport/scroll\"));\n__export(require(\"./features/viewport/viewport-root\"));\n__export(require(\"./features/viewport/viewport\"));\n__export(require(\"./features/viewport/zoom\"));\n__export(require(\"./features/zorder/zorder\"));\nvar di_config_2 = __importDefault(require(\"./graph/di.config\"));\nexports.graphModule = di_config_2.default;\nvar di_config_3 = __importDefault(require(\"./features/bounds/di.config\"));\nexports.boundsModule = di_config_3.default;\nvar di_config_4 = __importDefault(require(\"./features/button/di.config\"));\nexports.buttonModule = di_config_4.default;\nvar di_config_5 = __importDefault(require(\"./features/command-palette/di.config\"));\nexports.commandPaletteModule = di_config_5.default;\nvar di_config_6 = __importDefault(require(\"./features/context-menu/di.config\"));\nexports.contextMenuModule = di_config_6.default;\nvar di_config_7 = __importDefault(require(\"./features/decoration/di.config\"));\nexports.decorationModule = di_config_7.default;\nvar di_config_8 = __importDefault(require(\"./features/edge-layout/di.config\"));\nexports.edgeLayoutModule = di_config_8.default;\nvar di_config_9 = __importDefault(require(\"./features/expand/di.config\"));\nexports.expandModule = di_config_9.default;\nvar di_config_10 = __importDefault(require(\"./features/export/di.config\"));\nexports.exportModule = di_config_10.default;\nvar di_config_11 = __importDefault(require(\"./features/fade/di.config\"));\nexports.fadeModule = di_config_11.default;\nvar di_config_12 = __importDefault(require(\"./features/hover/di.config\"));\nexports.hoverModule = di_config_12.default;\nvar di_config_13 = __importDefault(require(\"./features/move/di.config\"));\nexports.moveModule = di_config_13.default;\nvar di_config_14 = __importDefault(require(\"./features/open/di.config\"));\nexports.openModule = di_config_14.default;\nvar di_config_15 = __importDefault(require(\"./features/routing/di.config\"));\nexports.routingModule = di_config_15.default;\nvar di_config_16 = __importDefault(require(\"./features/select/di.config\"));\nexports.selectModule = di_config_16.default;\nvar di_config_17 = __importDefault(require(\"./features/undo-redo/di.config\"));\nexports.undoRedoModule = di_config_17.default;\nvar di_config_18 = __importDefault(require(\"./features/update/di.config\"));\nexports.updateModule = di_config_18.default;\nvar di_config_19 = __importDefault(require(\"./features/viewport/di.config\"));\nexports.viewportModule = di_config_19.default;\nvar di_config_20 = __importDefault(require(\"./features/zorder/di.config\"));\nexports.zorderModule = di_config_20.default;\n// ------------------ Graph ------------------\n__export(require(\"./graph/sgraph-factory\"));\n__export(require(\"./graph/sgraph\"));\n__export(require(\"./graph/views\"));\n// ------------------ Library ------------------\n__export(require(\"./lib/modules\"));\n__export(require(\"./lib/generic-views\"));\n__export(require(\"./lib/html-views\"));\n__export(require(\"./lib/jsx\"));\n__export(require(\"./lib/model\"));\n__export(require(\"./lib/svg-views\"));\n// ------------------ Model Source ------------------\n__export(require(\"./model-source/commit-model\"));\n__export(require(\"./model-source/diagram-server\"));\n__export(require(\"./model-source/local-model-source\"));\n__export(require(\"./model-source/logging\"));\n__export(require(\"./model-source/model-source\"));\n__export(require(\"./model-source/websocket\"));\nvar di_config_21 = __importDefault(require(\"./model-source/di.config\"));\nexports.modelSourceModule = di_config_21.default;\n// ------------------ Utilities ------------------\n__export(require(\"./utils/browser\"));\n__export(require(\"./utils/color\"));\n__export(require(\"./utils/geometry\"));\n__export(require(\"./utils/inversify\"));\n__export(require(\"./utils/logging\"));\n__export(require(\"./utils/registry\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"./jsx\");\nvar inversify_1 = require(\"inversify\");\nvar virtualize_1 = __importDefault(require(\"./virtualize\"));\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar views_1 = require(\"../features/bounds/views\");\nvar model_1 = require(\"./model\");\nvar PreRenderedView = /** @class */ (function (_super) {\n    __extends(PreRenderedView, _super);\n    function PreRenderedView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    PreRenderedView.prototype.render = function (model, context) {\n        if (model instanceof model_1.ShapedPreRenderedElement && !this.isVisible(model, context)) {\n            return undefined;\n        }\n        var node = virtualize_1.default(model.code);\n        if (node === null)\n            return undefined;\n        this.correctNamespace(node);\n        return node;\n    };\n    PreRenderedView.prototype.correctNamespace = function (node) {\n        if (node.sel === 'svg' || node.sel === 'g')\n            vnode_utils_1.setNamespace(node, 'http://www.w3.org/2000/svg');\n    };\n    PreRenderedView = __decorate([\n        inversify_1.injectable()\n    ], PreRenderedView);\n    return PreRenderedView;\n}(views_1.ShapeView));\nexports.PreRenderedView = PreRenderedView;\n/**\n * An SVG `foreignObject` view with a namespace specified by the provided `ForeignObjectElement`.\n * Note that `foreignObject` may not be supported by all browsers or SVG viewers.\n */\nvar ForeignObjectView = /** @class */ (function () {\n    function ForeignObjectView() {\n    }\n    ForeignObjectView.prototype.render = function (model, context) {\n        var foreignObjectContents = virtualize_1.default(model.code);\n        if (foreignObjectContents === null)\n            return undefined;\n        var node = jsx_1.svg(\"g\", null,\n            jsx_1.svg(\"foreignObject\", { requiredFeatures: 'http://www.w3.org/TR/SVG11/feature#Extensibility', height: model.bounds.height, width: model.bounds.width, x: 0, y: 0 }, foreignObjectContents),\n            context.renderChildren(model));\n        vnode_utils_1.setAttr(node, 'class', model.type);\n        vnode_utils_1.setNamespace(foreignObjectContents, model.namespace);\n        return node;\n    };\n    ForeignObjectView = __decorate([\n        inversify_1.injectable()\n    ], ForeignObjectView);\n    return ForeignObjectView;\n}());\nexports.ForeignObjectView = ForeignObjectView;\n//# sourceMappingURL=generic-views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx html */\nvar jsx_1 = require(\"./jsx\");\nvar vnode_utils_1 = require(\"../base/views/vnode-utils\");\nvar inversify_1 = require(\"inversify\");\nvar HtmlRootView = /** @class */ (function () {\n    function HtmlRootView() {\n    }\n    HtmlRootView.prototype.render = function (model, context) {\n        var root = jsx_1.html(\"div\", null, context.renderChildren(model));\n        for (var _i = 0, _a = model.classes; _i < _a.length; _i++) {\n            var c = _a[_i];\n            vnode_utils_1.setClass(root, c, true);\n        }\n        return root;\n    };\n    HtmlRootView = __decorate([\n        inversify_1.injectable()\n    ], HtmlRootView);\n    return HtmlRootView;\n}());\nexports.HtmlRootView = HtmlRootView;\n//# sourceMappingURL=html-views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom_1 = require(\"snabbdom\");\nvar modulesNS = ['hook', 'on', 'style', 'class', 'props', 'attrs', 'dataset'];\nvar SVGNS = 'http://www.w3.org/2000/svg';\nfunction normalizeAttrs(source, defNS, namespace) {\n    var data = {};\n    if (namespace) {\n        data.ns = namespace;\n    }\n    if (source === null) {\n        return data;\n    }\n    modulesNS.forEach(function (mod) {\n        if (source[mod]) {\n            data[mod] = source[mod];\n        }\n    });\n    Object.keys(source).forEach(function (key) {\n        if (key === 'key' || key === 'classNames' || key === 'selector')\n            return;\n        var idx = key.indexOf('-');\n        if (idx > 0)\n            addAttr(key.slice(0, idx), key.slice(idx + 1), source[key]);\n        else if (!data[key])\n            addAttr(defNS, key, source[key]);\n    });\n    return data;\n    function addAttr(modname, key, val) {\n        var mod = data[modname] || (data[modname] = {});\n        mod[key] = val;\n    }\n}\n// eslint-disable-next-line @typescript-eslint/naming-convention\nfunction JSX(namespace, defNS) {\n    if (defNS === void 0) { defNS = 'props'; }\n    return function (tag, attrs) {\n        var children = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            children[_i - 2] = arguments[_i];\n        }\n        return snabbdom_1.jsx(tag, normalizeAttrs(attrs, defNS, namespace), children);\n    };\n}\nexports.JSX = JSX;\nvar html = JSX();\nexports.html = html;\nvar svg = JSX(SVGNS, 'attrs');\nexports.svg = svg;\n//# sourceMappingURL=jsx.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2020 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar smodel_1 = require(\"../base/model/smodel\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar model_1 = require(\"../features/bounds/model\");\nvar model_2 = require(\"../features/move/model\");\nvar model_3 = require(\"../features/select/model\");\nvar sgraph_1 = require(\"../graph/sgraph\");\nvar anchor_1 = require(\"../features/routing/anchor\");\n/**\n * A node that is represented by a circle.\n */\nvar CircularNode = /** @class */ (function (_super) {\n    __extends(CircularNode, _super);\n    function CircularNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(CircularNode.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.ELLIPTIC_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CircularNode;\n}(sgraph_1.SNode));\nexports.CircularNode = CircularNode;\n/**\n * A node that is represented by a rectangle.\n */\nvar RectangularNode = /** @class */ (function (_super) {\n    __extends(RectangularNode, _super);\n    function RectangularNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(RectangularNode.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.RECTANGULAR_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RectangularNode;\n}(sgraph_1.SNode));\nexports.RectangularNode = RectangularNode;\n/**\n * A node that is represented by a diamond.\n */\nvar DiamondNode = /** @class */ (function (_super) {\n    __extends(DiamondNode, _super);\n    function DiamondNode() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(DiamondNode.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.DIAMOND_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return DiamondNode;\n}(sgraph_1.SNode));\nexports.DiamondNode = DiamondNode;\n/**\n * A port that is represented by a circle.\n */\nvar CircularPort = /** @class */ (function (_super) {\n    __extends(CircularPort, _super);\n    function CircularPort() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(CircularPort.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.ELLIPTIC_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return CircularPort;\n}(sgraph_1.SPort));\nexports.CircularPort = CircularPort;\n/**\n * A port that is represented by a rectangle.\n */\nvar RectangularPort = /** @class */ (function (_super) {\n    __extends(RectangularPort, _super);\n    function RectangularPort() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(RectangularPort.prototype, \"anchorKind\", {\n        get: function () {\n            return anchor_1.RECTANGULAR_ANCHOR_KIND;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RectangularPort;\n}(sgraph_1.SPort));\nexports.RectangularPort = RectangularPort;\n/**\n * Root model element class for HTML content. Usually this is rendered with a `div` DOM element.\n */\nvar HtmlRoot = /** @class */ (function (_super) {\n    __extends(HtmlRoot, _super);\n    function HtmlRoot() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.classes = [];\n        return _this;\n    }\n    return HtmlRoot;\n}(smodel_1.SModelRoot));\nexports.HtmlRoot = HtmlRoot;\n/**\n * Pre-rendered elements contain HTML or SVG code to be transferred to the DOM. This can be useful to\n * render complex figures or to compute the view on the server instead of the client code.\n */\nvar PreRenderedElement = /** @class */ (function (_super) {\n    __extends(PreRenderedElement, _super);\n    function PreRenderedElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PreRenderedElement;\n}(smodel_1.SChildElement));\nexports.PreRenderedElement = PreRenderedElement;\n/**\n * Same as PreRenderedElement, but with a position and a size.\n */\nvar ShapedPreRenderedElement = /** @class */ (function (_super) {\n    __extends(ShapedPreRenderedElement, _super);\n    function ShapedPreRenderedElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.position = geometry_1.ORIGIN_POINT;\n        _this.size = geometry_1.EMPTY_DIMENSION;\n        _this.selected = false;\n        _this.alignment = geometry_1.ORIGIN_POINT;\n        return _this;\n    }\n    Object.defineProperty(ShapedPreRenderedElement.prototype, \"bounds\", {\n        get: function () {\n            return {\n                x: this.position.x,\n                y: this.position.y,\n                width: this.size.width,\n                height: this.size.height\n            };\n        },\n        set: function (newBounds) {\n            this.position = {\n                x: newBounds.x,\n                y: newBounds.y\n            };\n            this.size = {\n                width: newBounds.width,\n                height: newBounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    ShapedPreRenderedElement.DEFAULT_FEATURES = [model_2.moveFeature, model_1.boundsFeature, model_3.selectFeature, model_1.alignFeature];\n    return ShapedPreRenderedElement;\n}(PreRenderedElement));\nexports.ShapedPreRenderedElement = ShapedPreRenderedElement;\n/**\n * A `foreignObject` element to be transferred to the DOM within the SVG.\n *\n * This can be useful to to benefit from e.g. HTML rendering features, such as line wrapping, inside of\n * the SVG diagram.  Note that `foreignObject` is not supported by all browsers and SVG viewers may not\n * support rendering the `foreignObject` content.\n *\n * If no dimensions are specified in the schema element, this element will obtain the dimension of\n * its parent to fill the entire available room. Thus, this element requires specified bounds itself\n * or bounds to be available for its parent.\n */\nvar ForeignObjectElement = /** @class */ (function (_super) {\n    __extends(ForeignObjectElement, _super);\n    function ForeignObjectElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(ForeignObjectElement.prototype, \"bounds\", {\n        get: function () {\n            if (geometry_1.isValidDimension(this.size)) {\n                return {\n                    x: this.position.x,\n                    y: this.position.y,\n                    width: this.size.width,\n                    height: this.size.height\n                };\n            }\n            else if (model_1.isBoundsAware(this.parent)) {\n                return {\n                    x: this.position.x,\n                    y: this.position.y,\n                    width: this.parent.bounds.width,\n                    height: this.parent.bounds.height\n                };\n            }\n            return geometry_1.EMPTY_BOUNDS;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return ForeignObjectElement;\n}(ShapedPreRenderedElement));\nexports.ForeignObjectElement = ForeignObjectElement;\n//# sourceMappingURL=model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar di_config_1 = __importDefault(require(\"../base/di.config\"));\nvar di_config_2 = __importDefault(require(\"../model-source/di.config\"));\nvar di_config_3 = __importDefault(require(\"../features/bounds/di.config\"));\nvar di_config_4 = __importDefault(require(\"../features/button/di.config\"));\nvar di_config_5 = __importDefault(require(\"../features/command-palette/di.config\"));\nvar di_config_6 = __importDefault(require(\"../features/context-menu/di.config\"));\nvar di_config_7 = __importDefault(require(\"../features/decoration/di.config\"));\nvar di_config_8 = __importDefault(require(\"../features/edge-layout/di.config\"));\nvar di_config_9 = require(\"../features/edit/di.config\");\nvar di_config_10 = __importDefault(require(\"../features/expand/di.config\"));\nvar di_config_11 = __importDefault(require(\"../features/export/di.config\"));\nvar di_config_12 = __importDefault(require(\"../features/fade/di.config\"));\nvar di_config_13 = __importDefault(require(\"../features/hover/di.config\"));\nvar di_config_14 = __importDefault(require(\"../features/move/di.config\"));\nvar di_config_15 = __importDefault(require(\"../features/open/di.config\"));\nvar di_config_16 = __importDefault(require(\"../features/routing/di.config\"));\nvar di_config_17 = __importDefault(require(\"../features/select/di.config\"));\nvar di_config_18 = __importDefault(require(\"../features/undo-redo/di.config\"));\nvar di_config_19 = __importDefault(require(\"../features/update/di.config\"));\nvar di_config_20 = __importDefault(require(\"../features/viewport/di.config\"));\nvar di_config_21 = __importDefault(require(\"../features/zorder/di.config\"));\n/**\n * Load the default set of container modules provided by Sprotty.\n */\nfunction loadDefaultModules(container, options) {\n    var modules = [\n        di_config_1.default, di_config_2.default, di_config_3.default, di_config_4.default,\n        di_config_5.default, di_config_6.default, di_config_7.default, di_config_9.edgeEditModule,\n        di_config_8.default, di_config_10.default, di_config_11.default, di_config_12.default,\n        di_config_13.default, di_config_9.labelEditModule, di_config_9.labelEditUiModule, di_config_14.default,\n        di_config_15.default, di_config_16.default, di_config_17.default, di_config_18.default,\n        di_config_19.default, di_config_20.default, di_config_21.default\n    ];\n    if (options && options.exclude) {\n        for (var _i = 0, _a = options.exclude; _i < _a.length; _i++) {\n            var mod = _a[_i];\n            var index = modules.indexOf(mod);\n            if (index >= 0)\n                modules.splice(index, 1);\n        }\n    }\n    container.load.apply(container, modules);\n}\nexports.loadDefaultModules = loadDefaultModules;\n//# sourceMappingURL=modules.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx svg */\nvar jsx_1 = require(\"./jsx\");\nvar sgraph_1 = require(\"../graph/sgraph\");\nvar views_1 = require(\"../features/bounds/views\");\nvar geometry_1 = require(\"../utils/geometry\");\nvar inversify_1 = require(\"inversify\");\nvar SvgViewportView = /** @class */ (function () {\n    function SvgViewportView() {\n    }\n    SvgViewportView.prototype.render = function (model, context, args) {\n        var transform = \"scale(\" + model.zoom + \") translate(\" + -model.scroll.x + \",\" + -model.scroll.y + \")\";\n        return jsx_1.svg(\"svg\", null,\n            jsx_1.svg(\"g\", { transform: transform }, context.renderChildren(model)));\n    };\n    SvgViewportView = __decorate([\n        inversify_1.injectable()\n    ], SvgViewportView);\n    return SvgViewportView;\n}());\nexports.SvgViewportView = SvgViewportView;\nvar CircularNodeView = /** @class */ (function (_super) {\n    __extends(CircularNodeView, _super);\n    function CircularNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CircularNodeView.prototype.render = function (node, context, args) {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        var radius = this.getRadius(node);\n        return jsx_1.svg(\"g\", null,\n            jsx_1.svg(\"circle\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, r: radius, cx: radius, cy: radius }),\n            context.renderChildren(node));\n    };\n    CircularNodeView.prototype.getRadius = function (node) {\n        var d = Math.min(node.size.width, node.size.height);\n        return d > 0 ? d / 2 : 0;\n    };\n    CircularNodeView = __decorate([\n        inversify_1.injectable()\n    ], CircularNodeView);\n    return CircularNodeView;\n}(views_1.ShapeView));\nexports.CircularNodeView = CircularNodeView;\nvar RectangularNodeView = /** @class */ (function (_super) {\n    __extends(RectangularNodeView, _super);\n    function RectangularNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    RectangularNodeView.prototype.render = function (node, context, args) {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        return jsx_1.svg(\"g\", null,\n            jsx_1.svg(\"rect\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, x: \"0\", y: \"0\", width: Math.max(node.size.width, 0), height: Math.max(node.size.height, 0) }),\n            context.renderChildren(node));\n    };\n    RectangularNodeView = __decorate([\n        inversify_1.injectable()\n    ], RectangularNodeView);\n    return RectangularNodeView;\n}(views_1.ShapeView));\nexports.RectangularNodeView = RectangularNodeView;\nvar DiamondNodeView = /** @class */ (function (_super) {\n    __extends(DiamondNodeView, _super);\n    function DiamondNodeView() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    DiamondNodeView.prototype.render = function (node, context, args) {\n        if (!this.isVisible(node, context)) {\n            return undefined;\n        }\n        var diamond = new geometry_1.Diamond({ height: Math.max(node.size.height, 0), width: Math.max(node.size.width, 0), x: 0, y: 0 });\n        var points = svgStr(diamond.topPoint) + \" \" + svgStr(diamond.rightPoint) + \" \" + svgStr(diamond.bottomPoint) + \" \" + svgStr(diamond.leftPoint);\n        return jsx_1.svg(\"g\", null,\n            jsx_1.svg(\"polygon\", { \"class-sprotty-node\": node instanceof sgraph_1.SNode, \"class-sprotty-port\": node instanceof sgraph_1.SPort, \"class-mouseover\": node.hoverFeedback, \"class-selected\": node.selected, points: points }),\n            context.renderChildren(node));\n    };\n    DiamondNodeView = __decorate([\n        inversify_1.injectable()\n    ], DiamondNodeView);\n    return DiamondNodeView;\n}(views_1.ShapeView));\nexports.DiamondNodeView = DiamondNodeView;\nfunction svgStr(point) {\n    return point.x + \",\" + point.y;\n}\nvar EmptyGroupView = /** @class */ (function () {\n    function EmptyGroupView() {\n    }\n    EmptyGroupView.prototype.render = function (model, context) {\n        return jsx_1.svg(\"g\", null);\n    };\n    EmptyGroupView = __decorate([\n        inversify_1.injectable()\n    ], EmptyGroupView);\n    return EmptyGroupView;\n}());\nexports.EmptyGroupView = EmptyGroupView;\n//# sourceMappingURL=svg-views.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar snabbdom_1 = require(\"snabbdom\");\nfunction buildVNodeData(attrs) {\n    var data = {};\n    var addData = function (memo, name) {\n        var _a;\n        if (name !== 'style' && name !== 'class') {\n            var val = unescapeEntities(attrs[name]);\n            memo ? memo[name] = val : memo = (_a = {}, _a[name] = val, _a);\n        }\n        return memo;\n    };\n    var _attrs = Object.keys(attrs).reduce(addData, null);\n    if (_attrs) {\n        data.attrs = _attrs;\n    }\n    var style = parseStyle(attrs);\n    if (style) {\n        data.style = style;\n    }\n    var classes = parseClass(attrs);\n    if (classes) {\n        data.class = classes;\n    }\n    return data;\n}\nfunction parseStyle(attrs) {\n    var addStyle = function (memo, styleProp) {\n        var _a;\n        var res = styleProp.split(':');\n        var name = transformName(res[0].trim());\n        if (name) {\n            var val = res[1].replace('!important', '').trim();\n            memo ? memo[name] = val : memo = (_a = {}, _a[name] = val, _a);\n        }\n        return memo;\n    };\n    try {\n        return attrs.style.split(';').reduce(addStyle, null);\n    }\n    catch (e) {\n        return null;\n    }\n}\nfunction parseClass(attrs) {\n    var addClass = function (memo, className) {\n        var _a;\n        className = className.trim();\n        if (className) {\n            memo ? memo[className] = true : memo = (_a = {}, _a[className] = true, _a);\n        }\n        return memo;\n    };\n    try {\n        return attrs.class.split(' ').reduce(addClass, null);\n    }\n    catch (e) {\n        return null;\n    }\n}\nfunction transformName(name) {\n    // Replace -a with A to help camel case style property names.\n    name = name.replace(/-(\\w)/g, function _replace($1, $2) {\n        return $2.toUpperCase();\n    });\n    // Handle properties that start with a -.\n    var firstChar = name.charAt(0).toLowerCase();\n    return \"\" + firstChar + name.substring(1);\n}\n// Regex for matching HTML entities.\nvar entityRegex = new RegExp('&[a-z0-9#]+;', 'gi');\n// Element for setting innerHTML for transforming entities.\nvar el = null;\nfunction unescapeEntities(text) {\n    // Create the element using the context if it doesn't exist.\n    if (!el) {\n        el = document.createElement('div');\n    }\n    return text.replace(entityRegex, function (entity) {\n        if (el === null)\n            return '';\n        el.innerHTML = entity;\n        return el.textContent === null ? '' : el.textContent;\n    });\n}\nfunction recurse(doc, func) {\n    var node = doc;\n    var parent = null;\n    var stack = [];\n    var setChild = function (n) {\n        var child = n.firstChild;\n        if (child !== null) {\n            parent = n;\n        }\n        node = child;\n    };\n    func(node, parent);\n    setChild(node);\n    while (true) {\n        while (node) {\n            stack.push(node);\n            func(node, parent);\n            setChild(node);\n        }\n        var _node = stack.pop();\n        node = _node ? _node : null;\n        if (!stack.length)\n            break;\n        parent = stack[stack.length - 1];\n        if (node) {\n            var sibling = node.nextSibling;\n            if (sibling == null) {\n                parent = stack[stack.length - 1];\n            }\n            node = sibling;\n        }\n    }\n}\nvar vdom = null;\nvar vnodeMap = new Map();\nvar delimited = false;\nfunction toVNode(node, parent) {\n    var current;\n    if (parent !== null) {\n        current = vnodeMap.get(parent);\n    }\n    switch (node === null || node === void 0 ? void 0 : node.nodeType) {\n        // element\n        case 1: {\n            if (current === undefined)\n                return;\n            current.children = current.children ? current.children : [];\n            var children = current.children;\n            var attributes = node.attributes;\n            var attrs = {};\n            for (var i = 0; i < attributes.length; i++) {\n                var attr = attributes.item(i);\n                if (attr) {\n                    attrs[attr.name] = attr.value;\n                }\n            }\n            var vn = snabbdom_1.h(node.nodeName, buildVNodeData(attrs));\n            children.push(vn);\n            vnodeMap.set(node, vn);\n            break;\n        }\n        // text\n        case 3: {\n            var text = node.textContent;\n            if (text !== null && current !== undefined) {\n                current.children = current.children ? current.children : [];\n                var children = current.children;\n                var lastData = children.length > 0 ? children[children.length - 1] : null;\n                if (!delimited && typeof lastData !== 'string' && lastData !== null && lastData.sel === undefined) {\n                    lastData.text = lastData.text + text;\n                }\n                else {\n                    children.push(snabbdom_1.vnode(undefined, undefined, undefined, text, undefined));\n                }\n                delimited = false;\n            }\n            break;\n        }\n        case 8: {\n            delimited = true;\n            break;\n        }\n        // document\n        case 9: {\n            vdom = snabbdom_1.vnode(undefined, undefined, [], undefined, undefined);\n            vnodeMap.set(node, vdom);\n            break;\n        }\n        default:\n            break;\n    }\n}\nfunction stripVNode(vnodes) {\n    var children = vnodes === null || vnodes === void 0 ? void 0 : vnodes.children;\n    if (typeof children === 'undefined')\n        return null;\n    if (children.length === 1 && typeof children[0] !== 'string')\n        return children[0];\n    return null;\n}\nfunction virtualizeString(html) {\n    var _a, _b;\n    var parser = new window.DOMParser();\n    if (parser === undefined || html === undefined || html === '')\n        return null;\n    var doc = parser.parseFromString(html, \"application/xml\");\n    if (((_a = doc === null || doc === void 0 ? void 0 : doc.firstChild) === null || _a === void 0 ? void 0 : _a.nodeName) === 'parsererror') {\n        var error = \"\" + ((_b = doc === null || doc === void 0 ? void 0 : doc.firstChild) === null || _b === void 0 ? void 0 : _b.textContent);\n        return snabbdom_1.h('parsererror', [error]);\n    }\n    delimited = false;\n    vdom = null;\n    recurse(doc, toVNode);\n    if (vdom === null)\n        return null;\n    return stripVNode(vdom);\n}\nexports.default = virtualizeString;\n//# sourceMappingURL=virtualize.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_1 = require(\"../base/commands/command\");\nvar types_1 = require(\"../base/types\");\nvar model_source_1 = require(\"./model-source\");\n/**\n * Commit the current SModel back to the model source.\n *\n * The SModel (AKA internal model) contains a lot of dirty/transitional state, such\n * as intermediate move postions or handles. When a user interaction that spans multiple\n * commands finishes, it fires a CommitModelAction to write the final changes back to\n * the model source.\n */\nvar CommitModelAction = /** @class */ (function () {\n    function CommitModelAction() {\n        this.kind = CommitModelCommand.KIND;\n    }\n    return CommitModelAction;\n}());\nexports.CommitModelAction = CommitModelAction;\nvar CommitModelCommand = /** @class */ (function (_super) {\n    __extends(CommitModelCommand, _super);\n    function CommitModelCommand(action) {\n        var _this = _super.call(this) || this;\n        _this.action = action;\n        return _this;\n    }\n    CommitModelCommand.prototype.execute = function (context) {\n        this.newModel = context.modelFactory.createSchema(context.root);\n        return this.doCommit(this.newModel, context.root, true);\n    };\n    CommitModelCommand.prototype.doCommit = function (model, result, doSetOriginal) {\n        var _this = this;\n        var commitResult = this.modelSource.commitModel(model);\n        if (commitResult instanceof Promise) {\n            return commitResult.then(function (originalModel) {\n                if (doSetOriginal)\n                    _this.originalModel = originalModel;\n                return result;\n            });\n        }\n        else {\n            if (doSetOriginal)\n                this.originalModel = commitResult;\n            return result;\n        }\n    };\n    CommitModelCommand.prototype.undo = function (context) {\n        return this.doCommit(this.originalModel, context.root, false);\n    };\n    CommitModelCommand.prototype.redo = function (context) {\n        return this.doCommit(this.newModel, context.root, false);\n    };\n    CommitModelCommand.KIND = 'commitModel';\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ModelSource),\n        __metadata(\"design:type\", model_source_1.ModelSource)\n    ], CommitModelCommand.prototype, \"modelSource\", void 0);\n    CommitModelCommand = __decorate([\n        inversify_1.injectable(),\n        __param(0, inversify_1.inject(types_1.TYPES.Action)),\n        __metadata(\"design:paramtypes\", [CommitModelAction])\n    ], CommitModelCommand);\n    return CommitModelCommand;\n}(command_1.SystemCommand));\nexports.CommitModelCommand = CommitModelCommand;\n//# sourceMappingURL=commit-model.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar command_registration_1 = require(\"../base/commands/command-registration\");\nvar types_1 = require(\"../base/types\");\nvar commit_model_1 = require(\"./commit-model\");\nvar model_source_1 = require(\"./model-source\");\n/**\n * This container module does NOT provide any binding for TYPES.ModelSource because that needs to be\n * done according to the needs of the application. You can choose between a local (LocalModelSource)\n * and a remote (e.g. WebSocketDiagramServer) implementation.\n */\nvar modelSourceModule = new inversify_1.ContainerModule(function (bind, _unbind, isBound) {\n    bind(types_1.TYPES.ModelSourceProvider).toProvider(function (context) {\n        return function () {\n            return new Promise(function (resolve) {\n                resolve(context.container.get(types_1.TYPES.ModelSource));\n            });\n        };\n    });\n    command_registration_1.configureCommand({ bind: bind, isBound: isBound }, commit_model_1.CommitModelCommand);\n    bind(types_1.TYPES.IActionHandlerInitializer).toService(types_1.TYPES.ModelSource);\n    bind(model_source_1.ComputedBoundsApplicator).toSelf().inSingletonScope();\n});\nexports.default = modelSourceModule;\n//# sourceMappingURL=di.config.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar file_saver_1 = require(\"file-saver\");\nvar inversify_1 = require(\"inversify\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar types_1 = require(\"../base/types\");\nvar bounds_manipulation_1 = require(\"../features/bounds/bounds-manipulation\");\nvar expand_1 = require(\"../features/expand/expand\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar hover_1 = require(\"../features/hover/hover\");\nvar open_1 = require(\"../features/open/open\");\nvar update_model_1 = require(\"../features/update/update-model\");\nvar object_1 = require(\"../utils/object\");\nvar model_source_1 = require(\"./model-source\");\nfunction isActionMessage(object) {\n    return object_1.hasOwnProperty(object, 'action');\n}\nexports.isActionMessage = isActionMessage;\n/**\n * Sent by the external server when to signal a state change.\n */\nvar ServerStatusAction = /** @class */ (function () {\n    function ServerStatusAction() {\n        this.kind = ServerStatusAction.KIND;\n    }\n    ServerStatusAction.KIND = 'serverStatus';\n    return ServerStatusAction;\n}());\nexports.ServerStatusAction = ServerStatusAction;\nvar receivedFromServerProperty = '__receivedFromServer';\n/**\n * A ModelSource that communicates with an external model provider, e.g.\n * a model editor.\n *\n * This class defines which actions are sent to and received from the\n * external model source.\n */\nvar DiagramServer = /** @class */ (function (_super) {\n    __extends(DiagramServer, _super);\n    function DiagramServer() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.currentRoot = {\n            type: 'NONE',\n            id: 'ROOT'\n        };\n        return _this;\n    }\n    DiagramServer.prototype.initialize = function (registry) {\n        _super.prototype.initialize.call(this, registry);\n        // Register this model source\n        registry.register(bounds_manipulation_1.ComputedBoundsAction.KIND, this);\n        registry.register(bounds_manipulation_1.RequestBoundsCommand.KIND, this);\n        registry.register(hover_1.RequestPopupModelAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAction.KIND, this);\n        registry.register(expand_1.CollapseExpandAllAction.KIND, this);\n        registry.register(open_1.OpenAction.KIND, this);\n        registry.register(ServerStatusAction.KIND, this);\n        if (!this.clientId)\n            this.clientId = this.viewerOptions.baseDiv;\n    };\n    DiagramServer.prototype.handle = function (action) {\n        var forwardToServer = this.handleLocally(action);\n        if (forwardToServer)\n            this.forwardToServer(action);\n    };\n    DiagramServer.prototype.forwardToServer = function (action) {\n        var message = {\n            clientId: this.clientId,\n            action: action\n        };\n        this.logger.log(this, 'sending', message);\n        this.sendMessage(message);\n    };\n    DiagramServer.prototype.messageReceived = function (data) {\n        var _this = this;\n        var object = typeof (data) === 'string' ? JSON.parse(data) : data;\n        if (isActionMessage(object) && object.action) {\n            if (!object.clientId || object.clientId === this.clientId) {\n                object.action[receivedFromServerProperty] = true;\n                this.logger.log(this, 'receiving', object);\n                this.actionDispatcher.dispatch(object.action).then(function () {\n                    _this.storeNewModel(object.action);\n                });\n            }\n        }\n        else {\n            this.logger.error(this, 'received data is not an action message', object);\n        }\n    };\n    /**\n     * Check whether the given action should be handled locally. Returns true if the action should\n     * still be sent to the server, and false if it's only handled locally.\n     */\n    DiagramServer.prototype.handleLocally = function (action) {\n        this.storeNewModel(action);\n        switch (action.kind) {\n            case bounds_manipulation_1.ComputedBoundsAction.KIND:\n                return this.handleComputedBounds(action);\n            case set_model_1.RequestModelAction.KIND:\n                return this.handleRequestModel(action);\n            case bounds_manipulation_1.RequestBoundsCommand.KIND:\n                return false;\n            case svg_exporter_1.ExportSvgAction.KIND:\n                return this.handleExportSvgAction(action);\n            case ServerStatusAction.KIND:\n                return this.handleServerStateAction(action);\n        }\n        return !action[receivedFromServerProperty];\n    };\n    /**\n     * Put the new model contained in the given action into the model storage, if there is any.\n     */\n    DiagramServer.prototype.storeNewModel = function (action) {\n        if (action.kind === set_model_1.SetModelCommand.KIND\n            || action.kind === update_model_1.UpdateModelCommand.KIND\n            || action.kind === bounds_manipulation_1.RequestBoundsCommand.KIND) {\n            var newRoot = action.newRoot;\n            if (newRoot) {\n                this.currentRoot = newRoot;\n                if (action.kind === set_model_1.SetModelCommand.KIND || action.kind === update_model_1.UpdateModelCommand.KIND) {\n                    this.lastSubmittedModelType = newRoot.type;\n                }\n            }\n        }\n    };\n    DiagramServer.prototype.handleRequestModel = function (action) {\n        var newOptions = __assign({ needsClientLayout: this.viewerOptions.needsClientLayout, needsServerLayout: this.viewerOptions.needsServerLayout }, action.options);\n        var newAction = __assign(__assign({}, action), { options: newOptions });\n        this.forwardToServer(newAction);\n        return false;\n    };\n    /**\n     * If the server requires to compute a layout, the computed bounds are forwarded. Otherwise they\n     * are applied to the current model locally and a model update is triggered.\n     */\n    DiagramServer.prototype.handleComputedBounds = function (action) {\n        if (this.viewerOptions.needsServerLayout) {\n            return true;\n        }\n        else {\n            var root = this.currentRoot;\n            this.computedBoundsApplicator.apply(root, action);\n            if (root.type === this.lastSubmittedModelType) {\n                this.actionDispatcher.dispatch(new update_model_1.UpdateModelAction(root));\n            }\n            else {\n                this.actionDispatcher.dispatch(new set_model_1.SetModelAction(root));\n            }\n            this.lastSubmittedModelType = root.type;\n            return false;\n        }\n    };\n    DiagramServer.prototype.handleExportSvgAction = function (action) {\n        var blob = new Blob([action.svg], { type: \"text/plain;charset=utf-8\" });\n        file_saver_1.saveAs(blob, \"diagram.svg\");\n        return false;\n    };\n    DiagramServer.prototype.handleServerStateAction = function (action) {\n        return false;\n    };\n    DiagramServer.prototype.commitModel = function (newRoot) {\n        var previousRoot = this.currentRoot;\n        this.currentRoot = newRoot;\n        return previousRoot;\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], DiagramServer.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(model_source_1.ComputedBoundsApplicator),\n        __metadata(\"design:type\", model_source_1.ComputedBoundsApplicator)\n    ], DiagramServer.prototype, \"computedBoundsApplicator\", void 0);\n    DiagramServer = __decorate([\n        inversify_1.injectable()\n    ], DiagramServer);\n    return DiagramServer;\n}(model_source_1.ModelSource));\nexports.DiagramServer = DiagramServer;\n//# sourceMappingURL=diagram-server.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar file_saver_1 = require(\"file-saver\");\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar smodel_1 = require(\"../base/model/smodel\");\nvar smodel_utils_1 = require(\"../base/model/smodel-utils\");\nvar smodel_factory_1 = require(\"../base/model/smodel-factory\");\nvar bounds_manipulation_1 = require(\"../features/bounds/bounds-manipulation\");\nvar viewport_1 = require(\"../features/viewport/viewport\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar hover_1 = require(\"../features/hover/hover\");\nvar model_matching_1 = require(\"../features/update/model-matching\");\nvar update_model_1 = require(\"../features/update/update-model\");\nvar select_1 = require(\"../features/select/select\");\nvar model_source_1 = require(\"./model-source\");\n/**\n * A model source that allows to set and modify the model through function calls.\n * This class can be used as a facade over the action-based API of sprotty. It handles\n * actions for bounds calculation and model updates.\n */\nvar LocalModelSource = /** @class */ (function (_super) {\n    __extends(LocalModelSource, _super);\n    function LocalModelSource() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.currentRoot = smodel_factory_1.EMPTY_ROOT;\n        return _this;\n    }\n    Object.defineProperty(LocalModelSource.prototype, \"model\", {\n        get: function () {\n            return this.currentRoot;\n        },\n        set: function (root) {\n            this.setModel(root);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LocalModelSource.prototype.initialize = function (registry) {\n        _super.prototype.initialize.call(this, registry);\n        // Register this model source\n        registry.register(bounds_manipulation_1.ComputedBoundsAction.KIND, this);\n        registry.register(hover_1.RequestPopupModelAction.KIND, this);\n    };\n    /**\n     * Set the model without incremental update.\n     */\n    LocalModelSource.prototype.setModel = function (newRoot) {\n        this.currentRoot = newRoot;\n        return this.submitModel(newRoot, false);\n    };\n    LocalModelSource.prototype.commitModel = function (newRoot) {\n        var previousRoot = this.currentRoot;\n        this.currentRoot = newRoot;\n        return previousRoot;\n    };\n    /**\n     * Apply an incremental update to the model with an animation showing the transition to\n     * the new state. If `newRoot` is undefined, the current root is submitted; in that case\n     * it is assumed that it has been modified before.\n     */\n    LocalModelSource.prototype.updateModel = function (newRoot) {\n        if (newRoot === undefined) {\n            return this.submitModel(this.currentRoot, true);\n        }\n        else {\n            this.currentRoot = newRoot;\n            return this.submitModel(newRoot, true);\n        }\n    };\n    /**\n     * Get the current selection from the model.\n     */\n    LocalModelSource.prototype.getSelection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var res, index;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.actionDispatcher.request(select_1.GetSelectionAction.create())];\n                    case 1:\n                        res = _a.sent();\n                        index = new smodel_1.SModelIndex();\n                        index.add(this.currentRoot);\n                        return [2 /*return*/, index.all().filter(function (e) { return res.selectedElementsIDs.indexOf(e.id) >= 0; })];\n                }\n            });\n        });\n    };\n    /**\n     * Get the current viewport from the model.\n     */\n    LocalModelSource.prototype.getViewport = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.actionDispatcher.request(viewport_1.GetViewportAction.create())];\n                    case 1:\n                        res = _a.sent();\n                        return [2 /*return*/, {\n                                scroll: res.viewport.scroll,\n                                zoom: res.viewport.zoom,\n                                canvasBounds: res.canvasBounds\n                            }];\n                }\n            });\n        });\n    };\n    /**\n     * If client layout is active, run a `RequestBoundsAction` and wait for the resulting\n     * `ComputedBoundsAction`, otherwise call `doSubmitModel()` directly.\n     */\n    LocalModelSource.prototype.submitModel = function (newRoot, update, cause) {\n        return __awaiter(this, void 0, void 0, function () {\n            var computedBounds, index;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!this.viewerOptions.needsClientLayout) return [3 /*break*/, 3];\n                        return [4 /*yield*/, this.actionDispatcher.request(bounds_manipulation_1.RequestBoundsAction.create(newRoot))];\n                    case 1:\n                        computedBounds = _a.sent();\n                        index = this.computedBoundsApplicator.apply(this.currentRoot, computedBounds);\n                        return [4 /*yield*/, this.doSubmitModel(newRoot, true, cause, index)];\n                    case 2:\n                        _a.sent();\n                        return [3 /*break*/, 5];\n                    case 3: return [4 /*yield*/, this.doSubmitModel(newRoot, update, cause)];\n                    case 4:\n                        _a.sent();\n                        _a.label = 5;\n                    case 5: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Submit the given model with an `UpdateModelAction` or a `SetModelAction` depending on the\n     * `update` argument. If available, the model layout engine is invoked first.\n     */\n    LocalModelSource.prototype.doSubmitModel = function (newRoot, update, cause, index) {\n        return __awaiter(this, void 0, void 0, function () {\n            var layoutResult, error_1, lastSubmittedModelType, request, input;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (!(this.layoutEngine !== undefined)) return [3 /*break*/, 6];\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([1, 5, , 6]);\n                        layoutResult = this.layoutEngine.layout(newRoot, index);\n                        if (!(layoutResult instanceof Promise)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, layoutResult];\n                    case 2:\n                        newRoot = _a.sent();\n                        return [3 /*break*/, 4];\n                    case 3:\n                        if (layoutResult !== undefined)\n                            newRoot = layoutResult;\n                        _a.label = 4;\n                    case 4: return [3 /*break*/, 6];\n                    case 5:\n                        error_1 = _a.sent();\n                        this.logger.error(this, error_1.toString(), error_1.stack);\n                        return [3 /*break*/, 6];\n                    case 6:\n                        lastSubmittedModelType = this.lastSubmittedModelType;\n                        this.lastSubmittedModelType = newRoot.type;\n                        if (!(cause && cause.kind === set_model_1.RequestModelAction.KIND && cause.requestId)) return [3 /*break*/, 8];\n                        request = cause;\n                        return [4 /*yield*/, this.actionDispatcher.dispatch(new set_model_1.SetModelAction(newRoot, request.requestId))];\n                    case 7:\n                        _a.sent();\n                        return [3 /*break*/, 12];\n                    case 8:\n                        if (!(update && newRoot.type === lastSubmittedModelType)) return [3 /*break*/, 10];\n                        input = Array.isArray(update) ? update : newRoot;\n                        return [4 /*yield*/, this.actionDispatcher.dispatch(new update_model_1.UpdateModelAction(input, true, cause))];\n                    case 9:\n                        _a.sent();\n                        return [3 /*break*/, 12];\n                    case 10: return [4 /*yield*/, this.actionDispatcher.dispatch(new set_model_1.SetModelAction(newRoot))];\n                    case 11:\n                        _a.sent();\n                        _a.label = 12;\n                    case 12: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    /**\n     * Modify the current model with an array of matches.\n     */\n    LocalModelSource.prototype.applyMatches = function (matches) {\n        var root = this.currentRoot;\n        model_matching_1.applyMatches(root, matches);\n        return this.submitModel(root, matches);\n    };\n    /**\n     * Modify the current model by adding new elements.\n     */\n    LocalModelSource.prototype.addElements = function (elements) {\n        var matches = [];\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n            var e = elements_1[_i];\n            var anye = e;\n            if (anye.element !== undefined && anye.parentId !== undefined) {\n                matches.push({\n                    right: anye.element,\n                    rightParentId: anye.parentId\n                });\n            }\n            else if (anye.id !== undefined) {\n                matches.push({\n                    right: anye,\n                    rightParentId: this.currentRoot.id\n                });\n            }\n        }\n        return this.applyMatches(matches);\n    };\n    /**\n     * Modify the current model by removing elements.\n     */\n    LocalModelSource.prototype.removeElements = function (elements) {\n        var matches = [];\n        var index = new smodel_1.SModelIndex();\n        index.add(this.currentRoot);\n        for (var _i = 0, elements_2 = elements; _i < elements_2.length; _i++) {\n            var e = elements_2[_i];\n            var anye = e;\n            if (anye.elementId !== undefined && anye.parentId !== undefined) {\n                var element = index.getById(anye.elementId);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: anye.parentId\n                    });\n                }\n            }\n            else {\n                var element = index.getById(anye);\n                if (element !== undefined) {\n                    matches.push({\n                        left: element,\n                        leftParentId: this.currentRoot.id\n                    });\n                }\n            }\n        }\n        return this.applyMatches(matches);\n    };\n    // ----- Methods for handling incoming actions ----------------------------\n    LocalModelSource.prototype.handle = function (action) {\n        switch (action.kind) {\n            case set_model_1.RequestModelAction.KIND:\n                this.handleRequestModel(action);\n                break;\n            case bounds_manipulation_1.ComputedBoundsAction.KIND:\n                this.computedBoundsApplicator.apply(this.currentRoot, action);\n                break;\n            case hover_1.RequestPopupModelAction.KIND:\n                this.handleRequestPopupModel(action);\n                break;\n            case svg_exporter_1.ExportSvgAction.KIND:\n                this.handleExportSvgAction(action);\n                break;\n        }\n    };\n    LocalModelSource.prototype.handleRequestModel = function (action) {\n        this.submitModel(this.currentRoot, false, action);\n    };\n    LocalModelSource.prototype.handleRequestPopupModel = function (action) {\n        if (this.popupModelProvider !== undefined) {\n            var element = smodel_utils_1.findElement(this.currentRoot, action.elementId);\n            var popupRoot = this.popupModelProvider.getPopupModel(action, element);\n            if (popupRoot !== undefined) {\n                popupRoot.canvasBounds = action.bounds;\n                this.actionDispatcher.dispatch(new hover_1.SetPopupModelAction(popupRoot, action.requestId));\n            }\n        }\n    };\n    LocalModelSource.prototype.handleExportSvgAction = function (action) {\n        var blob = new Blob([action.svg], { type: \"text/plain;charset=utf-8\" });\n        file_saver_1.saveAs(blob, \"diagram.svg\");\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ILogger),\n        __metadata(\"design:type\", Object)\n    ], LocalModelSource.prototype, \"logger\", void 0);\n    __decorate([\n        inversify_1.inject(model_source_1.ComputedBoundsApplicator),\n        __metadata(\"design:type\", model_source_1.ComputedBoundsApplicator)\n    ], LocalModelSource.prototype, \"computedBoundsApplicator\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IPopupModelProvider), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], LocalModelSource.prototype, \"popupModelProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IModelLayoutEngine), inversify_1.optional(),\n        __metadata(\"design:type\", Object)\n    ], LocalModelSource.prototype, \"layoutEngine\", void 0);\n    LocalModelSource = __decorate([\n        inversify_1.injectable()\n    ], LocalModelSource);\n    return LocalModelSource;\n}(model_source_1.ModelSource));\nexports.LocalModelSource = LocalModelSource;\n//# sourceMappingURL=local-model-source.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar logging_1 = require(\"../utils/logging\");\nvar types_1 = require(\"../base/types\");\nvar LoggingAction = /** @class */ (function () {\n    function LoggingAction(severity, time, caller, message, params) {\n        this.severity = severity;\n        this.time = time;\n        this.caller = caller;\n        this.message = message;\n        this.params = params;\n        this.kind = LoggingAction.KIND;\n    }\n    LoggingAction.KIND = 'logging';\n    return LoggingAction;\n}());\nexports.LoggingAction = LoggingAction;\n/**\n * A logger that forwards messages of type 'error', 'warn', and 'info' to the model source.\n */\nvar ForwardingLogger = /** @class */ (function () {\n    function ForwardingLogger() {\n    }\n    ForwardingLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.error)\n            this.forward(thisArg, message, logging_1.LogLevel.error, params);\n    };\n    ForwardingLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.warn)\n            this.forward(thisArg, message, logging_1.LogLevel.warn, params);\n    };\n    ForwardingLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.info)\n            this.forward(thisArg, message, logging_1.LogLevel.info, params);\n    };\n    ForwardingLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= logging_1.LogLevel.log) {\n            // We cannot forward 'log' level messages since that would lead to endless loops\n            try {\n                var caller = typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg);\n                console.log.apply(thisArg, __spreadArrays([caller + ': ' + message], params));\n            }\n            catch (error) { }\n        }\n    };\n    ForwardingLogger.prototype.forward = function (thisArg, message, logLevel, params) {\n        var date = new Date();\n        var action = new LoggingAction(logging_1.LogLevel[logLevel], date.toLocaleTimeString(), typeof thisArg === 'object' ? thisArg.constructor.name : String(thisArg), message, params.map(function (p) { return JSON.stringify(p); }));\n        this.modelSourceProvider().then(function (modelSource) {\n            try {\n                modelSource.handle(action);\n            }\n            catch (error) {\n                try {\n                    console.log.apply(thisArg, [message, action, error]);\n                }\n                catch (e) { }\n            }\n        });\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ModelSourceProvider),\n        __metadata(\"design:type\", Function)\n    ], ForwardingLogger.prototype, \"modelSourceProvider\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.LogLevel),\n        __metadata(\"design:type\", Number)\n    ], ForwardingLogger.prototype, \"logLevel\", void 0);\n    ForwardingLogger = __decorate([\n        inversify_1.injectable()\n    ], ForwardingLogger);\n    return ForwardingLogger;\n}());\nexports.ForwardingLogger = ForwardingLogger;\n//# sourceMappingURL=logging.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar set_model_1 = require(\"../base/features/set-model\");\nvar types_1 = require(\"../base/types\");\nvar svg_exporter_1 = require(\"../features/export/svg-exporter\");\nvar smodel_1 = require(\"../base/model/smodel\");\n/**\n * A model source is serving the model to the event cycle. It represents\n * the entry point to the client for external sources, such as model\n * editors.\n *\n * As an IActionHandler it listens to actions in and reacts to them with\n * commands or actions if necessary. This way, you can implement action\n * protocols between the client and the outside world.\n *\n * There are two default implementations for a ModelSource:\n * <ul>\n * <li>the LocalModelSource handles the actions to calculate bounds and\n * set/update the model</li>\n * <li>the DiagramServer connects via websocket to a remote source. It\n * can be used to connect to a model editor that provides the model,\n * layouts diagrams, transfers selection and answers model queries from\n * the client.</li>\n */\nvar ModelSource = /** @class */ (function () {\n    function ModelSource() {\n    }\n    ModelSource.prototype.initialize = function (registry) {\n        // Register this model source\n        registry.register(set_model_1.RequestModelAction.KIND, this);\n        registry.register(svg_exporter_1.ExportSvgAction.KIND, this);\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.IActionDispatcher),\n        __metadata(\"design:type\", Object)\n    ], ModelSource.prototype, \"actionDispatcher\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], ModelSource.prototype, \"viewerOptions\", void 0);\n    ModelSource = __decorate([\n        inversify_1.injectable()\n    ], ModelSource);\n    return ModelSource;\n}());\nexports.ModelSource = ModelSource;\nvar ComputedBoundsApplicator = /** @class */ (function () {\n    function ComputedBoundsApplicator() {\n    }\n    ComputedBoundsApplicator.prototype.apply = function (root, action) {\n        var index = new smodel_1.SModelIndex();\n        index.add(root);\n        for (var _i = 0, _a = action.bounds; _i < _a.length; _i++) {\n            var b = _a[_i];\n            var element = index.getById(b.elementId);\n            if (element !== undefined)\n                this.applyBounds(element, b.newPosition, b.newSize);\n        }\n        if (action.alignments !== undefined) {\n            for (var _b = 0, _c = action.alignments; _b < _c.length; _b++) {\n                var a = _c[_b];\n                var element = index.getById(a.elementId);\n                if (element !== undefined)\n                    this.applyAlignment(element, a.newAlignment);\n            }\n        }\n        return index;\n    };\n    ComputedBoundsApplicator.prototype.applyAlignment = function (element, newAlignment) {\n        var e = element;\n        e.alignment = { x: newAlignment.x, y: newAlignment.y };\n    };\n    ComputedBoundsApplicator.prototype.applyBounds = function (element, newPosition, newSize) {\n        var e = element;\n        if (newPosition)\n            e.position = __assign({}, newPosition);\n        e.size = __assign({}, newSize);\n    };\n    ComputedBoundsApplicator = __decorate([\n        inversify_1.injectable()\n    ], ComputedBoundsApplicator);\n    return ComputedBoundsApplicator;\n}());\nexports.ComputedBoundsApplicator = ComputedBoundsApplicator;\n//# sourceMappingURL=model-source.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar diagram_server_1 = require(\"./diagram-server\");\n/**\n * An external ModelSource that connects to the model provider using a\n * websocket.\n */\nvar WebSocketDiagramServer = /** @class */ (function (_super) {\n    __extends(WebSocketDiagramServer, _super);\n    function WebSocketDiagramServer() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    WebSocketDiagramServer.prototype.listen = function (webSocket) {\n        var _this = this;\n        webSocket.addEventListener('message', function (event) {\n            _this.messageReceived(event.data);\n        });\n        webSocket.addEventListener('error', function (event) {\n            _this.logger.error(_this, 'error event received', event);\n        });\n        this.webSocket = webSocket;\n    };\n    WebSocketDiagramServer.prototype.disconnect = function () {\n        if (this.webSocket) {\n            this.webSocket.close();\n            this.webSocket = undefined;\n        }\n    };\n    WebSocketDiagramServer.prototype.sendMessage = function (message) {\n        if (this.webSocket) {\n            this.webSocket.send(JSON.stringify(message));\n        }\n        else {\n            throw new Error('WebSocket is not connected');\n        }\n    };\n    WebSocketDiagramServer = __decorate([\n        inversify_1.injectable()\n    ], WebSocketDiagramServer);\n    return WebSocketDiagramServer;\n}(diagram_server_1.DiagramServer));\nexports.WebSocketDiagramServer = WebSocketDiagramServer;\n//# sourceMappingURL=websocket.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nvar Deferred = /** @class */ (function () {\n    function Deferred() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this.resolve = resolve;\n            _this.reject = reject;\n        });\n    }\n    return Deferred;\n}());\nexports.Deferred = Deferred;\n//# sourceMappingURL=async.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar geometry_1 = require(\"./geometry\");\n/**\n * Returns whether the mouse or keyboard event includes the CMD key\n * on Mac or CTRL key on Linux / others.\n */\nfunction isCtrlOrCmd(event) {\n    if (isMac())\n        return event.metaKey;\n    else\n        return event.ctrlKey;\n}\nexports.isCtrlOrCmd = isCtrlOrCmd;\nfunction isMac() {\n    return window.navigator.userAgent.indexOf(\"Mac\") !== -1;\n}\nexports.isMac = isMac;\nfunction isCrossSite(url) {\n    if (url && typeof window !== 'undefined' && window.location) {\n        var baseURL = '';\n        if (window.location.protocol)\n            baseURL += window.location.protocol + '//';\n        if (window.location.host)\n            baseURL += window.location.host;\n        return baseURL.length > 0 && !url.startsWith(baseURL);\n    }\n    return false;\n}\nexports.isCrossSite = isCrossSite;\n/**\n * Returns the amount of scroll of the browser window as a point.\n */\nfunction getWindowScroll() {\n    if (typeof window === 'undefined') {\n        return geometry_1.ORIGIN_POINT;\n    }\n    return {\n        x: window.pageXOffset,\n        y: window.pageYOffset\n    };\n}\nexports.getWindowScroll = getWindowScroll;\n//# sourceMappingURL=browser.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction rgb(red, green, blue) {\n    return {\n        red: red,\n        green: green,\n        blue: blue\n    };\n}\nexports.rgb = rgb;\nfunction toSVG(c) {\n    return 'rgb(' + c.red + ',' + c.green + ',' + c.blue + ')';\n}\nexports.toSVG = toSVG;\nvar ColorMap = /** @class */ (function () {\n    function ColorMap(stops) {\n        this.stops = stops;\n    }\n    ColorMap.prototype.getColor = function (t) {\n        t = Math.max(0, Math.min(0.99999999, t));\n        var i = Math.floor(t * this.stops.length);\n        return this.stops[i];\n    };\n    return ColorMap;\n}());\nexports.ColorMap = ColorMap;\n//# sourceMappingURL=color.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * (x,y) coordinates of the origin.\n */\nexports.ORIGIN_POINT = Object.freeze({\n    x: 0,\n    y: 0\n});\n/**\n * Adds two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The sum of the two points\n */\nfunction add(p1, p2) {\n    return {\n        x: p1.x + p2.x,\n        y: p1.y + p2.y\n    };\n}\nexports.add = add;\n/**\n * Subtracts two points.\n * @param {Point} p1 - First point\n * @param {Point} p2 - Second point\n * @returns {Point} The difference of the two points\n */\nfunction subtract(p1, p2) {\n    return {\n        x: p1.x - p2.x,\n        y: p1.y - p2.y\n    };\n}\nexports.subtract = subtract;\n/**\n * Specifies whether a point has exactly the same coordinates as another point.\n * @param {Point} point1 a point\n * @param {Point} point2 another point\n * @returns {boolean} `true` if `point1` has exactly the same `x` and `y` values as `point2`, `false` otherwise.\n */\nfunction pointEquals(point1, point2) {\n    return point1.x === point2.x && point1.y === point2.y;\n}\nexports.pointEquals = pointEquals;\n/**\n * A dimension with both width and height set to a negative value, which is considered as undefined.\n */\nexports.EMPTY_DIMENSION = Object.freeze({\n    width: -1,\n    height: -1\n});\n/**\n * Checks whether the given dimention is valid, i.e. the width and height are non-zero.\n * @param {Dimension} b - Dimension object\n * @returns {boolean}\n */\nfunction isValidDimension(d) {\n    return d.width >= 0 && d.height >= 0;\n}\nexports.isValidDimension = isValidDimension;\nexports.EMPTY_BOUNDS = Object.freeze({\n    x: 0,\n    y: 0,\n    width: -1,\n    height: -1\n});\nfunction isBounds(element) {\n    return 'x' in element\n        && 'y' in element\n        && 'width' in element\n        && 'height' in element;\n}\nexports.isBounds = isBounds;\n/**\n * Combines the bounds of two objects into one, so that the new bounds\n * are the minimum bounds that covers both of the original bounds.\n * @param {Bounds} b0 - First bounds object\n * @param {Bounds} b1 - Second bounds object\n * @returns {Bounds} The combined bounds\n */\nfunction combine(b0, b1) {\n    if (!isValidDimension(b0))\n        return isValidDimension(b1) ? b1 : exports.EMPTY_BOUNDS;\n    if (!isValidDimension(b1))\n        return b0;\n    var minX = Math.min(b0.x, b1.x);\n    var minY = Math.min(b0.y, b1.y);\n    var maxX = Math.max(b0.x + (b0.width >= 0 ? b0.width : 0), b1.x + (b1.width >= 0 ? b1.width : 0));\n    var maxY = Math.max(b0.y + (b0.height >= 0 ? b0.height : 0), b1.y + (b1.height >= 0 ? b1.height : 0));\n    return {\n        x: minX, y: minY, width: maxX - minX, height: maxY - minY\n    };\n}\nexports.combine = combine;\n/**\n * Translates the given bounds.\n * @param {Bounds} b - Bounds object\n * @param {Point} p - Vector by which to translate the bounds\n * @returns {Bounds} The translated bounds\n */\nfunction translate(b, p) {\n    return {\n        x: b.x + p.x,\n        y: b.y + p.y,\n        width: b.width,\n        height: b.height\n    };\n}\nexports.translate = translate;\n/**\n * Returns the center point of the bounds of an object\n * @param {Bounds} b - Bounds object\n * @returns {Point} the center point\n */\nfunction center(b) {\n    return {\n        x: b.x + (b.width >= 0 ? 0.5 * b.width : 0),\n        y: b.y + (b.height >= 0 ? 0.5 * b.height : 0)\n    };\n}\nexports.center = center;\nfunction centerOfLine(s, e) {\n    var b = {\n        x: s.x > e.x ? e.x : s.x,\n        y: s.y > e.y ? e.y : s.y,\n        width: Math.abs(e.x - s.x),\n        height: Math.abs(e.y - s.y)\n    };\n    return center(b);\n}\nexports.centerOfLine = centerOfLine;\n/**\n * Checks whether the point p is included in the bounds b.\n */\nfunction includes(b, p) {\n    return p.x >= b.x && p.x <= b.x + b.width && p.y >= b.y && p.y <= b.y + b.height;\n}\nexports.includes = includes;\n/**\n * Enumeration of possible directions (left, right, up, down)\n * @deprecated do we use this? We should rather use a string type\n */\nvar Direction;\n(function (Direction) {\n    Direction[Direction[\"left\"] = 0] = \"left\";\n    Direction[Direction[\"right\"] = 1] = \"right\";\n    Direction[Direction[\"up\"] = 2] = \"up\";\n    Direction[Direction[\"down\"] = 3] = \"down\";\n})(Direction = exports.Direction || (exports.Direction = {}));\n/**\n * Returns the \"straight line\" distance between two points.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Eucledian distance\n */\nfunction euclideanDistance(a, b) {\n    var dx = b.x - a.x;\n    var dy = b.y - a.y;\n    return Math.sqrt(dx * dx + dy * dy);\n}\nexports.euclideanDistance = euclideanDistance;\n/**\n * Returns the distance between two points in a grid, using a\n * strictly vertical and/or horizontal path (versus straight line).\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The Manhattan distance\n */\nfunction manhattanDistance(a, b) {\n    return Math.abs(b.x - a.x) + Math.abs(b.y - a.y);\n}\nexports.manhattanDistance = manhattanDistance;\n/**\n * Returns the maximum of the horizontal and the vertical distance.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n * @returns {number} The maximum distance\n */\nfunction maxDistance(a, b) {\n    return Math.max(Math.abs(b.x - a.x), Math.abs(b.y - a.y));\n}\nexports.maxDistance = maxDistance;\n/**\n * Computes the angle in radians of the given point to the x-axis of the coordinate system.\n * The result is in the range [-pi, pi].\n * @param {Point} p - A point in the Eucledian plane\n */\nfunction angleOfPoint(p) {\n    return Math.atan2(p.y, p.x);\n}\nexports.angleOfPoint = angleOfPoint;\n/**\n * Computes the angle in radians between the two given points (relative to the origin of the coordinate system).\n * The result is in the range [0, pi]. Returns NaN if the points are equal.\n * @param {Point} a - First point\n * @param {Point} b - Second point\n */\nfunction angleBetweenPoints(a, b) {\n    var lengthProduct = Math.sqrt((a.x * a.x + a.y * a.y) * (b.x * b.x + b.y * b.y));\n    if (isNaN(lengthProduct) || lengthProduct === 0)\n        return NaN;\n    var dotProduct = a.x * b.x + a.y * b.y;\n    return Math.acos(dotProduct / lengthProduct);\n}\nexports.angleBetweenPoints = angleBetweenPoints;\n/**\n * Computes a point that is the original `point` shifted towards `refPoint` by the given `distance`.\n * @param {Point} point - Point to shift\n * @param {Point} refPoint - Point to shift towards\n * @param {Point} distance - Distance to shift\n */\nfunction shiftTowards(point, refPoint, distance) {\n    var diff = subtract(refPoint, point);\n    var normalized = normalize(diff);\n    var shift = { x: normalized.x * distance, y: normalized.y * distance };\n    return add(point, shift);\n}\nexports.shiftTowards = shiftTowards;\n/**\n * Computes the normalized vector from the vector given in `point`; that is, computing its unit vector.\n * @param {Point} point - Point representing the vector to be normalized\n * @returns {Point} The normalized point\n */\nfunction normalize(point) {\n    var mag = magnitude(point);\n    if (mag === 0 || mag === 1) {\n        return exports.ORIGIN_POINT;\n    }\n    return {\n        x: point.x / mag,\n        y: point.y / mag\n    };\n}\nexports.normalize = normalize;\n/**\n * Computes the magnitude of the vector given in `point`.\n * @param {Point} point - Point representing the vector to compute the magnitude for\n * @returns {number} The magnitude or also known as length of the `point`\n */\nfunction magnitude(point) {\n    return Math.sqrt(Math.pow(point.x, 2) + Math.pow(point.y, 2));\n}\nexports.magnitude = magnitude;\n/**\n * Converts from radians to degrees\n * @param {number} a - A value in radians\n * @returns {number} The converted value\n */\nfunction toDegrees(a) {\n    return a * 180 / Math.PI;\n}\nexports.toDegrees = toDegrees;\n/**\n * Converts from degrees to radians\n * @param {number} a - A value in degrees\n * @returns {number} The converted value\n */\nfunction toRadians(a) {\n    return a * Math.PI / 180;\n}\nexports.toRadians = toRadians;\n/**\n * Returns whether two numbers are almost equal, within a small margin (0.001)\n * @param {number} a - First number\n * @param {number} b - Second number\n * @returns {boolean} True if the two numbers are almost equal\n */\nfunction almostEquals(a, b) {\n    return Math.abs(a - b) < 1e-3;\n}\nexports.almostEquals = almostEquals;\n/**\n * Calculates a linear combination of p0 and p1 using lambda, i.e.\n *   (1-lambda) * p0 + lambda * p1\n * @param p0\n * @param p1\n * @param lambda\n */\nfunction linear(p0, p1, lambda) {\n    return {\n        x: (1 - lambda) * p0.x + lambda * p1.x,\n        y: (1 - lambda) * p0.y + lambda * p1.y\n    };\n}\nexports.linear = linear;\n/**\n * A diamond or rhombus is a quadrilateral whose four sides all have the same length.\n * It consinsts of four points, a `topPoint`, `rightPoint`, `bottomPoint`, and a `leftPoint`,\n * which are connected by four lines -- the `topRightSideLight`, `topLeftSideLine`, `bottomRightSideLine`,\n * and the `bottomLeftSideLine`.\n */\nvar Diamond = /** @class */ (function () {\n    function Diamond(bounds) {\n        this.bounds = bounds;\n    }\n    Object.defineProperty(Diamond.prototype, \"topPoint\", {\n        get: function () {\n            return {\n                x: this.bounds.x + this.bounds.width / 2,\n                y: this.bounds.y\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"rightPoint\", {\n        get: function () {\n            return {\n                x: this.bounds.x + this.bounds.width,\n                y: this.bounds.y + this.bounds.height / 2\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"bottomPoint\", {\n        get: function () {\n            return {\n                x: this.bounds.x + this.bounds.width / 2,\n                y: this.bounds.y + this.bounds.height\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"leftPoint\", {\n        get: function () {\n            return {\n                x: this.bounds.x,\n                y: this.bounds.y + this.bounds.height / 2\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"topRightSideLine\", {\n        get: function () {\n            return new PointToPointLine(this.topPoint, this.rightPoint);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"topLeftSideLine\", {\n        get: function () {\n            return new PointToPointLine(this.topPoint, this.leftPoint);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"bottomRightSideLine\", {\n        get: function () {\n            return new PointToPointLine(this.bottomPoint, this.rightPoint);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(Diamond.prototype, \"bottomLeftSideLine\", {\n        get: function () {\n            return new PointToPointLine(this.bottomPoint, this.leftPoint);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Return the closest side of this diamond to the specified `refPoint`.\n     * @param {Point} refPoint a reference point\n     * @returns {Line} a line representing the closest side\n     */\n    Diamond.prototype.closestSideLine = function (refPoint) {\n        var c = center(this.bounds);\n        if (refPoint.x > c.x) {\n            if (refPoint.y > c.y) {\n                return this.bottomRightSideLine;\n            }\n            else {\n                return this.topRightSideLine;\n            }\n        }\n        else {\n            if (refPoint.y > c.y) {\n                return this.bottomLeftSideLine;\n            }\n            else {\n                return this.topLeftSideLine;\n            }\n        }\n    };\n    return Diamond;\n}());\nexports.Diamond = Diamond;\n/**\n * A line made up from two points.\n */\nvar PointToPointLine = /** @class */ (function () {\n    function PointToPointLine(p1, p2) {\n        this.p1 = p1;\n        this.p2 = p2;\n    }\n    Object.defineProperty(PointToPointLine.prototype, \"a\", {\n        get: function () {\n            return this.p1.y - this.p2.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"b\", {\n        get: function () {\n            return this.p2.x - this.p1.x;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"c\", {\n        get: function () {\n            return this.p2.x * this.p1.y - this.p1.x * this.p2.y;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"angle\", {\n        /**\n         * The counter-clockwise angle of this line relative to the x-axis.\n         */\n        get: function () {\n            return Math.atan2(-this.a, this.b);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"slope\", {\n        /**\n         * The slope of the line.\n         * A vertical line returns `undefined`.\n         */\n        get: function () {\n            if (this.b === 0)\n                return undefined;\n            return this.a / this.b;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PointToPointLine.prototype, \"slopeOrMax\", {\n        /**\n         * The slope of the line or `Number.MAX_SAFE_INTEGER` if vertical.\n         */\n        get: function () {\n            if (this.slope === undefined) {\n                return Number.MAX_SAFE_INTEGER;\n            }\n            return this.slope;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @param otherLine the other line\n     * @returns the intersection point between `this` line and the `otherLine` if exists, or `undefined`.\n     */\n    PointToPointLine.prototype.intersection = function (otherLine) {\n        if (this.hasIndistinctPoints(otherLine)) {\n            return undefined;\n        }\n        var x1 = this.p1.x;\n        var y1 = this.p1.y;\n        var x2 = this.p2.x;\n        var y2 = this.p2.y;\n        var x3 = otherLine.p1.x;\n        var y3 = otherLine.p1.y;\n        var x4 = otherLine.p2.x;\n        var y4 = otherLine.p2.y;\n        var denominator = ((y4 - y3) * (x2 - x1)) - ((x4 - x3) * (y2 - y1));\n        if (denominator === 0) {\n            return undefined;\n        }\n        var numeratorA = ((x4 - x3) * (y1 - y3)) - ((y4 - y3) * (x1 - x3));\n        var numeratorB = ((x2 - x1) * (y1 - y3)) - ((y2 - y1) * (x1 - x3));\n        if (numeratorA === 0 && numeratorB === 0) {\n            return undefined;\n        }\n        var determinantA = numeratorA / denominator;\n        var determinantB = numeratorB / denominator;\n        if (determinantA < 0 || determinantA > 1 || determinantB < 0 || determinantB > 1) {\n            return undefined;\n        }\n        var x = x1 + (determinantA * (x2 - x1));\n        var y = y1 + (determinantA * (y2 - y1));\n        return { x: x, y: y };\n    };\n    /**\n     * @param otherLine the other line\n     * @returns whether the start and end point of this line is does not have distinct start\n     * or end points with the `otherLine`\n     */\n    PointToPointLine.prototype.hasIndistinctPoints = function (otherLine) {\n        return pointEquals(this.p1, otherLine.p1) ||\n            pointEquals(this.p1, otherLine.p2) ||\n            pointEquals(this.p2, otherLine.p1) ||\n            pointEquals(this.p2, otherLine.p2);\n    };\n    return PointToPointLine;\n}());\nexports.PointToPointLine = PointToPointLine;\n/**\n * Returns the intersection of two lines `l1` and `l2`\n * @param {Line} l1 - A line\n * @param {Line} l2 - Another line\n * @returns {Point} The intersection point of `l1` and `l2`\n */\nfunction intersection(l1, l2) {\n    return {\n        x: (l1.c * l2.b - l2.c * l1.b) / (l1.a * l2.b - l2.a * l1.b),\n        y: (l1.a * l2.c - l2.a * l1.c) / (l1.a * l2.b - l2.a * l1.b)\n    };\n}\nexports.intersection = intersection;\n//# sourceMappingURL=geometry.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2019-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isInjectable(constr) {\n    return Reflect.getMetadata('inversify:paramtypes', constr) !== undefined;\n}\nexports.isInjectable = isInjectable;\n//# sourceMappingURL=inversify.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A helper class that allows to easily create fluent iterables.\n */\nvar FluentIterableImpl = /** @class */ (function () {\n    function FluentIterableImpl(startFn, nextFn) {\n        this.startFn = startFn;\n        this.nextFn = nextFn;\n    }\n    FluentIterableImpl.prototype[Symbol.iterator] = function () {\n        var _a;\n        var _this = this;\n        var iterator = (_a = {\n                state: this.startFn(),\n                next: function () { return _this.nextFn(iterator.state); }\n            },\n            _a[Symbol.iterator] = function () { return iterator; },\n            _a);\n        return iterator;\n    };\n    FluentIterableImpl.prototype.filter = function (callback) {\n        return filterIterable(this, callback);\n    };\n    FluentIterableImpl.prototype.map = function (callback) {\n        return mapIterable(this, callback);\n    };\n    FluentIterableImpl.prototype.forEach = function (callback) {\n        var iterator = this[Symbol.iterator]();\n        var index = 0;\n        var result;\n        do {\n            result = iterator.next();\n            if (result.value !== undefined)\n                callback(result.value, index);\n            index++;\n        } while (!result.done);\n    };\n    FluentIterableImpl.prototype.indexOf = function (element) {\n        var iterator = this[Symbol.iterator]();\n        var index = 0;\n        var result;\n        do {\n            result = iterator.next();\n            if (result.value === element)\n                return index;\n            index++;\n        } while (!result.done);\n        return -1;\n    };\n    return FluentIterableImpl;\n}());\nexports.FluentIterableImpl = FluentIterableImpl;\n/**\n * Converts a FluentIterable into an array. If the input is an array, it is returned unchanged.\n */\nfunction toArray(input) {\n    if (input.constructor === Array) {\n        return input;\n    }\n    var result = [];\n    input.forEach(function (element) { return result.push(element); });\n    return result;\n}\nexports.toArray = toArray;\nexports.DONE_RESULT = Object.freeze({ done: true, value: undefined });\n/**\n * Create a fluent iterable that filters the content of the given iterable or array.\n */\nfunction filterIterable(input, callback) {\n    return new FluentIterableImpl(function () { return createIterator(input); }, function (iterator) {\n        var result;\n        do {\n            result = iterator.next();\n        } while (!result.done && !callback(result.value));\n        return result;\n    });\n}\nexports.filterIterable = filterIterable;\n/**\n * Create a fluent iterable that maps the content of the given iterable or array.\n */\nfunction mapIterable(input, callback) {\n    return new FluentIterableImpl(function () { return createIterator(input); }, function (iterator) {\n        var _a = iterator.next(), done = _a.done, value = _a.value;\n        if (done)\n            return exports.DONE_RESULT;\n        else\n            return { done: false, value: callback(value) };\n    });\n}\nexports.mapIterable = mapIterable;\n/**\n * Create an iterator for the given iterable or array.\n */\nfunction createIterator(collection) {\n    var method = collection[Symbol.iterator];\n    if (typeof method === 'function') {\n        return method.call(collection);\n    }\n    var length = collection.length;\n    if (typeof length === 'number' && length >= 0) {\n        return new ArrayIterator(collection);\n    }\n    return { next: function () { return exports.DONE_RESULT; } };\n}\n/**\n * Iterator implementation for arrays.\n */\nvar ArrayIterator = /** @class */ (function () {\n    function ArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n    }\n    ArrayIterator.prototype.next = function () {\n        if (this.index < this.array.length)\n            return { done: false, value: this.array[this.index++] };\n        else\n            return exports.DONE_RESULT;\n    };\n    ArrayIterator.prototype[Symbol.iterator] = function () {\n        return this;\n    };\n    return ArrayIterator;\n}());\n//# sourceMappingURL=iterable.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar browser_1 = require(\"./browser\");\n/**\n * Returns whether the keyboard event matches the keystroke described by the given\n * code and modifiers. The code must comply to the format of the `code` property\n * of KeyboardEvent, but in contrast to that property, the actual keyboard layout is\n * considered by this function if possible.\n */\nfunction matchesKeystroke(event, code) {\n    var modifiers = [];\n    for (var _i = 2; _i < arguments.length; _i++) {\n        modifiers[_i - 2] = arguments[_i];\n    }\n    if (getActualCode(event) !== code)\n        return false;\n    if (browser_1.isMac()) {\n        if (event.ctrlKey !== (modifiers.findIndex(function (m) { return m === 'ctrl'; }) >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(function (m) { return m === 'meta' || m === 'ctrlCmd'; }) >= 0))\n            return false;\n    }\n    else {\n        if (event.ctrlKey !== (modifiers.findIndex(function (m) { return m === 'ctrl' || m === 'ctrlCmd'; }) >= 0))\n            return false;\n        if (event.metaKey !== (modifiers.findIndex(function (m) { return m === 'meta'; }) >= 0))\n            return false;\n    }\n    if (event.altKey !== (modifiers.findIndex(function (m) { return m === 'alt'; }) >= 0))\n        return false;\n    if (event.shiftKey !== (modifiers.findIndex(function (m) { return m === 'shift'; }) >= 0))\n        return false;\n    return true;\n}\nexports.matchesKeystroke = matchesKeystroke;\n/**\n * Determines a key code from the given event. This is necessary because the `code` property of\n * a KeyboardEvent does not consider keyboard layouts.\n */\nfunction getActualCode(event) {\n    if (event.keyCode) {\n        var result = STRING_CODE[event.keyCode];\n        if (result !== undefined)\n            return result;\n    }\n    return event.code;\n}\nexports.getActualCode = getActualCode;\nvar STRING_CODE = new Array(256);\n(function () {\n    function addKeyCode(stringCode, numericCode) {\n        if (STRING_CODE[numericCode] === undefined)\n            STRING_CODE[numericCode] = stringCode;\n    }\n    addKeyCode('Pause', 3);\n    addKeyCode('Backspace', 8);\n    addKeyCode('Tab', 9);\n    addKeyCode('Enter', 13);\n    addKeyCode('ShiftLeft', 16);\n    addKeyCode('ShiftRight', 16);\n    addKeyCode('ControlLeft', 17);\n    addKeyCode('ControlRight', 17);\n    addKeyCode('AltLeft', 18);\n    addKeyCode('AltRight', 18);\n    addKeyCode('CapsLock', 20);\n    addKeyCode('Escape', 27);\n    addKeyCode('Space', 32);\n    addKeyCode('PageUp', 33);\n    addKeyCode('PageDown', 34);\n    addKeyCode('End', 35);\n    addKeyCode('Home', 36);\n    addKeyCode('ArrowLeft', 37);\n    addKeyCode('ArrowUp', 38);\n    addKeyCode('ArrowRight', 39);\n    addKeyCode('ArrowDown', 40);\n    addKeyCode('Insert', 45);\n    addKeyCode('Delete', 46);\n    addKeyCode('Digit1', 49);\n    addKeyCode('Digit2', 50);\n    addKeyCode('Digit3', 51);\n    addKeyCode('Digit4', 52);\n    addKeyCode('Digit5', 53);\n    addKeyCode('Digit6', 54);\n    addKeyCode('Digit7', 55);\n    addKeyCode('Digit8', 56);\n    addKeyCode('Digit9', 57);\n    addKeyCode('Digit0', 48);\n    addKeyCode('KeyA', 65);\n    addKeyCode('KeyB', 66);\n    addKeyCode('KeyC', 67);\n    addKeyCode('KeyD', 68);\n    addKeyCode('KeyE', 69);\n    addKeyCode('KeyF', 70);\n    addKeyCode('KeyG', 71);\n    addKeyCode('KeyH', 72);\n    addKeyCode('KeyI', 73);\n    addKeyCode('KeyJ', 74);\n    addKeyCode('KeyK', 75);\n    addKeyCode('KeyL', 76);\n    addKeyCode('KeyM', 77);\n    addKeyCode('KeyN', 78);\n    addKeyCode('KeyO', 79);\n    addKeyCode('KeyP', 80);\n    addKeyCode('KeyQ', 81);\n    addKeyCode('KeyR', 82);\n    addKeyCode('KeyS', 83);\n    addKeyCode('KeyT', 84);\n    addKeyCode('KeyU', 85);\n    addKeyCode('KeyV', 86);\n    addKeyCode('KeyW', 87);\n    addKeyCode('KeyX', 88);\n    addKeyCode('KeyY', 89);\n    addKeyCode('KeyZ', 90);\n    addKeyCode('OSLeft', 91);\n    addKeyCode('MetaLeft', 91);\n    addKeyCode('OSRight', 92);\n    addKeyCode('MetaRight', 92);\n    addKeyCode('ContextMenu', 93);\n    addKeyCode('Numpad0', 96);\n    addKeyCode('Numpad1', 97);\n    addKeyCode('Numpad2', 98);\n    addKeyCode('Numpad3', 99);\n    addKeyCode('Numpad4', 100);\n    addKeyCode('Numpad5', 101);\n    addKeyCode('Numpad6', 102);\n    addKeyCode('Numpad7', 103);\n    addKeyCode('Numpad8', 104);\n    addKeyCode('Numpad9', 105);\n    addKeyCode('NumpadMultiply', 106);\n    addKeyCode('NumpadAdd', 107);\n    addKeyCode('NumpadSeparator', 108);\n    addKeyCode('NumpadSubtract', 109);\n    addKeyCode('NumpadDecimal', 110);\n    addKeyCode('NumpadDivide', 111);\n    addKeyCode('F1', 112);\n    addKeyCode('F2', 113);\n    addKeyCode('F3', 114);\n    addKeyCode('F4', 115);\n    addKeyCode('F5', 116);\n    addKeyCode('F6', 117);\n    addKeyCode('F7', 118);\n    addKeyCode('F8', 119);\n    addKeyCode('F9', 120);\n    addKeyCode('F10', 121);\n    addKeyCode('F11', 122);\n    addKeyCode('F12', 123);\n    addKeyCode('F13', 124);\n    addKeyCode('F14', 125);\n    addKeyCode('F15', 126);\n    addKeyCode('F16', 127);\n    addKeyCode('F17', 128);\n    addKeyCode('F18', 129);\n    addKeyCode('F19', 130);\n    addKeyCode('F20', 131);\n    addKeyCode('F21', 132);\n    addKeyCode('F22', 133);\n    addKeyCode('F23', 134);\n    addKeyCode('F24', 135);\n    addKeyCode('NumLock', 144);\n    addKeyCode('ScrollLock', 145);\n    addKeyCode('Semicolon', 186);\n    addKeyCode('Equal', 187);\n    addKeyCode('Comma', 188);\n    addKeyCode('Minus', 189);\n    addKeyCode('Period', 190);\n    addKeyCode('Slash', 191);\n    addKeyCode('Backquote', 192);\n    addKeyCode('IntlRo', 193);\n    addKeyCode('BracketLeft', 219);\n    addKeyCode('Backslash', 220);\n    addKeyCode('BracketRight', 221);\n    addKeyCode('Quote', 222);\n    addKeyCode('IntlYen', 255);\n})();\n//# sourceMappingURL=keyboard.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar types_1 = require(\"../base/types\");\nvar LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"none\"] = 0] = \"none\";\n    LogLevel[LogLevel[\"error\"] = 1] = \"error\";\n    LogLevel[LogLevel[\"warn\"] = 2] = \"warn\";\n    LogLevel[LogLevel[\"info\"] = 3] = \"info\";\n    LogLevel[LogLevel[\"log\"] = 4] = \"log\";\n})(LogLevel = exports.LogLevel || (exports.LogLevel = {}));\nvar NullLogger = /** @class */ (function () {\n    function NullLogger() {\n        this.logLevel = LogLevel.none;\n    }\n    NullLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n    };\n    NullLogger = __decorate([\n        inversify_1.injectable()\n    ], NullLogger);\n    return NullLogger;\n}());\nexports.NullLogger = NullLogger;\nvar ConsoleLogger = /** @class */ (function () {\n    function ConsoleLogger() {\n        this.logLevel = LogLevel.log;\n        this.viewOptions = { baseDiv: '' };\n    }\n    ConsoleLogger.prototype.error = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.error)\n            try {\n                console.error.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.warn = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.warn)\n            try {\n                console.warn.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.info = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.info)\n            try {\n                console.info.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.log = function (thisArg, message) {\n        var params = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            params[_i - 2] = arguments[_i];\n        }\n        if (this.logLevel >= LogLevel.log)\n            try {\n                console.log.apply(thisArg, this.consoleArguments(thisArg, message, params));\n            }\n            catch (error) { }\n    };\n    ConsoleLogger.prototype.consoleArguments = function (thisArg, message, params) {\n        var caller;\n        if (typeof thisArg === 'object')\n            caller = thisArg.constructor.name;\n        else\n            caller = thisArg;\n        var date = new Date();\n        return __spreadArrays([date.toLocaleTimeString() + ' ' + this.viewOptions.baseDiv + ' ' + caller + ': ' + message], params);\n    };\n    __decorate([\n        inversify_1.inject(types_1.TYPES.LogLevel),\n        __metadata(\"design:type\", Number)\n    ], ConsoleLogger.prototype, \"logLevel\", void 0);\n    __decorate([\n        inversify_1.inject(types_1.TYPES.ViewerOptions),\n        __metadata(\"design:type\", Object)\n    ], ConsoleLogger.prototype, \"viewOptions\", void 0);\n    ConsoleLogger = __decorate([\n        inversify_1.injectable()\n    ], ConsoleLogger);\n    return ConsoleLogger;\n}());\nexports.ConsoleLogger = ConsoleLogger;\n//# sourceMappingURL=logging.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2021 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction isObject(data) {\n    return typeof data === 'object' && data !== null;\n}\nexports.isObject = isObject;\nfunction hasOwnProperty(arg, key, type) {\n    if (!(isObject(arg) && Object.prototype.hasOwnProperty.call(arg, key))) {\n        return false;\n    }\n    if (typeof type === 'string') {\n        return typeof arg[key] === type;\n    }\n    if (typeof type === 'function') {\n        return type(arg[key]);\n    }\n    return true;\n}\nexports.hasOwnProperty = hasOwnProperty;\nfunction safeAssign(target, partial) {\n    return Object.assign(target, partial);\n}\nexports.safeAssign = safeAssign;\n//# sourceMappingURL=object.js.map","\"use strict\";\n/********************************************************************************\n * Copyright (c) 2017-2018 TypeFox and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inversify_1 = require(\"inversify\");\nvar ProviderRegistry = /** @class */ (function () {\n    function ProviderRegistry() {\n        this.elements = new Map;\n    }\n    ProviderRegistry.prototype.register = function (key, cstr) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, cstr);\n    };\n    ProviderRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    ProviderRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    ProviderRegistry.prototype.get = function (key, arg) {\n        var existingCstr = this.elements.get(key);\n        if (existingCstr)\n            return new existingCstr(arg);\n        else\n            return this.missing(key, arg);\n    };\n    ProviderRegistry.prototype.missing = function (key, arg) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    ProviderRegistry = __decorate([\n        inversify_1.injectable()\n    ], ProviderRegistry);\n    return ProviderRegistry;\n}());\nexports.ProviderRegistry = ProviderRegistry;\nvar FactoryRegistry = /** @class */ (function () {\n    function FactoryRegistry() {\n        this.elements = new Map;\n    }\n    FactoryRegistry.prototype.register = function (key, factory) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, factory);\n    };\n    FactoryRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    FactoryRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    FactoryRegistry.prototype.get = function (key, arg) {\n        var existingFactory = this.elements.get(key);\n        if (existingFactory)\n            return existingFactory(arg);\n        else\n            return this.missing(key, arg);\n    };\n    FactoryRegistry.prototype.missing = function (key, arg) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    FactoryRegistry = __decorate([\n        inversify_1.injectable()\n    ], FactoryRegistry);\n    return FactoryRegistry;\n}());\nexports.FactoryRegistry = FactoryRegistry;\nvar InstanceRegistry = /** @class */ (function () {\n    function InstanceRegistry() {\n        this.elements = new Map;\n    }\n    InstanceRegistry.prototype.register = function (key, instance) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        if (this.hasKey(key))\n            throw new Error('Key is already registered: ' + key);\n        this.elements.set(key, instance);\n    };\n    InstanceRegistry.prototype.deregister = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    InstanceRegistry.prototype.hasKey = function (key) {\n        return this.elements.has(key);\n    };\n    InstanceRegistry.prototype.get = function (key) {\n        var existingInstance = this.elements.get(key);\n        if (existingInstance)\n            return existingInstance;\n        else\n            return this.missing(key);\n    };\n    InstanceRegistry.prototype.missing = function (key) {\n        throw new Error('Unknown registry key: ' + key);\n    };\n    InstanceRegistry = __decorate([\n        inversify_1.injectable()\n    ], InstanceRegistry);\n    return InstanceRegistry;\n}());\nexports.InstanceRegistry = InstanceRegistry;\nvar MultiInstanceRegistry = /** @class */ (function () {\n    function MultiInstanceRegistry() {\n        this.elements = new Map;\n    }\n    MultiInstanceRegistry.prototype.register = function (key, instance) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        var instances = this.elements.get(key);\n        if (instances !== undefined)\n            instances.push(instance);\n        else\n            this.elements.set(key, [instance]);\n    };\n    MultiInstanceRegistry.prototype.deregisterAll = function (key) {\n        if (key === undefined)\n            throw new Error('Key is undefined');\n        this.elements.delete(key);\n    };\n    MultiInstanceRegistry.prototype.get = function (key) {\n        var existingInstances = this.elements.get(key);\n        if (existingInstances !== undefined)\n            return existingInstances;\n        else\n            return [];\n    };\n    MultiInstanceRegistry = __decorate([\n        inversify_1.injectable()\n    ], MultiInstanceRegistry);\n    return MultiInstanceRegistry;\n}());\nexports.MultiInstanceRegistry = MultiInstanceRegistry;\n//# sourceMappingURL=registry.js.map","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.autocomplete = factory());\n}(this, function () { 'use strict';\n\n  /*\r\n   * https://github.com/kraaden/autocomplete\r\n   * Copyright (c) 2016 Denys Krasnoshchok\r\n   * MIT License\r\n   */\r\n  function autocomplete(settings) {\r\n      // just an alias to minimize JS file size\r\n      var doc = document;\r\n      var container = doc.createElement(\"div\");\r\n      var containerStyle = container.style;\r\n      var userAgent = navigator.userAgent;\r\n      var mobileFirefox = userAgent.indexOf(\"Firefox\") !== -1 && userAgent.indexOf(\"Mobile\") !== -1;\r\n      var debounceWaitMs = settings.debounceWaitMs || 0;\r\n      var preventSubmit = settings.preventSubmit || false;\r\n      // 'keyup' event will not be fired on Mobile Firefox, so we have to use 'input' event instead\r\n      var keyUpEventName = mobileFirefox ? \"input\" : \"keyup\";\r\n      var items = [];\r\n      var inputValue = \"\";\r\n      var minLen = 2;\r\n      var showOnFocus = settings.showOnFocus;\r\n      var selected;\r\n      var keypressCounter = 0;\r\n      var debounceTimer;\r\n      if (settings.minLength !== undefined) {\r\n          minLen = settings.minLength;\r\n      }\r\n      if (!settings.input) {\r\n          throw new Error(\"input undefined\");\r\n      }\r\n      var input = settings.input;\r\n      container.className = \"autocomplete \" + (settings.className || \"\");\r\n      containerStyle.position = \"fixed\";\r\n      /**\r\n       * Detach the container from DOM\r\n       */\r\n      function detach() {\r\n          var parent = container.parentNode;\r\n          if (parent) {\r\n              parent.removeChild(container);\r\n          }\r\n      }\r\n      /**\r\n       * Clear debouncing timer if assigned\r\n       */\r\n      function clearDebounceTimer() {\r\n          if (debounceTimer) {\r\n              window.clearTimeout(debounceTimer);\r\n          }\r\n      }\r\n      /**\r\n       * Attach the container to DOM\r\n       */\r\n      function attach() {\r\n          if (!container.parentNode) {\r\n              doc.body.appendChild(container);\r\n          }\r\n      }\r\n      /**\r\n       * Check if container for autocomplete is displayed\r\n       */\r\n      function containerDisplayed() {\r\n          return !!container.parentNode;\r\n      }\r\n      /**\r\n       * Clear autocomplete state and hide container\r\n       */\r\n      function clear() {\r\n          keypressCounter++;\r\n          items = [];\r\n          inputValue = \"\";\r\n          selected = undefined;\r\n          detach();\r\n      }\r\n      /**\r\n       * Update autocomplete position\r\n       */\r\n      function updatePosition() {\r\n          if (!containerDisplayed()) {\r\n              return;\r\n          }\r\n          containerStyle.height = \"auto\";\r\n          containerStyle.width = input.offsetWidth + \"px\";\r\n          var inputRect = input.getBoundingClientRect();\r\n          var top = inputRect.top + input.offsetHeight;\r\n          var maxHeight = window.innerHeight - top;\r\n          if (maxHeight < 0) {\r\n              maxHeight = 0;\r\n          }\r\n          containerStyle.top = top + \"px\";\r\n          containerStyle.bottom = \"\";\r\n          containerStyle.left = inputRect.left + \"px\";\r\n          containerStyle.maxHeight = maxHeight + \"px\";\r\n          if (settings.customize) {\r\n              settings.customize(input, inputRect, container, maxHeight);\r\n          }\r\n      }\r\n      /**\r\n       * Redraw the autocomplete div element with suggestions\r\n       */\r\n      function update() {\r\n          // delete all children from autocomplete DOM container\r\n          while (container.firstChild) {\r\n              container.removeChild(container.firstChild);\r\n          }\r\n          // function for rendering autocomplete suggestions\r\n          var render = function (item, currentValue) {\r\n              var itemElement = doc.createElement(\"div\");\r\n              itemElement.textContent = item.label || \"\";\r\n              return itemElement;\r\n          };\r\n          if (settings.render) {\r\n              render = settings.render;\r\n          }\r\n          // function to render autocomplete groups\r\n          var renderGroup = function (groupName, currentValue) {\r\n              var groupDiv = doc.createElement(\"div\");\r\n              groupDiv.textContent = groupName;\r\n              return groupDiv;\r\n          };\r\n          if (settings.renderGroup) {\r\n              renderGroup = settings.renderGroup;\r\n          }\r\n          var fragment = doc.createDocumentFragment();\r\n          var prevGroup = \"#9?$\";\r\n          items.forEach(function (item) {\r\n              if (item.group && item.group !== prevGroup) {\r\n                  prevGroup = item.group;\r\n                  var groupDiv = renderGroup(item.group, inputValue);\r\n                  if (groupDiv) {\r\n                      groupDiv.className += \" group\";\r\n                      fragment.appendChild(groupDiv);\r\n                  }\r\n              }\r\n              var div = render(item, inputValue);\r\n              if (div) {\r\n                  div.addEventListener(\"click\", function (ev) {\r\n                      settings.onSelect(item, input);\r\n                      clear();\r\n                      ev.preventDefault();\r\n                      ev.stopPropagation();\r\n                  });\r\n                  if (item === selected) {\r\n                      div.className += \" selected\";\r\n                  }\r\n                  fragment.appendChild(div);\r\n              }\r\n          });\r\n          container.appendChild(fragment);\r\n          if (items.length < 1) {\r\n              if (settings.emptyMsg) {\r\n                  var empty = doc.createElement(\"div\");\r\n                  empty.className = \"empty\";\r\n                  empty.textContent = settings.emptyMsg;\r\n                  container.appendChild(empty);\r\n              }\r\n              else {\r\n                  clear();\r\n                  return;\r\n              }\r\n          }\r\n          attach();\r\n          updatePosition();\r\n          updateScroll();\r\n      }\r\n      function updateIfDisplayed() {\r\n          if (containerDisplayed()) {\r\n              update();\r\n          }\r\n      }\r\n      function resizeEventHandler() {\r\n          updateIfDisplayed();\r\n      }\r\n      function scrollEventHandler(e) {\r\n          if (e.target !== container) {\r\n              updateIfDisplayed();\r\n          }\r\n          else {\r\n              e.preventDefault();\r\n          }\r\n      }\r\n      function keyupEventHandler(ev) {\r\n          var keyCode = ev.which || ev.keyCode || 0;\r\n          var ignore = [38 /* Up */, 13 /* Enter */, 27 /* Esc */, 39 /* Right */, 37 /* Left */, 16 /* Shift */, 17 /* Ctrl */, 18 /* Alt */, 20 /* CapsLock */, 91 /* WindowsKey */, 9 /* Tab */];\r\n          for (var _i = 0, ignore_1 = ignore; _i < ignore_1.length; _i++) {\r\n              var key = ignore_1[_i];\r\n              if (keyCode === key) {\r\n                  return;\r\n              }\r\n          }\r\n          // the down key is used to open autocomplete\r\n          if (keyCode === 40 /* Down */ && containerDisplayed()) {\r\n              return;\r\n          }\r\n          startFetch(0 /* Keyboard */);\r\n      }\r\n      /**\r\n       * Automatically move scroll bar if selected item is not visible\r\n       */\r\n      function updateScroll() {\r\n          var elements = container.getElementsByClassName(\"selected\");\r\n          if (elements.length > 0) {\r\n              var element = elements[0];\r\n              // make group visible\r\n              var previous = element.previousElementSibling;\r\n              if (previous && previous.className.indexOf(\"group\") !== -1 && !previous.previousElementSibling) {\r\n                  element = previous;\r\n              }\r\n              if (element.offsetTop < container.scrollTop) {\r\n                  container.scrollTop = element.offsetTop;\r\n              }\r\n              else {\r\n                  var selectBottom = element.offsetTop + element.offsetHeight;\r\n                  var containerBottom = container.scrollTop + container.offsetHeight;\r\n                  if (selectBottom > containerBottom) {\r\n                      container.scrollTop += selectBottom - containerBottom;\r\n                  }\r\n              }\r\n          }\r\n      }\r\n      /**\r\n       * Select the previous item in suggestions\r\n       */\r\n      function selectPrev() {\r\n          if (items.length < 1) {\r\n              selected = undefined;\r\n          }\r\n          else {\r\n              if (selected === items[0]) {\r\n                  selected = items[items.length - 1];\r\n              }\r\n              else {\r\n                  for (var i = items.length - 1; i > 0; i--) {\r\n                      if (selected === items[i] || i === 1) {\r\n                          selected = items[i - 1];\r\n                          break;\r\n                      }\r\n                  }\r\n              }\r\n          }\r\n      }\r\n      /**\r\n       * Select the next item in suggestions\r\n       */\r\n      function selectNext() {\r\n          if (items.length < 1) {\r\n              selected = undefined;\r\n          }\r\n          if (!selected || selected === items[items.length - 1]) {\r\n              selected = items[0];\r\n              return;\r\n          }\r\n          for (var i = 0; i < (items.length - 1); i++) {\r\n              if (selected === items[i]) {\r\n                  selected = items[i + 1];\r\n                  break;\r\n              }\r\n          }\r\n      }\r\n      function keydownEventHandler(ev) {\r\n          var keyCode = ev.which || ev.keyCode || 0;\r\n          if (keyCode === 38 /* Up */ || keyCode === 40 /* Down */ || keyCode === 27 /* Esc */) {\r\n              var containerIsDisplayed = containerDisplayed();\r\n              if (keyCode === 27 /* Esc */) {\r\n                  clear();\r\n              }\r\n              else {\r\n                  if (!containerDisplayed || items.length < 1) {\r\n                      return;\r\n                  }\r\n                  keyCode === 38 /* Up */\r\n                      ? selectPrev()\r\n                      : selectNext();\r\n                  update();\r\n              }\r\n              ev.preventDefault();\r\n              if (containerIsDisplayed) {\r\n                  ev.stopPropagation();\r\n              }\r\n              return;\r\n          }\r\n          if (keyCode === 13 /* Enter */) {\r\n              if (selected) {\r\n                  settings.onSelect(selected, input);\r\n                  clear();\r\n              }\r\n              if (preventSubmit) {\r\n                  ev.preventDefault();\r\n              }\r\n          }\r\n      }\r\n      function focusEventHandler() {\r\n          if (showOnFocus) {\r\n              startFetch(1 /* Focus */);\r\n          }\r\n      }\r\n      function startFetch(trigger) {\r\n          // if multiple keys were pressed, before we get update from server,\r\n          // this may cause redrawing our autocomplete multiple times after the last key press.\r\n          // to avoid this, the number of times keyboard was pressed will be\r\n          // saved and checked before redraw our autocomplete box.\r\n          var savedKeypressCounter = ++keypressCounter;\r\n          var val = input.value;\r\n          if (val.length >= minLen || trigger === 1 /* Focus */) {\r\n              clearDebounceTimer();\r\n              debounceTimer = window.setTimeout(function () {\r\n                  settings.fetch(val, function (elements) {\r\n                      if (keypressCounter === savedKeypressCounter && elements) {\r\n                          items = elements;\r\n                          inputValue = val;\r\n                          selected = items.length > 0 ? items[0] : undefined;\r\n                          update();\r\n                      }\r\n                  }, 0 /* Keyboard */);\r\n              }, trigger === 0 /* Keyboard */ ? debounceWaitMs : 0);\r\n          }\r\n          else {\r\n              clear();\r\n          }\r\n      }\r\n      function blurEventHandler() {\r\n          // we need to delay clear, because when we click on an item, blur will be called before click and remove items from DOM\r\n          setTimeout(function () {\r\n              if (doc.activeElement !== input) {\r\n                  clear();\r\n              }\r\n          }, 200);\r\n      }\r\n      /**\r\n       * Fixes #26: on long clicks focus will be lost and onSelect method will not be called\r\n       */\r\n      container.addEventListener(\"mousedown\", function (evt) {\r\n          evt.stopPropagation();\r\n          evt.preventDefault();\r\n      });\r\n      /**\r\n       * This function will remove DOM elements and clear event handlers\r\n       */\r\n      function destroy() {\r\n          input.removeEventListener(\"focus\", focusEventHandler);\r\n          input.removeEventListener(\"keydown\", keydownEventHandler);\r\n          input.removeEventListener(keyUpEventName, keyupEventHandler);\r\n          input.removeEventListener(\"blur\", blurEventHandler);\r\n          window.removeEventListener(\"resize\", resizeEventHandler);\r\n          doc.removeEventListener(\"scroll\", scrollEventHandler, true);\r\n          clearDebounceTimer();\r\n          clear();\r\n          // prevent the update call if there are pending AJAX requests\r\n          keypressCounter++;\r\n      }\r\n      // setup event handlers\r\n      input.addEventListener(\"keydown\", keydownEventHandler);\r\n      input.addEventListener(keyUpEventName, keyupEventHandler);\r\n      input.addEventListener(\"blur\", blurEventHandler);\r\n      input.addEventListener(\"focus\", focusEventHandler);\r\n      window.addEventListener(\"resize\", resizeEventHandler);\r\n      doc.addEventListener(\"scroll\", scrollEventHandler, true);\r\n      return {\r\n          destroy: destroy\r\n      };\r\n  }\n\n  return autocomplete;\n\n}));\n//# sourceMappingURL=autocomplete.js.map\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b),e.responseType=\"blob\",e.onload=function(){a(e.response,c,d)},e.onerror=function(){console.error(\"could not download file\")},e.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(a,b,d,e){if(e=e||open(\"\",\"_blank\"),e&&(e.document.title=e.document.body.innerText=\"downloading...\"),\"string\"==typeof a)return c(a,b,d);var g=\"application/octet-stream\"===a.type,h=/constructor/i.test(f.HTMLElement)||f.safari,i=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((i||g&&h)&&\"object\"==typeof FileReader){var j=new FileReader;j.onloadend=function(){var a=j.result;a=i?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),e?e.location.href=a:location=a,e=null},j.readAsDataURL(a)}else{var k=f.URL||f.webkitURL,l=k.createObjectURL(a);e?e.location=l:location.href=l,e=null,setTimeout(function(){k.revokeObjectURL(l)},4E4)}});f.saveAs=a.saveAs=a,\"undefined\"!=typeof module&&(module.exports=a)});\n\n//# sourceMappingURL=FileSaver.min.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tagProperty = exports.tagParameter = exports.decorate = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED;\n    _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\nexports.tagParameter = tagParameter;\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED_PROP;\n    _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\nexports.tagProperty = tagProperty;\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n    var paramsOrPropertiesMetadata = {};\n    var isParameterDecorator = (typeof parameterIndex === \"number\");\n    var key = (parameterIndex !== undefined && isParameterDecorator) ? parameterIndex.toString() : propertyName;\n    if (isParameterDecorator && propertyName !== undefined) {\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n    }\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n    }\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n    if (!Array.isArray(paramOrPropertyMetadata)) {\n        paramOrPropertyMetadata = [];\n    }\n    else {\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\n            var m = paramOrPropertyMetadata_1[_i];\n            if (m.key === metadata.key) {\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\n            }\n        }\n    }\n    paramOrPropertyMetadata.push(metadata);\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\nfunction _decorate(decorators, target) {\n    Reflect.decorate(decorators, target);\n}\nfunction _param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction decorate(decorator, target, parameterIndex) {\n    if (typeof parameterIndex === \"number\") {\n        _decorate([_param(parameterIndex, decorator)], target);\n    }\n    else if (typeof parameterIndex === \"string\") {\n        Reflect.decorate([decorator], target, parameterIndex);\n    }\n    else {\n        _decorate([decorator], target);\n    }\n}\nexports.decorate = decorate;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.inject = exports.LazyServiceIdentifer = void 0;\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar LazyServiceIdentifer = (function () {\n    function LazyServiceIdentifer(cb) {\n        this._cb = cb;\n    }\n    LazyServiceIdentifer.prototype.unwrap = function () {\n        return this._cb();\n    };\n    return LazyServiceIdentifer;\n}());\nexports.LazyServiceIdentifer = LazyServiceIdentifer;\nfunction inject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        if (serviceIdentifier === undefined) {\n            throw new Error(error_msgs_1.UNDEFINED_INJECT_ANNOTATION(target.name));\n        }\n        var metadata = new metadata_1.Metadata(METADATA_KEY.INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.inject = inject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.injectable = void 0;\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction injectable() {\n    return function (target) {\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target)) {\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\n        }\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\n        return target;\n    };\n}\nexports.injectable = injectable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiInject = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction multiInject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.multiInject = multiInject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.named = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction named(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, name);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.named = named;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.optional = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction optional() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG, true);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.optional = optional;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.postConstruct = void 0;\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nfunction postConstruct() {\n    return function (target, propertyKey, descriptor) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT, propertyKey);\n        if (Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT, target.constructor)) {\n            throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\n        }\n        Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT, metadata, target.constructor);\n    };\n}\nexports.postConstruct = postConstruct;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.tagged = void 0;\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction tagged(metadataKey, metadataValue) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(metadataKey, metadataValue);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.tagged = tagged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.targetName = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction targetName(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAME_TAG, name);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.targetName = targetName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.unmanaged = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction unmanaged() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG, true);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.unmanaged = unmanaged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Binding = void 0;\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar id_1 = require(\"../utils/id\");\nvar Binding = (function () {\n    function Binding(serviceIdentifier, scope) {\n        this.id = id_1.id();\n        this.activated = false;\n        this.serviceIdentifier = serviceIdentifier;\n        this.scope = scope;\n        this.type = literal_types_1.BindingTypeEnum.Invalid;\n        this.constraint = function (request) { return true; };\n        this.implementationType = null;\n        this.cache = null;\n        this.factory = null;\n        this.provider = null;\n        this.onActivation = null;\n        this.dynamicValue = null;\n    }\n    Binding.prototype.clone = function () {\n        var clone = new Binding(this.serviceIdentifier, this.scope);\n        clone.activated = false;\n        clone.implementationType = this.implementationType;\n        clone.dynamicValue = this.dynamicValue;\n        clone.scope = this.scope;\n        clone.type = this.type;\n        clone.factory = this.factory;\n        clone.provider = this.provider;\n        clone.constraint = this.constraint;\n        clone.onActivation = this.onActivation;\n        clone.cache = this.cache;\n        return clone;\n    };\n    return Binding;\n}());\nexports.Binding = Binding;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingCount = void 0;\nvar BindingCount = {\n    MultipleBindingsAvailable: 2,\n    NoBindingsAvailable: 0,\n    OnlyOneBindingAvailable: 1\n};\nexports.BindingCount = BindingCount;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.STACK_OVERFLOW = exports.CIRCULAR_DEPENDENCY_IN_FACTORY = exports.POST_CONSTRUCT_ERROR = exports.MULTIPLE_POST_CONSTRUCT_METHODS = exports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = exports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = exports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = exports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = exports.ARGUMENTS_LENGTH_MISMATCH = exports.INVALID_DECORATOR_OPERATION = exports.INVALID_TO_SELF_VALUE = exports.INVALID_FUNCTION_BINDING = exports.INVALID_MIDDLEWARE_RETURN = exports.NO_MORE_SNAPSHOTS_AVAILABLE = exports.INVALID_BINDING_TYPE = exports.NOT_IMPLEMENTED = exports.CIRCULAR_DEPENDENCY = exports.UNDEFINED_INJECT_ANNOTATION = exports.MISSING_INJECT_ANNOTATION = exports.MISSING_INJECTABLE_ANNOTATION = exports.NOT_REGISTERED = exports.CANNOT_UNBIND = exports.AMBIGUOUS_MATCH = exports.KEY_NOT_FOUND = exports.NULL_ARGUMENT = exports.DUPLICATED_METADATA = exports.DUPLICATED_INJECTABLE_DECORATOR = void 0;\nexports.DUPLICATED_INJECTABLE_DECORATOR = \"Cannot apply @injectable decorator multiple times.\";\nexports.DUPLICATED_METADATA = \"Metadata key was used more than once in a parameter:\";\nexports.NULL_ARGUMENT = \"NULL argument\";\nexports.KEY_NOT_FOUND = \"Key Not Found\";\nexports.AMBIGUOUS_MATCH = \"Ambiguous match found for serviceIdentifier:\";\nexports.CANNOT_UNBIND = \"Could not unbind serviceIdentifier:\";\nexports.NOT_REGISTERED = \"No matching bindings found for serviceIdentifier:\";\nexports.MISSING_INJECTABLE_ANNOTATION = \"Missing required @injectable annotation in:\";\nexports.MISSING_INJECT_ANNOTATION = \"Missing required @inject or @multiInject annotation in:\";\nexports.UNDEFINED_INJECT_ANNOTATION = function (name) {\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\n        \"a circular dependency problem. You can use a LazyServiceIdentifer to  \" +\n        \"overcome this limitation.\";\n};\nexports.CIRCULAR_DEPENDENCY = \"Circular dependency found:\";\nexports.NOT_IMPLEMENTED = \"Sorry, this feature is not fully implemented yet.\";\nexports.INVALID_BINDING_TYPE = \"Invalid binding type:\";\nexports.NO_MORE_SNAPSHOTS_AVAILABLE = \"No snapshot available to restore.\";\nexports.INVALID_MIDDLEWARE_RETURN = \"Invalid return type in middleware. Middleware must return!\";\nexports.INVALID_FUNCTION_BINDING = \"Value provided to function binding must be a function!\";\nexports.INVALID_TO_SELF_VALUE = \"The toSelf function can only be applied when a constructor is \" +\n    \"used as service identifier\";\nexports.INVALID_DECORATOR_OPERATION = \"The @inject @multiInject @tagged and @named decorators \" +\n    \"must be applied to the parameters of a class constructor or a class property.\";\nexports.ARGUMENTS_LENGTH_MISMATCH = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"The number of constructor arguments in the derived class \" +\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\n};\nexports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = \"Invalid Container constructor argument. Container options \" +\n    \"must be an object.\";\nexports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = \"Invalid Container option. Default scope must \" +\n    \"be a string ('singleton' or 'transient').\";\nexports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = \"Invalid Container option. Auto bind injectable must \" +\n    \"be a boolean\";\nexports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = \"Invalid Container option. Skip base check must \" +\n    \"be a boolean\";\nexports.MULTIPLE_POST_CONSTRUCT_METHODS = \"Cannot apply @postConstruct decorator multiple times in the same class\";\nexports.POST_CONSTRUCT_ERROR = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"@postConstruct error in class \" + values[0] + \": \" + values[1];\n};\nexports.CIRCULAR_DEPENDENCY_IN_FACTORY = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"It looks like there is a circular dependency \" +\n        (\"in one of the '\" + values[0] + \"' bindings. Please investigate bindings with\") +\n        (\"service identifier '\" + values[1] + \"'.\");\n};\nexports.STACK_OVERFLOW = \"Maximum call stack size exceeded\";\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TargetTypeEnum = exports.BindingTypeEnum = exports.BindingScopeEnum = void 0;\nvar BindingScopeEnum = {\n    Request: \"Request\",\n    Singleton: \"Singleton\",\n    Transient: \"Transient\"\n};\nexports.BindingScopeEnum = BindingScopeEnum;\nvar BindingTypeEnum = {\n    ConstantValue: \"ConstantValue\",\n    Constructor: \"Constructor\",\n    DynamicValue: \"DynamicValue\",\n    Factory: \"Factory\",\n    Function: \"Function\",\n    Instance: \"Instance\",\n    Invalid: \"Invalid\",\n    Provider: \"Provider\"\n};\nexports.BindingTypeEnum = BindingTypeEnum;\nvar TargetTypeEnum = {\n    ClassProperty: \"ClassProperty\",\n    ConstructorArgument: \"ConstructorArgument\",\n    Variable: \"Variable\"\n};\nexports.TargetTypeEnum = TargetTypeEnum;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.POST_CONSTRUCT = exports.DESIGN_PARAM_TYPES = exports.PARAM_TYPES = exports.TAGGED_PROP = exports.TAGGED = exports.MULTI_INJECT_TAG = exports.INJECT_TAG = exports.OPTIONAL_TAG = exports.UNMANAGED_TAG = exports.NAME_TAG = exports.NAMED_TAG = void 0;\nexports.NAMED_TAG = \"named\";\nexports.NAME_TAG = \"name\";\nexports.UNMANAGED_TAG = \"unmanaged\";\nexports.OPTIONAL_TAG = \"optional\";\nexports.INJECT_TAG = \"inject\";\nexports.MULTI_INJECT_TAG = \"multi_inject\";\nexports.TAGGED = \"inversify:tagged\";\nexports.TAGGED_PROP = \"inversify:tagged_props\";\nexports.PARAM_TYPES = \"inversify:paramtypes\";\nexports.DESIGN_PARAM_TYPES = \"design:paramtypes\";\nexports.POST_CONSTRUCT = \"post_construct\";\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Container = void 0;\nvar binding_1 = require(\"../bindings/binding\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\nvar planner_1 = require(\"../planning/planner\");\nvar resolver_1 = require(\"../resolution/resolver\");\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\nvar id_1 = require(\"../utils/id\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar container_snapshot_1 = require(\"./container_snapshot\");\nvar lookup_1 = require(\"./lookup\");\nvar Container = (function () {\n    function Container(containerOptions) {\n        var options = containerOptions || {};\n        if (typeof options !== \"object\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n        }\n        if (options.defaultScope === undefined) {\n            options.defaultScope = literal_types_1.BindingScopeEnum.Transient;\n        }\n        else if (options.defaultScope !== literal_types_1.BindingScopeEnum.Singleton &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Transient &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Request) {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n        }\n        if (options.autoBindInjectable === undefined) {\n            options.autoBindInjectable = false;\n        }\n        else if (typeof options.autoBindInjectable !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n        }\n        if (options.skipBaseClassChecks === undefined) {\n            options.skipBaseClassChecks = false;\n        }\n        else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n        }\n        this.options = {\n            autoBindInjectable: options.autoBindInjectable,\n            defaultScope: options.defaultScope,\n            skipBaseClassChecks: options.skipBaseClassChecks\n        };\n        this.id = id_1.id();\n        this._bindingDictionary = new lookup_1.Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new metadata_reader_1.MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container = new Container();\n        var bindingDictionary = planner_1.getBindingDictionary(container);\n        var bindingDictionary1 = planner_1.getBindingDictionary(container1);\n        var bindingDictionary2 = planner_1.getBindingDictionary(container2);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        copyDictionary(bindingDictionary1, bindingDictionary);\n        copyDictionary(bindingDictionary2, bindingDictionary);\n        return container;\n    };\n    Container.prototype.load = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var getHelpers = this._getContainerModuleHelpersFactory();\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n            var currentModule = modules_1[_a];\n            var containerModuleHelpers = getHelpers(currentModule.id);\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n        }\n    };\n    Container.prototype.loadAsync = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        getHelpers = this._getContainerModuleHelpersFactory();\n                        _a = 0, modules_2 = modules;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_a < modules_2.length)) return [3, 4];\n                        currentModule = modules_2[_a];\n                        containerModuleHelpers = getHelpers(currentModule.id);\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _a++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.id);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var scope = this.options.defaultScope || literal_types_1.BindingScopeEnum.Transient;\n        var binding = new binding_1.Binding(serviceIdentifier, scope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new binding_to_syntax_1.BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new lookup_1.Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function (containerOptions) {\n        var child = new Container(containerOptions || this.options);\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = this.createChild();\n        tempContainer.bind(constructorFunction).toSelf();\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._getContainerModuleHelpersFactory = function () {\n        var _this = this;\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _bind = _this.bind.bind(_this);\n                var bindingToSyntax = _bind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _rebind = _this.rebind.bind(_this);\n                var bindingToSyntax = _rebind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        return function (mId) { return ({\n            bindFunction: getBindFunction(mId),\n            isboundFunction: getIsboundFunction(mId),\n            rebindFunction: getRebindFunction(mId),\n            unbindFunction: getUnbindFunction(mId)\n        }); };\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolver_1.resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexports.Container = Container;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AsyncContainerModule = exports.ContainerModule = void 0;\nvar id_1 = require(\"../utils/id\");\nvar ContainerModule = (function () {\n    function ContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return ContainerModule;\n}());\nexports.ContainerModule = ContainerModule;\nvar AsyncContainerModule = (function () {\n    function AsyncContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return AsyncContainerModule;\n}());\nexports.AsyncContainerModule = AsyncContainerModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ContainerSnapshot = void 0;\nvar ContainerSnapshot = (function () {\n    function ContainerSnapshot() {\n    }\n    ContainerSnapshot.of = function (bindings, middleware) {\n        var snapshot = new ContainerSnapshot();\n        snapshot.bindings = bindings;\n        snapshot.middleware = middleware;\n        return snapshot;\n    };\n    return ContainerSnapshot;\n}());\nexports.ContainerSnapshot = ContainerSnapshot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Lookup = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar Lookup = (function () {\n    function Lookup() {\n        this._map = new Map();\n    }\n    Lookup.prototype.getMap = function () {\n        return this._map;\n    };\n    Lookup.prototype.add = function (serviceIdentifier, value) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (value === null || value === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            entry.push(value);\n            this._map.set(serviceIdentifier, entry);\n        }\n        else {\n            this._map.set(serviceIdentifier, [value]);\n        }\n    };\n    Lookup.prototype.get = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            return entry;\n        }\n        else {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.remove = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (!this._map.delete(serviceIdentifier)) {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.removeByCondition = function (condition) {\n        var _this = this;\n        this._map.forEach(function (entries, key) {\n            var updatedEntries = entries.filter(function (entry) { return !condition(entry); });\n            if (updatedEntries.length > 0) {\n                _this._map.set(key, updatedEntries);\n            }\n            else {\n                _this._map.delete(key);\n            }\n        });\n    };\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        return this._map.has(serviceIdentifier);\n    };\n    Lookup.prototype.clone = function () {\n        var copy = new Lookup();\n        this._map.forEach(function (value, key) {\n            value.forEach(function (b) { return copy.add(key, b.clone()); });\n        });\n        return copy;\n    };\n    Lookup.prototype.traverse = function (func) {\n        this._map.forEach(function (value, key) {\n            func(key, value);\n        });\n    };\n    return Lookup;\n}());\nexports.Lookup = Lookup;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.METADATA_KEY = void 0;\nvar keys = require(\"./constants/metadata_keys\");\nexports.METADATA_KEY = keys;\nvar container_1 = require(\"./container/container\");\nObject.defineProperty(exports, \"Container\", { enumerable: true, get: function () { return container_1.Container; } });\nvar literal_types_1 = require(\"./constants/literal_types\");\nObject.defineProperty(exports, \"BindingScopeEnum\", { enumerable: true, get: function () { return literal_types_1.BindingScopeEnum; } });\nObject.defineProperty(exports, \"BindingTypeEnum\", { enumerable: true, get: function () { return literal_types_1.BindingTypeEnum; } });\nObject.defineProperty(exports, \"TargetTypeEnum\", { enumerable: true, get: function () { return literal_types_1.TargetTypeEnum; } });\nvar container_module_1 = require(\"./container/container_module\");\nObject.defineProperty(exports, \"AsyncContainerModule\", { enumerable: true, get: function () { return container_module_1.AsyncContainerModule; } });\nObject.defineProperty(exports, \"ContainerModule\", { enumerable: true, get: function () { return container_module_1.ContainerModule; } });\nvar injectable_1 = require(\"./annotation/injectable\");\nObject.defineProperty(exports, \"injectable\", { enumerable: true, get: function () { return injectable_1.injectable; } });\nvar tagged_1 = require(\"./annotation/tagged\");\nObject.defineProperty(exports, \"tagged\", { enumerable: true, get: function () { return tagged_1.tagged; } });\nvar named_1 = require(\"./annotation/named\");\nObject.defineProperty(exports, \"named\", { enumerable: true, get: function () { return named_1.named; } });\nvar inject_1 = require(\"./annotation/inject\");\nObject.defineProperty(exports, \"inject\", { enumerable: true, get: function () { return inject_1.inject; } });\nObject.defineProperty(exports, \"LazyServiceIdentifer\", { enumerable: true, get: function () { return inject_1.LazyServiceIdentifer; } });\nvar optional_1 = require(\"./annotation/optional\");\nObject.defineProperty(exports, \"optional\", { enumerable: true, get: function () { return optional_1.optional; } });\nvar unmanaged_1 = require(\"./annotation/unmanaged\");\nObject.defineProperty(exports, \"unmanaged\", { enumerable: true, get: function () { return unmanaged_1.unmanaged; } });\nvar multi_inject_1 = require(\"./annotation/multi_inject\");\nObject.defineProperty(exports, \"multiInject\", { enumerable: true, get: function () { return multi_inject_1.multiInject; } });\nvar target_name_1 = require(\"./annotation/target_name\");\nObject.defineProperty(exports, \"targetName\", { enumerable: true, get: function () { return target_name_1.targetName; } });\nvar post_construct_1 = require(\"./annotation/post_construct\");\nObject.defineProperty(exports, \"postConstruct\", { enumerable: true, get: function () { return post_construct_1.postConstruct; } });\nvar metadata_reader_1 = require(\"./planning/metadata_reader\");\nObject.defineProperty(exports, \"MetadataReader\", { enumerable: true, get: function () { return metadata_reader_1.MetadataReader; } });\nvar id_1 = require(\"./utils/id\");\nObject.defineProperty(exports, \"id\", { enumerable: true, get: function () { return id_1.id; } });\nvar decorator_utils_1 = require(\"./annotation/decorator_utils\");\nObject.defineProperty(exports, \"decorate\", { enumerable: true, get: function () { return decorator_utils_1.decorate; } });\nvar constraint_helpers_1 = require(\"./syntax/constraint_helpers\");\nObject.defineProperty(exports, \"traverseAncerstors\", { enumerable: true, get: function () { return constraint_helpers_1.traverseAncerstors; } });\nObject.defineProperty(exports, \"taggedConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.taggedConstraint; } });\nObject.defineProperty(exports, \"namedConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.namedConstraint; } });\nObject.defineProperty(exports, \"typeConstraint\", { enumerable: true, get: function () { return constraint_helpers_1.typeConstraint; } });\nvar serialization_1 = require(\"./utils/serialization\");\nObject.defineProperty(exports, \"getServiceIdentifierAsString\", { enumerable: true, get: function () { return serialization_1.getServiceIdentifierAsString; } });\nvar binding_utils_1 = require(\"./utils/binding_utils\");\nObject.defineProperty(exports, \"multiBindToService\", { enumerable: true, get: function () { return binding_utils_1.multiBindToService; } });\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Context = void 0;\nvar id_1 = require(\"../utils/id\");\nvar Context = (function () {\n    function Context(container) {\n        this.id = id_1.id();\n        this.container = container;\n    }\n    Context.prototype.addPlan = function (plan) {\n        this.plan = plan;\n    };\n    Context.prototype.setCurrentRequest = function (currentRequest) {\n        this.currentRequest = currentRequest;\n    };\n    return Context;\n}());\nexports.Context = Context;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Metadata = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Metadata = (function () {\n    function Metadata(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    Metadata.prototype.toString = function () {\n        if (this.key === METADATA_KEY.NAMED_TAG) {\n            return \"named: \" + this.value.toString() + \" \";\n        }\n        else {\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + this.value + \" }\";\n        }\n    };\n    return Metadata;\n}());\nexports.Metadata = Metadata;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MetadataReader = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar MetadataReader = (function () {\n    function MetadataReader() {\n    }\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\n        return {\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\n            userGeneratedMetadata: userGeneratedMetadata || {}\n        };\n    };\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\n        return userGeneratedMetadata;\n    };\n    return MetadataReader;\n}());\nexports.MetadataReader = MetadataReader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Plan = void 0;\nvar Plan = (function () {\n    function Plan(parentContext, rootRequest) {\n        this.parentContext = parentContext;\n        this.rootRequest = rootRequest;\n    }\n    return Plan;\n}());\nexports.Plan = Plan;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getBindingDictionary = exports.createMockRequest = exports.plan = void 0;\nvar binding_count_1 = require(\"../bindings/binding_count\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar context_1 = require(\"./context\");\nvar metadata_1 = require(\"./metadata\");\nvar plan_1 = require(\"./plan\");\nvar reflection_utils_1 = require(\"./reflection_utils\");\nvar request_1 = require(\"./request\");\nvar target_1 = require(\"./target\");\nfunction getBindingDictionary(cntnr) {\n    return cntnr._bindingDictionary;\n}\nexports.getBindingDictionary = getBindingDictionary;\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\n    var injectMetadata = new metadata_1.Metadata(metadataKey, serviceIdentifier);\n    var target = new target_1.Target(targetType, name, serviceIdentifier, injectMetadata);\n    if (key !== undefined) {\n        var tagMetadata = new metadata_1.Metadata(key, value);\n        target.metadata.push(tagMetadata);\n    }\n    return target;\n}\nfunction _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {\n    var bindings = getBindings(context.container, target.serviceIdentifier);\n    var activeBindings = [];\n    if (bindings.length === binding_count_1.BindingCount.NoBindingsAvailable &&\n        context.container.options.autoBindInjectable &&\n        typeof target.serviceIdentifier === \"function\" &&\n        metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {\n        context.container.bind(target.serviceIdentifier).toSelf();\n        bindings = getBindings(context.container, target.serviceIdentifier);\n    }\n    if (!avoidConstraints) {\n        activeBindings = bindings.filter(function (binding) {\n            var request = new request_1.Request(binding.serviceIdentifier, context, parentRequest, binding, target);\n            return binding.constraint(request);\n        });\n    }\n    else {\n        activeBindings = bindings;\n    }\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\n    return activeBindings;\n}\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\n    switch (bindings.length) {\n        case binding_count_1.BindingCount.NoBindingsAvailable:\n            if (target.isOptional()) {\n                return bindings;\n            }\n            else {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.NOT_REGISTERED;\n                msg += serialization_1.listMetadataForTarget(serviceIdentifierString, target);\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n        case binding_count_1.BindingCount.OnlyOneBindingAvailable:\n            if (!target.isArray()) {\n                return bindings;\n            }\n        case binding_count_1.BindingCount.MultipleBindingsAvailable:\n        default:\n            if (!target.isArray()) {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n            else {\n                return bindings;\n            }\n    }\n}\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\n    var activeBindings;\n    var childRequest;\n    if (parentRequest === null) {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);\n        childRequest = new request_1.Request(serviceIdentifier, context, null, activeBindings, target);\n        var thePlan = new plan_1.Plan(context, childRequest);\n        context.addPlan(thePlan);\n    }\n    else {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);\n        childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\n    }\n    activeBindings.forEach(function (binding) {\n        var subChildRequest = null;\n        if (target.isArray()) {\n            subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);\n        }\n        else {\n            if (binding.cache) {\n                return;\n            }\n            subChildRequest = childRequest;\n        }\n        if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n            var dependencies = reflection_utils_1.getDependencies(metadataReader, binding.implementationType);\n            if (!context.container.options.skipBaseClassChecks) {\n                var baseClassDependencyCount = reflection_utils_1.getBaseClassDependencyCount(metadataReader, binding.implementationType);\n                if (dependencies.length < baseClassDependencyCount) {\n                    var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(reflection_utils_1.getFunctionName(binding.implementationType));\n                    throw new Error(error);\n                }\n            }\n            dependencies.forEach(function (dependency) {\n                _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\n            });\n        }\n    });\n}\nfunction getBindings(container, serviceIdentifier) {\n    var bindings = [];\n    var bindingDictionary = getBindingDictionary(container);\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\n        bindings = bindingDictionary.get(serviceIdentifier);\n    }\n    else if (container.parent !== null) {\n        bindings = getBindings(container.parent, serviceIdentifier);\n    }\n    return bindings;\n}\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\n    var context = new context_1.Context(container);\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, \"\", key, value);\n    try {\n        _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\n        return context;\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            if (context.plan) {\n                serialization_1.circularDependencyToException(context.plan.rootRequest);\n            }\n        }\n        throw error;\n    }\n}\nexports.plan = plan;\nfunction createMockRequest(container, serviceIdentifier, key, value) {\n    var target = new target_1.Target(literal_types_1.TargetTypeEnum.Variable, \"\", serviceIdentifier, new metadata_1.Metadata(key, value));\n    var context = new context_1.Context(container);\n    var request = new request_1.Request(serviceIdentifier, context, null, [], target);\n    return request;\n}\nexports.createMockRequest = createMockRequest;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.QueryableString = void 0;\nvar QueryableString = (function () {\n    function QueryableString(str) {\n        this.str = str;\n    }\n    QueryableString.prototype.startsWith = function (searchString) {\n        return this.str.indexOf(searchString) === 0;\n    };\n    QueryableString.prototype.endsWith = function (searchString) {\n        var reverseString = \"\";\n        var reverseSearchString = searchString.split(\"\").reverse().join(\"\");\n        reverseString = this.str.split(\"\").reverse().join(\"\");\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\n    };\n    QueryableString.prototype.contains = function (searchString) {\n        return (this.str.indexOf(searchString) !== -1);\n    };\n    QueryableString.prototype.equals = function (compareString) {\n        return this.str === compareString;\n    };\n    QueryableString.prototype.value = function () {\n        return this.str;\n    };\n    return QueryableString;\n}());\nexports.QueryableString = QueryableString;\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getFunctionName = exports.getBaseClassDependencyCount = exports.getDependencies = void 0;\nvar inject_1 = require(\"../annotation/inject\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar serialization_1 = require(\"../utils/serialization\");\nObject.defineProperty(exports, \"getFunctionName\", { enumerable: true, get: function () { return serialization_1.getFunctionName; } });\nvar target_1 = require(\"./target\");\nfunction getDependencies(metadataReader, func) {\n    var constructorName = serialization_1.getFunctionName(func);\n    var targets = getTargets(metadataReader, constructorName, func, false);\n    return targets;\n}\nexports.getDependencies = getDependencies;\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\n    var metadata = metadataReader.getConstructorMetadata(func);\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\n    if (serviceIdentifiers === undefined) {\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\n        throw new Error(msg);\n    }\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\n    var keys = Object.keys(constructorArgsMetadata);\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\n    var iterations = (hasUserDeclaredUnknownInjections) ? keys.length : func.length;\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func);\n    var targets = __spreadArrays(constructorTargets, propertyTargets);\n    return targets;\n}\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\n    var metadata = formatTargetMetadata(targetMetadata);\n    var isManaged = metadata.unmanaged !== true;\n    var serviceIdentifier = serviceIdentifiers[index];\n    var injectIdentifier = (metadata.inject || metadata.multiInject);\n    serviceIdentifier = (injectIdentifier) ? (injectIdentifier) : serviceIdentifier;\n    if (serviceIdentifier instanceof inject_1.LazyServiceIdentifer) {\n        serviceIdentifier = serviceIdentifier.unwrap();\n    }\n    if (isManaged) {\n        var isObject = serviceIdentifier === Object;\n        var isFunction = serviceIdentifier === Function;\n        var isUndefined = serviceIdentifier === undefined;\n        var isUnknownType = (isObject || isFunction || isUndefined);\n        if (!isBaseClass && isUnknownType) {\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\n            throw new Error(msg);\n        }\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        return target;\n    }\n    return null;\n}\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\n    var targets = [];\n    for (var i = 0; i < iterations; i++) {\n        var index = i;\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\n        if (target !== null) {\n            targets.push(target);\n        }\n    }\n    return targets;\n}\nfunction getClassPropsAsTargets(metadataReader, constructorFunc) {\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\n    var targets = [];\n    var keys = Object.keys(classPropsMetadata);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        var targetMetadata = classPropsMetadata[key];\n        var metadata = formatTargetMetadata(classPropsMetadata[key]);\n        var targetName = metadata.targetName || key;\n        var serviceIdentifier = (metadata.inject || metadata.multiInject);\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty, targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        targets.push(target);\n    }\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor);\n        targets = __spreadArrays(targets, baseTargets);\n    }\n    return targets;\n}\nfunction getBaseClassDependencyCount(metadataReader, func) {\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseConstructorName = serialization_1.getFunctionName(baseConstructor);\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\n        var metadata = targets.map(function (t) {\n            return t.metadata.filter(function (m) {\n                return m.key === METADATA_KEY.UNMANAGED_TAG;\n            });\n        });\n        var unmanagedCount = [].concat.apply([], metadata).length;\n        var dependencyCount = targets.length - unmanagedCount;\n        if (dependencyCount > 0) {\n            return dependencyCount;\n        }\n        else {\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\n        }\n    }\n    else {\n        return 0;\n    }\n}\nexports.getBaseClassDependencyCount = getBaseClassDependencyCount;\nfunction formatTargetMetadata(targetMetadata) {\n    var targetMetadataMap = {};\n    targetMetadata.forEach(function (m) {\n        targetMetadataMap[m.key.toString()] = m.value;\n    });\n    return {\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Request = void 0;\nvar id_1 = require(\"../utils/id\");\nvar Request = (function () {\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\n        this.id = id_1.id();\n        this.serviceIdentifier = serviceIdentifier;\n        this.parentContext = parentContext;\n        this.parentRequest = parentRequest;\n        this.target = target;\n        this.childRequests = [];\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\n        this.requestScope = parentRequest === null\n            ? new Map()\n            : null;\n    }\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\n        this.childRequests.push(child);\n        return child;\n    };\n    return Request;\n}());\nexports.Request = Request;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Target = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar id_1 = require(\"../utils/id\");\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.id = id_1.id();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new queryable_string_1.QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof metadata_1.Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n            var m = _a[_i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (m) {\n            return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                (m.key !== METADATA_KEY.NAME_TAG) &&\n                (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                (m.key !== METADATA_KEY.NAMED_TAG);\n        });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (m) {\n                return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.NAME_TAG) &&\n                    (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                    (m.key !== METADATA_KEY.NAMED_TAG);\n            });\n        }\n        return null;\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n                var m = _a[_i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexports.Target = Target;\n","\"use strict\";\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolveInstance = void 0;\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction _injectProperties(instance, childRequests, resolveRequest) {\n    var propertyInjectionsRequests = childRequests.filter(function (childRequest) {\n        return (childRequest.target !== null &&\n            childRequest.target.type === literal_types_1.TargetTypeEnum.ClassProperty);\n    });\n    var propertyInjections = propertyInjectionsRequests.map(resolveRequest);\n    propertyInjectionsRequests.forEach(function (r, index) {\n        var propertyName = \"\";\n        propertyName = r.target.name.value();\n        var injection = propertyInjections[index];\n        instance[propertyName] = injection;\n    });\n    return instance;\n}\nfunction _createInstance(Func, injections) {\n    return new (Func.bind.apply(Func, __spreadArrays([void 0], injections)))();\n}\nfunction _postConstruct(constr, result) {\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\n        try {\n            result[data.value]();\n        }\n        catch (e) {\n            throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name, e.message));\n        }\n    }\n}\nfunction resolveInstance(constr, childRequests, resolveRequest) {\n    var result = null;\n    if (childRequests.length > 0) {\n        var constructorInjectionsRequests = childRequests.filter(function (childRequest) {\n            return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ConstructorArgument);\n        });\n        var constructorInjections = constructorInjectionsRequests.map(resolveRequest);\n        result = _createInstance(constr, constructorInjections);\n        result = _injectProperties(result, childRequests, resolveRequest);\n    }\n    else {\n        result = new constr();\n    }\n    _postConstruct(constr, result);\n    return result;\n}\nexports.resolveInstance = resolveInstance;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.resolve = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar instantiation_1 = require(\"./instantiation\");\nvar invokeFactory = function (factoryType, serviceIdentifier, fn) {\n    try {\n        return fn();\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType, serviceIdentifier.toString()));\n        }\n        else {\n            throw error;\n        }\n    }\n};\nvar _resolveRequest = function (requestScope) {\n    return function (request) {\n        request.parentContext.setCurrentRequest(request);\n        var bindings = request.bindings;\n        var childRequests = request.childRequests;\n        var targetIsAnArray = request.target && request.target.isArray();\n        var targetParentIsNotAnArray = !request.parentRequest ||\n            !request.parentRequest.target ||\n            !request.target ||\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n        if (targetIsAnArray && targetParentIsNotAnArray) {\n            return childRequests.map(function (childRequest) {\n                var _f = _resolveRequest(requestScope);\n                return _f(childRequest);\n            });\n        }\n        else {\n            var result = null;\n            if (request.target.isOptional() && bindings.length === 0) {\n                return undefined;\n            }\n            var binding_1 = bindings[0];\n            var isSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Singleton;\n            var isRequestSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Request;\n            if (isSingleton && binding_1.activated) {\n                return binding_1.cache;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                requestScope.has(binding_1.id)) {\n                return requestScope.get(binding_1.id);\n            }\n            if (binding_1.type === literal_types_1.BindingTypeEnum.ConstantValue) {\n                result = binding_1.cache;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Function) {\n                result = binding_1.cache;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Constructor) {\n                result = binding_1.implementationType;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.DynamicValue && binding_1.dynamicValue !== null) {\n                result = invokeFactory(\"toDynamicValue\", binding_1.serviceIdentifier, function () { return binding_1.dynamicValue(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Factory && binding_1.factory !== null) {\n                result = invokeFactory(\"toFactory\", binding_1.serviceIdentifier, function () { return binding_1.factory(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Provider && binding_1.provider !== null) {\n                result = invokeFactory(\"toProvider\", binding_1.serviceIdentifier, function () { return binding_1.provider(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Instance && binding_1.implementationType !== null) {\n                result = instantiation_1.resolveInstance(binding_1.implementationType, childRequests, _resolveRequest(requestScope));\n            }\n            else {\n                var serviceIdentifier = serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);\n                throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n            }\n            if (typeof binding_1.onActivation === \"function\") {\n                result = binding_1.onActivation(request.parentContext, result);\n            }\n            if (isSingleton) {\n                binding_1.cache = result;\n                binding_1.activated = true;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                !requestScope.has(binding_1.id)) {\n                requestScope.set(binding_1.id, result);\n            }\n            return result;\n        }\n    };\n};\nfunction resolve(context) {\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\n    return _f(context.plan.rootRequest);\n}\nexports.resolve = resolve;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingInSyntax = void 0;\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingInSyntax = (function () {\n    function BindingInSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingInSyntax.prototype.inRequestScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Request;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inSingletonScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inTransientScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Transient;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingInSyntax;\n}());\nexports.BindingInSyntax = BindingInSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingInWhenOnSyntax = void 0;\nvar binding_in_syntax_1 = require(\"./binding_in_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingInWhenOnSyntax = (function () {\n    function BindingInWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n        this._bindingInSyntax = new binding_in_syntax_1.BindingInSyntax(binding);\n    }\n    BindingInWhenOnSyntax.prototype.inRequestScope = function () {\n        return this._bindingInSyntax.inRequestScope();\n    };\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\n        return this._bindingInSyntax.inSingletonScope();\n    };\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\n        return this._bindingInSyntax.inTransientScope();\n    };\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingInWhenOnSyntax;\n}());\nexports.BindingInWhenOnSyntax = BindingInWhenOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingOnSyntax = void 0;\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingOnSyntax = (function () {\n    function BindingOnSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingOnSyntax.prototype.onActivation = function (handler) {\n        this._binding.onActivation = handler;\n        return new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n    };\n    return BindingOnSyntax;\n}());\nexports.BindingOnSyntax = BindingOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingToSyntax = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = literal_types_1.BindingTypeEnum.Function;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\n            return autofactory;\n        };\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toService = function (service) {\n        this.toDynamicValue(function (context) { return context.container.get(service); });\n    };\n    return BindingToSyntax;\n}());\nexports.BindingToSyntax = BindingToSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingWhenOnSyntax = void 0;\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingWhenOnSyntax = (function () {\n    function BindingWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    }\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingWhenOnSyntax;\n}());\nexports.BindingWhenOnSyntax = BindingWhenOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BindingWhenSyntax = void 0;\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar constraint_helpers_1 = require(\"./constraint_helpers\");\nvar BindingWhenSyntax = (function () {\n    function BindingWhenSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingWhenSyntax.prototype.when = function (constraint) {\n        this._binding.constraint = constraint;\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n        this._binding.constraint = constraint_helpers_1.namedConstraint(name);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n        this._binding.constraint = function (request) {\n            var targetIsDefault = (request.target !== null) &&\n                (!request.target.isNamed()) &&\n                (!request.target.isTagged());\n            return targetIsDefault;\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n        this._binding.constraint = constraint_helpers_1.taggedConstraint(tag)(value);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.typeConstraint(parent)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.namedConstraint(name)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    return BindingWhenSyntax;\n}());\nexports.BindingWhenSyntax = BindingWhenSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.typeConstraint = exports.namedConstraint = exports.taggedConstraint = exports.traverseAncerstors = void 0;\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiBindToService = void 0;\nexports.multiBindToService = function (container) {\n    return function (service) {\n        return function () {\n            var types = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                types[_i] = arguments[_i];\n            }\n            return types.forEach(function (t) { return container.bind(t).toService(service); });\n        };\n    };\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isStackOverflowExeption = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction isStackOverflowExeption(error) {\n    return (error instanceof RangeError ||\n        error.message === ERROR_MSGS.STACK_OVERFLOW);\n}\nexports.isStackOverflowExeption = isStackOverflowExeption;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.id = void 0;\nvar idCounter = 0;\nfunction id() {\n    return idCounter++;\n}\nexports.id = id;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.circularDependencyToException = exports.listMetadataForTarget = exports.listRegisteredBindingsForServiceIdentifier = exports.getServiceIdentifierAsString = exports.getFunctionName = void 0;\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n    if (request.parentRequest === null) {\n        return false;\n    }\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n        return true;\n    }\n    else {\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n    }\n}\nfunction dependencyChainToString(request) {\n    function _createStringArr(req, result) {\n        if (result === void 0) { result = []; }\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n        result.push(serviceIdentifier);\n        if (req.parentRequest !== null) {\n            return _createStringArr(req.parentRequest, result);\n        }\n        return result;\n    }\n    var stringArr = _createStringArr(request);\n    return stringArr.reverse().join(\" --> \");\n}\nfunction circularDependencyToException(request) {\n    request.childRequests.forEach(function (childRequest) {\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n            var services = dependencyChainToString(childRequest);\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n        else {\n            circularDependencyToException(childRequest);\n        }\n    });\n}\nexports.circularDependencyToException = circularDependencyToException;\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nexports.listMetadataForTarget = listMetadataForTarget;\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexports.getFunctionName = getFunctionName;\n","function createElement(tagName, options) {\n    return document.createElement(tagName, options);\n}\nfunction createElementNS(namespaceURI, qualifiedName, options) {\n    return document.createElementNS(namespaceURI, qualifiedName, options);\n}\nfunction createTextNode(text) {\n    return document.createTextNode(text);\n}\nfunction createComment(text) {\n    return document.createComment(text);\n}\nfunction insertBefore(parentNode, newNode, referenceNode) {\n    parentNode.insertBefore(newNode, referenceNode);\n}\nfunction removeChild(node, child) {\n    node.removeChild(child);\n}\nfunction appendChild(node, child) {\n    node.appendChild(child);\n}\nfunction parentNode(node) {\n    return node.parentNode;\n}\nfunction nextSibling(node) {\n    return node.nextSibling;\n}\nfunction tagName(elm) {\n    return elm.tagName;\n}\nfunction setTextContent(node, text) {\n    node.textContent = text;\n}\nfunction getTextContent(node) {\n    return node.textContent;\n}\nfunction isElement(node) {\n    return node.nodeType === 1;\n}\nfunction isText(node) {\n    return node.nodeType === 3;\n}\nfunction isComment(node) {\n    return node.nodeType === 8;\n}\nexport const htmlDomApi = {\n    createElement,\n    createElementNS,\n    createTextNode,\n    createComment,\n    insertBefore,\n    removeChild,\n    appendChild,\n    parentNode,\n    nextSibling,\n    tagName,\n    setTextContent,\n    getTextContent,\n    isElement,\n    isText,\n    isComment,\n};\n//# sourceMappingURL=htmldomapi.js.map","export function vnode(sel, data, children, text, elm) {\n    const key = data === undefined ? undefined : data.key;\n    return { sel, data, children, text, elm, key };\n}\n//# sourceMappingURL=vnode.js.map","export const array = Array.isArray;\nexport function primitive(s) {\n    return typeof s === \"string\" || typeof s === \"number\";\n}\n//# sourceMappingURL=is.js.map","import { vnode } from \"./vnode\";\nimport * as is from \"./is\";\nimport { htmlDomApi } from \"./htmldomapi\";\nfunction isUndef(s) {\n    return s === undefined;\n}\nfunction isDef(s) {\n    return s !== undefined;\n}\nconst emptyNode = vnode(\"\", {}, [], undefined, undefined);\nfunction sameVnode(vnode1, vnode2) {\n    var _a, _b;\n    const isSameKey = vnode1.key === vnode2.key;\n    const isSameIs = ((_a = vnode1.data) === null || _a === void 0 ? void 0 : _a.is) === ((_b = vnode2.data) === null || _b === void 0 ? void 0 : _b.is);\n    const isSameSel = vnode1.sel === vnode2.sel;\n    return isSameSel && isSameKey && isSameIs;\n}\nfunction isVnode(vnode) {\n    return vnode.sel !== undefined;\n}\nfunction createKeyToOldIdx(children, beginIdx, endIdx) {\n    var _a;\n    const map = {};\n    for (let i = beginIdx; i <= endIdx; ++i) {\n        const key = (_a = children[i]) === null || _a === void 0 ? void 0 : _a.key;\n        if (key !== undefined) {\n            map[key] = i;\n        }\n    }\n    return map;\n}\nconst hooks = [\n    \"create\",\n    \"update\",\n    \"remove\",\n    \"destroy\",\n    \"pre\",\n    \"post\",\n];\nexport function init(modules, domApi) {\n    let i;\n    let j;\n    const cbs = {\n        create: [],\n        update: [],\n        remove: [],\n        destroy: [],\n        pre: [],\n        post: [],\n    };\n    const api = domApi !== undefined ? domApi : htmlDomApi;\n    for (i = 0; i < hooks.length; ++i) {\n        cbs[hooks[i]] = [];\n        for (j = 0; j < modules.length; ++j) {\n            const hook = modules[j][hooks[i]];\n            if (hook !== undefined) {\n                cbs[hooks[i]].push(hook);\n            }\n        }\n    }\n    function emptyNodeAt(elm) {\n        const id = elm.id ? \"#\" + elm.id : \"\";\n        // elm.className doesn't return a string when elm is an SVG element inside a shadowRoot.\n        // https://stackoverflow.com/questions/29454340/detecting-classname-of-svganimatedstring\n        const classes = elm.getAttribute(\"class\");\n        const c = classes ? \".\" + classes.split(\" \").join(\".\") : \"\";\n        return vnode(api.tagName(elm).toLowerCase() + id + c, {}, [], undefined, elm);\n    }\n    function createRmCb(childElm, listeners) {\n        return function rmCb() {\n            if (--listeners === 0) {\n                const parent = api.parentNode(childElm);\n                api.removeChild(parent, childElm);\n            }\n        };\n    }\n    function createElm(vnode, insertedVnodeQueue) {\n        var _a, _b;\n        let i;\n        let data = vnode.data;\n        if (data !== undefined) {\n            const init = (_a = data.hook) === null || _a === void 0 ? void 0 : _a.init;\n            if (isDef(init)) {\n                init(vnode);\n                data = vnode.data;\n            }\n        }\n        const children = vnode.children;\n        const sel = vnode.sel;\n        if (sel === \"!\") {\n            if (isUndef(vnode.text)) {\n                vnode.text = \"\";\n            }\n            vnode.elm = api.createComment(vnode.text);\n        }\n        else if (sel !== undefined) {\n            // Parse selector\n            const hashIdx = sel.indexOf(\"#\");\n            const dotIdx = sel.indexOf(\".\", hashIdx);\n            const hash = hashIdx > 0 ? hashIdx : sel.length;\n            const dot = dotIdx > 0 ? dotIdx : sel.length;\n            const tag = hashIdx !== -1 || dotIdx !== -1\n                ? sel.slice(0, Math.min(hash, dot))\n                : sel;\n            const elm = (vnode.elm =\n                isDef(data) && isDef((i = data.ns))\n                    ? api.createElementNS(i, tag, data)\n                    : api.createElement(tag, data));\n            if (hash < dot)\n                elm.setAttribute(\"id\", sel.slice(hash + 1, dot));\n            if (dotIdx > 0)\n                elm.setAttribute(\"class\", sel.slice(dot + 1).replace(/\\./g, \" \"));\n            for (i = 0; i < cbs.create.length; ++i)\n                cbs.create[i](emptyNode, vnode);\n            if (is.array(children)) {\n                for (i = 0; i < children.length; ++i) {\n                    const ch = children[i];\n                    if (ch != null) {\n                        api.appendChild(elm, createElm(ch, insertedVnodeQueue));\n                    }\n                }\n            }\n            else if (is.primitive(vnode.text)) {\n                api.appendChild(elm, api.createTextNode(vnode.text));\n            }\n            const hook = vnode.data.hook;\n            if (isDef(hook)) {\n                (_b = hook.create) === null || _b === void 0 ? void 0 : _b.call(hook, emptyNode, vnode);\n                if (hook.insert) {\n                    insertedVnodeQueue.push(vnode);\n                }\n            }\n        }\n        else {\n            vnode.elm = api.createTextNode(vnode.text);\n        }\n        return vnode.elm;\n    }\n    function addVnodes(parentElm, before, vnodes, startIdx, endIdx, insertedVnodeQueue) {\n        for (; startIdx <= endIdx; ++startIdx) {\n            const ch = vnodes[startIdx];\n            if (ch != null) {\n                api.insertBefore(parentElm, createElm(ch, insertedVnodeQueue), before);\n            }\n        }\n    }\n    function invokeDestroyHook(vnode) {\n        var _a, _b;\n        const data = vnode.data;\n        if (data !== undefined) {\n            (_b = (_a = data === null || data === void 0 ? void 0 : data.hook) === null || _a === void 0 ? void 0 : _a.destroy) === null || _b === void 0 ? void 0 : _b.call(_a, vnode);\n            for (let i = 0; i < cbs.destroy.length; ++i)\n                cbs.destroy[i](vnode);\n            if (vnode.children !== undefined) {\n                for (let j = 0; j < vnode.children.length; ++j) {\n                    const child = vnode.children[j];\n                    if (child != null && typeof child !== \"string\") {\n                        invokeDestroyHook(child);\n                    }\n                }\n            }\n        }\n    }\n    function removeVnodes(parentElm, vnodes, startIdx, endIdx) {\n        var _a, _b;\n        for (; startIdx <= endIdx; ++startIdx) {\n            let listeners;\n            let rm;\n            const ch = vnodes[startIdx];\n            if (ch != null) {\n                if (isDef(ch.sel)) {\n                    invokeDestroyHook(ch);\n                    listeners = cbs.remove.length + 1;\n                    rm = createRmCb(ch.elm, listeners);\n                    for (let i = 0; i < cbs.remove.length; ++i)\n                        cbs.remove[i](ch, rm);\n                    const removeHook = (_b = (_a = ch === null || ch === void 0 ? void 0 : ch.data) === null || _a === void 0 ? void 0 : _a.hook) === null || _b === void 0 ? void 0 : _b.remove;\n                    if (isDef(removeHook)) {\n                        removeHook(ch, rm);\n                    }\n                    else {\n                        rm();\n                    }\n                }\n                else {\n                    // Text node\n                    api.removeChild(parentElm, ch.elm);\n                }\n            }\n        }\n    }\n    function updateChildren(parentElm, oldCh, newCh, insertedVnodeQueue) {\n        let oldStartIdx = 0;\n        let newStartIdx = 0;\n        let oldEndIdx = oldCh.length - 1;\n        let oldStartVnode = oldCh[0];\n        let oldEndVnode = oldCh[oldEndIdx];\n        let newEndIdx = newCh.length - 1;\n        let newStartVnode = newCh[0];\n        let newEndVnode = newCh[newEndIdx];\n        let oldKeyToIdx;\n        let idxInOld;\n        let elmToMove;\n        let before;\n        while (oldStartIdx <= oldEndIdx && newStartIdx <= newEndIdx) {\n            if (oldStartVnode == null) {\n                oldStartVnode = oldCh[++oldStartIdx]; // Vnode might have been moved left\n            }\n            else if (oldEndVnode == null) {\n                oldEndVnode = oldCh[--oldEndIdx];\n            }\n            else if (newStartVnode == null) {\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (newEndVnode == null) {\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newStartVnode)) {\n                patchVnode(oldStartVnode, newStartVnode, insertedVnodeQueue);\n                oldStartVnode = oldCh[++oldStartIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else if (sameVnode(oldEndVnode, newEndVnode)) {\n                patchVnode(oldEndVnode, newEndVnode, insertedVnodeQueue);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldStartVnode, newEndVnode)) {\n                // Vnode moved right\n                patchVnode(oldStartVnode, newEndVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldStartVnode.elm, api.nextSibling(oldEndVnode.elm));\n                oldStartVnode = oldCh[++oldStartIdx];\n                newEndVnode = newCh[--newEndIdx];\n            }\n            else if (sameVnode(oldEndVnode, newStartVnode)) {\n                // Vnode moved left\n                patchVnode(oldEndVnode, newStartVnode, insertedVnodeQueue);\n                api.insertBefore(parentElm, oldEndVnode.elm, oldStartVnode.elm);\n                oldEndVnode = oldCh[--oldEndIdx];\n                newStartVnode = newCh[++newStartIdx];\n            }\n            else {\n                if (oldKeyToIdx === undefined) {\n                    oldKeyToIdx = createKeyToOldIdx(oldCh, oldStartIdx, oldEndIdx);\n                }\n                idxInOld = oldKeyToIdx[newStartVnode.key];\n                if (isUndef(idxInOld)) {\n                    // New element\n                    api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                }\n                else {\n                    elmToMove = oldCh[idxInOld];\n                    if (elmToMove.sel !== newStartVnode.sel) {\n                        api.insertBefore(parentElm, createElm(newStartVnode, insertedVnodeQueue), oldStartVnode.elm);\n                    }\n                    else {\n                        patchVnode(elmToMove, newStartVnode, insertedVnodeQueue);\n                        oldCh[idxInOld] = undefined;\n                        api.insertBefore(parentElm, elmToMove.elm, oldStartVnode.elm);\n                    }\n                }\n                newStartVnode = newCh[++newStartIdx];\n            }\n        }\n        if (oldStartIdx <= oldEndIdx || newStartIdx <= newEndIdx) {\n            if (oldStartIdx > oldEndIdx) {\n                before = newCh[newEndIdx + 1] == null ? null : newCh[newEndIdx + 1].elm;\n                addVnodes(parentElm, before, newCh, newStartIdx, newEndIdx, insertedVnodeQueue);\n            }\n            else {\n                removeVnodes(parentElm, oldCh, oldStartIdx, oldEndIdx);\n            }\n        }\n    }\n    function patchVnode(oldVnode, vnode, insertedVnodeQueue) {\n        var _a, _b, _c, _d, _e;\n        const hook = (_a = vnode.data) === null || _a === void 0 ? void 0 : _a.hook;\n        (_b = hook === null || hook === void 0 ? void 0 : hook.prepatch) === null || _b === void 0 ? void 0 : _b.call(hook, oldVnode, vnode);\n        const elm = (vnode.elm = oldVnode.elm);\n        const oldCh = oldVnode.children;\n        const ch = vnode.children;\n        if (oldVnode === vnode)\n            return;\n        if (vnode.data !== undefined) {\n            for (let i = 0; i < cbs.update.length; ++i)\n                cbs.update[i](oldVnode, vnode);\n            (_d = (_c = vnode.data.hook) === null || _c === void 0 ? void 0 : _c.update) === null || _d === void 0 ? void 0 : _d.call(_c, oldVnode, vnode);\n        }\n        if (isUndef(vnode.text)) {\n            if (isDef(oldCh) && isDef(ch)) {\n                if (oldCh !== ch)\n                    updateChildren(elm, oldCh, ch, insertedVnodeQueue);\n            }\n            else if (isDef(ch)) {\n                if (isDef(oldVnode.text))\n                    api.setTextContent(elm, \"\");\n                addVnodes(elm, null, ch, 0, ch.length - 1, insertedVnodeQueue);\n            }\n            else if (isDef(oldCh)) {\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n            }\n            else if (isDef(oldVnode.text)) {\n                api.setTextContent(elm, \"\");\n            }\n        }\n        else if (oldVnode.text !== vnode.text) {\n            if (isDef(oldCh)) {\n                removeVnodes(elm, oldCh, 0, oldCh.length - 1);\n            }\n            api.setTextContent(elm, vnode.text);\n        }\n        (_e = hook === null || hook === void 0 ? void 0 : hook.postpatch) === null || _e === void 0 ? void 0 : _e.call(hook, oldVnode, vnode);\n    }\n    return function patch(oldVnode, vnode) {\n        let i, elm, parent;\n        const insertedVnodeQueue = [];\n        for (i = 0; i < cbs.pre.length; ++i)\n            cbs.pre[i]();\n        if (!isVnode(oldVnode)) {\n            oldVnode = emptyNodeAt(oldVnode);\n        }\n        if (sameVnode(oldVnode, vnode)) {\n            patchVnode(oldVnode, vnode, insertedVnodeQueue);\n        }\n        else {\n            elm = oldVnode.elm;\n            parent = api.parentNode(elm);\n            createElm(vnode, insertedVnodeQueue);\n            if (parent !== null) {\n                api.insertBefore(parent, vnode.elm, api.nextSibling(elm));\n                removeVnodes(parent, [oldVnode], 0, 0);\n            }\n        }\n        for (i = 0; i < insertedVnodeQueue.length; ++i) {\n            insertedVnodeQueue[i].data.hook.insert(insertedVnodeQueue[i]);\n        }\n        for (i = 0; i < cbs.post.length; ++i)\n            cbs.post[i]();\n        return vnode;\n    };\n}\n//# sourceMappingURL=init.js.map","import { vnode } from \"./vnode\";\nimport * as is from \"./is\";\nfunction addNS(data, children, sel) {\n    data.ns = \"http://www.w3.org/2000/svg\";\n    if (sel !== \"foreignObject\" && children !== undefined) {\n        for (let i = 0; i < children.length; ++i) {\n            const childData = children[i].data;\n            if (childData !== undefined) {\n                addNS(childData, children[i].children, children[i].sel);\n            }\n        }\n    }\n}\nexport function h(sel, b, c) {\n    let data = {};\n    let children;\n    let text;\n    let i;\n    if (c !== undefined) {\n        if (b !== null) {\n            data = b;\n        }\n        if (is.array(c)) {\n            children = c;\n        }\n        else if (is.primitive(c)) {\n            text = c;\n        }\n        else if (c && c.sel) {\n            children = [c];\n        }\n    }\n    else if (b !== undefined && b !== null) {\n        if (is.array(b)) {\n            children = b;\n        }\n        else if (is.primitive(b)) {\n            text = b;\n        }\n        else if (b && b.sel) {\n            children = [b];\n        }\n        else {\n            data = b;\n        }\n    }\n    if (children !== undefined) {\n        for (i = 0; i < children.length; ++i) {\n            if (is.primitive(children[i]))\n                children[i] = vnode(undefined, undefined, undefined, children[i], undefined);\n        }\n    }\n    if (sel[0] === \"s\" &&\n        sel[1] === \"v\" &&\n        sel[2] === \"g\" &&\n        (sel.length === 3 || sel[3] === \".\" || sel[3] === \"#\")) {\n        addNS(data, children, sel);\n    }\n    return vnode(sel, data, children, text, undefined);\n}\n//# sourceMappingURL=h.js.map","import { h } from \"./h\";\nfunction copyToThunk(vnode, thunk) {\n    vnode.data.fn = thunk.data.fn;\n    vnode.data.args = thunk.data.args;\n    thunk.data = vnode.data;\n    thunk.children = vnode.children;\n    thunk.text = vnode.text;\n    thunk.elm = vnode.elm;\n}\nfunction init(thunk) {\n    const cur = thunk.data;\n    const vnode = cur.fn(...cur.args);\n    copyToThunk(vnode, thunk);\n}\nfunction prepatch(oldVnode, thunk) {\n    let i;\n    const old = oldVnode.data;\n    const cur = thunk.data;\n    const oldArgs = old.args;\n    const args = cur.args;\n    if (old.fn !== cur.fn || oldArgs.length !== args.length) {\n        copyToThunk(cur.fn(...args), thunk);\n        return;\n    }\n    for (i = 0; i < args.length; ++i) {\n        if (oldArgs[i] !== args[i]) {\n            copyToThunk(cur.fn(...args), thunk);\n            return;\n        }\n    }\n    copyToThunk(oldVnode, thunk);\n}\nexport const thunk = function thunk(sel, key, fn, args) {\n    if (args === undefined) {\n        args = fn;\n        fn = key;\n        key = undefined;\n    }\n    return h(sel, {\n        key: key,\n        hook: { init, prepatch },\n        fn: fn,\n        args: args,\n    });\n};\n//# sourceMappingURL=thunk.js.map","function pre(vnode, newVnode) {\n    const attachData = vnode.data.attachData;\n    // Copy created placeholder and real element from old vnode\n    newVnode.data.attachData.placeholder = attachData.placeholder;\n    newVnode.data.attachData.real = attachData.real;\n    // Mount real element in vnode so the patch process operates on it\n    vnode.elm = vnode.data.attachData.real;\n}\nfunction post(_, vnode) {\n    // Mount dummy placeholder in vnode so potential reorders use it\n    vnode.elm = vnode.data.attachData.placeholder;\n}\nfunction destroy(vnode) {\n    // Remove placeholder\n    if (vnode.elm !== undefined) {\n        vnode.elm.parentNode.removeChild(vnode.elm);\n    }\n    // Remove real element from where it was inserted\n    vnode.elm = vnode.data.attachData.real;\n}\nfunction create(_, vnode) {\n    const real = vnode.elm;\n    const attachData = vnode.data.attachData;\n    const placeholder = document.createElement(\"span\");\n    // Replace actual element with dummy placeholder\n    // Snabbdom will then insert placeholder instead\n    vnode.elm = placeholder;\n    attachData.target.appendChild(real);\n    attachData.real = real;\n    attachData.placeholder = placeholder;\n}\nexport function attachTo(target, vnode) {\n    if (vnode.data === undefined)\n        vnode.data = {};\n    if (vnode.data.hook === undefined)\n        vnode.data.hook = {};\n    const data = vnode.data;\n    const hook = vnode.data.hook;\n    data.attachData = { target: target, placeholder: undefined, real: undefined };\n    hook.create = create;\n    hook.prepatch = pre;\n    hook.postpatch = post;\n    hook.destroy = destroy;\n    return vnode;\n}\n//# sourceMappingURL=attachto.js.map","import { vnode } from \"./vnode\";\nimport { htmlDomApi } from \"./htmldomapi\";\nexport function toVNode(node, domApi) {\n    const api = domApi !== undefined ? domApi : htmlDomApi;\n    let text;\n    if (api.isElement(node)) {\n        const id = node.id ? \"#\" + node.id : \"\";\n        const cn = node.getAttribute(\"class\");\n        const c = cn ? \".\" + cn.split(\" \").join(\".\") : \"\";\n        const sel = api.tagName(node).toLowerCase() + id + c;\n        const attrs = {};\n        const children = [];\n        let name;\n        let i, n;\n        const elmAttrs = node.attributes;\n        const elmChildren = node.childNodes;\n        for (i = 0, n = elmAttrs.length; i < n; i++) {\n            name = elmAttrs[i].nodeName;\n            if (name !== \"id\" && name !== \"class\") {\n                attrs[name] = elmAttrs[i].nodeValue;\n            }\n        }\n        for (i = 0, n = elmChildren.length; i < n; i++) {\n            children.push(toVNode(elmChildren[i], domApi));\n        }\n        return vnode(sel, { attrs }, children, undefined, node);\n    }\n    else if (api.isText(node)) {\n        text = api.getTextContent(node);\n        return vnode(undefined, undefined, undefined, text, node);\n    }\n    else if (api.isComment(node)) {\n        text = api.getTextContent(node);\n        return vnode(\"!\", {}, [], text, node);\n    }\n    else {\n        return vnode(\"\", {}, [], undefined, node);\n    }\n}\n//# sourceMappingURL=tovnode.js.map","const xlinkNS = \"http://www.w3.org/1999/xlink\";\nconst xmlNS = \"http://www.w3.org/XML/1998/namespace\";\nconst colonChar = 58;\nconst xChar = 120;\nfunction updateAttrs(oldVnode, vnode) {\n    let key;\n    const elm = vnode.elm;\n    let oldAttrs = oldVnode.data.attrs;\n    let attrs = vnode.data.attrs;\n    if (!oldAttrs && !attrs)\n        return;\n    if (oldAttrs === attrs)\n        return;\n    oldAttrs = oldAttrs || {};\n    attrs = attrs || {};\n    // update modified attributes, add new attributes\n    for (key in attrs) {\n        const cur = attrs[key];\n        const old = oldAttrs[key];\n        if (old !== cur) {\n            if (cur === true) {\n                elm.setAttribute(key, \"\");\n            }\n            else if (cur === false) {\n                elm.removeAttribute(key);\n            }\n            else {\n                if (key.charCodeAt(0) !== xChar) {\n                    elm.setAttribute(key, cur);\n                }\n                else if (key.charCodeAt(3) === colonChar) {\n                    // Assume xml namespace\n                    elm.setAttributeNS(xmlNS, key, cur);\n                }\n                else if (key.charCodeAt(5) === colonChar) {\n                    // Assume xlink namespace\n                    elm.setAttributeNS(xlinkNS, key, cur);\n                }\n                else {\n                    elm.setAttribute(key, cur);\n                }\n            }\n        }\n    }\n    // remove removed attributes\n    // use `in` operator since the previous `for` iteration uses it (.i.e. add even attributes with undefined value)\n    // the other option is to remove all attributes with value == undefined\n    for (key in oldAttrs) {\n        if (!(key in attrs)) {\n            elm.removeAttribute(key);\n        }\n    }\n}\nexport const attributesModule = {\n    create: updateAttrs,\n    update: updateAttrs,\n};\n//# sourceMappingURL=attributes.js.map","function updateClass(oldVnode, vnode) {\n    let cur;\n    let name;\n    const elm = vnode.elm;\n    let oldClass = oldVnode.data.class;\n    let klass = vnode.data.class;\n    if (!oldClass && !klass)\n        return;\n    if (oldClass === klass)\n        return;\n    oldClass = oldClass || {};\n    klass = klass || {};\n    for (name in oldClass) {\n        if (oldClass[name] && !Object.prototype.hasOwnProperty.call(klass, name)) {\n            // was `true` and now not provided\n            elm.classList.remove(name);\n        }\n    }\n    for (name in klass) {\n        cur = klass[name];\n        if (cur !== oldClass[name]) {\n            elm.classList[cur ? \"add\" : \"remove\"](name);\n        }\n    }\n}\nexport const classModule = { create: updateClass, update: updateClass };\n//# sourceMappingURL=class.js.map","const CAPS_REGEX = /[A-Z]/g;\nfunction updateDataset(oldVnode, vnode) {\n    const elm = vnode.elm;\n    let oldDataset = oldVnode.data.dataset;\n    let dataset = vnode.data.dataset;\n    let key;\n    if (!oldDataset && !dataset)\n        return;\n    if (oldDataset === dataset)\n        return;\n    oldDataset = oldDataset || {};\n    dataset = dataset || {};\n    const d = elm.dataset;\n    for (key in oldDataset) {\n        if (!dataset[key]) {\n            if (d) {\n                if (key in d) {\n                    delete d[key];\n                }\n            }\n            else {\n                elm.removeAttribute(\"data-\" + key.replace(CAPS_REGEX, \"-$&\").toLowerCase());\n            }\n        }\n    }\n    for (key in dataset) {\n        if (oldDataset[key] !== dataset[key]) {\n            if (d) {\n                d[key] = dataset[key];\n            }\n            else {\n                elm.setAttribute(\"data-\" + key.replace(CAPS_REGEX, \"-$&\").toLowerCase(), dataset[key]);\n            }\n        }\n    }\n}\nexport const datasetModule = {\n    create: updateDataset,\n    update: updateDataset,\n};\n//# sourceMappingURL=dataset.js.map","function invokeHandler(handler, vnode, event) {\n    if (typeof handler === \"function\") {\n        // call function handler\n        handler.call(vnode, event, vnode);\n    }\n    else if (typeof handler === \"object\") {\n        // call multiple handlers\n        for (let i = 0; i < handler.length; i++) {\n            invokeHandler(handler[i], vnode, event);\n        }\n    }\n}\nfunction handleEvent(event, vnode) {\n    const name = event.type;\n    const on = vnode.data.on;\n    // call event handler(s) if exists\n    if (on && on[name]) {\n        invokeHandler(on[name], vnode, event);\n    }\n}\nfunction createListener() {\n    return function handler(event) {\n        handleEvent(event, handler.vnode);\n    };\n}\nfunction updateEventListeners(oldVnode, vnode) {\n    const oldOn = oldVnode.data.on;\n    const oldListener = oldVnode.listener;\n    const oldElm = oldVnode.elm;\n    const on = vnode && vnode.data.on;\n    const elm = (vnode && vnode.elm);\n    let name;\n    // optimization for reused immutable handlers\n    if (oldOn === on) {\n        return;\n    }\n    // remove existing listeners which no longer used\n    if (oldOn && oldListener) {\n        // if element changed or deleted we remove all existing listeners unconditionally\n        if (!on) {\n            for (name in oldOn) {\n                // remove listener if element was changed or existing listeners removed\n                oldElm.removeEventListener(name, oldListener, false);\n            }\n        }\n        else {\n            for (name in oldOn) {\n                // remove listener if existing listener removed\n                if (!on[name]) {\n                    oldElm.removeEventListener(name, oldListener, false);\n                }\n            }\n        }\n    }\n    // add new listeners which has not already attached\n    if (on) {\n        // reuse existing listener or create new\n        const listener = (vnode.listener =\n            oldVnode.listener || createListener());\n        // update vnode for listener\n        listener.vnode = vnode;\n        // if element changed or added we add all needed listeners unconditionally\n        if (!oldOn) {\n            for (name in on) {\n                // add listener if element was changed or new listeners added\n                elm.addEventListener(name, listener, false);\n            }\n        }\n        else {\n            for (name in on) {\n                // add listener if new listener added\n                if (!oldOn[name]) {\n                    elm.addEventListener(name, listener, false);\n                }\n            }\n        }\n    }\n}\nexport const eventListenersModule = {\n    create: updateEventListeners,\n    update: updateEventListeners,\n    destroy: updateEventListeners,\n};\n//# sourceMappingURL=eventlisteners.js.map","function updateProps(oldVnode, vnode) {\n    let key;\n    let cur;\n    let old;\n    const elm = vnode.elm;\n    let oldProps = oldVnode.data.props;\n    let props = vnode.data.props;\n    if (!oldProps && !props)\n        return;\n    if (oldProps === props)\n        return;\n    oldProps = oldProps || {};\n    props = props || {};\n    for (key in props) {\n        cur = props[key];\n        old = oldProps[key];\n        if (old !== cur && (key !== \"value\" || elm[key] !== cur)) {\n            elm[key] = cur;\n        }\n    }\n}\nexport const propsModule = { create: updateProps, update: updateProps };\n//# sourceMappingURL=props.js.map","// Bindig `requestAnimationFrame` like this fixes a bug in IE/Edge. See #360 and #409.\nconst raf = (typeof window !== \"undefined\" &&\n    window.requestAnimationFrame.bind(window)) ||\n    setTimeout;\nconst nextFrame = function (fn) {\n    raf(function () {\n        raf(fn);\n    });\n};\nlet reflowForced = false;\nfunction setNextFrame(obj, prop, val) {\n    nextFrame(function () {\n        obj[prop] = val;\n    });\n}\nfunction updateStyle(oldVnode, vnode) {\n    let cur;\n    let name;\n    const elm = vnode.elm;\n    let oldStyle = oldVnode.data.style;\n    let style = vnode.data.style;\n    if (!oldStyle && !style)\n        return;\n    if (oldStyle === style)\n        return;\n    oldStyle = oldStyle || {};\n    style = style || {};\n    const oldHasDel = \"delayed\" in oldStyle;\n    for (name in oldStyle) {\n        if (!style[name]) {\n            if (name[0] === \"-\" && name[1] === \"-\") {\n                elm.style.removeProperty(name);\n            }\n            else {\n                elm.style[name] = \"\";\n            }\n        }\n    }\n    for (name in style) {\n        cur = style[name];\n        if (name === \"delayed\" && style.delayed) {\n            for (const name2 in style.delayed) {\n                cur = style.delayed[name2];\n                if (!oldHasDel || cur !== oldStyle.delayed[name2]) {\n                    setNextFrame(elm.style, name2, cur);\n                }\n            }\n        }\n        else if (name !== \"remove\" && cur !== oldStyle[name]) {\n            if (name[0] === \"-\" && name[1] === \"-\") {\n                elm.style.setProperty(name, cur);\n            }\n            else {\n                elm.style[name] = cur;\n            }\n        }\n    }\n}\nfunction applyDestroyStyle(vnode) {\n    let style;\n    let name;\n    const elm = vnode.elm;\n    const s = vnode.data.style;\n    if (!s || !(style = s.destroy))\n        return;\n    for (name in style) {\n        elm.style[name] = style[name];\n    }\n}\nfunction applyRemoveStyle(vnode, rm) {\n    const s = vnode.data.style;\n    if (!s || !s.remove) {\n        rm();\n        return;\n    }\n    if (!reflowForced) {\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n        vnode.elm.offsetLeft;\n        reflowForced = true;\n    }\n    let name;\n    const elm = vnode.elm;\n    let i = 0;\n    const style = s.remove;\n    let amount = 0;\n    const applied = [];\n    for (name in style) {\n        applied.push(name);\n        elm.style[name] = style[name];\n    }\n    const compStyle = getComputedStyle(elm);\n    const props = compStyle[\"transition-property\"].split(\", \");\n    for (; i < props.length; ++i) {\n        if (applied.indexOf(props[i]) !== -1)\n            amount++;\n    }\n    elm.addEventListener(\"transitionend\", function (ev) {\n        if (ev.target === elm)\n            --amount;\n        if (amount === 0)\n            rm();\n    });\n}\nfunction forceReflow() {\n    reflowForced = false;\n}\nexport const styleModule = {\n    pre: forceReflow,\n    create: updateStyle,\n    update: updateStyle,\n    destroy: applyDestroyStyle,\n    remove: applyRemoveStyle,\n};\n//# sourceMappingURL=style.js.map","/* eslint-disable @typescript-eslint/no-namespace, import/export */\nimport { vnode } from \"./vnode\";\nimport { h } from \"./h\";\nfunction flattenAndFilter(children, flattened) {\n    for (const child of children) {\n        // filter out falsey children, except 0 since zero can be a valid value e.g inside a chart\n        if (child !== undefined &&\n            child !== null &&\n            child !== false &&\n            child !== \"\") {\n            if (Array.isArray(child)) {\n                flattenAndFilter(child, flattened);\n            }\n            else if (typeof child === \"string\" ||\n                typeof child === \"number\" ||\n                typeof child === \"boolean\") {\n                flattened.push(vnode(undefined, undefined, undefined, String(child), undefined));\n            }\n            else {\n                flattened.push(child);\n            }\n        }\n    }\n    return flattened;\n}\n/**\n * jsx/tsx compatible factory function\n * see: https://www.typescriptlang.org/docs/handbook/jsx.html#factory-functions\n */\nexport function jsx(tag, data, ...children) {\n    const flatChildren = flattenAndFilter(children, []);\n    if (typeof tag === \"function\") {\n        // tag is a function component\n        return tag(data, flatChildren);\n    }\n    else {\n        if (flatChildren.length === 1 &&\n            !flatChildren[0].sel &&\n            flatChildren[0].text) {\n            // only child is a simple text node, pass as text for a simpler vtree\n            return h(tag, data, flatChildren[0].text);\n        }\n        else {\n            return h(tag, data, flatChildren);\n        }\n    }\n}\n(function (jsx) {\n})(jsx || (jsx = {}));\n//# sourceMappingURL=jsx.js.map","\nexport default class TinyQueue {\n    constructor(data = [], compare = defaultCompare) {\n        this.data = data;\n        this.length = this.data.length;\n        this.compare = compare;\n\n        if (this.length > 0) {\n            for (let i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n        }\n    }\n\n    push(item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    }\n\n    pop() {\n        if (this.length === 0) return undefined;\n\n        const top = this.data[0];\n        const bottom = this.data.pop();\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = bottom;\n            this._down(0);\n        }\n\n        return top;\n    }\n\n    peek() {\n        return this.data[0];\n    }\n\n    _up(pos) {\n        const {data, compare} = this;\n        const item = data[pos];\n\n        while (pos > 0) {\n            const parent = (pos - 1) >> 1;\n            const current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    }\n\n    _down(pos) {\n        const {data, compare} = this;\n        const halfLength = this.length >> 1;\n        const item = data[pos];\n\n        while (pos < halfLength) {\n            let left = (pos << 1) + 1;\n            let best = data[left];\n            const right = left + 1;\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","module.exports = require(\"fs\");","module.exports = require(\"path\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\nvar initAvoidModule = (function() {\n  var _scriptDir = typeof document !== 'undefined' && document.currentScript ? document.currentScript.src : undefined;\n  if (typeof __filename !== 'undefined') _scriptDir = _scriptDir || __filename;\n  return (\nfunction(initAvoidModule) {\n  initAvoidModule = initAvoidModule || {};\n\n\nvar a;a||(a=typeof initAvoidModule !== 'undefined' ? initAvoidModule : {});var aa,ba;a.ready=new Promise(function(b,c){aa=b;ba=c});var ca={},k;for(k in a)a.hasOwnProperty(k)&&(ca[k]=a[k]);var ea=\"./this.program\",fa=!1,ha=!1,ja=!1,ka=!1;fa=\"object\"===typeof window;ha=\"function\"===typeof importScripts;ja=\"object\"===typeof process&&\"object\"===typeof process.versions&&\"string\"===typeof process.versions.node;ka=!fa&&!ja&&!ha;var l=\"\",la,ma,na,oa,pa;\nif(ja)l=ha?require(\"path\").dirname(l)+\"/\":__dirname+\"/\",la=function(b,c){oa||(oa=require(\"fs\"));pa||(pa=require(\"path\"));b=pa.normalize(b);return oa.readFileSync(b,c?null:\"utf8\")},na=function(b){b=la(b,!0);b.buffer||(b=new Uint8Array(b));assert(b.buffer);return b},1<process.argv.length&&(ea=process.argv[1].replace(/\\\\/g,\"/\")),process.argv.slice(2),process.on(\"uncaughtException\",function(b){throw b;}),process.on(\"unhandledRejection\",m),a.inspect=function(){return\"[Emscripten Module object]\"};else if(ka)\"undefined\"!=\ntypeof read&&(la=function(b){return read(b)}),na=function(b){if(\"function\"===typeof readbuffer)return new Uint8Array(readbuffer(b));b=read(b,\"binary\");assert(\"object\"===typeof b);return b},\"undefined\"!==typeof print&&(\"undefined\"===typeof console&&(console={}),console.log=print,console.warn=console.error=\"undefined\"!==typeof printErr?printErr:print);else if(fa||ha)ha?l=self.location.href:\"undefined\"!==typeof document&&document.currentScript&&(l=document.currentScript.src),_scriptDir&&(l=_scriptDir),\n0!==l.indexOf(\"blob:\")?l=l.substr(0,l.lastIndexOf(\"/\")+1):l=\"\",la=function(b){var c=new XMLHttpRequest;c.open(\"GET\",b,!1);c.send(null);return c.responseText},ha&&(na=function(b){var c=new XMLHttpRequest;c.open(\"GET\",b,!1);c.responseType=\"arraybuffer\";c.send(null);return new Uint8Array(c.response)}),ma=function(b,c,d){var e=new XMLHttpRequest;e.open(\"GET\",b,!0);e.responseType=\"arraybuffer\";e.onload=function(){200==e.status||0==e.status&&e.response?c(e.response):d()};e.onerror=d;e.send(null)};\nvar qa=a.print||console.log.bind(console),ra=a.printErr||console.warn.bind(console);for(k in ca)ca.hasOwnProperty(k)&&(a[k]=ca[k]);ca=null;a.thisProgram&&(ea=a.thisProgram);var sa=[],ta,ua;a.wasmBinary&&(ua=a.wasmBinary);var noExitRuntime=a.noExitRuntime||!0;\"object\"!==typeof WebAssembly&&m(\"no native wasm support detected\");var va,wa=!1;function assert(b,c){b||m(\"Assertion failed: \"+c)}var xa=\"undefined\"!==typeof TextDecoder?new TextDecoder(\"utf8\"):void 0;\nfunction ya(b,c,d){var e=c+d;for(d=c;b[d]&&!(d>=e);)++d;if(16<d-c&&b.subarray&&xa)return xa.decode(b.subarray(c,d));for(e=\"\";c<d;){var g=b[c++];if(g&128){var h=b[c++]&63;if(192==(g&224))e+=String.fromCharCode((g&31)<<6|h);else{var t=b[c++]&63;g=224==(g&240)?(g&15)<<12|h<<6|t:(g&7)<<18|h<<12|t<<6|b[c++]&63;65536>g?e+=String.fromCharCode(g):(g-=65536,e+=String.fromCharCode(55296|g>>10,56320|g&1023))}}else e+=String.fromCharCode(g)}return e}function za(b){return b?ya(Aa,b,void 0):\"\"}\nvar Ba,Aa,n,q,Ca=[],Da=[],Ea=[],Fa=[],Ga=!1;Da.push({Uc:function(){Ha()}});function Ia(){var b=a.preRun.shift();Ca.unshift(b)}var Ja=0,Ka=null,La=null;a.preloadedImages={};a.preloadedAudios={};function m(b){if(a.onAbort)a.onAbort(b);ra(b);wa=!0;b=new WebAssembly.RuntimeError(\"abort(\"+b+\"). Build with -s ASSERTIONS=1 for more info.\");ba(b);throw b;}function Ma(b){var c=r;return String.prototype.startsWith?c.startsWith(b):0===c.indexOf(b)}\nfunction Na(){return Ma(\"data:application/octet-stream;base64,\")}var r=\"libavoid.wasm\";if(!Na()){var Oa=r;r=a.locateFile?a.locateFile(Oa,l):l+Oa}function Pa(){var b=r;try{if(b==r&&ua)return new Uint8Array(ua);if(na)return na(b);throw\"both async and sync fetching of the wasm failed\";}catch(c){m(c)}}\nfunction Qa(){if(!ua&&(fa||ha)){if(\"function\"===typeof fetch&&!Ma(\"file://\"))return fetch(r,{credentials:\"same-origin\"}).then(function(b){if(!b.ok)throw\"failed to load wasm binary file at '\"+r+\"'\";return b.arrayBuffer()}).catch(function(){return Pa()});if(ma)return new Promise(function(b,c){ma(r,function(d){b(new Uint8Array(d))},c)})}return Promise.resolve().then(function(){return Pa()})}\nfunction Ra(b){for(;0<b.length;){var c=b.shift();if(\"function\"==typeof c)c(a);else{var d=c.Uc;\"number\"===typeof d?void 0===c.Pc?q.get(d)():q.get(d)(c.Pc):d(void 0===c.Pc?null:c.Pc)}}}\nfunction Sa(b){this.Gc=b-16;this.Rc=function(c){n[this.Gc+8>>2]=c};this.Tc=function(){return n[this.Gc+8>>2]};this.ud=function(c){n[this.Gc+0>>2]=c};this.Gd=function(){n[this.Gc+4>>2]=0};this.td=function(){Ba[this.Gc+12>>0]=0};this.Hd=function(){Ba[this.Gc+13>>0]=0};this.rd=function(c,d){this.Rc(c);this.ud(d);this.Gd();this.td();this.Hd()}}var Ta=0;function Ua(){void 0===Ua.start&&(Ua.start=Date.now());return 1E3*(Date.now()-Ua.start)|0}var Va={};\nfunction Wa(){if(!Xa){var b={USER:\"web_user\",LOGNAME:\"web_user\",PATH:\"/\",PWD:\"/\",HOME:\"/home/web_user\",LANG:(\"object\"===typeof navigator&&navigator.languages&&navigator.languages[0]||\"C\").replace(\"-\",\"_\")+\".UTF-8\",_:ea||\"./this.program\"},c;for(c in Va)b[c]=Va[c];var d=[];for(c in b)d.push(c+\"=\"+b[c]);Xa=d}return Xa}var Xa,Ya=[null,[],[]];function Za(b){return 0===b%4&&(0!==b%100||0===b%400)}function $a(b,c){for(var d=0,e=0;e<=c;d+=b[e++]);return d}\nvar ab=[31,29,31,30,31,30,31,31,30,31,30,31],bb=[31,28,31,30,31,30,31,31,30,31,30,31];function cb(b,c){for(b=new Date(b.getTime());0<c;){var d=b.getMonth(),e=(Za(b.getFullYear())?ab:bb)[d];if(c>e-b.getDate())c-=e-b.getDate()+1,b.setDate(1),11>d?b.setMonth(d+1):(b.setMonth(0),b.setFullYear(b.getFullYear()+1));else{b.setDate(b.getDate()+c);break}}return b}\nfunction db(b,c,d,e){function g(f,p,y){for(f=\"number\"===typeof f?f.toString():f||\"\";f.length<p;)f=y[0]+f;return f}function h(f,p){return g(f,p,\"0\")}function t(f,p){function y(eb){return 0>eb?-1:0<eb?1:0}var da;0===(da=y(f.getFullYear()-p.getFullYear()))&&0===(da=y(f.getMonth()-p.getMonth()))&&(da=y(f.getDate()-p.getDate()));return da}function F(f){switch(f.getDay()){case 0:return new Date(f.getFullYear()-1,11,29);case 1:return f;case 2:return new Date(f.getFullYear(),0,3);case 3:return new Date(f.getFullYear(),\n0,2);case 4:return new Date(f.getFullYear(),0,1);case 5:return new Date(f.getFullYear()-1,11,31);case 6:return new Date(f.getFullYear()-1,11,30)}}function ia(f){f=cb(new Date(f.Jc+1900,0,1),f.Oc);var p=new Date(f.getFullYear()+1,0,4),y=F(new Date(f.getFullYear(),0,4));p=F(p);return 0>=t(y,f)?0>=t(p,f)?f.getFullYear()+1:f.getFullYear():f.getFullYear()-1}var I=n[e+40>>2];e={Md:n[e>>2],Ld:n[e+4>>2],Mc:n[e+8>>2],Lc:n[e+12>>2],Kc:n[e+16>>2],Jc:n[e+20>>2],Nc:n[e+24>>2],Oc:n[e+28>>2],Od:n[e+32>>2],Kd:n[e+\n36>>2],Nd:I?za(I):\"\"};d=za(d);I={\"%c\":\"%a %b %d %H:%M:%S %Y\",\"%D\":\"%m/%d/%y\",\"%F\":\"%Y-%m-%d\",\"%h\":\"%b\",\"%r\":\"%I:%M:%S %p\",\"%R\":\"%H:%M\",\"%T\":\"%H:%M:%S\",\"%x\":\"%m/%d/%y\",\"%X\":\"%H:%M:%S\",\"%Ec\":\"%c\",\"%EC\":\"%C\",\"%Ex\":\"%m/%d/%y\",\"%EX\":\"%H:%M:%S\",\"%Ey\":\"%y\",\"%EY\":\"%Y\",\"%Od\":\"%d\",\"%Oe\":\"%e\",\"%OH\":\"%H\",\"%OI\":\"%I\",\"%Om\":\"%m\",\"%OM\":\"%M\",\"%OS\":\"%S\",\"%Ou\":\"%u\",\"%OU\":\"%U\",\"%OV\":\"%V\",\"%Ow\":\"%w\",\"%OW\":\"%W\",\"%Oy\":\"%y\"};for(var D in I)d=d.replace(new RegExp(D,\"g\"),I[D]);var fb=\"Sunday Monday Tuesday Wednesday Thursday Friday Saturday\".split(\" \"),\ngb=\"January February March April May June July August September October November December\".split(\" \");I={\"%a\":function(f){return fb[f.Nc].substring(0,3)},\"%A\":function(f){return fb[f.Nc]},\"%b\":function(f){return gb[f.Kc].substring(0,3)},\"%B\":function(f){return gb[f.Kc]},\"%C\":function(f){return h((f.Jc+1900)/100|0,2)},\"%d\":function(f){return h(f.Lc,2)},\"%e\":function(f){return g(f.Lc,2,\" \")},\"%g\":function(f){return ia(f).toString().substring(2)},\"%G\":function(f){return ia(f)},\"%H\":function(f){return h(f.Mc,\n2)},\"%I\":function(f){f=f.Mc;0==f?f=12:12<f&&(f-=12);return h(f,2)},\"%j\":function(f){return h(f.Lc+$a(Za(f.Jc+1900)?ab:bb,f.Kc-1),3)},\"%m\":function(f){return h(f.Kc+1,2)},\"%M\":function(f){return h(f.Ld,2)},\"%n\":function(){return\"\\n\"},\"%p\":function(f){return 0<=f.Mc&&12>f.Mc?\"AM\":\"PM\"},\"%S\":function(f){return h(f.Md,2)},\"%t\":function(){return\"\\t\"},\"%u\":function(f){return f.Nc||7},\"%U\":function(f){var p=new Date(f.Jc+1900,0,1),y=0===p.getDay()?p:cb(p,7-p.getDay());f=new Date(f.Jc+1900,f.Kc,f.Lc);return 0>\nt(y,f)?h(Math.ceil((31-y.getDate()+($a(Za(f.getFullYear())?ab:bb,f.getMonth()-1)-31)+f.getDate())/7),2):0===t(y,p)?\"01\":\"00\"},\"%V\":function(f){var p=new Date(f.Jc+1901,0,4),y=F(new Date(f.Jc+1900,0,4));p=F(p);var da=cb(new Date(f.Jc+1900,0,1),f.Oc);return 0>t(da,y)?\"53\":0>=t(p,da)?\"01\":h(Math.ceil((y.getFullYear()<f.Jc+1900?f.Oc+32-y.getDate():f.Oc+1-y.getDate())/7),2)},\"%w\":function(f){return f.Nc},\"%W\":function(f){var p=new Date(f.Jc,0,1),y=1===p.getDay()?p:cb(p,0===p.getDay()?1:7-p.getDay()+1);\nf=new Date(f.Jc+1900,f.Kc,f.Lc);return 0>t(y,f)?h(Math.ceil((31-y.getDate()+($a(Za(f.getFullYear())?ab:bb,f.getMonth()-1)-31)+f.getDate())/7),2):0===t(y,p)?\"01\":\"00\"},\"%y\":function(f){return(f.Jc+1900).toString().substring(2)},\"%Y\":function(f){return f.Jc+1900},\"%z\":function(f){f=f.Kd;var p=0<=f;f=Math.abs(f)/60;return(p?\"+\":\"-\")+String(\"0000\"+(f/60*100+f%60)).slice(-4)},\"%Z\":function(f){return f.Nd},\"%%\":function(){return\"%\"}};for(D in I)0<=d.indexOf(D)&&(d=d.replace(new RegExp(D,\"g\"),I[D](e)));\nD=hb(d);if(D.length>c)return 0;Ba.set(D,b);return D.length-1}\nfunction hb(b){for(var c=0,d=0;d<b.length;++d){var e=b.charCodeAt(d);55296<=e&&57343>=e&&(e=65536+((e&1023)<<10)|b.charCodeAt(++d)&1023);127>=e?++c:c=2047>=e?c+2:65535>=e?c+3:c+4}c=Array(c+1);e=c.length;d=0;if(0<e){e=d+e-1;for(var g=0;g<b.length;++g){var h=b.charCodeAt(g);if(55296<=h&&57343>=h){var t=b.charCodeAt(++g);h=65536+((h&1023)<<10)|t&1023}if(127>=h){if(d>=e)break;c[d++]=h}else{if(2047>=h){if(d+1>=e)break;c[d++]=192|h>>6}else{if(65535>=h){if(d+2>=e)break;c[d++]=224|h>>12}else{if(d+3>=e)break;\nc[d++]=240|h>>18;c[d++]=128|h>>12&63}c[d++]=128|h>>6&63}c[d++]=128|h&63}}c[d]=0}return c}\nvar jb={a:function(b,c,d,e){m(\"Assertion failed: \"+za(b)+\", at: \"+[c?za(c):\"unknown filename\",d,e?za(e):\"unknown function\"])},e:function(b){return ib(b+16)+16},d:function(b,c,d){(new Sa(b)).rd(c,d);Ta++;throw b;},b:function(){m()},c:Ua,l:function(b,c,d){Aa.copyWithin(b,c,c+d)},m:function(){m(\"OOM\")},h:function(b,c){var d=0;Wa().forEach(function(e,g){var h=c+d;g=n[b+4*g>>2]=h;for(h=0;h<e.length;++h)Ba[g++>>0]=e.charCodeAt(h);Ba[g>>0]=0;d+=e.length+1});return 0},i:function(b,c){var d=Wa();n[b>>2]=d.length;\nvar e=0;d.forEach(function(g){e+=g.length+1});n[c>>2]=e;return 0},j:function(){return 0},k:function(){},f:function(b,c,d,e){for(var g=0,h=0;h<d;h++){for(var t=n[c+8*h>>2],F=n[c+(8*h+4)>>2],ia=0;ia<F;ia++){var I=Aa[t+ia],D=Ya[b];0===I||10===I?((1===b?qa:ra)(ya(D,0)),D.length=0):D.push(I)}g+=F}n[e>>2]=g;return 0},g:function(b,c,d,e){return db(b,c,d,e)}};\n(function(){function b(g){a.asm=g.exports;va=a.asm.n;g=va.buffer;a.HEAP8=Ba=new Int8Array(g);a.HEAP16=new Int16Array(g);a.HEAP32=n=new Int32Array(g);a.HEAPU8=Aa=new Uint8Array(g);a.HEAPU16=new Uint16Array(g);a.HEAPU32=new Uint32Array(g);a.HEAPF32=new Float32Array(g);a.HEAPF64=new Float64Array(g);q=a.asm.p;Ja--;a.monitorRunDependencies&&a.monitorRunDependencies(Ja);0==Ja&&(null!==Ka&&(clearInterval(Ka),Ka=null),La&&(g=La,La=null,g()))}function c(g){b(g.instance)}function d(g){return Qa().then(function(h){return WebAssembly.instantiate(h,\ne)}).then(g,function(h){ra(\"failed to asynchronously prepare wasm: \"+h);m(h)})}var e={a:jb};Ja++;a.monitorRunDependencies&&a.monitorRunDependencies(Ja);if(a.instantiateWasm)try{return a.instantiateWasm(e,b)}catch(g){return ra(\"Module.instantiateWasm callback failed with error: \"+g),!1}(function(){return ua||\"function\"!==typeof WebAssembly.instantiateStreaming||Na()||Ma(\"file://\")||\"function\"!==typeof fetch?d(c):fetch(r,{credentials:\"same-origin\"}).then(function(g){return WebAssembly.instantiateStreaming(g,\ne).then(c,function(h){ra(\"wasm streaming compile failed: \"+h);ra(\"falling back to ArrayBuffer instantiation\");return d(c)})})})().catch(ba);return{}})();var Ha=a.___wasm_call_ctors=function(){return(Ha=a.___wasm_call_ctors=a.asm.o).apply(null,arguments)},ib=a._malloc=function(){return(ib=a._malloc=a.asm.q).apply(null,arguments)};a._free=function(){return(a._free=a.asm.r).apply(null,arguments)};\nvar kb=a._emscripten_bind_VoidPtr___destroy___0=function(){return(kb=a._emscripten_bind_VoidPtr___destroy___0=a.asm.s).apply(null,arguments)},lb=a._emscripten_bind_HyperedgeImprover_HyperedgeImprover_0=function(){return(lb=a._emscripten_bind_HyperedgeImprover_HyperedgeImprover_0=a.asm.t).apply(null,arguments)},mb=a._emscripten_bind_HyperedgeImprover_clear_0=function(){return(mb=a._emscripten_bind_HyperedgeImprover_clear_0=a.asm.u).apply(null,arguments)},nb=a._emscripten_bind_HyperedgeImprover_setRouter_1=\nfunction(){return(nb=a._emscripten_bind_HyperedgeImprover_setRouter_1=a.asm.v).apply(null,arguments)},ob=a._emscripten_bind_HyperedgeImprover___destroy___0=function(){return(ob=a._emscripten_bind_HyperedgeImprover___destroy___0=a.asm.w).apply(null,arguments)},pb=a._emscripten_bind_Box_Box_0=function(){return(pb=a._emscripten_bind_Box_Box_0=a.asm.x).apply(null,arguments)},qb=a._emscripten_bind_Box_length_1=function(){return(qb=a._emscripten_bind_Box_length_1=a.asm.y).apply(null,arguments)},rb=a._emscripten_bind_Box_width_0=\nfunction(){return(rb=a._emscripten_bind_Box_width_0=a.asm.z).apply(null,arguments)},sb=a._emscripten_bind_Box_height_0=function(){return(sb=a._emscripten_bind_Box_height_0=a.asm.A).apply(null,arguments)},tb=a._emscripten_bind_Box_get_min_0=function(){return(tb=a._emscripten_bind_Box_get_min_0=a.asm.B).apply(null,arguments)},ub=a._emscripten_bind_Box_set_min_1=function(){return(ub=a._emscripten_bind_Box_set_min_1=a.asm.C).apply(null,arguments)},vb=a._emscripten_bind_Box_get_max_0=function(){return(vb=\na._emscripten_bind_Box_get_max_0=a.asm.D).apply(null,arguments)},wb=a._emscripten_bind_Box_set_max_1=function(){return(wb=a._emscripten_bind_Box_set_max_1=a.asm.E).apply(null,arguments)},xb=a._emscripten_bind_Box___destroy___0=function(){return(xb=a._emscripten_bind_Box___destroy___0=a.asm.F).apply(null,arguments)},yb=a._emscripten_bind_PolygonInterface_clear_0=function(){return(yb=a._emscripten_bind_PolygonInterface_clear_0=a.asm.G).apply(null,arguments)},zb=a._emscripten_bind_PolygonInterface_empty_0=\nfunction(){return(zb=a._emscripten_bind_PolygonInterface_empty_0=a.asm.H).apply(null,arguments)},Ab=a._emscripten_bind_PolygonInterface_size_0=function(){return(Ab=a._emscripten_bind_PolygonInterface_size_0=a.asm.I).apply(null,arguments)},Bb=a._emscripten_bind_PolygonInterface_id_0=function(){return(Bb=a._emscripten_bind_PolygonInterface_id_0=a.asm.J).apply(null,arguments)},Cb=a._emscripten_bind_PolygonInterface_at_1=function(){return(Cb=a._emscripten_bind_PolygonInterface_at_1=a.asm.K).apply(null,\narguments)},Db=a._emscripten_bind_PolygonInterface_boundingRectPolygon_0=function(){return(Db=a._emscripten_bind_PolygonInterface_boundingRectPolygon_0=a.asm.L).apply(null,arguments)},Eb=a._emscripten_bind_PolygonInterface_offsetBoundingBox_1=function(){return(Eb=a._emscripten_bind_PolygonInterface_offsetBoundingBox_1=a.asm.M).apply(null,arguments)},Fb=a._emscripten_bind_PolygonInterface_offsetPolygon_1=function(){return(Fb=a._emscripten_bind_PolygonInterface_offsetPolygon_1=a.asm.N).apply(null,arguments)},\nGb=a._emscripten_bind_PolygonInterface___destroy___0=function(){return(Gb=a._emscripten_bind_PolygonInterface___destroy___0=a.asm.O).apply(null,arguments)},Hb=a._emscripten_bind_Polygon_Polygon_0=function(){return(Hb=a._emscripten_bind_Polygon_Polygon_0=a.asm.P).apply(null,arguments)},Ib=a._emscripten_bind_Polygon_Polygon_1=function(){return(Ib=a._emscripten_bind_Polygon_Polygon_1=a.asm.Q).apply(null,arguments)},Jb=a._emscripten_bind_Polygon_setPoint_2=function(){return(Jb=a._emscripten_bind_Polygon_setPoint_2=\na.asm.R).apply(null,arguments)},Kb=a._emscripten_bind_Polygon_size_0=function(){return(Kb=a._emscripten_bind_Polygon_size_0=a.asm.S).apply(null,arguments)},Lb=a._emscripten_bind_Polygon_get_ps_1=function(){return(Lb=a._emscripten_bind_Polygon_get_ps_1=a.asm.T).apply(null,arguments)},Mb=a._emscripten_bind_Polygon_set_ps_2=function(){return(Mb=a._emscripten_bind_Polygon_set_ps_2=a.asm.U).apply(null,arguments)},Nb=a._emscripten_bind_Polygon___destroy___0=function(){return(Nb=a._emscripten_bind_Polygon___destroy___0=\na.asm.V).apply(null,arguments)},Ob=a._emscripten_bind_Point_Point_0=function(){return(Ob=a._emscripten_bind_Point_Point_0=a.asm.W).apply(null,arguments)},Pb=a._emscripten_bind_Point_Point_2=function(){return(Pb=a._emscripten_bind_Point_Point_2=a.asm.X).apply(null,arguments)},Qb=a._emscripten_bind_Point_equal_1=function(){return(Qb=a._emscripten_bind_Point_equal_1=a.asm.Y).apply(null,arguments)},Rb=a._emscripten_bind_Point_get_x_0=function(){return(Rb=a._emscripten_bind_Point_get_x_0=a.asm.Z).apply(null,\narguments)},Sb=a._emscripten_bind_Point_set_x_1=function(){return(Sb=a._emscripten_bind_Point_set_x_1=a.asm._).apply(null,arguments)},Tb=a._emscripten_bind_Point_get_y_0=function(){return(Tb=a._emscripten_bind_Point_get_y_0=a.asm.$).apply(null,arguments)},Ub=a._emscripten_bind_Point_set_y_1=function(){return(Ub=a._emscripten_bind_Point_set_y_1=a.asm.aa).apply(null,arguments)},Vb=a._emscripten_bind_Point_get_id_0=function(){return(Vb=a._emscripten_bind_Point_get_id_0=a.asm.ba).apply(null,arguments)},\nWb=a._emscripten_bind_Point_set_id_1=function(){return(Wb=a._emscripten_bind_Point_set_id_1=a.asm.ca).apply(null,arguments)},Xb=a._emscripten_bind_Point_get_vn_0=function(){return(Xb=a._emscripten_bind_Point_get_vn_0=a.asm.da).apply(null,arguments)},Yb=a._emscripten_bind_Point_set_vn_1=function(){return(Yb=a._emscripten_bind_Point_set_vn_1=a.asm.ea).apply(null,arguments)},Zb=a._emscripten_bind_Point___destroy___0=function(){return(Zb=a._emscripten_bind_Point___destroy___0=a.asm.fa).apply(null,arguments)},\n$b=a._emscripten_bind_Rectangle_Rectangle_3=function(){return($b=a._emscripten_bind_Rectangle_Rectangle_3=a.asm.ga).apply(null,arguments)},ac=a._emscripten_bind_Rectangle___destroy___0=function(){return(ac=a._emscripten_bind_Rectangle___destroy___0=a.asm.ha).apply(null,arguments)},bc=a._emscripten_bind_HyperedgeTreeNode_HyperedgeTreeNode_0=function(){return(bc=a._emscripten_bind_HyperedgeTreeNode_HyperedgeTreeNode_0=a.asm.ia).apply(null,arguments)},cc=a._emscripten_bind_HyperedgeTreeNode_writeEdgesToConns_2=\nfunction(){return(cc=a._emscripten_bind_HyperedgeTreeNode_writeEdgesToConns_2=a.asm.ja).apply(null,arguments)},dc=a._emscripten_bind_HyperedgeTreeNode___destroy___0=function(){return(dc=a._emscripten_bind_HyperedgeTreeNode___destroy___0=a.asm.ka).apply(null,arguments)},ec=a._emscripten_bind_HyperedgeTreeEdge_HyperedgeTreeEdge_3=function(){return(ec=a._emscripten_bind_HyperedgeTreeEdge_HyperedgeTreeEdge_3=a.asm.la).apply(null,arguments)},fc=a._emscripten_bind_HyperedgeTreeEdge___destroy___0=function(){return(fc=\na._emscripten_bind_HyperedgeTreeEdge___destroy___0=a.asm.ma).apply(null,arguments)},hc=a._emscripten_bind_AStarPath_AStarPath_0=function(){return(hc=a._emscripten_bind_AStarPath_AStarPath_0=a.asm.na).apply(null,arguments)},ic=a._emscripten_bind_AStarPath_search_4=function(){return(ic=a._emscripten_bind_AStarPath_search_4=a.asm.oa).apply(null,arguments)},jc=a._emscripten_bind_AStarPath___destroy___0=function(){return(jc=a._emscripten_bind_AStarPath___destroy___0=a.asm.pa).apply(null,arguments)},kc=\na._emscripten_bind_ConnEnd_ConnEnd_1=function(){return(kc=a._emscripten_bind_ConnEnd_ConnEnd_1=a.asm.qa).apply(null,arguments)},lc=a._emscripten_bind_ConnEnd_ConnEnd_2=function(){return(lc=a._emscripten_bind_ConnEnd_ConnEnd_2=a.asm.ra).apply(null,arguments)},mc=a._emscripten_bind_ConnEnd___destroy___0=function(){return(mc=a._emscripten_bind_ConnEnd___destroy___0=a.asm.sa).apply(null,arguments)},nc=a._emscripten_bind_ActionInfo_ActionInfo_2=function(){return(nc=a._emscripten_bind_ActionInfo_ActionInfo_2=\na.asm.ta).apply(null,arguments)},oc=a._emscripten_bind_ActionInfo_ActionInfo_3=function(){return(oc=a._emscripten_bind_ActionInfo_ActionInfo_3=a.asm.ua).apply(null,arguments)},pc=a._emscripten_bind_ActionInfo_ActionInfo_4=function(){return(pc=a._emscripten_bind_ActionInfo_ActionInfo_4=a.asm.va).apply(null,arguments)},qc=a._emscripten_bind_ActionInfo_obstacle_0=function(){return(qc=a._emscripten_bind_ActionInfo_obstacle_0=a.asm.wa).apply(null,arguments)},rc=a._emscripten_bind_ActionInfo_shape_0=function(){return(rc=\na._emscripten_bind_ActionInfo_shape_0=a.asm.xa).apply(null,arguments)},sc=a._emscripten_bind_ActionInfo_conn_0=function(){return(sc=a._emscripten_bind_ActionInfo_conn_0=a.asm.ya).apply(null,arguments)},tc=a._emscripten_bind_ActionInfo_junction_0=function(){return(tc=a._emscripten_bind_ActionInfo_junction_0=a.asm.za).apply(null,arguments)},uc=a._emscripten_bind_ActionInfo_addConnEndUpdate_3=function(){return(uc=a._emscripten_bind_ActionInfo_addConnEndUpdate_3=a.asm.Aa).apply(null,arguments)},vc=a._emscripten_bind_ActionInfo_get_type_0=\nfunction(){return(vc=a._emscripten_bind_ActionInfo_get_type_0=a.asm.Ba).apply(null,arguments)},wc=a._emscripten_bind_ActionInfo_set_type_1=function(){return(wc=a._emscripten_bind_ActionInfo_set_type_1=a.asm.Ca).apply(null,arguments)},xc=a._emscripten_bind_ActionInfo_get_objPtr_0=function(){return(xc=a._emscripten_bind_ActionInfo_get_objPtr_0=a.asm.Da).apply(null,arguments)},yc=a._emscripten_bind_ActionInfo_set_objPtr_1=function(){return(yc=a._emscripten_bind_ActionInfo_set_objPtr_1=a.asm.Ea).apply(null,\narguments)},zc=a._emscripten_bind_ActionInfo_get_newPoly_0=function(){return(zc=a._emscripten_bind_ActionInfo_get_newPoly_0=a.asm.Fa).apply(null,arguments)},Ac=a._emscripten_bind_ActionInfo_set_newPoly_1=function(){return(Ac=a._emscripten_bind_ActionInfo_set_newPoly_1=a.asm.Ga).apply(null,arguments)},Bc=a._emscripten_bind_ActionInfo_get_newPosition_0=function(){return(Bc=a._emscripten_bind_ActionInfo_get_newPosition_0=a.asm.Ha).apply(null,arguments)},Cc=a._emscripten_bind_ActionInfo_set_newPosition_1=\nfunction(){return(Cc=a._emscripten_bind_ActionInfo_set_newPosition_1=a.asm.Ia).apply(null,arguments)},Dc=a._emscripten_bind_ActionInfo_get_firstMove_0=function(){return(Dc=a._emscripten_bind_ActionInfo_get_firstMove_0=a.asm.Ja).apply(null,arguments)},Ec=a._emscripten_bind_ActionInfo_set_firstMove_1=function(){return(Ec=a._emscripten_bind_ActionInfo_set_firstMove_1=a.asm.Ka).apply(null,arguments)},Fc=a._emscripten_bind_ActionInfo___destroy___0=function(){return(Fc=a._emscripten_bind_ActionInfo___destroy___0=\na.asm.La).apply(null,arguments)},Gc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_2=function(){return(Gc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_2=a.asm.Ma).apply(null,arguments)},Hc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_3=function(){return(Hc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_3=a.asm.Na).apply(null,arguments)},Ic=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_6=function(){return(Ic=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_6=\na.asm.Oa).apply(null,arguments)},Jc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_7=function(){return(Jc=a._emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_7=a.asm.Pa).apply(null,arguments)},Kc=a._emscripten_bind_ShapeConnectionPin_setConnectionCost_1=function(){return(Kc=a._emscripten_bind_ShapeConnectionPin_setConnectionCost_1=a.asm.Qa).apply(null,arguments)},Lc=a._emscripten_bind_ShapeConnectionPin_position_0=function(){return(Lc=a._emscripten_bind_ShapeConnectionPin_position_0=\na.asm.Ra).apply(null,arguments)},Mc=a._emscripten_bind_ShapeConnectionPin_position_1=function(){return(Mc=a._emscripten_bind_ShapeConnectionPin_position_1=a.asm.Sa).apply(null,arguments)},Nc=a._emscripten_bind_ShapeConnectionPin_directions_0=function(){return(Nc=a._emscripten_bind_ShapeConnectionPin_directions_0=a.asm.Ta).apply(null,arguments)},Oc=a._emscripten_bind_ShapeConnectionPin_setExclusive_1=function(){return(Oc=a._emscripten_bind_ShapeConnectionPin_setExclusive_1=a.asm.Ua).apply(null,arguments)},\nPc=a._emscripten_bind_ShapeConnectionPin_isExclusive_0=function(){return(Pc=a._emscripten_bind_ShapeConnectionPin_isExclusive_0=a.asm.Va).apply(null,arguments)},Qc=a._emscripten_bind_ShapeConnectionPin___destroy___0=function(){return(Qc=a._emscripten_bind_ShapeConnectionPin___destroy___0=a.asm.Wa).apply(null,arguments)},Rc=a._emscripten_bind_Obstacle_id_0=function(){return(Rc=a._emscripten_bind_Obstacle_id_0=a.asm.Xa).apply(null,arguments)},Sc=a._emscripten_bind_Obstacle_polygon_0=function(){return(Sc=\na._emscripten_bind_Obstacle_polygon_0=a.asm.Ya).apply(null,arguments)},Tc=a._emscripten_bind_Obstacle_router_0=function(){return(Tc=a._emscripten_bind_Obstacle_router_0=a.asm.Za).apply(null,arguments)},Uc=a._emscripten_bind_Obstacle_position_0=function(){return(Uc=a._emscripten_bind_Obstacle_position_0=a.asm._a).apply(null,arguments)},Vc=a._emscripten_bind_Obstacle___destroy___0=function(){return(Vc=a._emscripten_bind_Obstacle___destroy___0=a.asm.$a).apply(null,arguments)},Wc=a._emscripten_bind_JunctionRef_JunctionRef_2=\nfunction(){return(Wc=a._emscripten_bind_JunctionRef_JunctionRef_2=a.asm.ab).apply(null,arguments)},Xc=a._emscripten_bind_JunctionRef_JunctionRef_3=function(){return(Xc=a._emscripten_bind_JunctionRef_JunctionRef_3=a.asm.bb).apply(null,arguments)},Yc=a._emscripten_bind_JunctionRef_position_0=function(){return(Yc=a._emscripten_bind_JunctionRef_position_0=a.asm.cb).apply(null,arguments)},Zc=a._emscripten_bind_JunctionRef___destroy___0=function(){return(Zc=a._emscripten_bind_JunctionRef___destroy___0=\na.asm.db).apply(null,arguments)},$c=a._emscripten_bind_ShapeRef_ShapeRef_2=function(){return($c=a._emscripten_bind_ShapeRef_ShapeRef_2=a.asm.eb).apply(null,arguments)},ad=a._emscripten_bind_ShapeRef_ShapeRef_3=function(){return(ad=a._emscripten_bind_ShapeRef_ShapeRef_3=a.asm.fb).apply(null,arguments)},bd=a._emscripten_bind_ShapeRef_polygon_0=function(){return(bd=a._emscripten_bind_ShapeRef_polygon_0=a.asm.gb).apply(null,arguments)},cd=a._emscripten_bind_ShapeRef_position_0=function(){return(cd=a._emscripten_bind_ShapeRef_position_0=\na.asm.hb).apply(null,arguments)},dd=a._emscripten_bind_ShapeRef___destroy___0=function(){return(dd=a._emscripten_bind_ShapeRef___destroy___0=a.asm.ib).apply(null,arguments)},ed=a._emscripten_bind_HyperedgeNewAndDeletedObjectLists___destroy___0=function(){return(ed=a._emscripten_bind_HyperedgeNewAndDeletedObjectLists___destroy___0=a.asm.jb).apply(null,arguments)},fd=a._emscripten_bind_HyperedgeRerouter_HyperedgeRerouter_0=function(){return(fd=a._emscripten_bind_HyperedgeRerouter_HyperedgeRerouter_0=\na.asm.kb).apply(null,arguments)},gd=a._emscripten_bind_HyperedgeRerouter_registerHyperedgeForRerouting_1=function(){return(gd=a._emscripten_bind_HyperedgeRerouter_registerHyperedgeForRerouting_1=a.asm.lb).apply(null,arguments)},hd=a._emscripten_bind_HyperedgeRerouter___destroy___0=function(){return(hd=a._emscripten_bind_HyperedgeRerouter___destroy___0=a.asm.mb).apply(null,arguments)},id=a._emscripten_bind_VertInf___destroy___0=function(){return(id=a._emscripten_bind_VertInf___destroy___0=a.asm.nb).apply(null,\narguments)},jd=a._emscripten_bind_VertID_VertID_0=function(){return(jd=a._emscripten_bind_VertID_VertID_0=a.asm.ob).apply(null,arguments)},kd=a._emscripten_bind_VertID_VertID_2=function(){return(kd=a._emscripten_bind_VertID_VertID_2=a.asm.pb).apply(null,arguments)},ld=a._emscripten_bind_VertID_VertID_3=function(){return(ld=a._emscripten_bind_VertID_VertID_3=a.asm.qb).apply(null,arguments)},md=a._emscripten_bind_VertID_get_objID_0=function(){return(md=a._emscripten_bind_VertID_get_objID_0=a.asm.rb).apply(null,\narguments)},nd=a._emscripten_bind_VertID_set_objID_1=function(){return(nd=a._emscripten_bind_VertID_set_objID_1=a.asm.sb).apply(null,arguments)},od=a._emscripten_bind_VertID_get_vn_0=function(){return(od=a._emscripten_bind_VertID_get_vn_0=a.asm.tb).apply(null,arguments)},pd=a._emscripten_bind_VertID_set_vn_1=function(){return(pd=a._emscripten_bind_VertID_set_vn_1=a.asm.ub).apply(null,arguments)},qd=a._emscripten_bind_VertID_get_props_0=function(){return(qd=a._emscripten_bind_VertID_get_props_0=a.asm.vb).apply(null,\narguments)},rd=a._emscripten_bind_VertID_set_props_1=function(){return(rd=a._emscripten_bind_VertID_set_props_1=a.asm.wb).apply(null,arguments)},sd=a._emscripten_bind_VertID_get_src_0=function(){return(sd=a._emscripten_bind_VertID_get_src_0=a.asm.xb).apply(null,arguments)},td=a._emscripten_bind_VertID_get_tar_0=function(){return(td=a._emscripten_bind_VertID_get_tar_0=a.asm.yb).apply(null,arguments)},ud=a._emscripten_bind_VertID_get_PROP_ConnPoint_0=function(){return(ud=a._emscripten_bind_VertID_get_PROP_ConnPoint_0=\na.asm.zb).apply(null,arguments)},vd=a._emscripten_bind_VertID_get_PROP_OrthShapeEdge_0=function(){return(vd=a._emscripten_bind_VertID_get_PROP_OrthShapeEdge_0=a.asm.Ab).apply(null,arguments)},wd=a._emscripten_bind_VertID_get_PROP_ConnectionPin_0=function(){return(wd=a._emscripten_bind_VertID_get_PROP_ConnectionPin_0=a.asm.Bb).apply(null,arguments)},xd=a._emscripten_bind_VertID_get_PROP_ConnCheckpoint_0=function(){return(xd=a._emscripten_bind_VertID_get_PROP_ConnCheckpoint_0=a.asm.Cb).apply(null,arguments)},\nyd=a._emscripten_bind_VertID_get_PROP_DummyPinHelper_0=function(){return(yd=a._emscripten_bind_VertID_get_PROP_DummyPinHelper_0=a.asm.Db).apply(null,arguments)},zd=a._emscripten_bind_VertID___destroy___0=function(){return(zd=a._emscripten_bind_VertID___destroy___0=a.asm.Eb).apply(null,arguments)},Ad=a._emscripten_bind_MinimumTerminalSpanningTree___destroy___0=function(){return(Ad=a._emscripten_bind_MinimumTerminalSpanningTree___destroy___0=a.asm.Fb).apply(null,arguments)},Bd=a._emscripten_bind_Checkpoint_Checkpoint_1=\nfunction(){return(Bd=a._emscripten_bind_Checkpoint_Checkpoint_1=a.asm.Gb).apply(null,arguments)},Cd=a._emscripten_bind_Checkpoint___destroy___0=function(){return(Cd=a._emscripten_bind_Checkpoint___destroy___0=a.asm.Hb).apply(null,arguments)},Dd=a._emscripten_bind_ConnRef_ConnRef_3=function(){return(Dd=a._emscripten_bind_ConnRef_ConnRef_3=a.asm.Ib).apply(null,arguments)},Ed=a._emscripten_bind_ConnRef_ConnRef_4=function(){return(Ed=a._emscripten_bind_ConnRef_ConnRef_4=a.asm.Jb).apply(null,arguments)},\nFd=a._emscripten_bind_ConnRef_id_0=function(){return(Fd=a._emscripten_bind_ConnRef_id_0=a.asm.Kb).apply(null,arguments)},Gd=a._emscripten_bind_ConnRef_setCallback_2=function(){return(Gd=a._emscripten_bind_ConnRef_setCallback_2=a.asm.Lb).apply(null,arguments)},Hd=a._emscripten_bind_ConnRef_setSourceEndpoint_1=function(){return(Hd=a._emscripten_bind_ConnRef_setSourceEndpoint_1=a.asm.Mb).apply(null,arguments)},Id=a._emscripten_bind_ConnRef_setDestEndpoint_1=function(){return(Id=a._emscripten_bind_ConnRef_setDestEndpoint_1=\na.asm.Nb).apply(null,arguments)},Jd=a._emscripten_bind_ConnRef_routingType_0=function(){return(Jd=a._emscripten_bind_ConnRef_routingType_0=a.asm.Ob).apply(null,arguments)},Kd=a._emscripten_bind_ConnRef_setRoutingType_1=function(){return(Kd=a._emscripten_bind_ConnRef_setRoutingType_1=a.asm.Pb).apply(null,arguments)},Ld=a._emscripten_bind_ConnRef_displayRoute_0=function(){return(Ld=a._emscripten_bind_ConnRef_displayRoute_0=a.asm.Qb).apply(null,arguments)},Md=a._emscripten_bind_ConnRef___destroy___0=\nfunction(){return(Md=a._emscripten_bind_ConnRef___destroy___0=a.asm.Rb).apply(null,arguments)},Nd=a._emscripten_bind_EdgeInf_EdgeInf_2=function(){return(Nd=a._emscripten_bind_EdgeInf_EdgeInf_2=a.asm.Sb).apply(null,arguments)},Od=a._emscripten_bind_EdgeInf_EdgeInf_3=function(){return(Od=a._emscripten_bind_EdgeInf_EdgeInf_3=a.asm.Tb).apply(null,arguments)},Pd=a._emscripten_bind_EdgeInf___destroy___0=function(){return(Pd=a._emscripten_bind_EdgeInf___destroy___0=a.asm.Ub).apply(null,arguments)},Qd=a._emscripten_bind_LineRep_get_begin_0=\nfunction(){return(Qd=a._emscripten_bind_LineRep_get_begin_0=a.asm.Vb).apply(null,arguments)},Rd=a._emscripten_bind_LineRep_set_begin_1=function(){return(Rd=a._emscripten_bind_LineRep_set_begin_1=a.asm.Wb).apply(null,arguments)},Sd=a._emscripten_bind_LineRep_get_end_0=function(){return(Sd=a._emscripten_bind_LineRep_get_end_0=a.asm.Xb).apply(null,arguments)},Td=a._emscripten_bind_LineRep_set_end_1=function(){return(Td=a._emscripten_bind_LineRep_set_end_1=a.asm.Yb).apply(null,arguments)},Ud=a._emscripten_bind_LineRep___destroy___0=\nfunction(){return(Ud=a._emscripten_bind_LineRep___destroy___0=a.asm.Zb).apply(null,arguments)},Vd=a._emscripten_bind_Router_Router_1=function(){return(Vd=a._emscripten_bind_Router_Router_1=a.asm._b).apply(null,arguments)},Wd=a._emscripten_bind_Router_processTransaction_0=function(){return(Wd=a._emscripten_bind_Router_processTransaction_0=a.asm.$b).apply(null,arguments)},Xd=a._emscripten_bind_Router_printInfo_0=function(){return(Xd=a._emscripten_bind_Router_printInfo_0=a.asm.ac).apply(null,arguments)},\nYd=a._emscripten_bind_Router_deleteConnector_1=function(){return(Yd=a._emscripten_bind_Router_deleteConnector_1=a.asm.bc).apply(null,arguments)},Zd=a._emscripten_bind_Router_moveShape_3=function(){return(Zd=a._emscripten_bind_Router_moveShape_3=a.asm.cc).apply(null,arguments)},$d=a._emscripten_bind_Router___destroy___0=function(){return($d=a._emscripten_bind_Router___destroy___0=a.asm.dc).apply(null,arguments)},ae=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirNone=function(){return(ae=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirNone=\na.asm.ec).apply(null,arguments)},be=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirUp=function(){return(be=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirUp=a.asm.fc).apply(null,arguments)},ce=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirDown=function(){return(ce=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirDown=a.asm.gc).apply(null,arguments)},de=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirLeft=function(){return(de=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirLeft=a.asm.hc).apply(null,arguments)},ee=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirRight=\nfunction(){return(ee=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirRight=a.asm.ic).apply(null,arguments)},fe=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirAll=function(){return(fe=a._emscripten_enum_Avoid_ConnDirFlag_ConnDirAll=a.asm.jc).apply(null,arguments)},ge=a._emscripten_enum_Avoid_ConnEndType_ConnEndPoint=function(){return(ge=a._emscripten_enum_Avoid_ConnEndType_ConnEndPoint=a.asm.kc).apply(null,arguments)},he=a._emscripten_enum_Avoid_ConnEndType_ConnEndShapePin=function(){return(he=a._emscripten_enum_Avoid_ConnEndType_ConnEndShapePin=\na.asm.lc).apply(null,arguments)},ie=a._emscripten_enum_Avoid_ConnEndType_ConnEndJunction=function(){return(ie=a._emscripten_enum_Avoid_ConnEndType_ConnEndJunction=a.asm.mc).apply(null,arguments)},je=a._emscripten_enum_Avoid_ConnEndType_ConnEndEmpty=function(){return(je=a._emscripten_enum_Avoid_ConnEndType_ConnEndEmpty=a.asm.nc).apply(null,arguments)},ke=a._emscripten_enum_Avoid_ActionType_ShapeMove=function(){return(ke=a._emscripten_enum_Avoid_ActionType_ShapeMove=a.asm.oc).apply(null,arguments)},\nle=a._emscripten_enum_Avoid_ActionType_ShapeAdd=function(){return(le=a._emscripten_enum_Avoid_ActionType_ShapeAdd=a.asm.pc).apply(null,arguments)},me=a._emscripten_enum_Avoid_ActionType_ShapeRemove=function(){return(me=a._emscripten_enum_Avoid_ActionType_ShapeRemove=a.asm.qc).apply(null,arguments)},ne=a._emscripten_enum_Avoid_ActionType_JunctionMove=function(){return(ne=a._emscripten_enum_Avoid_ActionType_JunctionMove=a.asm.rc).apply(null,arguments)},oe=a._emscripten_enum_Avoid_ActionType_JunctionAdd=\nfunction(){return(oe=a._emscripten_enum_Avoid_ActionType_JunctionAdd=a.asm.sc).apply(null,arguments)},pe=a._emscripten_enum_Avoid_ActionType_JunctionRemove=function(){return(pe=a._emscripten_enum_Avoid_ActionType_JunctionRemove=a.asm.tc).apply(null,arguments)},qe=a._emscripten_enum_Avoid_ActionType_ConnChange=function(){return(qe=a._emscripten_enum_Avoid_ActionType_ConnChange=a.asm.uc).apply(null,arguments)},re=a._emscripten_enum_Avoid_ActionType_ConnectionPinChange=function(){return(re=a._emscripten_enum_Avoid_ActionType_ConnectionPinChange=\na.asm.vc).apply(null,arguments)},se=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW90=function(){return(se=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW90=a.asm.wc).apply(null,arguments)},te=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW180=function(){return(te=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW180=a.asm.xc).apply(null,arguments)},ue=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW270=\nfunction(){return(ue=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW270=a.asm.yc).apply(null,arguments)},ve=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipX=function(){return(ve=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipX=a.asm.zc).apply(null,arguments)},we=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipY=function(){return(we=a._emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipY=\na.asm.Ac).apply(null,arguments)},xe=a._emscripten_enum_Avoid_ConnType_ConnType_None=function(){return(xe=a._emscripten_enum_Avoid_ConnType_ConnType_None=a.asm.Bc).apply(null,arguments)},ye=a._emscripten_enum_Avoid_ConnType_ConnType_PolyLine=function(){return(ye=a._emscripten_enum_Avoid_ConnType_ConnType_PolyLine=a.asm.Cc).apply(null,arguments)},ze=a._emscripten_enum_Avoid_ConnType_ConnType_Orthogonal=function(){return(ze=a._emscripten_enum_Avoid_ConnType_ConnType_Orthogonal=a.asm.Dc).apply(null,arguments)},\nAe=a._emscripten_enum_Avoid_RouterFlag_PolyLineRouting=function(){return(Ae=a._emscripten_enum_Avoid_RouterFlag_PolyLineRouting=a.asm.Ec).apply(null,arguments)},Be=a._emscripten_enum_Avoid_RouterFlag_OrthogonalRouting=function(){return(Be=a._emscripten_enum_Avoid_RouterFlag_OrthogonalRouting=a.asm.Fc).apply(null,arguments)},Ce;La=function De(){Ce||Ee();Ce||(La=De)};\nfunction Ee(){function b(){if(!Ce&&(Ce=!0,a.calledRun=!0,!wa)){Ga=!0;Ra(Da);Ra(Ea);aa(a);if(a.onRuntimeInitialized)a.onRuntimeInitialized();if(a.postRun)for(\"function\"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;){var c=a.postRun.shift();Fa.unshift(c)}Ra(Fa)}}if(!(0<Ja)){if(a.preRun)for(\"function\"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)Ia();Ra(Ca);0<Ja||(a.setStatus?(a.setStatus(\"Running...\"),setTimeout(function(){setTimeout(function(){a.setStatus(\"\")},1);b()},1)):\nb())}}a.run=Ee;if(a.preInit)for(\"function\"==typeof a.preInit&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();Ee();function u(){}u.prototype=Object.create(u.prototype);u.prototype.constructor=u;u.prototype.Hc=u;u.Ic={};a.WrapperObject=u;function v(b){return(b||u).Ic}a.getCache=v;function w(b,c){var d=v(c),e=d[b];if(e)return e;e=Object.create((c||u).prototype);e.Gc=b;return d[b]=e}a.wrapPointer=w;a.castObject=function(b,c){return w(b.Gc,c)};a.NULL=w(0);\na.destroy=function(b){if(!b.__destroy__)throw\"Error: Cannot destroy object. (Did you create it yourself?)\";b.__destroy__();delete v(b.Hc)[b.Gc]};a.compare=function(b,c){return b.Gc===c.Gc};a.getPointer=function(b){return b.Gc};a.getClass=function(b){return b.Hc};var Fe=0,Ge=0,He=[],Ie=0;function x(){throw\"cannot construct a VoidPtr, no constructor in IDL\";}x.prototype=Object.create(u.prototype);x.prototype.constructor=x;x.prototype.Hc=x;x.Ic={};a.VoidPtr=x;x.prototype.__destroy__=function(){kb(this.Gc)};\nfunction z(){this.Gc=lb();v(z)[this.Gc]=this}z.prototype=Object.create(u.prototype);z.prototype.constructor=z;z.prototype.Hc=z;z.Ic={};a.HyperedgeImprover=z;z.prototype.clear=z.prototype.clear=function(){mb(this.Gc)};z.prototype.setRouter=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);nb(c,b)};z.prototype.__destroy__=function(){ob(this.Gc)};function A(){this.Gc=pb();v(A)[this.Gc]=this}A.prototype=Object.create(u.prototype);A.prototype.constructor=A;A.prototype.Hc=A;A.Ic={};a.Box=A;\nA.prototype.length=A.prototype.length=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return qb(c,b)};A.prototype.width=A.prototype.width=function(){return rb(this.Gc)};A.prototype.height=A.prototype.height=function(){return sb(this.Gc)};A.prototype.get_min=A.prototype.ed=function(){return w(tb(this.Gc),B)};A.prototype.set_min=A.prototype.zd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);ub(c,b)};Object.defineProperty(A.prototype,\"min\",{get:A.prototype.ed,set:A.prototype.zd});\nA.prototype.get_max=A.prototype.dd=function(){return w(vb(this.Gc),B)};A.prototype.set_max=A.prototype.yd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);wb(c,b)};Object.defineProperty(A.prototype,\"max\",{get:A.prototype.dd,set:A.prototype.yd});A.prototype.__destroy__=function(){xb(this.Gc)};function C(){throw\"cannot construct a PolygonInterface, no constructor in IDL\";}C.prototype=Object.create(u.prototype);C.prototype.constructor=C;C.prototype.Hc=C;C.Ic={};a.PolygonInterface=C;\nC.prototype.clear=C.prototype.clear=function(){yb(this.Gc)};C.prototype.empty=C.prototype.empty=function(){return!!zb(this.Gc)};C.prototype.size=C.prototype.size=function(){return Ab(this.Gc)};C.prototype.id=C.prototype.id=function(){return Bb(this.Gc)};C.prototype.at=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return w(Cb(c,b),B)};C.prototype.boundingRectPolygon=function(){return w(Db(this.Gc),E)};\nC.prototype.offsetBoundingBox=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return w(Eb(c,b),A)};C.prototype.offsetPolygon=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return w(Fb(c,b),E)};C.prototype.__destroy__=function(){Gb(this.Gc)};function E(b){b&&\"object\"===typeof b&&(b=b.Gc);this.Gc=void 0===b?Hb():Ib(b);v(E)[this.Gc]=this}E.prototype=Object.create(u.prototype);E.prototype.constructor=E;E.prototype.Hc=E;E.Ic={};a.Polygon=E;\nE.prototype.setPoint=function(b,c){var d=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);Jb(d,b,c)};E.prototype.size=E.prototype.size=function(){return Kb(this.Gc)};E.prototype.get_ps=E.prototype.md=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return w(Lb(c,b),B)};\nE.prototype.set_ps=E.prototype.Fd=function(b,c){var d=this.Gc;if(Ie){for(var e=0;e<He.length;e++)a._free(He[e]);He.length=0;a._free(Fe);Fe=0;Ge+=Ie;Ie=0}Fe||(Ge+=128,Fe=a._malloc(Ge),assert(Fe));b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);Mb(d,b,c)};Object.defineProperty(E.prototype,\"ps\",{get:E.prototype.md,set:E.prototype.Fd});E.prototype.__destroy__=function(){Nb(this.Gc)};\nfunction B(b,c){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);this.Gc=void 0===b?Ob():void 0===c?_emscripten_bind_Point_Point_1(b):Pb(b,c);v(B)[this.Gc]=this}B.prototype=Object.create(u.prototype);B.prototype.constructor=B;B.prototype.Hc=B;B.Ic={};a.Point=B;B.prototype.equal=B.prototype.equal=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return!!Qb(c,b)};B.prototype.get_x=B.prototype.pd=function(){return Rb(this.Gc)};\nB.prototype.set_x=B.prototype.Id=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Sb(c,b)};Object.defineProperty(B.prototype,\"x\",{get:B.prototype.pd,set:B.prototype.Id});B.prototype.get_y=B.prototype.qd=function(){return Tb(this.Gc)};B.prototype.set_y=B.prototype.Jd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Ub(c,b)};Object.defineProperty(B.prototype,\"y\",{get:B.prototype.qd,set:B.prototype.Jd});B.prototype.get_id=B.prototype.cd=function(){return Vb(this.Gc)};\nB.prototype.set_id=B.prototype.xd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Wb(c,b)};Object.defineProperty(B.prototype,\"id\",{get:B.prototype.cd,set:B.prototype.xd});B.prototype.get_vn=B.prototype.Qc=function(){return Xb(this.Gc)};B.prototype.set_vn=B.prototype.Sc=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Yb(c,b)};Object.defineProperty(B.prototype,\"vn\",{get:B.prototype.Qc,set:B.prototype.Sc});B.prototype.__destroy__=function(){Zb(this.Gc)};\nfunction G(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=$b(b,c,d);v(G)[this.Gc]=this}G.prototype=Object.create(u.prototype);G.prototype.constructor=G;G.prototype.Hc=G;G.Ic={};a.Rectangle=G;G.prototype.__destroy__=function(){ac(this.Gc)};function H(){this.Gc=bc();v(H)[this.Gc]=this}H.prototype=Object.create(u.prototype);H.prototype.constructor=H;H.prototype.Hc=H;H.Ic={};a.HyperedgeTreeNode=H;\nH.prototype.writeEdgesToConns=function(b,c){var d=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);cc(d,b,c)};H.prototype.__destroy__=function(){dc(this.Gc)};function J(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=ec(b,c,d);v(J)[this.Gc]=this}J.prototype=Object.create(u.prototype);J.prototype.constructor=J;J.prototype.Hc=J;J.Ic={};a.HyperedgeTreeEdge=J;J.prototype.__destroy__=function(){fc(this.Gc)};\nfunction K(){this.Gc=hc();v(K)[this.Gc]=this}K.prototype=Object.create(u.prototype);K.prototype.constructor=K;K.prototype.Hc=K;K.Ic={};a.AStarPath=K;K.prototype.search=K.prototype.search=function(b,c,d,e){var g=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);e&&\"object\"===typeof e&&(e=e.Gc);ic(g,b,c,d,e)};K.prototype.__destroy__=function(){jc(this.Gc)};\nfunction L(b,c){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);this.Gc=void 0===c?kc(b):lc(b,c);v(L)[this.Gc]=this}L.prototype=Object.create(u.prototype);L.prototype.constructor=L;L.prototype.Hc=L;L.Ic={};a.ConnEnd=L;L.prototype.__destroy__=function(){mc(this.Gc)};\nfunction M(b,c,d,e){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);e&&\"object\"===typeof e&&(e=e.Gc);this.Gc=void 0===d?nc(b,c):void 0===e?oc(b,c,d):pc(b,c,d,e);v(M)[this.Gc]=this}M.prototype=Object.create(u.prototype);M.prototype.constructor=M;M.prototype.Hc=M;M.Ic={};a.ActionInfo=M;M.prototype.obstacle=function(){return w(qc(this.Gc),N)};M.prototype.shape=M.prototype.shape=function(){return w(rc(this.Gc),O)};\nM.prototype.conn=function(){return w(sc(this.Gc),P)};M.prototype.junction=function(){return w(tc(this.Gc),Q)};M.prototype.addConnEndUpdate=function(b,c,d){var e=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);uc(e,b,c,d)};M.prototype.get_type=M.prototype.Tc=function(){return vc(this.Gc)};M.prototype.set_type=M.prototype.Rc=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);wc(c,b)};\nObject.defineProperty(M.prototype,\"type\",{get:M.prototype.Tc,set:M.prototype.Rc});M.prototype.get_objPtr=M.prototype.kd=function(){return w(xc(this.Gc),x)};M.prototype.set_objPtr=M.prototype.Dd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);yc(c,b)};Object.defineProperty(M.prototype,\"objPtr\",{get:M.prototype.kd,set:M.prototype.Dd});M.prototype.get_newPoly=M.prototype.gd=function(){return w(zc(this.Gc),E)};\nM.prototype.set_newPoly=M.prototype.Ad=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Ac(c,b)};Object.defineProperty(M.prototype,\"newPoly\",{get:M.prototype.gd,set:M.prototype.Ad});M.prototype.get_newPosition=M.prototype.hd=function(){return w(Bc(this.Gc),B)};M.prototype.set_newPosition=M.prototype.Bd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Cc(c,b)};Object.defineProperty(M.prototype,\"newPosition\",{get:M.prototype.hd,set:M.prototype.Bd});\nM.prototype.get_firstMove=M.prototype.bd=function(){return!!Dc(this.Gc)};M.prototype.set_firstMove=M.prototype.wd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Ec(c,b)};Object.defineProperty(M.prototype,\"firstMove\",{get:M.prototype.bd,set:M.prototype.wd});M.prototype.__destroy__=function(){Fc(this.Gc)};\nfunction R(b,c,d,e,g,h,t){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);e&&\"object\"===typeof e&&(e=e.Gc);g&&\"object\"===typeof g&&(g=g.Gc);h&&\"object\"===typeof h&&(h=h.Gc);t&&\"object\"===typeof t&&(t=t.Gc);this.Gc=void 0===d?Gc(b,c):void 0===e?Hc(b,c,d):void 0===g?_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_4(b,c,d,e):void 0===h?_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_5(b,c,d,e,g):void 0===t?Ic(b,c,d,e,g,h):Jc(b,c,d,e,g,\nh,t);v(R)[this.Gc]=this}R.prototype=Object.create(u.prototype);R.prototype.constructor=R;R.prototype.Hc=R;R.Ic={};a.ShapeConnectionPin=R;R.prototype.setConnectionCost=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Kc(c,b)};R.prototype.position=R.prototype.position=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return void 0===b?w(Lc(c),B):w(Mc(c,b),B)};R.prototype.directions=function(){return Nc(this.Gc)};\nR.prototype.setExclusive=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Oc(c,b)};R.prototype.isExclusive=function(){return!!Pc(this.Gc)};R.prototype.__destroy__=function(){Qc(this.Gc)};function N(){throw\"cannot construct a Obstacle, no constructor in IDL\";}N.prototype=Object.create(u.prototype);N.prototype.constructor=N;N.prototype.Hc=N;N.Ic={};a.Obstacle=N;N.prototype.id=N.prototype.id=function(){return Rc(this.Gc)};N.prototype.polygon=function(){return w(Sc(this.Gc),E)};\nN.prototype.router=function(){return w(Tc(this.Gc),S)};N.prototype.position=N.prototype.position=function(){return w(Uc(this.Gc),B)};N.prototype.__destroy__=function(){Vc(this.Gc)};function Q(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=void 0===d?Wc(b,c):Xc(b,c,d);v(Q)[this.Gc]=this}Q.prototype=Object.create(u.prototype);Q.prototype.constructor=Q;Q.prototype.Hc=Q;Q.Ic={};a.JunctionRef=Q;\nQ.prototype.position=Q.prototype.position=function(){return w(Yc(this.Gc),B)};Q.prototype.__destroy__=function(){Zc(this.Gc)};function O(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=void 0===d?$c(b,c):ad(b,c,d);v(O)[this.Gc]=this}O.prototype=Object.create(u.prototype);O.prototype.constructor=O;O.prototype.Hc=O;O.Ic={};a.ShapeRef=O;O.prototype.polygon=function(){return w(bd(this.Gc),E)};\nO.prototype.position=O.prototype.position=function(){return w(cd(this.Gc),B)};O.prototype.__destroy__=function(){dd(this.Gc)};function T(){throw\"cannot construct a HyperedgeNewAndDeletedObjectLists, no constructor in IDL\";}T.prototype=Object.create(u.prototype);T.prototype.constructor=T;T.prototype.Hc=T;T.Ic={};a.HyperedgeNewAndDeletedObjectLists=T;T.prototype.__destroy__=function(){ed(this.Gc)};function U(){this.Gc=fd();v(U)[this.Gc]=this}U.prototype=Object.create(u.prototype);\nU.prototype.constructor=U;U.prototype.Hc=U;U.Ic={};a.HyperedgeRerouter=U;U.prototype.registerHyperedgeForRerouting=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);return gd(c,b)};U.prototype.__destroy__=function(){hd(this.Gc)};function V(){throw\"cannot construct a VertInf, no constructor in IDL\";}V.prototype=Object.create(u.prototype);V.prototype.constructor=V;V.prototype.Hc=V;V.Ic={};a.VertInf=V;V.prototype.__destroy__=function(){id(this.Gc)};\nfunction W(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=void 0===b?jd():void 0===c?_emscripten_bind_VertID_VertID_1(b):void 0===d?kd(b,c):ld(b,c,d);v(W)[this.Gc]=this}W.prototype=Object.create(u.prototype);W.prototype.constructor=W;W.prototype.Hc=W;W.Ic={};a.VertID=W;W.prototype.get_objID=W.prototype.jd=function(){return md(this.Gc)};\nW.prototype.set_objID=W.prototype.Cd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);nd(c,b)};Object.defineProperty(W.prototype,\"objID\",{get:W.prototype.jd,set:W.prototype.Cd});W.prototype.get_vn=W.prototype.Qc=function(){return od(this.Gc)};W.prototype.set_vn=W.prototype.Sc=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);pd(c,b)};Object.defineProperty(W.prototype,\"vn\",{get:W.prototype.Qc,set:W.prototype.Sc});W.prototype.get_props=W.prototype.ld=function(){return qd(this.Gc)};\nW.prototype.set_props=W.prototype.Ed=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);rd(c,b)};Object.defineProperty(W.prototype,\"props\",{get:W.prototype.ld,set:W.prototype.Ed});W.prototype.get_src=W.prototype.nd=function(){return sd(this.Gc)};Object.defineProperty(W.prototype,\"src\",{get:W.prototype.nd});W.prototype.get_tar=W.prototype.od=function(){return td(this.Gc)};Object.defineProperty(W.prototype,\"tar\",{get:W.prototype.od});W.prototype.get_PROP_ConnPoint=W.prototype.Wc=function(){return ud(this.Gc)};\nObject.defineProperty(W.prototype,\"PROP_ConnPoint\",{get:W.prototype.Wc});W.prototype.get_PROP_OrthShapeEdge=W.prototype.Zc=function(){return vd(this.Gc)};Object.defineProperty(W.prototype,\"PROP_OrthShapeEdge\",{get:W.prototype.Zc});W.prototype.get_PROP_ConnectionPin=W.prototype.Xc=function(){return wd(this.Gc)};Object.defineProperty(W.prototype,\"PROP_ConnectionPin\",{get:W.prototype.Xc});W.prototype.get_PROP_ConnCheckpoint=W.prototype.Vc=function(){return xd(this.Gc)};\nObject.defineProperty(W.prototype,\"PROP_ConnCheckpoint\",{get:W.prototype.Vc});W.prototype.get_PROP_DummyPinHelper=W.prototype.Yc=function(){return yd(this.Gc)};Object.defineProperty(W.prototype,\"PROP_DummyPinHelper\",{get:W.prototype.Yc});W.prototype.__destroy__=function(){zd(this.Gc)};function Je(){throw\"cannot construct a MinimumTerminalSpanningTree, no constructor in IDL\";}Je.prototype=Object.create(u.prototype);Je.prototype.constructor=Je;Je.prototype.Hc=Je;Je.Ic={};\na.MinimumTerminalSpanningTree=Je;Je.prototype.__destroy__=function(){Ad(this.Gc)};function X(b){b&&\"object\"===typeof b&&(b=b.Gc);this.Gc=Bd(b);v(X)[this.Gc]=this}X.prototype=Object.create(u.prototype);X.prototype.constructor=X;X.prototype.Hc=X;X.Ic={};a.Checkpoint=X;X.prototype.__destroy__=function(){Cd(this.Gc)};\nfunction P(b,c,d,e){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);e&&\"object\"===typeof e&&(e=e.Gc);this.Gc=void 0===e?Dd(b,c,d):Ed(b,c,d,e);v(P)[this.Gc]=this}P.prototype=Object.create(u.prototype);P.prototype.constructor=P;P.prototype.Hc=P;P.Ic={};a.ConnRef=P;P.prototype.id=P.prototype.id=function(){return Fd(this.Gc)};\nP.prototype.setCallback=function(b,c){var d=this.Gc;assert(b instanceof Function,\"Expecting function\");if(!ta){ta=new WeakMap;for(var e=0;e<q.length;e++){var g=q.get(e);g&&ta.set(g,e)}}if(ta.has(b))b=ta.get(b);else{if(sa.length)e=sa.pop();else{try{q.grow(1)}catch(F){if(!(F instanceof RangeError))throw F;throw\"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.\";}e=q.length-1}try{q.set(e,b)}catch(F){if(!(F instanceof TypeError))throw F;if(\"function\"===typeof WebAssembly.Function){var h={i:\"i32\",j:\"i64\",\nf:\"f32\",d:\"f64\"},t={parameters:[],results:[]};for(g=1;2>g;++g)t.parameters.push(h[\"vi\"[g]]);g=new WebAssembly.Function(t,b)}else{h=[1,0,1,96];t={i:127,j:126,f:125,d:124};h.push(1);for(g=0;1>g;++g)h.push(t[\"i\"[g]]);h.push(0);h[1]=h.length-2;g=new Uint8Array([0,97,115,109,1,0,0,0].concat(h,[2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0]));g=new WebAssembly.Module(g);g=(new WebAssembly.Instance(g,{e:{f:b}})).exports.f}q.set(e,g)}ta.set(b,e);b=e}c&&\"object\"===typeof c&&(c=c.Gc);Gd(d,b,c)};\nP.prototype.setSourceEndpoint=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Hd(c,b)};P.prototype.setDestEndpoint=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Id(c,b)};P.prototype.routingType=function(){return Jd(this.Gc)};P.prototype.setRoutingType=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Kd(c,b)};P.prototype.displayRoute=function(){return w(Ld(this.Gc),E)};P.prototype.__destroy__=function(){Md(this.Gc)};\nfunction Y(b,c,d){b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);this.Gc=void 0===d?Nd(b,c):Od(b,c,d);v(Y)[this.Gc]=this}Y.prototype=Object.create(u.prototype);Y.prototype.constructor=Y;Y.prototype.Hc=Y;Y.Ic={};a.EdgeInf=Y;Y.prototype.__destroy__=function(){Pd(this.Gc)};function Z(){throw\"cannot construct a LineRep, no constructor in IDL\";}Z.prototype=Object.create(u.prototype);Z.prototype.constructor=Z;Z.prototype.Hc=Z;Z.Ic={};a.LineRep=Z;\nZ.prototype.get_begin=Z.prototype.$c=function(){return w(Qd(this.Gc),B)};Z.prototype.set_begin=Z.prototype.sd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Rd(c,b)};Object.defineProperty(Z.prototype,\"begin\",{get:Z.prototype.$c,set:Z.prototype.sd});Z.prototype.get_end=Z.prototype.ad=function(){return w(Sd(this.Gc),B)};Z.prototype.set_end=Z.prototype.vd=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Td(c,b)};Object.defineProperty(Z.prototype,\"end\",{get:Z.prototype.ad,set:Z.prototype.vd});\nZ.prototype.__destroy__=function(){Ud(this.Gc)};function S(b){b&&\"object\"===typeof b&&(b=b.Gc);this.Gc=Vd(b);v(S)[this.Gc]=this}S.prototype=Object.create(u.prototype);S.prototype.constructor=S;S.prototype.Hc=S;S.Ic={};a.Router=S;S.prototype.processTransaction=function(){return!!Wd(this.Gc)};S.prototype.printInfo=function(){Xd(this.Gc)};S.prototype.deleteConnector=function(b){var c=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);Yd(c,b)};\nS.prototype.moveShape=function(b,c,d){var e=this.Gc;b&&\"object\"===typeof b&&(b=b.Gc);c&&\"object\"===typeof c&&(c=c.Gc);d&&\"object\"===typeof d&&(d=d.Gc);Zd(e,b,c,d)};S.prototype.__destroy__=function(){$d(this.Gc)};\n(function(){function b(){a.ConnDirNone=ae();a.ConnDirUp=be();a.ConnDirDown=ce();a.ConnDirLeft=de();a.ConnDirRight=ee();a.ConnDirAll=fe();a.ConnEndPoint=ge();a.ConnEndShapePin=he();a.ConnEndJunction=ie();a.ConnEndEmpty=je();a.ShapeMove=ke();a.ShapeAdd=le();a.ShapeRemove=me();a.JunctionMove=ne();a.JunctionAdd=oe();a.JunctionRemove=pe();a.ConnChange=qe();a.ConnectionPinChange=re();a.TransformationType_CW90=se();a.TransformationType_CW180=te();a.TransformationType_CW270=ue();a.TransformationType_FlipX=\nve();a.TransformationType_FlipY=we();a.ConnType_None=xe();a.ConnType_PolyLine=ye();a.ConnType_Orthogonal=ze();a.PolyLineRouting=Ae();a.OrthogonalRouting=Be()}Ga?b():Ea.unshift(b)})();\n\n\n  return initAvoidModule.ready\n}\n);\n})();\nexport default initAvoidModule;","import initAvoid from './generated/libavoid.js';\n// import initAvoid from '../examples/lib/libavoid.js';\n\n\nexport const AvoidLib = {\n  avoidLib: undefined,\n  async load() {\n    if (!this.avoidLib) {\n      this.avoidLib = await initAvoid();\n    } else {\n      console.log('Avoid library is already initialized');\n    }\n  },\n\n  getInstance() {\n    if (!this.avoidLib) {\n      throw new Error('Avoid library should be initialized before using');\n    }\n    return this.avoidLib;\n  }\n};\n","// import { injectable } from \"../../sprotty/node_modules/inversify\";\nimport { Avoid as AvoidInterface } from \"../../Hnatiuj.Adaptagrams/\"; // AvoidLib\nimport {\n  // IMultipleEdgesRouter,\n  SRoutableElement,\n  SRoutingHandle,\n  RoutedPoint,\n  ResolvedHandleMove,\n  // EdgeSnapshot,\n  Point,\n  // SConnectableElement,\n  EdgeRouting,\n  // isBoundsAware,\n  // SParentElement,\n  // SChildElement,\n  // euclideanDistance,\n  // linear,\n  // centerOfLine,\n  LinearEdgeRouter,\n  LinearRouteOptions,\n  almostEquals,\n  center,\n  DefaultAnchors,\n  includes,\n  linear,\n  manhattanDistance,\n  ManhattanRouterOptions,\n  RoutingHandleKind,\n  Side,\n  translatePoint,\n} from \"../../sprotty\";\n\nexport type AvoidRouteEdge = {\n  child: SRoutableElement;\n  connRef: AvoidInterface[\"ConnRef\"];\n  routes: RoutedPoint[];\n};\nexport type AvoidRoutes = { [key: string]: AvoidRouteEdge };\nexport interface EdgeRoutesContainer {\n  edgeRoutes: EdgeRouting;\n}\n\nexport function containsEdgeRoutes(\n  args?: Record<string, unknown>\n): args is Record<string, unknown> & EdgeRoutesContainer {\n  return args !== undefined && \"edgeRoutes\" in args;\n}\n\nexport interface LibavoidRouteOptions extends LinearRouteOptions {\n  /** The angle in radians below which a routing handle is removed. */\n  // TODO\n  removeAngleThreshold: number;\n}\n\n// @injectable()\n// export class LibavoidRouter\n//   extends LinearEdgeRouter\n//   implements IMultipleEdgesRouter\n// {\n//   avoidRouter: AvoidInterface[\"Router\"];\n//   avoidRoutes: AvoidRoutes;\n//   renderedTimes = 0;\n//   static readonly KIND = \"libavoid\";\n\n//   constructor() {\n//     super();\n//     const Avoid: AvoidInterface =\n//       AvoidLib.getInstance() as unknown as AvoidInterface;\n//     this.avoidRouter = new Avoid.Router(\n//       Avoid.OrthogonalRouting | Avoid.PolyLineRouting\n//     );\n//     this.avoidRoutes = {};\n//     console.log(\"router\", this.avoidRouter);\n//   }\n\n//   get kind() {\n//     return LibavoidRouter.KIND;\n//   }\n\n//   getAllBoundsAwareChildren(parent: Readonly<SParentElement>): SChildElement[] {\n//     const result = [];\n\n//     for (const child of parent.children) {\n//       if (isBoundsAware(child)) {\n//         result.push(child);\n//       }\n\n//       if (child instanceof SParentElement) {\n//         result.push(...this.getAllBoundsAwareChildren(child));\n//       }\n//     }\n\n//     return result;\n//   }\n\n//   getCenterPoint(element: SConnectableElement): { x: number; y: number } {\n//     let x = element.bounds.width / 2,\n//       y = element.bounds.height / 2;\n//     let currentElement = element;\n//     while (currentElement) {\n//       if (currentElement.position) {\n//         x += currentElement.position.x;\n//         y += currentElement.position.y;\n//       }\n\n//       if (!(currentElement.parent && currentElement.parent.id === \"graph\")) {\n//         currentElement = currentElement.parent as SConnectableElement;\n//       } else {\n//         break;\n//       }\n//     }\n//     return { x, y };\n//   }\n\n//   avoidRoutesToEdgeRoutes(avoidRoutes: AvoidRouteEdge[]): EdgeRouting {\n//     const routes = new EdgeRouting();\n//     for (const connection of avoidRoutes) {\n//       const sprottyRoute = [];\n//       const route = connection.connRef.displayRoute();\n//       for (let i = 0; i < route.size(); i++) {\n//         let kind: \"source\" | \"linear\" | \"target\" = \"linear\";\n//         if (i === 0) {\n//           kind = \"source\";\n//         } else if (i === route.size() - 1) {\n//           kind = \"target\";\n//         }\n//         sprottyRoute.push({\n//           x: route.get_ps(i).x,\n//           y: route.get_ps(i).y,\n//           kind,\n//           pointIndex: 1,\n//         });\n//       }\n//       routes.set(connection.child.id, sprottyRoute);\n//       this.avoidRoutes[connection.child.id] = {\n//         ...this.avoidRoutes[connection.child.id],\n//         routes: sprottyRoute,\n//       };\n//     }\n\n//     return routes;\n//   }\n\n//   routeAll(edges: SRoutableElement[], parent: SParentElement): EdgeRouting {\n//     // TODO: avoid recalculating of the same elements\n//     const connections = [];\n//     const Avoid: AvoidInterface =\n//       AvoidLib.getInstance() as unknown as AvoidInterface;\n\n//     this.avoidRouter = new Avoid.Router(\n//       Avoid.OrthogonalRouting | Avoid.PolyLineRouting\n//     );\n\n//     for (const child of edges) {\n//       const sourceConnectionEnd = this.getCenterPoint(\n//         child.source as SConnectableElement\n//       );\n//       const targetConnectionEnd = this.getCenterPoint(\n//         child.target as SConnectableElement\n//       );\n//       const connRef = new Avoid.ConnRef(\n//         this.avoidRouter,\n//         new Avoid.ConnEnd(\n//           new Avoid.Point(sourceConnectionEnd.x, sourceConnectionEnd.y)\n//         ),\n//         new Avoid.ConnEnd(\n//           new Avoid.Point(targetConnectionEnd.x, targetConnectionEnd.y)\n//         )\n//       );\n\n//       let routingType = Avoid.PolyLineRouting;\n//       if (child.routerKind === \"manhattan\") {\n//         routingType = Avoid.OrthogonalRouting;\n//       }\n//       connRef.setRoutingType(routingType);\n//       connections.push({ child, connRef, routes: [] });\n//       this.avoidRoutes[child.id] = { connRef, child, routes: [] };\n//     }\n\n//     const connectables = this.getAllBoundsAwareChildren(parent);\n//     console.log(\"connectables count: \", connectables.length);\n//     for (const child of connectables as SConnectableElement[]) {\n//       const centerPoint = this.getCenterPoint(child);\n//       const rectangle = new Avoid.Rectangle(\n//         new Avoid.Point(centerPoint.x, centerPoint.y),\n//         child.bounds.width,\n//         child.bounds.height\n//       );\n//       new Avoid.ShapeRef(this.avoidRouter, rectangle);\n//     }\n\n//     this.avoidRouter.processTransaction();\n//     const edgeRoutes = this.avoidRoutesToEdgeRoutes(connections);\n\n//     for (const connection of connections) {\n//       this.avoidRouter.deleteConnector(connection.connRef);\n//     }\n//     Avoid.destroy(this.avoidRouter);\n//     this.renderedTimes += 1;\n//     console.log(connections);\n//     return edgeRoutes;\n//   }\n\n//   route(\n//     edge: Readonly<SRoutableElement>,\n//     args?: Record<string, unknown>\n//   ): RoutedPoint[] {\n//     console.log(\"get\", edge, args, this.avoidRoutes);\n//     return this.routeAll([edge], edge).get(edge.id) || [];\n//   }\n\n//   // pointAt(edge: SRoutableElement, t: number): Point | undefined {\n//   //   console.log(\"pointAt\", edge, t);\n\n//   //   const segments = this.calculateSegment(edge, t);\n//   //   console.log(\"segments\", segments);\n//   //   if (!segments) return undefined;\n//   //   const { segmentStart, segmentEnd, lambda } = segments;\n//   //   return linear(segmentStart, segmentEnd, lambda);\n//   // }\n\n//   protected calculateSegment(\n//     edge: SRoutableElement,\n//     t: number\n//   ): { segmentStart: Point; segmentEnd: Point; lambda: number } | undefined {\n//     if (t < 0 || t > 1) return undefined;\n//     const routedPoints = this.avoidRoutes[edge.id].routes;\n//     console.log(\"points\", routedPoints.length);\n//     if (routedPoints.length < 2) return undefined;\n//     const segmentLengths: number[] = [];\n//     let totalLength = 0;\n//     for (let i = 0; i < routedPoints.length - 1; ++i) {\n//       segmentLengths[i] = euclideanDistance(\n//         routedPoints[i],\n//         routedPoints[i + 1]\n//       );\n//       totalLength += segmentLengths[i];\n//     }\n//     let currentLenght = 0;\n//     const tAsLenght = t * totalLength;\n//     for (let i = 0; i < routedPoints.length - 1; ++i) {\n//       const newLength = currentLenght + segmentLengths[i];\n//       // avoid division by (almost) zero\n//       if (segmentLengths[i] > 1e-8) {\n//         if (newLength >= tAsLenght) {\n//           const lambda =\n//             Math.max(0, tAsLenght - currentLenght) / segmentLengths[i];\n//           return {\n//             segmentStart: routedPoints[i],\n//             segmentEnd: routedPoints[i + 1],\n//             lambda,\n//           };\n//         }\n//       }\n//       currentLenght = newLength;\n//     }\n//     return {\n//       segmentEnd: routedPoints.pop() as Point,\n//       segmentStart: routedPoints.pop() as Point,\n//       lambda: 1,\n//     };\n//   }\n\n//   createRoutingHandles(edge: SRoutableElement): void {\n//     const rpCount = edge.routingPoints.length;\n//     this.addHandle(edge, \"source\", \"routing-point\", -2);\n//     this.addHandle(edge, \"line\", \"volatile-routing-point\", -1);\n//     for (let i = 0; i < rpCount; i++) {\n//       this.addHandle(edge, \"junction\", \"routing-point\", i);\n//       this.addHandle(edge, \"line\", \"volatile-routing-point\", i);\n//     }\n//     this.addHandle(edge, \"target\", \"routing-point\", rpCount);\n//   }\n\n//   applyInnerHandleMoves(edge: SRoutableElement, moves: ResolvedHandleMove[]) {\n//     moves.forEach((move) => {\n//       const handle = move.handle;\n//       const points = edge.routingPoints;\n//       let index = handle.pointIndex;\n//       if (handle.kind === \"line\") {\n//         // Upgrade to a proper routing point\n//         handle.kind = \"junction\";\n//         handle.type = \"routing-point\";\n//         points.splice(\n//           index + 1,\n//           0,\n//           move.fromPosition || points[Math.max(index, 0)]\n//         );\n//         edge.children.forEach((child) => {\n//           if (\n//             child instanceof SRoutingHandle &&\n//             (child === handle || child.pointIndex > index)\n//           )\n//             child.pointIndex++;\n//         });\n//         this.addHandle(edge, \"line\", \"volatile-routing-point\", index);\n//         this.addHandle(edge, \"line\", \"volatile-routing-point\", index + 1);\n//         index++;\n//       }\n//       if (index >= 0 && index < points.length) {\n//         points[index] = move.toPosition;\n//       }\n//     });\n//   }\n\n//   getInnerHandlePosition(\n//     edge: SRoutableElement,\n//     route: RoutedPoint[],\n//     handle: SRoutingHandle\n//   ) {\n//     if (handle.kind === \"line\") {\n//       const { start, end } = this.findRouteSegment(\n//         edge,\n//         route,\n//         handle.pointIndex\n//       );\n//       if (start !== undefined && end !== undefined)\n//         return centerOfLine(start, end);\n//     }\n//     return undefined;\n//   }\n\n//   protected getOptions(edge: SRoutableElement): LibavoidRouteOptions {\n//     return {\n//       minimalPointDistance: 2,\n//       removeAngleThreshold: 0.1,\n//       standardDistance: 20,\n//       selfEdgeOffset: 0.25,\n//     };\n//   }\n\n//   // derivativeAt(edge: SRoutableElement, t: number): Point | undefined {\n//   //   console.log(\"derivativeAt\", edge, t);\n//   //   const segments = this.calculateSegment(edge, t);\n//   //   if (!segments) return undefined;\n//   //   const { segmentStart, segmentEnd } = segments;\n//   //   return {\n//   //     x: segmentEnd.x - segmentStart.x,\n//   //     y: segmentEnd.y - segmentStart.y,\n//   //   };\n//   // }\n\n//   // getHandlePosition(\n//   //   edge: SRoutableElement,\n//   //   route: RoutedPoint[],\n//   //   handle: SRoutingHandle\n//   // ): Point | undefined {\n//   //   return undefined; // TODO\n//   // }\n\n//   // createRoutingHandles(edge: SRoutableElement) {}\n\n//   // applyHandleMoves(edge: SRoutableElement, moves: ResolvedHandleMove[]): void {}\n\n//   // applyReconnect(\n//   //   edge: SRoutableElement,\n//   //   newSourceId?: string,\n//   //   newTargetId?: string\n//   // ) {}\n\n//   // cleanupRoutingPoints(\n//   //   edge: SRoutableElement,\n//   //   routingPoints: Point[],\n//   //   updateHandles: boolean,\n//   //   addRoutingPoints: boolean\n//   // ) {}\n\n//   // takeSnapshot(edge: SRoutableElement): EdgeSnapshot {\n//   //   return {\n//   //     routingPoints: edge.routingPoints.slice(),\n//   //     routingHandles: edge.children\n//   //       .filter((child) => child instanceof SRoutingHandle)\n//   //       .map((child) => child as SRoutingHandle),\n//   //     routedPoints: this.route(edge),\n//   //     router: this,\n//   //     source: edge.source,\n//   //     target: edge.target,\n//   //   };\n//   // }\n\n//   // applySnapshot(edge: SRoutableElement, snapshot: EdgeSnapshot): void {}\n// }\n\nexport class LibavoidRouter extends LinearEdgeRouter {\n  static readonly KIND = \"libavoid\";\n\n  get kind() {\n    return LibavoidRouter.KIND;\n  }\n\n  protected getOptions(edge: SRoutableElement): ManhattanRouterOptions {\n    return {\n      standardDistance: 20,\n      minimalPointDistance: 3,\n      selfEdgeOffset: 0.25,\n    };\n  }\n\n  route(edge: SRoutableElement): RoutedPoint[] {\n    if (!edge.source || !edge.target) return [];\n    const routedCorners = this.createRoutedCorners(edge);\n    const sourceRefPoint =\n      routedCorners[0] ||\n      translatePoint(\n        center(edge.target.bounds),\n        edge.target.parent,\n        edge.parent\n      );\n    const sourceAnchor = this.getTranslatedAnchor(\n      edge.source,\n      sourceRefPoint,\n      edge.parent,\n      edge,\n      edge.sourceAnchorCorrection\n    );\n    const targetRefPoint =\n      routedCorners[routedCorners.length - 1] ||\n      translatePoint(\n        center(edge.source.bounds),\n        edge.source.parent,\n        edge.parent\n      );\n    const targetAnchor = this.getTranslatedAnchor(\n      edge.target,\n      targetRefPoint,\n      edge.parent,\n      edge,\n      edge.targetAnchorCorrection\n    );\n    if (!sourceAnchor || !targetAnchor) return [];\n    const routedPoints: RoutedPoint[] = [];\n    routedPoints.push({ kind: \"source\", ...sourceAnchor });\n    routedCorners.forEach((corner) => routedPoints.push(corner));\n    routedPoints.push({ kind: \"target\", ...targetAnchor });\n    return routedPoints;\n  }\n\n  protected createRoutedCorners(edge: SRoutableElement): RoutedPoint[] {\n    const sourceAnchors = new DefaultAnchors(\n      edge.source!,\n      edge.parent,\n      \"source\"\n    );\n    const targetAnchors = new DefaultAnchors(\n      edge.target!,\n      edge.parent,\n      \"target\"\n    );\n    if (edge.routingPoints.length > 0) {\n      const routingPointsCopy = edge.routingPoints.slice();\n      this.cleanupRoutingPoints(edge, routingPointsCopy, false, true);\n      if (routingPointsCopy.length > 0)\n        return routingPointsCopy.map((routingPoint, index) => {\n          return <RoutedPoint>{\n            kind: \"linear\",\n            pointIndex: index,\n            ...routingPoint,\n          };\n        });\n    }\n    const options = this.getOptions(edge);\n    const corners = this.calculateDefaultCorners(\n      edge,\n      sourceAnchors,\n      targetAnchors,\n      options\n    );\n    return corners.map((corner) => {\n      return <RoutedPoint>{ kind: \"linear\", ...corner };\n    });\n  }\n\n  createRoutingHandles(edge: SRoutableElement) {\n    const routedPoints = this.route(edge);\n    this.commitRoute(edge, routedPoints);\n    if (routedPoints.length > 0) {\n      this.addHandle(edge, \"source\", \"routing-point\", -2);\n      for (let i = 0; i < routedPoints.length - 1; ++i)\n        this.addHandle(edge, \"manhattan-50%\", \"volatile-routing-point\", i - 1);\n      this.addHandle(edge, \"target\", \"routing-point\", routedPoints.length - 2);\n    }\n  }\n\n  protected getInnerHandlePosition(\n    edge: SRoutableElement,\n    route: RoutedPoint[],\n    handle: SRoutingHandle\n  ) {\n    const fraction = this.getFraction(handle.kind);\n    if (fraction !== undefined) {\n      const { start, end } = this.findRouteSegment(\n        edge,\n        route,\n        handle.pointIndex\n      );\n      if (start !== undefined && end !== undefined)\n        return linear(start, end, fraction);\n    }\n    return undefined;\n  }\n\n  protected getFraction(kind: RoutingHandleKind): number | undefined {\n    switch (kind) {\n      case \"manhattan-50%\":\n        return 0.5;\n      default:\n        return undefined;\n    }\n  }\n\n  protected commitRoute(edge: SRoutableElement, routedPoints: RoutedPoint[]) {\n    const newRoutingPoints: Point[] = [];\n    for (let i = 1; i < routedPoints.length - 1; ++i)\n      newRoutingPoints.push({ x: routedPoints[i].x, y: routedPoints[i].y });\n    edge.routingPoints = newRoutingPoints;\n  }\n\n  protected applyInnerHandleMoves(\n    edge: SRoutableElement,\n    moves: ResolvedHandleMove[]\n  ) {\n    const route = this.route(edge);\n    const routingPoints = edge.routingPoints;\n    const minimalPointDistance = this.getOptions(edge).minimalPointDistance;\n    moves.forEach((move) => {\n      const handle = move.handle;\n      const index = handle.pointIndex;\n      const correctedX = this.correctX(\n        routingPoints,\n        index,\n        move.toPosition.x,\n        minimalPointDistance\n      );\n      const correctedY = this.correctY(\n        routingPoints,\n        index,\n        move.toPosition.y,\n        minimalPointDistance\n      );\n      switch (handle.kind) {\n        case \"manhattan-50%\":\n          if (index < 0) {\n            if (almostEquals(route[0].x, route[1].x))\n              this.alignX(routingPoints, 0, correctedX);\n            else this.alignY(routingPoints, 0, correctedY);\n          } else if (index < routingPoints.length - 1) {\n            if (\n              almostEquals(routingPoints[index].x, routingPoints[index + 1].x)\n            ) {\n              this.alignX(routingPoints, index, correctedX);\n              this.alignX(routingPoints, index + 1, correctedX);\n            } else {\n              this.alignY(routingPoints, index, correctedY);\n              this.alignY(routingPoints, index + 1, correctedY);\n            }\n          } else {\n            if (\n              almostEquals(route[route.length - 2].x, route[route.length - 1].x)\n            )\n              this.alignX(routingPoints, routingPoints.length - 1, correctedX);\n            else\n              this.alignY(routingPoints, routingPoints.length - 1, correctedY);\n          }\n          break;\n      }\n    });\n  }\n\n  protected correctX(\n    routingPoints: Point[],\n    index: number,\n    x: number,\n    minimalPointDistance: number\n  ) {\n    if (\n      index > 0 &&\n      Math.abs(x - routingPoints[index - 1].x) < minimalPointDistance\n    )\n      return routingPoints[index - 1].x;\n    else if (\n      index < routingPoints.length - 2 &&\n      Math.abs(x - routingPoints[index + 2].x) < minimalPointDistance\n    )\n      return routingPoints[index + 2].x;\n    else return x;\n  }\n\n  protected alignX(routingPoints: Point[], index: number, x: number) {\n    if (index >= 0 && index < routingPoints.length)\n      routingPoints[index] = {\n        x,\n        y: routingPoints[index].y,\n      };\n  }\n\n  protected correctY(\n    routingPoints: Point[],\n    index: number,\n    y: number,\n    minimalPointDistance: number\n  ) {\n    if (\n      index > 0 &&\n      Math.abs(y - routingPoints[index - 1].y) < minimalPointDistance\n    )\n      return routingPoints[index - 1].y;\n    else if (\n      index < routingPoints.length - 2 &&\n      Math.abs(y - routingPoints[index + 2].y) < minimalPointDistance\n    )\n      return routingPoints[index + 2].y;\n    else return y;\n  }\n\n  protected alignY(routingPoints: Point[], index: number, y: number) {\n    if (index >= 0 && index < routingPoints.length)\n      routingPoints[index] = {\n        x: routingPoints[index].x,\n        y,\n      };\n  }\n\n  cleanupRoutingPoints(\n    edge: SRoutableElement,\n    routingPoints: Point[],\n    updateHandles: boolean,\n    addRoutingPoints: boolean\n  ) {\n    const sourceAnchors = new DefaultAnchors(\n      edge.source!,\n      edge.parent,\n      \"source\"\n    );\n    const targetAnchors = new DefaultAnchors(\n      edge.target!,\n      edge.parent,\n      \"target\"\n    );\n    if (\n      this.resetRoutingPointsOnReconnect(\n        edge,\n        routingPoints,\n        updateHandles,\n        sourceAnchors,\n        targetAnchors\n      )\n    )\n      return;\n    // delete leading RPs inside the bounds of the source\n    for (let i = 0; i < routingPoints.length; ++i)\n      if (includes(sourceAnchors.bounds, routingPoints[i])) {\n        routingPoints.splice(0, 1);\n        if (updateHandles) {\n          this.removeHandle(edge, -1);\n        }\n      } else {\n        break;\n      }\n    // delete trailing RPs inside the bounds of the target\n    for (let i = routingPoints.length - 1; i >= 0; --i)\n      if (includes(targetAnchors.bounds, routingPoints[i])) {\n        routingPoints.splice(i, 1);\n        if (updateHandles) {\n          this.removeHandle(edge, i);\n        }\n      } else {\n        break;\n      }\n    if (routingPoints.length >= 2) {\n      const options = this.getOptions(edge);\n      for (let i = routingPoints.length - 2; i >= 0; --i) {\n        if (\n          manhattanDistance(routingPoints[i], routingPoints[i + 1]) <\n          options.minimalPointDistance\n        ) {\n          routingPoints.splice(i, 2);\n          --i;\n          if (updateHandles) {\n            this.removeHandle(edge, i - 1);\n            this.removeHandle(edge, i);\n          }\n        }\n      }\n    }\n    if (addRoutingPoints) {\n      this.addAdditionalCorner(\n        edge,\n        routingPoints,\n        sourceAnchors,\n        targetAnchors,\n        updateHandles\n      );\n      this.addAdditionalCorner(\n        edge,\n        routingPoints,\n        targetAnchors,\n        sourceAnchors,\n        updateHandles\n      );\n      this.manhattanify(edge, routingPoints);\n    }\n  }\n\n  protected removeHandle(edge: SRoutableElement, pointIndex: number) {\n    const toBeRemoved: SRoutingHandle[] = [];\n    edge.children.forEach((child) => {\n      if (child instanceof SRoutingHandle) {\n        if (child.pointIndex > pointIndex) --child.pointIndex;\n        else if (child.pointIndex === pointIndex) toBeRemoved.push(child);\n      }\n    });\n    toBeRemoved.forEach((child) => edge.remove(child));\n  }\n\n  protected addAdditionalCorner(\n    edge: SRoutableElement,\n    routingPoints: Point[],\n    currentAnchors: DefaultAnchors,\n    otherAnchors: DefaultAnchors,\n    updateHandles: boolean\n  ) {\n    if (routingPoints.length === 0) return;\n    const refPoint =\n      currentAnchors.kind === \"source\"\n        ? routingPoints[0]\n        : routingPoints[routingPoints.length - 1];\n    const index = currentAnchors.kind === \"source\" ? 0 : routingPoints.length;\n    const shiftIndex = index - (currentAnchors.kind === \"source\" ? 1 : 0);\n    let isHorizontal: boolean;\n    if (routingPoints.length > 1) {\n      isHorizontal =\n        index === 0\n          ? almostEquals(routingPoints[0].x, routingPoints[1].x)\n          : almostEquals(\n              routingPoints[routingPoints.length - 1].x,\n              routingPoints[routingPoints.length - 2].x\n            );\n    } else {\n      const nearestSide = otherAnchors.getNearestSide(refPoint);\n      isHorizontal = nearestSide === Side.TOP || nearestSide === Side.BOTTOM;\n    }\n    if (isHorizontal) {\n      if (\n        refPoint.y < currentAnchors.get(Side.TOP).y ||\n        refPoint.y > currentAnchors.get(Side.BOTTOM).y\n      ) {\n        const newPoint = { x: currentAnchors.get(Side.TOP).x, y: refPoint.y };\n        routingPoints.splice(index, 0, newPoint);\n        if (updateHandles) {\n          edge.children.forEach((child) => {\n            if (\n              child instanceof SRoutingHandle &&\n              child.pointIndex >= shiftIndex\n            )\n              ++child.pointIndex;\n          });\n          this.addHandle(\n            edge,\n            \"manhattan-50%\",\n            \"volatile-routing-point\",\n            shiftIndex\n          );\n        }\n      }\n    } else {\n      if (\n        refPoint.x < currentAnchors.get(Side.LEFT).x ||\n        refPoint.x > currentAnchors.get(Side.RIGHT).x\n      ) {\n        const newPoint = { x: refPoint.x, y: currentAnchors.get(Side.LEFT).y };\n        routingPoints.splice(index, 0, newPoint);\n        if (updateHandles) {\n          edge.children.forEach((child) => {\n            if (\n              child instanceof SRoutingHandle &&\n              child.pointIndex >= shiftIndex\n            )\n              ++child.pointIndex;\n          });\n          this.addHandle(\n            edge,\n            \"manhattan-50%\",\n            \"volatile-routing-point\",\n            shiftIndex\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * Add artificial routing points to keep all angles rectilinear.\n   *\n   * This makes edge morphing look a lot smoother, where RP positions are interpolated\n   * linearly probably resulting in non-rectilinear angles. We don't add handles for\n   * these additional RPs.\n   */\n  protected manhattanify(edge: SRoutableElement, routingPoints: Point[]) {\n    for (let i = 1; i < routingPoints.length; ++i) {\n      const isVertical =\n        Math.abs(routingPoints[i - 1].x - routingPoints[i].x) < 1;\n      const isHorizontal =\n        Math.abs(routingPoints[i - 1].y - routingPoints[i].y) < 1;\n      if (!isVertical && !isHorizontal) {\n        routingPoints.splice(i, 0, {\n          x: routingPoints[i - 1].x,\n          y: routingPoints[i].y,\n        });\n        ++i;\n      }\n    }\n  }\n\n  protected calculateDefaultCorners(\n    edge: SRoutableElement,\n    sourceAnchors: DefaultAnchors,\n    targetAnchors: DefaultAnchors,\n    options: ManhattanRouterOptions\n  ): Point[] {\n    const selfEdge = super.calculateDefaultCorners(\n      edge,\n      sourceAnchors,\n      targetAnchors,\n      options\n    );\n    if (selfEdge.length > 0) return selfEdge;\n    const bestAnchors = this.getBestConnectionAnchors(\n      edge,\n      sourceAnchors,\n      targetAnchors,\n      options\n    );\n    const sourceSide = bestAnchors.source;\n    const targetSide = bestAnchors.target;\n    const corners: Point[] = [];\n    const startPoint = sourceAnchors.get(sourceSide);\n    let endPoint = targetAnchors.get(targetSide);\n    switch (sourceSide) {\n      case Side.RIGHT:\n        switch (targetSide) {\n          case Side.BOTTOM:\n            corners.push({ x: endPoint.x, y: startPoint.y });\n            break;\n          case Side.TOP:\n            corners.push({ x: endPoint.x, y: startPoint.y });\n            break;\n          case Side.RIGHT:\n            corners.push({\n              x:\n                Math.max(startPoint.x, endPoint.x) +\n                1.5 * options.standardDistance,\n              y: startPoint.y,\n            });\n            corners.push({\n              x:\n                Math.max(startPoint.x, endPoint.x) +\n                1.5 * options.standardDistance,\n              y: endPoint.y,\n            });\n            break;\n          case Side.LEFT:\n            if (endPoint.y !== startPoint.y) {\n              corners.push({\n                x: (startPoint.x + endPoint.x) / 2,\n                y: startPoint.y,\n              });\n              corners.push({\n                x: (startPoint.x + endPoint.x) / 2,\n                y: endPoint.y,\n              });\n            }\n            break;\n        }\n        break;\n      case Side.LEFT:\n        switch (targetSide) {\n          case Side.BOTTOM:\n            corners.push({ x: endPoint.x, y: startPoint.y });\n            break;\n          case Side.TOP:\n            corners.push({ x: endPoint.x, y: startPoint.y });\n            break;\n          default:\n            endPoint = targetAnchors.get(Side.RIGHT);\n            if (endPoint.y !== startPoint.y) {\n              corners.push({\n                x: (startPoint.x + endPoint.x) / 2,\n                y: startPoint.y,\n              });\n              corners.push({\n                x: (startPoint.x + endPoint.x) / 2,\n                y: endPoint.y,\n              });\n            }\n            break;\n        }\n        break;\n      case Side.TOP:\n        switch (targetSide) {\n          case Side.RIGHT:\n            if (endPoint.x - startPoint.x > 0) {\n              corners.push({\n                x: startPoint.x,\n                y: startPoint.y - options.standardDistance,\n              });\n              corners.push({\n                x: endPoint.x + 1.5 * options.standardDistance,\n                y: startPoint.y - options.standardDistance,\n              });\n              corners.push({\n                x: endPoint.x + 1.5 * options.standardDistance,\n                y: endPoint.y,\n              });\n            } else {\n              corners.push({ x: startPoint.x, y: endPoint.y });\n            }\n            break;\n          case Side.LEFT:\n            if (endPoint.x - startPoint.x < 0) {\n              corners.push({\n                x: startPoint.x,\n                y: startPoint.y - options.standardDistance,\n              });\n              corners.push({\n                x: endPoint.x - 1.5 * options.standardDistance,\n                y: startPoint.y - options.standardDistance,\n              });\n              corners.push({\n                x: endPoint.x - 1.5 * options.standardDistance,\n                y: endPoint.y,\n              });\n            } else {\n              corners.push({ x: startPoint.x, y: endPoint.y });\n            }\n            break;\n          case Side.TOP:\n            corners.push({\n              x: startPoint.x,\n              y:\n                Math.min(startPoint.y, endPoint.y) -\n                1.5 * options.standardDistance,\n            });\n            corners.push({\n              x: endPoint.x,\n              y:\n                Math.min(startPoint.y, endPoint.y) -\n                1.5 * options.standardDistance,\n            });\n            break;\n          case Side.BOTTOM:\n            if (endPoint.x !== startPoint.x) {\n              corners.push({\n                x: startPoint.x,\n                y: (startPoint.y + endPoint.y) / 2,\n              });\n              corners.push({\n                x: endPoint.x,\n                y: (startPoint.y + endPoint.y) / 2,\n              });\n            }\n            break;\n        }\n        break;\n      case Side.BOTTOM:\n        switch (targetSide) {\n          case Side.RIGHT:\n            if (endPoint.x - startPoint.x > 0) {\n              corners.push({\n                x: startPoint.x,\n                y: startPoint.y + options.standardDistance,\n              });\n              corners.push({\n                x: endPoint.x + 1.5 * options.standardDistance,\n                y: startPoint.y + options.standardDistance,\n              });\n              corners.push({\n                x: endPoint.x + 1.5 * options.standardDistance,\n                y: endPoint.y,\n              });\n            } else {\n              corners.push({ x: startPoint.x, y: endPoint.y });\n            }\n            break;\n          case Side.LEFT:\n            if (endPoint.x - startPoint.x < 0) {\n              corners.push({\n                x: startPoint.x,\n                y: startPoint.y + options.standardDistance,\n              });\n              corners.push({\n                x: endPoint.x - 1.5 * options.standardDistance,\n                y: startPoint.y + options.standardDistance,\n              });\n              corners.push({\n                x: endPoint.x - 1.5 * options.standardDistance,\n                y: endPoint.y,\n              });\n            } else {\n              corners.push({ x: startPoint.x, y: endPoint.y });\n            }\n            break;\n          default:\n            endPoint = targetAnchors.get(Side.TOP);\n            if (endPoint.x !== startPoint.x) {\n              corners.push({\n                x: startPoint.x,\n                y: (startPoint.y + endPoint.y) / 2,\n              });\n              corners.push({\n                x: endPoint.x,\n                y: (startPoint.y + endPoint.y) / 2,\n              });\n            }\n            break;\n        }\n        break;\n    }\n    return corners;\n  }\n\n  protected getBestConnectionAnchors(\n    edge: SRoutableElement,\n    sourceAnchors: DefaultAnchors,\n    targetAnchors: DefaultAnchors,\n    options: ManhattanRouterOptions\n  ): { source: Side; target: Side } {\n    // distance is enough\n    let sourcePoint = sourceAnchors.get(Side.RIGHT);\n    let targetPoint = targetAnchors.get(Side.LEFT);\n    if (targetPoint.x - sourcePoint.x > options.standardDistance)\n      return { source: Side.RIGHT, target: Side.LEFT };\n\n    sourcePoint = sourceAnchors.get(Side.LEFT);\n    targetPoint = targetAnchors.get(Side.RIGHT);\n    if (sourcePoint.x - targetPoint.x > options.standardDistance)\n      return { source: Side.LEFT, target: Side.RIGHT };\n\n    sourcePoint = sourceAnchors.get(Side.TOP);\n    targetPoint = targetAnchors.get(Side.BOTTOM);\n    if (sourcePoint.y - targetPoint.y > options.standardDistance)\n      return { source: Side.TOP, target: Side.BOTTOM };\n\n    sourcePoint = sourceAnchors.get(Side.BOTTOM);\n    targetPoint = targetAnchors.get(Side.TOP);\n    if (targetPoint.y - sourcePoint.y > options.standardDistance)\n      return { source: Side.BOTTOM, target: Side.TOP };\n\n    // One additional point\n    sourcePoint = sourceAnchors.get(Side.RIGHT);\n    targetPoint = targetAnchors.get(Side.TOP);\n    if (\n      targetPoint.x - sourcePoint.x > 0.5 * options.standardDistance &&\n      targetPoint.y - sourcePoint.y > options.standardDistance\n    )\n      return { source: Side.RIGHT, target: Side.TOP };\n\n    targetPoint = targetAnchors.get(Side.BOTTOM);\n    if (\n      targetPoint.x - sourcePoint.x > 0.5 * options.standardDistance &&\n      sourcePoint.y - targetPoint.y > options.standardDistance\n    )\n      return { source: Side.RIGHT, target: Side.BOTTOM };\n\n    sourcePoint = sourceAnchors.get(Side.LEFT);\n    targetPoint = targetAnchors.get(Side.BOTTOM);\n    if (\n      sourcePoint.x - targetPoint.x > 0.5 * options.standardDistance &&\n      sourcePoint.y - targetPoint.y > options.standardDistance\n    )\n      return { source: Side.LEFT, target: Side.BOTTOM };\n\n    targetPoint = targetAnchors.get(Side.TOP);\n    if (\n      sourcePoint.x - targetPoint.x > 0.5 * options.standardDistance &&\n      targetPoint.y - sourcePoint.y > options.standardDistance\n    )\n      return { source: Side.LEFT, target: Side.TOP };\n\n    sourcePoint = sourceAnchors.get(Side.TOP);\n    targetPoint = targetAnchors.get(Side.RIGHT);\n    if (\n      sourcePoint.y - targetPoint.y > 0.5 * options.standardDistance &&\n      sourcePoint.x - targetPoint.x > options.standardDistance\n    )\n      return { source: Side.TOP, target: Side.RIGHT };\n\n    targetPoint = targetAnchors.get(Side.LEFT);\n    if (\n      sourcePoint.y - targetPoint.y > 0.5 * options.standardDistance &&\n      targetPoint.x - sourcePoint.x > options.standardDistance\n    )\n      return { source: Side.TOP, target: Side.LEFT };\n\n    sourcePoint = sourceAnchors.get(Side.BOTTOM);\n    targetPoint = targetAnchors.get(Side.RIGHT);\n    if (\n      targetPoint.y - sourcePoint.y > 0.5 * options.standardDistance &&\n      sourcePoint.x - targetPoint.x > options.standardDistance\n    )\n      return { source: Side.BOTTOM, target: Side.RIGHT };\n\n    targetPoint = targetAnchors.get(Side.LEFT);\n    if (\n      targetPoint.y - sourcePoint.y > 0.5 * options.standardDistance &&\n      targetPoint.x - sourcePoint.x > options.standardDistance\n    )\n      return { source: Side.BOTTOM, target: Side.LEFT };\n\n    // Two points\n    // priority NN >> EE >> NE >> NW >> SE >> SW\n    sourcePoint = sourceAnchors.get(Side.TOP);\n    targetPoint = targetAnchors.get(Side.TOP);\n    if (\n      !includes(targetAnchors.bounds, sourcePoint) &&\n      !includes(sourceAnchors.bounds, targetPoint)\n    ) {\n      if (sourcePoint.y - targetPoint.y < 0) {\n        if (\n          Math.abs(sourcePoint.x - targetPoint.x) >\n          (sourceAnchors.bounds.width + options.standardDistance) / 2\n        )\n          return { source: Side.TOP, target: Side.TOP };\n      } else {\n        if (\n          Math.abs(sourcePoint.x - targetPoint.x) >\n          targetAnchors.bounds.width / 2\n        )\n          return { source: Side.TOP, target: Side.TOP };\n      }\n    }\n\n    sourcePoint = sourceAnchors.get(Side.RIGHT);\n    targetPoint = targetAnchors.get(Side.RIGHT);\n    if (\n      !includes(targetAnchors.bounds, sourcePoint) &&\n      !includes(sourceAnchors.bounds, targetPoint)\n    ) {\n      if (sourcePoint.x - targetPoint.x > 0) {\n        if (\n          Math.abs(sourcePoint.y - targetPoint.y) >\n          (sourceAnchors.bounds.height + options.standardDistance) / 2\n        )\n          return { source: Side.RIGHT, target: Side.RIGHT };\n      } else if (\n        Math.abs(sourcePoint.y - targetPoint.y) >\n        targetAnchors.bounds.height / 2\n      )\n        return { source: Side.RIGHT, target: Side.RIGHT };\n    }\n\n    // Secondly, judge NE NW is available\n    sourcePoint = sourceAnchors.get(Side.TOP);\n    targetPoint = targetAnchors.get(Side.RIGHT);\n    if (\n      !includes(targetAnchors.bounds, sourcePoint) &&\n      !includes(sourceAnchors.bounds, targetPoint)\n    )\n      return { source: Side.TOP, target: Side.RIGHT };\n\n    targetPoint = targetAnchors.get(Side.LEFT);\n    if (\n      !includes(targetAnchors.bounds, sourcePoint) &&\n      !includes(sourceAnchors.bounds, targetPoint)\n    )\n      return { source: Side.TOP, target: Side.LEFT };\n\n    // Finally, judge SE SW is available\n    sourcePoint = sourceAnchors.get(Side.BOTTOM);\n    targetPoint = targetAnchors.get(Side.RIGHT);\n    if (\n      !includes(targetAnchors.bounds, sourcePoint) &&\n      !includes(sourceAnchors.bounds, targetPoint)\n    )\n      return { source: Side.BOTTOM, target: Side.RIGHT };\n\n    targetPoint = targetAnchors.get(Side.LEFT);\n    if (\n      !includes(targetAnchors.bounds, sourcePoint) &&\n      !includes(sourceAnchors.bounds, targetPoint)\n    )\n      return { source: Side.BOTTOM, target: Side.LEFT };\n\n    // Only to return to the\n    return { source: Side.RIGHT, target: Side.BOTTOM };\n  }\n}\n","import { AvoidLib } from '../../Hnatiuj.Adaptagrams/';\nimport { LibavoidRouter } from './libavoid-router';\n\nexport async function load() {\n    console.log(0);\n    await AvoidLib.load();\n    console.log(1);\n}\n\nexport { LibavoidRouter };\n"],"names":["root","factory","exports","module","define","amd","global","__decorate","this","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","value","inversify_1","types_1","async_1","smodel_factory_1","animation_frame_syncer_1","set_model_1","undo_redo_1","action_1","ActionDispatcher","postponedActions","requests","Map","prototype","initialize","_this","initialized","actionHandlerRegistryProvider","then","registry","actionHandlerRegistry","handleAction","SetModelAction","EMPTY_ROOT","dispatch","action","undefined","blockUntil","handleBlocked","diagramLocker","isAllowed","dispatchAll","actions","Promise","all","map","request","requestId","reject","Error","deferred","Deferred","set","promise","kind","UndoAction","KIND","commandStack","undo","RedoAction","redo","isResponseAction","get","responseId","RejectAction","rejectAction","message","logger","warn","detail","resolve","log","handlers","error","isRequestAction","promises","_i","handlers_1","result","handle","isAction","push","execute","predicate","actions_1","a","inject","TYPES","ActionHandlerRegistryProvider","Function","ICommandStack","ILogger","AnimationFrameSyncer","IDiagramLocker","injectable","__extends","b","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","create","__param","paramIndex","decorator","registry_1","inversify_2","ActionHandlerRegistry","_super","registrations","initializers","call","forEach","registration","register","actionKind","initializer","initializeActionHandler","multiInject","ActionHandlerRegistration","optional","IActionHandlerInitializer","MultiInstanceRegistry","configureActionHandler","context","constr","isInjectable","name","isBound","bind","toSelf","toDynamicValue","ctx","container","object_1","object","nextRequestId","generateRequestId","toString","LabeledAction","label","icon","isLabeledAction","element","DefaultDiagramLocker","tasks","endTasks","triggered","isAvailable","requestAnimationFrame","onNextFrame","task","trigger","onEndOfNextFrame","time","run","setTimeout","easing_1","Animation","ease","easeInOut","start","frames","syncer","lambda","dtime","t","Math","min","duration","current","tween","modelChanged","update","finalModel","CompoundAnimation","model","components","include","animation","_a","x","CommandActionHandler","commandRegistration","CommandActionHandlerInitializer","CommandRegistration","configureCommand","childContainer","Container","parent","Action","toConstantValue","overrideCommandStackOptions","options","defaultOptions","CommandStackOptions","safeAssign","__assign","assign","s","n","apply","smodel_1","command_1","CommandStack","undoStack","redoStack","offStack","currentPromise","main","modelFactory","createRoot","hidden","popup","state","enumerable","configurable","executeAll","commands","command","handleCommand","mergeOrPush","thenUpdate","undoOffStackSystemCommands","undoPreceedingSystemCommands","isBlockUndo","pop","pushToUndoStack","redoFollowingSystemCommands","operation","beforeResolve","HiddenCommand","PopupCommand","commandResult","createContext","newState","copyState","newModel","SModelRoot","cause","undoHistoryLimit","splice","updateHidden","updatePopup","currentModel","modelViewer","viewerProvider","hiddenModelViewer","popupModelViewer","isPushToOffStack","lastCommand","MergeableCommand","merge","isPushToUndoStack","defaultDuration","SystemCommand","ResetCommand","IModelFactory","IViewerProvider","postConstruct","Command","ModelRequestCommand","retrieveResult","actionDispatcher","IActionDispatcher","initialize_canvas_1","logging_1","action_dispatcher_1","action_handler_1","command_stack_1","viewer_1","viewer_options_1","mouse_tool_1","key_tool_1","vnode_postprocessor_1","view_1","viewer_cache_1","dom_helper_1","id_postprocessor_1","command_registration_1","css_class_postprocessor_1","tool_manager_1","tool_1","ui_extension_registry_1","diagram_locker_1","defaultContainerModule","ContainerModule","_unbind","to","NullLogger","inSingletonScope","LogLevel","SModelRegistry","toProvider","ViewRegistry","SModelFactory","IActionDispatcherProvider","ICommandStackProvider","ModelViewer","HiddenModelViewer","PopupModelViewer","createChild","IViewer","toService","ViewerCache","ViewerOptions","defaultViewerOptions","PatcherProvider","DOMHelper","ModelRendererFactory","toFactory","targetKind","processors","args","viewRegistry","ModelRenderer","IdPostprocessor","IVNodePostprocessor","HiddenVNodePostprocessor","CssClassPostprocessor","MouseTool","KeyTool","FocusFixPostprocessor","PopupVNodePostprocessor","PopupMouseTool","InitializeCanvasBoundsCommand","CanvasBoundsInitializer","SetModelCommand","IToolManager","ToolManager","KeyListener","DefaultToolsEnablingKeyListener","ToolManagerActionHandler","EnableDefaultToolsAction","EnableToolsAction","UIExtensionRegistry","SetUIExtensionVisibilityCommand","MousePositionTracker","MouseListener","geometry_1","browser_1","vnode","isValidDimension","canvasBounds","rootAndVnode","postUpdate","domElement","elm","oldBounds","newBounds","getBoundsInPage","almostEquals","y","width","height","InitializeCanvasBoundsAction","bounds","getBoundingClientRect","scroll","getWindowScroll","left","top","newCanvasBounds","RequestModelAction","newRoot","oldRoot","createElement","schema","child","hasKey","type","regElement","SChildElement","initializeChild","initializeRoot","createSchema","isReserved","SParentElement","children","initializeElement","propertyName","indexOf","obj","descriptor","getPrototypeOf","initializeParent","isParent","childSchema","index","add","freeze","id","defaultFeatures","getDefaultFeatures","features","enable","featureSet_1","createFeatureSet","DEFAULT_FEATURES","SModelElementRegistration","FactoryRegistry","defaults","custom","featureSet","Set","f","disable","_b","_c","translatePoint","point","source","localToParent","targetTrace","parentToLocal","registerModelElement","getBasicType","colonIndex","substring","getSubType","findElement","elementId","findParent","findParentByFeature","translateBounds","upperLeft","lowerRight","containsSome","find","elements","some","el","getById","test","iterable_1","SModelElement","hasFeature","feature","has","remove","removeAll","filter","move","newIndex","isBounds","SModelIndex","EMPTY_BOUNDS","writable","ID_CHARS","createRandomId","charAt","floor","random","id2element","contains","id2parent","getParent","getRoot","parent_1","getAttachedElements","mapIterable","keyboard_1","tools","defaultTools","actives","concat","disableActiveTools","tool","enableDefaultTools","toolIds","toolId","managedTools","registerDefaultTools","tools_1","registerTools","tools_2","toolManager","keyDown","event","matchesKeystroke","Symbol","IAnchorComputer","IButtonHandler","ICommandPaletteActionProvider","ICommandPaletteActionProviderRegistry","IContextMenuItemProvider","IContextMenuProviderRegistry","IContextMenuService","IContextMenuServiceProvider","IEdgeRouter","IEdgeRoutePostprocessor","IEditLabelValidationDecorator","IEditLabelValidator","HoverState","LayoutRegistration","LayoutRegistry","Layouter","IModelLayoutEngine","ModelSource","ModelSourceProvider","IPopupModelProvider","PopupMouseListener","ISnapper","SvgExporter","IUIExtension","ViewRegistration","__spreadArrays","il","j","jl","extensions","extension","InstanceRegistry","SetUIExtensionVisibilityAction","extensionId","visible","contextElementsId","show","hide","AbstractUIExtension","contextElementIds","activeElement","document","containerElement","onBeforeShow","setContainerVisible","restoreFocus","focusedElement","focus","baseDiv","getElementById","getOrCreateContainer","initializeContents","insertBefore","firstChild","baseDivId","classList","containerClass","style","visibility","opacity","vnode_utils_1","smodel_utils_1","cssClasses","cssClass","setClass","subType","getPrefix","viewerOptions","createUniqueDOMElementId","findSModelIdByDOMElement","replace","attrs","getAttrs","domHelper","keyListeners","keyListener","deregister","handleEvent","methodName","listener","reduce","preventDefault","keyUp","on","mouseListeners","mouseListener","getTargetElement","parentNode","focusOnMouseEvent","actionOrPromise","mouseOver","mouseOut","mouseEnter","mouseLeave","mouseDown","mouseMove","mouseUp","wheel","doubleClick","lastPosition","offsetX","offsetY","snabbdom_1","ThunkView","render","h","selector","hook","init","prepatch","fn","renderAndDecorate","watchedArgs","thunk","doRender","copyToThunk","data","text","cur","oldVnode","old","equals","oldArg","newArg","isArray","keys","isThunk","jsx_1","findArgValue","arg","parentArgs","registerDefaults","EmptyView","missing","MissingView","configureView","configureModelElement","modelConstr","viewConstr","svg","position","ORIGIN_POINT","delegate","cachedModel","isCacheEmpty","scheduleUpdate","baseClass","hiddenDiv","hiddenClass","popupDiv","popupClass","popupClosedClass","needsClientLayout","needsServerLayout","popupOpenDelay","popupCloseDelay","configureViewerOptions","opt","rebind","overrideViewerOptions","thunk_view_1","postprocessors","processor","renderElement","renderChildren","patcher","createModules","propsModule","attributesModule","classModule","styleModule","eventListenersModule","modelRendererFactory","patcherProvider","renderer","newVDOM","html","lastVDOM","hadFocus","hasFocus","copyClassesFromVNode","placeholder","window","addEventListener","onWindowResize","copyClassesFromElement","lastRootVNode","lastElement","vdom","actiondispatcher","hiddenPostprocessors","hiddenRenderer","hiddenModel","hiddenVNode","setAttr","lastHiddenVDOM","body","appendChild","popupPostprocessors","popupRenderer","popupClosed","inlineStyle","lastPopupVDOM","sel","startsWith","getClass","getData","setNamespace","node","ns","item","mergeStyle","val","getOn","model_1","AbstractLayout","layout","layouter","boundsData","getBoundsData","getLayoutOptions","childrenSize","getChildrenSize","maxWidth","paddingFactor","resizeContainer","max","getFixedContainerBounds","paddingLeft","paddingRight","maxHeight","paddingTop","paddingBottom","offset","layoutChildren","getFinalContainerBounds","boundsChanged","lastOffset","minWidth","minHeight","layoutOptions","currentContainer","isBoundsAware","isLayoutContainer","containerOptions","currentOffset","isLayoutableChild","childOptions","getChildLayoutOptions","layoutChild","getDx","hAlign","getDy","vAlign","spread","allOptions","reverse","getDefaultLayoutOptions","SetBoundsAction","RequestBoundsAction","ComputedBoundsAction","revision","alignments","LayoutAction","SetBoundsCommand","newPosition","newSize","RequestBoundsCommand","bounds_manipulation_1","hidden_bounds_updater_1","layout_1","hbox_layout_1","vbox_layout_1","stack_layout_1","boundsModule","HiddenBoundsUpdater","configureLayout","VBoxLayouter","HBoxLayouter","StackLayouter","abstract_layout_1","isFirst","hGap","dy","BoundsData","element2boundsData","isSizeable","alignmentChanged","getBoundsFromDOM","resizes","realignments","resize","alignment","newAlignment","clear","boundingBox","getBounds","isAlignable","getBBox","layouts","layoutKind","StatefulLayouter","layoutRegistry","toBeLayouted","doLayout","doFindChildrenAtPosition","matches","includes","newPoint","boundsFeature","layoutContainerFeature","layoutableChildFeature","alignFeature","getAbsoluteBounds","boundsAware","getAbsoluteClientBounds","svgElementId","svgElement","rect","scroll_1","offsetParent","HTMLElement","offsetLeft","offsetTop","findChildrenAtPosition","SShapeElement","size","EMPTY_DIMENSION","ResizeAnimation","elementResizes","elementResize","newDimension","toDimension","fromDimension","dx","vGap","ShapeView","isVisible","ab","ButtonHandlerRegistry","buttonHandlerFactories","TYPE","button_handler_1","buttonModule","model_2","SButton","enabled","fadeFeature","select_1","center_fit_1","CommandPaletteActionProviderRegistry","actionProviders","getActions","lastMousePosition","actionLists","provider","acc","RevealNamedElementActionProvider","createSelectActions","SelectAllAction","modelRoot","toArray","isNameable","nameable","SelectAction","CenterAction","ui_extension_1","action_providers_1","configureAutocomplete","CommandPalette","loadingIndicatorClasses","xOffset","yOffset","defaultWidth","debounceWaitMs","noCommandsMsg","paletteIndex","CommandPalette_1","ID","contextActions","inputElement","autoCompleteResult","autocompleteSettings","hideIfEscapeEvent","cylceIfInvokePaletteKey","onblur","isInvokePaletteKey","cycle","selectedElementIds","selectedElements","e","isSelectable","selected","input","emptyMsg","className","showOnFocus","minLength","fetch","updateAutoCompleteActions","onSelect","currentValue","renderLabeledActionSuggestion","customize","inputRect","customizeSuggestionContainer","executeAction","onLoading","filterActions","onLoaded","actionProviderRegistry","mousePositionTracker","lastPositionOnDiagram","reason","loadingIndicator","success","removeChild","itemElement","wordMatcher","espaceForRegExp","split","join","regex","RegExp","renderIcon","innerHTML","match","filterText","toLowerCase","every","word","destroy","actionDispatcherProvider","toActionArray","CommandPaletteKeyListener","command_palette_1","commandPaletteModule","toAnchor","anchor","menu_providers_1","mouse_listener_1","contextMenuModule","ContextMenuMouseListener","ContextMenuProviderRegistry","delete_1","menuProviders","getItems","menues","flattenAndRestructure","menuItems","_loop_1","menuItem","parentId","fragments","matchingParent","nextParents","_loop_2","fragment","fragments_1","menuItemsWithParentId_1","DeleteContextMenuItemProvider","from","isSelected","isDeletable","sortString","group","DeleteElementAction","isEnabled","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","__generator","g","_","sent","trys","ops","verb","iterator","op","TypeError","contextMenuService","menuProvider","button","showContextMenu","menuService","mousePosition","isTargetSelected","selectableTarget","restoreSelection","model_3","routing_1","DecorationPlacer","isDecoration","getPosition","translate","SRoutableElement","route","edgeRouterRegistry","EdgeRouterRegistry","views_1","decoration_placer_1","decorationModule","SIssueMarker","IssueMarkerView","decorationFeature","SDecoration","hoverFeedbackFeature","popupFeature","SIssue","marker","maxSeverity","getMaxSeverity","transform","getPath","currentSeverity","issues","severity","intersection_finder_1","edgeIntersectionModule","IntersectionFinder","__importDefault","mod","__esModule","tinyqueue_1","sweepline_1","isIntersectingRoutedPoint","routedPoint","BY_X_THEN_Y","intersectionPoint","routing","intersections","addToRouting","eventQueue","checkWhichEventIsLeft","routes","routeId","addRoute","runSweep","intersections_1","intersection","routable1","routable2","addIntersectionToRoutedPoint","segmentIndex1","segmentIndex2","segmentIndex","segment","intersectingRoutedPoint","e1","e2","queue","currentPoint","nextPoint","SweepEvent","otherEvent","isLeftEndpoint","edgeId","Segment","leftSweepEvent","rightSweepEvent","checkWhichSegmentHasRightEndpointFirst","seg1","seg2","getSegmentIndex","intersectionOfSegments","seg1Line","PointToPointLine","seg2Line","intersectionPoints","outQueue","event_1","otherSegment","edge_layout_1","edgeLayoutModule","EdgeLayoutPostprocessor","sgraph_1","isEdgeLayoutable","SEdge","placement","getEdgePlacement","edge","router","routerKind","pointOnEdge","pointAt","derivativeOnEdge","derivativeAt","angle","toDegrees","atan2","rotate","flippedAngle","abs","getRotatedAlignment","getAlignment","flip","side","allPlacements","edgePlacement","DEFAULT_EDGE_PLACEMENT","quadrant","getQuadrant","midLeft","topLeft","topRight","midRight","bottomRight","bottomLeft","orientation","linear","linearFlip","p0","p1","p2","p3","edgeLayoutFeature","checkEdgeLayoutable","EdgePlacement","creatingOnDragFeature","isCreatingOnDrag","createAction","CreateElementAction","containerId","elementSchema","CreateElementCommand","newElement","deletableFeature","elementIds","ResolvedDelete","DeleteElementCommand","resolvedDeletes","resolvedDelete","svg_views_1","edit_label_1","edit_label_ui_1","edit_routing_1","reconnect_1","edgeEditModule","SwitchEditModeCommand","ReconnectCommand","SDanglingAnchor","EmptyGroupView","labelEditModule","EditLabelMouseListener","EditLabelKeyListener","ApplyLabelEditCommand","labelEditUiModule","EditLabelAction","EditLabelActionHandler","EditLabelUI","commit_model_1","zoom_1","isEditLabelAction","labelId","validationTimeout","isActive","blockApplyEditOnInvalidInput","isCurrentLabelValid","EditLabelUI_1","textAreaElement","onkeydown","applyLabelEditOnEvent","configureAndAdd","validateLabelIfContentChange","applyLabelEdit","isMultiLine","code","modifiers","previousLabelContent","performLabelValidation","editControl","validateLabel","ApplyLabelEditAction","CommitModelAction","clearTimeout","reason_1","labelValidator","validate","showValidationResult","clearValidationResult","validationDecorator","dispose","hasEditableLabel","labelElement","getEditableLabels","setPosition","applyTextContents","applyFontStyling","zoom","getZoom","editControlPositionCorrection","editControlDimension","HTMLTextAreaElement","selectionStart","selectionEnd","scrollTop","scrollLeft","setSelectionRange","getComputedStyle","font","fontStyle","fontFamily","fontSize","String","Number","parseInt","fontWeight","lineHeight","isEditableLabel","ResolvedLabelEdit","resolvedLabelEdit","oldLabel","newLabel","editableLabel","getEditableLabel","editableLabels","isWithEditableLabel","SwitchEditModeAction","elementsToActivate","elementsToDeactivate","handlesToRemove","SRoutingHandle","shouldRemoveHandle","doExecute","entry","routingPoints","pointIndex","editMode","danglingAnchor","original","sourceId","targetId","canEditRouting","createRoutingHandles","rp","editFeature","editLabelFeature","withEditLabelFeature","ReconnectAction","routableId","newSourceId","newTargetId","before","takeSnapshot","applyReconnect","after","memento","applySnapshot","expand_1","expandModule","toConstructor","ExpandButtonHandler","CollapseExpandAction","expandIds","collapseIds","CollapseExpandAllAction","expand","buttonPressed","expandable","isExpandable","expanded","expandFeature","ExpandButtonView","path","export_1","svg_exporter_1","exportSvgModule","ExportSvgKeyListener","ExportSvgPostprocessor","ExportSvgCommand","model_4","RequestExportSvgAction","isExportable","isViewport","isHoverable","hoverFeedback","svgExporter","exportFeature","ExportSvgAction","div","firstElementChild","tagName","createSvg","svgElementOrig","serializer","XMLSerializer","svgCopy","serializeToString","iframe","contentWindow","docCopy","open","write","close","svgElementNew","removeAttribute","copyStyles","setAttribute","svgCode","skipedProperties","sourceStyle","targetStyle","diffStyle","getPropertyValue","childNodes","sourceChild","targetChild","Element","allBounds","one","two","combine","fade_1","fadeModule","ElementFader","animation_1","FadeAnimation","elementFades","removeAfterFadeOut","elementFade","isFadeable","hover_1","popup_position_updater_1","viewport_1","move_1","hoverModule","PopupPositionUpdater","HoverMouseListener","PopupHoverMouseListener","HoverKeyListener","mouseOverTimer","mouseOutTimer","popupOpen","previousPopupElement","ClosePopupActionHandler","HoverFeedbackCommand","SetPopupModelCommand","FitToScreenCommand","CenterCommand","SetViewportCommand","MoveCommand","HoverFeedbackAction","mouseoverElement","mouseIsOver","modelElement","RequestPopupModelAction","SetPopupModelAction","AbstractHoverMouseListener","mouseIsDown","stopMouseOutTimer","startMouseOutTimer","stopMouseOverTimer","computePopupBounds","targetBounds","boundsInWindow","distRight","distBottom","allowSidePosition","round","leftPopupPosition","canvasRightBorderPosition","topPopupPosition","canvasBottomBorderPosition","distance","startMouseOverTimer","popupBounds","pageX","pageY","popupTarget","hasPopupFeature","lastHoverFeedbackElementId","hoverTarget","elementUnderMouse","elementFromPoint","isSprottyPopup","parentElement","closeOnMouseMove","boundingClientRect","innerHeight","pageYOffset","innerWidth","pageXOffset","moveModule","MoveMouseListener","LocationPostprocessor","isLocateable","moveFeature","isMoveable","create_on_drag_1","model_5","model_6","MoveAction","moves","animate","finished","resolvedMoves","edgeMementi","MoveCommand_1","edge2handleMoves","attachedEdgeShifts","resolvedMove","resolveHandleMove","movesByEdge","resolvedMove_1","resolveElementMove","existingDelta","newDelta","subtract","toPosition","fromPosition","delta","doMove","undoMove","MoveAnimation","MorphEdgesAnimation","getHandlePosition","edge2move","res","applyHandleMoves","updateHandles","cleanupRoutingPoints","other","otherMove","otherElementId","existingMove","otherMemento","existingMemento","edgeMemento","otherMemento_1","elementMoves","elementMove","originalMementi","end","startRoute","routedPoints","endRoute","maxRoutingPoints","startExpandedRoute","growToSize","endExpandedRoute","midPoint","center","morph","newRoutingPoints","closestSnapshot","newSnapshot","routingHandles","targetSize","diff","deltaDiff","deltaSmaller","nextInsertion","pos","insertions","hasDragged","elementId2startPos","moveable","isRoutingHandle","startDragPosition","edgeInProgressID","edgeInProgressTargetHandleID","buttons","collectStartPositions","moveAction","getElementMoves","isChildOfSelected","isFinished","viewport","startPosition","snap","shiftKey","isSnap","snapper","hasReconnected","parent_2","handlePos","handlePosAbs","newEnd","isConnectable","canConnect","edgeInProgress","deleteIds_1","ali","CenterGridSnapper","gridX","gridY","nameFeature","open_1","openModule","OpenMouseListener","openFeature","isOpenable","OpenAction","openableTarget","DIAMOND_ANCHOR_KIND","ELLIPTIC_ANCHOR_KIND","RECTANGULAR_ANCHOR_KIND","AnchorComputerRegistry","anchors","anchorKind","defaultAnchorKind","manhattan_edge_router_1","polyline_edge_router_1","manhattan_anchors_1","polyline_anchors_1","anchor_1","routingModule","ManhattanEdgeRouter","ManhattanEllipticAnchor","ManhattanRectangularAnchor","ManhattanDiamondAnchor","PolylineEdgeRouter","EllipseAnchor","RectangleAnchor","DiamondAnchor","Side","DefaultAnchors","edgeParent","right","bottom","getNearestSide","leftDistance","euclideanDistance","rightDistance","topDistance","bottomDistance","currentNearestSide","LEFT","currentMinDist","RIGHT","TOP","BOTTOM","LinearEdgeRouter","segments","calculateSegment","segmentStart","segmentEnd","segmentLengths","totalLength","currentLenght","tAsLenght","newLength","addHandle","routingPointIndex","getInnerHandlePosition","findRouteSegment","handleIndex","getIndex","route_1","getTranslatedAnchor","connectable","refPoint","refContainer","anchorCorrection","translatedRefPoint","anchorComputer","getAnchorComputer","strokeCorrection","strokeWidth","getAnchor","anchorRegistry","remainingMoves","slice","applyInnerHandleMoves","addRoutingPoints","sourceAnchors","targetAnchors","resetRoutingPointsOnReconnect","getOptions","corners","calculateDefaultCorners","maxPointIndex_1","hasChanged","newSource","SConnectableElement","newTarget","getSelfEdgeIndex","snapshot","selfEdgeIndex","standardDist","standardDistance","selfEdgeOffset","outgoingEdges","otherEdge","ManhattanRectangularAnchor_1","ManhattanDiamondAnchor_1","outline","refLine","ManhattanEllipticAnchor_1","refRelative","sqrt","linear_edge_router_1","minimalPointDistance","routedCorners","createRoutedCorners","sourceRefPoint","sourceAnchor","sourceAnchorCorrection","targetRefPoint","targetAnchor","targetAnchorCorrection","corner","routingPointsCopy","routingPoint","commitRoute","fraction","getFraction","correctedX","correctX","correctedY","correctY","alignX","alignY","removeHandle","manhattanDistance","addAdditionalCorner","manhattanify","toBeRemoved","currentAnchors","otherAnchors","isHorizontal","shiftIndex","nearestSide","isVertical","selfEdge","bestAnchors","getBestConnectionAnchors","sourceSide","targetSide","startPoint","endPoint","sourcePoint","targetPoint","getRouteBounds","NaN","isNaN","connectableFeature","getAbsoluteRouteBounds","getIncomingEdges","getOutgoingEdges","routable","role","selectFeature","normX","normY","finder","NearestPointFinder","xTop","getXIntersection","addCandidate","xBottom","yLeft","getYIntersection","yRight","best","yIntersection","centerPoint","xIntersection","currentDist","dist","currentBest","referenceLine","closestDiamondSide","Diamond","closestSideLine","anchorPoint","shiftTowards","PolylineEdgeRouter_1","removeAngleThreshold","rpCount","startRef","endRef","pn","maxDistance","filterEditModeHandles","curr","prev","prevDiff","nextDiff","angleBetweenPoints","PI","centerOfLine","points","mergeElementsOfRoutersAll","elements1","elements2","routerKey","edgeRouters","defaultKind","routeAllChildren","doRouteAllChildren","multipleRoutersEdges","elementsRouting","routeAll","setAll","_d","postProcessors","EdgeRouting","newChildrenOfRoutesAll","childRouter","childRouting","edgeRouting","routesMap","otherRoutes","RoutableView","selectModule","SelectCommand","SelectAllCommand","GetSelectionCommand","SelectKeyboardListener","SelectMouseListener","request_command_1","zorder_1","selectedElementsIDs","deselectedElementsIDs","select","GetSelectionAction","SelectionResult","deselected","previousSelection","selectAll","wasSelected","buttonHandlerRegistry","buttonHandler","selectableTarget_1","deselect","isCtrlOrCmd","BringToFrontAction","routableDeselect","selection","undoRedoModule","UndoRedoKeyListener","isMac","update_model_1","updateModule","UpdateModelCommand","forEachMatch","matchResult","callback","ModelMatcher","matchLeft","matchRight","leftParentId","rightParentId","applyMatches","matches_1","newElementInserted","viewport_root_1","model_matching_1","resize_1","UpdateModelAction","performUpdate","convertToMatchResult","animationOrRoot","computeAnimation","matches_2","leftRoot","rightRoot","matches_3","converted","animationData","fades","updateElement","leftCopy","animations","createAnimations","leftPos","rightPos","ViewportRootElement","movesMap","resizesMap","retainZoom","FitToScreenAction","padding","maxZoom","BoundsAwareViewportCommand","oldViewport","allBounds_1","getElementIds","boundsInViewport","b0","b1","newViewport","getNewViewport","equal","ViewportAnimation","vp1","vp2","Boolean","Infinity","CenterKeyboardListener","viewportModule","GetViewportCommand","ScrollMouseListener","ZoomMouseListener","viewportFeature","isScrollable","lastScrollPosition","SetViewportAction","GetViewportAction","ViewportResult","SetViewportCommand_1","elem","zoomFactor","exp","isZoomable","newZoom","getZoomFactor","viewportOffset","getViewportOffset","offsetFactor","windowScroll","clientX","clientY","deltaMode","DOM_DELTA_PAGE","deltaY","DOM_DELTA_LINE","zorderModule","BringToFrontCommand","elementIDs","addToSelection","includeConnectedEdges","incomingEdges","bringToFront","childrenLength","sgraph_factory_1","graphModule","unbind","SGraphFactory","defaultGraphFeatures","SGraph","defaultNodeFeatures","SNode","defaultPortFeatures","SPort","defaultEdgeFeatures","defaultLabelFeatures","SLabel","defaultCompartmentFeatures","SCompartment","defaultButtonFeatures","isNodeSchema","isPortSchema","isEdgeSchema","isLabelSchema","isCompartmentSchema","isButtonSchema","isGraphSchema","model_7","model_8","SGraphIndex","outgoing","incoming","sourceArr","targetArr","FluentIterableImpl","nextOutgoingIndex","nextIncomingIndex","views_2","SGraphView","PolylineEdgeView","renderDanglingEdge","renderLine","renderAdditionals","firstPoint","title","JumpingPolylineEdgeView","jumpOffsetBefore","jumpOffsetAfter","skipOffsetBefore","skipOffsetAfter","intersectionPath","intersectingPoint","sort","otherLineSegment","getOtherLineSegment","lineSegment","getLineSegment","slopeOrMax","createJumpPath","createSkipPath","currentEdge","otherEdgeId","anchorBefore","anchorAfter","rotation","offsetBefore","offsetAfter","PolylineEdgeViewWithGapsOnIntersections","SRoutingHandleView","theRoute","cx","cy","getRadius","SLabelView","SCompartmentView","compartment","__export","m","di_config_1","defaultModule","di_config_2","di_config_3","di_config_4","di_config_5","di_config_6","di_config_7","di_config_8","di_config_9","di_config_10","exportModule","di_config_11","di_config_12","di_config_13","di_config_14","di_config_15","di_config_16","di_config_17","di_config_18","di_config_19","di_config_20","di_config_21","modelSourceModule","virtualize_1","PreRenderedView","ShapedPreRenderedElement","correctNamespace","ForeignObjectView","foreignObjectContents","requiredFeatures","namespace","HtmlRootView","classes","modulesNS","normalizeAttrs","defNS","idx","addAttr","modname","JSX","tag","jsx","CircularNode","RectangularNode","DiamondNode","CircularPort","RectangularPort","HtmlRoot","PreRenderedElement","ForeignObjectElement","loadDefaultModules","modules","exclude","load","SvgViewportView","CircularNodeView","radius","RectangularNodeView","DiamondNodeView","diamond","svgStr","topPoint","rightPoint","bottomPoint","leftPoint","buildVNodeData","_attrs","memo","entityRegex","entity","textContent","unescapeEntities","addStyle","styleProp","$1","$2","toUpperCase","transformName","trim","parseStyle","addClass","parseClass","vnodeMap","delimited","toVNode","nodeType","attributes","attr","vn","nodeName","lastData","parser","DOMParser","vnodes","doc","parseFromString","func","stack","setChild","_node","sibling","nextSibling","recurse","model_source_1","CommitModelCommand","doCommit","doSetOriginal","commitResult","modelSource","commitModel","originalModel","ComputedBoundsApplicator","file_saver_1","isActionMessage","ServerStatusAction","DiagramServer","currentRoot","clientId","handleLocally","forwardToServer","sendMessage","messageReceived","JSON","parse","storeNewModel","handleComputedBounds","handleRequestModel","handleExportSvgAction","handleServerStateAction","lastSubmittedModelType","newOptions","newAction","computedBoundsApplicator","blob","Blob","saveAs","previousRoot","LocalModelSource","setModel","submitModel","updateModel","getSelection","getViewport","computedBounds","doSubmitModel","layoutResult","error_1","layoutEngine","addElements","elements_1","anye","removeElements","elements_2","handleRequestPopupModel","popupModelProvider","popupRoot","getPopupModel","LoggingAction","caller","params","ForwardingLogger","logLevel","forward","info","console","date","Date","toLocaleTimeString","stringify","modelSourceProvider","applyBounds","applyAlignment","WebSocketDiagramServer","listen","webSocket","disconnect","send","navigator","userAgent","metaKey","ctrlKey","isCrossSite","url","location","baseURL","protocol","host","rgb","red","green","blue","toSVG","ColorMap","stops","getColor","pointEquals","point1","point2","normalize","mag","magnitude","pow","minX","minY","Direction","angleOfPoint","lengthProduct","dotProduct","acos","normalized","toRadians","bottomRightSideLine","topRightSideLine","bottomLeftSideLine","topLeftSideLine","slope","MAX_SAFE_INTEGER","otherLine","hasIndistinctPoints","x1","y1","x2","y2","x3","y3","x4","y4","denominator","numeratorA","numeratorB","determinantA","determinantB","l1","l2","getMetadata","startFn","nextFn","filterIterable","createIterator","DONE_RESULT","collection","method","ArrayIterator","array","getActualCode","keyCode","STRING_CODE","findIndex","altKey","addKeyCode","stringCode","numericCode","none","ConsoleLogger","viewOptions","consoleArguments","isObject","partial","ProviderRegistry","cstr","existingCstr","existingFactory","instance","existingInstance","instances","deregisterAll","existingInstances","autocomplete","settings","debounceTimer","containerStyle","mobileFirefox","preventSubmit","keyUpEventName","items","inputValue","minLen","keypressCounter","detach","clearDebounceTimer","attach","containerDisplayed","updatePosition","offsetWidth","offsetHeight","renderGroup","groupName","groupDiv","createDocumentFragment","prevGroup","ev","stopPropagation","empty","updateScroll","updateIfDisplayed","resizeEventHandler","scrollEventHandler","keyupEventHandler","which","ignore_1","startFetch","getElementsByClassName","previous","previousElementSibling","selectBottom","containerBottom","selectPrev","selectNext","keydownEventHandler","containerIsDisplayed","focusEventHandler","savedKeypressCounter","blurEventHandler","removeEventListener","evt","autoBom","XMLHttpRequest","responseType","onload","response","onerror","status","dispatchEvent","MouseEvent","createEvent","initMouseEvent","self","HTMLAnchorElement","URL","webkitURL","download","rel","href","origin","createObjectURL","revokeObjectURL","msSaveOrOpenBlob","innerText","safari","FileReader","onloadend","readAsDataURL","l","tagProperty","tagParameter","ERROR_MSGS","METADATA_KEY","_tagParameterOrProperty","metadataKey","annotationTarget","parameterIndex","paramsOrPropertiesMetadata","isParameterDecorator","INVALID_DECORATOR_OPERATION","hasOwnMetadata","paramOrPropertyMetadata","paramOrPropertyMetadata_1","DUPLICATED_METADATA","defineMetadata","_decorate","_param","TAGGED","TAGGED_PROP","LazyServiceIdentifer","error_msgs_1","metadata_1","decorator_utils_1","cb","_cb","unwrap","serviceIdentifier","targetKey","UNDEFINED_INJECT_ANNOTATION","Metadata","INJECT_TAG","ERRORS_MSGS","PARAM_TYPES","DUPLICATED_INJECTABLE_DECORATOR","types","DESIGN_PARAM_TYPES","MULTI_INJECT_TAG","named","NAMED_TAG","OPTIONAL_TAG","propertyKey","POST_CONSTRUCT","MULTIPLE_POST_CONSTRUCT_METHODS","tagged","metadataValue","targetName","NAME_TAG","unmanaged","UNMANAGED_TAG","Binding","literal_types_1","id_1","scope","activated","BindingTypeEnum","Invalid","constraint","implementationType","cache","onActivation","dynamicValue","clone","BindingCount","MultipleBindingsAvailable","NoBindingsAvailable","OnlyOneBindingAvailable","STACK_OVERFLOW","CIRCULAR_DEPENDENCY_IN_FACTORY","POST_CONSTRUCT_ERROR","CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK","CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE","CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE","CONTAINER_OPTIONS_MUST_BE_AN_OBJECT","ARGUMENTS_LENGTH_MISMATCH","INVALID_TO_SELF_VALUE","INVALID_FUNCTION_BINDING","INVALID_MIDDLEWARE_RETURN","NO_MORE_SNAPSHOTS_AVAILABLE","INVALID_BINDING_TYPE","NOT_IMPLEMENTED","CIRCULAR_DEPENDENCY","MISSING_INJECT_ANNOTATION","MISSING_INJECTABLE_ANNOTATION","NOT_REGISTERED","CANNOT_UNBIND","AMBIGUOUS_MATCH","KEY_NOT_FOUND","NULL_ARGUMENT","values","TargetTypeEnum","BindingScopeEnum","Request","Singleton","Transient","ConstantValue","Constructor","DynamicValue","Factory","Instance","Provider","ClassProperty","ConstructorArgument","Variable","binding_1","metadata_reader_1","planner_1","resolver_1","binding_to_syntax_1","serialization_1","container_snapshot_1","lookup_1","defaultScope","autoBindInjectable","skipBaseClassChecks","_bindingDictionary","Lookup","_snapshots","_middleware","_metadataReader","MetadataReader","container1","container2","bindingDictionary","getBindingDictionary","bindingDictionary1","bindingDictionary2","copyDictionary","destination","traverse","binding","getHelpers","_getContainerModuleHelpersFactory","modules_1","currentModule","containerModuleHelpers","bindFunction","unbindFunction","isboundFunction","rebindFunction","loadAsync","modules_2","unload","conditionFactory","expected","moduleId","condition","removeByCondition","BindingToSyntax","getServiceIdentifierAsString","unbindAll","bound","isBoundNamed","isBoundTagged","bindings","request_1","createMockRequest","ContainerSnapshot","of","restore","middleware","applyMiddleware","middlewares","initial","_planAndResolve","applyCustomMetadataReader","metadataReader","_get","getTagged","getNamed","getAll","getAllTagged","getAllNamed","constructorFunction","tempContainer","setModuleId","bindingToSyntax","_binding","getRebindFunction","_rebind","mId","_bind","_isBound","avoidConstraints","isMultiInject","targetType","defaultArgs","contextInterceptor","plan","AsyncContainerModule","_map","getMap","delete","entries","updatedEntries","copy","container_1","container_module_1","injectable_1","tagged_1","named_1","inject_1","optional_1","unmanaged_1","multi_inject_1","target_name_1","post_construct_1","constraint_helpers_1","traverseAncerstors","taggedConstraint","namedConstraint","typeConstraint","binding_utils_1","multiBindToService","Context","addPlan","setCurrentRequest","currentRequest","getConstructorMetadata","constructorFunc","compilerGeneratedMetadata","userGeneratedMetadata","getPropertiesMetadata","Plan","parentContext","rootRequest","binding_count_1","exceptions_1","context_1","plan_1","reflection_utils_1","target_1","cntnr","_getActiveBindings","parentRequest","getBindings","activeBindings","isOptional","serviceIdentifierString","msg","listMetadataForTarget","listRegisteredBindingsForServiceIdentifier","_validateActiveBindingCount","_createSubRequests","childRequest","thePlan","addChildRequest","subChildRequest","dependencies","getDependencies","baseClassDependencyCount","getBaseClassDependencyCount","getFunctionName","dependency","injectMetadata","Target","tagMetadata","_createTarget","isStackOverflowExeption","circularDependencyToException","QueryableString","str","searchString","endsWith","reverseString","reverseSearchString","compareString","getTargets","constructorName","isBaseClass","serviceIdentifiers","constructorArgsMetadata","constructorTargets","iterations","targets","getConstructorArgsAsTarget","getConstructorArgsAsTargets","propertyTargets","getClassPropsAsTargets","targetMetadata","formatTargetMetadata","isManaged","injectIdentifier","classPropsMetadata","keys_1","baseConstructor","baseTargets","targetMetadataMap","unmanagedCount","dependencyCount","childRequests","requestScope","queryable_string_1","namedOrTagged","metadataItem","hasTag","matchesArray","matchesTag","isNamed","isTagged","getNamedTag","getCustomTags","matchesNamedTag","resolveInstance","resolveRequest","Func","injections","constructorInjections","propertyInjectionsRequests","propertyInjections","injection","_injectProperties","hasMetadata","_postConstruct","instantiation_1","invokeFactory","factoryType","_resolveRequest","targetIsAnArray","targetParentIsNotAnArray","_f","isSingleton","isRequestSingleton","BindingInSyntax","binding_when_on_syntax_1","inRequestScope","BindingWhenOnSyntax","inTransientScope","BindingInWhenOnSyntax","binding_in_syntax_1","binding_on_syntax_1","binding_when_syntax_1","_bindingWhenSyntax","BindingWhenSyntax","_bindingOnSyntax","BindingOnSyntax","_bindingInSyntax","when","whenTargetNamed","whenTargetIsDefault","whenTargetTagged","whenInjectedInto","whenParentNamed","whenParentTagged","whenAnyAncestorIs","ancestor","whenNoAncestorIs","whenAnyAncestorNamed","whenAnyAncestorTagged","whenNoAncestorNamed","whenNoAncestorTagged","whenAnyAncestorMatches","whenNoAncestorMatches","handler","binding_in_when_on_syntax_1","toFunction","bindingWhenOnSyntax","toAutoFactory","service","metaData","RangeError","idCounter","alreadyDependencyChain","name_1","registeredBindingsList","registeredBindings","services","_createStringArr","req","dependencyChainToString","m_1","namedTag","otherTags","htmlDomApi","createElementNS","namespaceURI","qualifiedName","createTextNode","createComment","newNode","referenceNode","setTextContent","getTextContent","isElement","isText","isComment","primitive","isUndef","isDef","emptyNode","sameVnode","vnode1","vnode2","isSameKey","isSameIs","is","createKeyToOldIdx","beginIdx","endIdx","hooks","domApi","cbs","pre","post","api","emptyNodeAt","getAttribute","createRmCb","childElm","listeners","createElm","insertedVnodeQueue","hashIdx","dotIdx","hash","dot","ch","insert","addVnodes","parentElm","startIdx","invokeDestroyHook","removeVnodes","rm","removeHook","patchVnode","_e","oldCh","newCh","oldKeyToIdx","idxInOld","elmToMove","oldStartIdx","newStartIdx","oldEndIdx","oldStartVnode","oldEndVnode","newEndIdx","newStartVnode","newEndVnode","updateChildren","postpatch","isVnode","addNS","childData","oldArgs","newVnode","attachData","real","attachTo","cn","elmAttrs","elmChildren","nodeValue","updateAttrs","oldAttrs","charCodeAt","setAttributeNS","updateClass","oldClass","class","klass","CAPS_REGEX","updateDataset","oldDataset","dataset","datasetModule","invokeHandler","updateEventListeners","oldOn","oldListener","oldElm","updateProps","oldProps","props","raf","reflowForced","setNextFrame","prop","updateStyle","oldStyle","oldHasDel","removeProperty","delayed","name2","setProperty","amount","applied","flattenAndFilter","flattened","flatChildren","TinyQueue","compare","defaultCompare","_down","_up","peek","halfLength","require","__webpack_module_cache__","__webpack_require__","cachedModule","__webpack_modules__","definition","o","toStringTag","_scriptDir","currentScript","src","__filename","initAvoidModule","aa","ba","ready","ca","fa","ha","ja","ka","ea","importScripts","process","versions","la","ma","na","oa","pa","__dirname","readFileSync","buffer","Uint8Array","assert","argv","inspect","read","readbuffer","print","printErr","substr","lastIndexOf","responseText","qa","ra","thisProgram","ta","ua","sa","wasmBinary","noExitRuntime","WebAssembly","wa","xa","TextDecoder","ya","subarray","decode","fromCharCode","za","Aa","Ba","q","Ca","Da","Ea","Fa","Ga","Ia","preRun","shift","unshift","Uc","Ha","Ja","Ka","La","onAbort","RuntimeError","Ma","Na","preloadedImages","preloadedAudios","Oa","locateFile","Pa","Ra","Pc","Sa","Gc","Rc","Tc","ud","Gd","td","Hd","rd","Va","Wa","Xa","USER","LOGNAME","PATH","PWD","HOME","LANG","languages","Ya","Za","$a","bb","getTime","getMonth","getFullYear","getDate","setDate","setMonth","setFullYear","db","eb","da","F","getDay","ia","Jc","Oc","I","D","Md","Ld","Mc","Lc","Kc","Nc","Od","Kd","Nd","fb","gb","ceil","hb","jb","ib","Ua","now","copyWithin","asm","HEAP8","Int8Array","HEAP16","Int16Array","HEAP32","Int32Array","HEAPU8","HEAPU16","Uint16Array","HEAPU32","Uint32Array","HEAPF32","Float32Array","HEAPF64","Float64Array","monitorRunDependencies","clearInterval","credentials","ok","arrayBuffer","Qa","instantiate","instantiateWasm","instantiateStreaming","___wasm_call_ctors","_malloc","_free","Ce","kb","_emscripten_bind_VoidPtr___destroy___0","lb","_emscripten_bind_HyperedgeImprover_HyperedgeImprover_0","mb","_emscripten_bind_HyperedgeImprover_clear_0","u","nb","_emscripten_bind_HyperedgeImprover_setRouter_1","ob","_emscripten_bind_HyperedgeImprover___destroy___0","w","pb","_emscripten_bind_Box_Box_0","qb","_emscripten_bind_Box_length_1","rb","_emscripten_bind_Box_width_0","z","sb","_emscripten_bind_Box_height_0","A","tb","_emscripten_bind_Box_get_min_0","B","ub","_emscripten_bind_Box_set_min_1","C","vb","_emscripten_bind_Box_get_max_0","wb","_emscripten_bind_Box_set_max_1","E","xb","_emscripten_bind_Box___destroy___0","yb","_emscripten_bind_PolygonInterface_clear_0","G","zb","_emscripten_bind_PolygonInterface_empty_0","H","Ab","_emscripten_bind_PolygonInterface_size_0","Bb","_emscripten_bind_PolygonInterface_id_0","J","Cb","_emscripten_bind_PolygonInterface_at_1","K","Db","_emscripten_bind_PolygonInterface_boundingRectPolygon_0","L","Eb","_emscripten_bind_PolygonInterface_offsetBoundingBox_1","M","Fb","_emscripten_bind_PolygonInterface_offsetPolygon_1","N","Gb","_emscripten_bind_PolygonInterface___destroy___0","O","Hb","_emscripten_bind_Polygon_Polygon_0","Ib","_emscripten_bind_Polygon_Polygon_1","Q","Jb","_emscripten_bind_Polygon_setPoint_2","R","Kb","_emscripten_bind_Polygon_size_0","S","Lb","_emscripten_bind_Polygon_get_ps_1","T","Mb","_emscripten_bind_Polygon_set_ps_2","U","Nb","_emscripten_bind_Polygon___destroy___0","V","Ob","_emscripten_bind_Point_Point_0","W","Pb","_emscripten_bind_Point_Point_2","X","Qb","_emscripten_bind_Point_equal_1","Y","Rb","_emscripten_bind_Point_get_x_0","Z","Sb","_emscripten_bind_Point_set_x_1","Tb","_emscripten_bind_Point_get_y_0","$","Ub","_emscripten_bind_Point_set_y_1","Vb","_emscripten_bind_Point_get_id_0","Wb","_emscripten_bind_Point_set_id_1","Xb","_emscripten_bind_Point_get_vn_0","Yb","_emscripten_bind_Point_set_vn_1","Zb","_emscripten_bind_Point___destroy___0","$b","_emscripten_bind_Rectangle_Rectangle_3","ga","ac","_emscripten_bind_Rectangle___destroy___0","bc","_emscripten_bind_HyperedgeTreeNode_HyperedgeTreeNode_0","cc","_emscripten_bind_HyperedgeTreeNode_writeEdgesToConns_2","dc","_emscripten_bind_HyperedgeTreeNode___destroy___0","ec","_emscripten_bind_HyperedgeTreeEdge_HyperedgeTreeEdge_3","fc","_emscripten_bind_HyperedgeTreeEdge___destroy___0","hc","_emscripten_bind_AStarPath_AStarPath_0","ic","_emscripten_bind_AStarPath_search_4","jc","_emscripten_bind_AStarPath___destroy___0","kc","_emscripten_bind_ConnEnd_ConnEnd_1","lc","_emscripten_bind_ConnEnd_ConnEnd_2","mc","_emscripten_bind_ConnEnd___destroy___0","nc","_emscripten_bind_ActionInfo_ActionInfo_2","oc","_emscripten_bind_ActionInfo_ActionInfo_3","pc","_emscripten_bind_ActionInfo_ActionInfo_4","va","qc","_emscripten_bind_ActionInfo_obstacle_0","rc","_emscripten_bind_ActionInfo_shape_0","sc","_emscripten_bind_ActionInfo_conn_0","tc","_emscripten_bind_ActionInfo_junction_0","uc","_emscripten_bind_ActionInfo_addConnEndUpdate_3","vc","_emscripten_bind_ActionInfo_get_type_0","wc","_emscripten_bind_ActionInfo_set_type_1","xc","_emscripten_bind_ActionInfo_get_objPtr_0","yc","_emscripten_bind_ActionInfo_set_objPtr_1","zc","_emscripten_bind_ActionInfo_get_newPoly_0","Ac","_emscripten_bind_ActionInfo_set_newPoly_1","Bc","_emscripten_bind_ActionInfo_get_newPosition_0","Cc","_emscripten_bind_ActionInfo_set_newPosition_1","Dc","_emscripten_bind_ActionInfo_get_firstMove_0","Ec","_emscripten_bind_ActionInfo_set_firstMove_1","Fc","_emscripten_bind_ActionInfo___destroy___0","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_2","Hc","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_3","Ic","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_6","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_7","_emscripten_bind_ShapeConnectionPin_setConnectionCost_1","_emscripten_bind_ShapeConnectionPin_position_0","_emscripten_bind_ShapeConnectionPin_position_1","_emscripten_bind_ShapeConnectionPin_directions_0","Ta","_emscripten_bind_ShapeConnectionPin_setExclusive_1","_emscripten_bind_ShapeConnectionPin_isExclusive_0","Qc","_emscripten_bind_ShapeConnectionPin___destroy___0","_emscripten_bind_Obstacle_id_0","Sc","_emscripten_bind_Obstacle_polygon_0","_emscripten_bind_Obstacle_router_0","_emscripten_bind_Obstacle_position_0","Vc","_emscripten_bind_Obstacle___destroy___0","Wc","_emscripten_bind_JunctionRef_JunctionRef_2","Xc","_emscripten_bind_JunctionRef_JunctionRef_3","Yc","_emscripten_bind_JunctionRef_position_0","Zc","_emscripten_bind_JunctionRef___destroy___0","$c","_emscripten_bind_ShapeRef_ShapeRef_2","ad","_emscripten_bind_ShapeRef_ShapeRef_3","bd","_emscripten_bind_ShapeRef_polygon_0","cd","_emscripten_bind_ShapeRef_position_0","dd","_emscripten_bind_ShapeRef___destroy___0","ed","_emscripten_bind_HyperedgeNewAndDeletedObjectLists___destroy___0","fd","_emscripten_bind_HyperedgeRerouter_HyperedgeRerouter_0","gd","_emscripten_bind_HyperedgeRerouter_registerHyperedgeForRerouting_1","hd","_emscripten_bind_HyperedgeRerouter___destroy___0","_emscripten_bind_VertInf___destroy___0","jd","_emscripten_bind_VertID_VertID_0","kd","_emscripten_bind_VertID_VertID_2","ld","_emscripten_bind_VertID_VertID_3","md","_emscripten_bind_VertID_get_objID_0","nd","_emscripten_bind_VertID_set_objID_1","od","_emscripten_bind_VertID_get_vn_0","pd","_emscripten_bind_VertID_set_vn_1","qd","_emscripten_bind_VertID_get_props_0","_emscripten_bind_VertID_set_props_1","sd","_emscripten_bind_VertID_get_src_0","_emscripten_bind_VertID_get_tar_0","_emscripten_bind_VertID_get_PROP_ConnPoint_0","vd","_emscripten_bind_VertID_get_PROP_OrthShapeEdge_0","wd","_emscripten_bind_VertID_get_PROP_ConnectionPin_0","xd","_emscripten_bind_VertID_get_PROP_ConnCheckpoint_0","yd","_emscripten_bind_VertID_get_PROP_DummyPinHelper_0","zd","_emscripten_bind_VertID___destroy___0","Ad","_emscripten_bind_MinimumTerminalSpanningTree___destroy___0","Bd","_emscripten_bind_Checkpoint_Checkpoint_1","Cd","_emscripten_bind_Checkpoint___destroy___0","Dd","_emscripten_bind_ConnRef_ConnRef_3","Ed","_emscripten_bind_ConnRef_ConnRef_4","Fd","_emscripten_bind_ConnRef_id_0","_emscripten_bind_ConnRef_setCallback_2","_emscripten_bind_ConnRef_setSourceEndpoint_1","Id","_emscripten_bind_ConnRef_setDestEndpoint_1","Jd","_emscripten_bind_ConnRef_routingType_0","_emscripten_bind_ConnRef_setRoutingType_1","_emscripten_bind_ConnRef_displayRoute_0","_emscripten_bind_ConnRef___destroy___0","_emscripten_bind_EdgeInf_EdgeInf_2","_emscripten_bind_EdgeInf_EdgeInf_3","Pd","_emscripten_bind_EdgeInf___destroy___0","Qd","_emscripten_bind_LineRep_get_begin_0","Rd","_emscripten_bind_LineRep_set_begin_1","Sd","_emscripten_bind_LineRep_get_end_0","Td","_emscripten_bind_LineRep_set_end_1","Ud","_emscripten_bind_LineRep___destroy___0","Vd","_emscripten_bind_Router_Router_1","Wd","_emscripten_bind_Router_processTransaction_0","Xd","_emscripten_bind_Router_printInfo_0","Yd","_emscripten_bind_Router_deleteConnector_1","Zd","_emscripten_bind_Router_moveShape_3","$d","_emscripten_bind_Router___destroy___0","ae","_emscripten_enum_Avoid_ConnDirFlag_ConnDirNone","be","_emscripten_enum_Avoid_ConnDirFlag_ConnDirUp","ce","_emscripten_enum_Avoid_ConnDirFlag_ConnDirDown","gc","de","_emscripten_enum_Avoid_ConnDirFlag_ConnDirLeft","ee","_emscripten_enum_Avoid_ConnDirFlag_ConnDirRight","fe","_emscripten_enum_Avoid_ConnDirFlag_ConnDirAll","ge","_emscripten_enum_Avoid_ConnEndType_ConnEndPoint","he","_emscripten_enum_Avoid_ConnEndType_ConnEndShapePin","ie","_emscripten_enum_Avoid_ConnEndType_ConnEndJunction","je","_emscripten_enum_Avoid_ConnEndType_ConnEndEmpty","ke","_emscripten_enum_Avoid_ActionType_ShapeMove","le","_emscripten_enum_Avoid_ActionType_ShapeAdd","me","_emscripten_enum_Avoid_ActionType_ShapeRemove","ne","_emscripten_enum_Avoid_ActionType_JunctionMove","oe","_emscripten_enum_Avoid_ActionType_JunctionAdd","pe","_emscripten_enum_Avoid_ActionType_JunctionRemove","qe","_emscripten_enum_Avoid_ActionType_ConnChange","re","_emscripten_enum_Avoid_ActionType_ConnectionPinChange","se","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW90","te","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW180","ue","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_CW270","ve","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipX","we","_emscripten_enum_Avoid_ShapeTransformationType_TransformationType_FlipY","xe","_emscripten_enum_Avoid_ConnType_ConnType_None","ye","_emscripten_enum_Avoid_ConnType_ConnType_PolyLine","ze","_emscripten_enum_Avoid_ConnType_ConnType_Orthogonal","Ae","_emscripten_enum_Avoid_RouterFlag_PolyLineRouting","Be","_emscripten_enum_Avoid_RouterFlag_OrthogonalRouting","Ee","calledRun","onRuntimeInitialized","postRun","setStatus","De","preInit","WrapperObject","getCache","wrapPointer","castObject","NULL","__destroy__","getPointer","Fe","Ge","He","Ie","_emscripten_bind_Point_Point_1","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_4","_emscripten_bind_ShapeConnectionPin_ShapeConnectionPin_5","_emscripten_bind_VertID_VertID_1","Je","VoidPtr","HyperedgeImprover","setRouter","Box","get_min","set_min","get_max","set_max","PolygonInterface","at","boundingRectPolygon","offsetBoundingBox","offsetPolygon","Polygon","setPoint","get_ps","set_ps","Point","get_x","set_x","get_y","set_y","get_id","set_id","get_vn","set_vn","Rectangle","HyperedgeTreeNode","writeEdgesToConns","HyperedgeTreeEdge","AStarPath","search","ConnEnd","ActionInfo","obstacle","shape","conn","junction","addConnEndUpdate","get_type","set_type","get_objPtr","set_objPtr","get_newPoly","set_newPoly","get_newPosition","set_newPosition","get_firstMove","set_firstMove","ShapeConnectionPin","setConnectionCost","directions","setExclusive","isExclusive","Obstacle","polygon","JunctionRef","ShapeRef","HyperedgeNewAndDeletedObjectLists","HyperedgeRerouter","registerHyperedgeForRerouting","VertInf","VertID","get_objID","set_objID","get_props","set_props","get_src","get_tar","get_PROP_ConnPoint","get_PROP_OrthShapeEdge","get_PROP_ConnectionPin","get_PROP_ConnCheckpoint","get_PROP_DummyPinHelper","MinimumTerminalSpanningTree","Checkpoint","ConnRef","setCallback","WeakMap","grow","parameters","results","Module","setSourceEndpoint","setDestEndpoint","routingType","setRoutingType","displayRoute","EdgeInf","LineRep","get_begin","set_begin","get_end","set_end","Router","processTransaction","printInfo","deleteConnector","moveShape","ConnDirNone","ConnDirUp","ConnDirDown","ConnDirLeft","ConnDirRight","ConnDirAll","ConnEndPoint","ConnEndShapePin","ConnEndJunction","ConnEndEmpty","ShapeMove","ShapeAdd","ShapeRemove","JunctionMove","JunctionAdd","JunctionRemove","ConnChange","ConnectionPinChange","TransformationType_CW90","TransformationType_CW180","TransformationType_CW270","TransformationType_FlipX","TransformationType_FlipY","ConnType_None","ConnType_PolyLine","ConnType_Orthogonal","PolyLineRouting","OrthogonalRouting","AvoidLib","avoidLib","getInstance","LibavoidRouter"],"sourceRoot":""}